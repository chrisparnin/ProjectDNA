[
	[
	{"endColumn":2,"endLine":34,"scriptId":"25","startColumn":0,"startLine":0,"url":"extensions::unload_event"},{}
	],
[
{"endColumn":42,"endLine":17,"scriptId":"26","startColumn":16,"startLine":17,"url":"http://www.tumblr.com/dashboard"},{"scriptSource":"ENVIRONMENT = 'production'"}
],
[
{"endColumn":8,"endLine":22,"scriptId":"27","startColumn":16,"startLine":18,"url":"http://www.tumblr.com/dashboard"},{"scriptSource":"\n            var Tumblr = Tumblr || {};\n            Tumblr.enable_capture_js = true;\n            Tumblr.enable_eventbug   = false;\n        "}
],
[
{"endColumn":63,"endLine":24,"scriptId":"28","startColumn":16,"startLine":24,"url":"http://www.tumblr.com/dashboard"},{"scriptSource":"var tinyMCE,_sf_startpt=(new Date()).getTime();"}
],
[
{"endColumn":0,"endLine":81,"scriptId":"29","startColumn":8,"startLine":57,"url":"http://www.tumblr.com/dashboard"},{"scriptSource":"\n(function(root, exports, store) {\n    'use strict';\n    function decode(s) {\n        var e={},i,b=0,c,x,l=0,a,r='',w=String.fromCharCode,L=s.length;\n        var A='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n        for(i=0;i<64;i++){e[A.charAt(i)]=i;}\n        for(x=0;x<L;x++){\n            c=e[s.charAt(x)];b=(b<<6)+c;l+=6;\n            while(l>=8){((a=(b>>>(l-=8))&0xff)||(x<(L-2)))&&(r+=w(a));}\n        }\n        return r;\n    }\n    function isFunction(fn) { return (typeof fn === 'function'); }\n    function maybeCall(fn, val) { return isFunction(fn) ? fn.call(this, val) : fn; }\n    try { store = JSON.parse((isFunction(root.atob)?root.atob:decode)(store)); } catch (err) { store = {}; }\n    exports.Features = exports.Flags = function(name) {\n        var has = !!(store[name]);\n        return function flag(accept, reject) {\n            var result = maybeCall.call(this, (has ? accept : reject), has);\n            return (result !== void 0) ? result : flag;\n        };\n    };\n})(this, this.Tumblr || (this.Tumblr = {}), \"eyJmaWx0ZXJfbnNmdyI6dHJ1ZSwiaXNfbG9nZ2VkX2luIjp0cnVlLCJzZWN1cmVfZm9ybV9rZXkiOnRydWUsImVuYWJsZV9uZXdfaGlnaGxpZ2h0ZWRfcG9zdHMiOnRydWUsInNlYXJjaF9yZXN1bHRzX3JlZGVzaWduIjp0cnVlLCJ0dW1ibGVsb2dfcG9wb3ZlciI6dHJ1ZSwiZmxhdF9waGFzZV90d28iOnRydWUsImVuYWJsZV9jYXB0dXJlX2pzIjp0cnVlLCJuZXdfcG9zdF9mb3JtcyI6dHJ1ZSwidGFibGV0X2Jhbm5lcl9hY3RpdmUiOnRydWUsIm1vYmlsZV9iYW5uZXJfYWN0aXZlIjp0cnVlLCJ1c2VyX21lbnRpb25zIjp0cnVlLCJodG1sNV9hdWRpb19wbGF5ZXIiOnRydWUsInRhYl9zd2l0Y2hlciI6dHJ1ZSwiZmFzdF9jb21wb3NlIjp0cnVlLCJuZXdfdGVybXNfb2Zfc2VydmljZSI6dHJ1ZSwiZW5hYmxlX2pzX2VwaGVtZXJhbF9sb2ciOnRydWUsImZhc3RfZGFzaGJvYXJkIjp0cnVlLCJzaG93X2ZpeGVkX2Zvb3RlciI6dHJ1ZSwiYXNrX2Zvcm0iOnRydWUsInVzZV9uZXdfZm9ybXMiOnRydWUsInByb3RvdHlwZV9mcmVlIjp0cnVlfQ==\");\n"}
],
[
{"endColumn":81,"endLine":83,"scriptId":"30","startColumn":35,"startLine":83,"url":"http://www.tumblr.com/dashboard"},{"scriptSource":"if (top != self) top.location = self.location;"}
],
[
{"endColumn":2168,"endLine":0,"scriptId":"31","startColumn":0,"startLine":0,"url":"http://assets.tumblr.com/languages/strings/en_US.js?1337"},{"scriptSource":"var language_for_tinymce=\"en\";var l10n_str={ajax_error:\"Sorry, we seem to be having technical trouble.  Please try again later.\",loading:\"Loading...\",remove_tag:\"Remove tag\",promote_this_post_in:\"Promote this post in\",promote:\"Promote\",promote_warning_none:\"You have reached the promote limit in %1$s for today.\",promote_warning_singular:\"You can promote %1$s more post in %2$s today.\",promote_warning_plural:\"You can promote %1$s more posts in %2$s today.\",markdown:\"markdown\",html_enabled:\"HTML enabled\",bold:\"Bold\",italic:\"Italic\",strikethrough:\"Strikethrough\",enter_the_url:\"Enter the URL:\",insert_link:\"Insert link\",adding_tags:\"Adding tags...\",removing_tags:\"Removing tags...\",only_100_posts:\"You can only edit 100 posts at a time.\",select_posts_to_edit:\"Select the posts you want to edit.\",select_posts_to_delete:\"Select the tags you would like to remove.\",enter_tags_to_add:\"Enter tags to add to the selected posts.\",select_posts_to_tag:\"Select the posts you want to add tags to.\",wait_for_last_operation:\"Please wait until the last operation has finished.\",confirm_delete_selected_posts:\"Are you sure you want to delete the selected posts?\",my_posts:\"My Posts\",search_tumblr:\"Search Tumblr\",my_dashboard:\"My Dashboard\",search_posts:\"Search Posts\",search_help:\"Search Help\",search_by_tag:\"Search by Tag\",search:\"Search\",this_tumblelog:\"This Tumblelog\",you_answered:\"You answered:\",thank_you:\"Thank you!\",confirm_block_this_person:\"Are you sure you want to ignore this person on your Dashboard and blog?\",cancel:\"cancel\",reply:\"Reply\",\"250_max\":\"250 max\",confirm_block:\"Are you sure you want to ignore %1$s on your Dashboard and blog?\",new_posts:\"%1$s new posts\",over_max_file_size_mb:\"Uh oh, this file is larger than the maximum %1$s MB.\",empty_query:\"How can we help?\",image_upload:\"Upload Image\",old_password:\"You must enter your old password.\",password_mismatch:\"The passwords don't match.  Please try again.\",confirm_password:\"You must confirm your password.\",valid_email:\"You must enter a valid email address.\",unsaved_changes:\"You have unsaved changes.\"};var localized_str=l10n_str;for(var i in l10n_str){eval(\"localized_str_\"+i+\" = l10n_str['\"+i+\"']\")};"}
],
[
{"endColumn":49,"endLine":0,"scriptId":"32","startColumn":0,"startLine":0,"url":""},{"scriptSource":"localized_str_ajax_error = l10n_str['ajax_error']"}
],
[
{"endColumn":43,"endLine":0,"scriptId":"33","startColumn":0,"startLine":0,"url":""},{"scriptSource":"localized_str_loading = l10n_str['loading']"}
],
[
{"endColumn":49,"endLine":0,"scriptId":"34","startColumn":0,"startLine":0,"url":""},{"scriptSource":"localized_str_remove_tag = l10n_str['remove_tag']"}
],
[
{"endColumn":69,"endLine":0,"scriptId":"35","startColumn":0,"startLine":0,"url":""},{"scriptSource":"localized_str_promote_this_post_in = l10n_str['promote_this_post_in']"}
],
[
{"endColumn":43,"endLine":0,"scriptId":"36","startColumn":0,"startLine":0,"url":""},{"scriptSource":"localized_str_promote = l10n_str['promote']"}
],
[
{"endColumn":69,"endLine":0,"scriptId":"37","startColumn":0,"startLine":0,"url":""},{"scriptSource":"localized_str_promote_warning_none = l10n_str['promote_warning_none']"}
],
[
{"endColumn":77,"endLine":0,"scriptId":"38","startColumn":0,"startLine":0,"url":""},{"scriptSource":"localized_str_promote_warning_singular = l10n_str['promote_warning_singular']"}
],
[
{"endColumn":73,"endLine":0,"scriptId":"39","startColumn":0,"startLine":0,"url":""},{"scriptSource":"localized_str_promote_warning_plural = l10n_str['promote_warning_plural']"}
],
[
{"endColumn":45,"endLine":0,"scriptId":"40","startColumn":0,"startLine":0,"url":""},{"scriptSource":"localized_str_markdown = l10n_str['markdown']"}
],
[
{"endColumn":53,"endLine":0,"scriptId":"41","startColumn":0,"startLine":0,"url":""},{"scriptSource":"localized_str_html_enabled = l10n_str['html_enabled']"}
],
[
{"endColumn":37,"endLine":0,"scriptId":"42","startColumn":0,"startLine":0,"url":""},{"scriptSource":"localized_str_bold = l10n_str['bold']"}
],
[
{"endColumn":41,"endLine":0,"scriptId":"43","startColumn":0,"startLine":0,"url":""},{"scriptSource":"localized_str_italic = l10n_str['italic']"}
],
[
{"endColumn":55,"endLine":0,"scriptId":"44","startColumn":0,"startLine":0,"url":""},{"scriptSource":"localized_str_strikethrough = l10n_str['strikethrough']"}
],
[
{"endColumn":55,"endLine":0,"scriptId":"45","startColumn":0,"startLine":0,"url":""},{"scriptSource":"localized_str_enter_the_url = l10n_str['enter_the_url']"}
],
[
{"endColumn":51,"endLine":0,"scriptId":"46","startColumn":0,"startLine":0,"url":""},{"scriptSource":"localized_str_insert_link = l10n_str['insert_link']"}
],
[
{"endColumn":51,"endLine":0,"scriptId":"47","startColumn":0,"startLine":0,"url":""},{"scriptSource":"localized_str_adding_tags = l10n_str['adding_tags']"}
],
[
{"endColumn":55,"endLine":0,"scriptId":"48","startColumn":0,"startLine":0,"url":""},{"scriptSource":"localized_str_removing_tags = l10n_str['removing_tags']"}
],
[
{"endColumn":57,"endLine":0,"scriptId":"49","startColumn":0,"startLine":0,"url":""},{"scriptSource":"localized_str_only_100_posts = l10n_str['only_100_posts']"}
],
[
{"endColumn":69,"endLine":0,"scriptId":"50","startColumn":0,"startLine":0,"url":""},{"scriptSource":"localized_str_select_posts_to_edit = l10n_str['select_posts_to_edit']"}
],
[
{"endColumn":73,"endLine":0,"scriptId":"51","startColumn":0,"startLine":0,"url":""},{"scriptSource":"localized_str_select_posts_to_delete = l10n_str['select_posts_to_delete']"}
],
[
{"endColumn":63,"endLine":0,"scriptId":"52","startColumn":0,"startLine":0,"url":""},{"scriptSource":"localized_str_enter_tags_to_add = l10n_str['enter_tags_to_add']"}
],
[
{"endColumn":67,"endLine":0,"scriptId":"53","startColumn":0,"startLine":0,"url":""},{"scriptSource":"localized_str_select_posts_to_tag = l10n_str['select_posts_to_tag']"}
],
[
{"endColumn":75,"endLine":0,"scriptId":"54","startColumn":0,"startLine":0,"url":""},{"scriptSource":"localized_str_wait_for_last_operation = l10n_str['wait_for_last_operation']"}
],
[
{"endColumn":87,"endLine":0,"scriptId":"55","startColumn":0,"startLine":0,"url":""},{"scriptSource":"localized_str_confirm_delete_selected_posts = l10n_str['confirm_delete_selected_posts']"}
],
[
{"endColumn":45,"endLine":0,"scriptId":"56","startColumn":0,"startLine":0,"url":""},{"scriptSource":"localized_str_my_posts = l10n_str['my_posts']"}
],
[
{"endColumn":55,"endLine":0,"scriptId":"57","startColumn":0,"startLine":0,"url":""},{"scriptSource":"localized_str_search_tumblr = l10n_str['search_tumblr']"}
],
[
{"endColumn":53,"endLine":0,"scriptId":"58","startColumn":0,"startLine":0,"url":""},{"scriptSource":"localized_str_my_dashboard = l10n_str['my_dashboard']"}
],
[
{"endColumn":53,"endLine":0,"scriptId":"59","startColumn":0,"startLine":0,"url":""},{"scriptSource":"localized_str_search_posts = l10n_str['search_posts']"}
],
[
{"endColumn":51,"endLine":0,"scriptId":"60","startColumn":0,"startLine":0,"url":""},{"scriptSource":"localized_str_search_help = l10n_str['search_help']"}
],
[
{"endColumn":55,"endLine":0,"scriptId":"61","startColumn":0,"startLine":0,"url":""},{"scriptSource":"localized_str_search_by_tag = l10n_str['search_by_tag']"}
],
[
{"endColumn":41,"endLine":0,"scriptId":"62","startColumn":0,"startLine":0,"url":""},{"scriptSource":"localized_str_search = l10n_str['search']"}
],
[
{"endColumn":57,"endLine":0,"scriptId":"63","startColumn":0,"startLine":0,"url":""},{"scriptSource":"localized_str_this_tumblelog = l10n_str['this_tumblelog']"}
],
[
{"endColumn":53,"endLine":0,"scriptId":"64","startColumn":0,"startLine":0,"url":""},{"scriptSource":"localized_str_you_answered = l10n_str['you_answered']"}
],
[
{"endColumn":47,"endLine":0,"scriptId":"65","startColumn":0,"startLine":0,"url":""},{"scriptSource":"localized_str_thank_you = l10n_str['thank_you']"}
],
[
{"endColumn":79,"endLine":0,"scriptId":"66","startColumn":0,"startLine":0,"url":""},{"scriptSource":"localized_str_confirm_block_this_person = l10n_str['confirm_block_this_person']"}
],
[
{"endColumn":41,"endLine":0,"scriptId":"67","startColumn":0,"startLine":0,"url":""},{"scriptSource":"localized_str_cancel = l10n_str['cancel']"}
],
[
{"endColumn":39,"endLine":0,"scriptId":"68","startColumn":0,"startLine":0,"url":""},{"scriptSource":"localized_str_reply = l10n_str['reply']"}
],
[
{"endColumn":43,"endLine":0,"scriptId":"69","startColumn":0,"startLine":0,"url":""},{"scriptSource":"localized_str_250_max = l10n_str['250_max']"}
],
[
{"endColumn":55,"endLine":0,"scriptId":"70","startColumn":0,"startLine":0,"url":""},{"scriptSource":"localized_str_confirm_block = l10n_str['confirm_block']"}
],
[
{"endColumn":47,"endLine":0,"scriptId":"71","startColumn":0,"startLine":0,"url":""},{"scriptSource":"localized_str_new_posts = l10n_str['new_posts']"}
],
[
{"endColumn":71,"endLine":0,"scriptId":"72","startColumn":0,"startLine":0,"url":""},{"scriptSource":"localized_str_over_max_file_size_mb = l10n_str['over_max_file_size_mb']"}
],
[
{"endColumn":51,"endLine":0,"scriptId":"73","startColumn":0,"startLine":0,"url":""},{"scriptSource":"localized_str_empty_query = l10n_str['empty_query']"}
],
[
{"endColumn":53,"endLine":0,"scriptId":"74","startColumn":0,"startLine":0,"url":""},{"scriptSource":"localized_str_image_upload = l10n_str['image_upload']"}
],
[
{"endColumn":53,"endLine":0,"scriptId":"75","startColumn":0,"startLine":0,"url":""},{"scriptSource":"localized_str_old_password = l10n_str['old_password']"}
],
[
{"endColumn":63,"endLine":0,"scriptId":"76","startColumn":0,"startLine":0,"url":""},{"scriptSource":"localized_str_password_mismatch = l10n_str['password_mismatch']"}
],
[
{"endColumn":61,"endLine":0,"scriptId":"77","startColumn":0,"startLine":0,"url":""},{"scriptSource":"localized_str_confirm_password = l10n_str['confirm_password']"}
],
[
{"endColumn":51,"endLine":0,"scriptId":"78","startColumn":0,"startLine":0,"url":""},{"scriptSource":"localized_str_valid_email = l10n_str['valid_email']"}
],
[
{"endColumn":59,"endLine":0,"scriptId":"79","startColumn":0,"startLine":0,"url":""},{"scriptSource":"localized_str_unsaved_changes = l10n_str['unsaved_changes']"}
],
[
{"endColumn":0,"endLine":33,"scriptId":"80","startColumn":0,"startLine":0,"url":"http://assets.tumblr.com/assets/scripts/vendor/jquery_backbone_lodash.js?_v=ebfa8cfe213c388f9d2e0fef93e73e32"},{"scriptSource":"/*!\n * jQuery JavaScript Library v1.10.2\n * http://jquery.com/\n *\n * Includes Sizzle.js\n * http://sizzlejs.com/\n *\n * Copyright 2005, 2013 jQuery Foundation, Inc. and other contributors\n * Released under the MIT license\n * http://jquery.org/license\n *\n * Date: 2013-07-03T13:48Z\n */\n(function(a1,aE){var ag,w,aA=typeof aE,aJ=a1.location,l=a1.document,bV=l.documentElement,bh=a1.jQuery,G=a1.$,Y={},a5=[],s=\"1.10.2\",aG=a5.concat,am=a5.push,a3=a5.slice,aK=a5.indexOf,y=Y.toString,T=Y.hasOwnProperty,aO=s.trim,bI=function(e,b3){return new bI.fn.init(e,b3,w)},bz=/[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)/.source,aa=/\\S+/g,B=/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g,bq=/^(?:\\s*(<[\\w\\W]+>)[^>]*|#([\\w-]*))$/,a=/^<(\\w+)\\s*\\/?>(?:<\\/\\1>|)$/,bg=/^[\\],:{}\\s]*$/,bj=/(?:^|:|,)(?:\\s*\\[)+/g,bF=/\\\\(?:[\"\\\\\\/bfnrt]|u[\\da-fA-F]{4})/g,aX=/\"[^\"\\\\\\r\\n]*\"|true|false|null|-?(?:\\d+\\.|)\\d+(?:[eE][+-]?\\d+|)/g,bR=/^-ms-/,aT=/-([\\da-z])/gi,K=function(e,b3){return b3.toUpperCase()},bW=function(e){if(l.addEventListener||e.type===\"load\"||l.readyState===\"complete\"){bk();bI.ready()}},bk=function(){if(l.addEventListener){l.removeEventListener(\"DOMContentLoaded\",bW,false);a1.removeEventListener(\"load\",bW,false)}else{l.detachEvent(\"onreadystatechange\",bW);a1.detachEvent(\"onload\",bW)}};bI.fn=bI.prototype={jquery:s,constructor:bI,init:function(e,b5,b4){var b3,b6;if(!e){return this}if(typeof e===\"string\"){if(e.charAt(0)===\"<\"&&e.charAt(e.length-1)===\">\"&&e.length>=3){b3=[null,e,null]}else{b3=bq.exec(e)}if(b3&&(b3[1]||!b5)){if(b3[1]){b5=b5 instanceof bI?b5[0]:b5;bI.merge(this,bI.parseHTML(b3[1],b5&&b5.nodeType?b5.ownerDocument||b5:l,true));if(a.test(b3[1])&&bI.isPlainObject(b5)){for(b3 in b5){if(bI.isFunction(this[b3])){this[b3](b5[b3])}else{this.attr(b3,b5[b3])}}}return this}else{b6=l.getElementById(b3[2]);if(b6&&b6.parentNode){if(b6.id!==b3[2]){return b4.find(e)}this.length=1;this[0]=b6}this.context=l;this.selector=e;return this}}else{if(!b5||b5.jquery){return(b5||b4).find(e)}else{return this.constructor(b5).find(e)}}}else{if(e.nodeType){this.context=this[0]=e;this.length=1;return this}else{if(bI.isFunction(e)){return b4.ready(e)}}}if(e.selector!==aE){this.selector=e.selector;this.context=e.context}return bI.makeArray(e,this)},selector:\"\",length:0,toArray:function(){return a3.call(this)},get:function(e){return e==null?this.toArray():(e<0?this[this.length+e]:this[e])},pushStack:function(e){var b3=bI.merge(this.constructor(),e);b3.prevObject=this;b3.context=this.context;return b3},each:function(b3,e){return bI.each(this,b3,e)},ready:function(e){bI.ready.promise().done(e);return this},slice:function(){return this.pushStack(a3.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(b4){var e=this.length,b3=+b4+(b4<0?e:0);return this.pushStack(b3>=0&&b3<e?[this[b3]]:[])},map:function(e){return this.pushStack(bI.map(this,function(b4,b3){return e.call(b4,b3,b4)}))},end:function(){return this.prevObject||this.constructor(null)},push:am,sort:[].sort,splice:[].splice};bI.fn.init.prototype=bI.fn;bI.extend=bI.fn.extend=function(){var e,b8,b3,b4,cb,b9,b7=arguments[0]||{},b6=1,b5=arguments.length,ca=false;if(typeof b7===\"boolean\"){ca=b7;b7=arguments[1]||{};b6=2}if(typeof b7!==\"object\"&&!bI.isFunction(b7)){b7={}}if(b5===b6){b7=this;--b6}for(;b6<b5;b6++){if((cb=arguments[b6])!=null){for(b4 in cb){e=b7[b4];b3=cb[b4];if(b7===b3){continue}if(ca&&b3&&(bI.isPlainObject(b3)||(b8=bI.isArray(b3)))){if(b8){b8=false;b9=e&&bI.isArray(e)?e:[]}else{b9=e&&bI.isPlainObject(e)?e:{}}b7[b4]=bI.extend(ca,b9,b3)}else{if(b3!==aE){b7[b4]=b3}}}}}return b7};bI.extend({expando:\"jQuery\"+(s+Math.random()).replace(/\\D/g,\"\"),noConflict:function(e){if(a1.$===bI){a1.$=G}if(e&&a1.jQuery===bI){a1.jQuery=bh}return bI},isReady:false,readyWait:1,holdReady:function(e){if(e){bI.readyWait++}else{bI.ready(true)}},ready:function(e){if(e===true?--bI.readyWait:bI.isReady){return}if(!l.body){return setTimeout(bI.ready)}bI.isReady=true;if(e!==true&&--bI.readyWait>0){return}ag.resolveWith(l,[bI]);if(bI.fn.trigger){bI(l).trigger(\"ready\").off(\"ready\")}},isFunction:function(e){return bI.type(e)===\"function\"},isArray:Array.isArray||function(e){return bI.type(e)===\"array\"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return !isNaN(parseFloat(e))&&isFinite(e)},type:function(e){if(e==null){return String(e)}return typeof e===\"object\"||typeof e===\"function\"?Y[y.call(e)]||\"object\":typeof e},isPlainObject:function(b5){var b3;if(!b5||bI.type(b5)!==\"object\"||b5.nodeType||bI.isWindow(b5)){return false}try{if(b5.constructor&&!T.call(b5,\"constructor\")&&!T.call(b5.constructor.prototype,\"isPrototypeOf\")){return false}}catch(b4){return false}if(bI.support.ownLast){for(b3 in b5){return T.call(b5,b3)}}for(b3 in b5){}return b3===aE||T.call(b5,b3)},isEmptyObject:function(b3){var e;for(e in b3){return false}return true},error:function(e){throw new Error(e)},parseHTML:function(b6,b4,b5){if(!b6||typeof b6!==\"string\"){return null}if(typeof b4===\"boolean\"){b5=b4;b4=false}b4=b4||l;var b3=a.exec(b6),e=!b5&&[];if(b3){return[b4.createElement(b3[1])]}b3=bI.buildFragment([b6],b4,e);if(e){bI(e).remove()}return bI.merge([],b3.childNodes)},parseJSON:function(e){if(a1.JSON&&a1.JSON.parse){return a1.JSON.parse(e)}if(e===null){return e}if(typeof e===\"string\"){e=bI.trim(e);if(e){if(bg.test(e.replace(bF,\"@\").replace(aX,\"]\").replace(bj,\"\"))){return(new Function(\"return \"+e))()}}}bI.error(\"Invalid JSON: \"+e)},parseXML:function(b5){var b3,b4;if(!b5||typeof b5!==\"string\"){return null}try{if(a1.DOMParser){b4=new DOMParser();b3=b4.parseFromString(b5,\"text/xml\")}else{b3=new ActiveXObject(\"Microsoft.XMLDOM\");b3.async=\"false\";b3.loadXML(b5)}}catch(b6){b3=aE}if(!b3||!b3.documentElement||b3.getElementsByTagName(\"parsererror\").length){bI.error(\"Invalid XML: \"+b5)}return b3},noop:function(){},globalEval:function(e){if(e&&bI.trim(e)){(a1.execScript||function(b3){a1[\"eval\"].call(a1,b3)})(e)}},camelCase:function(e){return e.replace(bR,\"ms-\").replace(aT,K)},nodeName:function(b3,e){return b3.nodeName&&b3.nodeName.toLowerCase()===e.toLowerCase()},each:function(b7,b8,b3){var b6,b4=0,b5=b7.length,e=Z(b7);if(b3){if(e){for(;b4<b5;b4++){b6=b8.apply(b7[b4],b3);if(b6===false){break}}}else{for(b4 in b7){b6=b8.apply(b7[b4],b3);if(b6===false){break}}}}else{if(e){for(;b4<b5;b4++){b6=b8.call(b7[b4],b4,b7[b4]);if(b6===false){break}}}else{for(b4 in b7){b6=b8.call(b7[b4],b4,b7[b4]);if(b6===false){break}}}}return b7},trim:aO&&!aO.call(\"\\uFEFF\\xA0\")?function(e){return e==null?\"\":aO.call(e)}:function(e){return e==null?\"\":(e+\"\").replace(B,\"\")},makeArray:function(e,b4){var b3=b4||[];if(e!=null){if(Z(Object(e))){bI.merge(b3,typeof e===\"string\"?[e]:e)}else{am.call(b3,e)}}return b3},inArray:function(b5,b3,b4){var e;if(b3){if(aK){return aK.call(b3,b5,b4)}e=b3.length;b4=b4?b4<0?Math.max(0,e+b4):b4:0;for(;b4<e;b4++){if(b4 in b3&&b3[b4]===b5){return b4}}}return -1},merge:function(b6,b4){var e=b4.length,b5=b6.length,b3=0;if(typeof e===\"number\"){for(;b3<e;b3++){b6[b5++]=b4[b3]}}else{while(b4[b3]!==aE){b6[b5++]=b4[b3++]}}b6.length=b5;return b6},grep:function(b3,b8,e){var b7,b4=[],b5=0,b6=b3.length;e=!!e;for(;b5<b6;b5++){b7=!!b8(b3[b5],b5);if(e!==b7){b4.push(b3[b5])}}return b4},map:function(b4,b9,e){var b8,b6=0,b7=b4.length,b3=Z(b4),b5=[];if(b3){for(;b6<b7;b6++){b8=b9(b4[b6],b6,e);if(b8!=null){b5[b5.length]=b8}}}else{for(b6 in b4){b8=b9(b4[b6],b6,e);if(b8!=null){b5[b5.length]=b8}}}return aG.apply([],b5)},guid:1,proxy:function(b6,b5){var e,b4,b3;if(typeof b5===\"string\"){b3=b6[b5];b5=b6;b6=b3}if(!bI.isFunction(b6)){return aE}e=a3.call(arguments,2);b4=function(){return b6.apply(b5||this,e.concat(a3.call(arguments)))};b4.guid=b6.guid=b6.guid||bI.guid++;return b4},access:function(e,b7,b9,b8,b5,cb,ca){var b4=0,b3=e.length,b6=b9==null;if(bI.type(b9)===\"object\"){b5=true;for(b4 in b9){bI.access(e,b7,b4,b9[b4],true,cb,ca)}}else{if(b8!==aE){b5=true;if(!bI.isFunction(b8)){ca=true}if(b6){if(ca){b7.call(e,b8);b7=null}else{b6=b7;b7=function(cd,cc,ce){return b6.call(bI(cd),ce)}}}if(b7){for(;b4<b3;b4++){b7(e[b4],b9,ca?b8:b8.call(e[b4],b4,b7(e[b4],b9)))}}}}return b5?e:b6?b7.call(e):b3?b7(e[0],b9):cb},now:function(){return(new Date()).getTime()},swap:function(b7,b6,b8,b5){var b4,b3,e={};for(b3 in b6){e[b3]=b7.style[b3];b7.style[b3]=b6[b3]}b4=b8.apply(b7,b5||[]);for(b3 in b6){b7.style[b3]=e[b3]}return b4}});bI.ready.promise=function(b6){if(!ag){ag=bI.Deferred();if(l.readyState===\"complete\"){setTimeout(bI.ready)}else{if(l.addEventListener){l.addEventListener(\"DOMContentLoaded\",bW,false);a1.addEventListener(\"load\",bW,false)}else{l.attachEvent(\"onreadystatechange\",bW);a1.attachEvent(\"onload\",bW);var b5=false;try{b5=a1.frameElement==null&&l.documentElement}catch(b4){}if(b5&&b5.doScroll){(function b3(){if(!bI.isReady){try{b5.doScroll(\"left\")}catch(b7){return setTimeout(b3,50)}bk();bI.ready()}})()}}}}return ag.promise(b6)};bI.each(\"Boolean Number String Function Array Date RegExp Object Error\".split(\" \"),function(b3,e){Y[\"[object \"+e+\"]\"]=e.toLowerCase()});function Z(b4){var b3=b4.length,e=bI.type(b4);if(bI.isWindow(b4)){return false}if(b4.nodeType===1&&b3){return true}return e===\"array\"||e!==\"function\"&&(b3===0||typeof b3===\"number\"&&b3>0&&(b3-1) in b4)}w=bI(l);\n/*!\n * Sizzle CSS Selector Engine v1.10.2\n * http://sizzlejs.com/\n *\n * Copyright 2013 jQuery Foundation, Inc. and other contributors\n * Released under the MIT license\n * http://jquery.org/license\n *\n * Date: 2013-07-03\n */\n(function(dc,ch){var cw,df,cc,cm,cF,cI,cT,dj,cG,cW,cA,cn,c5,c0,dd,cb,cD,c7=\"sizzle\"+-(new Date()),cH=dc.document,dg=0,c1=0,b6=cy(),c6=cy(),cE=cy(),cU=false,cC=function(dk,e){if(dk===e){cU=true;return 0}return 0},db=typeof ch,cO=1<<31,cM=({}).hasOwnProperty,c9=[],da=c9.pop,cK=c9.push,b4=c9.push,cl=c9.slice,ca=c9.indexOf||function(dl){var dk=0,e=this.length;for(;dk<e;dk++){if(this[dk]===dl){return dk}}return -1},b5=\"checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped\",co=\"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",b3=\"(?:\\\\\\\\.|[\\\\w-]|[^\\\\x00-\\\\xa0])+\",cJ=b3.replace(\"w\",\"w#\"),c3=\"\\\\[\"+co+\"*(\"+b3+\")\"+co+\"*(?:([*^$|!~]?=)\"+co+\"*(?:(['\\\"])((?:\\\\\\\\.|[^\\\\\\\\])*?)\\\\3|(\"+cJ+\")|)|)\"+co+\"*\\\\]\",cj=\":(\"+b3+\")(?:\\\\(((['\\\"])((?:\\\\\\\\.|[^\\\\\\\\])*?)\\\\3|((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|\"+c3.replace(3,8)+\")*)|.*)\\\\)|)\",cq=new RegExp(\"^\"+co+\"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\"+co+\"+$\",\"g\"),ct=new RegExp(\"^\"+co+\"*,\"+co+\"*\"),cz=new RegExp(\"^\"+co+\"*([>+~]|\"+co+\")\"+co+\"*\"),cY=new RegExp(co+\"*[+~]\"),cs=new RegExp(\"=\"+co+\"*([^\\\\]'\\\"]*)\"+co+\"*\\\\]\",\"g\"),cQ=new RegExp(cj),cR=new RegExp(\"^\"+cJ+\"$\"),cZ={ID:new RegExp(\"^#(\"+b3+\")\"),CLASS:new RegExp(\"^\\\\.(\"+b3+\")\"),TAG:new RegExp(\"^(\"+b3.replace(\"w\",\"w*\")+\")\"),ATTR:new RegExp(\"^\"+c3),PSEUDO:new RegExp(\"^\"+cj),CHILD:new RegExp(\"^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(\"+co+\"*(even|odd|(([+-]|)(\\\\d*)n|)\"+co+\"*(?:([+-]|)\"+co+\"*(\\\\d+)|))\"+co+\"*\\\\)|)\",\"i\"),bool:new RegExp(\"^(?:\"+b5+\")$\",\"i\"),needsContext:new RegExp(\"^\"+co+\"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(\"+co+\"*((?:-\\\\d)?\\\\d*)\"+co+\"*\\\\)|)(?=[^-]|$)\",\"i\")},cN=/^[^{]+\\{\\s*\\[native \\w/,cP=/^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/,b9=/^(?:input|select|textarea|button)$/i,ck=/^h\\d$/i,cL=/'|\\\\/g,cr=new RegExp(\"\\\\\\\\([\\\\da-f]{1,6}\"+co+\"?|(\"+co+\")|.)\",\"ig\"),c2=function(e,dm,dk){var dl=\"0x\"+dm-65536;return dl!==dl||dk?dm:dl<0?String.fromCharCode(dl+65536):String.fromCharCode(dl>>10|55296,dl&1023|56320)};try{b4.apply((c9=cl.call(cH.childNodes)),cH.childNodes);c9[cH.childNodes.length].nodeType}catch(cB){b4={apply:c9.length?function(dk,e){cK.apply(dk,cl.call(e))}:function(dm,dl){var e=dm.length,dk=0;while((dm[e++]=dl[dk++])){}dm.length=e-1}}}function cu(ds,dk,dw,dy){var dx,dp,dq,du,dv,dn,dm,e,dl,dt;if((dk?dk.ownerDocument||dk:cH)!==cA){cW(dk)}dk=dk||cA;dw=dw||[];if(!ds||typeof ds!==\"string\"){return dw}if((du=dk.nodeType)!==1&&du!==9){return[]}if(c5&&!dy){if((dx=cP.exec(ds))){if((dq=dx[1])){if(du===9){dp=dk.getElementById(dq);if(dp&&dp.parentNode){if(dp.id===dq){dw.push(dp);return dw}}else{return dw}}else{if(dk.ownerDocument&&(dp=dk.ownerDocument.getElementById(dq))&&cD(dk,dp)&&dp.id===dq){dw.push(dp);return dw}}}else{if(dx[2]){b4.apply(dw,dk.getElementsByTagName(ds));return dw}else{if((dq=dx[3])&&df.getElementsByClassName&&dk.getElementsByClassName){b4.apply(dw,dk.getElementsByClassName(dq));return dw}}}}if(df.qsa&&(!c0||!c0.test(ds))){e=dm=c7;dl=dk;dt=du===9&&ds;if(du===1&&dk.nodeName.toLowerCase()!==\"object\"){dn=cf(ds);if((dm=dk.getAttribute(\"id\"))){e=dm.replace(cL,\"\\\\$&\")}else{dk.setAttribute(\"id\",e)}e=\"[id='\"+e+\"'] \";dv=dn.length;while(dv--){dn[dv]=e+cg(dn[dv])}dl=cY.test(ds)&&dk.parentNode||dk;dt=dn.join(\",\")}if(dt){try{b4.apply(dw,dl.querySelectorAll(dt));return dw}catch(dr){}finally{if(!dm){dk.removeAttribute(\"id\")}}}}}return de(ds.replace(cq,\"$1\"),dk,dw,dy)}function cy(){var dk=[];function e(dl,dm){if(dk.push(dl+=\" \")>cm.cacheLength){delete e[dk.shift()]}return(e[dl]=dm)}return e}function ci(e){e[c7]=true;return e}function cd(dk){var dm=cA.createElement(\"div\");try{return !!dk(dm)}catch(dl){return false}finally{if(dm.parentNode){dm.parentNode.removeChild(dm)}dm=null}}function dh(dk,dm){var e=dk.split(\"|\"),dl=dk.length;while(dl--){cm.attrHandle[e[dl]]=dm}}function b7(dk,e){var dm=e&&dk,dl=dm&&dk.nodeType===1&&e.nodeType===1&&(~e.sourceIndex||cO)-(~dk.sourceIndex||cO);if(dl){return dl}if(dm){while((dm=dm.nextSibling)){if(dm===e){return -1}}}return dk?1:-1}function cv(e){return function(dl){var dk=dl.nodeName.toLowerCase();return dk===\"input\"&&dl.type===e}}function b8(e){return function(dl){var dk=dl.nodeName.toLowerCase();return(dk===\"input\"||dk===\"button\")&&dl.type===e}}function c4(e){return ci(function(dk){dk=+dk;return ci(function(dl,dq){var dn,dm=e([],dl.length,dk),dp=dm.length;while(dp--){if(dl[(dn=dm[dp])]){dl[dn]=!(dq[dn]=dl[dn])}}})})}cI=cu.isXML=function(e){var dk=e&&(e.ownerDocument||e).documentElement;return dk?dk.nodeName!==\"HTML\":false};df=cu.support={};cW=cu.setDocument=function(dk){var dl=dk?dk.ownerDocument||dk:cH,e=dl.defaultView;if(dl===cA||dl.nodeType!==9||!dl.documentElement){return cA}cA=dl;cn=dl.documentElement;c5=!cI(dl);if(e&&e.attachEvent&&e!==e.top){e.attachEvent(\"onbeforeunload\",function(){cW()})}df.attributes=cd(function(dm){dm.className=\"i\";return !dm.getAttribute(\"className\")});df.getElementsByTagName=cd(function(dm){dm.appendChild(dl.createComment(\"\"));return !dm.getElementsByTagName(\"*\").length});df.getElementsByClassName=cd(function(dm){dm.innerHTML=\"<div class='a'></div><div class='a i'></div>\";dm.firstChild.className=\"i\";return dm.getElementsByClassName(\"i\").length===2});df.getById=cd(function(dm){cn.appendChild(dm).id=c7;return !dl.getElementsByName||!dl.getElementsByName(c7).length});if(df.getById){cm.find.ID=function(dp,dn){if(typeof dn.getElementById!==db&&c5){var dm=dn.getElementById(dp);return dm&&dm.parentNode?[dm]:[]}};cm.filter.ID=function(dn){var dm=dn.replace(cr,c2);return function(dp){return dp.getAttribute(\"id\")===dm}}}else{delete cm.find.ID;cm.filter.ID=function(dn){var dm=dn.replace(cr,c2);return function(dq){var dp=typeof dq.getAttributeNode!==db&&dq.getAttributeNode(\"id\");return dp&&dp.value===dm}}}cm.find.TAG=df.getElementsByTagName?function(dm,dn){if(typeof dn.getElementsByTagName!==db){return dn.getElementsByTagName(dm)}}:function(dm,dr){var ds,dq=[],dp=0,dn=dr.getElementsByTagName(dm);if(dm===\"*\"){while((ds=dn[dp++])){if(ds.nodeType===1){dq.push(ds)}}return dq}return dn};cm.find.CLASS=df.getElementsByClassName&&function(dn,dm){if(typeof dm.getElementsByClassName!==db&&c5){return dm.getElementsByClassName(dn)}};dd=[];c0=[];if((df.qsa=cN.test(dl.querySelectorAll))){cd(function(dm){dm.innerHTML=\"<select><option selected=''></option></select>\";if(!dm.querySelectorAll(\"[selected]\").length){c0.push(\"\\\\[\"+co+\"*(?:value|\"+b5+\")\")}if(!dm.querySelectorAll(\":checked\").length){c0.push(\":checked\")}});cd(function(dn){var dm=dl.createElement(\"input\");dm.setAttribute(\"type\",\"hidden\");dn.appendChild(dm).setAttribute(\"t\",\"\");if(dn.querySelectorAll(\"[t^='']\").length){c0.push(\"[*^$]=\"+co+\"*(?:''|\\\"\\\")\")}if(!dn.querySelectorAll(\":enabled\").length){c0.push(\":enabled\",\":disabled\")}dn.querySelectorAll(\"*,:x\");c0.push(\",.*:\")})}if((df.matchesSelector=cN.test((cb=cn.webkitMatchesSelector||cn.mozMatchesSelector||cn.oMatchesSelector||cn.msMatchesSelector)))){cd(function(dm){df.disconnectedMatch=cb.call(dm,\"div\");cb.call(dm,\"[s!='']:x\");dd.push(\"!=\",cj)})}c0=c0.length&&new RegExp(c0.join(\"|\"));dd=dd.length&&new RegExp(dd.join(\"|\"));cD=cN.test(cn.contains)||cn.compareDocumentPosition?function(dn,dm){var dq=dn.nodeType===9?dn.documentElement:dn,dp=dm&&dm.parentNode;return dn===dp||!!(dp&&dp.nodeType===1&&(dq.contains?dq.contains(dp):dn.compareDocumentPosition&&dn.compareDocumentPosition(dp)&16))}:function(dn,dm){if(dm){while((dm=dm.parentNode)){if(dm===dn){return true}}}return false};cC=cn.compareDocumentPosition?function(dn,dm){if(dn===dm){cU=true;return 0}var dp=dm.compareDocumentPosition&&dn.compareDocumentPosition&&dn.compareDocumentPosition(dm);if(dp){if(dp&1||(!df.sortDetached&&dm.compareDocumentPosition(dn)===dp)){if(dn===dl||cD(cH,dn)){return -1}if(dm===dl||cD(cH,dm)){return 1}return cG?(ca.call(cG,dn)-ca.call(cG,dm)):0}return dp&4?-1:1}return dn.compareDocumentPosition?-1:1}:function(dn,dm){var du,dr=0,dt=dn.parentNode,dq=dm.parentNode,dp=[dn],ds=[dm];if(dn===dm){cU=true;return 0}else{if(!dt||!dq){return dn===dl?-1:dm===dl?1:dt?-1:dq?1:cG?(ca.call(cG,dn)-ca.call(cG,dm)):0}else{if(dt===dq){return b7(dn,dm)}}}du=dn;while((du=du.parentNode)){dp.unshift(du)}du=dm;while((du=du.parentNode)){ds.unshift(du)}while(dp[dr]===ds[dr]){dr++}return dr?b7(dp[dr],ds[dr]):dp[dr]===cH?-1:ds[dr]===cH?1:0};return dl};cu.matches=function(dk,e){return cu(dk,null,null,e)};cu.matchesSelector=function(dl,dn){if((dl.ownerDocument||dl)!==cA){cW(dl)}dn=dn.replace(cs,\"='$1']\");if(df.matchesSelector&&c5&&(!dd||!dd.test(dn))&&(!c0||!c0.test(dn))){try{var dk=cb.call(dl,dn);if(dk||df.disconnectedMatch||dl.document&&dl.document.nodeType!==11){return dk}}catch(dm){}}return cu(dn,cA,null,[dl]).length>0};cu.contains=function(e,dk){if((e.ownerDocument||e)!==cA){cW(e)}return cD(e,dk)};cu.attr=function(dl,e){if((dl.ownerDocument||dl)!==cA){cW(dl)}var dk=cm.attrHandle[e.toLowerCase()],dm=dk&&cM.call(cm.attrHandle,e.toLowerCase())?dk(dl,e,!c5):ch;return dm===ch?df.attributes||!c5?dl.getAttribute(e):(dm=dl.getAttributeNode(e))&&dm.specified?dm.value:null:dm};cu.error=function(e){throw new Error(\"Syntax error, unrecognized expression: \"+e)};cu.uniqueSort=function(dl){var dm,dn=[],e=0,dk=0;cU=!df.detectDuplicates;cG=!df.sortStable&&dl.slice(0);dl.sort(cC);if(cU){while((dm=dl[dk++])){if(dm===dl[dk]){e=dn.push(dk)}}while(e--){dl.splice(dn[e],1)}}return dl};cF=cu.getText=function(dn){var dm,dk=\"\",dl=0,e=dn.nodeType;if(!e){for(;(dm=dn[dl]);dl++){dk+=cF(dm)}}else{if(e===1||e===9||e===11){if(typeof dn.textContent===\"string\"){return dn.textContent}else{for(dn=dn.firstChild;dn;dn=dn.nextSibling){dk+=cF(dn)}}}else{if(e===3||e===4){return dn.nodeValue}}}return dk};cm=cu.selectors={cacheLength:50,createPseudo:ci,match:cZ,attrHandle:{},find:{},relative:{\">\":{dir:\"parentNode\",first:true},\" \":{dir:\"parentNode\"},\"+\":{dir:\"previousSibling\",first:true},\"~\":{dir:\"previousSibling\"}},preFilter:{ATTR:function(e){e[1]=e[1].replace(cr,c2);e[3]=(e[4]||e[5]||\"\").replace(cr,c2);if(e[2]===\"~=\"){e[3]=\" \"+e[3]+\" \"}return e.slice(0,4)},CHILD:function(e){e[1]=e[1].toLowerCase();if(e[1].slice(0,3)===\"nth\"){if(!e[3]){cu.error(e[0])}e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]===\"even\"||e[3]===\"odd\"));e[5]=+((e[7]+e[8])||e[3]===\"odd\")}else{if(e[3]){cu.error(e[0])}}return e},PSEUDO:function(dk){var e,dl=!dk[5]&&dk[2];if(cZ.CHILD.test(dk[0])){return null}if(dk[3]&&dk[4]!==ch){dk[2]=dk[4]}else{if(dl&&cQ.test(dl)&&(e=cf(dl,true))&&(e=dl.indexOf(\")\",dl.length-e)-dl.length)){dk[0]=dk[0].slice(0,e);dk[2]=dl.slice(0,e)}}return dk.slice(0,3)}},filter:{TAG:function(dk){var e=dk.replace(cr,c2).toLowerCase();return dk===\"*\"?function(){return true}:function(dl){return dl.nodeName&&dl.nodeName.toLowerCase()===e}},CLASS:function(e){var dk=b6[e+\" \"];return dk||(dk=new RegExp(\"(^|\"+co+\")\"+e+\"(\"+co+\"|$)\"))&&b6(e,function(dl){return dk.test(typeof dl.className===\"string\"&&dl.className||typeof dl.getAttribute!==db&&dl.getAttribute(\"class\")||\"\")})},ATTR:function(dl,dk,e){return function(dn){var dm=cu.attr(dn,dl);if(dm==null){return dk===\"!=\"}if(!dk){return true}dm+=\"\";return dk===\"=\"?dm===e:dk===\"!=\"?dm!==e:dk===\"^=\"?e&&dm.indexOf(e)===0:dk===\"*=\"?e&&dm.indexOf(e)>-1:dk===\"$=\"?e&&dm.slice(-e.length)===e:dk===\"~=\"?(\" \"+dm+\" \").indexOf(e)>-1:dk===\"|=\"?dm===e||dm.slice(0,e.length+1)===e+\"-\":false}},CHILD:function(dk,dn,dm,dp,dl){var dr=dk.slice(0,3)!==\"nth\",e=dk.slice(-4)!==\"last\",dq=dn===\"of-type\";return dp===1&&dl===0?function(ds){return !!ds.parentNode}:function(dy,dw,dB){var ds,dE,dz,dD,dA,dv,dx=dr!==e?\"nextSibling\":\"previousSibling\",dC=dy.parentNode,du=dq&&dy.nodeName.toLowerCase(),dt=!dB&&!dq;if(dC){if(dr){while(dx){dz=dy;while((dz=dz[dx])){if(dq?dz.nodeName.toLowerCase()===du:dz.nodeType===1){return false}}dv=dx=dk===\"only\"&&!dv&&\"nextSibling\"}return true}dv=[e?dC.firstChild:dC.lastChild];if(e&&dt){dE=dC[c7]||(dC[c7]={});ds=dE[dk]||[];dA=ds[0]===dg&&ds[1];dD=ds[0]===dg&&ds[2];dz=dA&&dC.childNodes[dA];while((dz=++dA&&dz&&dz[dx]||(dD=dA=0)||dv.pop())){if(dz.nodeType===1&&++dD&&dz===dy){dE[dk]=[dg,dA,dD];break}}}else{if(dt&&(ds=(dy[c7]||(dy[c7]={}))[dk])&&ds[0]===dg){dD=ds[1]}else{while((dz=++dA&&dz&&dz[dx]||(dD=dA=0)||dv.pop())){if((dq?dz.nodeName.toLowerCase()===du:dz.nodeType===1)&&++dD){if(dt){(dz[c7]||(dz[c7]={}))[dk]=[dg,dD]}if(dz===dy){break}}}}}dD-=dl;return dD===dp||(dD%dp===0&&dD/dp>=0)}}},PSEUDO:function(dm,dl){var e,dk=cm.pseudos[dm]||cm.setFilters[dm.toLowerCase()]||cu.error(\"unsupported pseudo: \"+dm);if(dk[c7]){return dk(dl)}if(dk.length>1){e=[dm,dm,\"\",dl];return cm.setFilters.hasOwnProperty(dm.toLowerCase())?ci(function(dq,ds){var dp,dn=dk(dq,dl),dr=dn.length;while(dr--){dp=ca.call(dq,dn[dr]);dq[dp]=!(ds[dp]=dn[dr])}}):function(dn){return dk(dn,0,e)}}return dk}},pseudos:{not:ci(function(e){var dk=[],dl=[],dm=cT(e.replace(cq,\"$1\"));return dm[c7]?ci(function(dp,du,ds,dq){var dt,dn=dm(dp,null,dq,[]),dr=dp.length;while(dr--){if((dt=dn[dr])){dp[dr]=!(du[dr]=dt)}}}):function(dq,dp,dn){dk[0]=dq;dm(dk,null,dn,dl);return !dl.pop()}}),has:ci(function(e){return function(dk){return cu(e,dk).length>0}}),contains:ci(function(e){return function(dk){return(dk.textContent||dk.innerText||cF(dk)).indexOf(e)>-1}}),lang:ci(function(e){if(!cR.test(e||\"\")){cu.error(\"unsupported lang: \"+e)}e=e.replace(cr,c2).toLowerCase();return function(dl){var dk;do{if((dk=c5?dl.lang:dl.getAttribute(\"xml:lang\")||dl.getAttribute(\"lang\"))){dk=dk.toLowerCase();return dk===e||dk.indexOf(e+\"-\")===0}}while((dl=dl.parentNode)&&dl.nodeType===1);return false}}),target:function(e){var dk=dc.location&&dc.location.hash;return dk&&dk.slice(1)===e.id},root:function(e){return e===cn},focus:function(e){return e===cA.activeElement&&(!cA.hasFocus||cA.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===false},disabled:function(e){return e.disabled===true},checked:function(e){var dk=e.nodeName.toLowerCase();return(dk===\"input\"&&!!e.checked)||(dk===\"option\"&&!!e.selected)},selected:function(e){if(e.parentNode){e.parentNode.selectedIndex}return e.selected===true},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling){if(e.nodeName>\"@\"||e.nodeType===3||e.nodeType===4){return false}}return true},parent:function(e){return !cm.pseudos.empty(e)},header:function(e){return ck.test(e.nodeName)},input:function(e){return b9.test(e.nodeName)},button:function(dk){var e=dk.nodeName.toLowerCase();return e===\"input\"&&dk.type===\"button\"||e===\"button\"},text:function(dk){var e;return dk.nodeName.toLowerCase()===\"input\"&&dk.type===\"text\"&&((e=dk.getAttribute(\"type\"))==null||e.toLowerCase()===dk.type)},first:c4(function(){return[0]}),last:c4(function(e,dk){return[dk-1]}),eq:c4(function(e,dl,dk){return[dk<0?dk+dl:dk]}),even:c4(function(e,dl){var dk=0;for(;dk<dl;dk+=2){e.push(dk)}return e}),odd:c4(function(e,dl){var dk=1;for(;dk<dl;dk+=2){e.push(dk)}return e}),lt:c4(function(e,dm,dl){var dk=dl<0?dl+dm:dl;for(;--dk>=0;){e.push(dk)}return e}),gt:c4(function(e,dm,dl){var dk=dl<0?dl+dm:dl;for(;++dk<dm;){e.push(dk)}return e})}};cm.pseudos.nth=cm.pseudos.eq;for(cw in {radio:true,checkbox:true,file:true,password:true,image:true}){cm.pseudos[cw]=cv(cw)}for(cw in {submit:true,reset:true}){cm.pseudos[cw]=b8(cw)}function cS(){}cS.prototype=cm.filters=cm.pseudos;cm.setFilters=new cS();function cf(dn,dt){var dk,dp,dr,ds,dq,dl,e,dm=c6[dn+\" \"];if(dm){return dt?0:dm.slice(0)}dq=dn;dl=[];e=cm.preFilter;while(dq){if(!dk||(dp=ct.exec(dq))){if(dp){dq=dq.slice(dp[0].length)||dq}dl.push(dr=[])}dk=false;if((dp=cz.exec(dq))){dk=dp.shift();dr.push({value:dk,type:dp[0].replace(cq,\" \")});dq=dq.slice(dk.length)}for(ds in cm.filter){if((dp=cZ[ds].exec(dq))&&(!e[ds]||(dp=e[ds](dp)))){dk=dp.shift();dr.push({value:dk,type:ds,matches:dp});dq=dq.slice(dk.length)}}if(!dk){break}}return dt?dq.length:dq?cu.error(dn):c6(dn,dl).slice(0)}function cg(dm){var dl=0,dk=dm.length,e=\"\";for(;dl<dk;dl++){e+=dm[dl].value}return e}function cp(dn,dl,dm){var e=dl.dir,dp=dm&&e===\"parentNode\",dk=c1++;return dl.first?function(ds,dr,dq){while((ds=ds[e])){if(ds.nodeType===1||dp){return dn(ds,dr,dq)}}}:function(du,ds,dr){var dw,dq,dt,dv=dg+\" \"+dk;if(dr){while((du=du[e])){if(du.nodeType===1||dp){if(dn(du,ds,dr)){return true}}}}else{while((du=du[e])){if(du.nodeType===1||dp){dt=du[c7]||(du[c7]={});if((dq=dt[e])&&dq[0]===dv){if((dw=dq[1])===true||dw===cc){return dw===true}}else{dq=dt[e]=[dv];dq[1]=dn(du,ds,dr)||cc;if(dq[1]===true){return true}}}}}}}function di(e){return e.length>1?function(dn,dm,dk){var dl=e.length;while(dl--){if(!e[dl](dn,dm,dk)){return false}}return true}:e[0]}function cX(e,dk,dl,dm,dq){var dn,dt=[],dp=0,dr=e.length,ds=dk!=null;for(;dp<dr;dp++){if((dn=e[dp])){if(!dl||dl(dn,dm,dq)){dt.push(dn);if(ds){dk.push(dp)}}}}return dt}function ce(dl,dk,dn,dm,dp,e){if(dm&&!dm[c7]){dm=ce(dm)}if(dp&&!dp[c7]){dp=ce(dp,e)}return ci(function(dA,dx,ds,dz){var dC,dy,du,dt=[],dB=[],dr=dx.length,dq=dA||cx(dk||\"*\",ds.nodeType?[ds]:ds,[]),dv=dl&&(dA||!dk)?cX(dq,dt,dl,ds,dz):dq,dw=dn?dp||(dA?dl:dr||dm)?[]:dx:dv;if(dn){dn(dv,dw,ds,dz)}if(dm){dC=cX(dw,dB);dm(dC,[],ds,dz);dy=dC.length;while(dy--){if((du=dC[dy])){dw[dB[dy]]=!(dv[dB[dy]]=du)}}}if(dA){if(dp||dl){if(dp){dC=[];dy=dw.length;while(dy--){if((du=dw[dy])){dC.push((dv[dy]=du))}}dp(null,(dw=[]),dC,dz)}dy=dw.length;while(dy--){if((du=dw[dy])&&(dC=dp?ca.call(dA,du):dt[dy])>-1){dA[dC]=!(dx[dC]=du)}}}}else{dw=cX(dw===dx?dw.splice(dr,dw.length):dw);if(dp){dp(null,dx,dw,dz)}else{b4.apply(dx,dw)}}})}function c8(dq){var dk,dn,dl,dp=dq.length,dt=cm.relative[dq[0].type],du=dt||cm.relative[\" \"],dm=dt?1:0,dr=cp(function(dv){return dv===dk},du,true),ds=cp(function(dv){return ca.call(dk,dv)>-1},du,true),e=[function(dx,dw,dv){return(!dt&&(dv||dw!==dj))||((dk=dw).nodeType?dr(dx,dw,dv):ds(dx,dw,dv))}];for(;dm<dp;dm++){if((dn=cm.relative[dq[dm].type])){e=[cp(di(e),dn)]}else{dn=cm.filter[dq[dm].type].apply(null,dq[dm].matches);if(dn[c7]){dl=++dm;for(;dl<dp;dl++){if(cm.relative[dq[dl].type]){break}}return ce(dm>1&&di(e),dm>1&&cg(dq.slice(0,dm-1).concat({value:dq[dm-2].type===\" \"?\"*\":\"\"})).replace(cq,\"$1\"),dn,dm<dl&&c8(dq.slice(dm,dl)),dl<dp&&c8((dq=dq.slice(dl))),dl<dp&&cg(dq))}e.push(dn)}}return di(e)}function cV(dm,dl){var dp=0,e=dl.length>0,dn=dm.length>0,dk=function(dz,dt,dy,dx,dF){var du,dv,dA,dE=[],dD=0,dw=\"0\",dq=dz&&[],dB=dF!=null,dC=dj,ds=dz||dn&&cm.find.TAG(\"*\",dF&&dt.parentNode||dt),dr=(dg+=dC==null?1:Math.random()||0.1);if(dB){dj=dt!==cA&&dt;cc=dp}for(;(du=ds[dw])!=null;dw++){if(dn&&du){dv=0;while((dA=dm[dv++])){if(dA(du,dt,dy)){dx.push(du);break}}if(dB){dg=dr;cc=++dp}}if(e){if((du=!dA&&du)){dD--}if(dz){dq.push(du)}}}dD+=dw;if(e&&dw!==dD){dv=0;while((dA=dl[dv++])){dA(dq,dE,dt,dy)}if(dz){if(dD>0){while(dw--){if(!(dq[dw]||dE[dw])){dE[dw]=da.call(dx)}}}dE=cX(dE)}b4.apply(dx,dE);if(dB&&!dz&&dE.length>0&&(dD+dl.length)>1){cu.uniqueSort(dx)}}if(dB){dg=dr;dj=dC}return dq};return e?ci(dk):dk}cT=cu.compile=function(e,dp){var dl,dk=[],dn=[],dm=cE[e+\" \"];if(!dm){if(!dp){dp=cf(e)}dl=dp.length;while(dl--){dm=c8(dp[dl]);if(dm[c7]){dk.push(dm)}else{dn.push(dm)}}dm=cE(e,cV(dn,dk))}return dm};function cx(dk,dn,dm){var dl=0,e=dn.length;for(;dl<e;dl++){cu(dk,dn[dl],dm)}return dm}function de(dl,e,dm,dq){var dn,ds,dk,dt,dr,dp=cf(dl);if(!dq){if(dp.length===1){ds=dp[0]=dp[0].slice(0);if(ds.length>2&&(dk=ds[0]).type===\"ID\"&&df.getById&&e.nodeType===9&&c5&&cm.relative[ds[1].type]){e=(cm.find.ID(dk.matches[0].replace(cr,c2),e)||[])[0];if(!e){return dm}dl=dl.slice(ds.shift().value.length)}dn=cZ.needsContext.test(dl)?0:ds.length;while(dn--){dk=ds[dn];if(cm.relative[(dt=dk.type)]){break}if((dr=cm.find[dt])){if((dq=dr(dk.matches[0].replace(cr,c2),cY.test(ds[0].type)&&e.parentNode||e))){ds.splice(dn,1);dl=dq.length&&cg(ds);if(!dl){b4.apply(dm,dq);return dm}break}}}}}cT(dl,dp)(dq,e,!c5,dm,cY.test(dl));return dm}df.sortStable=c7.split(\"\").sort(cC).join(\"\")===c7;df.detectDuplicates=cU;cW();df.sortDetached=cd(function(e){return e.compareDocumentPosition(cA.createElement(\"div\"))&1});if(!cd(function(e){e.innerHTML=\"<a href='#'></a>\";return e.firstChild.getAttribute(\"href\")===\"#\"})){dh(\"type|href|height|width\",function(dk,e,dl){if(!dl){return dk.getAttribute(e,e.toLowerCase()===\"type\"?1:2)}})}if(!df.attributes||!cd(function(e){e.innerHTML=\"<input/>\";e.firstChild.setAttribute(\"value\",\"\");return e.firstChild.getAttribute(\"value\")===\"\"})){dh(\"value\",function(dk,e,dl){if(!dl&&dk.nodeName.toLowerCase()===\"input\"){return dk.defaultValue}})}if(!cd(function(e){return e.getAttribute(\"disabled\")==null})){dh(b5,function(dk,e,dm){var dl;if(!dm){return(dl=dk.getAttributeNode(e))&&dl.specified?dl.value:dk[e]===true?e.toLowerCase():null}})}bI.find=cu;bI.expr=cu.selectors;bI.expr[\":\"]=bI.expr.pseudos;bI.unique=cu.uniqueSort;bI.text=cu.getText;bI.isXMLDoc=cu.isXML;bI.contains=cu.contains})(a1);var bY={};function ac(b3){var e=bY[b3]={};bI.each(b3.match(aa)||[],function(b5,b4){e[b4]=true});return e}bI.Callbacks=function(cc){cc=typeof cc===\"string\"?(bY[cc]||ac(cc)):bI.extend({},cc);var b6,b5,e,b7,b8,b4,b9=[],ca=!cc.once&&[],b3=function(cd){b5=cc.memory&&cd;e=true;b8=b4||0;b4=0;b7=b9.length;b6=true;for(;b9&&b8<b7;b8++){if(b9[b8].apply(cd[0],cd[1])===false&&cc.stopOnFalse){b5=false;break}}b6=false;if(b9){if(ca){if(ca.length){b3(ca.shift())}}else{if(b5){b9=[]}else{cb.disable()}}}},cb={add:function(){if(b9){var ce=b9.length;(function cd(cf){bI.each(cf,function(ch,cg){var ci=bI.type(cg);if(ci===\"function\"){if(!cc.unique||!cb.has(cg)){b9.push(cg)}}else{if(cg&&cg.length&&ci!==\"string\"){cd(cg)}}})})(arguments);if(b6){b7=b9.length}else{if(b5){b4=ce;b3(b5)}}}return this},remove:function(){if(b9){bI.each(arguments,function(cf,cd){var ce;while((ce=bI.inArray(cd,b9,ce))>-1){b9.splice(ce,1);if(b6){if(ce<=b7){b7--}if(ce<=b8){b8--}}}})}return this},has:function(cd){return cd?bI.inArray(cd,b9)>-1:!!(b9&&b9.length)},empty:function(){b9=[];b7=0;return this},disable:function(){b9=ca=b5=aE;return this},disabled:function(){return !b9},lock:function(){ca=aE;if(!b5){cb.disable()}return this},locked:function(){return !ca},fireWith:function(ce,cd){if(b9&&(!e||ca)){cd=cd||[];cd=[ce,cd.slice?cd.slice():cd];if(b6){ca.push(cd)}else{b3(cd)}}return this},fire:function(){cb.fireWith(this,arguments);return this},fired:function(){return !!e}};return cb};bI.extend({Deferred:function(b4){var b3=[[\"resolve\",\"done\",bI.Callbacks(\"once memory\"),\"resolved\"],[\"reject\",\"fail\",bI.Callbacks(\"once memory\"),\"rejected\"],[\"notify\",\"progress\",bI.Callbacks(\"memory\")]],b5=\"pending\",b6={state:function(){return b5},always:function(){e.done(arguments).fail(arguments);return this},then:function(){var b7=arguments;return bI.Deferred(function(b8){bI.each(b3,function(ca,b9){var cc=b9[0],cb=bI.isFunction(b7[ca])&&b7[ca];e[b9[1]](function(){var cd=cb&&cb.apply(this,arguments);if(cd&&bI.isFunction(cd.promise)){cd.promise().done(b8.resolve).fail(b8.reject).progress(b8.notify)}else{b8[cc+\"With\"](this===b6?b8.promise():this,cb?[cd]:arguments)}})});b7=null}).promise()},promise:function(b7){return b7!=null?bI.extend(b7,b6):b6}},e={};b6.pipe=b6.then;bI.each(b3,function(b8,b7){var ca=b7[2],b9=b7[3];b6[b7[1]]=ca.add;if(b9){ca.add(function(){b5=b9},b3[b8^1][2].disable,b3[2][2].lock)}e[b7[0]]=function(){e[b7[0]+\"With\"](this===e?b6:this,arguments);return this};e[b7[0]+\"With\"]=ca.fireWith});b6.promise(e);if(b4){b4.call(e,e)}return e},when:function(b6){var b4=0,b8=a3.call(arguments),e=b8.length,b3=e!==1||(b6&&bI.isFunction(b6.promise))?e:0,cb=b3===1?b6:bI.Deferred(),b5=function(cd,ce,cc){return function(cf){ce[cd]=this;cc[cd]=arguments.length>1?a3.call(arguments):cf;if(cc===ca){cb.notifyWith(ce,cc)}else{if(!(--b3)){cb.resolveWith(ce,cc)}}}},ca,b7,b9;if(e>1){ca=new Array(e);b7=new Array(e);b9=new Array(e);for(;b4<e;b4++){if(b8[b4]&&bI.isFunction(b8[b4].promise)){b8[b4].promise().done(b5(b4,b9,b8)).fail(cb.reject).progress(b5(b4,b7,ca))}else{--b3}}}if(!b3){cb.resolveWith(b9,b8)}return cb.promise()}});bI.support=(function(ce){var cd,cb,ca,cc,b9,b5,b7,b4,b6,b3=l.createElement(\"div\");b3.setAttribute(\"className\",\"t\");b3.innerHTML=\"  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>\";cd=b3.getElementsByTagName(\"*\")||[];cb=b3.getElementsByTagName(\"a\")[0];if(!cb||!cb.style||!cd.length){return ce}cc=l.createElement(\"select\");b5=cc.appendChild(l.createElement(\"option\"));ca=b3.getElementsByTagName(\"input\")[0];cb.style.cssText=\"top:1px;float:left;opacity:.5\";ce.getSetAttribute=b3.className!==\"t\";ce.leadingWhitespace=b3.firstChild.nodeType===3;ce.tbody=!b3.getElementsByTagName(\"tbody\").length;ce.htmlSerialize=!!b3.getElementsByTagName(\"link\").length;ce.style=/top/.test(cb.getAttribute(\"style\"));ce.hrefNormalized=cb.getAttribute(\"href\")===\"/a\";ce.opacity=/^0.5/.test(cb.style.opacity);ce.cssFloat=!!cb.style.cssFloat;ce.checkOn=!!ca.value;ce.optSelected=b5.selected;ce.enctype=!!l.createElement(\"form\").enctype;ce.html5Clone=l.createElement(\"nav\").cloneNode(true).outerHTML!==\"<:nav></:nav>\";ce.inlineBlockNeedsLayout=false;ce.shrinkWrapBlocks=false;ce.pixelPosition=false;ce.deleteExpando=true;ce.noCloneEvent=true;ce.reliableMarginRight=true;ce.boxSizingReliable=true;ca.checked=true;ce.noCloneChecked=ca.cloneNode(true).checked;cc.disabled=true;ce.optDisabled=!b5.disabled;try{delete b3.test}catch(b8){ce.deleteExpando=false}ca=l.createElement(\"input\");ca.setAttribute(\"value\",\"\");ce.input=ca.getAttribute(\"value\")===\"\";ca.value=\"t\";ca.setAttribute(\"type\",\"radio\");ce.radioValue=ca.value===\"t\";ca.setAttribute(\"checked\",\"t\");ca.setAttribute(\"name\",\"t\");b9=l.createDocumentFragment();b9.appendChild(ca);ce.appendChecked=ca.checked;ce.checkClone=b9.cloneNode(true).cloneNode(true).lastChild.checked;if(b3.attachEvent){b3.attachEvent(\"onclick\",function(){ce.noCloneEvent=false});b3.cloneNode(true).click()}for(b6 in {submit:true,change:true,focusin:true}){b3.setAttribute(b7=\"on\"+b6,\"t\");ce[b6+\"Bubbles\"]=b7 in a1||b3.attributes[b7].expando===false}b3.style.backgroundClip=\"content-box\";b3.cloneNode(true).style.backgroundClip=\"\";ce.clearCloneStyle=b3.style.backgroundClip===\"content-box\";for(b6 in bI(ce)){break}ce.ownLast=b6!==\"0\";bI(function(){var cf,ci,ch,cg=\"padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;\",e=l.getElementsByTagName(\"body\")[0];if(!e){return}cf=l.createElement(\"div\");cf.style.cssText=\"border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px\";e.appendChild(cf).appendChild(b3);b3.innerHTML=\"<table><tr><td></td><td>t</td></tr></table>\";ch=b3.getElementsByTagName(\"td\");ch[0].style.cssText=\"padding:0;margin:0;border:0;display:none\";b4=(ch[0].offsetHeight===0);ch[0].style.display=\"\";ch[1].style.display=\"none\";ce.reliableHiddenOffsets=b4&&(ch[0].offsetHeight===0);b3.innerHTML=\"\";b3.style.cssText=\"box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;\";bI.swap(e,e.style.zoom!=null?{zoom:1}:{},function(){ce.boxSizing=b3.offsetWidth===4});if(a1.getComputedStyle){ce.pixelPosition=(a1.getComputedStyle(b3,null)||{}).top!==\"1%\";ce.boxSizingReliable=(a1.getComputedStyle(b3,null)||{width:\"4px\"}).width===\"4px\";ci=b3.appendChild(l.createElement(\"div\"));ci.style.cssText=b3.style.cssText=cg;ci.style.marginRight=ci.style.width=\"0\";b3.style.width=\"1px\";ce.reliableMarginRight=!parseFloat((a1.getComputedStyle(ci,null)||{}).marginRight)}if(typeof b3.style.zoom!==aA){b3.innerHTML=\"\";b3.style.cssText=cg+\"width:1px;padding:1px;display:inline;zoom:1\";ce.inlineBlockNeedsLayout=(b3.offsetWidth===3);b3.style.display=\"block\";b3.innerHTML=\"<div></div>\";b3.firstChild.style.width=\"5px\";ce.shrinkWrapBlocks=(b3.offsetWidth!==3);if(ce.inlineBlockNeedsLayout){e.style.zoom=1}}e.removeChild(cf);cf=b3=ch=ci=null});cd=cc=b9=b5=cb=ca=null;return ce})({});var bv=/(?:\\{[\\s\\S]*\\}|\\[[\\s\\S]*\\])$/,aL=/([A-Z])/g;function a9(b5,b3,b7,b6){if(!bI.acceptData(b5)){return}var b9,b8,ca=bI.expando,cb=b5.nodeType,e=cb?bI.cache:b5,b4=cb?b5[ca]:b5[ca]&&ca;if((!b4||!e[b4]||(!b6&&!e[b4].data))&&b7===aE&&typeof b3===\"string\"){return}if(!b4){if(cb){b4=b5[ca]=a5.pop()||bI.guid++}else{b4=ca}}if(!e[b4]){e[b4]=cb?{}:{toJSON:bI.noop}}if(typeof b3===\"object\"||typeof b3===\"function\"){if(b6){e[b4]=bI.extend(e[b4],b3)}else{e[b4].data=bI.extend(e[b4].data,b3)}}b8=e[b4];if(!b6){if(!b8.data){b8.data={}}b8=b8.data}if(b7!==aE){b8[bI.camelCase(b3)]=b7}if(typeof b3===\"string\"){b9=b8[b3];if(b9==null){b9=b8[bI.camelCase(b3)]}}else{b9=b8}return b9}function X(b6,b4,e){if(!bI.acceptData(b6)){return}var b8,b5,b7=b6.nodeType,b3=b7?bI.cache:b6,b9=b7?b6[bI.expando]:bI.expando;if(!b3[b9]){return}if(b4){b8=e?b3[b9]:b3[b9].data;if(b8){if(!bI.isArray(b4)){if(b4 in b8){b4=[b4]}else{b4=bI.camelCase(b4);if(b4 in b8){b4=[b4]}else{b4=b4.split(\" \")}}}else{b4=b4.concat(bI.map(b4,bI.camelCase))}b5=b4.length;while(b5--){delete b8[b4[b5]]}if(e?!L(b8):!bI.isEmptyObject(b8)){return}}}if(!e){delete b3[b9].data;if(!L(b3[b9])){return}}if(b7){bI.cleanData([b6],true)}else{if(bI.support.deleteExpando||b3!=b3.window){delete b3[b9]}else{b3[b9]=null}}}bI.extend({cache:{},noData:{applet:true,embed:true,object:\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\"},hasData:function(e){e=e.nodeType?bI.cache[e[bI.expando]]:e[bI.expando];return !!e&&!L(e)},data:function(b3,e,b4){return a9(b3,e,b4)},removeData:function(b3,e){return X(b3,e)},_data:function(b3,e,b4){return a9(b3,e,b4,true)},_removeData:function(b3,e){return X(b3,e,true)},acceptData:function(b3){if(b3.nodeType&&b3.nodeType!==1&&b3.nodeType!==9){return false}var e=b3.nodeName&&bI.noData[b3.nodeName.toLowerCase()];return !e||e!==true&&b3.getAttribute(\"classid\")===e}});bI.fn.extend({data:function(b5,b8){var b3,e,b7=null,b4=0,b6=this[0];if(b5===aE){if(this.length){b7=bI.data(b6);if(b6.nodeType===1&&!bI._data(b6,\"parsedAttrs\")){b3=b6.attributes;for(;b4<b3.length;b4++){e=b3[b4].name;if(e.indexOf(\"data-\")===0){e=bI.camelCase(e.slice(5));bx(b6,e,b7[e])}}bI._data(b6,\"parsedAttrs\",true)}}return b7}if(typeof b5===\"object\"){return this.each(function(){bI.data(this,b5)})}return arguments.length>1?this.each(function(){bI.data(this,b5,b8)}):b6?bx(b6,b5,bI.data(b6,b5)):null},removeData:function(e){return this.each(function(){bI.removeData(this,e)})}});function bx(b5,b4,b6){if(b6===aE&&b5.nodeType===1){var b3=\"data-\"+b4.replace(aL,\"-$1\").toLowerCase();b6=b5.getAttribute(b3);if(typeof b6===\"string\"){try{b6=b6===\"true\"?true:b6===\"false\"?false:b6===\"null\"?null:+b6+\"\"===b6?+b6:bv.test(b6)?bI.parseJSON(b6):b6}catch(b7){}bI.data(b5,b4,b6)}else{b6=aE}}return b6}function L(b3){var e;for(e in b3){if(e===\"data\"&&bI.isEmptyObject(b3[e])){continue}if(e!==\"toJSON\"){return false}}return true}bI.extend({queue:function(b4,b3,b5){var e;if(b4){b3=(b3||\"fx\")+\"queue\";e=bI._data(b4,b3);if(b5){if(!e||bI.isArray(b5)){e=bI._data(b4,b3,bI.makeArray(b5))}else{e.push(b5)}}return e||[]}},dequeue:function(b7,b6){b6=b6||\"fx\";var b3=bI.queue(b7,b6),b8=b3.length,b5=b3.shift(),e=bI._queueHooks(b7,b6),b4=function(){bI.dequeue(b7,b6)};if(b5===\"inprogress\"){b5=b3.shift();b8--}if(b5){if(b6===\"fx\"){b3.unshift(\"inprogress\")}delete e.stop;b5.call(b7,b4,e)}if(!b8&&e){e.empty.fire()}},_queueHooks:function(b4,b3){var e=b3+\"queueHooks\";return bI._data(b4,e)||bI._data(b4,e,{empty:bI.Callbacks(\"once memory\").add(function(){bI._removeData(b4,b3+\"queue\");bI._removeData(b4,e)})})}});bI.fn.extend({queue:function(e,b3){var b4=2;if(typeof e!==\"string\"){b3=e;e=\"fx\";b4--}if(arguments.length<b4){return bI.queue(this[0],e)}return b3===aE?this:this.each(function(){var b5=bI.queue(this,e,b3);bI._queueHooks(this,e);if(e===\"fx\"&&b5[0]!==\"inprogress\"){bI.dequeue(this,e)}})},dequeue:function(e){return this.each(function(){bI.dequeue(this,e)})},delay:function(b3,e){b3=bI.fx?bI.fx.speeds[b3]||b3:b3;e=e||\"fx\";return this.queue(e,function(b5,b4){var b6=setTimeout(b5,b3);b4.stop=function(){clearTimeout(b6)}})},clearQueue:function(e){return this.queue(e||\"fx\",[])},promise:function(b4,b8){var b3,b5=1,b9=bI.Deferred(),b7=this,e=this.length,b6=function(){if(!(--b5)){b9.resolveWith(b7,[b7])}};if(typeof b4!==\"string\"){b8=b4;b4=aE}b4=b4||\"fx\";while(e--){b3=bI._data(b7[e],b4+\"queueHooks\");if(b3&&b3.empty){b5++;b3.empty.add(b6)}}b6();return b9.promise(b8)}});var a7,bZ,bL=/[\\t\\r\\n\\f]/g,ah=/\\r/g,aD=/^(?:input|select|textarea|button|object)$/i,C=/^(?:a|area)$/i,ao=/^(?:checked|selected)$/i,bO=bI.support.getSetAttribute,bE=bI.support.input;bI.fn.extend({attr:function(e,b3){return bI.access(this,bI.attr,e,b3,arguments.length>1)},removeAttr:function(e){return this.each(function(){bI.removeAttr(this,e)})},prop:function(e,b3){return bI.access(this,bI.prop,e,b3,arguments.length>1)},removeProp:function(e){e=bI.propFix[e]||e;return this.each(function(){try{this[e]=aE;delete this[e]}catch(b3){}})},addClass:function(b9){var b3,e,ca,b6,b4,b5=0,b7=this.length,b8=typeof b9===\"string\"&&b9;if(bI.isFunction(b9)){return this.each(function(cb){bI(this).addClass(b9.call(this,cb,this.className))})}if(b8){b3=(b9||\"\").match(aa)||[];for(;b5<b7;b5++){e=this[b5];ca=e.nodeType===1&&(e.className?(\" \"+e.className+\" \").replace(bL,\" \"):\" \");if(ca){b4=0;while((b6=b3[b4++])){if(ca.indexOf(\" \"+b6+\" \")<0){ca+=b6+\" \"}}e.className=bI.trim(ca)}}}return this},removeClass:function(b9){var b3,e,ca,b6,b4,b5=0,b7=this.length,b8=arguments.length===0||typeof b9===\"string\"&&b9;if(bI.isFunction(b9)){return this.each(function(cb){bI(this).removeClass(b9.call(this,cb,this.className))})}if(b8){b3=(b9||\"\").match(aa)||[];for(;b5<b7;b5++){e=this[b5];ca=e.nodeType===1&&(e.className?(\" \"+e.className+\" \").replace(bL,\" \"):\"\");if(ca){b4=0;while((b6=b3[b4++])){while(ca.indexOf(\" \"+b6+\" \")>=0){ca=ca.replace(\" \"+b6+\" \",\" \")}}e.className=b9?bI.trim(ca):\"\"}}}return this},toggleClass:function(b4,e){var b3=typeof b4;if(typeof e===\"boolean\"&&b3===\"string\"){return e?this.addClass(b4):this.removeClass(b4)}if(bI.isFunction(b4)){return this.each(function(b5){bI(this).toggleClass(b4.call(this,b5,this.className,e),e)})}return this.each(function(){if(b3===\"string\"){var b7,b6=0,b5=bI(this),b8=b4.match(aa)||[];while((b7=b8[b6++])){if(b5.hasClass(b7)){b5.removeClass(b7)}else{b5.addClass(b7)}}}else{if(b3===aA||b3===\"boolean\"){if(this.className){bI._data(this,\"__className__\",this.className)}this.className=this.className||b4===false?\"\":bI._data(this,\"__className__\")||\"\"}}})},hasClass:function(e){var b5=\" \"+e+\" \",b4=0,b3=this.length;for(;b4<b3;b4++){if(this[b4].nodeType===1&&(\" \"+this[b4].className+\" \").replace(bL,\" \").indexOf(b5)>=0){return true}}return false},val:function(b5){var b3,e,b6,b4=this[0];if(!arguments.length){if(b4){e=bI.valHooks[b4.type]||bI.valHooks[b4.nodeName.toLowerCase()];if(e&&\"get\" in e&&(b3=e.get(b4,\"value\"))!==aE){return b3}b3=b4.value;return typeof b3===\"string\"?b3.replace(ah,\"\"):b3==null?\"\":b3}return}b6=bI.isFunction(b5);return this.each(function(b7){var b8;if(this.nodeType!==1){return}if(b6){b8=b5.call(this,b7,bI(this).val())}else{b8=b5}if(b8==null){b8=\"\"}else{if(typeof b8===\"number\"){b8+=\"\"}else{if(bI.isArray(b8)){b8=bI.map(b8,function(b9){return b9==null?\"\":b9+\"\"})}}}e=bI.valHooks[this.type]||bI.valHooks[this.nodeName.toLowerCase()];if(!e||!(\"set\" in e)||e.set(this,b8,\"value\")===aE){this.value=b8}})}});bI.extend({valHooks:{option:{get:function(e){var b3=bI.find.attr(e,\"value\");return b3!=null?b3:e.text}},select:{get:function(e){var b8,b4,ca=e.options,b6=e.selectedIndex,b5=e.type===\"select-one\"||b6<0,b9=b5?null:[],b7=b5?b6+1:ca.length,b3=b6<0?b7:b5?b6:0;for(;b3<b7;b3++){b4=ca[b3];if((b4.selected||b3===b6)&&(bI.support.optDisabled?!b4.disabled:b4.getAttribute(\"disabled\")===null)&&(!b4.parentNode.disabled||!bI.nodeName(b4.parentNode,\"optgroup\"))){b8=bI(b4).val();if(b5){return b8}b9.push(b8)}}return b9},set:function(b6,b7){var b8,b5,b3=b6.options,e=bI.makeArray(b7),b4=b3.length;while(b4--){b5=b3[b4];if((b5.selected=bI.inArray(bI(b5).val(),e)>=0)){b8=true}}if(!b8){b6.selectedIndex=-1}return e}}},attr:function(b6,b5,b7){var e,b4,b3=b6.nodeType;if(!b6||b3===3||b3===8||b3===2){return}if(typeof b6.getAttribute===aA){return bI.prop(b6,b5,b7)}if(b3!==1||!bI.isXMLDoc(b6)){b5=b5.toLowerCase();e=bI.attrHooks[b5]||(bI.expr.match.bool.test(b5)?bZ:a7)}if(b7!==aE){if(b7===null){bI.removeAttr(b6,b5)}else{if(e&&\"set\" in e&&(b4=e.set(b6,b7,b5))!==aE){return b4}else{b6.setAttribute(b5,b7+\"\");return b7}}}else{if(e&&\"get\" in e&&(b4=e.get(b6,b5))!==null){return b4}else{b4=bI.find.attr(b6,b5);return b4==null?aE:b4}}},removeAttr:function(b4,b6){var e,b5,b3=0,b7=b6&&b6.match(aa);if(b7&&b4.nodeType===1){while((e=b7[b3++])){b5=bI.propFix[e]||e;if(bI.expr.match.bool.test(e)){if(bE&&bO||!ao.test(e)){b4[b5]=false}else{b4[bI.camelCase(\"default-\"+e)]=b4[b5]=false}}else{bI.attr(b4,e,\"\")}b4.removeAttribute(bO?e:b5)}}},attrHooks:{type:{set:function(e,b3){if(!bI.support.radioValue&&b3===\"radio\"&&bI.nodeName(e,\"input\")){var b4=e.value;e.setAttribute(\"type\",b3);if(b4){e.value=b4}return b3}}}},propFix:{\"for\":\"htmlFor\",\"class\":\"className\"},prop:function(b7,b5,b8){var b4,e,b6,b3=b7.nodeType;if(!b7||b3===3||b3===8||b3===2){return}b6=b3!==1||!bI.isXMLDoc(b7);if(b6){b5=bI.propFix[b5]||b5;e=bI.propHooks[b5]}if(b8!==aE){return e&&\"set\" in e&&(b4=e.set(b7,b8,b5))!==aE?b4:(b7[b5]=b8)}else{return e&&\"get\" in e&&(b4=e.get(b7,b5))!==null?b4:b7[b5]}},propHooks:{tabIndex:{get:function(b3){var e=bI.find.attr(b3,\"tabindex\");return e?parseInt(e,10):aD.test(b3.nodeName)||C.test(b3.nodeName)&&b3.href?0:-1}}}});bZ={set:function(b3,b4,e){if(b4===false){bI.removeAttr(b3,e)}else{if(bE&&bO||!ao.test(e)){b3.setAttribute(!bO&&bI.propFix[e]||e,e)}else{b3[bI.camelCase(\"default-\"+e)]=b3[e]=true}}return e}};bI.each(bI.expr.match.bool.source.match(/\\w+/g),function(b4,b3){var e=bI.expr.attrHandle[b3]||bI.find.attr;bI.expr.attrHandle[b3]=bE&&bO||!ao.test(b3)?function(b8,b6,b9){var b7=bI.expr.attrHandle[b6],b5=b9?aE:(bI.expr.attrHandle[b6]=aE)!=e(b8,b6,b9)?b6.toLowerCase():null;bI.expr.attrHandle[b6]=b7;return b5}:function(b6,b5,b7){return b7?aE:b6[bI.camelCase(\"default-\"+b5)]?b5.toLowerCase():null}});if(!bE||!bO){bI.attrHooks.value={set:function(b3,b4,e){if(bI.nodeName(b3,\"input\")){b3.defaultValue=b4}else{return a7&&a7.set(b3,b4,e)}}}}if(!bO){a7={set:function(b4,b5,b3){var e=b4.getAttributeNode(b3);if(!e){b4.setAttributeNode((e=b4.ownerDocument.createAttribute(b3)))}e.value=b5+=\"\";return b3===\"value\"||b5===b4.getAttribute(b3)?b5:aE}};bI.expr.attrHandle.id=bI.expr.attrHandle.name=bI.expr.attrHandle.coords=function(b4,b3,b5){var e;return b5?aE:(e=b4.getAttributeNode(b3))&&e.value!==\"\"?e.value:null};bI.valHooks.button={get:function(b4,b3){var e=b4.getAttributeNode(b3);return e&&e.specified?e.value:aE},set:a7.set};bI.attrHooks.contenteditable={set:function(b3,b4,e){a7.set(b3,b4===\"\"?false:b4,e)}};bI.each([\"width\",\"height\"],function(b3,e){bI.attrHooks[e]={set:function(b4,b5){if(b5===\"\"){b4.setAttribute(e,\"auto\");return b5}}}})}if(!bI.support.hrefNormalized){bI.each([\"href\",\"src\"],function(b3,e){bI.propHooks[e]={get:function(b4){return b4.getAttribute(e,4)}}})}if(!bI.support.style){bI.attrHooks.style={get:function(e){return e.style.cssText||aE},set:function(e,b3){return(e.style.cssText=b3+\"\")}}}if(!bI.support.optSelected){bI.propHooks.selected={get:function(b3){var e=b3.parentNode;if(e){e.selectedIndex;if(e.parentNode){e.parentNode.selectedIndex}}return null}}}bI.each([\"tabIndex\",\"readOnly\",\"maxLength\",\"cellSpacing\",\"cellPadding\",\"rowSpan\",\"colSpan\",\"useMap\",\"frameBorder\",\"contentEditable\"],function(){bI.propFix[this.toLowerCase()]=this});if(!bI.support.enctype){bI.propFix.enctype=\"encoding\"}bI.each([\"radio\",\"checkbox\"],function(){bI.valHooks[this]={set:function(e,b3){if(bI.isArray(b3)){return(e.checked=bI.inArray(bI(e).val(),b3)>=0)}}};if(!bI.support.checkOn){bI.valHooks[this].get=function(e){return e.getAttribute(\"value\")===null?\"on\":e.value}}});var bG=/^(?:input|select|textarea)$/i,a2=/^key/,bM=/^(?:mouse|contextmenu)|click/,bA=/^(?:focusinfocus|focusoutblur)$/,bt=/^([^.]*)(?:\\.(.+)|)$/;function P(){return true}function V(){return false}function ai(){try{return l.activeElement}catch(e){}}bI.event={global:{},add:function(b6,cb,cg,b8,b7){var b9,ch,ci,b4,cd,ca,cf,b5,ce,e,b3,cc=bI._data(b6);if(!cc){return}if(cg.handler){b4=cg;cg=b4.handler;b7=b4.selector}if(!cg.guid){cg.guid=bI.guid++}if(!(ch=cc.events)){ch=cc.events={}}if(!(ca=cc.handle)){ca=cc.handle=function(cj){return typeof bI!==aA&&(!cj||bI.event.triggered!==cj.type)?bI.event.dispatch.apply(ca.elem,arguments):aE};ca.elem=b6}cb=(cb||\"\").match(aa)||[\"\"];ci=cb.length;while(ci--){b9=bt.exec(cb[ci])||[];ce=b3=b9[1];e=(b9[2]||\"\").split(\".\").sort();if(!ce){continue}cd=bI.event.special[ce]||{};ce=(b7?cd.delegateType:cd.bindType)||ce;cd=bI.event.special[ce]||{};cf=bI.extend({type:ce,origType:b3,data:b8,handler:cg,guid:cg.guid,selector:b7,needsContext:b7&&bI.expr.match.needsContext.test(b7),namespace:e.join(\".\")},b4);if(!(b5=ch[ce])){b5=ch[ce]=[];b5.delegateCount=0;if(!cd.setup||cd.setup.call(b6,b8,e,ca)===false){if(b6.addEventListener){b6.addEventListener(ce,ca,false)}else{if(b6.attachEvent){b6.attachEvent(\"on\"+ce,ca)}}}}if(cd.add){cd.add.call(b6,cf);if(!cf.handler.guid){cf.handler.guid=cg.guid}}if(b7){b5.splice(b5.delegateCount++,0,cf)}else{b5.push(cf)}bI.event.global[ce]=true}b6=null},remove:function(b5,cb,ci,b6,ca){var b8,cf,b9,b7,ch,cg,cd,b4,ce,e,b3,cc=bI.hasData(b5)&&bI._data(b5);if(!cc||!(cg=cc.events)){return}cb=(cb||\"\").match(aa)||[\"\"];ch=cb.length;while(ch--){b9=bt.exec(cb[ch])||[];ce=b3=b9[1];e=(b9[2]||\"\").split(\".\").sort();if(!ce){for(ce in cg){bI.event.remove(b5,ce+cb[ch],ci,b6,true)}continue}cd=bI.event.special[ce]||{};ce=(b6?cd.delegateType:cd.bindType)||ce;b4=cg[ce]||[];b9=b9[2]&&new RegExp(\"(^|\\\\.)\"+e.join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\");b7=b8=b4.length;while(b8--){cf=b4[b8];if((ca||b3===cf.origType)&&(!ci||ci.guid===cf.guid)&&(!b9||b9.test(cf.namespace))&&(!b6||b6===cf.selector||b6===\"**\"&&cf.selector)){b4.splice(b8,1);if(cf.selector){b4.delegateCount--}if(cd.remove){cd.remove.call(b5,cf)}}}if(b7&&!b4.length){if(!cd.teardown||cd.teardown.call(b5,e,cc.handle)===false){bI.removeEvent(b5,ce,cc.handle)}delete cg[ce]}}if(bI.isEmptyObject(cg)){delete cc.handle;bI._removeData(b5,\"events\")}},trigger:function(b3,ca,b6,ch){var cb,b5,cf,cg,cd,b9,b8,b7=[b6||l],ce=T.call(b3,\"type\")?b3.type:b3,b4=T.call(b3,\"namespace\")?b3.namespace.split(\".\"):[];cf=b9=b6=b6||l;if(b6.nodeType===3||b6.nodeType===8){return}if(bA.test(ce+bI.event.triggered)){return}if(ce.indexOf(\".\")>=0){b4=ce.split(\".\");ce=b4.shift();b4.sort()}b5=ce.indexOf(\":\")<0&&\"on\"+ce;b3=b3[bI.expando]?b3:new bI.Event(ce,typeof b3===\"object\"&&b3);b3.isTrigger=ch?2:3;b3.namespace=b4.join(\".\");b3.namespace_re=b3.namespace?new RegExp(\"(^|\\\\.)\"+b4.join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"):null;b3.result=aE;if(!b3.target){b3.target=b6}ca=ca==null?[b3]:bI.makeArray(ca,[b3]);cd=bI.event.special[ce]||{};if(!ch&&cd.trigger&&cd.trigger.apply(b6,ca)===false){return}if(!ch&&!cd.noBubble&&!bI.isWindow(b6)){cg=cd.delegateType||ce;if(!bA.test(cg+ce)){cf=cf.parentNode}for(;cf;cf=cf.parentNode){b7.push(cf);b9=cf}if(b9===(b6.ownerDocument||l)){b7.push(b9.defaultView||b9.parentWindow||a1)}}b8=0;while((cf=b7[b8++])&&!b3.isPropagationStopped()){b3.type=b8>1?cg:cd.bindType||ce;cb=(bI._data(cf,\"events\")||{})[b3.type]&&bI._data(cf,\"handle\");if(cb){cb.apply(cf,ca)}cb=b5&&cf[b5];if(cb&&bI.acceptData(cf)&&cb.apply&&cb.apply(cf,ca)===false){b3.preventDefault()}}b3.type=ce;if(!ch&&!b3.isDefaultPrevented()){if((!cd._default||cd._default.apply(b7.pop(),ca)===false)&&bI.acceptData(b6)){if(b5&&b6[ce]&&!bI.isWindow(b6)){b9=b6[b5];if(b9){b6[b5]=null}bI.event.triggered=ce;try{b6[ce]()}catch(cc){}bI.event.triggered=aE;if(b9){b6[b5]=b9}}}}return b3.result},dispatch:function(e){e=bI.event.fix(e);var b6,b7,cb,b3,b5,ca=[],b9=a3.call(arguments),b4=(bI._data(this,\"events\")||{})[e.type]||[],b8=bI.event.special[e.type]||{};b9[0]=e;e.delegateTarget=this;if(b8.preDispatch&&b8.preDispatch.call(this,e)===false){return}ca=bI.event.handlers.call(this,e,b4);b6=0;while((b3=ca[b6++])&&!e.isPropagationStopped()){e.currentTarget=b3.elem;b5=0;while((cb=b3.handlers[b5++])&&!e.isImmediatePropagationStopped()){if(!e.namespace_re||e.namespace_re.test(cb.namespace)){e.handleObj=cb;e.data=cb.data;b7=((bI.event.special[cb.origType]||{}).handle||cb.handler).apply(b3.elem,b9);if(b7!==aE){if((e.result=b7)===false){e.preventDefault();e.stopPropagation()}}}}}if(b8.postDispatch){b8.postDispatch.call(this,e)}return e.result},handlers:function(e,b4){var b3,b9,b7,b6,b8=[],b5=b4.delegateCount,ca=e.target;if(b5&&ca.nodeType&&(!e.button||e.type!==\"click\")){for(;ca!=this;ca=ca.parentNode||this){if(ca.nodeType===1&&(ca.disabled!==true||e.type!==\"click\")){b7=[];for(b6=0;b6<b5;b6++){b9=b4[b6];b3=b9.selector+\" \";if(b7[b3]===aE){b7[b3]=b9.needsContext?bI(b3,this).index(ca)>=0:bI.find(b3,this,null,[ca]).length}if(b7[b3]){b7.push(b9)}}if(b7.length){b8.push({elem:ca,handlers:b7})}}}}if(b5<b4.length){b8.push({elem:this,handlers:b4.slice(b5)})}return b8},fix:function(b5){if(b5[bI.expando]){return b5}var b3,b8,b7,b4=b5.type,e=b5,b6=this.fixHooks[b4];if(!b6){this.fixHooks[b4]=b6=bM.test(b4)?this.mouseHooks:a2.test(b4)?this.keyHooks:{}}b7=b6.props?this.props.concat(b6.props):this.props;b5=new bI.Event(e);b3=b7.length;while(b3--){b8=b7[b3];b5[b8]=e[b8]}if(!b5.target){b5.target=e.srcElement||l}if(b5.target.nodeType===3){b5.target=b5.target.parentNode}b5.metaKey=!!b5.metaKey;return b6.filter?b6.filter(b5,e):b5},props:\"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which\".split(\" \"),fixHooks:{},keyHooks:{props:\"char charCode key keyCode\".split(\" \"),filter:function(b3,e){if(b3.which==null){b3.which=e.charCode!=null?e.charCode:e.keyCode}return b3}},mouseHooks:{props:\"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement\".split(\" \"),filter:function(b5,b4){var e,b6,b7,b3=b4.button,b8=b4.fromElement;if(b5.pageX==null&&b4.clientX!=null){b6=b5.target.ownerDocument||l;b7=b6.documentElement;e=b6.body;b5.pageX=b4.clientX+(b7&&b7.scrollLeft||e&&e.scrollLeft||0)-(b7&&b7.clientLeft||e&&e.clientLeft||0);b5.pageY=b4.clientY+(b7&&b7.scrollTop||e&&e.scrollTop||0)-(b7&&b7.clientTop||e&&e.clientTop||0)}if(!b5.relatedTarget&&b8){b5.relatedTarget=b8===b5.target?b4.toElement:b8}if(!b5.which&&b3!==aE){b5.which=(b3&1?1:(b3&2?3:(b3&4?2:0)))}return b5}},special:{load:{noBubble:true},focus:{trigger:function(){if(this!==ai()&&this.focus){try{this.focus();return false}catch(b3){}}},delegateType:\"focusin\"},blur:{trigger:function(){if(this===ai()&&this.blur){this.blur();return false}},delegateType:\"focusout\"},click:{trigger:function(){if(bI.nodeName(this,\"input\")&&this.type===\"checkbox\"&&this.click){this.click();return false}},_default:function(e){return bI.nodeName(e.target,\"a\")}},beforeunload:{postDispatch:function(e){if(e.result!==aE){e.originalEvent.returnValue=e.result}}}},simulate:function(b4,b6,b5,b3){var b7=bI.extend(new bI.Event(),b5,{type:b4,isSimulated:true,originalEvent:{}});if(b3){bI.event.trigger(b7,null,b6)}else{bI.event.dispatch.call(b6,b7)}if(b7.isDefaultPrevented()){b5.preventDefault()}}};bI.removeEvent=l.removeEventListener?function(b3,e,b4){if(b3.removeEventListener){b3.removeEventListener(e,b4,false)}}:function(b4,b3,b5){var e=\"on\"+b3;if(b4.detachEvent){if(typeof b4[e]===aA){b4[e]=null}b4.detachEvent(e,b5)}};bI.Event=function(b3,e){if(!(this instanceof bI.Event)){return new bI.Event(b3,e)}if(b3&&b3.type){this.originalEvent=b3;this.type=b3.type;this.isDefaultPrevented=(b3.defaultPrevented||b3.returnValue===false||b3.getPreventDefault&&b3.getPreventDefault())?P:V}else{this.type=b3}if(e){bI.extend(this,e)}this.timeStamp=b3&&b3.timeStamp||bI.now();this[bI.expando]=true};bI.Event.prototype={isDefaultPrevented:V,isPropagationStopped:V,isImmediatePropagationStopped:V,preventDefault:function(){var b3=this.originalEvent;this.isDefaultPrevented=P;if(!b3){return}if(b3.preventDefault){b3.preventDefault()}else{b3.returnValue=false}},stopPropagation:function(){var b3=this.originalEvent;this.isPropagationStopped=P;if(!b3){return}if(b3.stopPropagation){b3.stopPropagation()}b3.cancelBubble=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=P;this.stopPropagation()}};bI.each({mouseenter:\"mouseover\",mouseleave:\"mouseout\"},function(b3,e){bI.event.special[b3]={delegateType:e,bindType:e,handle:function(b6){var b4,b8=this,b7=b6.relatedTarget,b5=b6.handleObj;if(!b7||(b7!==b8&&!bI.contains(b8,b7))){b6.type=b5.origType;b4=b5.handler.apply(this,arguments);b6.type=e}return b4}}});if(!bI.support.submitBubbles){bI.event.special.submit={setup:function(){if(bI.nodeName(this,\"form\")){return false}bI.event.add(this,\"click._submit keypress._submit\",function(b5){var b4=b5.target,b3=bI.nodeName(b4,\"input\")||bI.nodeName(b4,\"button\")?b4.form:aE;if(b3&&!bI._data(b3,\"submitBubbles\")){bI.event.add(b3,\"submit._submit\",function(e){e._submit_bubble=true});bI._data(b3,\"submitBubbles\",true)}})},postDispatch:function(e){if(e._submit_bubble){delete e._submit_bubble;if(this.parentNode&&!e.isTrigger){bI.event.simulate(\"submit\",this.parentNode,e,true)}}},teardown:function(){if(bI.nodeName(this,\"form\")){return false}bI.event.remove(this,\"._submit\")}}}if(!bI.support.changeBubbles){bI.event.special.change={setup:function(){if(bG.test(this.nodeName)){if(this.type===\"checkbox\"||this.type===\"radio\"){bI.event.add(this,\"propertychange._change\",function(e){if(e.originalEvent.propertyName===\"checked\"){this._just_changed=true}});bI.event.add(this,\"click._change\",function(e){if(this._just_changed&&!e.isTrigger){this._just_changed=false}bI.event.simulate(\"change\",this,e,true)})}return false}bI.event.add(this,\"beforeactivate._change\",function(b4){var b3=b4.target;if(bG.test(b3.nodeName)&&!bI._data(b3,\"changeBubbles\")){bI.event.add(b3,\"change._change\",function(e){if(this.parentNode&&!e.isSimulated&&!e.isTrigger){bI.event.simulate(\"change\",this.parentNode,e,true)}});bI._data(b3,\"changeBubbles\",true)}})},handle:function(b3){var e=b3.target;if(this!==e||b3.isSimulated||b3.isTrigger||(e.type!==\"radio\"&&e.type!==\"checkbox\")){return b3.handleObj.handler.apply(this,arguments)}},teardown:function(){bI.event.remove(this,\"._change\");return !bG.test(this.nodeName)}}}if(!bI.support.focusinBubbles){bI.each({focus:\"focusin\",blur:\"focusout\"},function(b5,e){var b3=0,b4=function(b6){bI.event.simulate(e,b6.target,bI.event.fix(b6),true)};bI.event.special[e]={setup:function(){if(b3++===0){l.addEventListener(b5,b4,true)}},teardown:function(){if(--b3===0){l.removeEventListener(b5,b4,true)}}}})}bI.fn.extend({on:function(b4,e,b7,b6,b3){var b5,b8;if(typeof b4===\"object\"){if(typeof e!==\"string\"){b7=b7||e;e=aE}for(b5 in b4){this.on(b5,e,b7,b4[b5],b3)}return this}if(b7==null&&b6==null){b6=e;b7=e=aE}else{if(b6==null){if(typeof e===\"string\"){b6=b7;b7=aE}else{b6=b7;b7=e;e=aE}}}if(b6===false){b6=V}else{if(!b6){return this}}if(b3===1){b8=b6;b6=function(b9){bI().off(b9);return b8.apply(this,arguments)};b6.guid=b8.guid||(b8.guid=bI.guid++)}return this.each(function(){bI.event.add(this,b4,b6,b7,e)})},one:function(b3,e,b5,b4){return this.on(b3,e,b5,b4,1)},off:function(b4,e,b6){var b3,b5;if(b4&&b4.preventDefault&&b4.handleObj){b3=b4.handleObj;bI(b4.delegateTarget).off(b3.namespace?b3.origType+\".\"+b3.namespace:b3.origType,b3.selector,b3.handler);return this}if(typeof b4===\"object\"){for(b5 in b4){this.off(b5,e,b4[b5])}return this}if(e===false||typeof e===\"function\"){b6=e;e=aE}if(b6===false){b6=V}return this.each(function(){bI.event.remove(this,b4,b6,e)})},trigger:function(e,b3){return this.each(function(){bI.event.trigger(e,b3,this)})},triggerHandler:function(e,b4){var b3=this[0];if(b3){return bI.event.trigger(e,b4,b3,true)}}});var al=/^.[^:#\\[\\.,]*$/,bs=/^(?:parents|prev(?:Until|All))/,x=bI.expr.match.needsContext,bw={children:true,contents:true,next:true,prev:true};bI.fn.extend({find:function(b3){var b6,b5=[],b4=this,e=b4.length;if(typeof b3!==\"string\"){return this.pushStack(bI(b3).filter(function(){for(b6=0;b6<e;b6++){if(bI.contains(b4[b6],this)){return true}}}))}for(b6=0;b6<e;b6++){bI.find(b3,b4[b6],b5)}b5=this.pushStack(e>1?bI.unique(b5):b5);b5.selector=this.selector?this.selector+\" \"+b3:b3;return b5},has:function(b5){var b4,b3=bI(b5,this),e=b3.length;return this.filter(function(){for(b4=0;b4<e;b4++){if(bI.contains(this,b3[b4])){return true}}})},not:function(e){return this.pushStack(aM(this,e||[],true))},filter:function(e){return this.pushStack(aM(this,e||[],false))},is:function(e){return !!aM(this,typeof e===\"string\"&&x.test(e)?bI(e):e||[],false).length},closest:function(b6,b5){var b7,b4=0,e=this.length,b3=[],b8=x.test(b6)||typeof b6!==\"string\"?bI(b6,b5||this.context):0;for(;b4<e;b4++){for(b7=this[b4];b7&&b7!==b5;b7=b7.parentNode){if(b7.nodeType<11&&(b8?b8.index(b7)>-1:b7.nodeType===1&&bI.find.matchesSelector(b7,b6))){b7=b3.push(b7);break}}}return this.pushStack(b3.length>1?bI.unique(b3):b3)},index:function(e){if(!e){return(this[0]&&this[0].parentNode)?this.first().prevAll().length:-1}if(typeof e===\"string\"){return bI.inArray(this[0],bI(e))}return bI.inArray(e.jquery?e[0]:e,this)},add:function(e,b3){var b5=typeof e===\"string\"?bI(e,b3):bI.makeArray(e&&e.nodeType?[e]:e),b4=bI.merge(this.get(),b5);return this.pushStack(bI.unique(b4))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}});function aV(b3,e){do{b3=b3[e]}while(b3&&b3.nodeType!==1);return b3}bI.each({parent:function(b3){var e=b3.parentNode;return e&&e.nodeType!==11?e:null},parents:function(e){return bI.dir(e,\"parentNode\")},parentsUntil:function(b3,e,b4){return bI.dir(b3,\"parentNode\",b4)},next:function(e){return aV(e,\"nextSibling\")},prev:function(e){return aV(e,\"previousSibling\")},nextAll:function(e){return bI.dir(e,\"nextSibling\")},prevAll:function(e){return bI.dir(e,\"previousSibling\")},nextUntil:function(b3,e,b4){return bI.dir(b3,\"nextSibling\",b4)},prevUntil:function(b3,e,b4){return bI.dir(b3,\"previousSibling\",b4)},siblings:function(e){return bI.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return bI.sibling(e.firstChild)},contents:function(e){return bI.nodeName(e,\"iframe\")?e.contentDocument||e.contentWindow.document:bI.merge([],e.childNodes)}},function(e,b3){bI.fn[e]=function(b6,b4){var b5=bI.map(this,b3,b6);if(e.slice(-5)!==\"Until\"){b4=b6}if(b4&&typeof b4===\"string\"){b5=bI.filter(b4,b5)}if(this.length>1){if(!bw[e]){b5=bI.unique(b5)}if(bs.test(e)){b5=b5.reverse()}}return this.pushStack(b5)}});bI.extend({filter:function(b5,e,b4){var b3=e[0];if(b4){b5=\":not(\"+b5+\")\"}return e.length===1&&b3.nodeType===1?bI.find.matchesSelector(b3,b5)?[b3]:[]:bI.find.matches(b5,bI.grep(e,function(b6){return b6.nodeType===1}))},dir:function(b4,b3,b6){var e=[],b5=b4[b3];while(b5&&b5.nodeType!==9&&(b6===aE||b5.nodeType!==1||!bI(b5).is(b6))){if(b5.nodeType===1){e.push(b5)}b5=b5[b3]}return e},sibling:function(b4,b3){var e=[];for(;b4;b4=b4.nextSibling){if(b4.nodeType===1&&b4!==b3){e.push(b4)}}return e}});function aM(b4,e,b3){if(bI.isFunction(e)){return bI.grep(b4,function(b6,b5){return !!e.call(b6,b5,b6)!==b3})}if(e.nodeType){return bI.grep(b4,function(b5){return(b5===e)!==b3})}if(typeof e===\"string\"){if(al.test(e)){return bI.filter(e,b4,b3)}e=bI.filter(e,b4)}return bI.grep(b4,function(b5){return(bI.inArray(b5,e)>=0)!==b3})}function z(e){var b4=d.split(\"|\"),b3=e.createDocumentFragment();if(b3.createElement){while(b4.length){b3.createElement(b4.pop())}}return b3}var d=\"abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video\",ay=/ jQuery\\d+=\"(?:null|\\d+)\"/g,I=new RegExp(\"<(?:\"+d+\")[\\\\s/>]\",\"i\"),b2=/^\\s+/,aB=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>/gi,m=/<([\\w:]+)/,bX=/<tbody/i,H=/<|&#?\\w+;/,aj=/<(?:script|style|link)/i,q=/^(?:checkbox|radio)$/i,bT=/checked\\s*(?:[^=]|=\\s*.checked.)/i,by=/^$|\\/(?:java|ecma)script/i,ap=/^true\\/(.*)/,aI=/^\\s*<!(?:\\[CDATA\\[|--)|(?:\\]\\]|--)>\\s*$/g,R={option:[1,\"<select multiple='multiple'>\",\"</select>\"],legend:[1,\"<fieldset>\",\"</fieldset>\"],area:[1,\"<map>\",\"</map>\"],param:[1,\"<object>\",\"</object>\"],thead:[1,\"<table>\",\"</table>\"],tr:[2,\"<table><tbody>\",\"</tbody></table>\"],col:[2,\"<table><tbody></tbody><colgroup>\",\"</colgroup></table>\"],td:[3,\"<table><tbody><tr>\",\"</tr></tbody></table>\"],_default:bI.support.htmlSerialize?[0,\"\",\"\"]:[1,\"X<div>\",\"</div>\"]},aQ=z(l),j=aQ.appendChild(l.createElement(\"div\"));R.optgroup=R.option;R.tbody=R.tfoot=R.colgroup=R.caption=R.thead;R.th=R.td;bI.fn.extend({text:function(e){return bI.access(this,function(b3){return b3===aE?bI.text(this):this.empty().append((this[0]&&this[0].ownerDocument||l).createTextNode(b3))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var b3=aZ(this,e);b3.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var b3=aZ(this,e);b3.insertBefore(e,b3.firstChild)}})},before:function(){return this.domManip(arguments,function(e){if(this.parentNode){this.parentNode.insertBefore(e,this)}})},after:function(){return this.domManip(arguments,function(e){if(this.parentNode){this.parentNode.insertBefore(e,this.nextSibling)}})},remove:function(e,b6){var b5,b3=e?bI.filter(e,this):this,b4=0;for(;(b5=b3[b4])!=null;b4++){if(!b6&&b5.nodeType===1){bI.cleanData(k(b5))}if(b5.parentNode){if(b6&&bI.contains(b5.ownerDocument,b5)){br(k(b5,\"script\"))}b5.parentNode.removeChild(b5)}}return this},empty:function(){var b3,e=0;for(;(b3=this[e])!=null;e++){if(b3.nodeType===1){bI.cleanData(k(b3,false))}while(b3.firstChild){b3.removeChild(b3.firstChild)}if(b3.options&&bI.nodeName(b3,\"select\")){b3.options.length=0}}return this},clone:function(b3,e){b3=b3==null?false:b3;e=e==null?b3:e;return this.map(function(){return bI.clone(this,b3,e)})},html:function(e){return bI.access(this,function(b6){var b5=this[0]||{},b4=0,b3=this.length;if(b6===aE){return b5.nodeType===1?b5.innerHTML.replace(ay,\"\"):aE}if(typeof b6===\"string\"&&!aj.test(b6)&&(bI.support.htmlSerialize||!I.test(b6))&&(bI.support.leadingWhitespace||!b2.test(b6))&&!R[(m.exec(b6)||[\"\",\"\"])[1].toLowerCase()]){b6=b6.replace(aB,\"<$1></$2>\");try{for(;b4<b3;b4++){b5=this[b4]||{};if(b5.nodeType===1){bI.cleanData(k(b5,false));b5.innerHTML=b6}}b5=0}catch(b7){}}if(b5){this.empty().append(b6)}},null,e,arguments.length)},replaceWith:function(){var e=bI.map(this,function(b4){return[b4.nextSibling,b4.parentNode]}),b3=0;this.domManip(arguments,function(b6){var b5=e[b3++],b4=e[b3++];if(b4){if(b5&&b5.parentNode!==b4){b5=this.nextSibling}bI(this).remove();b4.insertBefore(b6,b5)}},true);return b3?this:this.remove()},detach:function(e){return this.remove(e,true)},domManip:function(cb,cg,b4){cb=aG.apply([],cb);var b9,b5,e,b7,ce,ca,b8=0,b6=this.length,cd=this,cf=b6-1,cc=cb[0],b3=bI.isFunction(cc);if(b3||!(b6<=1||typeof cc!==\"string\"||bI.support.checkClone||!bT.test(cc))){return this.each(function(ci){var ch=cd.eq(ci);if(b3){cb[0]=cc.call(this,ci,ch.html())}ch.domManip(cb,cg,b4)})}if(b6){ca=bI.buildFragment(cb,this[0].ownerDocument,false,!b4&&this);b9=ca.firstChild;if(ca.childNodes.length===1){ca=b9}if(b9){b7=bI.map(k(ca,\"script\"),t);e=b7.length;for(;b8<b6;b8++){b5=ca;if(b8!==cf){b5=bI.clone(b5,true,true);if(e){bI.merge(b7,k(b5,\"script\"))}}cg.call(this[b8],b5,b8)}if(e){ce=b7[b7.length-1].ownerDocument;bI.map(b7,bc);for(b8=0;b8<e;b8++){b5=b7[b8];if(by.test(b5.type||\"\")&&!bI._data(b5,\"globalEval\")&&bI.contains(ce,b5)){if(b5.src){bI._evalUrl(b5.src)}else{bI.globalEval((b5.text||b5.textContent||b5.innerHTML||\"\").replace(aI,\"\"))}}}}ca=b9=null}}return this}});function aZ(b3,e){return bI.nodeName(b3,\"table\")&&bI.nodeName(e.nodeType===1?e:e.firstChild,\"tr\")?b3.getElementsByTagName(\"tbody\")[0]||b3.appendChild(b3.ownerDocument.createElement(\"tbody\")):b3}function t(e){e.type=(bI.find.attr(e,\"type\")!==null)+\"/\"+e.type;return e}function bc(b3){var e=ap.exec(b3.type);if(e){b3.type=e[1]}else{b3.removeAttribute(\"type\")}return b3}function br(e,b4){var b5,b3=0;for(;(b5=e[b3])!=null;b3++){bI._data(b5,\"globalEval\",!b4||bI._data(b4[b3],\"globalEval\"))}}function aq(b9,b3){if(b3.nodeType!==1||!bI.hasData(b9)){return}var b6,b5,e,b8=bI._data(b9),b7=bI._data(b3,b8),b4=b8.events;if(b4){delete b7.handle;b7.events={};for(b6 in b4){for(b5=0,e=b4[b6].length;b5<e;b5++){bI.event.add(b3,b6,b4[b6][b5])}}}if(b7.data){b7.data=bI.extend({},b7.data)}}function O(b6,b3){var b7,b5,b4;if(b3.nodeType!==1){return}b7=b3.nodeName.toLowerCase();if(!bI.support.noCloneEvent&&b3[bI.expando]){b4=bI._data(b3);for(b5 in b4.events){bI.removeEvent(b3,b5,b4.handle)}b3.removeAttribute(bI.expando)}if(b7===\"script\"&&b3.text!==b6.text){t(b3).text=b6.text;bc(b3)}else{if(b7===\"object\"){if(b3.parentNode){b3.outerHTML=b6.outerHTML}if(bI.support.html5Clone&&(b6.innerHTML&&!bI.trim(b3.innerHTML))){b3.innerHTML=b6.innerHTML}}else{if(b7===\"input\"&&q.test(b6.type)){b3.defaultChecked=b3.checked=b6.checked;if(b3.value!==b6.value){b3.value=b6.value}}else{if(b7===\"option\"){b3.defaultSelected=b3.selected=b6.defaultSelected}else{if(b7===\"input\"||b7===\"textarea\"){b3.defaultValue=b6.defaultValue}}}}}}bI.each({appendTo:\"append\",prependTo:\"prepend\",insertBefore:\"before\",insertAfter:\"after\",replaceAll:\"replaceWith\"},function(e,b3){bI.fn[e]=function(b4){var b5,b7=0,b6=[],b9=bI(b4),b8=b9.length-1;for(;b7<=b8;b7++){b5=b7===b8?this:this.clone(true);bI(b9[b7])[b3](b5);am.apply(b6,b5.get())}return this.pushStack(b6)}});function k(b5,e){var b3,b6,b4=0,b7=typeof b5.getElementsByTagName!==aA?b5.getElementsByTagName(e||\"*\"):typeof b5.querySelectorAll!==aA?b5.querySelectorAll(e||\"*\"):aE;if(!b7){for(b7=[],b3=b5.childNodes||b5;(b6=b3[b4])!=null;b4++){if(!e||bI.nodeName(b6,e)){b7.push(b6)}else{bI.merge(b7,k(b6,e))}}}return e===aE||e&&bI.nodeName(b5,e)?bI.merge([b5],b7):b7}function bU(e){if(q.test(e.type)){e.defaultChecked=e.checked}}bI.extend({clone:function(b3,b5,e){var b7,b4,ca,b6,b8,b9=bI.contains(b3.ownerDocument,b3);if(bI.support.html5Clone||bI.isXMLDoc(b3)||!I.test(\"<\"+b3.nodeName+\">\")){ca=b3.cloneNode(true)}else{j.innerHTML=b3.outerHTML;j.removeChild(ca=j.firstChild)}if((!bI.support.noCloneEvent||!bI.support.noCloneChecked)&&(b3.nodeType===1||b3.nodeType===11)&&!bI.isXMLDoc(b3)){b7=k(ca);b8=k(b3);for(b6=0;(b4=b8[b6])!=null;++b6){if(b7[b6]){O(b4,b7[b6])}}}if(b5){if(e){b8=b8||k(b3);b7=b7||k(ca);for(b6=0;(b4=b8[b6])!=null;b6++){aq(b4,b7[b6])}}else{aq(b3,ca)}}b7=k(ca,\"script\");if(b7.length>0){br(b7,!b9&&k(b3,\"script\"))}b7=b8=b4=null;return ca},buildFragment:function(b3,b5,ca,cf){var cb,b7,b9,ce,cg,cd,b4,b8=b3.length,b6=z(b5),e=[],cc=0;for(;cc<b8;cc++){b7=b3[cc];if(b7||b7===0){if(bI.type(b7)===\"object\"){bI.merge(e,b7.nodeType?[b7]:b7)}else{if(!H.test(b7)){e.push(b5.createTextNode(b7))}else{ce=ce||b6.appendChild(b5.createElement(\"div\"));cg=(m.exec(b7)||[\"\",\"\"])[1].toLowerCase();b4=R[cg]||R._default;ce.innerHTML=b4[1]+b7.replace(aB,\"<$1></$2>\")+b4[2];cb=b4[0];while(cb--){ce=ce.lastChild}if(!bI.support.leadingWhitespace&&b2.test(b7)){e.push(b5.createTextNode(b2.exec(b7)[0]))}if(!bI.support.tbody){b7=cg===\"table\"&&!bX.test(b7)?ce.firstChild:b4[1]===\"<table>\"&&!bX.test(b7)?ce:0;cb=b7&&b7.childNodes.length;while(cb--){if(bI.nodeName((cd=b7.childNodes[cb]),\"tbody\")&&!cd.childNodes.length){b7.removeChild(cd)}}}bI.merge(e,ce.childNodes);ce.textContent=\"\";while(ce.firstChild){ce.removeChild(ce.firstChild)}ce=b6.lastChild}}}}if(ce){b6.removeChild(ce)}if(!bI.support.appendChecked){bI.grep(k(e,\"input\"),bU)}cc=0;while((b7=e[cc++])){if(cf&&bI.inArray(b7,cf)!==-1){continue}b9=bI.contains(b7.ownerDocument,b7);ce=k(b6.appendChild(b7),\"script\");if(b9){br(ce)}if(ca){cb=0;while((b7=ce[cb++])){if(by.test(b7.type||\"\")){ca.push(b7)}}}}ce=null;return b6},cleanData:function(b3,cb){var b5,ca,b4,b6,b7=0,cc=bI.expando,e=bI.cache,b8=bI.support.deleteExpando,b9=bI.event.special;for(;(b5=b3[b7])!=null;b7++){if(cb||bI.acceptData(b5)){b4=b5[cc];b6=b4&&e[b4];if(b6){if(b6.events){for(ca in b6.events){if(b9[ca]){bI.event.remove(b5,ca)}else{bI.removeEvent(b5,ca,b6.handle)}}}if(e[b4]){delete e[b4];if(b8){delete b5[cc]}else{if(typeof b5.removeAttribute!==aA){b5.removeAttribute(cc)}else{b5[cc]=null}}a5.push(b4)}}}}},_evalUrl:function(e){return bI.ajax({url:e,type:\"GET\",dataType:\"script\",async:false,global:false,\"throws\":true})}});bI.fn.extend({wrapAll:function(e){if(bI.isFunction(e)){return this.each(function(b4){bI(this).wrapAll(e.call(this,b4))})}if(this[0]){var b3=bI(e,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){b3.insertBefore(this[0])}b3.map(function(){var b4=this;while(b4.firstChild&&b4.firstChild.nodeType===1){b4=b4.firstChild}return b4}).append(this)}return this},wrapInner:function(e){if(bI.isFunction(e)){return this.each(function(b3){bI(this).wrapInner(e.call(this,b3))})}return this.each(function(){var b3=bI(this),b4=b3.contents();if(b4.length){b4.wrapAll(e)}else{b3.append(e)}})},wrap:function(e){var b3=bI.isFunction(e);return this.each(function(b4){bI(this).wrapAll(b3?e.call(this,b4):e)})},unwrap:function(){return this.parent().each(function(){if(!bI.nodeName(this,\"body\")){bI(this).replaceWith(this.childNodes)}}).end()}});var aC,bn,D,bf=/alpha\\([^)]*\\)/i,aR=/opacity\\s*=\\s*([^)]*)/,bm=/^(top|right|bottom|left)$/,E=/^(none|table(?!-c[ea]).+)/,aW=/^margin/,a8=new RegExp(\"^(\"+bz+\")(.*)$\",\"i\"),U=new RegExp(\"^(\"+bz+\")(?!px)[a-z%]+$\",\"i\"),Q=new RegExp(\"^([+-])=(\"+bz+\")\",\"i\"),bi={BODY:\"block\"},bb={position:\"absolute\",visibility:\"hidden\",display:\"block\"},bB={letterSpacing:0,fontWeight:400},bS=[\"Top\",\"Right\",\"Bottom\",\"Left\"],at=[\"Webkit\",\"O\",\"Moz\",\"ms\"];function b(b5,b3){if(b3 in b5){return b3}var b6=b3.charAt(0).toUpperCase()+b3.slice(1),e=b3,b4=at.length;while(b4--){b3=at[b4]+b6;if(b3 in b5){return b3}}return e}function N(b3,e){b3=e||b3;return bI.css(b3,\"display\")===\"none\"||!bI.contains(b3.ownerDocument,b3)}function p(b8,e){var b9,b6,b7,b3=[],b4=0,b5=b8.length;for(;b4<b5;b4++){b6=b8[b4];if(!b6.style){continue}b3[b4]=bI._data(b6,\"olddisplay\");b9=b6.style.display;if(e){if(!b3[b4]&&b9===\"none\"){b6.style.display=\"\"}if(b6.style.display===\"\"&&N(b6)){b3[b4]=bI._data(b6,\"olddisplay\",bD(b6.nodeName))}}else{if(!b3[b4]){b7=N(b6);if(b9&&b9!==\"none\"||!b7){bI._data(b6,\"olddisplay\",b7?b9:bI.css(b6,\"display\"))}}}}for(b4=0;b4<b5;b4++){b6=b8[b4];if(!b6.style){continue}if(!e||b6.style.display===\"none\"||b6.style.display===\"\"){b6.style.display=e?b3[b4]||\"\":\"none\"}}return b8}bI.fn.extend({css:function(e,b3){return bI.access(this,function(b8,b5,b9){var b4,b7,ca={},b6=0;if(bI.isArray(b5)){b7=bn(b8);b4=b5.length;for(;b6<b4;b6++){ca[b5[b6]]=bI.css(b8,b5[b6],false,b7)}return ca}return b9!==aE?bI.style(b8,b5,b9):bI.css(b8,b5)},e,b3,arguments.length>1)},show:function(){return p(this,true)},hide:function(){return p(this)},toggle:function(e){if(typeof e===\"boolean\"){return e?this.show():this.hide()}return this.each(function(){if(N(this)){bI(this).show()}else{bI(this).hide()}})}});bI.extend({cssHooks:{opacity:{get:function(b4,b3){if(b3){var e=D(b4,\"opacity\");return e===\"\"?\"1\":e}}}},cssNumber:{columnCount:true,fillOpacity:true,fontWeight:true,lineHeight:true,opacity:true,order:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{\"float\":bI.support.cssFloat?\"cssFloat\":\"styleFloat\"},style:function(b5,b4,cb,b6){if(!b5||b5.nodeType===3||b5.nodeType===8||!b5.style){return}var b9,ca,cc,b7=bI.camelCase(b4),b3=b5.style;b4=bI.cssProps[b7]||(bI.cssProps[b7]=b(b3,b7));cc=bI.cssHooks[b4]||bI.cssHooks[b7];if(cb!==aE){ca=typeof cb;if(ca===\"string\"&&(b9=Q.exec(cb))){cb=(b9[1]+1)*b9[2]+parseFloat(bI.css(b5,b4));ca=\"number\"}if(cb==null||ca===\"number\"&&isNaN(cb)){return}if(ca===\"number\"&&!bI.cssNumber[b7]){cb+=\"px\"}if(!bI.support.clearCloneStyle&&cb===\"\"&&b4.indexOf(\"background\")===0){b3[b4]=\"inherit\"}if(!cc||!(\"set\" in cc)||(cb=cc.set(b5,cb,b6))!==aE){try{b3[b4]=cb}catch(b8){}}}else{if(cc&&\"get\" in cc&&(b9=cc.get(b5,false,b6))!==aE){return b9}return b3[b4]}},css:function(b8,b6,b3,b7){var b5,b9,e,b4=bI.camelCase(b6);b6=bI.cssProps[b4]||(bI.cssProps[b4]=b(b8.style,b4));e=bI.cssHooks[b6]||bI.cssHooks[b4];if(e&&\"get\" in e){b9=e.get(b8,true,b3)}if(b9===aE){b9=D(b8,b6,b7)}if(b9===\"normal\"&&b6 in bB){b9=bB[b6]}if(b3===\"\"||b3){b5=parseFloat(b9);return b3===true||bI.isNumeric(b5)?b5||0:b9}return b9}});if(a1.getComputedStyle){bn=function(e){return a1.getComputedStyle(e,null)};D=function(b6,b4,b8){var b5,b3,ca,b7=b8||bn(b6),b9=b7?b7.getPropertyValue(b4)||b7[b4]:aE,e=b6.style;if(b7){if(b9===\"\"&&!bI.contains(b6.ownerDocument,b6)){b9=bI.style(b6,b4)}if(U.test(b9)&&aW.test(b4)){b5=e.width;b3=e.minWidth;ca=e.maxWidth;e.minWidth=e.maxWidth=e.width=b9;b9=b7.width;e.width=b5;e.minWidth=b3;e.maxWidth=ca}}return b9}}else{if(l.documentElement.currentStyle){bn=function(e){return e.currentStyle};D=function(b5,b3,b8){var b4,b7,b9,b6=b8||bn(b5),ca=b6?b6[b3]:aE,e=b5.style;if(ca==null&&e&&e[b3]){ca=e[b3]}if(U.test(ca)&&!bm.test(b3)){b4=e.left;b7=b5.runtimeStyle;b9=b7&&b7.left;if(b9){b7.left=b5.currentStyle.left}e.left=b3===\"fontSize\"?\"1em\":ca;ca=e.pixelLeft+\"px\";e.left=b4;if(b9){b7.left=b9}}return ca===\"\"?\"auto\":ca}}}function aH(e,b4,b5){var b3=a8.exec(b4);return b3?Math.max(0,b3[1]-(b5||0))+(b3[2]||\"px\"):b4}function au(b6,b3,e,b8,b5){var b4=e===(b8?\"border\":\"content\")?4:b3===\"width\"?1:0,b7=0;for(;b4<4;b4+=2){if(e===\"margin\"){b7+=bI.css(b6,e+bS[b4],true,b5)}if(b8){if(e===\"content\"){b7-=bI.css(b6,\"padding\"+bS[b4],true,b5)}if(e!==\"margin\"){b7-=bI.css(b6,\"border\"+bS[b4]+\"Width\",true,b5)}}else{b7+=bI.css(b6,\"padding\"+bS[b4],true,b5);if(e!==\"padding\"){b7+=bI.css(b6,\"border\"+bS[b4]+\"Width\",true,b5)}}}return b7}function u(b6,b3,e){var b5=true,b7=b3===\"width\"?b6.offsetWidth:b6.offsetHeight,b4=bn(b6),b8=bI.support.boxSizing&&bI.css(b6,\"boxSizing\",false,b4)===\"border-box\";if(b7<=0||b7==null){b7=D(b6,b3,b4);if(b7<0||b7==null){b7=b6.style[b3]}if(U.test(b7)){return b7}b5=b8&&(bI.support.boxSizingReliable||b7===b6.style[b3]);b7=parseFloat(b7)||0}return(b7+au(b6,b3,e||(b8?\"border\":\"content\"),b5,b4))+\"px\"}function bD(b4){var b3=l,e=bi[b4];if(!e){e=a0(b4,b3);if(e===\"none\"||!e){aC=(aC||bI(\"<iframe frameborder='0' width='0' height='0'/>\").css(\"cssText\",\"display:block !important\")).appendTo(b3.documentElement);b3=(aC[0].contentWindow||aC[0].contentDocument).document;b3.write(\"<!doctype html><html><body>\");b3.close();e=a0(b4,b3);aC.detach()}bi[b4]=e}return e}function a0(e,b5){var b3=bI(b5.createElement(e)).appendTo(b5.body),b4=bI.css(b3[0],\"display\");b3.remove();return b4}bI.each([\"height\",\"width\"],function(b3,e){bI.cssHooks[e]={get:function(b6,b5,b4){if(b5){return b6.offsetWidth===0&&E.test(bI.css(b6,\"display\"))?bI.swap(b6,bb,function(){return u(b6,e,b4)}):u(b6,e,b4)}},set:function(b6,b7,b4){var b5=b4&&bn(b6);return aH(b6,b7,b4?au(b6,e,b4,bI.support.boxSizing&&bI.css(b6,\"boxSizing\",false,b5)===\"border-box\",b5):0)}}});if(!bI.support.opacity){bI.cssHooks.opacity={get:function(b3,e){return aR.test((e&&b3.currentStyle?b3.currentStyle.filter:b3.style.filter)||\"\")?(0.01*parseFloat(RegExp.$1))+\"\":e?\"1\":\"\"},set:function(b6,b7){var b5=b6.style,b3=b6.currentStyle,e=bI.isNumeric(b7)?\"alpha(opacity=\"+b7*100+\")\":\"\",b4=b3&&b3.filter||b5.filter||\"\";b5.zoom=1;if((b7>=1||b7===\"\")&&bI.trim(b4.replace(bf,\"\"))===\"\"&&b5.removeAttribute){b5.removeAttribute(\"filter\");if(b7===\"\"||b3&&!b3.filter){return}}b5.filter=bf.test(b4)?b4.replace(bf,e):b4+\" \"+e}}}bI(function(){if(!bI.support.reliableMarginRight){bI.cssHooks.marginRight={get:function(b3,e){if(e){return bI.swap(b3,{display:\"inline-block\"},D,[b3,\"marginRight\"])}}}}if(!bI.support.pixelPosition&&bI.fn.position){bI.each([\"top\",\"left\"],function(e,b3){bI.cssHooks[b3]={get:function(b5,b4){if(b4){b4=D(b5,b3);return U.test(b4)?bI(b5).position()[b3]+\"px\":b4}}}})}});if(bI.expr&&bI.expr.filters){bI.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||(!bI.support.reliableHiddenOffsets&&((e.style&&e.style.display)||bI.css(e,\"display\"))===\"none\")};bI.expr.filters.visible=function(e){return !bI.expr.filters.hidden(e)}}bI.each({margin:\"\",padding:\"\",border:\"Width\"},function(e,b3){bI.cssHooks[e+b3]={expand:function(b6){var b5=0,b4={},b7=typeof b6===\"string\"?b6.split(\" \"):[b6];for(;b5<4;b5++){b4[e+bS[b5]+b3]=b7[b5]||b7[b5-2]||b7[0]}return b4}};if(!aW.test(e)){bI.cssHooks[e+b3].set=aH}});var bu=/%20/g,aP=/\\[\\]$/,S=/\\r?\\n/g,c=/^(?:submit|button|image|reset|file)$/i,ar=/^(?:input|select|textarea|keygen)/i;bI.fn.extend({serialize:function(){return bI.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=bI.prop(this,\"elements\");return e?bI.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!bI(this).is(\":disabled\")&&ar.test(this.nodeName)&&!c.test(e)&&(this.checked||!q.test(e))}).map(function(e,b3){var b4=bI(this).val();return b4==null?null:bI.isArray(b4)?bI.map(b4,function(b5){return{name:b3.name,value:b5.replace(S,\"\\r\\n\")}}):{name:b3.name,value:b4.replace(S,\"\\r\\n\")}}).get()}});bI.param=function(e,b4){var b5,b3=[],b6=function(b7,b8){b8=bI.isFunction(b8)?b8():(b8==null?\"\":b8);b3[b3.length]=encodeURIComponent(b7)+\"=\"+encodeURIComponent(b8)};if(b4===aE){b4=bI.ajaxSettings&&bI.ajaxSettings.traditional}if(bI.isArray(e)||(e.jquery&&!bI.isPlainObject(e))){bI.each(e,function(){b6(this.name,this.value)})}else{for(b5 in e){i(b5,e[b5],b4,b6)}}return b3.join(\"&\").replace(bu,\"+\")};function i(b4,b6,b3,b5){var e;if(bI.isArray(b6)){bI.each(b6,function(b8,b7){if(b3||aP.test(b4)){b5(b4,b7)}else{i(b4+\"[\"+(typeof b7===\"object\"?b8:\"\")+\"]\",b7,b3,b5)}})}else{if(!b3&&bI.type(b6)===\"object\"){for(e in b6){i(b4+\"[\"+e+\"]\",b6[e],b3,b5)}}else{b5(b4,b6)}}}bI.each((\"blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu\").split(\" \"),function(b3,e){bI.fn[e]=function(b5,b4){return arguments.length>0?this.on(e,null,b5,b4):this.trigger(e)}});bI.fn.extend({hover:function(e,b3){return this.mouseenter(e).mouseleave(b3||e)},bind:function(e,b4,b3){return this.on(e,null,b4,b3)},unbind:function(e,b3){return this.off(e,null,b3)},delegate:function(e,b3,b5,b4){return this.on(b3,e,b5,b4)},undelegate:function(e,b3,b4){return arguments.length===1?this.off(e,\"**\"):this.off(b3,e||\"**\",b4)}});var b1,W,bN=bI.now(),ax=/\\?/,an=/#.*$/,M=/([?&])_=[^&]*/,ae=/^(.*?):[ \\t]*([^\\r\\n]*)\\r?$/mg,A=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,o=/^(?:GET|HEAD)$/,aF=/^\\/\\//,aS=/^([\\w.+-]+:)(?:\\/\\/([^\\/?#:]*)(?::(\\d+)|)|)/,b0=bI.fn.load,v={},a6={},aU=\"*/\".concat(\"*\");try{W=aJ.href}catch(be){W=l.createElement(\"a\");W.href=\"\";W=W.href}b1=aS.exec(W.toLowerCase())||[];function bK(e){return function(b6,b7){if(typeof b6!==\"string\"){b7=b6;b6=\"*\"}var b3,b4=0,b5=b6.toLowerCase().match(aa)||[];if(bI.isFunction(b7)){while((b3=b5[b4++])){if(b3[0]===\"+\"){b3=b3.slice(1)||\"*\";(e[b3]=e[b3]||[]).unshift(b7)}else{(e[b3]=e[b3]||[]).push(b7)}}}}}function n(e,b4,b8,b5){var b3={},b6=(e===a6);function b7(b9){var ca;b3[b9]=true;bI.each(e[b9]||[],function(cc,cb){var cd=cb(b4,b8,b5);if(typeof cd===\"string\"&&!b6&&!b3[cd]){b4.dataTypes.unshift(cd);b7(cd);return false}else{if(b6){return !(ca=cd)}}});return ca}return b7(b4.dataTypes[0])||!b3[\"*\"]&&b7(\"*\")}function r(b4,b5){var e,b3,b6=bI.ajaxSettings.flatOptions||{};for(b3 in b5){if(b5[b3]!==aE){(b6[b3]?b4:(e||(e={})))[b3]=b5[b3]}}if(e){bI.extend(true,b4,e)}return b4}bI.fn.load=function(b5,b8,b9){if(typeof b5!==\"string\"&&b0){return b0.apply(this,arguments)}var e,b4,b6,b3=this,b7=b5.indexOf(\" \");if(b7>=0){e=b5.slice(b7,b5.length);b5=b5.slice(0,b7)}if(bI.isFunction(b8)){b9=b8;b8=aE}else{if(b8&&typeof b8===\"object\"){b6=\"POST\"}}if(b3.length>0){bI.ajax({url:b5,type:b6,dataType:\"html\",data:b8}).done(function(ca){b4=arguments;b3.html(e?bI(\"<div>\").append(bI.parseHTML(ca)).find(e):ca)}).complete(b9&&function(cb,ca){b3.each(b9,b4||[cb.responseText,ca,cb])})}return this};bI.each([\"ajaxStart\",\"ajaxStop\",\"ajaxComplete\",\"ajaxError\",\"ajaxSuccess\",\"ajaxSend\"],function(e,b3){bI.fn[b3]=function(b4){return this.on(b3,b4)}});bI.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:W,type:\"GET\",isLocal:A.test(b1[1]),global:true,processData:true,async:true,contentType:\"application/x-www-form-urlencoded; charset=UTF-8\",accepts:{\"*\":aU,text:\"text/plain\",html:\"text/html\",xml:\"application/xml, text/xml\",json:\"application/json, text/javascript\"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:\"responseXML\",text:\"responseText\",json:\"responseJSON\"},converters:{\"* text\":String,\"text html\":true,\"text json\":bI.parseJSON,\"text xml\":bI.parseXML},flatOptions:{url:true,context:true}},ajaxSetup:function(b3,e){return e?r(r(b3,bI.ajaxSettings),e):r(bI.ajaxSettings,b3)},ajaxPrefilter:bK(v),ajaxTransport:bK(a6),ajax:function(b7,b4){if(typeof b7===\"object\"){b4=b7;b7=aE}b4=b4||{};var cg,ci,b8,cn,cc,b3,cj,b5,cb=bI.ajaxSetup({},b4),cp=cb.context||cb,ce=cb.context&&(cp.nodeType||cp.jquery)?bI(cp):bI.event,co=bI.Deferred(),cl=bI.Callbacks(\"once memory\"),b9=cb.statusCode||{},cf={},cm={},b6=0,ca=\"canceled\",ch={readyState:0,getResponseHeader:function(cq){var e;if(b6===2){if(!b5){b5={};while((e=ae.exec(cn))){b5[e[1].toLowerCase()]=e[2]}}e=b5[cq.toLowerCase()]}return e==null?null:e},getAllResponseHeaders:function(){return b6===2?cn:null},setRequestHeader:function(cq,cr){var e=cq.toLowerCase();if(!b6){cq=cm[e]=cm[e]||cq;cf[cq]=cr}return this},overrideMimeType:function(e){if(!b6){cb.mimeType=e}return this},statusCode:function(cq){var e;if(cq){if(b6<2){for(e in cq){b9[e]=[b9[e],cq[e]]}}else{ch.always(cq[ch.status])}}return this},abort:function(cq){var e=cq||ca;if(cj){cj.abort(e)}cd(0,e);return this}};co.promise(ch).complete=cl.add;ch.success=ch.done;ch.error=ch.fail;cb.url=((b7||cb.url||W)+\"\").replace(an,\"\").replace(aF,b1[1]+\"//\");cb.type=b4.method||b4.type||cb.method||cb.type;cb.dataTypes=bI.trim(cb.dataType||\"*\").toLowerCase().match(aa)||[\"\"];if(cb.crossDomain==null){cg=aS.exec(cb.url.toLowerCase());cb.crossDomain=!!(cg&&(cg[1]!==b1[1]||cg[2]!==b1[2]||(cg[3]||(cg[1]===\"http:\"?\"80\":\"443\"))!==(b1[3]||(b1[1]===\"http:\"?\"80\":\"443\"))))}if(cb.data&&cb.processData&&typeof cb.data!==\"string\"){cb.data=bI.param(cb.data,cb.traditional)}n(v,cb,b4,ch);if(b6===2){return ch}b3=cb.global;if(b3&&bI.active++===0){bI.event.trigger(\"ajaxStart\")}cb.type=cb.type.toUpperCase();cb.hasContent=!o.test(cb.type);b8=cb.url;if(!cb.hasContent){if(cb.data){b8=(cb.url+=(ax.test(b8)?\"&\":\"?\")+cb.data);delete cb.data}if(cb.cache===false){cb.url=M.test(b8)?b8.replace(M,\"$1_=\"+bN++):b8+(ax.test(b8)?\"&\":\"?\")+\"_=\"+bN++}}if(cb.ifModified){if(bI.lastModified[b8]){ch.setRequestHeader(\"If-Modified-Since\",bI.lastModified[b8])}if(bI.etag[b8]){ch.setRequestHeader(\"If-None-Match\",bI.etag[b8])}}if(cb.data&&cb.hasContent&&cb.contentType!==false||b4.contentType){ch.setRequestHeader(\"Content-Type\",cb.contentType)}ch.setRequestHeader(\"Accept\",cb.dataTypes[0]&&cb.accepts[cb.dataTypes[0]]?cb.accepts[cb.dataTypes[0]]+(cb.dataTypes[0]!==\"*\"?\", \"+aU+\"; q=0.01\":\"\"):cb.accepts[\"*\"]);for(ci in cb.headers){ch.setRequestHeader(ci,cb.headers[ci])}if(cb.beforeSend&&(cb.beforeSend.call(cp,ch,cb)===false||b6===2)){return ch.abort()}ca=\"abort\";for(ci in {success:1,error:1,complete:1}){ch[ci](cb[ci])}cj=n(a6,cb,b4,ch);if(!cj){cd(-1,\"No Transport\")}else{ch.readyState=1;if(b3){ce.trigger(\"ajaxSend\",[ch,cb])}if(cb.async&&cb.timeout>0){cc=setTimeout(function(){ch.abort(\"timeout\")},cb.timeout)}try{b6=1;cj.send(cf,cd)}catch(ck){if(b6<2){cd(-1,ck)}else{throw ck}}}function cd(cu,cq,cv,cs){var e,cy,cw,ct,cx,cr=cq;if(b6===2){return}b6=2;if(cc){clearTimeout(cc)}cj=aE;cn=cs||\"\";ch.readyState=cu>0?4:0;e=cu>=200&&cu<300||cu===304;if(cv){ct=g(cb,ch,cv)}ct=ad(cb,ct,ch,e);if(e){if(cb.ifModified){cx=ch.getResponseHeader(\"Last-Modified\");if(cx){bI.lastModified[b8]=cx}cx=ch.getResponseHeader(\"etag\");if(cx){bI.etag[b8]=cx}}if(cu===204||cb.type===\"HEAD\"){cr=\"nocontent\"}else{if(cu===304){cr=\"notmodified\"}else{cr=ct.state;cy=ct.data;cw=ct.error;e=!cw}}}else{cw=cr;if(cu||!cr){cr=\"error\";if(cu<0){cu=0}}}ch.status=cu;ch.statusText=(cq||cr)+\"\";if(e){co.resolveWith(cp,[cy,cr,ch])}else{co.rejectWith(cp,[ch,cr,cw])}ch.statusCode(b9);b9=aE;if(b3){ce.trigger(e?\"ajaxSuccess\":\"ajaxError\",[ch,cb,e?cy:cw])}cl.fireWith(cp,[ch,cr]);if(b3){ce.trigger(\"ajaxComplete\",[ch,cb]);if(!(--bI.active)){bI.event.trigger(\"ajaxStop\")}}}return ch},getJSON:function(e,b3,b4){return bI.get(e,b3,b4,\"json\")},getScript:function(e,b3){return bI.get(e,aE,b3,\"script\")}});bI.each([\"get\",\"post\"],function(e,b3){bI[b3]=function(b4,b6,b7,b5){if(bI.isFunction(b6)){b5=b5||b7;b7=b6;b6=aE}return bI.ajax({url:b4,type:b3,dataType:b5,data:b6,success:b7})}});function g(ca,b9,b6){var e,b5,b4,b7,b3=ca.contents,b8=ca.dataTypes;while(b8[0]===\"*\"){b8.shift();if(b5===aE){b5=ca.mimeType||b9.getResponseHeader(\"Content-Type\")}}if(b5){for(b7 in b3){if(b3[b7]&&b3[b7].test(b5)){b8.unshift(b7);break}}}if(b8[0] in b6){b4=b8[0]}else{for(b7 in b6){if(!b8[0]||ca.converters[b7+\" \"+b8[0]]){b4=b7;break}if(!e){e=b7}}b4=b4||e}if(b4){if(b4!==b8[0]){b8.unshift(b4)}return b6[b4]}}function ad(ce,b6,cb,b4){var b3,b9,cc,b7,b5,cd={},ca=ce.dataTypes.slice();if(ca[1]){for(cc in ce.converters){cd[cc.toLowerCase()]=ce.converters[cc]}}b9=ca.shift();while(b9){if(ce.responseFields[b9]){cb[ce.responseFields[b9]]=b6}if(!b5&&b4&&ce.dataFilter){b6=ce.dataFilter(b6,ce.dataType)}b5=b9;b9=ca.shift();if(b9){if(b9===\"*\"){b9=b5}else{if(b5!==\"*\"&&b5!==b9){cc=cd[b5+\" \"+b9]||cd[\"* \"+b9];if(!cc){for(b3 in cd){b7=b3.split(\" \");if(b7[1]===b9){cc=cd[b5+\" \"+b7[0]]||cd[\"* \"+b7[0]];if(cc){if(cc===true){cc=cd[b3]}else{if(cd[b3]!==true){b9=b7[0];ca.unshift(b7[1])}}break}}}}if(cc!==true){if(cc&&ce[\"throws\"]){b6=cc(b6)}else{try{b6=cc(b6)}catch(b8){return{state:\"parsererror\",error:cc?b8:\"No conversion from \"+b5+\" to \"+b9}}}}}}}}return{state:\"success\",data:b6}}bI.ajaxSetup({accepts:{script:\"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript\"},contents:{script:/(?:java|ecma)script/},converters:{\"text script\":function(e){bI.globalEval(e);return e}}});bI.ajaxPrefilter(\"script\",function(e){if(e.cache===aE){e.cache=false}if(e.crossDomain){e.type=\"GET\";e.global=false}});bI.ajaxTransport(\"script\",function(b4){if(b4.crossDomain){var e,b3=l.head||bI(\"head\")[0]||l.documentElement;return{send:function(b5,b6){e=l.createElement(\"script\");e.async=true;if(b4.scriptCharset){e.charset=b4.scriptCharset}e.src=b4.url;e.onload=e.onreadystatechange=function(b8,b7){if(b7||!e.readyState||/loaded|complete/.test(e.readyState)){e.onload=e.onreadystatechange=null;if(e.parentNode){e.parentNode.removeChild(e)}e=null;if(!b7){b6(200,\"success\")}}};b3.insertBefore(e,b3.firstChild)},abort:function(){if(e){e.onload(aE,true)}}}}});var bp=[],a4=/(=)\\?(?=&|$)|\\?\\?/;bI.ajaxSetup({jsonp:\"callback\",jsonpCallback:function(){var e=bp.pop()||(bI.expando+\"_\"+(bN++));this[e]=true;return e}});bI.ajaxPrefilter(\"json jsonp\",function(b5,e,b6){var b8,b3,b4,b7=b5.jsonp!==false&&(a4.test(b5.url)?\"url\":typeof b5.data===\"string\"&&!(b5.contentType||\"\").indexOf(\"application/x-www-form-urlencoded\")&&a4.test(b5.data)&&\"data\");if(b7||b5.dataTypes[0]===\"jsonp\"){b8=b5.jsonpCallback=bI.isFunction(b5.jsonpCallback)?b5.jsonpCallback():b5.jsonpCallback;if(b7){b5[b7]=b5[b7].replace(a4,\"$1\"+b8)}else{if(b5.jsonp!==false){b5.url+=(ax.test(b5.url)?\"&\":\"?\")+b5.jsonp+\"=\"+b8}}b5.converters[\"script json\"]=function(){if(!b4){bI.error(b8+\" was not called\")}return b4[0]};b5.dataTypes[0]=\"json\";b3=a1[b8];a1[b8]=function(){b4=arguments};b6.always(function(){a1[b8]=b3;if(b5[b8]){b5.jsonpCallback=e.jsonpCallback;bp.push(b8)}if(b4&&bI.isFunction(b3)){b3(b4[0])}b4=b3=aE});return\"script\"}});var af,av,aw=0,aN=a1.ActiveXObject&&function(){var e;for(e in af){af[e](aE,true)}};function bC(){try{return new a1.XMLHttpRequest()}catch(b3){}}function bd(){try{return new a1.ActiveXObject(\"Microsoft.XMLHTTP\")}catch(b3){}}bI.ajaxSettings.xhr=a1.ActiveXObject?function(){return !this.isLocal&&bC()||bd()}:bC;av=bI.ajaxSettings.xhr();bI.support.cors=!!av&&(\"withCredentials\" in av);av=bI.support.ajax=!!av;if(av){bI.ajaxTransport(function(e){if(!e.crossDomain||bI.support.cors){var b3;return{send:function(b9,b4){var b7,b5,b8=e.xhr();if(e.username){b8.open(e.type,e.url,e.async,e.username,e.password)}else{b8.open(e.type,e.url,e.async)}if(e.xhrFields){for(b5 in e.xhrFields){b8[b5]=e.xhrFields[b5]}}if(e.mimeType&&b8.overrideMimeType){b8.overrideMimeType(e.mimeType)}if(!e.crossDomain&&!b9[\"X-Requested-With\"]){b9[\"X-Requested-With\"]=\"XMLHttpRequest\"}try{for(b5 in b9){b8.setRequestHeader(b5,b9[b5])}}catch(b6){}b8.send((e.hasContent&&e.data)||null);b3=function(cc,cb){var ca,cd,cg,ce;try{if(b3&&(cb||b8.readyState===4)){b3=aE;if(b7){b8.onreadystatechange=bI.noop;if(aN){delete af[b7]}}if(cb){if(b8.readyState!==4){b8.abort()}}else{ce={};ca=b8.status;cd=b8.getAllResponseHeaders();if(typeof b8.responseText===\"string\"){ce.text=b8.responseText}try{cg=b8.statusText}catch(cf){cg=\"\"}if(!ca&&e.isLocal&&!e.crossDomain){ca=ce.text?200:404}else{if(ca===1223){ca=204}}}}}catch(ch){if(!cb){b4(-1,ch)}}if(ce){b4(ca,cg,ce,cd)}};if(!e.async){b3()}else{if(b8.readyState===4){setTimeout(b3)}else{b7=++aw;if(aN){if(!af){af={};bI(a1).unload(aN)}af[b7]=b3}b8.onreadystatechange=b3}}},abort:function(){if(b3){b3(aE,true)}}}}})}var J,ab,bQ=/^(?:toggle|show|hide)$/,bJ=new RegExp(\"^(?:([+-])=|)(\"+bz+\")([a-z%]*)$\",\"i\"),bP=/queueHooks$/,az=[h],aY={\"*\":[function(e,b8){var ca=this.createTween(e,b8),b6=ca.cur(),b5=bJ.exec(b8),b9=b5&&b5[3]||(bI.cssNumber[e]?\"\":\"px\"),b3=(bI.cssNumber[e]||b9!==\"px\"&&+b6)&&bJ.exec(bI.css(ca.elem,e)),b4=1,b7=20;if(b3&&b3[3]!==b9){b9=b9||b3[3];b5=b5||[];b3=+b6||1;do{b4=b4||\".5\";b3=b3/b4;bI.style(ca.elem,e,b3+b9)}while(b4!==(b4=ca.cur()/b6)&&b4!==1&&--b7)}if(b5){b3=ca.start=+b3||+b6||0;ca.unit=b9;ca.end=b5[1]?b3+(b5[1]+1)*b5[2]:+b5[2]}return ca}]};function bl(){setTimeout(function(){J=aE});return(J=bI.now())}function ba(b6,b8,b5){var b3,b7=(aY[b8]||[]).concat(aY[\"*\"]),e=0,b4=b7.length;for(;e<b4;e++){if((b3=b7[e].call(b5,b8,b6))){return b3}}}function f(b4,b8,cb){var cc,e,b7=0,b3=az.length,ca=bI.Deferred().always(function(){delete b6.elem}),b6=function(){if(e){return false}var ci=J||bl(),cf=Math.max(0,b5.startTime+b5.duration-ci),cd=cf/b5.duration||0,ch=1-cd,ce=0,cg=b5.tweens.length;for(;ce<cg;ce++){b5.tweens[ce].run(ch)}ca.notifyWith(b4,[b5,ch,cf]);if(ch<1&&cg){return cf}else{ca.resolveWith(b4,[b5]);return false}},b5=ca.promise({elem:b4,props:bI.extend({},b8),opts:bI.extend(true,{specialEasing:{}},cb),originalProperties:b8,originalOptions:cb,startTime:J||bl(),duration:cb.duration,tweens:[],createTween:function(cf,cd){var ce=bI.Tween(b4,b5.opts,cf,cd,b5.opts.specialEasing[cf]||b5.opts.easing);b5.tweens.push(ce);return ce},stop:function(ce){var cd=0,cf=ce?b5.tweens.length:0;if(e){return this}e=true;for(;cd<cf;cd++){b5.tweens[cd].run(1)}if(ce){ca.resolveWith(b4,[b5,ce])}else{ca.rejectWith(b4,[b5,ce])}return this}}),b9=b5.props;ak(b9,b5.opts.specialEasing);for(;b7<b3;b7++){cc=az[b7].call(b5,b4,b9,b5.opts);if(cc){return cc}}bI.map(b9,ba,b5);if(bI.isFunction(b5.opts.start)){b5.opts.start.call(b4,b5)}bI.fx.timer(bI.extend(b6,{elem:b4,anim:b5,queue:b5.opts.queue}));return b5.progress(b5.opts.progress).done(b5.opts.done,b5.opts.complete).fail(b5.opts.fail).always(b5.opts.always)}function ak(b5,b7){var b4,b3,b8,b6,e;for(b4 in b5){b3=bI.camelCase(b4);b8=b7[b3];b6=b5[b4];if(bI.isArray(b6)){b8=b6[1];b6=b5[b4]=b6[0]}if(b4!==b3){b5[b3]=b6;delete b5[b4]}e=bI.cssHooks[b3];if(e&&\"expand\" in e){b6=e.expand(b6);delete b5[b3];for(b4 in b6){if(!(b4 in b5)){b5[b4]=b6[b4];b7[b4]=b8}}}else{b7[b3]=b8}}}bI.Animation=bI.extend(f,{tweener:function(b3,b6){if(bI.isFunction(b3)){b6=b3;b3=[\"*\"]}else{b3=b3.split(\" \")}var b5,e=0,b4=b3.length;for(;e<b4;e++){b5=b3[e];aY[b5]=aY[b5]||[];aY[b5].unshift(b6)}},prefilter:function(b3,e){if(e){az.unshift(b3)}else{az.push(b3)}}});function h(b5,b9,e){var b4,cb,b7,ce,cf,cc,b6=this,ca={},b3=b5.style,b8=b5.nodeType&&N(b5),cd=bI._data(b5,\"fxshow\");if(!e.queue){cf=bI._queueHooks(b5,\"fx\");if(cf.unqueued==null){cf.unqueued=0;cc=cf.empty.fire;cf.empty.fire=function(){if(!cf.unqueued){cc()}}}cf.unqueued++;b6.always(function(){b6.always(function(){cf.unqueued--;if(!bI.queue(b5,\"fx\").length){cf.empty.fire()}})})}if(b5.nodeType===1&&(\"height\" in b9||\"width\" in b9)){e.overflow=[b3.overflow,b3.overflowX,b3.overflowY];if(bI.css(b5,\"display\")===\"inline\"&&bI.css(b5,\"float\")===\"none\"){if(!bI.support.inlineBlockNeedsLayout||bD(b5.nodeName)===\"inline\"){b3.display=\"inline-block\"}else{b3.zoom=1}}}if(e.overflow){b3.overflow=\"hidden\";if(!bI.support.shrinkWrapBlocks){b6.always(function(){b3.overflow=e.overflow[0];b3.overflowX=e.overflow[1];b3.overflowY=e.overflow[2]})}}for(b4 in b9){cb=b9[b4];if(bQ.exec(cb)){delete b9[b4];b7=b7||cb===\"toggle\";if(cb===(b8?\"hide\":\"show\")){continue}ca[b4]=cd&&cd[b4]||bI.style(b5,b4)}}if(!bI.isEmptyObject(ca)){if(cd){if(\"hidden\" in cd){b8=cd.hidden}}else{cd=bI._data(b5,\"fxshow\",{})}if(b7){cd.hidden=!b8}if(b8){bI(b5).show()}else{b6.done(function(){bI(b5).hide()})}b6.done(function(){var cg;bI._removeData(b5,\"fxshow\");for(cg in ca){bI.style(b5,cg,ca[cg])}});for(b4 in ca){ce=ba(b8?cd[b4]:0,b4,b6);if(!(b4 in cd)){cd[b4]=ce.start;if(b8){ce.end=ce.start;ce.start=b4===\"width\"||b4===\"height\"?1:0}}}}}function F(b4,b3,b6,e,b5){return new F.prototype.init(b4,b3,b6,e,b5)}bI.Tween=F;F.prototype={constructor:F,init:function(b5,b3,b7,e,b6,b4){this.elem=b5;this.prop=b7;this.easing=b6||\"swing\";this.options=b3;this.start=this.now=this.cur();this.end=e;this.unit=b4||(bI.cssNumber[b7]?\"\":\"px\")},cur:function(){var e=F.propHooks[this.prop];return e&&e.get?e.get(this):F.propHooks._default.get(this)},run:function(b4){var b3,e=F.propHooks[this.prop];if(this.options.duration){this.pos=b3=bI.easing[this.easing](b4,this.options.duration*b4,0,1,this.options.duration)}else{this.pos=b3=b4}this.now=(this.end-this.start)*b3+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this)}if(e&&e.set){e.set(this)}else{F.propHooks._default.set(this)}return this}};F.prototype.init.prototype=F.prototype;F.propHooks={_default:{get:function(b3){var e;if(b3.elem[b3.prop]!=null&&(!b3.elem.style||b3.elem.style[b3.prop]==null)){return b3.elem[b3.prop]}e=bI.css(b3.elem,b3.prop,\"\");return !e||e===\"auto\"?0:e},set:function(e){if(bI.fx.step[e.prop]){bI.fx.step[e.prop](e)}else{if(e.elem.style&&(e.elem.style[bI.cssProps[e.prop]]!=null||bI.cssHooks[e.prop])){bI.style(e.elem,e.prop,e.now+e.unit)}else{e.elem[e.prop]=e.now}}}}};F.propHooks.scrollTop=F.propHooks.scrollLeft={set:function(e){if(e.elem.nodeType&&e.elem.parentNode){e.elem[e.prop]=e.now}}};bI.each([\"toggle\",\"show\",\"hide\"],function(b3,e){var b4=bI.fn[e];bI.fn[e]=function(b5,b7,b6){return b5==null||typeof b5===\"boolean\"?b4.apply(this,arguments):this.animate(bH(e,true),b5,b7,b6)}});bI.fn.extend({fadeTo:function(e,b5,b4,b3){return this.filter(N).css(\"opacity\",0).show().end().animate({opacity:b5},e,b4,b3)},animate:function(b8,b5,b7,b6){var b4=bI.isEmptyObject(b8),e=bI.speed(b5,b7,b6),b3=function(){var b9=f(this,bI.extend({},b8),e);if(b4||bI._data(this,\"finish\")){b9.stop(true)}};b3.finish=b3;return b4||e.queue===false?this.each(b3):this.queue(e.queue,b3)},stop:function(b4,b3,e){var b5=function(b6){var b7=b6.stop;delete b6.stop;b7(e)};if(typeof b4!==\"string\"){e=b3;b3=b4;b4=aE}if(b3&&b4!==false){this.queue(b4||\"fx\",[])}return this.each(function(){var b9=true,b6=b4!=null&&b4+\"queueHooks\",b8=bI.timers,b7=bI._data(this);if(b6){if(b7[b6]&&b7[b6].stop){b5(b7[b6])}}else{for(b6 in b7){if(b7[b6]&&b7[b6].stop&&bP.test(b6)){b5(b7[b6])}}}for(b6=b8.length;b6--;){if(b8[b6].elem===this&&(b4==null||b8[b6].queue===b4)){b8[b6].anim.stop(e);b9=false;b8.splice(b6,1)}}if(b9||!e){bI.dequeue(this,b4)}})},finish:function(e){if(e!==false){e=e||\"fx\"}return this.each(function(){var b5,b8=bI._data(this),b4=b8[e+\"queue\"],b3=b8[e+\"queueHooks\"],b7=bI.timers,b6=b4?b4.length:0;b8.finish=true;bI.queue(this,e,[]);if(b3&&b3.stop){b3.stop.call(this,true)}for(b5=b7.length;b5--;){if(b7[b5].elem===this&&b7[b5].queue===e){b7[b5].anim.stop(true);b7.splice(b5,1)}}for(b5=0;b5<b6;b5++){if(b4[b5]&&b4[b5].finish){b4[b5].finish.call(this)}}delete b8.finish})}});function bH(b4,b6){var b5,e={height:b4},b3=0;b6=b6?1:0;for(;b3<4;b3+=2-b6){b5=bS[b3];e[\"margin\"+b5]=e[\"padding\"+b5]=b4}if(b6){e.opacity=e.width=b4}return e}bI.each({slideDown:bH(\"show\"),slideUp:bH(\"hide\"),slideToggle:bH(\"toggle\"),fadeIn:{opacity:\"show\"},fadeOut:{opacity:\"hide\"},fadeToggle:{opacity:\"toggle\"}},function(e,b3){bI.fn[e]=function(b4,b6,b5){return this.animate(b3,b4,b6,b5)}});bI.speed=function(b4,b5,b3){var e=b4&&typeof b4===\"object\"?bI.extend({},b4):{complete:b3||!b3&&b5||bI.isFunction(b4)&&b4,duration:b4,easing:b3&&b5||b5&&!bI.isFunction(b5)&&b5};e.duration=bI.fx.off?0:typeof e.duration===\"number\"?e.duration:e.duration in bI.fx.speeds?bI.fx.speeds[e.duration]:bI.fx.speeds._default;if(e.queue==null||e.queue===true){e.queue=\"fx\"}e.old=e.complete;e.complete=function(){if(bI.isFunction(e.old)){e.old.call(this)}if(e.queue){bI.dequeue(this,e.queue)}};return e};bI.easing={linear:function(e){return e},swing:function(e){return 0.5-Math.cos(e*Math.PI)/2}};bI.timers=[];bI.fx=F.prototype.init;bI.fx.tick=function(){var b4,b3=bI.timers,e=0;J=bI.now();for(;e<b3.length;e++){b4=b3[e];if(!b4()&&b3[e]===b4){b3.splice(e--,1)}}if(!b3.length){bI.fx.stop()}J=aE};bI.fx.timer=function(e){if(e()&&bI.timers.push(e)){bI.fx.start()}};bI.fx.interval=13;bI.fx.start=function(){if(!ab){ab=setInterval(bI.fx.tick,bI.fx.interval)}};bI.fx.stop=function(){clearInterval(ab);ab=null};bI.fx.speeds={slow:600,fast:200,_default:400};bI.fx.step={};if(bI.expr&&bI.expr.filters){bI.expr.filters.animated=function(e){return bI.grep(bI.timers,function(b3){return e===b3.elem}).length}}bI.fn.offset=function(b3){if(arguments.length){return b3===aE?this:this.each(function(b8){bI.offset.setOffset(this,b3,b8)})}var e,b7,b5={top:0,left:0},b4=this[0],b6=b4&&b4.ownerDocument;if(!b6){return}e=b6.documentElement;if(!bI.contains(e,b4)){return b5}if(typeof b4.getBoundingClientRect!==aA){b5=b4.getBoundingClientRect()}b7=bo(b6);return{top:b5.top+(b7.pageYOffset||e.scrollTop)-(e.clientTop||0),left:b5.left+(b7.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}};bI.offset={setOffset:function(b5,ce,b8){var b9=bI.css(b5,\"position\");if(b9===\"static\"){b5.style.position=\"relative\"}var b7=bI(b5),b3=b7.offset(),e=bI.css(b5,\"top\"),cc=bI.css(b5,\"left\"),cd=(b9===\"absolute\"||b9===\"fixed\")&&bI.inArray(\"auto\",[e,cc])>-1,cb={},ca={},b4,b6;if(cd){ca=b7.position();b4=ca.top;b6=ca.left}else{b4=parseFloat(e)||0;b6=parseFloat(cc)||0}if(bI.isFunction(ce)){ce=ce.call(b5,b8,b3)}if(ce.top!=null){cb.top=(ce.top-b3.top)+b4}if(ce.left!=null){cb.left=(ce.left-b3.left)+b6}if(\"using\" in ce){ce.using.call(b5,cb)}else{b7.css(cb)}}};bI.fn.extend({position:function(){if(!this[0]){return}var b4,b5,e={top:0,left:0},b3=this[0];if(bI.css(b3,\"position\")===\"fixed\"){b5=b3.getBoundingClientRect()}else{b4=this.offsetParent();b5=this.offset();if(!bI.nodeName(b4[0],\"html\")){e=b4.offset()}e.top+=bI.css(b4[0],\"borderTopWidth\",true);e.left+=bI.css(b4[0],\"borderLeftWidth\",true)}return{top:b5.top-e.top-bI.css(b3,\"marginTop\",true),left:b5.left-e.left-bI.css(b3,\"marginLeft\",true)}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||bV;while(e&&(!bI.nodeName(e,\"html\")&&bI.css(e,\"position\")===\"static\")){e=e.offsetParent}return e||bV})}});bI.each({scrollLeft:\"pageXOffset\",scrollTop:\"pageYOffset\"},function(b4,b3){var e=/Y/.test(b3);bI.fn[b4]=function(b5){return bI.access(this,function(b6,b9,b8){var b7=bo(b6);if(b8===aE){return b7?(b3 in b7)?b7[b3]:b7.document.documentElement[b9]:b6[b9]}if(b7){b7.scrollTo(!e?b8:bI(b7).scrollLeft(),e?b8:bI(b7).scrollTop())}else{b6[b9]=b8}},b4,b5,arguments.length,null)}});function bo(e){return bI.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:false}bI.each({Height:\"height\",Width:\"width\"},function(e,b3){bI.each({padding:\"inner\"+e,content:b3,\"\":\"outer\"+e},function(b4,b5){bI.fn[b5]=function(b9,b8){var b7=arguments.length&&(b4||typeof b9!==\"boolean\"),b6=b4||(b9===true||b8===true?\"margin\":\"border\");return bI.access(this,function(cb,ca,cc){var cd;if(bI.isWindow(cb)){return cb.document.documentElement[\"client\"+e]}if(cb.nodeType===9){cd=cb.documentElement;return Math.max(cb.body[\"scroll\"+e],cd[\"scroll\"+e],cb.body[\"offset\"+e],cd[\"offset\"+e],cd[\"client\"+e])}return cc===aE?bI.css(cb,ca,b6):bI.style(cb,ca,cc,b6)},b3,b7?b9:aE,b7,null)}})});bI.fn.size=function(){return this.length};bI.fn.andSelf=bI.fn.addBack;if(typeof module===\"object\"&&module&&typeof module.exports===\"object\"){module.exports=bI}else{a1.jQuery=a1.$=bI;if(typeof define===\"function\"&&define.amd){define(\"jquery\",[],function(){return bI})}}})(window);\n(function(d){function b(f){f=f.toLowerCase();var e=/(chrome)[ \\/]([\\w.]+)/.exec(f)||/(webkit)[ \\/]([\\w.]+)/.exec(f)||/(opera)(?:.*version|)[ \\/]([\\w.]+)/.exec(f)||/(msie) ([\\w.]+)/.exec(f)||f.indexOf(\"compatible\")<0&&/(mozilla)(?:.*? rv:([\\w.]+)|)/.exec(f)||[];return{browser:e[1]||\"\",version:e[2]||\"0\"}}if(!d.browser){var a=b(window.navigator.userAgent);var c={};if(a.browser){c[a.browser]=true;c.version=a.version}if(c.chrome){c.webkit=true}else{if(c.webkit){c.safari=true}}d.browser=c}})(jQuery);\n$.noConflict();\n(function(a){if(typeof define===\"function\"&&define.amd){define([\"jquery\"],a)}else{a(jQuery)}}(function(b,e){var a=0,d=Array.prototype.slice,c=b.cleanData;b.cleanData=function(f){for(var g=0,h;(h=f[g])!=null;g++){try{b(h).triggerHandler(\"remove\")}catch(j){}}c(f)};b.widget=function(f,g,n){var k,l,i,m,h={},j=f.split(\".\")[0];f=f.split(\".\")[1];k=j+\"-\"+f;if(!n){n=g;g=b.Widget}b.expr[\":\"][k.toLowerCase()]=function(o){return !!b.data(o,k)};b[j]=b[j]||{};l=b[j][f];i=b[j][f]=function(o,p){if(!this._createWidget){return new i(o,p)}if(arguments.length){this._createWidget(o,p)}};b.extend(i,l,{version:n.version,_proto:b.extend({},n),_childConstructors:[]});m=new g();m.options=b.widget.extend({},m.options);b.each(n,function(p,o){if(!b.isFunction(o)){h[p]=o;return}h[p]=(function(){var q=function(){return g.prototype[p].apply(this,arguments)},r=function(s){return g.prototype[p].apply(this,s)};return function(){var u=this._super,s=this._superApply,t;this._super=q;this._superApply=r;t=o.apply(this,arguments);this._super=u;this._superApply=s;return t}})()});i.prototype=b.widget.extend(m,{widgetEventPrefix:l?m.widgetEventPrefix:f},h,{constructor:i,namespace:j,widgetName:f,widgetFullName:k});if(l){b.each(l._childConstructors,function(p,q){var o=q.prototype;b.widget(o.namespace+\".\"+o.widgetName,i,q._proto)});delete l._childConstructors}else{g._childConstructors.push(i)}b.widget.bridge(f,i)};b.widget.extend=function(k){var g=d.call(arguments,1),j=0,f=g.length,h,i;for(;j<f;j++){for(h in g[j]){i=g[j][h];if(g[j].hasOwnProperty(h)&&i!==e){if(b.isPlainObject(i)){k[h]=b.isPlainObject(k[h])?b.widget.extend({},k[h],i):b.widget.extend({},i)}else{k[h]=i}}}}return k};b.widget.bridge=function(g,f){var h=f.prototype.widgetFullName||g;b.fn[g]=function(k){var i=typeof k===\"string\",j=d.call(arguments,1),l=this;k=!i&&j.length?b.widget.extend.apply(null,[k].concat(j)):k;if(i){this.each(function(){var n,m=b.data(this,h);if(!m){return b.error(\"cannot call methods on \"+g+\" prior to initialization; attempted to call method '\"+k+\"'\")}if(!b.isFunction(m[k])||k.charAt(0)===\"_\"){return b.error(\"no such method '\"+k+\"' for \"+g+\" widget instance\")}n=m[k].apply(m,j);if(n!==m&&n!==e){l=n&&n.jquery?l.pushStack(n.get()):n;return false}})}else{this.each(function(){var m=b.data(this,h);if(m){m.option(k||{})._init()}else{b.data(this,h,new f(k,this))}})}return l}};b.Widget=function(){};b.Widget._childConstructors=[];b.Widget.prototype={widgetName:\"widget\",widgetEventPrefix:\"\",defaultElement:\"<div>\",options:{disabled:false,create:null},_createWidget:function(f,g){g=b(g||this.defaultElement||this)[0];this.element=b(g);this.uuid=a++;this.eventNamespace=\".\"+this.widgetName+this.uuid;this.options=b.widget.extend({},this.options,this._getCreateOptions(),f);this.bindings=b();this.hoverable=b();this.focusable=b();if(g!==this){b.data(g,this.widgetFullName,this);this._on(true,this.element,{remove:function(h){if(h.target===g){this.destroy()}}});this.document=b(g.style?g.ownerDocument:g.document||g);this.window=b(this.document[0].defaultView||this.document[0].parentWindow)}this._create();this._trigger(\"create\",null,this._getCreateEventData());this._init()},_getCreateOptions:b.noop,_getCreateEventData:b.noop,_create:b.noop,_init:b.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(b.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr(\"aria-disabled\").removeClass(this.widgetFullName+\"-disabled ui-state-disabled\");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass(\"ui-state-hover\");this.focusable.removeClass(\"ui-state-focus\")},_destroy:b.noop,widget:function(){return this.element},option:function(j,k){var f=j,l,h,g;if(arguments.length===0){return b.widget.extend({},this.options)}if(typeof j===\"string\"){f={};l=j.split(\".\");j=l.shift();if(l.length){h=f[j]=b.widget.extend({},this.options[j]);for(g=0;g<l.length-1;g++){h[l[g]]=h[l[g]]||{};h=h[l[g]]}j=l.pop();if(k===e){return h[j]===e?null:h[j]}h[j]=k}else{if(k===e){return this.options[j]===e?null:this.options[j]}f[j]=k}}this._setOptions(f);return this},_setOptions:function(f){var g;for(g in f){this._setOption(g,f[g])}return this},_setOption:function(f,g){this.options[f]=g;if(f===\"disabled\"){this.widget().toggleClass(this.widgetFullName+\"-disabled ui-state-disabled\",!!g).attr(\"aria-disabled\",g);this.hoverable.removeClass(\"ui-state-hover\");this.focusable.removeClass(\"ui-state-focus\")}return this},enable:function(){return this._setOption(\"disabled\",false)},disable:function(){return this._setOption(\"disabled\",true)},_on:function(i,h,g){var j,f=this;if(typeof i!==\"boolean\"){g=h;h=i;i=false}if(!g){g=h;h=this.element;j=this.widget()}else{h=j=b(h);this.bindings=this.bindings.add(h)}b.each(g,function(p,o){function m(){if(!i&&(f.options.disabled===true||b(this).hasClass(\"ui-state-disabled\"))){return}return(typeof o===\"string\"?f[o]:o).apply(f,arguments)}if(typeof o!==\"string\"){m.guid=o.guid=o.guid||m.guid||b.guid++}var n=p.match(/^(\\w+)\\s*(.*)$/),l=n[1]+f.eventNamespace,k=n[2];if(k){j.delegate(k,l,m)}else{h.bind(l,m)}})},_off:function(g,f){f=(f||\"\").split(\" \").join(this.eventNamespace+\" \")+this.eventNamespace;g.unbind(f).undelegate(f)},_delay:function(i,h){function g(){return(typeof i===\"string\"?f[i]:i).apply(f,arguments)}var f=this;return setTimeout(g,h||0)},_hoverable:function(f){this.hoverable=this.hoverable.add(f);this._on(f,{mouseenter:function(g){b(g.currentTarget).addClass(\"ui-state-hover\")},mouseleave:function(g){b(g.currentTarget).removeClass(\"ui-state-hover\")}})},_focusable:function(f){this.focusable=this.focusable.add(f);this._on(f,{focusin:function(g){b(g.currentTarget).addClass(\"ui-state-focus\")},focusout:function(g){b(g.currentTarget).removeClass(\"ui-state-focus\")}})},_trigger:function(f,g,h){var k,j,i=this.options[f];h=h||{};g=b.Event(g);g.type=(f===this.widgetEventPrefix?f:this.widgetEventPrefix+f).toLowerCase();g.target=this.element[0];j=g.originalEvent;if(j){for(k in j){if(!(k in g)){g[k]=j[k]}}}this.element.trigger(g,h);return !(b.isFunction(i)&&i.apply(this.element[0],[g].concat(h))===false||g.isDefaultPrevented())}};b.each({show:\"fadeIn\",hide:\"fadeOut\"},function(g,f){b.Widget.prototype[\"_\"+g]=function(j,i,l){if(typeof i===\"string\"){i={effect:i}}var k,h=!i?g:i===true||typeof i===\"number\"?f:i.effect||f;i=i||{};if(typeof i===\"number\"){i={duration:i}}k=!b.isEmptyObject(i);i.complete=l;if(i.delay){j.delay(i.delay)}if(k&&b.effects&&b.effects.effect[h]){j[g](i)}else{if(h!==g&&j[h]){j[h](i.duration,i.easing,l)}else{j.queue(function(m){b(this)[g]();if(l){l.call(j[0])}m()})}}}})}));\n(function(a){if(typeof define===\"function\"&&define.amd){define([\"jquery\"],a)}else{a(window.jQuery)}}(function(b){var a=0;b.ajaxTransport(\"iframe\",function(d){if(d.async){var c=d.initialIframeSrc||\"javascript:false;\",f,e,g;return{send:function(h,i){f=b('<form style=\"display:none;\"></form>');f.attr(\"accept-charset\",d.formAcceptCharset);g=/\\?/.test(d.url)?\"&\":\"?\";if(d.type===\"DELETE\"){d.url=d.url+g+\"_method=DELETE\";d.type=\"POST\"}else{if(d.type===\"PUT\"){d.url=d.url+g+\"_method=PUT\";d.type=\"POST\"}else{if(d.type===\"PATCH\"){d.url=d.url+g+\"_method=PATCH\";d.type=\"POST\"}}}a+=1;e=b('<iframe src=\"'+c+'\" name=\"iframe-transport-'+a+'\"></iframe>').bind(\"load\",function(){var j,k=b.isArray(d.paramName)?d.paramName:[d.paramName];e.unbind(\"load\").bind(\"load\",function(){var l;try{l=e.contents();if(!l.length||!l[0].firstChild){throw new Error()}}catch(m){l=undefined}i(200,\"success\",{iframe:l});b('<iframe src=\"'+c+'\"></iframe>').appendTo(f);window.setTimeout(function(){f.remove()},0)});f.prop(\"target\",e.prop(\"name\")).prop(\"action\",d.url).prop(\"method\",d.type);if(d.formData){b.each(d.formData,function(l,m){b('<input type=\"hidden\"/>').prop(\"name\",m.name).val(m.value).appendTo(f)})}if(d.fileInput&&d.fileInput.length&&d.type===\"POST\"){j=d.fileInput.clone();d.fileInput.after(function(l){return j[l]});if(d.paramName){d.fileInput.each(function(l){b(this).prop(\"name\",k[l]||d.paramName)})}f.append(d.fileInput).prop(\"enctype\",\"multipart/form-data\").prop(\"encoding\",\"multipart/form-data\")}f.submit();if(j&&j.length){d.fileInput.each(function(m,l){var n=b(j[m]);b(l).prop(\"name\",n.prop(\"name\"));n.replaceWith(l)})}});f.append(e).appendTo(document.body)},abort:function(){if(e){e.unbind(\"load\").prop(\"src\",c)}if(f){f.remove()}}}}});b.ajaxSetup({converters:{\"iframe text\":function(c){return c&&b(c[0].body).text()},\"iframe json\":function(c){return c&&b.parseJSON(b(c[0].body).text())},\"iframe html\":function(c){return c&&b(c[0].body).html()},\"iframe xml\":function(c){var d=c&&c[0];return d&&b.isXMLDoc(d)?d:b.parseXML((d.XMLDocument&&d.XMLDocument.xml)||b(d.body).html())},\"iframe script\":function(c){return c&&b.globalEval(b(c[0].body).text())}}})}));\n(function(a){if(typeof define===\"function\"&&define.amd){define([\"jquery\",\"jquery.ui.widget\"],a)}else{a(window.jQuery)}}(function(a){a.support.fileInput=!(new RegExp(\"(Android (1\\\\.[0156]|2\\\\.[01]))|(Windows Phone (OS 7|8\\\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\\\.0|2\\\\.[05]|3\\\\.0))\").test(window.navigator.userAgent)||a('<input type=\"file\">').prop(\"disabled\"));a.support.xhrFileUpload=!!(window.ProgressEvent&&window.FileReader);a.support.xhrFormDataFileUpload=!!window.FormData;a.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);a.widget(\"blueimp.fileupload\",{options:{dropZone:a(document),pasteZone:a(document),fileInput:undefined,replaceFileInput:true,paramName:undefined,singleFileUploads:true,limitMultiFileUploads:undefined,sequentialUploads:false,limitConcurrentUploads:undefined,forceIframeTransport:false,redirect:undefined,redirectParamName:undefined,postMessage:undefined,multipart:true,maxChunkSize:undefined,uploadedBytes:undefined,recalculateProgress:true,progressInterval:100,bitrateInterval:500,autoUpload:true,messages:{uploadedBytes:\"Uploaded bytes exceed file size\"},i18n:function(c,b){c=this.messages[c]||c.toString();if(b){a.each(b,function(d,e){c=c.replace(\"{\"+d+\"}\",e)})}return c},formData:function(b){return b.serializeArray()},add:function(c,b){if(c.isDefaultPrevented()){return false}if(b.autoUpload||(b.autoUpload!==false&&a(this).fileupload(\"option\",\"autoUpload\"))){b.process().done(function(){b.submit()})}},processData:false,contentType:false,cache:false},_specialOptions:[\"fileInput\",\"dropZone\",\"pasteZone\",\"multipart\",\"forceIframeTransport\"],_blobSlice:a.support.blobSlice&&function(){var b=this.slice||this.webkitSlice||this.mozSlice;return b.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=((Date.now)?Date.now():(new Date()).getTime());this.loaded=0;this.bitrate=0;this.getBitrate=function(d,c,b){var e=d-this.timestamp;if(!this.bitrate||!b||e>b){this.bitrate=(c-this.loaded)*(1000/e)*8;this.loaded=c;this.timestamp=d}return this.bitrate}},_isXHRUpload:function(b){return !b.forceIframeTransport&&((!b.multipart&&a.support.xhrFileUpload)||a.support.xhrFormDataFileUpload)},_getFormData:function(b){var c;if(typeof b.formData===\"function\"){return b.formData(b.form)}if(a.isArray(b.formData)){return b.formData}if(a.type(b.formData)===\"object\"){c=[];a.each(b.formData,function(d,e){c.push({name:d,value:e})});return c}return[]},_getTotal:function(c){var b=0;a.each(c,function(d,e){b+=e.size||1});return b},_initProgressObject:function(c){var b={loaded:0,total:0,bitrate:0};if(c._progress){a.extend(c._progress,b)}else{c._progress=b}},_initResponseObject:function(b){var c;if(b._response){for(c in b._response){if(b._response.hasOwnProperty(c)){delete b._response[c]}}}else{b._response={}}},_onProgress:function(f,d){if(f.lengthComputable){var c=((Date.now)?Date.now():(new Date()).getTime()),b;if(d._time&&d.progressInterval&&(c-d._time<d.progressInterval)&&f.loaded!==f.total){return}d._time=c;b=Math.floor(f.loaded/f.total*(d.chunkSize||d._progress.total))+(d.uploadedBytes||0);this._progress.loaded+=(b-d._progress.loaded);this._progress.bitrate=this._bitrateTimer.getBitrate(c,this._progress.loaded,d.bitrateInterval);d._progress.loaded=d.loaded=b;d._progress.bitrate=d.bitrate=d._bitrateTimer.getBitrate(c,b,d.bitrateInterval);this._trigger(\"progress\",a.Event(\"progress\",{delegatedEvent:f}),d);this._trigger(\"progressall\",a.Event(\"progressall\",{delegatedEvent:f}),this._progress)}},_initProgressListener:function(b){var c=this,d=b.xhr?b.xhr():a.ajaxSettings.xhr();if(d.upload){a(d.upload).bind(\"progress\",function(f){var g=f.originalEvent;f.lengthComputable=g.lengthComputable;f.loaded=g.loaded;f.total=g.total;c._onProgress(f,b)});b.xhr=function(){return d}}},_isInstanceOf:function(b,c){return Object.prototype.toString.call(c)===\"[object \"+b+\"]\"},_initXHRData:function(c){var e=this,g,d=c.files[0],b=c.multipart||!a.support.xhrFileUpload,f=c.paramName[0];c.headers=a.extend({},c.headers);if(c.contentRange){c.headers[\"Content-Range\"]=c.contentRange}if(!b||c.blob||!this._isInstanceOf(\"File\",d)){c.headers[\"Content-Disposition\"]='attachment; filename=\"'+encodeURI(d.name)+'\"'}if(!b){c.contentType=d.type;c.data=c.blob||d}else{if(a.support.xhrFormDataFileUpload){if(c.postMessage){g=this._getFormData(c);if(c.blob){g.push({name:f,value:c.blob})}else{a.each(c.files,function(h,i){g.push({name:c.paramName[h]||f,value:i})})}}else{if(e._isInstanceOf(\"FormData\",c.formData)){g=c.formData}else{g=new FormData();a.each(this._getFormData(c),function(h,i){g.append(i.name,i.value)})}if(c.blob){g.append(f,c.blob,d.name)}else{a.each(c.files,function(h,i){if(e._isInstanceOf(\"File\",i)||e._isInstanceOf(\"Blob\",i)){g.append(c.paramName[h]||f,i,i.uploadName||i.name)}})}}c.data=g}}c.blob=null},_initIframeSettings:function(b){var c=a(\"<a></a>\").prop(\"href\",b.url).prop(\"host\");b.dataType=\"iframe \"+(b.dataType||\"\");b.formData=this._getFormData(b);if(b.redirect&&c&&c!==location.host){b.formData.push({name:b.redirectParamName||\"redirect\",value:b.redirect})}},_initDataSettings:function(b){if(this._isXHRUpload(b)){if(!this._chunkedUpload(b,true)){if(!b.data){this._initXHRData(b)}this._initProgressListener(b)}if(b.postMessage){b.dataType=\"postmessage \"+(b.dataType||\"\")}}else{this._initIframeSettings(b)}},_getParamName:function(b){var c=a(b.fileInput),d=b.paramName;if(!d){d=[];c.each(function(){var e=a(this),f=e.prop(\"name\")||\"files[]\",g=(e.prop(\"files\")||[1]).length;while(g){d.push(f);g-=1}});if(!d.length){d=[c.prop(\"name\")||\"files[]\"]}}else{if(!a.isArray(d)){d=[d]}}return d},_initFormSettings:function(b){if(!b.form||!b.form.length){b.form=a(b.fileInput.prop(\"form\"));if(!b.form.length){b.form=a(this.options.fileInput.prop(\"form\"))}}b.paramName=this._getParamName(b);if(!b.url){b.url=b.form.prop(\"action\")||location.href}b.type=(b.type||(a.type(b.form.prop(\"method\"))===\"string\"&&b.form.prop(\"method\"))||\"\").toUpperCase();if(b.type!==\"POST\"&&b.type!==\"PUT\"&&b.type!==\"PATCH\"){b.type=\"POST\"}if(!b.formAcceptCharset){b.formAcceptCharset=b.form.attr(\"accept-charset\")}},_getAJAXSettings:function(c){var b=a.extend({},this.options,c);this._initFormSettings(b);this._initDataSettings(b);return b},_getDeferredState:function(b){if(b.state){return b.state()}if(b.isResolved()){return\"resolved\"}if(b.isRejected()){return\"rejected\"}return\"pending\"},_enhancePromise:function(b){b.success=b.done;b.error=b.fail;b.complete=b.always;return b},_getXHRPromise:function(e,d,c){var b=a.Deferred(),f=b.promise();d=d||this.options.context||f;if(e===true){b.resolveWith(d,c)}else{if(e===false){b.rejectWith(d,c)}}f.abort=b.promise;return this._enhancePromise(f)},_addConvenienceMethods:function(f,d){var c=this,b=function(e){return a.Deferred().resolveWith(c,e).promise()};d.process=function(g,e){if(g||e){d._processQueue=this._processQueue=(this._processQueue||b([this])).pipe(function(){if(d.errorThrown){return a.Deferred().rejectWith(c,[d]).promise()}return b(arguments)}).pipe(g,e)}return this._processQueue||b([this])};d.submit=function(){if(this.state()!==\"pending\"){d.jqXHR=this.jqXHR=(c._trigger(\"submit\",a.Event(\"submit\",{delegatedEvent:f}),this)!==false)&&c._onSend(f,this)}return this.jqXHR||c._getXHRPromise()};d.abort=function(){if(this.jqXHR){return this.jqXHR.abort()}this.errorThrown=\"abort\";return c._getXHRPromise()};d.state=function(){if(this.jqXHR){return c._getDeferredState(this.jqXHR)}if(this._processQueue){return c._getDeferredState(this._processQueue)}};d.processing=function(){return !this.jqXHR&&this._processQueue&&c._getDeferredState(this._processQueue)===\"pending\"};d.progress=function(){return this._progress};d.response=function(){return this._response}},_getUploadedBytes:function(d){var b=d.getResponseHeader(\"Range\"),e=b&&b.split(\"-\"),c=e&&e.length>1&&parseInt(e[1],10);return c&&c+1},_chunkedUpload:function(m,g){m.uploadedBytes=m.uploadedBytes||0;var f=this,d=m.files[0],e=d.size,b=m.uploadedBytes,c=m.maxChunkSize||e,i=this._blobSlice,j=a.Deferred(),l=j.promise(),h,k;if(!(this._isXHRUpload(m)&&i&&(b||c<e))||m.data){return false}if(g){return true}if(b>=e){d.error=m.i18n(\"uploadedBytes\");return this._getXHRPromise(false,m.context,[null,\"error\",d.error])}k=function(){var p=a.extend({},m),n=p._progress.loaded;p.blob=i.call(d,b,b+c,d.type);p.chunkSize=p.blob.size;p.contentRange=\"bytes \"+b+\"-\"+(b+p.chunkSize-1)+\"/\"+e;f._initXHRData(p);f._initProgressListener(p);h=((f._trigger(\"chunksend\",null,p)!==false&&a.ajax(p))||f._getXHRPromise(false,p.context)).done(function(o,r,q){b=f._getUploadedBytes(q)||(b+p.chunkSize);if(n+p.chunkSize-p._progress.loaded){f._onProgress(a.Event(\"progress\",{lengthComputable:true,loaded:b-p.uploadedBytes,total:b-p.uploadedBytes}),p)}m.uploadedBytes=p.uploadedBytes=b;p.result=o;p.textStatus=r;p.jqXHR=q;f._trigger(\"chunkdone\",null,p);f._trigger(\"chunkalways\",null,p);if(b<e){k()}else{j.resolveWith(p.context,[o,r,q])}}).fail(function(o,r,q){p.jqXHR=o;p.textStatus=r;p.errorThrown=q;f._trigger(\"chunkfail\",null,p);f._trigger(\"chunkalways\",null,p);j.rejectWith(p.context,[o,r,q])})};this._enhancePromise(l);l.abort=function(){return h.abort()};k();return l},_beforeSend:function(c,b){if(this._active===0){this._trigger(\"start\");this._bitrateTimer=new this._BitrateTimer();this._progress.loaded=this._progress.total=0;this._progress.bitrate=0}this._initResponseObject(b);this._initProgressObject(b);b._progress.loaded=b.loaded=b.uploadedBytes||0;b._progress.total=b.total=this._getTotal(b.files)||1;b._progress.bitrate=b.bitrate=0;this._active+=1;this._progress.loaded+=b.loaded;this._progress.total+=b.total},_onDone:function(b,g,f,d){var e=d._progress.total,c=d._response;if(d._progress.loaded<e){this._onProgress(a.Event(\"progress\",{lengthComputable:true,loaded:e,total:e}),d)}c.result=d.result=b;c.textStatus=d.textStatus=g;c.jqXHR=d.jqXHR=f;this._trigger(\"done\",null,d)},_onFail:function(d,f,e,c){var b=c._response;if(c.recalculateProgress){this._progress.loaded-=c._progress.loaded;this._progress.total-=c._progress.total}b.jqXHR=c.jqXHR=d;b.textStatus=c.textStatus=f;b.errorThrown=c.errorThrown=e;this._trigger(\"fail\",null,c)},_onAlways:function(d,e,c,b){this._trigger(\"always\",null,b)},_onSend:function(h,f){if(!f.submit){this._addConvenienceMethods(h,f)}var g=this,j,b,i,c,k=g._getAJAXSettings(f),d=function(){g._sending+=1;k._bitrateTimer=new g._BitrateTimer();j=j||(((b||g._trigger(\"send\",a.Event(\"send\",{delegatedEvent:h}),k)===false)&&g._getXHRPromise(false,k.context,b))||g._chunkedUpload(k)||a.ajax(k)).done(function(e,m,l){g._onDone(e,m,l,k)}).fail(function(e,m,l){g._onFail(e,m,l,k)}).always(function(m,n,l){g._onAlways(m,n,l,k);g._sending-=1;g._active-=1;if(k.limitConcurrentUploads&&k.limitConcurrentUploads>g._sending){var e=g._slots.shift();while(e){if(g._getDeferredState(e)===\"pending\"){e.resolve();break}e=g._slots.shift()}}if(g._active===0){g._trigger(\"stop\")}});return j};this._beforeSend(h,k);if(this.options.sequentialUploads||(this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending)){if(this.options.limitConcurrentUploads>1){i=a.Deferred();this._slots.push(i);c=i.pipe(d)}else{this._sequence=this._sequence.pipe(d,d);c=this._sequence}c.abort=function(){b=[undefined,\"abort\",\"abort\"];if(!j){if(i){i.rejectWith(k.context,b)}return d()}return j.abort()};return this._enhancePromise(c)}return d()},_onAdd:function(k,g){var j=this,n=true,m=a.extend({},this.options,g),d=m.limitMultiFileUploads,h=this._getParamName(m),c,b,l,f;if(!(m.singleFileUploads||d)||!this._isXHRUpload(m)){l=[g.files];c=[h]}else{if(!m.singleFileUploads&&d){l=[];c=[];for(f=0;f<g.files.length;f+=d){l.push(g.files.slice(f,f+d));b=h.slice(f,f+d);if(!b.length){b=h}c.push(b)}}else{c=h}}g.originalFiles=g.files;a.each(l||g.files,function(e,i){var o=a.extend({},g);o.files=l?i:[i];o.paramName=c[e];j._initResponseObject(o);j._initProgressObject(o);j._addConvenienceMethods(k,o);n=j._trigger(\"add\",a.Event(\"add\",{delegatedEvent:k}),o);return n});return n},_replaceFileInput:function(b){var c=b.clone(true);a(\"<form></form>\").append(c)[0].reset();b.after(c).detach();a.cleanData(b.unbind(\"remove\"));this.options.fileInput=this.options.fileInput.map(function(d,e){if(e===b[0]){return c[0]}return e});if(b[0]===this.element[0]){this.element=c}},_handleFileTreeEntry:function(f,g){var e=this,b=a.Deferred(),c=function(h){if(h&&!h.entry){h.entry=f}b.resolve([h])},d;g=g||\"\";if(f.isFile){if(f._file){f._file.relativePath=g;b.resolve(f._file)}else{f.file(function(h){h.relativePath=g;b.resolve(h)},c)}}else{if(f.isDirectory){d=f.createReader();d.readEntries(function(h){e._handleFileTreeEntries(h,g+f.name+\"/\").done(function(i){b.resolve(i)}).fail(c)},c)}else{b.resolve([])}}return b.promise()},_handleFileTreeEntries:function(b,d){var c=this;return a.when.apply(a,a.map(b,function(e){return c._handleFileTreeEntry(e,d)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(c){c=c||{};var b=c.items;if(b&&b.length&&(b[0].webkitGetAsEntry||b[0].getAsEntry)){return this._handleFileTreeEntries(a.map(b,function(e){var d;if(e.webkitGetAsEntry){d=e.webkitGetAsEntry();if(d){d._file=e.getAsFile()}return d}return e.getAsEntry()}))}return a.Deferred().resolve(a.makeArray(c.files)).promise()},_getSingleFileInputFiles:function(d){d=a(d);var b=d.prop(\"webkitEntries\")||d.prop(\"entries\"),c,e;if(b&&b.length){return this._handleFileTreeEntries(b)}c=a.makeArray(d.prop(\"files\"));if(!c.length){e=d.prop(\"value\");if(!e){return a.Deferred().resolve([]).promise()}c=[{name:e.replace(/^.*\\\\/,\"\")}]}else{if(c[0].name===undefined&&c[0].fileName){a.each(c,function(f,g){g.name=g.fileName;g.size=g.fileSize})}}return a.Deferred().resolve(c).promise()},_getFileInputFiles:function(b){if(!(b instanceof a)||b.length===1){return this._getSingleFileInputFiles(b)}return a.when.apply(a,a.map(b,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_onChange:function(d){var b=this,c={fileInput:a(d.target),form:a(d.target.form)};this._getFileInputFiles(c.fileInput).always(function(e){c.files=e;if(b.options.replaceFileInput){b._replaceFileInput(c.fileInput)}if(b._trigger(\"change\",a.Event(\"change\",{delegatedEvent:d}),c)!==false){b._onAdd(d,c)}})},_onPaste:function(d){var b=d.originalEvent&&d.originalEvent.clipboardData&&d.originalEvent.clipboardData.items,c={files:[]};if(b&&b.length){a.each(b,function(e,g){var f=g.getAsFile&&g.getAsFile();if(f){c.files.push(f)}});if(this._trigger(\"paste\",a.Event(\"paste\",{delegatedEvent:d}),c)!==false){this._onAdd(d,c)}}},_onDrop:function(f){f.dataTransfer=f.originalEvent&&f.originalEvent.dataTransfer;var b=this,d=f.dataTransfer,c={};if(d&&d.files&&d.files.length){f.preventDefault();this._getDroppedFiles(d).always(function(e){c.files=e;if(b._trigger(\"drop\",a.Event(\"drop\",{delegatedEvent:f}),c)!==false){b._onAdd(f,c)}})}},_onDragOver:function(c){c.dataTransfer=c.originalEvent&&c.originalEvent.dataTransfer;var b=c.dataTransfer;if(b&&a.inArray(\"Files\",b.types)!==-1&&this._trigger(\"dragover\",a.Event(\"dragover\",{delegatedEvent:c}))!==false){c.preventDefault();b.dropEffect=\"copy\"}},_initEventHandlers:function(){if(this._isXHRUpload(this.options)){this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop});this._on(this.options.pasteZone,{paste:this._onPaste})}if(a.support.fileInput){this._on(this.options.fileInput,{change:this._onChange})}},_destroyEventHandlers:function(){this._off(this.options.dropZone,\"dragover drop\");this._off(this.options.pasteZone,\"paste\");this._off(this.options.fileInput,\"change\")},_setOption:function(b,c){var d=a.inArray(b,this._specialOptions)!==-1;if(d){this._destroyEventHandlers()}this._super(b,c);if(d){this._initSpecialOptions();this._initEventHandlers()}},_initSpecialOptions:function(){var b=this.options;if(b.fileInput===undefined){b.fileInput=this.element.is('input[type=\"file\"]')?this.element:this.element.find('input[type=\"file\"]')}else{if(!(b.fileInput instanceof a)){b.fileInput=a(b.fileInput)}}if(!(b.dropZone instanceof a)){b.dropZone=a(b.dropZone)}if(!(b.pasteZone instanceof a)){b.pasteZone=a(b.pasteZone)}},_getRegExp:function(d){var c=d.split(\"/\"),b=c.pop();c.shift();return new RegExp(c.join(\"/\"),b)},_isRegExpOption:function(b,c){return b!==\"url\"&&a.type(c)===\"string\"&&/^\\/.*\\/[igm]{0,3}$/.test(c)},_initDataAttributes:function(){var c=this,b=this.options;a.each(a(this.element[0].cloneNode(false)).data(),function(d,e){if(c._isRegExpOption(d,e)){e=c._getRegExp(e)}b[d]=e})},_create:function(){this._initDataAttributes();this._initSpecialOptions();this._slots=[];this._sequence=this._getXHRPromise(true);this._sending=this._active=0;this._initProgressObject(this);this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(c){var b=this;if(!c||this.options.disabled){return}if(c.fileInput&&!c.files){this._getFileInputFiles(c.fileInput).always(function(d){c.files=d;b._onAdd(null,c)})}else{c.files=a.makeArray(c.files);this._onAdd(null,c)}},send:function(f){if(f&&!this.options.disabled){if(f.fileInput&&!f.files){var d=this,b=a.Deferred(),g=b.promise(),c,e;g.abort=function(){e=true;if(c){return c.abort()}b.reject(null,\"abort\",\"abort\");return g};this._getFileInputFiles(f.fileInput).always(function(h){if(e){return}if(!h.length){b.reject();return}f.files=h;c=d._onSend(null,f).then(function(i,k,j){b.resolve(i,k,j)},function(i,k,j){b.reject(i,k,j)})});return this._enhancePromise(g)}f.files=a.makeArray(f.files);if(f.files.length){return this._onSend(null,f)}}return this._getXHRPromise(false,f&&f.context)}})}));\n\n(function(){var o;var g=[],u=[];var M=0;var i={};var a=+new Date+\"\";var b=75;var m=40;var J=(\" \\t\\x0B\\f\\xA0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\");var z=/\\b__p \\+= '';/g,X=/\\b(__p \\+=) '' \\+/g,e=/(__e\\(.*?\\)|\\b__t\\)) \\+\\n'';/g;var C=/\\$\\{([^\\\\}]*(?:\\\\.[^\\\\}]*)*)\\}/g;var G=/\\w*$/;var s=/^\\s*function[ \\n\\r\\t]+\\w/;var p=/<%=([\\s\\S]+?)%>/g;var ac=RegExp(\"^[\"+J+\"]*0+(?=.$)\");var V=/($^)/;var j=/\\bthis\\b/;var Z=/['\\n\\r\\t\\u2028\\u2029\\\\]/g;var A=[\"Array\",\"Boolean\",\"Date\",\"Error\",\"Function\",\"Math\",\"Number\",\"Object\",\"RegExp\",\"String\",\"_\",\"attachEvent\",\"clearTimeout\",\"isFinite\",\"isNaN\",\"parseInt\",\"setImmediate\",\"setTimeout\"];var F=[\"constructor\",\"hasOwnProperty\",\"isPrototypeOf\",\"propertyIsEnumerable\",\"toLocaleString\",\"toString\",\"valueOf\"];var af=0;var Y=\"[object Arguments]\",w=\"[object Array]\",D=\"[object Boolean]\",O=\"[object Date]\",N=\"[object Error]\",ah=\"[object Function]\",K=\"[object Number]\",c=\"[object Object]\",P=\"[object RegExp]\",L=\"[object String]\";var x={};x[ah]=false;x[Y]=x[w]=x[D]=x[O]=x[K]=x[c]=x[P]=x[L]=true;var S={leading:false,maxWait:0,trailing:false};var n={configurable:false,enumerable:false,value:null,writable:false};var I={args:\"\",array:null,bottom:\"\",firstArg:\"\",init:\"\",keys:null,loop:\"\",shadowedProps:null,support:null,top:\"\",useHas:false};var H={\"boolean\":false,\"function\":true,object:true,number:false,string:false,\"undefined\":false};var R={\"\\\\\":\"\\\\\",\"'\":\"'\",\"\\n\":\"n\",\"\\r\":\"r\",\"\\t\":\"t\",\"\\u2028\":\"u2028\",\"\\u2029\":\"u2029\"};var E=(H[typeof window]&&window)||this;var aa=H[typeof exports]&&exports&&!exports.nodeType&&exports;var B=H[typeof module]&&module&&!module.nodeType&&module;var U=B&&B.exports===aa&&aa;var y=H[typeof global]&&global;if(y&&(y.global===y||y.window===y)){E=y}function h(am,al,aj){var ai=(aj||0)-1,ak=am?am.length:0;while(++ai<ak){if(am[ai]===al){return ai}}return -1}function T(ai,al){var ak=typeof al;ai=ai.cache;if(ak==\"boolean\"||al==null){return ai[al]?0:-1}if(ak!=\"number\"&&ak!=\"string\"){ak=\"object\"}var aj=ak==\"number\"?al:a+al;ai=(ai=ai[ak])&&ai[aj];return ak==\"object\"?(ai&&h(ai,al)>-1?0:-1):(ai?0:-1)}function Q(am){var aj=this.cache,al=typeof am;if(al==\"boolean\"||am==null){aj[am]=true}else{if(al!=\"number\"&&al!=\"string\"){al=\"object\"}var ak=al==\"number\"?am:a+am,ai=aj[al]||(aj[al]={});if(al==\"object\"){(ai[ak]||(ai[ak]=[])).push(am)}else{ai[ak]=true}}}function r(ai){return ai.charCodeAt(0)}function ab(aj,ai){var ak=aj.criteria,al=ai.criteria;if(ak!==al){if(ak>al||typeof ak==\"undefined\"){return 1}if(ak<al||typeof al==\"undefined\"){return -1}}return aj.index-ai.index}function ae(ap){var al=-1,an=ap.length,ao=ap[0],ak=ap[(an/2)|0],am=ap[an-1];if(ao&&typeof ao==\"object\"&&ak&&typeof ak==\"object\"&&am&&typeof am==\"object\"){return false}var aj=t();aj[\"false\"]=aj[\"null\"]=aj[\"true\"]=aj[\"undefined\"]=false;var ai=t();ai.array=ap;ai.cache=aj;ai.push=Q;while(++al<an){ai.push(ap[al])}return ai}function f(ai){return\"\\\\\"+R[ai]}function d(){return g.pop()||[]}function t(){return u.pop()||{array:null,cache:null,criteria:null,\"false\":false,index:0,\"null\":false,number:null,object:null,push:null,string:null,\"true\":false,\"undefined\":false,value:null}}function l(ai){return typeof ai.toString!=\"function\"&&typeof(ai+\"\")==\"string\"}function W(ai){ai.length=0;if(g.length<m){g.push(ai)}}function q(aj){var ai=aj.cache;if(ai){q(ai)}aj.array=aj.cache=aj.criteria=aj.object=aj.number=aj.string=aj.value=null;if(u.length<m){u.push(aj)}}function v(an,am,aj){am||(am=0);if(typeof aj==\"undefined\"){aj=an?an.length:0}var ak=-1,al=aj-am||0,ai=Array(al<0?0:al);while(++ak<al){ai[ak]=an[am+ak]}return ai}function ad(ao){ao=ao?ag.defaults(E.Object(),ao,ag.pick(E,A)):E;var aO=ao.Array,cp=ao.Boolean,cq=ao.Date,c9=ao.Error,a8=ao.Function,cf=ao.Math,bn=ao.Number,dd=ao.Object,cR=ao.RegExp,cB=ao.String,aP=ao.TypeError;var ci=[];var be=c9.prototype,cU=dd.prototype,aJ=cB.prototype;var c6=ao._;var aH=cU.toString;var cc=cR(\"^\"+cB(aH).replace(/[.*+?^${}()|[\\]\\\\]/g,\"\\\\$&\").replace(/toString| for [^\\]]+/g,\".*?\")+\"$\");var a5=cf.ceil,b3=ao.clearTimeout,cY=cf.floor,bM=a8.prototype.toString,aB=cc.test(aB=dd.getPrototypeOf)&&aB,a9=cU.hasOwnProperty,cr=cc.test(cr=cq.now)&&cr||function(){return +new cq},aE=ci.push,aw=cU.propertyIsEnumerable,a7=ao.setTimeout,cz=ci.splice;var b9=typeof(b9=y&&U&&y.setImmediate)==\"function\"&&!cc.test(b9)&&b9;var cS=(function(){try{var du={},ds=cc.test(ds=dd.defineProperty)&&ds,at=ds(du,du,du)&&ds}catch(dt){}return at}());var aD=cc.test(aD=dd.create)&&aD,bo=cc.test(bo=aO.isArray)&&bo,aR=ao.isFinite,bO=ao.isNaN,cv=cc.test(cv=dd.keys)&&cv,cw=cf.max,av=cf.min,dm=ao.parseInt,bU=cf.random;var cV={};cV[w]=aO;cV[D]=cp;cV[O]=cq;cV[ah]=a8;cV[c]=dd;cV[K]=bn;cV[P]=cR;cV[L]=cB;var bL={};bL[w]=bL[O]=bL[K]={constructor:true,toLocaleString:true,toString:true,valueOf:true};bL[D]=bL[L]={constructor:true,toString:true,valueOf:true};bL[N]=bL[ah]=bL[P]={constructor:true,toString:true};bL[c]={constructor:true};(function(){var dt=F.length;while(dt--){var at=F[dt];for(var ds in bL){if(a9.call(bL,ds)&&!a9.call(bL[ds],at)){bL[ds][at]=false}}}}());function a3(at){return(at&&typeof at==\"object\"&&!bN(at)&&a9.call(at,\"__wrapped__\"))?at:new c0(at)}function c0(ds,at){this.__chain__=!!at;this.__wrapped__=ds}c0.prototype=a3.prototype;var aN=a3.support={};(function(){var du=function(){this.x=1},at={\"0\":1,length:1},dt=[];du.prototype={valueOf:1,y:1};for(var ds in new du){dt.push(ds)}for(ds in arguments){}aN.argsClass=aH.call(arguments)==Y;aN.argsObject=arguments.constructor==dd&&!(arguments instanceof aO);aN.enumErrorProps=aw.call(be,\"message\")||aw.call(be,\"name\");aN.enumPrototypes=aw.call(du,\"prototype\");aN.funcDecomp=!cc.test(ao.WinRTError)&&j.test(ad);aN.funcNames=typeof a8.name==\"string\";aN.nonEnumArgs=ds!=0;aN.nonEnumShadows=!/valueOf/.test(dt);aN.ownLast=dt[0]!=\"x\";aN.spliceObjects=(ci.splice.call(at,0,1),!at[0]);aN.unindexedChars=(\"x\"[0]+dd(\"x\")[0])!=\"xx\";try{aN.nodeClass=!(aH.call(document)==c&&!({toString:0}+\"\"))}catch(dv){aN.nodeClass=true}}(1));a3.templateSettings={escape:/<%-([\\s\\S]+?)%>/g,evaluate:/<%([\\s\\S]+?)%>/g,interpolate:p,variable:\"\",imports:{_:a3}};var bW=function(dt){var at=\"var index, iterable = \"+(dt.firstArg)+\", result = \"+(dt.init)+\";\\nif (!iterable) return result;\\n\"+(dt.top)+\";\";if(dt.array){at+=\"\\nvar length = iterable.length; index = -1;\\nif (\"+(dt.array)+\") {  \";if(aN.unindexedChars){at+=\"\\n  if (isString(iterable)) {\\n    iterable = iterable.split('')\\n  }  \"}at+=\"\\n  while (++index < length) {\\n    \"+(dt.loop)+\";\\n  }\\n}\\nelse {  \"}else{if(aN.nonEnumArgs){at+=\"\\n  var length = iterable.length; index = -1;\\n  if (length && isArguments(iterable)) {\\n    while (++index < length) {\\n      index += '';\\n      \"+(dt.loop)+\";\\n    }\\n  } else {  \"}}if(aN.enumPrototypes){at+=\"\\n  var skipProto = typeof iterable == 'function';\\n  \"}if(aN.enumErrorProps){at+=\"\\n  var skipErrorProps = iterable === errorProto || iterable instanceof Error;\\n  \"}var ds=[];if(aN.enumPrototypes){ds.push('!(skipProto && index == \"prototype\")')}if(aN.enumErrorProps){ds.push('!(skipErrorProps && (index == \"message\" || index == \"name\"))')}if(dt.useHas&&dt.keys){at+=\"\\n  var ownIndex = -1,\\n      ownProps = objectTypes[typeof iterable] && keys(iterable),\\n      length = ownProps ? ownProps.length : 0;\\n\\n  while (++ownIndex < length) {\\n    index = ownProps[ownIndex];\\n\";if(ds.length){at+=\"    if (\"+(ds.join(\" && \"))+\") {\\n  \"}at+=(dt.loop)+\";    \";if(ds.length){at+=\"\\n    }\"}at+=\"\\n  }  \"}else{at+=\"\\n  for (index in iterable) {\\n\";if(dt.useHas){ds.push(\"hasOwnProperty.call(iterable, index)\")}if(ds.length){at+=\"    if (\"+(ds.join(\" && \"))+\") {\\n  \"}at+=(dt.loop)+\";    \";if(ds.length){at+=\"\\n    }\"}at+=\"\\n  }    \";if(aN.nonEnumShadows){at+=\"\\n\\n  if (iterable !== objectProto) {\\n    var ctor = iterable.constructor,\\n        isProto = iterable === (ctor && ctor.prototype),\\n        className = iterable === stringProto ? stringClass : iterable === errorProto ? errorClass : toString.call(iterable),\\n        nonEnum = nonEnumProps[className];\\n      \";for(k=0;k<7;k++){at+=\"\\n    index = '\"+(dt.shadowedProps[k])+\"';\\n    if ((!(isProto && nonEnum[index]) && hasOwnProperty.call(iterable, index))\";if(!dt.useHas){at+=\" || (!nonEnum[index] && iterable[index] !== objectProto[index])\"}at+=\") {\\n      \"+(dt.loop)+\";\\n    }      \"}at+=\"\\n  }    \"}}if(dt.array||aN.nonEnumArgs){at+=\"\\n}\"}at+=(dt.bottom)+\";\\nreturn result\";return at};function az(dv){var du=dv[0],ds=dv[2],at=dv[4];function dt(){if(ds){var dy=ds.slice();aE.apply(dy,arguments)}if(this instanceof dt){var dx=cb(du.prototype),dw=du.apply(dx,dy||arguments);return dq(dw)?dw:dx}return du.apply(at,dy||arguments)}ak(dt,dv);return dt}function br(dA,dx,dB,dv,dt){if(dB){var dC=dB(dA);if(typeof dC!=\"undefined\"){return dC}}var du=dq(dA);if(du){var dy=aH.call(dA);if(!x[dy]||(!aN.nodeClass&&l(dA))){return dA}var dz=cV[dy];switch(dy){case D:case O:return new dz(+dA);case K:case L:return new dz(dA);case P:dC=dz(dA.source,G.exec(dA));dC.lastIndex=dA.lastIndex;return dC}}else{return dA}var dw=bN(dA);if(dx){var ds=!dv;dv||(dv=d());dt||(dt=d());var at=dv.length;while(at--){if(dv[at]==dA){return dt[at]}}dC=dw?dz(dA.length):{}}else{dC=dw?v(dA):bB({},dA)}if(dw){if(a9.call(dA,\"index\")){dC.index=dA.index}if(a9.call(dA,\"input\")){dC.input=dA.input}}if(!dx){return dC}dv.push(dA);dt.push(dC);(dw?ct:bZ)(dA,function(dD,dE){dC[dE]=br(dD,dx,dB,dv,dt)});if(ds){W(dv);W(dt)}return dC}function cb(at,ds){return dq(at)?aD(at):{}}if(!aD){cb=(function(){function at(){}return function(dt){if(dq(dt)){at.prototype=dt;var ds=new at;at.prototype=null}return ds||ao.Object()}}())}function cG(ds,at,dv){if(typeof ds!=\"function\"){return bs}if(typeof at==\"undefined\"||!(\"prototype\" in ds)){return ds}var du=ds.__bindData__;if(typeof du==\"undefined\"){if(aN.funcNames){du=!ds.name}du=du||!aN.funcDecomp;if(!du){var dt=bM.call(ds);if(!aN.funcNames){du=!s.test(dt)}if(!du){du=j.test(dt);ak(ds,du)}}}if(du===false||(du!==true&&du[1]&1)){return ds}switch(dv){case 1:return function(dw){return ds.call(at,dw)};case 2:return function(dx,dw){return ds.call(at,dx,dw)};case 3:return function(dx,dw,dy){return ds.call(at,dx,dw,dy)};case 4:return function(dw,dy,dx,dz){return ds.call(at,dw,dy,dx,dz)}}return ca(ds,at)}function bu(du){var dw=du[0],dt=du[1],dy=du[2],ds=du[3],dB=du[4],at=du[5];var dv=dt&1,dD=dt&2,dA=dt&4,dz=dt&8,dC=dw;function dx(){var dF=dv?dB:this;if(dy){var dG=dy.slice();aE.apply(dG,arguments)}if(ds||dA){dG||(dG=v(arguments));if(ds){aE.apply(dG,ds)}if(dA&&dG.length<at){dt|=16&~32;return bu([dw,(dz?dt:dt&~3),dG,null,dB,at])}}dG||(dG=arguments);if(dD){dw=dF[dC]}if(this instanceof dx){dF=cb(dw.prototype);var dE=dw.apply(dF,dG);return dq(dE)?dE:dF}return dw.apply(dF,dG)}ak(dx,du);return dx}function dp(du,dy){var dt=-1,dv=cg(),ds=du?du.length:0,dw=ds>=b&&dv===h,dz=[];if(dw){var at=ae(dy);if(at){dv=T;dy=at}else{dw=false}}while(++dt<ds){var dx=du[dt];if(dv(dy,dx)<0){dz.push(dx)}}if(dw){q(dy)}return dz}function b5(du,dw,ds,dx){var dt=(dx||0)-1,at=du?du.length:0,dB=[];while(++dt<at){var dy=du[dt];if(dy&&typeof dy==\"object\"&&typeof dy.length==\"number\"&&(bN(dy)||bd(dy))){if(!dw){dy=b5(dy,dw,ds)}var dA=-1,dv=dy.length,dz=dB.length;dB.length+=dv;while(++dA<dv){dB[dz++]=dy[dA]}}else{if(!ds){dB.push(dy)}}}return dB}function bl(dJ,dI,dy,dF,dL,dK){if(dy){var dD=dy(dJ,dI);if(typeof dD!=\"undefined\"){return !!dD}}if(dJ===dI){return dJ!==0||(1/dJ==1/dI)}var dx=typeof dJ,dv=typeof dI;if(dJ===dJ&&!(dJ&&H[dx])&&!(dI&&H[dv])){return false}if(dJ==null||dI==null){return dJ===dI}var ds=aH.call(dJ),dB=aH.call(dI);if(ds==Y){ds=c}if(dB==Y){dB=c}if(ds!=dB){return false}switch(ds){case D:case O:return +dJ==+dI;case K:return(dJ!=+dJ)?dI!=+dI:(dJ==0?(1/dJ==1/dI):dJ==+dI);case P:case L:return dJ==cB(dI)}var dz=ds==w;if(!dz){var dE=a9.call(dJ,\"__wrapped__\"),at=a9.call(dI,\"__wrapped__\");if(dE||at){return bl(dE?dJ.__wrapped__:dJ,at?dI.__wrapped__:dI,dy,dF,dL,dK)}if(ds!=c||(!aN.nodeClass&&(l(dJ)||l(dI)))){return false}var dw=!aN.argsObject&&bd(dJ)?dd:dJ.constructor,dt=!aN.argsObject&&bd(dI)?dd:dI.constructor;if(dw!=dt&&!(aF(dw)&&dw instanceof dw&&aF(dt)&&dt instanceof dt)&&(\"constructor\" in dJ&&\"constructor\" in dI)){return false}}var dC=!dL;dL||(dL=d());dK||(dK=d());var du=dL.length;while(du--){if(dL[du]==dJ){return dK[du]==dI}}var dG=0;dD=true;dL.push(dJ);dK.push(dI);if(dz){du=dJ.length;dG=dI.length;dD=dG==dJ.length;if(!dD&&!dF){return dD}while(dG--){var dA=du,dH=dI[dG];if(dF){while(dA--){if((dD=bl(dJ[dA],dH,dy,dF,dL,dK))){break}}}else{if(!(dD=bl(dJ[dG],dH,dy,dF,dL,dK))){break}}}return dD}ap(dI,function(dO,dN,dM){if(a9.call(dM,dN)){dG++;return(dD=a9.call(dJ,dN)&&bl(dJ[dN],dO,dy,dF,dL,dK))}});if(dD&&!dF){ap(dJ,function(dO,dN,dM){if(a9.call(dM,dN)){return(dD=--dG>-1)}})}if(dC){W(dL);W(dK)}return dD}function an(ds,dt,dv,at,du){(bN(dt)?bK:bZ)(dt,function(dC,dy){var dB,dz,dx=dC,dA=ds[dy];if(dC&&((dz=bN(dC))||aW(dC))){var dD=at.length;while(dD--){if((dB=at[dD]==dC)){dA=du[dD];break}}if(!dB){var dw;if(dv){dx=dv(dA,dC);if((dw=typeof dx!=\"undefined\")){dA=dx}}if(!dw){dA=dz?(bN(dA)?dA:[]):(aW(dA)?dA:{})}at.push(dC);du.push(dA);if(!dw){an(dA,dC,dv,at,du)}}}else{if(dv){dx=dv(dA,dC);if(typeof dx==\"undefined\"){dx=dC}}if(typeof dx!=\"undefined\"){dA=dx}}ds[dy]=dA})}function ay(ds,at){return ds+cY(bU()*(at-ds+1))}function al(dx,du,dB){var dw=-1,dy=cg(),dt=dx?dx.length:0,dC=[];var dz=!du&&dt>=b&&dy===h,ds=(dB||dz)?d():dC;if(dz){var at=ae(ds);if(at){dy=T;ds=at}else{dz=false;ds=dB?ds:(W(ds),dC)}}while(++dw<dt){var dA=dx[dw],dv=dB?dB(dA,dw,dx):dA;if(du?!dw||ds[ds.length-1]!==dv:dy(ds,dv)<0){if(dB||dz){ds.push(dv)}dC.push(dA)}}if(dz){W(ds.array);q(ds)}else{if(dB){W(ds)}}return dC}function b4(at){return function(dx,dy,dt){var ds={};dy=a3.createCallback(dy,dt,3);if(bN(dx)){var du=-1,dv=dx.length;while(++du<dv){var dw=dx[du];at(ds,dw,dy(dw,du,dx),dx)}}else{ct(dx,function(dA,dz,dB){at(ds,dA,dy(dA,dz,dB),dB)})}return ds}}function cW(dx,du,dy,dt,dD,at){var dw=du&1,dE=du&2,dB=du&4,dA=du&8,ds=du&16,dz=du&32;if(!dE&&!aF(dx)){throw new aP}if(ds&&!dy.length){du&=~16;ds=dy=false}if(dz&&!dt.length){du&=~32;dz=dt=false}var dv=dx&&dx.__bindData__;if(dv&&dv!==true){dv=dv.slice();if(dw&&!(dv[1]&1)){dv[4]=dD}if(!dw&&dv[1]&1){du|=8}if(dB&&!(dv[1]&4)){dv[5]=at}if(ds){aE.apply(dv[2]||(dv[2]=[]),dy)}if(dz){aE.apply(dv[3]||(dv[3]=[]),dt)}dv[1]|=du;return cW.apply(null,dv)}var dC=(du==1||du===17)?az:bu;return dC([dx,du,dy,dt,dD,at])}function a1(){I.shadowedProps=F;I.array=I.bottom=I.loop=I.top=\"\";I.init=\"iterable\";I.useHas=true;for(var du,dt=0;du=arguments[dt];dt++){for(var dv in du){I[dv]=du[dv]}}var ds=I.args;I.firstArg=/^[^,]+/.exec(ds)[0];var at=a8(\"baseCreateCallback, errorClass, errorProto, hasOwnProperty, indicatorObject, isArguments, isArray, isString, keys, objectProto, objectTypes, nonEnumProps, stringClass, stringProto, toString\",\"return function(\"+ds+\") {\\n\"+bW(I)+\"\\n}\");return at(cG,N,be,a9,i,bd,bN,cK,I.keys,cU,H,bL,L,aJ,aH)}function bw(at){return a2[at]}function cg(){var at=(at=a3.indexOf)===dg?h:at;return at}var ak=!cS?am:function(at,ds){n.value=ds;cS(at,\"__bindData__\",n)};function aT(dt){var ds,at;if(!(dt&&aH.call(dt)==c)||(ds=dt.constructor,aF(ds)&&!(ds instanceof ds))||(!aN.argsClass&&bd(dt))||(!aN.nodeClass&&l(dt))){return false}if(aN.ownLast){ap(dt,function(dw,dv,du){at=a9.call(du,dv);return false});return at!==false}ap(dt,function(dv,du){at=du});return typeof at==\"undefined\"||a9.call(dt,at)}function bx(at){return b6[at]}function bd(at){return at&&typeof at==\"object\"&&typeof at.length==\"number\"&&aH.call(at)==Y||false}if(!aN.argsClass){bd=function(at){return at&&typeof at==\"object\"&&typeof at.length==\"number\"&&a9.call(at,\"callee\")&&!aw.call(at,\"callee\")||false}}var bN=bo||function(at){return at&&typeof at==\"object\"&&typeof at.length==\"number\"&&aH.call(at)==w||false};var bm=a1({args:\"object\",init:\"[]\",top:\"if (!(objectTypes[typeof object])) return result\",loop:\"result.push(index)\"});var cl=!cv?bm:function(at){if(!dq(at)){return[]}if((aN.enumPrototypes&&typeof at==\"function\")||(aN.nonEnumArgs&&at.length&&bd(at))){return bm(at)}return cv(at)};var by={args:\"collection, callback, thisArg\",top:\"callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3)\",array:\"typeof length == 'number'\",keys:cl,loop:\"if (callback(iterable[index], index, collection) === false) return result\"};var cj={args:\"object, source, guard\",top:\"var args = arguments,\\n    argsIndex = 0,\\n    argsLength = typeof guard == 'number' ? 2 : args.length;\\nwhile (++argsIndex < argsLength) {\\n  iterable = args[argsIndex];\\n  if (iterable && objectTypes[typeof iterable]) {\",keys:cl,loop:\"if (typeof result[index] == 'undefined') result[index] = iterable[index]\",bottom:\"  }\\n}\"};var ai={top:\"if (!objectTypes[typeof iterable]) return result;\\n\"+by.top,array:false};var a2={\"&\":\"&amp;\",\"<\":\"&lt;\",\">\":\"&gt;\",'\"':\"&quot;\",\"'\":\"&#39;\"};var b6=ch(a2);var cn=cR(\"(\"+cl(b6).join(\"|\")+\")\",\"g\"),cs=cR(\"[\"+cl(a2).join(\"\")+\"]\",\"g\");var ct=a1(by);var bB=a1(cj,{top:cj.top.replace(\";\",\";\\nif (argsLength > 3 && typeof args[argsLength - 2] == 'function') {\\n  var callback = baseCreateCallback(args[--argsLength - 1], args[argsLength--], 2);\\n} else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {\\n  callback = args[--argsLength];\\n}\"),loop:\"result[index] = callback ? callback(result[index], iterable[index]) : iterable[index]\"});function cN(dt,ds,du,at){if(typeof ds!=\"boolean\"&&ds!=null){at=du;du=ds;ds=false}return br(dt,ds,typeof du==\"function\"&&cG(du,at,1))}function dl(ds,dt,at){return br(ds,true,typeof dt==\"function\"&&cG(dt,at,1))}function aY(ds,dt){var at=cb(ds);return dt?bB(at,dt):at}var bC=a1(cj);function cE(dt,du,ds){var at;du=a3.createCallback(du,ds,3);bZ(dt,function(dx,dw,dv){if(du(dx,dw,dv)){at=dw;return false}});return at}function bY(dt,du,ds){var at;du=a3.createCallback(du,ds,3);dc(dt,function(dx,dw,dv){if(du(dx,dw,dv)){at=dw;return false}});return at}var ap=a1(by,ai,{useHas:false});function cF(ds,dv,at){var du=[];ap(ds,function(dx,dw){du.push(dw,dx)});var dt=du.length;dv=cG(dv,at,3);while(dt--){if(dv(du[dt--],du[dt],ds)===false){break}}return ds}var bZ=a1(by,ai);function dc(ds,dw,at){var du=cl(ds),dv=du.length;dw=cG(dw,at,3);while(dv--){var dt=du[dv];if(dw(ds[dt],dt,ds)===false){break}}return ds}function cT(ds){var at=[];ap(ds,function(du,dt){if(aF(du)){at.push(dt)}});return at.sort()}function c8(at,ds){return at?a9.call(at,ds):false}function ch(dt){var ds=-1,dv=cl(dt),dw=dv.length,at={};while(++ds<dw){var du=dv[ds];at[dt[du]]=du}return at}function bR(at){return at===true||at===false||at&&typeof at==\"object\"&&aH.call(at)==D||false}function bh(at){return at&&typeof at==\"object\"&&aH.call(at)==O||false}function cd(at){return at&&at.nodeType===1||false}function cC(du){var at=true;if(!du){return at}var ds=aH.call(du),dt=du.length;if((ds==w||ds==L||(aN.argsClass?ds==Y:bd(du)))||(ds==c&&typeof dt==\"number\"&&aF(du.splice))){return !dt}bZ(du,function(){return(at=false)});return at}function ce(dt,at,du,ds){return bl(dt,at,typeof du==\"function\"&&cG(du,ds,2))}function aS(at){return aR(at)&&!bO(parseFloat(at))}function aF(at){return typeof at==\"function\"}if(aF(/x/)){aF=function(at){return typeof at==\"function\"&&aH.call(at)==ah}}function dq(at){return !!(at&&H[typeof at])}function b1(at){return bA(at)&&at!=+at}function df(at){return at===null}function bA(at){return typeof at==\"number\"||at&&typeof at==\"object\"&&aH.call(at)==K||false}var aW=!aB?aT:function(dt){if(!(dt&&aH.call(dt)==c)||(!aN.argsClass&&bd(dt))){return false}var at=dt.valueOf,ds=typeof at==\"function\"&&(ds=aB(at))&&aB(ds);return ds?(dt==ds||aB(dt)==ds):aT(dt)};function c2(at){return at&&H[typeof at]&&aH.call(at)==P||false}function cK(at){return typeof at==\"string\"||at&&typeof at==\"object\"&&aH.call(at)==L||false}function b8(at){return typeof at==\"undefined\"}function bT(dv){var du=arguments,dw=2;if(!dq(dv)){return dv}if(typeof du[2]!=\"number\"){dw=du.length}if(dw>3&&typeof du[dw-2]==\"function\"){var dy=cG(du[--dw-1],du[dw--],2)}else{if(dw>2&&typeof du[dw-1]==\"function\"){dy=du[--dw]}}var dt=v(arguments,1,dw),ds=-1,at=d(),dx=d();while(++ds<dw){an(dv,dt[ds],dy,at,dx)}W(at);W(dx);return dv}function cH(du,dy,ds){var at={};if(typeof dy!=\"function\"){var dw=[];ap(du,function(dA,dz){dw.push(dz)});dw=dp(dw,b5(arguments,true,false,1));var dt=-1,dx=dw.length;while(++dt<dx){var dv=dw[dt];at[dv]=du[dv]}}else{dy=a3.createCallback(dy,ds,3);ap(du,function(dB,dA,dz){if(!dy(dB,dA,dz)){at[dA]=dB}})}return at}function bI(dt){var ds=-1,dv=cl(dt),dw=dv.length,at=aO(dw);while(++ds<dw){var du=dv[ds];at[ds]=[du,dt[du]]}return at}function bV(du,dy,ds){var at={};if(typeof dy!=\"function\"){var dt=-1,dw=b5(arguments,true,false,1),dx=dq(du)?dw.length:0;while(++dt<dx){var dv=dw[dt];if(dv in du){at[dv]=du[dv]}}}else{dy=a3.createCallback(dy,ds,3);ap(du,function(dB,dA,dz){if(dy(dB,dA,dz)){at[dA]=dB}})}return at}function c7(dt,dx,ds,at){var dw=bN(dt);if(ds==null){if(dw){ds=[]}else{var dv=dt&&dt.constructor,du=dv&&dv.prototype;ds=cb(du)}}if(dx){dx=a3.createCallback(dx,at,4);(dw?ct:bZ)(dt,function(dA,dz,dy){return dx(ds,dA,dz,dy)})}return ds}function bF(dt){var ds=-1,du=cl(dt),dv=du.length,at=aO(dv);while(++ds<dv){at[ds]=dt[du[ds]]}return at}function cX(dw){var dt=arguments,ds=-1,du=b5(dt,true,false,1),dv=(dt[2]&&dt[2][dt[1]]===dw)?1:du.length,at=aO(dv);if(aN.unindexedChars&&cK(dw)){dw=dw.split(\"\")}while(++ds<dv){at[ds]=dw[du[ds]]}return at}function bc(dx,dw,du){var ds=-1,dt=cg(),dv=dx?dx.length:0,at=false;du=(du<0?cw(0,dv+du):du)||0;if(bN(dx)){at=dt(dx,dw,du)>-1}else{if(typeof dv==\"number\"){at=(cK(dx)?dx.indexOf(dw,du):dt(dx,dw,du))>-1}else{ct(dx,function(dy){if(++ds>=du){return !(at=dy===dw)}})}}return at}var bS=b4(function(at,dt,ds){(a9.call(at,ds)?at[ds]++:at[ds]=1)});function aG(dv,dw,ds){var at=true;dw=a3.createCallback(dw,ds,3);if(bN(dv)){var dt=-1,du=dv.length;while(++dt<du){if(!(at=!!dw(dv[dt],dt,dv))){break}}}else{ct(dv,function(dy,dx,dz){return(at=!!dw(dy,dx,dz))})}return at}function b0(dw,dx,ds){var at=[];dx=a3.createCallback(dx,ds,3);if(bN(dw)){var dt=-1,du=dw.length;while(++dt<du){var dv=dw[dt];if(dx(dv,dt,dw)){at.push(dv)}}}else{ct(dw,function(dz,dy,dA){if(dx(dz,dy,dA)){at.push(dz)}})}return at}function bQ(dw,dx,ds){dx=a3.createCallback(dx,ds,3);if(bN(dw)){var dt=-1,du=dw.length;while(++dt<du){var dv=dw[dt];if(dx(dv,dt,dw)){return dv}}}else{var at;ct(dw,function(dz,dy,dA){if(dx(dz,dy,dA)){at=dz;return false}});return at}}function dj(dt,du,ds){var at;du=a3.createCallback(du,ds,3);aA(dt,function(dw,dv,dx){if(du(dw,dv,dx)){at=dw;return false}});return at}function bK(du,dv,at){if(dv&&typeof at==\"undefined\"&&bN(du)){var ds=-1,dt=du.length;while(++ds<dt){if(dv(du[ds],ds,du)===false){break}}}else{ct(du,dv,at)}return du}function aA(dv,dw,at){var du=dv,dt=dv?dv.length:0;dw=dw&&typeof at==\"undefined\"?dw:cG(dw,at,3);if(bN(dv)){while(dt--){if(dw(dv[dt],dt,dv)===false){break}}}else{if(typeof dt!=\"number\"){var ds=cl(dv);dt=ds.length}else{if(aN.unindexedChars&&cK(dv)){du=dv.split(\"\")}}ct(dv,function(dy,dx,dz){dx=ds?ds[--dt]:--dt;return dw(du[dx],dx,dz)})}return dv}var bz=b4(function(at,dt,ds){(a9.call(at,ds)?at[ds]:at[ds]=[]).push(dt)});var dh=b4(function(at,dt,ds){at[ds]=dt});function aQ(dx,ds){var du=v(arguments,2),dt=-1,dw=typeof ds==\"function\",dv=dx?dx.length:0,at=aO(typeof dv==\"number\"?dv:0);bK(dx,function(dy){at[++dt]=(dw?ds:dy[ds]).apply(dy,du)});return at}function bt(dv,dw,ds){var dt=-1,du=dv?dv.length:0,at=aO(typeof du==\"number\"?du:0);dw=a3.createCallback(dw,ds,3);if(bN(dv)){while(++dt<du){at[dt]=dw(dv[dt],dt,dv)}}else{ct(dv,function(dy,dx,dz){at[++dt]=dw(dy,dx,dz)})}return at}function bq(dx,dy,ds){var dv=-Infinity,at=dv;if(typeof dy!=\"function\"&&ds&&ds[dy]===dx){dy=null}if(dy==null&&bN(dx)){var dt=-1,du=dx.length;while(++dt<du){var dw=dx[dt];if(dw>at){at=dw}}}else{dy=(dy==null&&cK(dx))?r:a3.createCallback(dy,ds,3);ct(dx,function(dA,dz,dC){var dB=dy(dA,dz,dC);if(dB>dv){dv=dB;at=dA}})}return at}function cy(dx,dy,ds){var dv=Infinity,at=dv;if(typeof dy!=\"function\"&&ds&&ds[dy]===dx){dy=null}if(dy==null&&bN(dx)){var dt=-1,du=dx.length;while(++dt<du){var dw=dx[dt];if(dw<at){at=dw}}}else{dy=(dy==null&&cK(dx))?r:a3.createCallback(dy,ds,3);ct(dx,function(dA,dz,dC){var dB=dy(dA,dz,dC);if(dB<dv){dv=dB;at=dA}})}return at}var dk=bt;function cA(dw,dx,ds,at){var du=arguments.length<3;dx=a3.createCallback(dx,at,4);if(bN(dw)){var dt=-1,dv=dw.length;if(du){ds=dw[++dt]}while(++dt<dv){ds=dx(ds,dw[dt],dt,dw)}}else{ct(dw,function(dz,dy,dA){ds=du?(du=false,dz):dx(ds,dz,dy,dA)})}return ds}function c4(du,dv,ds,at){var dt=arguments.length<3;dv=a3.createCallback(dv,at,4);aA(du,function(dx,dw,dy){ds=dt?(dt=false,dx):dv(ds,dx,dw,dy)});return ds}function aI(ds,dt,at){dt=a3.createCallback(dt,at,3);return b0(ds,function(dv,du,dw){return !dt(dv,du,dw)})}function c3(dt,du,ds){if(dt&&typeof dt.length!=\"number\"){dt=bF(dt)}else{if(aN.unindexedChars&&cK(dt)){dt=dt.split(\"\")}}if(du==null||ds){return dt?dt[ay(0,dt.length-1)]:o}var at=bG(dt);at.length=av(cw(0,du),at.length);return at}function bG(du){var ds=-1,dt=du?du.length:0,at=aO(typeof dt==\"number\"?dt:0);bK(du,function(dw){var dv=ay(0,++ds);at[ds]=at[dv];at[dv]=dw});return at}function bg(ds){var at=ds?ds.length:0;return typeof at==\"number\"?at:cl(ds).length}function bf(dv,dw,ds){var at;dw=a3.createCallback(dw,ds,3);if(bN(dv)){var dt=-1,du=dv.length;while(++dt<du){if((at=dw(dv[dt],dt,dv))){break}}}else{ct(dv,function(dy,dx,dz){return !(at=dw(dy,dx,dz))})}return !!at}function bi(dw,dx,ds){var du=-1,dv=dw?dw.length:0,at=aO(typeof dv==\"number\"?dv:0);dx=a3.createCallback(dx,ds,3);bK(dw,function(dA,dz,dB){var dy=at[++du]=t();dy.criteria=dx(dA,dz,dB);dy.index=du;dy.value=dA});dv=at.length;at.sort(ab);while(dv--){var dt=at[dv];at[dv]=dt.value;q(dt)}return at}function aL(at){if(at&&typeof at.length==\"number\"){return(aN.unindexedChars&&cK(at))?at.split(\"\"):v(at)}return bF(at)}var aq=b0;function aX(dv){var ds=-1,dt=dv?dv.length:0,at=[];while(++ds<dt){var du=dv[ds];if(du){at.push(du)}}return at}function aj(at){return dp(at,b5(arguments,true,true,1))}function de(dv,du,at){var ds=-1,dt=dv?dv.length:0;du=a3.createCallback(du,at,3);while(++ds<dt){if(du(dv[ds],ds,dv)){return ds}}return -1}function aU(du,dt,at){var ds=du?du.length:0;dt=a3.createCallback(dt,at,3);while(ds--){if(dt(du[ds],ds,du)){return ds}}return -1}function bp(dw,dv,at){var du=0,dt=dw?dw.length:0;if(typeof dv!=\"number\"&&dv!=null){var ds=-1;dv=a3.createCallback(dv,at,3);while(++ds<dt&&dv(dw[ds],ds,dw)){du++}}else{du=dv;if(du==null||at){return dw?dw[0]:o}}return v(dw,0,av(cw(0,du),dt))}function cM(du,at,dt,ds){if(typeof at!=\"boolean\"&&at!=null){ds=dt;dt=(typeof at!=\"function\"&&ds&&ds[at]===du)?null:at;at=false}if(dt!=null){du=bt(du,dt,ds)}return b5(du,at)}function dg(dv,du,ds){if(typeof ds==\"number\"){var dt=dv?dv.length:0;ds=(ds<0?cw(0,dt+ds):ds||0)}else{if(ds){var at=bj(dv,du);return dv[at]===du?at:-1}}return h(dv,du,ds)}function di(dw,dv,at){var du=0,dt=dw?dw.length:0;if(typeof dv!=\"number\"&&dv!=null){var ds=dt;dv=a3.createCallback(dv,at,3);while(ds--&&dv(dw[ds],ds,dw)){du++}}else{du=(dv==null||at)?1:dv||du}return v(dw,0,av(cw(0,dt-du),dt))}function cJ(dx){var dz=arguments,dv=dz.length,dt=-1,dy=d(),dw=-1,dA=cg(),du=dx?dx.length:0,dC=[],ds=d();while(++dt<dv){var dB=dz[dt];dy[dt]=dA===h&&(dB?dB.length:0)>=b&&ae(dt?dz[dt]:ds)}outer:while(++dw<du){var at=dy[0];dB=dx[dw];if((at?T(at,dB):dA(ds,dB))<0){dt=dv;(at||ds).push(dB);while(--dt){at=dy[dt];if((at?T(at,dB):dA(dz[dt],dB))<0){continue outer}}dC.push(dB)}}while(dv--){at=dy[dv];if(at){q(at)}}W(dy);W(ds);return dC}function bD(dw,dv,at){var du=0,dt=dw?dw.length:0;if(typeof dv!=\"number\"&&dv!=null){var ds=dt;dv=a3.createCallback(dv,at,3);while(ds--&&dv(dw[ds],ds,dw)){du++}}else{du=dv;if(du==null||at){return dw?dw[dt-1]:o}}return v(dw,cw(0,dt-du))}function dr(du,dt,ds){var at=du?du.length:0;if(typeof ds==\"number\"){at=(ds<0?cw(0,at+ds):av(ds,at-1))+1}while(at--){if(du[at]===dt){return at}}return -1}function cm(dx){var dt=arguments,at=0,dv=dt.length,du=dx?dx.length:0;while(++at<dv){var ds=-1,dw=dt[at];while(++ds<du){if(dx[ds]===dw){cz.call(dx,ds--,1);du--}}}return dx}function a6(dw,ds,dv){dw=+dw||0;dv=typeof dv==\"number\"?dv:(+dv||1);if(ds==null){ds=dw;dw=0}var dt=-1,du=cw(0,a5((ds-dw)/(dv||1))),at=aO(du);while(++dt<du){at[dt]=dw;dw+=dv}return at}function aV(dx,dw,ds){var dt=-1,du=dx?dx.length:0,at=[];dw=a3.createCallback(dw,ds,3);while(++dt<du){var dv=dx[dt];if(dw(dv,dt,dx)){at.push(dv);cz.call(dx,dt--,1);du--}}return at}function ck(dw,dv,at){if(typeof dv!=\"number\"&&dv!=null){var du=0,ds=-1,dt=dw?dw.length:0;dv=a3.createCallback(dv,at,3);while(++ds<dt&&dv(dw[ds],ds,dw)){du++}}else{du=(dv==null||at)?1:cw(0,dv)}return v(dw,du)}function bj(dx,dv,dw,ds){var at=0,du=dx?dx.length:at;dw=dw?a3.createCallback(dw,ds,1):bs;dv=dw(dv);while(at<du){var dt=(at+du)>>>1;(dw(dx[dt])<dv)?at=dt+1:du=dt}return at}function aC(at){return al(b5(arguments,true,true))}function b2(du,dt,ds,at){if(typeof dt!=\"boolean\"&&dt!=null){at=ds;ds=(typeof dt!=\"function\"&&at&&at[dt]===du)?null:dt;dt=false}if(ds!=null){ds=a3.createCallback(ds,at,3)}return al(du,dt,ds)}function db(at){return dp(at,v(arguments,1))}function ax(){var du=arguments.length>1?arguments:arguments[0],ds=-1,dt=du?bq(dk(du,\"length\")):0,at=aO(dt<0?0:dt);while(++ds<dt){at[ds]=dk(du,ds)}return at}function cO(dw,ds){var dt=-1,dv=dw?dw.length:0,at={};while(++dt<dv){var du=dw[dt];if(ds){at[du]=ds[dt]}else{if(du){at[du[0]]=du[1]}}}return at}function a0(ds,at){if(!aF(at)){throw new aP}return function(){if(--ds<1){return at.apply(this,arguments)}}}function ca(ds,at){return arguments.length>2?cW(ds,17,v(arguments,2),null,at):cW(ds,1,null,null,at)}function bE(dt){var at=arguments.length>1?b5(arguments,true,false,1):cT(dt),ds=-1,dv=at.length;while(++ds<dv){var du=at[ds];dt[du]=cW(dt[du],1,null,null,dt)}return dt}function c1(at,ds){return arguments.length>2?cW(ds,19,v(arguments,2),null,at):cW(ds,3,null,null,at)}function cQ(){var at=arguments,ds=at.length;while(ds--){if(!aF(at[ds])){throw new aP}}return function(){var dt=arguments,du=at.length;while(du--){dt=[at[du].apply(this,dt)]}return dt[0]}}function aM(dw,ds,dx){var dv=typeof dw;if(dw==null||dv==\"function\"){return cG(dw,ds,dx)}if(dv!=\"object\"){return function(dy){return dy[dw]}}var du=cl(dw),dt=du[0],at=dw[dt];if(du.length==1&&at===at&&!dq(at)){return function(dz){var dy=dz[dt];return at===dy&&(at!==0||(1/at==1/dy))}}return function(dz){var dA=du.length,dy=false;while(dA--){if(!(dy=bl(dz[du[dA]],dw[du[dA]],null,true))){break}}return dy}}function cZ(at,ds){ds=typeof ds==\"number\"?ds:(+ds||at.length);return cW(at,4,null,null,null,ds)}function cP(du,dz,dF){var dB,dx,dG,at,dD,dE,dC,dy=0,dw=false,dA=true;if(!aF(du)){throw new aP}dz=cw(0,dz)||0;if(dF===true){var dt=true;dA=false}else{if(dq(dF)){dt=dF.leading;dw=\"maxWait\" in dF&&(cw(dz,dF.maxWait)||0);dA=\"trailing\" in dF?dF.trailing:dA}}var dv=function(){var dI=dz-(cr()-at);if(dI<=0){if(dx){b3(dx)}var dH=dC;dx=dE=dC=o;if(dH){dy=cr();dG=du.apply(dD,dB);if(!dE&&!dx){dB=dD=null}}}else{dE=a7(dv,dI)}};var ds=function(){if(dE){b3(dE)}dx=dE=dC=o;if(dA||(dw!==dz)){dy=cr();dG=du.apply(dD,dB);if(!dE&&!dx){dB=dD=null}}};return function(){dB=arguments;at=cr();dD=this;dC=dA&&(dE||!dt);if(dw===false){var dH=dt&&!dE}else{if(!dx&&!dt){dy=at}var dJ=dw-(at-dy),dI=dJ<=0;if(dI){if(dx){dx=b3(dx)}dy=at;dG=du.apply(dD,dB)}else{if(!dx){dx=a7(ds,dJ)}}}if(dI&&dE){dE=b3(dE)}else{if(!dE&&dz!==dw){dE=a7(dv,dz)}}if(dH){dI=true;dG=du.apply(dD,dB)}if(dI&&!dE&&!dx){dB=dD=null}return dG}}function ba(ds){if(!aF(ds)){throw new aP}var at=v(arguments,1);return a7(function(){ds.apply(o,at)},1)}if(b9){ba=function(at){if(!aF(at)){throw new aP}return b9.apply(ao,arguments)}}function bX(ds,dt){if(!aF(ds)){throw new aP}var at=v(arguments,2);return a7(function(){ds.apply(o,at)},dt)}function bb(ds,dt){if(!aF(ds)){throw new aP}var at=function(){var du=at.cache,dv=dt?dt.apply(this,arguments):a+arguments[0];return a9.call(du,dv)?du[dv]:(du[dv]=ds.apply(this,arguments))};at.cache={};return at}function cI(dt){var ds,at;if(!aF(dt)){throw new aP}return function(){if(ds){return at}ds=true;at=dt.apply(this,arguments);dt=null;return at}}function c5(at){return cW(at,16,v(arguments,1))}function cD(at){return cW(at,32,null,v(arguments,1))}function cx(ds,dt,at){var dv=true,du=true;if(!aF(ds)){throw new aP}if(at===false){dv=false}else{if(dq(at)){dv=\"leading\" in at?at.leading:dv;du=\"trailing\" in at?at.trailing:du}}S.leading=dv;S.maxWait=dt;S.trailing=du;return cP(ds,dt,S)}function b7(at,ds){return cW(ds,16,[at])}function bk(at){return at==null?\"\":cB(at).replace(cs,bw)}function bs(at){return at}function aK(at,du){var ds=at,dt=!du||aF(ds);if(!du){ds=c0;du=at;at=a3}bK(cT(du),function(dv){var dw=at[dv]=du[dv];if(dt){ds.prototype[dv]=function(){var dz=this.__wrapped__,dy=[dz];aE.apply(dy,arguments);var dx=dw.apply(at,dy);if(dz&&typeof dz==\"object\"&&dz===dx){return this}dx=new ds(dx);dx.__chain__=this.__chain__;return dx}}})}function da(){ao._=c6;return this}function am(){}var dn=dm(J+\"08\")==8?dm:function(ds,at){return dm(cK(ds)?ds.replace(ac,\"\"):ds,at||0)};function co(dt,at,dw){var dv=dt==null,ds=at==null;if(dw==null){if(typeof dt==\"boolean\"&&ds){dw=dt;dt=1}else{if(!ds&&typeof at==\"boolean\"){dw=at;ds=true}}}if(dv&&ds){at=1}dt=+dt||0;if(ds){at=dt;dt=0}else{at=+at||0}if(dw||dt%1||at%1){var du=bU();return av(dt+(du*(at-dt+parseFloat(\"1e-\"+((du+\"\").length-1)))),at)}return ay(dt,at)}function aZ(at,dt){if(at){var ds=at[dt];return aF(ds)?at[dt]():ds}}function bP(dE,dy,dH){var dv=a3.templateSettings;dE=cB(dE||\"\");dH=bC({},dH,dv);var dt=bC({},dH.imports,dv.imports),dz=cl(dt),du=bF(dt);var dD,dA=0,dC=dH.interpolate||V,ds=\"__p += '\";var dG=cR((dH.escape||V).source+\"|\"+dC.source+\"|\"+(dC===p?C:V).source+\"|\"+(dH.evaluate||V).source+\"|$\",\"g\");dE.replace(dG,function(dI,dM,dK,dJ,dL,dN){dK||(dK=dJ);ds+=dE.slice(dA,dN).replace(Z,f);if(dM){ds+=\"' +\\n__e(\"+dM+\") +\\n'\"}if(dL){dD=true;ds+=\"';\\n\"+dL+\";\\n__p += '\"}if(dK){ds+=\"' +\\n((__t = (\"+dK+\")) == null ? '' : __t) +\\n'\"}dA=dN+dI.length;return dI});ds+=\"';\\n\";var dw=dH.variable,dx=dw;if(!dx){dw=\"obj\";ds=\"with (\"+dw+\") {\\n\"+ds+\"\\n}\\n\"}ds=(dD?ds.replace(z,\"\"):ds).replace(X,\"$1\").replace(e,\"$1;\");ds=\"function(\"+dw+\") {\\n\"+(dx?\"\":dw+\" || (\"+dw+\" = {});\\n\")+\"var __t, __p = '', __e = _.escape\"+(dD?\", __j = Array.prototype.join;\\nfunction print() { __p += __j.call(arguments, '') }\\n\":\";\\n\")+ds+\"return __p\\n}\";var at=\"\\n/*\\n//# sourceURL=\"+(dH.sourceURL||\"/lodash/template/source[\"+(af++)+\"]\")+\"\\n*/\";try{var dF=a8(dz,\"return \"+ds+at).apply(o,du)}catch(dB){dB.source=ds;throw dB}if(dy){return dF(dy)}dF.source=ds;return dF}function ar(dv,du,ds){dv=(dv=+dv)>-1?dv:0;var dt=-1,at=aO(dv);du=cG(du,ds,1);while(++dt<dv){at[dt]=du(dt)}return at}function au(at){return at==null?\"\":cB(at).replace(cn,bx)}function cu(at){var ds=++M;return cB(at==null?\"\":at)+ds}function bH(at){at=new c0(at);at.__chain__=true;return at}function cL(at,ds){ds(at);return at}function bJ(){this.__chain__=true;return this}function bv(){return cB(this.__wrapped__)}function a4(){return this.__wrapped__}a3.after=a0;a3.assign=bB;a3.at=cX;a3.bind=ca;a3.bindAll=bE;a3.bindKey=c1;a3.chain=bH;a3.compact=aX;a3.compose=cQ;a3.countBy=bS;a3.create=aY;a3.createCallback=aM;a3.curry=cZ;a3.debounce=cP;a3.defaults=bC;a3.defer=ba;a3.delay=bX;a3.difference=aj;a3.filter=b0;a3.flatten=cM;a3.forEach=bK;a3.forEachRight=aA;a3.forIn=ap;a3.forInRight=cF;a3.forOwn=bZ;a3.forOwnRight=dc;a3.functions=cT;a3.groupBy=bz;a3.indexBy=dh;a3.initial=di;a3.intersection=cJ;a3.invert=ch;a3.invoke=aQ;a3.keys=cl;a3.map=bt;a3.max=bq;a3.memoize=bb;a3.merge=bT;a3.min=cy;a3.omit=cH;a3.once=cI;a3.pairs=bI;a3.partial=c5;a3.partialRight=cD;a3.pick=bV;a3.pluck=dk;a3.pull=cm;a3.range=a6;a3.reject=aI;a3.remove=aV;a3.rest=ck;a3.shuffle=bG;a3.sortBy=bi;a3.tap=cL;a3.throttle=cx;a3.times=ar;a3.toArray=aL;a3.transform=c7;a3.union=aC;a3.uniq=b2;a3.values=bF;a3.where=aq;a3.without=db;a3.wrap=b7;a3.zip=ax;a3.zipObject=cO;a3.collect=bt;a3.drop=ck;a3.each=bK;a3.eachRight=aA;a3.extend=bB;a3.methods=cT;a3.object=cO;a3.select=b0;a3.tail=ck;a3.unique=b2;a3.unzip=ax;aK(a3);a3.clone=cN;a3.cloneDeep=dl;a3.contains=bc;a3.escape=bk;a3.every=aG;a3.find=bQ;a3.findIndex=de;a3.findKey=cE;a3.findLast=dj;a3.findLastIndex=aU;a3.findLastKey=bY;a3.has=c8;a3.identity=bs;a3.indexOf=dg;a3.isArguments=bd;a3.isArray=bN;a3.isBoolean=bR;a3.isDate=bh;a3.isElement=cd;a3.isEmpty=cC;a3.isEqual=ce;a3.isFinite=aS;a3.isFunction=aF;a3.isNaN=b1;a3.isNull=df;a3.isNumber=bA;a3.isObject=dq;a3.isPlainObject=aW;a3.isRegExp=c2;a3.isString=cK;a3.isUndefined=b8;a3.lastIndexOf=dr;a3.mixin=aK;a3.noConflict=da;a3.noop=am;a3.parseInt=dn;a3.random=co;a3.reduce=cA;a3.reduceRight=c4;a3.result=aZ;a3.runInContext=ad;a3.size=bg;a3.some=bf;a3.sortedIndex=bj;a3.template=bP;a3.unescape=au;a3.uniqueId=cu;a3.all=aG;a3.any=bf;a3.detect=bQ;a3.findWhere=bQ;a3.foldl=cA;a3.foldr=c4;a3.include=bc;a3.inject=cA;bZ(a3,function(ds,at){if(!a3.prototype[at]){a3.prototype[at]=function(){var dv=[this.__wrapped__],du=this.__chain__;aE.apply(dv,arguments);var dt=ds.apply(a3,dv);return du?new c0(dt,du):dt}}});a3.first=bp;a3.last=bD;a3.sample=c3;a3.take=bp;a3.head=bp;bZ(a3,function(dt,ds){var at=ds!==\"sample\";if(!a3.prototype[ds]){a3.prototype[ds]=function(dx,dw){var dv=this.__chain__,du=dt(this.__wrapped__,dx,dw);return !dv&&(dx==null||(dw&&!(at&&typeof dx==\"function\")))?du:new c0(du,dv)}}});a3.VERSION=\"2.3.0\";a3.prototype.chain=bJ;a3.prototype.toString=bv;a3.prototype.value=a4;a3.prototype.valueOf=a4;ct([\"join\",\"pop\",\"shift\"],function(at){var ds=ci[at];a3.prototype[at]=function(){var du=this.__chain__,dt=ds.apply(this.__wrapped__,arguments);return du?new c0(dt,du):dt}});ct([\"push\",\"reverse\",\"sort\",\"unshift\"],function(at){var ds=ci[at];a3.prototype[at]=function(){ds.apply(this.__wrapped__,arguments);return this}});ct([\"concat\",\"slice\",\"splice\"],function(at){var ds=ci[at];a3.prototype[at]=function(){return new c0(ds.apply(this.__wrapped__,arguments),this.__chain__)}});if(!aN.spliceObjects){ct([\"pop\",\"shift\",\"splice\"],function(at){var ds=ci[at],dt=at==\"splice\";a3.prototype[at]=function(){var dv=this.__chain__,dw=this.__wrapped__,du=ds.apply(dw,arguments);if(dw.length===0){delete dw[0]}return(dv||dt)?new c0(du,dv):du}})}return a3}var ag=ad();if(typeof define==\"function\"&&typeof define.amd==\"object\"&&define.amd){E._=ag;define(function(){return ag})}else{if(aa&&B){if(U){(B.exports=ag)._=ag}else{aa._=ag}}else{E._=ag}}}.call(this));\n(function(){var v=this;var C=v.Backbone;var g=[];var E=g.push;var o=g.slice;var u=g.splice;var A;if(typeof exports!==\"undefined\"){A=exports}else{A=v.Backbone={}}A.VERSION=\"1.1.0\";var M=v._;if(!M&&(typeof require!==\"undefined\")){M=require(\"underscore\")}A.$=v.jQuery||v.Zepto||v.ender||v.$;A.noConflict=function(){v.Backbone=C;return this};A.emulateHTTP=false;A.emulateJSON=false;var K=A.Events={on:function(N,Q,P){if(!y(this,\"on\",N,[Q,P])||!Q){return this}this._events||(this._events={});var O=this._events[N]||(this._events[N]=[]);O.push({callback:Q,context:P,ctx:P||this});return this},once:function(O,R,P){if(!y(this,\"once\",O,[R,P])||!R){return this}var N=this;var Q=M.once(function(){N.off(O,Q);R.apply(this,arguments)});Q._callback=R;return this.on(O,Q,P)},off:function(N,W,O){var U,V,X,T,S,P,R,Q;if(!this._events||!y(this,\"off\",N,[W,O])){return this}if(!N&&!W&&!O){this._events={};return this}T=N?[N]:M.keys(this._events);for(S=0,P=T.length;S<P;S++){N=T[S];if(X=this._events[N]){this._events[N]=U=[];if(W||O){for(R=0,Q=X.length;R<Q;R++){V=X[R];if((W&&W!==V.callback&&W!==V.callback._callback)||(O&&O!==V.context)){U.push(V)}}}if(!U.length){delete this._events[N]}}}return this},trigger:function(P){if(!this._events){return this}var O=o.call(arguments,1);if(!y(this,\"trigger\",P,O)){return this}var Q=this._events[P];var N=this._events.all;if(Q){b(Q,O)}if(N){b(N,arguments)}return this},stopListening:function(Q,O,S){var P=this._listeningTo;if(!P){return this}var N=!O&&!S;if(!S&&typeof O===\"object\"){S=this}if(Q){(P={})[Q._listenId]=Q}for(var R in P){Q=P[R];Q.off(O,S,this);if(N||M.isEmpty(Q._events)){delete this._listeningTo[R]}}return this}};var x=/\\s+/;var y=function(U,S,O,R){if(!O){return true}if(typeof O===\"object\"){for(var Q in O){U[S].apply(U,[Q,O[Q]].concat(R))}return false}if(x.test(O)){var T=O.split(x);for(var P=0,N=T.length;P<N;P++){U[S].apply(U,[T[P]].concat(R))}return false}return true};var b=function(S,Q){var T,R=-1,P=S.length,O=Q[0],N=Q[1],U=Q[2];switch(Q.length){case 0:while(++R<P){(T=S[R]).callback.call(T.ctx)}return;case 1:while(++R<P){(T=S[R]).callback.call(T.ctx,O)}return;case 2:while(++R<P){(T=S[R]).callback.call(T.ctx,O,N)}return;case 3:while(++R<P){(T=S[R]).callback.call(T.ctx,O,N,U)}return;default:while(++R<P){(T=S[R]).callback.apply(T.ctx,Q)}}};var D={listenTo:\"on\",listenToOnce:\"once\"};M.each(D,function(N,O){K[O]=function(R,P,T){var Q=this._listeningTo||(this._listeningTo={});var S=R._listenId||(R._listenId=M.uniqueId(\"l\"));Q[S]=R;if(!T&&typeof P===\"object\"){T=this}R[N](P,T,this);return this}});K.bind=K.on;K.unbind=K.off;M.extend(A,K);var F=A.Model=function(N,P){var O=N||{};P||(P={});this.cid=M.uniqueId(\"c\");this.attributes={};if(P.collection){this.collection=P.collection}if(P.parse){O=this.parse(O,P)||{}}O=M.defaults({},O,M.result(this,\"defaults\"));this.set(O,P);this.changed={};this.initialize.apply(this,arguments)};M.extend(F.prototype,K,{changed:null,validationError:null,idAttribute:\"id\",initialize:function(){},toJSON:function(N){return M.clone(this.attributes)},sync:function(){return A.sync.apply(this,arguments)},get:function(N){return this.attributes[N]},escape:function(N){return M.escape(this.get(N))},has:function(N){return this.get(N)!=null},set:function(V,N,Z){var T,W,X,U,S,Y,P,R;if(V==null){return this}if(typeof V===\"object\"){W=V;Z=N}else{(W={})[V]=N}Z||(Z={});if(!this._validate(W,Z)){return false}X=Z.unset;S=Z.silent;U=[];Y=this._changing;this._changing=true;if(!Y){this._previousAttributes=M.clone(this.attributes);this.changed={}}R=this.attributes,P=this._previousAttributes;if(this.idAttribute in W){this.id=W[this.idAttribute]}for(T in W){N=W[T];if(!M.isEqual(R[T],N)){U.push(T)}if(!M.isEqual(P[T],N)){this.changed[T]=N}else{delete this.changed[T]}X?delete R[T]:R[T]=N}if(!S){if(U.length){this._pending=true}for(var Q=0,O=U.length;Q<O;Q++){this.trigger(\"change:\"+U[Q],this,R[U[Q]],Z)}}if(Y){return this}if(!S){while(this._pending){this._pending=false;this.trigger(\"change\",this,Z)}}this._pending=false;this._changing=false;return this},unset:function(N,O){return this.set(N,void 0,M.extend({},O,{unset:true}))},clear:function(O){var N={};for(var P in this.attributes){N[P]=void 0}return this.set(N,M.extend({},O,{unset:true}))},hasChanged:function(N){if(N==null){return !M.isEmpty(this.changed)}return M.has(this.changed,N)},changedAttributes:function(P){if(!P){return this.hasChanged()?M.clone(this.changed):false}var R,Q=false;var O=this._changing?this._previousAttributes:this.attributes;for(var N in P){if(M.isEqual(O[N],(R=P[N]))){continue}(Q||(Q={}))[N]=R}return Q},previous:function(N){if(N==null||!this._previousAttributes){return null}return this._previousAttributes[N]},previousAttributes:function(){return M.clone(this._previousAttributes)},fetch:function(O){O=O?M.clone(O):{};if(O.parse===void 0){O.parse=true}var N=this;var P=O.success;O.success=function(Q){if(!N.set(N.parse(Q,O),O)){return false}if(P){P(N,Q,O)}N.trigger(\"sync\",N,Q,O)};I(this,O);return this.sync(\"read\",this,O)},save:function(R,O,V){var S,N,U,P=this.attributes;if(R==null||typeof R===\"object\"){S=R;V=O}else{(S={})[R]=O}V=M.extend({validate:true},V);if(S&&!V.wait){if(!this.set(S,V)){return false}}else{if(!this._validate(S,V)){return false}}if(S&&V.wait){this.attributes=M.extend({},P,S)}if(V.parse===void 0){V.parse=true}var Q=this;var T=V.success;V.success=function(X){Q.attributes=P;var W=Q.parse(X,V);if(V.wait){W=M.extend(S||{},W)}if(M.isObject(W)&&!Q.set(W,V)){return false}if(T){T(Q,X,V)}Q.trigger(\"sync\",Q,X,V)};I(this,V);N=this.isNew()?\"create\":(V.patch?\"patch\":\"update\");if(N===\"patch\"){V.attrs=S}U=this.sync(N,this,V);if(S&&V.wait){this.attributes=P}return U},destroy:function(O){O=O?M.clone(O):{};var N=this;var R=O.success;var P=function(){N.trigger(\"destroy\",N,N.collection,O)};O.success=function(S){if(O.wait||N.isNew()){P()}if(R){R(N,S,O)}if(!N.isNew()){N.trigger(\"sync\",N,S,O)}};if(this.isNew()){O.success();return false}I(this,O);var Q=this.sync(\"delete\",this,O);if(!O.wait){P()}return Q},url:function(){var N=M.result(this,\"urlRoot\")||M.result(this.collection,\"url\")||s();if(this.isNew()){return N}return N+(N.charAt(N.length-1)===\"/\"?\"\":\"/\")+encodeURIComponent(this.id)},parse:function(O,N){return O},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(N){return this._validate({},M.extend(N||{},{validate:true}))},_validate:function(P,O){if(!O.validate||!this.validate){return true}P=M.extend({},this.attributes,P);var N=this.validationError=this.validate(P,O)||null;if(!N){return true}this.trigger(\"invalid\",this,N,M.extend(O,{validationError:N}));return false}});var a=[\"keys\",\"values\",\"pairs\",\"invert\",\"pick\",\"omit\"];M.each(a,function(N){F.prototype[N]=function(){var O=o.call(arguments);O.unshift(this.attributes);return M[N].apply(M,O)}});var c=A.Collection=function(O,N){N||(N={});if(N.model){this.model=N.model}if(N.comparator!==void 0){this.comparator=N.comparator}this._reset();this.initialize.apply(this,arguments);if(O){this.reset(O,M.extend({silent:true},N))}};var p={add:true,remove:true,merge:true};var L={add:true,remove:false};M.extend(c.prototype,K,{model:F,initialize:function(){},toJSON:function(N){return this.map(function(O){return O.toJSON(N)})},sync:function(){return A.sync.apply(this,arguments)},add:function(O,N){return this.set(O,M.extend({merge:false},N,L))},remove:function(T,Q){var S=!M.isArray(T);T=S?[T]:M.clone(T);Q||(Q={});var R,N,P,O;for(R=0,N=T.length;R<N;R++){O=T[R]=this.get(T[R]);if(!O){continue}delete this._byId[O.id];delete this._byId[O.cid];P=this.indexOf(O);this.models.splice(P,1);this.length--;if(!Q.silent){Q.index=P;O.trigger(\"remove\",O,this,Q)}this._removeReference(O)}return S?T[0]:T},set:function(ag,O){O=M.defaults({},O,p);if(O.parse){ag=this.parse(ag,O)}var R=!M.isArray(ag);ag=R?(ag?[ag]:[]):M.clone(ag);var ac,aa,W,P,Y,V,af;var T=O.at;var ae=this.model;var N=this.comparator&&(T==null)&&O.sort!==false;var ad=M.isString(this.comparator)?this.comparator:null;var ai=[],Z=[],X={};var U=O.add,Q=O.merge,ah=O.remove;var ab=!N&&U&&ah?[]:false;for(ac=0,aa=ag.length;ac<aa;ac++){Y=ag[ac];if(Y instanceof F){W=P=Y}else{W=Y[ae.prototype.idAttribute]}if(V=this.get(W)){if(ah){X[V.cid]=true}if(Q){Y=Y===P?P.attributes:Y;if(O.parse){Y=V.parse(Y,O)}V.set(Y,O);if(N&&!af&&V.hasChanged(ad)){af=true}}ag[ac]=V}else{if(U){P=ag[ac]=this._prepareModel(Y,O);if(!P){continue}ai.push(P);P.on(\"all\",this._onModelEvent,this);this._byId[P.cid]=P;if(P.id!=null){this._byId[P.id]=P}}}if(ab){ab.push(V||P)}}if(ah){for(ac=0,aa=this.length;ac<aa;++ac){if(!X[(P=this.models[ac]).cid]){Z.push(P)}}if(Z.length){this.remove(Z,O)}}if(ai.length||(ab&&ab.length)){if(N){af=true}this.length+=ai.length;if(T!=null){for(ac=0,aa=ai.length;ac<aa;ac++){this.models.splice(T+ac,0,ai[ac])}}else{if(ab){this.models.length=0}var S=ab||ai;for(ac=0,aa=S.length;ac<aa;ac++){this.models.push(S[ac])}}}if(af){this.sort({silent:true})}if(!O.silent){for(ac=0,aa=ai.length;ac<aa;ac++){(P=ai[ac]).trigger(\"add\",P,this,O)}if(af||(ab&&ab.length)){this.trigger(\"sort\",this,O)}}return R?ag[0]:ag},reset:function(Q,O){O||(O={});for(var P=0,N=this.models.length;P<N;P++){this._removeReference(this.models[P])}O.previousModels=this.models;this._reset();Q=this.add(Q,M.extend({silent:true},O));if(!O.silent){this.trigger(\"reset\",this,O)}return Q},push:function(O,N){return this.add(O,M.extend({at:this.length},N))},pop:function(O){var N=this.at(this.length-1);this.remove(N,O);return N},unshift:function(O,N){return this.add(O,M.extend({at:0},N))},shift:function(O){var N=this.at(0);this.remove(N,O);return N},slice:function(){return o.apply(this.models,arguments)},get:function(N){if(N==null){return void 0}return this._byId[N.id]||this._byId[N.cid]||this._byId[N]},at:function(N){return this.models[N]},where:function(N,O){if(M.isEmpty(N)){return O?void 0:[]}return this[O?\"find\":\"filter\"](function(P){for(var Q in N){if(N[Q]!==P.get(Q)){return false}}return true})},findWhere:function(N){return this.where(N,true)},sort:function(N){if(!this.comparator){throw new Error(\"Cannot sort a set without a comparator\")}N||(N={});if(M.isString(this.comparator)||this.comparator.length===1){this.models=this.sortBy(this.comparator,this)}else{this.models.sort(M.bind(this.comparator,this))}if(!N.silent){this.trigger(\"sort\",this,N)}return this},pluck:function(N){return M.invoke(this.models,\"get\",N)},fetch:function(N){N=N?M.clone(N):{};if(N.parse===void 0){N.parse=true}var P=N.success;var O=this;N.success=function(Q){var R=N.reset?\"reset\":\"set\";O[R](Q,N);if(P){P(O,Q,N)}O.trigger(\"sync\",O,Q,N)};I(this,N);return this.sync(\"read\",this,N)},create:function(O,N){N=N?M.clone(N):{};if(!(O=this._prepareModel(O,N))){return false}if(!N.wait){this.add(O,N)}var Q=this;var P=N.success;N.success=function(S,T,R){if(R.wait){Q.add(S,R)}if(P){P(S,T,R)}};O.save(null,N);return O},parse:function(O,N){return O},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(P,O){if(P instanceof F){if(!P.collection){P.collection=this}return P}O=O?M.clone(O):{};O.collection=this;var N=new this.model(P,O);if(!N.validationError){return N}this.trigger(\"invalid\",this,N.validationError,O);return false},_removeReference:function(N){if(this===N.collection){delete N.collection}N.off(\"all\",this._onModelEvent,this)},_onModelEvent:function(P,O,Q,N){if((P===\"add\"||P===\"remove\")&&Q!==this){return}if(P===\"destroy\"){this.remove(O,N)}if(O&&P===\"change:\"+O.idAttribute){delete this._byId[O.previous(O.idAttribute)];if(O.id!=null){this._byId[O.id]=O}}this.trigger.apply(this,arguments)}});var z=[\"forEach\",\"each\",\"map\",\"collect\",\"reduce\",\"foldl\",\"inject\",\"reduceRight\",\"foldr\",\"find\",\"detect\",\"filter\",\"select\",\"reject\",\"every\",\"all\",\"some\",\"any\",\"include\",\"contains\",\"invoke\",\"max\",\"min\",\"toArray\",\"size\",\"first\",\"head\",\"take\",\"initial\",\"rest\",\"tail\",\"drop\",\"last\",\"without\",\"difference\",\"indexOf\",\"shuffle\",\"lastIndexOf\",\"isEmpty\",\"chain\"];M.each(z,function(N){c.prototype[N]=function(){var O=o.call(arguments);O.unshift(this.models);return M[N].apply(M,O)}});var l=[\"groupBy\",\"countBy\",\"sortBy\"];M.each(l,function(N){c.prototype[N]=function(Q,O){var P=M.isFunction(Q)?Q:function(R){return R.get(Q)};return M[N](this.models,P,O)}});var H=A.View=function(N){this.cid=M.uniqueId(\"view\");N||(N={});M.extend(this,M.pick(N,e));this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()};var w=/^(\\S+)\\s*(.*)$/;var e=[\"model\",\"collection\",\"el\",\"id\",\"attributes\",\"className\",\"tagName\",\"events\"];M.extend(H.prototype,K,{tagName:\"div\",$:function(N){return this.$el.find(N)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();this.stopListening();return this},setElement:function(N,O){if(this.$el){this.undelegateEvents()}this.$el=N instanceof A.$?N:A.$(N);this.el=this.$el[0];if(O!==false){this.delegateEvents()}return this},delegateEvents:function(R){if(!(R||(R=M.result(this,\"events\")))){return this}this.undelegateEvents();for(var Q in R){var S=R[Q];if(!M.isFunction(S)){S=this[R[Q]]}if(!S){continue}var P=Q.match(w);var O=P[1],N=P[2];S=M.bind(S,this);O+=\".delegateEvents\"+this.cid;if(N===\"\"){this.$el.on(O,S)}else{this.$el.on(O,N,S)}}return this},undelegateEvents:function(){this.$el.off(\".delegateEvents\"+this.cid);return this},_ensureElement:function(){if(!this.el){var N=M.extend({},M.result(this,\"attributes\"));if(this.id){N.id=M.result(this,\"id\")}if(this.className){N[\"class\"]=M.result(this,\"className\")}var O=A.$(\"<\"+M.result(this,\"tagName\")+\">\").attr(N);this.setElement(O,false)}else{this.setElement(M.result(this,\"el\"),false)}}});A.sync=function(T,O,N){var Q=k[T];M.defaults(N||(N={}),{emulateHTTP:A.emulateHTTP,emulateJSON:A.emulateJSON});var S={type:Q,dataType:\"json\"};if(!N.url){S.url=M.result(O,\"url\")||s()}if(N.data==null&&O&&(T===\"create\"||T===\"update\"||T===\"patch\")){S.contentType=\"application/json\";S.data=JSON.stringify(N.attrs||O.toJSON(N))}if(N.emulateJSON){S.contentType=\"application/x-www-form-urlencoded\";S.data=S.data?{model:S.data}:{}}if(N.emulateHTTP&&(Q===\"PUT\"||Q===\"DELETE\"||Q===\"PATCH\")){S.type=\"POST\";if(N.emulateJSON){S.data._method=Q}var P=N.beforeSend;N.beforeSend=function(U){U.setRequestHeader(\"X-HTTP-Method-Override\",Q);if(P){return P.apply(this,arguments)}}}if(S.type!==\"GET\"&&!N.emulateJSON){S.processData=false}if(S.type===\"PATCH\"&&j){S.xhr=function(){return new ActiveXObject(\"Microsoft.XMLHTTP\")}}var R=N.xhr=A.ajax(M.extend(S,N));O.trigger(\"request\",O,R,N);return R};var j=typeof window!==\"undefined\"&&!!window.ActiveXObject&&!(window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent);var k={create:\"POST\",update:\"PUT\",patch:\"PATCH\",\"delete\":\"DELETE\",read:\"GET\"};A.ajax=function(){return A.$.ajax.apply(A.$,arguments)};var q=A.Router=function(N){N||(N={});if(N.routes){this.routes=N.routes}this._bindRoutes();this.initialize.apply(this,arguments)};var r=/\\((.*?)\\)/g;var t=/(\\(\\?)?:\\w+/g;var d=/\\*\\w+/g;var h=/[\\-{}\\[\\]+?.,\\\\\\^$|#\\s]/g;M.extend(q.prototype,K,{initialize:function(){},route:function(O,P,Q){if(!M.isRegExp(O)){O=this._routeToRegExp(O)}if(M.isFunction(P)){Q=P;P=\"\"}if(!Q){Q=this[P]}var N=this;A.history.route(O,function(S){var R=N._extractParameters(O,S);Q&&Q.apply(N,R);N.trigger.apply(N,[\"route:\"+P].concat(R));N.trigger(\"route\",P,R);A.history.trigger(\"route\",N,P,R)});return this},navigate:function(O,N){A.history.navigate(O,N);return this},_bindRoutes:function(){if(!this.routes){return}this.routes=M.result(this,\"routes\");var O,N=M.keys(this.routes);while((O=N.pop())!=null){this.route(O,this.routes[O])}},_routeToRegExp:function(N){N=N.replace(h,\"\\\\$&\").replace(r,\"(?:$1)?\").replace(t,function(P,O){return O?P:\"([^/]+)\"}).replace(d,\"(.*?)\");return new RegExp(\"^\"+N+\"$\")},_extractParameters:function(N,O){var P=N.exec(O).slice(1);return M.map(P,function(Q){return Q?decodeURIComponent(Q):null})}});var i=A.History=function(){this.handlers=[];M.bindAll(this,\"checkUrl\");if(typeof window!==\"undefined\"){this.location=window.location;this.history=window.history}};var B=/^[#\\/]|\\s+$/g;var f=/^\\/+|\\/+$/g;var J=/msie [\\w.]+/;var n=/\\/$/;var G=/[?#].*$/;i.started=false;M.extend(i.prototype,K,{interval:50,getHash:function(O){var N=(O||this).location.href.match(/#(.*)$/);return N?N[1]:\"\"},getFragment:function(P,O){if(P==null){if(this._hasPushState||!this._wantsHashChange||O){P=this.location.pathname;var N=this.root.replace(n,\"\");if(!P.indexOf(N)){P=P.slice(N.length)}}else{P=this.getHash()}}return P.replace(B,\"\")},start:function(P){if(i.started){throw new Error(\"Backbone.history has already been started\")}i.started=true;this.options=M.extend({root:\"/\"},this.options,P);this.root=this.options.root;this._wantsHashChange=this.options.hashChange!==false;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var O=this.getFragment();var N=document.documentMode;var R=(J.exec(navigator.userAgent.toLowerCase())&&(!N||N<=7));this.root=(\"/\"+this.root+\"/\").replace(f,\"/\");if(R&&this._wantsHashChange){this.iframe=A.$('<iframe src=\"javascript:0\" tabindex=\"-1\" />').hide().appendTo(\"body\")[0].contentWindow;this.navigate(O)}if(this._hasPushState){A.$(window).on(\"popstate\",this.checkUrl)}else{if(this._wantsHashChange&&(\"onhashchange\" in window)&&!R){A.$(window).on(\"hashchange\",this.checkUrl)}else{if(this._wantsHashChange){this._checkUrlInterval=setInterval(this.checkUrl,this.interval)}}}this.fragment=O;var S=this.location;var Q=S.pathname.replace(/[^\\/]$/,\"$&/\")===this.root;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!Q){this.fragment=this.getFragment(null,true);this.location.replace(this.root+this.location.search+\"#\"+this.fragment);return true}else{if(this._hasPushState&&Q&&S.hash){this.fragment=this.getHash().replace(B,\"\");this.history.replaceState({},document.title,this.root+this.fragment+S.search)}}}if(!this.options.silent){return this.loadUrl()}},stop:function(){A.$(window).off(\"popstate\",this.checkUrl).off(\"hashchange\",this.checkUrl);clearInterval(this._checkUrlInterval);i.started=false},route:function(N,O){this.handlers.unshift({route:N,callback:O})},checkUrl:function(O){var N=this.getFragment();if(N===this.fragment&&this.iframe){N=this.getFragment(this.getHash(this.iframe))}if(N===this.fragment){return false}if(this.iframe){this.navigate(N)}this.loadUrl()},loadUrl:function(N){N=this.fragment=this.getFragment(N);return M.any(this.handlers,function(O){if(O.route.test(N)){O.callback(N);return true}})},navigate:function(P,O){if(!i.started){return false}if(!O||O===true){O={trigger:!!O}}var N=this.root+(P=this.getFragment(P||\"\"));P=P.replace(G,\"\");if(this.fragment===P){return}this.fragment=P;if(P===\"\"&&N!==\"/\"){N=N.slice(0,-1)}if(this._hasPushState){this.history[O.replace?\"replaceState\":\"pushState\"]({},document.title,N)}else{if(this._wantsHashChange){this._updateHash(this.location,P,O.replace);if(this.iframe&&(P!==this.getFragment(this.getHash(this.iframe)))){if(!O.replace){this.iframe.document.open().close()}this._updateHash(this.iframe.location,P,O.replace)}}else{return this.location.assign(N)}}if(O.trigger){return this.loadUrl(P)}},_updateHash:function(N,P,Q){if(Q){var O=N.href.replace(/(javascript:|#).*$/,\"\");N.replace(O+\"#\"+P)}else{N.hash=\"#\"+P}}});A.history=new i;var m=function(N,P){var O=this;var R;if(N&&M.has(N,\"constructor\")){R=N.constructor}else{R=function(){return O.apply(this,arguments)}}M.extend(R,O,P);var Q=function(){this.constructor=R};Q.prototype=O.prototype;R.prototype=new Q;if(N){M.extend(R.prototype,N)}R.__super__=O.prototype;return R};F.extend=c.extend=q.extend=H.extend=i.extend=m;var s=function(){throw new Error('A \"url\" property or function must be specified')};var I=function(P,O){var N=O.error;O.error=function(Q){if(N){N(P,Q,O)}P.trigger(\"error\",P,Q,O)}}}).call(this);\n"}
],
[
{"endColumn":2,"endLine":13,"scriptId":"81","startColumn":0,"startLine":0,"url":""},{"scriptSource":"(function(baseCreateCallback, errorClass, errorProto, hasOwnProperty, indicatorObject, isArguments, isArray, isString, keys, objectProto, objectTypes, nonEnumProps, stringClass, stringProto, toString\n/**/) {\nreturn function(object) {\nvar index, iterable = object, result = [];\nif (!iterable) return result;\nif (!(objectTypes[typeof object])) return result;\n  for (index in iterable) {\n    if (hasOwnProperty.call(iterable, index)) {\n  result.push(index);    \n    }\n  }    ;\nreturn result\n}\n})"}
],
[
{"endColumn":2,"endLine":24,"scriptId":"82","startColumn":0,"startLine":0,"url":""},{"scriptSource":"(function(baseCreateCallback, errorClass, errorProto, hasOwnProperty, indicatorObject, isArguments, isArray, isString, keys, objectProto, objectTypes, nonEnumProps, stringClass, stringProto, toString\n/**/) {\nreturn function(collection, callback, thisArg) {\nvar index, iterable = collection, result = iterable;\nif (!iterable) return result;\ncallback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3);\nvar length = iterable.length; index = -1;\nif (typeof length == 'number') {  \n  while (++index < length) {\n    if (callback(iterable[index], index, collection) === false) return result;\n  }\n}\nelse {  \n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] && keys(iterable),\n      length = ownProps ? ownProps.length : 0;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\nif (callback(iterable[index], index, collection) === false) return result;    \n  }  \n};\nreturn result\n}\n})"}
],
[
{"endColumn":2,"endLine":27,"scriptId":"83","startColumn":0,"startLine":0,"url":""},{"scriptSource":"(function(baseCreateCallback, errorClass, errorProto, hasOwnProperty, indicatorObject, isArguments, isArray, isString, keys, objectProto, objectTypes, nonEnumProps, stringClass, stringProto, toString\n/**/) {\nreturn function(object, source, guard) {\nvar index, iterable = object, result = iterable;\nif (!iterable) return result;\nvar args = arguments,\n    argsIndex = 0,\n    argsLength = typeof guard == 'number' ? 2 : args.length;\nif (argsLength > 3 && typeof args[argsLength - 2] == 'function') {\n  var callback = baseCreateCallback(args[--argsLength - 1], args[argsLength--], 2);\n} else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {\n  callback = args[--argsLength];\n}\nwhile (++argsIndex < argsLength) {\n  iterable = args[argsIndex];\n  if (iterable && objectTypes[typeof iterable]) {;\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] && keys(iterable),\n      length = ownProps ? ownProps.length : 0;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\nresult[index] = callback ? callback(result[index], iterable[index]) : iterable[index];    \n  }    }\n};\nreturn result\n}\n})"}
],
[
{"endColumn":2,"endLine":22,"scriptId":"84","startColumn":0,"startLine":0,"url":""},{"scriptSource":"(function(baseCreateCallback, errorClass, errorProto, hasOwnProperty, indicatorObject, isArguments, isArray, isString, keys, objectProto, objectTypes, nonEnumProps, stringClass, stringProto, toString\n/**/) {\nreturn function(object, source, guard) {\nvar index, iterable = object, result = iterable;\nif (!iterable) return result;\nvar args = arguments,\n    argsIndex = 0,\n    argsLength = typeof guard == 'number' ? 2 : args.length;\nwhile (++argsIndex < argsLength) {\n  iterable = args[argsIndex];\n  if (iterable && objectTypes[typeof iterable]) {;\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] && keys(iterable),\n      length = ownProps ? ownProps.length : 0;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\nif (typeof result[index] == 'undefined') result[index] = iterable[index];    \n  }    }\n};\nreturn result\n}\n})"}
],
[
{"endColumn":2,"endLine":12,"scriptId":"85","startColumn":0,"startLine":0,"url":""},{"scriptSource":"(function(baseCreateCallback, errorClass, errorProto, hasOwnProperty, indicatorObject, isArguments, isArray, isString, keys, objectProto, objectTypes, nonEnumProps, stringClass, stringProto, toString\n/**/) {\nreturn function(collection, callback, thisArg) {\nvar index, iterable = collection, result = iterable;\nif (!iterable) return result;\nif (!objectTypes[typeof iterable]) return result;\ncallback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3);\n  for (index in iterable) {\nif (callback(iterable[index], index, collection) === false) return result;    \n  }    ;\nreturn result\n}\n})"}
],
[
{"endColumn":2,"endLine":17,"scriptId":"86","startColumn":0,"startLine":0,"url":""},{"scriptSource":"(function(baseCreateCallback, errorClass, errorProto, hasOwnProperty, indicatorObject, isArguments, isArray, isString, keys, objectProto, objectTypes, nonEnumProps, stringClass, stringProto, toString\n/**/) {\nreturn function(collection, callback, thisArg) {\nvar index, iterable = collection, result = iterable;\nif (!iterable) return result;\nif (!objectTypes[typeof iterable]) return result;\ncallback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3);\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] && keys(iterable),\n      length = ownProps ? ownProps.length : 0;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\nif (callback(iterable[index], index, collection) === false) return result;    \n  }  ;\nreturn result\n}\n})"}
],
[
{"endColumn":0,"endLine":4,"scriptId":"87","startColumn":0,"startLine":0,"url":"http://assets.tumblr.com/assets/scripts/polyfills.js?_v=49441ea52b52bd0f16a34c72c0c77291"},{"scriptSource":"if(!Function.prototype.bind){Function.prototype.bind=function(a){if(typeof this!==\"function\"){throw new TypeError(\"Function.prototype.bind - what is trying to be bound is not callable\")}var e=Array.prototype.slice.call(arguments,1),d=this,b=function(){},c=function(){return d.apply(this instanceof b&&a?this:a,e.concat(Array.prototype.slice.call(arguments)))};b.prototype=this.prototype;c.prototype=new b();return c}};\n(function(){var b=0;var c=[\"ms\",\"moz\",\"webkit\",\"o\"];for(var a=0;a<c.length&&!window.requestAnimationFrame;++a){window.requestAnimationFrame=window[c[a]+\"RequestAnimationFrame\"];window.cancelAnimationFrame=window[c[a]+\"CancelAnimationFrame\"]||window[c[a]+\"CancelRequestAnimationFrame\"]}if(!window.requestAnimationFrame){window.requestAnimationFrame=function(h,e){var d=new Date().getTime();var f=Math.max(0,16-(d-b));var g=window.setTimeout(function(){h(d+f)},f);b=d+f;return g}}if(!window.cancelAnimationFrame){window.cancelAnimationFrame=function(d){clearTimeout(d)}}}());\n/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js*/\nif(typeof document!==\"undefined\"&&!(\"classList\" in document.createElement(\"a\"))){(function(j){if(!(\"HTMLElement\" in j)&&!(\"Element\" in j)){return}var a=\"classList\",f=\"prototype\",m=(j.HTMLElement||j.Element)[f],b=Object,k=String[f].trim||function(){return this.replace(/^\\s+|\\s+$/g,\"\")},c=Array[f].indexOf||function(q){var p=0,o=this.length;for(;p<o;p++){if(p in this&&this[p]===q){return p}}return -1},n=function(o,p){this.name=o;this.code=DOMException[o];this.message=p},g=function(p,o){if(o===\"\"){throw new n(\"SYNTAX_ERR\",\"An invalid or illegal string was specified\")}if(/\\s/.test(o)){throw new n(\"INVALID_CHARACTER_ERR\",\"String contains an invalid character\")}return c.call(p,o)},d=function(s){var r=k.call(s.className),q=r?r.split(/\\s+/):[],p=0,o=q.length;for(;p<o;p++){this.push(q[p])}this._updateClassName=function(){s.className=this.toString()}},e=d[f]=[],i=function(){return new d(this)};n[f]=Error[f];e.item=function(o){return this[o]||null};e.contains=function(o){o+=\"\";return g(this,o)!==-1};e.add=function(){var s=arguments,r=0,p=s.length,q,o=false;do{q=s[r]+\"\";if(g(this,q)===-1){this.push(q);o=true}}while(++r<p);if(o){this._updateClassName()}};e.remove=function(){var t=arguments,s=0,p=t.length,r,o=false;do{r=t[s]+\"\";var q=g(this,r);if(q!==-1){this.splice(q,1);o=true}}while(++s<p);if(o){this._updateClassName()}};e.toggle=function(p,q){p+=\"\";var o=this.contains(p),r=o?q!==true&&\"remove\":q!==false&&\"add\";if(r){this[r](p)}return !o};e.toString=function(){return this.join(\" \")};if(b.defineProperty){var l={get:i,enumerable:true,configurable:true};try{b.defineProperty(m,a,l)}catch(h){if(h.number===-2146823252){l.enumerable=false;b.defineProperty(m,a,l)}}}else{if(b[f].__defineGetter__){m.__defineGetter__(a,i)}}}(self))};\n"}
],
[
{"endColumn":0,"endLine":73,"scriptId":"88","startColumn":0,"startLine":0,"url":"http://assets.tumblr.com/assets/scripts/dashboard.js?_v=045f07eb5e5acd7ccb873954a5584fc3"},{"scriptSource":"(function(u,z){var s=u.document;var a=u.encodeURIComponent;var c=u.navigator;var o=u.parseInt;var n=u.performance;var i=u.window;var d=u.Date;var y=u.Error;var j=u.Math;var q=u.XMLHttpRequest;var e=[];var k=[];function r(C,B,D,A){C.addEventListener?C.addEventListener(B,D,!!A):C.attachEvent&&C.attachEvent(\"on\"+B,D,!!A)}function b(B,A){return(typeof B===\"string\")&&(B.length>A)?[B.slice(0,A/2),\"...\",B.length-A,\"...\",B.slice(-A/2)].join(\"\"):B}function l(E,C){var F=[];for(var D in E){if(!E.hasOwnProperty(D)){continue}var B=C?(C+\"[\"+D+\"]\"):D,A=E[D];F.push(typeof A==\"object\"?l(A,B):a(B)+\"=\"+a(A))}return F.join(\"&\")}var p=(function(A){return(A&&A.keys)||function(E){var B=[];var D=A.prototype.hasOwnProperty;for(var C in E){D.call(E,C)&&B.push(C)}return B}})(u.Object);var t=(function(A){return(A&&A.stringify&&function(C){try{return A.stringify(C)}catch(B){w(B);return'\"FAILED_JSON_STRINGIFY\"'}})||function(){return'\"NO_JSON_STRINGIFY\"'}})(u.JSON);var f=(function(A){return(A&&A.Features)||(function(){w(new y(\"Missing Tumblr.Features in exceptions.js\"));var B={enable_js_errors_log:true,enable_js_ephemeral_log:true};function C(D,E){return(typeof D===\"function\")?D.call(this,E):D}return function(E){var D=!!(B[E]);return function F(H,I){var G=C.call(this,(D?H:I),D);return(G!==void 0)?G:F}}})()})(u.Tumblr);function w(B,A){if(typeof A===\"number\"&&j.random()>A){return}if(B instanceof y){B.url||(B.url=\"//www.tumblr.com/\");g(B.message,B.url,B.ln,B.col,B)}else{e.push(t(B))}}function g(E,B,D,A,C){try{k.push({path:(s.location||{}).pathname||\"NO_LOCATION_OR_PATHNAME\",msg:b(E,200)||\"\",url:b(B,300)||\"\",ln:o(D,10)||-1,col:o(A,10)||-1,err:t(b(C&&C.stack,1000)||\"\")})}catch(C){}}function m(D){var C=s.getElementsByTagName(\"script\");var B=[];for(var E=0,A=C.length;E<A;E++){B.push(C[E].src)}return t({name:D,timestamp:+new d(),path:(s.location||{}).href||\"NO_HREF\",lang:(c||{}).userLanguage||(c||{}).language||\"NO_LANG\",referrer:s.referrer||\"NO_REFERRER\",ua:(c||{}).userAgent||\"NO_UA\",timing:(n||{}).timing||\"NO_TIMING\",scripts:B,ephemeral:e,errors:k,document:(s.documentElement||{}).innerHTML||\"NO_DOCUMENT\",cookie:s.cookie,globals:p(u)})}function h(){try{(i.onerror===g)||w(new y(\"window.onerror from exceptions.js was overridden\"));var A;f(\"enable_js_errors_log\")(function(){k.length&&((A||(A={})).errors=k)});f(\"enable_js_ephemeral_log\")(function(){e.length&&((A||(A={})).ephemeral=e)});f(\"js_debugger_1\")(function(){(A||(A={})).ephemeral=[m(\"js_debugger_1\")]});f(\"js_debugger_2\")(function(){(A||(A={})).ephemeral=[m(\"js_debugger_2\")]});if(!A){return}var C=new q();C.open(\"POST\",\"/svc/log/capture/exceptions\",false);C.setRequestHeader(\"Content-type\",\"application/x-www-form-urlencoded\");C.onreadystatechange=function(){if(C.readyState!==4){return}k.length=e.length=0};C.send(l({form_key:(s.getElementById(\"tumblr_form_key\")||s.body).getAttribute(\"content\"),log:A}))}catch(B){if(!u.jQuery){return}w(B);(A||(A={})).errors||(A.errors=k);u.jQuery.ajax({async:false,type:\"POST\",data:{form_key:u.jQuery(\"#tumblr_form_key\").attr(\"content\"),log:A},url:\"/svc/log/capture/exceptions\",with_form_key:true})}}function x(){var B=(\"console\" in u&&console.log)?function B(){console.log(\"Do not call this function - trapped by Blackhole.\")}:function B(){};(function A(){if(!u.Ajax){u.Ajax={}}if(!u.Ajax.Responders){u.Ajax.Responders={}}if(!u.Ajax.Responders.register){u.Ajax.Responders.register=B}})()}(function v(){r(i,\"beforeunload\",h);x();i.onerror=g})();(z.Utils||(z.Utils={})).exceptions=w})(this,this.Tumblr||(this.Tumblr={}));\nvar video_thumbnail_hover=false;function load_typekit(){if(typeof Typekit!=\"undefined\"){return}TypekitConfig={kitId:\"dzi2tiv\"};(function(){var a=document.createElement(\"script\");a.src=\"//use.typekit.com/\"+TypekitConfig.kitId+\".js\";a.type=\"text/javascript\";a.async=\"true\";a.onload=a.onreadystatechange=function(){var c=this.readyState;if(c&&c!=\"complete\"&&c!=\"loaded\"){return}try{Typekit.load(TypekitConfig)}catch(d){}};var b=document.getElementsByTagName(\"script\")[0];b.parentNode.insertBefore(a,b)})()}function select_field(a){var b=document.getElementsById(a);if(b.createTextRange){var c=b.createTextRange();c.moveStart(\"character\",0);c.moveEnd(\"character\",b.value.length);c.select()}else{if(b.setSelectionRange){b.setSelectionRange(0,b.value.length)}}}function get_cookie(d){var b=document.cookie;var g,f=b.split(\";\");var e,a=f.length;for(e=0;e<a;e+=1){if((g=f[e].replace(/^\\s+|\\s+$/g,\"\").split(\"=\"))[0]==d){return{name:g[0],value:g[1]}}}return false}function set_cookie(a,f,h,c){c=c||{};var b=new Date();var g=(typeof(c.path)!==\"undefined\")?c.path:\"/\";var e=(typeof(c.is_secure)!==\"undefined\")?true:false;var d=(typeof(c.domain)!==\"undefined\")?c.domain:\"\";b.setDate(b.getDate()+h);document.cookie=a+\"=\"+escape(f)+((h==null)?\"\":\";expires=\"+b.toGMTString())+\";path=\"+g+((e===false)?\"\":\";secure\")+((d===\"\")?\"\":\";domain=\"+d)}function unset_cookie(a){set_cookie(a,\"\",-1)}var trackable_follow=function(c,g,f,b,a,d,e){b=b||function(){};a=a||function(){};d=d||function(){};e=e||function(){};Tumblr.follow({tumblelog:f},{init:b,success:a,error:d,complete:e})};function toggle_video_embed(a){var b=jQuery;if(!b(\"#watch_video_\"+a).is(\":visible\")){b(\"#video_embed_\"+a).html(b(\"#video_code_\"+a).val());b(\"#video_toggle_\"+a).hide();b(\"#watch_video_\"+a).show();if(typeof _gaq!==\"undefined\"&&_gaq){_gaq.push([\"_trackEvent\",\"dashboard_video\",\"click\",\"normal\"])}}else{b(\"#video_embed_\"+a).html(\"\");b(\"#video_toggle_\"+a).show();b(\"#watch_video_\"+a).hide();if(typeof _gaq!==\"undefined\"&&_gaq){_gaq.push([\"_trackEvent\",\"dashboard_video\",\"hide\",\"normal\"])}}}function cycle_video_thumbnails(b,c){var a=jQuery(\"#video_thumbnail_\"+b);if(!a.attr(\"thumbnails\")){return false}var d=a.attr(\"thumbnails\").split(\"   |   \");if(!d.length){return false}if(c==\"preload\"){for(i=0;i<d.length;i++){add_to_image_queue(false,d[i])}}else{if(c==\"start\"){a.attr(\"original_src\",a.src);a.attr(\"thumbnail_index\",1);a.attr(\"src\",d[1]);video_thumbnail_hover=window.setInterval(function(){index=parseInt(a.attr(\"thumbnail_index\"),10)+1;if(index==d.length){index=0}a.attr(\"src\",d[index]);a.attr(\"thumbnail_index\",index)},500)}else{if(c==\"stop\"){window.clearInterval(video_thumbnail_hover);a.attr(\"src\",a.attr(\"original_src\"));a.removeAttr(\"thumbnail_index\");a.removeAttr(\"original_src\")}}}};\nTumblr.Utils||(Tumblr.Utils={});(function(e){var d=(function(){var g=document.documentElement.style;var h=[];for(var i in g){if(typeof g[i]===\"string\"){h.push(i)}}return h.join(\" \")})();var b=function(g){return new RegExp(\"\\\\b((webkit|moz|ms|o|)\"+g.toLowerCase()+\")\\\\b\",\"i\")};var a={};function f(h){if(a[h]===void 0){if(b(h).test(d)){var g=RegExp.$1;a[h]={js:g,css:(g[0]+g.slice(1).replace(/[A-Z]/g,\"-$&\")).toLowerCase()}}else{a[h]=false}}return a[h]}f.style=function c(j,i,l){var h,g;if(l){h={};h[i]=l}else{h=i}if(j.jquery){j=j[0]}for(var k in h){g=h[k];j.style[f(k).js]=g}return j};e.prefixer=f})(Tumblr.Utils);\nif(!Function.prototype.bind){Function.prototype.bind=function(a){if(typeof this!==\"function\"){throw new TypeError(\"Function.prototype.bind - what is trying to be bound is not callable\")}var e=Array.prototype.slice.call(arguments,1),d=this,b=function(){},c=function(){return d.apply(this instanceof b&&a?this:a,e.concat(Array.prototype.slice.call(arguments)))};b.prototype=this.prototype;c.prototype=new b();return c}};\n(function(a){function c(f,k,l){if(Array.prototype.indexOf){return f.indexOf(k,l)}for(var h=(l||0),g=f.length;h<g;h++){if(f[h]===k){return h}}return -1}function b(g,f){var i=[];if(!g){return i}for(var h in g){if(g.hasOwnProperty(h)){i.push(h)}}if(f&&f.length){return i.sort(function(k,j){return c(f,k)-c(f,j)})}return i}function e(){var f=function(){return(((1+Math.random())*65536)|0).toString(16).substring(1)};return(f()+f()+\"-\"+f()+\"-\"+f()+\"-\"+f()+\"-\"+f()+f()+f())}var d=function(f){if(!(this instanceof d)){return new d(f)}if(!f){f={}}if(typeof f===\"string\"){f={id:f}}this.el=d.create_stylesheet(f.id||e());if(f.media_query){this.set_media_query(f.media_query)}this.selectors={};this.selectors_order=[];if(f.styles){this.import_styles(f.styles)}this.attach();d.register(this);return this};d.prototype={add_px:function(f){if(typeof f===\"string\"&&f.match(/\\D/)){return f}return f+\"px\"},add_px_value:function(g,f){switch(g){case\"top\":case\"right\":case\"bottom\":case\"left\":case\"width\":case\"height\":return this.add_px(f);default:return f}},import_styles:function(g){for(var f in g){this.set(f,g[f])}},set_media_query:function(f){this.el.media=f||\"\"},set:function(f,i,h,j){if(typeof this.selectors[f]===\"undefined\"){this.selectors[f]={properties:{},properties_order:[]};this.selectors_order.push(f)}f=this.selectors[f];if(typeof i===\"object\"){var g=i;j=h;for(i in g){if(typeof f.properties[i]===\"undefined\"){f.properties_order.push(i)}h=g[i];f.properties[i]=this.add_px_value(i,h)}}else{if(typeof f.properties[i]===\"undefined\"){f.properties_order.push(i)}f.properties[i]=this.add_px_value(i,h)}if(typeof j===\"undefined\"){j=true}if(j){this.update()}},get:function(f,g){f=this.selectors[f];if(typeof f===\"undefined\"){return false}if(!g){return f}g=f.properties[g];if(typeof g===\"undefined\"){return false}return g},has:function(f,g){f=this.selectors[f];if(typeof f===\"undefined\"){return false}if(!g){return true}g=f[g];if(typeof g===\"undefined\"){return false}return(typeof g!==\"undefined\")&&g!==\"\"},set_selectors_order:function(f){this.selectors_order=b(this.selectors,f);this.update();return true},set_properties_order:function(f,g){if(!f){for(f in this.selectors){if(!this.selectors.hasOwnProperty(f)){continue}f=this.selectors[f];f.properties_order=b(f.properties,g||d.default_properties_order)}this.update();return true}f=this.get(f);if(!f){return false}f.properties_order=b(f.properties,g||d.default_properties_order);this.update();return true},attach:function(){var f=document.getElementsByTagName(\"head\")[0];if(!f){return false}this.update();f.appendChild(this.el);return true},detach:function(){var f=document.getElementsByTagName(\"head\")[0];if(!f){return false}if(this.el.parentNode!==f){return false}this.el.parentNode.removeChild(this.el);return true},update:function(){var f=this.selector_to_text(this.selectors,this.selectors_order).replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\");if(this.el.styleSheet){this.el.styleSheet.cssText=\"\\n\"+f}else{this.el.innerHTML=\"\\n\"+f}},selector_to_text:function(j,g){g||(g=b(j));var f;var k=\"\";for(var h=0;h<g.length;h++){f=g[h];if(!(j.hasOwnProperty(f)&&j[f])){continue}k+=f+\" {\\n\";k+=this.properties_to_text(j[f].properties,j[f].properties_order);k+=\"}\\n\"}return k},properties_to_text:function(h,f){f||(f=b(h));var k=\"\";var j;for(var g=0;g<f.length;g++){j=f[g];if(!(h.hasOwnProperty(j)&&h[j]!==\"\")){continue}k+=j+\": \"+h[j]+\";\\n\"}return k},toString:function(){return this.selector_to_text(this.selectors,this.selectors_order).replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\")}};d.instances=[];d.default_properties_order=[\"font\",\"font-family\",\"font-size\",\"font-style\",\"font-variant\",\"font-weight\",\"@font-face\",\"font-size-adjust\",\"font-stretch\",\"padding\",\"padding-top\",\"padding-right\",\"padding-bottom\",\"padding-left\",\"margin\",\"margin-top\",\"margin-right\",\"margin-bottom\",\"margin-left\",\"border\",\"border-top\",\"border-top-color\",\"border-top-style\",\"border-top-width\",\"border-right\",\"border-right-color\",\"border-right-style\",\"border-right-width\",\"border-bottom\",\"border-bottom-color\",\"border-bottom-style\",\"border-bottom-width\",\"border-left\",\"border-left-color\",\"border-left-style\",\"border-left-width\",\"border-radius\",\"border-top-left-radius\",\"border-top-right-radius\",\"border-bottom-right-radius\",\"border-bottom-left-radius\",\"background\",\"background-color\",\"background-position\",\"background-size\",\"background-repeat\",\"background-origin\",\"background-clip\",\"background-attachment\",\"background-image\",\"overflow\",\"overflow-x\",\"overflow-y\",\"transition\",\"transition-property\",\"transition-duration\",\"transition-timing-function\",\"transition-delay\",\"transform\",\"transform-origin\",\"transform-style\"];d.create_stylesheet=function(g){var f=document.createElement(\"style\");f.type=\"text/css\";if(g){f.id=g}return f};d.register=function(f){this.instances.push(f)};a.Styler=d})(this.Tumblr||(this.Tumblr={}));\n(\"Tumblr\" in window)||(window.Tumblr={});Tumblr.FollowTeaser=(function(){var h=false,o=false,n=false,a=false,l={},c=310,p=110,i=false,b=new Tumblr.Styler({id:\"tumblr_teaser_follow_css\",styles:{\"#tumblr_teaser_follow\":{display:\"block\",opacity:\"1\",visibility:\"hidden\",position:\"fixed\",bottom:\"0\",right:\"0\",width:\"1px\",height:\"1px\",\"z-index\":\"2147483647\"},\"#tumblr_teaser_follow.open\":{visibility:\"visible\",width:c+\"px\",height:p+\"px\"}}});function q(w,t){var x=[];for(var u in w){var s=t?t+\"[\"+u+\"]\":u,r=w[u];x.push(typeof r==\"object\"?q(r,s):encodeURIComponent(s)+\"=\"+encodeURIComponent(r))}return x.join(\"&\")}var g=0;var e=9000;var d=200;var f=false;function j(){if(f){return}var s=window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop||0;if((s>e||(Tumblr.FollowTeaser.current_page>=2&&s>500))&&Tumblr.FollowTeaser.can_show()){Tumblr.FollowTeaser.scroll_listener(false);return}if(Tumblr.FollowTeaser.infer_infinite_scroll){var r=document.body.clientHeight;if(r>g+100){Tumblr.FollowTeaser.current_page++;g=r}}f=true;setTimeout(function(){f=false},d)}var m;function k(){if(f){return}clearTimeout(m);m=setTimeout(j,300);f=true;setTimeout(function(){f=false},d)}return{infer_infinite_scroll:false,current_page:1,can_show:function(){n=true;var r=this.open(c,p);if(h){h.contentWindow.postMessage(\"follow_teaser;show\",\"*\")}return r},create_from_tumblr_controls:function(r){if(!(o=document.getElementById(\"tumblr_controls\"))){return false}if(!(url_matches=o.src.match(/([^\\?#]+\\/)([^\\/\\?\\#]\\.html)?(\\?_v=[^\\&#]+)?([^#]*)(.*)?/i))){return false}this.initialize({url:(r||(url_matches[1]+\"follow.html\"))+url_matches[4]+url_matches[5]})},create_iframe:function(r){var s=document.createElement(\"iframe\");s.id=\"tumblr_teaser_follow\";s.width=1;s.height=1;s.frameBorder=0;s.scrolling=\"no\";s.src=r;document.body.appendChild(s);return s},scroll_listener:function(r){if(r){if(window.addEventListener){window.addEventListener(\"scroll\",k)}else{if(window.attachEvent){window.attachEvent(\"onscroll\",k)}}}else{if(window.removeEventListener){window.removeEventListener(\"scroll\",k)}else{if(window.detachEvent){window.detachEvent(\"onscroll\",k)}}}},initialize:function(t){if(!Tumblr.PostMessageListener){return false}if(!t){t={}}g=document.body.clientHeight;e=Math.min(e,3*Tumblr.windowDimensions().height);var r=this;Tumblr.PostMessageListener.initialize(function(x,w){r.post_message_event(x,w)});h=document.getElementById(\"tumblr_teaser_tagged\");o=document.getElementById(\"tumblr_controls\");if(!h){var u=t.query||{};var s=t.url||\"http://www.tumblr.com/assets/html/follow.html\";var v=(s.indexOf(\"#\")<0?\"#\":\"&\")+q(u);h=this.create_iframe(s+v)}},post_message_event:function(s,r){if(!s||s.length<2||s[0]!==\"follow_iframe\"){return false}switch(s[1]){case\"resize\":if(s.length>3){c=s[2];p=s[3];b.set(\"#tumblr_teaser_follow.open\",{width:c+\"px\",height:p+\"px\"})}a=true;this.open(c,p);break;case\"dismiss\":this.close();break}function t(u,v){if(!(typeof u===\"string\"&&u.match(/\\d+%/))){u=parseInt(u,10)||0}if(!(typeof v===\"string\"&&v.match(/\\d+%/))){v=parseInt(v,10)||0}if(u){tumblelog_iframe.width=u}if(v){tumblelog_iframe.height=v}}},open:function(s,r){if(!h){return false}if(!(n&&a)){return false}if(i){return false}i=true;Tumblr.addClass(h,\"open\");o.style.display=\"none\";return true},close:function(){if(!h){return}if(!i){return}i=false;n=false;Tumblr.removeClass(h,\"open\");o.style.display=\"block\"},toggle:function(){if(!h){return}if(i){return this.close()}else{this.open()}}}})();\n(\"Tumblr\" in window)||(window.Tumblr={});Tumblr.Teaser=(function(){var a=false,e=false,b=false,f={hide:false,sneeze:false},c=false,d=360;return{is_enabled:function(){return !!e},initialize:function(h){e=document.getElementById(\"teaser_iframe\");if(!e){return false}a=e.parentNode;if(!h){h={}}if(h.slide_page){c=h.slide_page}if(h.width){d=h.width}this.prepare(false);var g=this;a.addEventListener(\"mouseout\",function(i){if(!(i.relatedTarget||i.toElement)){g.close()}})},prepare:function(h){if(!e){return}var g=0.25;var i=0.3;a.style.display=\"block\";a.style.opacity=\"0\";a.style.visibility=\"hidden\";a.style.position=\"fixed\";a.style.top=\"0\";a.style.right=\"0\";a.style.bottom=\"0\";a.style.width=\"1px\";a.style.height=\"100%\";a.style.zIndex=\"2147483646\";a.style.overflow=\"hidden\";a.style.backgroundColor=\"rgba(0,0,0, 0.6)\";a.style.webkitTransition=\"width \"+g+\"s ease-in-out\";a.style.MozTransition=\"width \"+g+\"s ease-in-out\";a.style.msTransition=\"width \"+g+\"s ease-in-out\";a.style.OTransition=\"width \"+g+\"s ease-in-out\";a.style.transition=\"width \"+g+\"s ease-in-out\";e.style.display=\"block\";e.style.opacity=\"1\";e.style.visibility=\"visible\";e.style.position=\"absolute\";e.style.top=\"0\";e.style.right=\"0\";e.style.minWidth=\"100%\";e.style.width=d+\"px\";e.style.height=\"100%\";if(c&&document.body.parentNode){document.body.parentNode.style.position=\"relative\";document.body.parentNode.style.webkitTransition=\"right \"+g+\"s ease-in-out\";document.body.parentNode.style.MozTransition=\"right \"+g+\"s ease-in-out\";document.body.parentNode.style.msTransition=\"right \"+g+\"s ease-in-out\";document.body.parentNode.style.OTransition=\"right \"+g+\"s ease-in-out\";document.body.parentNode.style.transition=\"right \"+g+\"s ease-in-out\";document.body.parentNode.style.right=\"0\"}},refresh:function(){if(!e){return}e.contentWindow.postMessage(\"teaser;prepare_next\",\"*\")},reset_timers:function(){clearTimeout(f.hide);f.hide=false;clearTimeout(f.sneeze);f.sneeze=false},reset:function(){if(!e){return}this.reset_timers();a.style.opacity=\"0\";this.refresh()},open:function(){if(!e){return}if(b){return}b=true;a.style.opacity=\"1\";a.style.visibility=\"visible\";a.style.width=d+\"px\";if(c&&document.body.parentNode){document.body.parentNode.style.right=d+\"px\"}e.contentWindow.postMessage(\"teaser;show\",\"*\");this.reset_timers();clearTimeout(f.sneeze);f.sneeze=setTimeout(function(){f.sneeze=false},100)},close:function(){if(!e){return}if(!b||f.sneeze){return}b=false;a.style.opacity=\"1\";a.style.visibility=\"visible\";a.style.width=\"1px\";if(c&&document.body.parentNode){document.body.parentNode.style.right=\"0\"}e.contentWindow.postMessage(\"teaser;hide\",\"*\");this.reset_timers();var g=this;f.hide=setTimeout(function(){g.reset()},300)},toggle:function(){if(!e){return}if(b){return this.close()}else{this.open()}}}})();\n(\"Tumblr\" in window)||(window.Tumblr={});Tumblr.TaggedTeaser=(function(){var e=false,f={},c=true,a=144,b=false;function d(m,j){var n=[];for(var l in m){var i=j?j+\"[\"+l+\"]\":l,h=m[l];n.push(typeof h==\"object\"?d(h,i):encodeURIComponent(i)+\"=\"+encodeURIComponent(h))}return n.join(\"&\")}function g(h){e.style.position=h||\"absolute\"}return{create_iframe:function(h){var i=document.createElement(\"iframe\");i.id=\"tumblr_teaser_tagged\";i.width=\"100%\";i.height=1;i.frameBorder=0;i.scrolling=\"no\";i.src=h;document.body.appendChild(i);return i},initialize:function(h){if(!h){h={}}if(h.height){a=h.height}if(e&&h.once){return}e=document.getElementById(\"tumblr_teaser_tagged\");if(!e&&!h.once){f=h.query||{};f.tag=h.tag;e=this.create_iframe((h.url||\"http://www.tumblr.com/assets/html/iframe/tagged.html\")+\"#\"+d(f))}return this.prepare(h.open)},prepare:function(j){if(!e){return}var h=0.25;e.style.display=\"block\";e.style.opacity=\"1\";e.style.visibility=\"hidden\";e.style.position=\"absolute\";e.style.bottom=\"0\";e.style.right=\"0\";e.style.minWidth=\"100%\";e.style.width=\"100%\";e.style.height=\"1px\";e.style.zIndex=\"2147483647\";e.style.webkitTransition=\"height \"+h+\"s ease-in-out\";e.style.MozTransition=\"height \"+h+\"s ease-in-out\";e.style.msTransition=\"height \"+h+\"s ease-in-out\";e.style.OTransition=\"height \"+h+\"s ease-in-out\";e.style.transition=\"height \"+h+\"s ease-in-out\";if(j){var i=this;setTimeout(function(){i.open()},0)}return this},open:function(h){if(!e){return}if(b){return}b=true;e.style.height=(h||a)+\"px\";e.style.visibility=\"visible\";if(c&&document.body.parentNode){document.body.style.position=\"relative\";document.body.style.paddingBottom=(h||a)+\"px\";document.body.parentNode.style.minHeight=\"100%\"}g(\"fixed\")},close:function(){if(!e){return}if(!b){return}b=false;e.style.height=\"1px\";setTimeout(function(){e.style.visibility=\"hidden\"},300)},toggle:function(){if(!e){return}if(b){return this.close()}else{this.open()}}}})();\n(\"Tumblr\" in window)||(window.Tumblr={});Tumblr.flashVersion=function(){if(navigator.plugins&&navigator.plugins.length>0){var a=navigator.mimeTypes;if(a&&a[\"application/x-shockwave-flash\"]&&a[\"application/x-shockwave-flash\"].enabledPlugin&&a[\"application/x-shockwave-flash\"].enabledPlugin.description){return parseInt(a[\"application/x-shockwave-flash\"].enabledPlugin.description.split(\" \")[2].split(\".\")[0],10)}}else{if(navigator.appVersion.indexOf(\"Mac\")==-1&&window.execScript){try{var c=new ActiveXObject(\"ShockwaveFlash.ShockwaveFlash.7\");var b=c.GetVariable(\"$version\");return b.split(\",\")[0].split(\" \")[1]}catch(d){}return 0}}};Tumblr.replaceIfFlash=function(b,a,c){if(Tumblr.flashVersion()>=b){document.getElementById(a).innerHTML=c}};Tumblr.renderVideo=function(c,g,e,a,b){var d=navigator.userAgent.toLowerCase();var f=(d.indexOf(\"iphone\")!=-1);if(f){document.getElementById(c).innerHTML='<object classid=\"clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B\" width=\"'+e+'\" height=\"'+a+'\" codebase=\"http://www.apple.com/qtactivex/qtplugin.cab\"><param name=\"src\" value=\"'+g+'\"><param name=\"qtsrc\" value=\"'+g+'\"><param name=\"autoplay\" value=\"false\"><embed src=\"'+g+'\" qtsrc=\"'+g+'\" width=\"'+e+'\" height=\"'+a+'\" pluginspage=\"http://www.apple.com/quicktime/\"></embed></object>'}else{replaceIfFlash(10,c,'<embed type=\"application/x-shockwave-flash\" src=\"http://assets.tumblr.com/swf/video_player.swf?22\" bgcolor=\"#000000\" quality=\"high\" class=\"video_player\" wmode=\"transparent\" allowfullscreen=\"true\" height=\"'+a+'\" width=\"'+e+'\" flashvars=\"file='+encodeURIComponent(g)+(b?\"&amp;\"+b:\"\")+'\"></embed>')}};function flashVersion(){return Tumblr.flashVersion()}function renderVideo(c,e,d,a,b){Tumblr.renderVideo(c,e,d,a,b)}function replaceIfFlash(b,a,c){Tumblr.replaceIfFlash(b,a,c)};\n(\"Tumblr\" in window)||(window.Tumblr={});Tumblr.hasClass=function(b,a){return new RegExp(\"(\\\\s|^)\"+a+\"(\\\\s|$)\").test(b.className)};Tumblr.addClass=function(b,a){if(!Tumblr.hasClass(b,a)){b.className+=\" \"+a}};Tumblr.removeClass=function(c,a){if(Tumblr.hasClass(c,a)){var b=new RegExp(\"(\\\\s|^)\"+a+\"(\\\\s|$)\");c.className=c.className.replace(b,\" \")}};Tumblr.toggleClass=function(b,a){if(Tumblr.hasClass(b,a)){Tumblr.removeClass(b,a)}else{Tumblr.addClass(b,a)}};\n(\"Tumblr\" in window)||(window.Tumblr={});Tumblr.windowDimensions=function(){if(window.innerWidth!==undefined){return{width:window.innerWidth,height:window.innerHeight}}else{if(document.documentElement){return{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight}}else{return{width:document.body.clientWidth,height:document.body.clientHeight}}}};Tumblr.Lightbox=(function(){var f=false;var h=false;var n=false;var d=[];var i=false;var g=false;var o=false;var e=false;var c={left:false,center:false,right:false};function m(r,u){if(document.getElementById(\"tumblr_lightbox\")){return}if(!u){u=1}d=r;if(navigator&&navigator.userAgent.indexOf(\"Firefox\")!=-1){var y=document.createElement(\"input\");y.setAttribute(\"id\",\"Tumblr_Lightbox_focus_input\");y.setAttribute(\"type\",\"text\");y.style.position=\"fixed\";y.style.top=0;y.style.left=0;document.body.appendChild(y);y.focus();document.body.removeChild(y)}else{window.focus()}if(!f){if(window.onkeydown){h=window.onkeydown}window.onkeydown=function(B){if(document.getElementById(\"tumblr_lightbox\")){if(!B){B=window.event}var A=B.charCode?B.charCode:B.keyCode;if(!B.shiftKey&&!B.ctrlKey&&!B.altKey&&!B.metaKey){if(A==37){if(g>1){k(g-1)}}else{if(A==39){if(g<d.length){k(g+1)}}else{if(A==27||A==32||A==74||A==75){l()}}}}else{if((B.ctrlKey||B.metaKey)&&A==87){l();return false}}}if(h){h()}};if(window.onresize){n=window.onresize}window.onresize=function(){if(document.getElementById(\"vignette\")){document.getElementById(\"vignette\").style.display=\"none\";if(e){clearTimeout(e)}e=setTimeout(function(){document.getElementById(\"vignette\").style.display=\"inline-block\"},100)}j();if(n){n()}};if(navigator&&navigator.userAgent.search(\"iPad\")!=-1){document.addEventListener(\"touchmove\",function(){l()},false)}f=true}document.body.style.overflow=\"hidden\";var p=document.createElement(\"div\");p.setAttribute(\"id\",\"tumblr_lightbox\");if(navigator&&navigator.userAgent.search(\"iPad\")!=-1){p.style.position=\"absolute\";p.style.top=document.body.scrollTop+\"px\";p.style.height=window.innerHeight+\"px\"}else{p.style.position=\"fixed\";p.style.top=\"0px\";p.style.bottom=\"0px\"}p.style.left=\"0px\";p.style.right=\"0px\";p.style.zIndex=4294967294;p.style.overflow=\"hidden\";p.style.backgroundColor=(navigator&&navigator.userAgent.indexOf(\"MSIE\")!=-1)?\"#222\":\"rgba(17,17,17,0.92)\";p.onclick=function(){if(i){i=false}else{l()}};if(!(navigator&&navigator.userAgent.search(\"iPad\")!=-1)&&!(navigator&&navigator.userAgent.search(\"MSIE\")!=-1)){var x=document.createElement(\"img\");x.setAttribute(\"id\",\"vignette\");x.setAttribute(\"src\",\"http://assets.tumblr.com/images/full_page_vignette.png\");x.style.position=\"absolute\";x.style.width=\"100%\";x.style.height=\"100%\";x.style.left=\"0px\";x.style.top=\"0px\";p.appendChild(x);var w=document.createElement(\"div\");w.style.position=\"absolute\";w.style.width=\"100%\";w.style.height=\"100%\";w.style.left=\"0px\";w.style.top=\"0px\";p.appendChild(w)}var s=document.createElement(\"div\");s.style.position=\"absolute\";s.style.left=\"50%\";s.style.top=\"50%\";if(!document.getElementById(\"tumblr_form_key\")){s.style.width=\"100%\"}p.appendChild(s);var q=[\"left\",\"center\",\"right\"];while(stage_name=q.pop()){var v=document.createElement(\"a\");v.setAttribute(\"id\",\"tumblr_lightbox_\"+stage_name+\"_link\");v.setAttribute(\"href\",\"#\");if(d.length<2){v.style.cursor=\"default\"}s.appendChild(v);var t=document.createElement(\"img\");t.setAttribute(\"id\",\"tumblr_lightbox_\"+stage_name+\"_image\");t.setAttribute(\"src\",\"http://assets.tumblr.com/images/x.gif\");t.style.mozBorderRadius=\"3px\";t.style.webkitBorderRadius=\"3px\";t.style.borderRadius=\"3px\";if(navigator&&navigator.userAgent.indexOf(\"Chrome\")!=-1){t.style.moxBoxShadow=\"0 4px 30px rgba(0,0,0,1)\";t.style.webkitBoxShadow=\"0 4px 30px rgba(0,0,0,1)\";t.style.boxShadow=\"0 4px 30px rgba(0,0,0,1)\"}t.style.borderWidth=\"0px\";t.style.position=\"absolute\";if(stage_name==\"center\"){t.style.zIndex=4294967295}v.appendChild(t)}var z=document.createElement(\"div\");z.setAttribute(\"id\",\"tumblr_lightbox_caption\");z.style.position=\"absolute\";z.style.textAlign=\"center\";z.style.font=\"bold 17px 'HelveticaNeue','Helvetica','Arial',sans-serif\";z.style.color=\"#fff\";z.style.paddingTop=\"20px\";z.style.textShadow=\"0 4px 30px rgba(0,0,0,1)\";z.style.display=\"inline-block\";z.style.textRendering=\"optimizeLegibility\";s.appendChild(z);document.body.appendChild(p);k(u);j()}function l(){document.body.style.overflow=\"\";document.getElementById(\"tumblr_lightbox\").style.display=\"none\";document.body.removeChild(document.getElementById(\"tumblr_lightbox\"))}function k(q){g=q;o=Math.round(Math.random()*1000000000000);document.getElementById(\"tumblr_lightbox_left_link\").onclick=function(){i=true;k(q-1);return false};if(d.length==1){document.getElementById(\"tumblr_lightbox_center_link\").onclick=function(){return false}}else{if(q<d.length){document.getElementById(\"tumblr_lightbox_center_link\").onclick=function(){i=true;k(q+1);return false}}else{document.getElementById(\"tumblr_lightbox_center_link\").onclick=function(){i=true;k(1);return false}}}document.getElementById(\"tumblr_lightbox_right_link\").onclick=document.getElementById(\"tumblr_lightbox_center_link\").onclick;c.left=false;c.center=false;c.right=false;b(\"center\",q-1);if(q>1){b(\"left\",q-2)}if(q<d.length){b(\"right\",q)}if(q+1<d.length){var p=new Image();p.src=d[q+1].low_res}}function b(q,s){var p=new Image();var r=false;p.className=o;p.onload=function(){if(this.className==o){this.className=\"high-res\";c[q]=this;j()}};p.src=d[s].high_res;if(!p.complete){r=new Image();r.className=o;r.onload=function(){if(this.className==o&&(!c[q]||c[q].className==\"placeholder\")){this.className=\"low-res\";c[q]=this;j()}};r.src=d[s].low_res;if(d[s].width&&d[s].height){if(r){r.style.maxWidth=d[s].width+\"px\";r.style.maxHeight=d[s].height+\"px\"}p.style.maxWidth=d[s].width+\"px\";p.style.maxHeight=d[s].height+\"px\"}if(!r.complete&&(d[s].width&&d[s].height)){c[q]=new Image(d[s].width,d[s].height);c[q].style.maxWidth=d[s].width+\"px\";c[q].style.maxHeight=d[s].height+\"px\";c[q].src=\"http://assets.tumblr.com/images/x.gif\";c[q].className=\"placeholder\"}}}function j(){var u=[\"right\",\"left\",\"center\"];while(stage_name=u.pop()){var r=document.getElementById(\"tumblr_lightbox_\"+stage_name+\"_image\");if(!r){continue}var s=c[stage_name];if(!s){r.style.display=\"none\";continue}else{r.style.display=\"inline-block\"}var q=s.style.maxWidth?parseInt(s.style.maxWidth,10):s.width;var p=s.style.maxHeight?parseInt(s.style.maxHeight,10):s.height;if(Tumblr.windowDimensions().width/Tumblr.windowDimensions().height<q/p){var t=(d.length==1)?0.85:0.75;if(Tumblr.windowDimensions().width*t>q&&(s.className==\"high-res\"||s.style.maxWidth)){r.style.width=q+\"px\";r.style.height=p+\"px\"}else{r.style.height=(p*((Tumblr.windowDimensions().width*t)/q))+\"px\";r.style.width=(Tumblr.windowDimensions().width*t)+\"px\"}}else{if(Tumblr.windowDimensions().height*0.85>p&&(s.className==\"high-res\"||s.style.maxHeight)){r.style.width=q+\"px\";r.style.height=p+\"px\"}else{r.style.width=(q*((Tumblr.windowDimensions().height*0.85)/p))+\"px\";r.style.height=(Tumblr.windowDimensions().height*0.85)+\"px\"}}if(stage_name==\"center\"){r.style.left=(0-parseInt(r.style.width,10)/2)+\"px\";r.style.top=(0-parseInt(r.style.height,10)/2)+\"px\"}else{r.style[stage_name]=(0-(parseInt(r.style.width,10)+Tumblr.windowDimensions().width*0.42))+\"px\";r.style.top=(0-parseInt(r.style.height,10)/2)+\"px\"}r.src=s.src;r.style.backgroundColor=(s.className==\"placeholder\")?((navigator&&navigator.userAgent.indexOf(\"MSIE\")!=-1)?\"#444\":\"rgba(255,255,255,0.05)\"):\"transparent\";if(stage_name==\"center\"&&d[g-1].caption){document.getElementById(\"tumblr_lightbox_caption\").innerHTML=d[g-1].caption;document.getElementById(\"tumblr_lightbox_caption\").style.width=(Tumblr.windowDimensions().width*0.7)+\"px\";document.getElementById(\"tumblr_lightbox_caption\").style.top=(parseInt(r.style.height,10)*0.5)+\"px\";document.getElementById(\"tumblr_lightbox_caption\").style.left=(0-Tumblr.windowDimensions().width*0.35)+\"px\";document.getElementById(\"tumblr_lightbox_caption\").style.display=\"block\"}else{if(stage_name==\"center\"){document.getElementById(\"tumblr_lightbox_caption\").style.display=\"none\"}}}}function a(){return !!document.getElementById(\"tumblr_lightbox\")}return{init:m,isOpen:a}})();\nTumblr.IframePreloader=function(a){for(var b in a){if(typeof b==\"object\"){for(var c in b){this.options[b][c]=b[c]}}else{this.options[b]=a[b]}}this.__create()};Tumblr.IframePreloader.prototype={options:{iframe_src:\"\",iframe_before_onload:function(){},iframe_after_onload:function(){},iframe_class:\"\",iframe_styles:{zIndex:8675309,position:\"fixed\",top:\"0px\",left:\"0px\",right:\"0px\",bottom:\"0px\",width:\"100%\",height:\"100%\",background:\"transparent\",border:\"0px\",overflow:\"hidden\"},preloader_class:\"\",preloader_innerHTML:'<div style=\"position:absolute; top:0; left:0; right:0; bottom:0; background:transparent center no-repeat url(\\'/images/loading_big_fff_on_2e3133.gif?709\\')\"><img style=\"position:absolute; left:0; top:0; width:100%; height:100%; opacity:0.3;\" src=\"http://assets.tumblr.com/images/full_page_vignette.png?709\"/></div>',preloader_styles:{zIndex:8675310,position:\"fixed\",top:\"0px\",left:\"0px\",right:\"0px\",bottom:\"0px\",width:\"100%\",height:\"100%\",overflow:\"hidden\",background:\"rgba(17,17,17,0.92)\"},close_class:\"\",close_innerHTML:\"&times;\",close_styles:{zIndex:8675311,position:\"fixed\",top:\"10px\",right:\"15px\",cursor:\"pointer\",font:\"bold 20px Helvetica, sans-serif\"}},iframe_loaded:false,__create:function(){this.id=Math.random().toString().split(\".\")[1];this.$container=document.createElement(\"div\");this.$preloader=document.createElement(\"div\");this.$preloader.id=\"iframe_preloader-preloader-\"+this.id;this.$preloader.className=this.options.preloader_class;for(var d in this.options.preloader_styles){this.$preloader.style[d]=this.options.preloader_styles[d]}this.$preloader.innerHTML=this.options.preloader_innerHTML;this.$iframe=document.createElement(\"iframe\");this.$iframe.id=\"iframe_preloader-iframe-\"+this.id;this.$iframe.className=this.options.iframe_class;for(var c in this.options.iframe_styles){this.$iframe.style[c]=this.options.iframe_styles[c]}this.$iframe.src=this.options.iframe_src;this.$iframe.scrolling=\"no\";this.$iframe.frameborder=\"0\";this.$close=document.createElement(\"div\");this.$close.id=\"iframe_preloader-close-\"+this.id;this.$close.className=this.options.close_class;for(var b in this.options.close_styles){this.$close.style[b]=this.options.close_styles[b]}this.$close.innerHTML=this.options.close_innerHTML;var a=this;this.$close.onclick=function(){if(typeof pano_iframe_preloader!=\"undefined\"&&pano_iframe_preloader){pano_iframe_preloader.remove()}};this.$iframe.onload=function(){a.options.iframe_before_onload();a.iframe_loaded=true;a.show();a.$close.style.display=\"none\";a.options.iframe_after_onload()};this.hide_iframe();this.lock_body();this.$container.appendChild(this.$preloader);this.$container.appendChild(this.$iframe);this.$container.appendChild(this.$close);document.body.appendChild(this.$container)},hide:function(){this.hide_iframe();this.hide_preloader();this.unlock_body()},show:function(){if(this.iframe_loaded){this.show_iframe();this.hide_preloader()}else{this.hide_iframe();this.show_preloader()}this.lock_body()},remove:function(){this.hide();document.body.removeChild(this.$container);delete this.$container;delete this.$preloader;delete this.$iframe},lock_body:function(){document.body.style.overflow=\"hidden\"},unlock_body:function(){document.body.style.overflow=\"\"},show_preloader:function(){this.window.focus();this.$preloader.style.display=\"block\"},hide_preloader:function(){this.$preloader.style.display=\"none\"},show_iframe:function(){this.$iframe.contentWindow.focus();this.$iframe.style.opacity=1},hide_iframe:function(){this.$iframe.style.opacity=0}};var pano_iframe_preloader=false;Tumblr.PanoLightboxInit=function(b,a){if((!b&&window.event&&(window.event.metaKey||window.event.altKey))||(b&&(b.metaKey||b.altKey))){return true}pano_iframe_preloader=new Tumblr.IframePreloader({iframe_src:a});return false};\n(\"Tumblr\" in window)||(window.Tumblr={});Tumblr.IframeContent=function(){var e,g,h,b;function i(){e=document.createElement(\"iframe\");e.width=b.width;e.height=b.height;e.src=\"about:blank\";for(var j in b.attr){e.setAttribute(j,b.attr[j])}e.setAttribute(\"frameborder\",\"0\");e.setAttribute(\"scrolling\",\"no\");e.setAttribute(\"webkitAllowFullScreen\",\"\");e.setAttribute(\"mozallowfullscreen\",\"\");e.setAttribute(\"allowFullScreen\",\"\");e.setAttribute(\"seamless\",\"\");e.setAttribute(\"style\",\"display:block;background-color:transparent;overflow:hidden;\");g.appendChild(e)}function d(){h=\"<!DOCTYPE html><html><head><title>Tumblr Video</title></head>\";h+='<body class=\"'+b.body_class+'\">';h+=b.content;h+=\"</body></html>\"}function a(){e.onload=f;e.contentWindow.document.open(\"text/html\",\"replace\");e.contentWindow.document.write(h);e.contentWindow.document.close()}function c(){var j=e.contentWindow.document.body.offsetHeight;if(!j){return}e.height=j}function f(){c();if(typeof(b.onload)===\"function\"){b.onload()}}return{initialize:function(j){b=j;b.width=b.width||500;b.height=b.height||Math.floor(b.width*0.75);g=document.getElementById(b.container);if(!g){return false}i();d();a()}}};\n(\"Tumblr\" in window)||(window.Tumblr={});Tumblr.LikeButtonUpdate=(function(){return{post_message_event:function(c,a){if(c[0]===\"tumblelog_like\"){if(c[1]&&document.getElementById(\"like_button_\"+c[1])){var b=document.getElementById(\"like_button_\"+c[1]);if(c[2]===\"liked\"){Tumblr.addClass(b,\"liked\")}else{Tumblr.removeClass(b,\"liked\")}}}}}})();Tumblr.LikeButton={loaded_iframes:{},like_statuses:{},get_status_by_page:function(c){var a=document.getElementById(\"tumblr_controls\");if(a){var b=\"get_like_states;\"+JSON.stringify({page:c});a.contentWindow.postMessage(b,\"*\")}},get_status_by_post_ids:function(b){var a=document.getElementById(\"tumblr_controls\");if(a){var c=\"get_like_states;\"+JSON.stringify({ids:b});a.contentWindow.postMessage(c,\"*\")}},post_message_event:function(d,b){if(d[0]===\"like_state_update\"){var e=JSON.parse(d[1]);if(e.length){for(var c=0,a=e.length;c<a;c++){Tumblr.LikeButton.queue_like_status(e[c]);Tumblr.LikeButton.update_like_state(e[c])}}else{Tumblr.LikeButton.queue_like_status(e);Tumblr.LikeButton.update_like_state(e)}}},logged_in_iframe_loaded:function(m,h){if(m[0]===\"logged_in_iframe_loaded\"){var g=\"\";var k=\"\";var l=window.location.pathname;if(l.indexOf(\"page\")!==-1||l.indexOf(\"post\")!==-1){var e=l.split(\"/\");for(var c=0;c<e.length;c++){if(e[c]===\"page\"&&e[c++]){g=e[c++];break}if(e[c]===\"post\"&&e[c++]){k=e[c++];break}}}if(k){Tumblr.LikeButton.get_status_by_post_ids([k])}else{if(g){Tumblr.LikeButton.get_status_by_page(g)}else{var f=[];var b=document.querySelectorAll(\".like_button\");for(var a=0;a<b.length;a++){var d=b[a];if(d.attributes[\"data-post-id\"]){f.push(d.attributes[\"data-post-id\"].value)}}if(f.length>0){Tumblr.LikeButton.get_status_by_post_ids(f)}}}}},like_iframe_loaded:function(b,a){if(b[0]===\"like_iframe_load\"){var c=JSON.parse(b[1]);if(c.post_id){Tumblr.LikeButton.loaded_iframes[c.post_id]=1;Tumblr.LikeButton.check_like_status(c.post_id,true)}}},check_like_status:function(b,a){var d=Tumblr.LikeButton.like_statuses[b];if(d){var c={post_id:b,state:(d===\"liked\")?true:false};Tumblr.LikeButton.update_like_state(c)}},queue_like_status:function(a){if(a.post_id){Tumblr.LikeButton.like_statuses[a.post_id]=(a.state)?\"liked\":\"unliked\"}},update_like_state:function(b){if(b.post_id){var a=document.getElementById(\"like_iframe_\"+b.post_id);if(a){a.contentWindow.postMessage(\"state_update;\"+JSON.stringify(b),\"http://assets.tumblr.com\")}}}};\n(\"Tumblr\" in window)||(window.Tumblr={});Tumblr.TumblelogFormResize=(function(){return{post_message_event:function(d,b){if(d[0]===\"resize_tumblelog_form_iframe\"){var e=d[1];var c=document.getElementById(e);var a=parseInt(d[2],10);if(e){c.height=a}}}}})();\nTumblr.PhotosetResize=(function(){return{post_message_event:function(c,b){if(c[0]===\"resize_photoset_iframe\"){var d=c[1],a=parseInt(c[2],10);document.getElementById(\"photoset_iframe_\"+d).height=a}}}})();\n(\"Tumblr\" in window)||(window.Tumblr={});Tumblr.AnalyticsFeatureSupport=(function(){return{post_message_event:function(c,a){if(c[0]===\"openInMobileAppSuccess\"){if(typeof(open_in_mobile_app)===\"function\"){if(c[1]&&c[1].length){var b=parseInt(c[1],10);open_in_mobile_app(b)}}}}}})();\nTumblr.IframeFeatureSupport=(function(){var g,d,a,b=new Tumblr.Styler({id:\"tumblr_iframe_css\",styles:{\"#tumblr_controls\":{display:\"block\",opacity:\"1\",visibility:\"hidden\",position:\"absolute\",top:\"0\",right:\"0\",width:\"1px\",height:\"1px\",\"z-index\":\"2147483647\"},\"#tumblr_controls.visible\":{visibility:\"visible\"},\".tumblr_mobile_banner\":{position:\"relative\"},\"html.tumblr_mobile_banner body iframe#tumblr_controls.visible.tumblr_sticky_iframe\":{position:\"absolute !important\",visibility:\"visible !important\",top:\"0 !important\",opacity:\"1 !important\"},\".tumblr_mobile_banner #tumblr_controls\":{position:\"absolute !important\",visibility:\"visible !important\",top:\"0 !important\",\"-webkit-transform\":\"translateY(-100%)\",\"-moz-transform\":\"translateY(-100%)\",\"-ms-transform\":\"translateY(-100%)\",\"-o-transform\":\"translateY(-100%)\",transform:\"translateY(-100%)\",\"-webkit-transition\":\"-webkit-transform 0.2s ease-out\",\"-moz-transition\":\"-moz-transform 0.2s ease-out\",\"-ms-transition\":\"-ms-transform 0.2s ease-out\",\"-o-transition\":\"-o-transform 0.2s ease-out\",transition:\"transform 0.2s ease-out\"},\".tumblr_mobile_banner #tumblr_controls.visible\":{\"-webkit-transform\":\"none\",\"-moz-transform\":\"none\",\"-ms-transform\":\"none\",\"-o-transform\":\"none\",transform:\"none\"}}});function e(){var i,j,h=document.querySelector('meta[name=\"color:Tumblr Controls\"]');if(h){i=h.getAttribute(\"content\")}if(!i){i=\"default\"}g.contentWindow.postMessage(\"color_match;\"+i,d)}function f(h,i){if(!(typeof h===\"string\"&&h.match(/\\d+%/))){h=parseInt(h,10)||0}if(!(typeof i===\"string\"&&i.match(/\\d+%/))){i=parseInt(i,10)||0}Tumblr.addClass(g,\"visible\");if(h){g.width=h;b.set(\"#tumblr_controls\",\"width\",h+\"px\")}if(i){g.height=i;b.set(\"#tumblr_controls\",\"height\",i+\"px\")}}function c(l,k){if(!l){l=200}var i=false;var j=k?document.getElementById(k):g;if(!j){return}var h=d;window.addEventListener(\"scroll\",function(){if(i){return}var m=window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop||0;var q=window.pageXOffset||document.body.scrollLeft||document.documentElement.scrollLeft||0;var p=Tumblr.windowDimensions();var o=document.body.offsetWidth-(q+p.width);var n=document.body.offsetHeight-(m+p.height);j.contentWindow.postMessage(\"parent_scroll;\"+m+\";\"+q+\";\"+o+\";\"+n,h);i=true;setTimeout(function(){i=false},l)})}return{post_message_event:function(q,o){a=document.getElementById(\"mobile_iframe\");g=document.getElementById(\"tumblr_controls\");d=q[q.length-1];if(a){if(q[0]===\"show_mobile_banner\"){if(q[1]===\"1\"){Tumblr.MobileBanner.showBanner();Tumblr.MobileBanner.mobile_origin=d}else{Tumblr.MobileBanner.showHeaderBanner()}}}else{if(g&&d){if(q[0]===\"color_match\"){e()}if(q[0]===\"location_change\"){if(!document.getElementById(\"iframe_flash_fix\")){var i=document.createElement(\"div\");i.id=\"iframe_flash_fix\";i.innerHTML=\"&shy;<style> #tumblr_controls { visibility: hidden; } </style>\";document.body.appendChild(i);document.getElementById(\"tumblr_controls\").onload=function(){document.body.removeChild(i)}}}if(q[0]===\"request_keywords\"){if(typeof tumblr_meta_keyboards!=\"undefined\"){g.contentWindow.postMessage(\"keywords;\"+tumblr_meta_keyboards,d)}}if(q[0]===\"teaser_iframe\"){if(q.length<2||!Tumblr.Teaser){return false}switch(q[1]){case\"initialize\":g.contentWindow.postMessage(\"teaser;enable\",d);return Tumblr.Teaser.initialize({slide_page:(q.length>2&&q[2]===\"slide\")});case\"load\":return Tumblr.Teaser.load_once();case\"open\":return Tumblr.Teaser.open();case\"close\":return Tumblr.Teaser.close();case\"toggle\":return Tumblr.Teaser.toggle();default:break}}if(q[0]===\"tagged_teaser_iframe\"){if(q.length<2||!Tumblr.TaggedTeaser){return false}switch(q[1]){case\"show\":Tumblr.TaggedTeaser.initialize({once:true,open:true});return;case\"open\":return Tumblr.TaggedTeaser.open(q.length>2?q[2]:false);case\"close\":return Tumblr.TaggedTeaser.close();case\"toggle\":return Tumblr.TaggedTeaser.toggle();default:break}}if(q[0]===\"resize_iframe\"){f(q[1],q[2]);if(q.length>2){switch(q[3]){case\"body_class\":if(q.length>3&&q[4]){Tumblr.addClass(document.body,q[4])}break;default:break}}}if(q[0]===\"mobile_resize_iframe\"){f(q[1],q[2]);var j=g.width;var p=g.height;var n=0;var h=false;var k=3;while(k<q.length){switch(q[k]){case\"corner_buttons\":h=true;k++;break;case\"add_iframe_class\":if(k+1<q.length){Tumblr.addClass(g,q[++k])}break;case\"remove_iframe_class\":if(k+1<q.length){Tumblr.removeClass(g,q[++k])}break;case\"margin_bottom\":if(k+1<q.length){n=parseInt(q[++k],10);if(!n){n=0}}break;default:break}k++}if(!h){Tumblr.addClass(document.body.parentNode,\"tumblr_mobile_banner\");b.set(\".tumblr_mobile_banner\",{top:(p-n)+\"px !important\"});b.set(\".tumblr_mobile_banner #tumblr_controls\",{top:(n-p)+\"px !important\"})}else{Tumblr.removeClass(document.body.parentNode,\"tumblr_mobile_banner\");b.set(\".tumblr_mobile_banner\",{position:\"fixed !important\",top:\"\"});b.set(\".tumblr_mobile_banner #tumblr_controls\",{position:\"fixed !important\",top:\"\"})}}if(q[0]===\"scroll_listen\"){var l=(q.length>2)?q[1]:false;var m=(q.length>3)?q[2]:false;c(l,m)}}}}}})();\nTumblr.VideoFeatureSupport=(function(){var b={setup_controls:{}};function f(){if(document.getElementById(\"tumblr_video_iframe_fullscreen\")){return true}var j=document.createElement(\"style\");j.id=\"tumblr_video_iframe_fullscreen\";j.innerHTML=\".tumblr_video_iframe.fullwindow { top: 0; bottom: 0; right: 0; left: 0; position: fixed; z-index: 8675309; height: 100%; width: 100%; }\";document.body.appendChild(j)}function e(j){f();if(j){b.iframe.className=\"tumblr_video_iframe fullwindow\"}else{b.iframe.className=\"tumblr_video_iframe\"}}function i(j){var k=document.getElementById(\"tumblr_controls\");if(!j){if(b.parent_post){b.parent_post.className=b.parent_post.className.replace(/\\s+is_lightbox/g,\"\")}document.body.className=document.body.className.replace(/\\s+is_lightbox/g,\"\");document.body.style.overflow=\"visible\";b.iframe.style.position=\"static\";b.iframe.style.height=\"100%\";b.iframe.style.width=\"100%\";b.iframe.style.zIndex=0;if(k){k.style.display=\"block\"}return}a();if(b.parent_post){b.parent_post.className+=\" is_lightbox\"}document.body.className+=\" is_lightbox\";document.body.style.overflow=\"hidden\";b.iframe.style.position=\"fixed\";b.iframe.style.height=\"100%\";b.iframe.style.width=\"100%\";b.iframe.style.top=0;b.iframe.style.right=0;b.iframe.style.left=0;b.iframe.style.bottom=0;b.iframe.style.zIndex=90210;if(k){k.style.display=\"none\"}}function g(j){if(!j){if(b.parent_post){b.parent_post.className=b.parent_post.className.replace(/\\s+is_fullscreen/g,\"\")}document.body.className=document.body.className.replace(/\\s+is_fullscreen/g,\"\");return}if(b.parent_post){b.parent_post.className+=\" is_fullscreen\"}document.body.className+=\" is_fullscreen\"}function a(){if(b.setup_controls[b.id]){return}var k=document.querySelector(\"#post_\"+b.id+\" .tumblr_lightbox_controls .close_button\");if(k){k.addEventListener(\"click\",function(l){b.iframe.contentWindow.postMessage(\"exit_lightbox\",b.origin_url);return false})}var j=document.querySelector(\"#post_\"+b.id+\" .tumblr_lightbox_controls .like_button\");if(j){j.addEventListener(\"click\",function(m){var l=this;var n={id:l.getAttribute(\"data-post-id\"),key:l.getAttribute(\"data-reblog-key\")};if(Tumblr.hasClass(l,\"already_like\")){Tumblr.unlike(n,{success:function(){Tumblr.removeClass(l,\"already_like\")}})}else{Tumblr.like(n,{success:function(){Tumblr.addClass(l,\"already_like\")}})}return false})}b.setup_controls[b.id]=true}function h(){if(typeof(get_cookie)===\"function\"){var j=get_cookie(\"supress_lightbox\"),k=parseInt(j.value,10)||0;if(j&&k>3){return\"supress_lightbox\"}if(!j){return\"enable_lightbox\"}}return false}function d(k){if(typeof(set_cookie)===\"function\"){var j=get_cookie(\"supress_lightbox\"),l=parseInt(j.value,10)||0;if(k>0&&k<5){}if(k===-1){if(l>1){}else{}}c(h())}}function c(l){if(!l){return}var k=document.querySelectorAll(\".tumblr_video_iframe.has_lightbox\");for(var j=0;j<k.length;j++){k[j].contentWindow.postMessage(l,\"http://\"+k[j].getAttribute(\"data-origin\"))}}return{post_message_event:function(l,j){var k=l[2];b.iframe=document.getElementById(\"tumblr_video_iframe_\"+k);if(!b.iframe){return}b.id=k;b.origin_url=\"http://\"+b.iframe.getAttribute(\"data-origin\");b.parent_post=document.getElementById(\"post_\"+k);if(l[0]===\"lightbox\"){i((l[1]===\"true\")?true:false)}if(l[0]===\"full_window\"){e((l[1]===\"true\")?true:false)}if(l[0]===\"full_screen\"){g((l[1]===\"true\")?true:false)}}}})();\nTumblr.AudioFeatureSupport=(function(){return{post_message_event:function(d,a){var c,b;if(d[0]===\"audioPlayerReady\"){c=document.getElementsByClassName(\"tumblr_audio_player\");for(b=0;b<c.length;b++){if(c[b].className.indexOf(\" tumblr_audio_player_\"+d[1])>=0){try{if(!c[b].style.webkitTransform){c[b].style.webkitTransform=\"translate3d(0px, 0px, 0px)\"}}catch(f){}}}}else{if(d[0]===\"audioPlayerPlaying\"){c=document.getElementsByClassName(\"tumblr_audio_player\");for(b=0;b<c.length;b++){if(c[b].className.indexOf(\" tumblr_audio_player_\"+d[1])<0){c[b].contentWindow.postMessage(\"pause\",\"*\")}}c=document.getElementsByClassName(\"tumblr_video_iframe\");for(b=0;b<c.length;b++){c[b].contentWindow.postMessage(\"pause\",\"*\")}}}}}})();\n(\"Tumblr\" in window)||(window.Tumblr={});Tumblr.mobileFullscreenIframe={og_store:function(){this.og_body_position=document.body.style.position;this.og_body_overflow=document.body.style.overflow;this.og_html_bg=this.html_el.style.backgroundColor;this.win_height=window.innerHeight+\"px\"},set_frame_height:function(){this.win_height=window.innerHeight+\"px\";this.win_width=window.innerWidth+\"px\";this.frame.style.height=this.win_height;this.frame.style.minWidth=this.win_width},enable:function(a){this.frame=document.getElementById(a);if(!this.frame){return}this.html_el=document.getElementsByTagName(\"html\")[0];this.og_store();this.orientation_height_change=this.set_frame_height.bind(this);window.addEventListener(\"orientationchange\",this.orientation_height_change,false);window.addEventListener(\"resize\",this.orientation_height_change,false);this.frame.className+=\" is_lightbox\";document.body.className+=\" is_lightbox\";document.body.style.position=\"relative\";document.body.style.left=\"-99999px\";document.body.style.overflow=\"hidden\";this.html_el.style.backgroundColor=\"#000000\";this.frame.style.cssText=\"position:fixed; overflow:hidden; width: 100%; top:0; left:0; right:0; bottom:0; z-index: 90210;\";this.frame.style.height=this.win_height;if(document.getElementById(\"tumblr_controls\")){document.getElementById(\"tumblr_controls\").style.display=\"none\"}},disable:function(a){this.frame=this.frame||document.getElementById(a);if(!this.frame){return}this.frame.className=this.frame.className.replace(/\\s+is_lightbox/,\"\");document.body.className=document.body.className.replace(/\\s+is_lightbox/,\"\");document.body.style.overflow=this.og_body_overflow;document.body.style.position=this.og_body_position;this.html_el.style.backgroundColor=this.og_html_bg;this.frame.style.cssText=\"\";if(document.getElementById(\"tumblr_controls\")){document.getElementById(\"tumblr_controls\").style.display=\"block\"}window.removeEventListener(\"orientationchange\",this.orientation_height_change,false);window.removeEventListener(\"resize\",this.orientation_height_change,false)}};\n(function(){function a(){var g=document.getElementById(\"tumblr_controls\");if(!g){return}var l=window.innerHeight||document.documentElement.clientHeight||document.getElementsByTagName(\"body\")[0].clientHeight;var i=g.offsetTop;var e=l-(g.offsetTop+g.offsetHeight);if(i===0||e===0){g.style.position=\"fixed\";return}if(!g.classList){return}var k=g.clientHeight;var h=\"        html body iframe#tumblr_controls {            -webkit-transition-property: opacity;               -moz-transition-property: opacity;                -ms-transition-property: opacity;                 -o-transition-property: opacity;                    transition-property: opacity;            -webkit-transition-duration: .3s;               -moz-transition-duration: .3s;                -ms-transition-duration: .3s;                 -o-transition-duration: .3s;                    transition-duration: .3s;            -webkit-transition-timing-function: ease;               -moz-transition-timing-function: ease;                -ms-transition-timing-function: ease;                 -o-transition-timing-function: ease;                    transition-timing-function: ease;        }        html body iframe#tumblr_controls.tumblr_sticky_iframe {            position: fixed !important;            top: 0 !important;        }        \";var b;var d=\"tumblr_sticky_iframe_style\";var j=document;if(j.createStyleSheet){b=j.createStyleSheet();b.cssText=h;if(d){b.owningElement.id=d}}else{b=j.createElementNS?j.createElementNS(\"http://www.w3.org/1999/xhtml\",\"style\"):j.createElement(\"style\");b.appendChild(j.createTextNode(h));if(d){b.id=d}j.getElementsByTagName(\"head\")[0].appendChild(b)}function f(){g.style.visibility=\"visible\";g.style.opacity=1}function c(){var m=window.pageYOffset||(document.documentElement&&document.documentElement.scrollTop)||document.body.scrollTop;if(m>=(i+k)){if(g.classList.contains(\"tumblr_sticky_iframe\")){return}g.style.visibility=\"hidden\";g.style.opacity=0;g.classList.add(\"tumblr_sticky_iframe\");setTimeout(f,400)}else{g.classList.remove(\"tumblr_sticky_iframe\")}}window.setInterval(c,500)}if(window.addEventListener){window.addEventListener(\"DOMContentLoaded\",a,false)}else{window.attachEvent(\"onload\",a)}})();\n(\"Tumblr\" in window)||(window.Tumblr={});Tumblr.PostMessageListener=(function(){return{initialize:function(d){d=d||function(){};var c=window.addEventListener?\"addEventListener\":\"attachEvent\";var b=window[c];var a=c==\"attachEvent\"?\"onmessage\":\"message\";b(a,function(g){if(typeof g.data!==\"string\"){return}var f=g.data.split(\";\");d(f,g.origin)},false)}}})();Tumblr.PostMessageListener.initialize(function(b,a){Tumblr.VideoFeatureSupport.post_message_event(b,a);Tumblr.AudioFeatureSupport.post_message_event(b,a);Tumblr.IframeFeatureSupport.post_message_event(b,a);Tumblr.AnalyticsFeatureSupport.post_message_event(b,a);Tumblr.TumblelogFormResize.post_message_event(b,a);Tumblr.PhotosetResize.post_message_event(b,a);Tumblr.LikeButtonUpdate.post_message_event(b,a);Tumblr.LikeButton.logged_in_iframe_loaded(b,a);Tumblr.LikeButton.post_message_event(b,a);Tumblr.LikeButton.like_iframe_loaded(b,a)});\n\n(function(i,k,a){var e=[\"webkit\",\"Moz\",\"ms\",\"O\"];var p={};var o;function g(q,t){var r=k.createElement(q||\"div\");var s;for(s in t){r[s]=t[s]}return r}function h(r){for(var q=1,s=arguments.length;q<s;q++){r.appendChild(arguments[q])}return r}var j=function(){var q=g(\"style\");h(k.getElementsByTagName(\"head\")[0],q);return q.sheet||q.styleSheet}();function c(u,q,v,y){var r=[\"opacity\",q,~~(u*100),v,y].join(\"-\");var s=0.01+v/y*100;var x=Math.max(1-(1-u)/q*(100-s),u);var w=o.substring(0,o.indexOf(\"Animation\")).toLowerCase();var t=w&&\"-\"+w+\"-\"||\"\";if(!p[r]){j.insertRule(\"@\"+t+\"keyframes \"+r+\"{0%{opacity:\"+x+\"}\"+s+\"%{opacity:\"+u+\"}\"+(s+0.01)+\"%{opacity:1}\"+(s+q)%100+\"%{opacity:\"+u+\"}100%{opacity:\"+x+\"}}\",0);p[r]=1}return r}function n(u,v){var t=u.style;var q;var r;if(t[v]!==a){return v}v=v.charAt(0).toUpperCase()+v.slice(1);for(r=0;r<e.length;r++){q=e[r]+v;if(t[q]!==a){return q}}}function f(q,s){for(var r in s){q.style[n(q,r)||r]=s[r]}return q}function m(s){for(var q=1;q<arguments.length;q++){var r=arguments[q];for(var t in r){if(s[t]===a){s[t]=r[t]}}}return s}function l(q){var r={x:q.offsetLeft,y:q.offsetTop};while((q=q.offsetParent)){r.x+=q.offsetLeft;r.y+=q.offsetTop}return r}var d={lines:12,length:7,width:5,radius:10,color:\"#000\",speed:1,trail:100,opacity:1/4,fps:20,zIndex:2000000000,className:\"spinner\",top:\"auto\",left:\"auto\"};var b=function b(q){if(!this.spin){return new b(q)}this.opts=m(q||{},b.defaults,d)};b.defaults={};b.prototype={spin:function(x){this.stop();var B=this;var q=B.opts;var r=B.el=f(g(0,{className:q.className}),{position:\"relative\",zIndex:q.zIndex});var A=q.radius+q.length+q.width;var C;var z;if(x){x.insertBefore(r,x.firstChild||null);z=l(x);C=l(r);f(r,{left:(q.left==\"auto\"?z.x-C.x+(x.offsetWidth>>1):q.left+A)+\"px\",top:(q.top==\"auto\"?z.y-C.y+(x.offsetHeight>>1):q.top+A)+\"px\"})}r.setAttribute(\"aria-role\",\"progressbar\");B.lines(r,B.opts);if(!o){var u=0;var s=q.fps;var w=s/q.speed;var v=(1-q.opacity)/(w*q.trail/100);var y=w/q.lines;!function t(){u++;for(var D=q.lines;D;D--){var E=Math.max(1-(u+D*y)%w*v,q.opacity);B.opacity(r,q.lines-D,E,q)}B.timeout=B.el&&setTimeout(t,~~(1000/s))}()}return B},stop:function(){var q=this.el;if(q){clearTimeout(this.timeout);if(q.parentNode){q.parentNode.removeChild(q)}this.el=a}return this},lines:function(s,u){var r=0;var q;function t(v,w){return f(g(),{position:\"absolute\",width:(u.length+u.width)+\"px\",height:u.width+\"px\",background:v,boxShadow:w,transformOrigin:\"left\",transform:\"rotate(\"+~~(360/u.lines*r)+\"deg) translate(\"+u.radius+\"px,0)\",borderRadius:(u.width>>1)+\"px\"})}for(;r<u.lines;r++){q=f(g(),{position:\"absolute\",top:1+~(u.width/2)+\"px\",transform:u.hwaccel?\"translate3d(0,0,0)\":\"\",opacity:u.opacity,animation:o&&c(u.opacity,u.trail,r,u.lines)+\" \"+1/u.speed+\"s linear infinite\"});if(u.shadow){h(q,f(t(\"#000\",\"0 0 4px #000\"),{top:2+\"px\"}))}h(s,h(q,t(u.color,\"0 0 1px rgba(0,0,0,.1)\")))}return s},opacity:function(r,q,s){if(q<r.childNodes.length){r.childNodes[q].style.opacity=s}}};!function(){var r=f(g(\"group\"),{behavior:\"url(#default#VML)\"});var q;if(!n(r,\"transform\")&&r.adj){for(q=4;q--;){j.addRule([\"group\",\"roundrect\",\"fill\",\"stroke\"][q],\"behavior:url(#default#VML)\")}b.prototype.lines=function(v,u){var t=u.length+u.width;var B=2*t;function A(){return f(g(\"group\",{coordsize:B+\" \"+B,coordorigin:-t+\" \"+-t}),{width:B,height:B})}var w=-(u.width+u.length)*2+\"px\";var z=f(A(),{position:\"absolute\",top:w,left:w});var y;function x(C,s,D){h(z,h(f(A(),{rotation:360/u.lines*C+\"deg\",left:~~s}),h(f(g(\"roundrect\",{arcsize:1}),{width:t,height:u.width,left:u.radius,top:-u.width>>1,filter:D}),g(\"fill\",{color:u.color,opacity:u.opacity}),g(\"stroke\",{opacity:0}))))}if(u.shadow){for(y=1;y<=u.lines;y++){x(y,-2,\"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)\")}}for(y=1;y<=u.lines;y++){x(y)}return h(v,z)};b.prototype.opacity=function(t,s,v,u){var w=t.firstChild;u=u.shadow&&u.lines||0;if(w&&s+u<w.childNodes.length){w=w.childNodes[s+u];w=w&&w.firstChild;w=w&&w.firstChild;if(w){w.opacity=v}}}}else{o=n(r,\"animation\")}}();i.Spinner=b})(window,document);\n(function(b,a){var c=function(d,e){this.$container=b(d);this.container=this.$container[0];this.options=b.extend({on_infinite_scroll:function(){},on_scroll:function(){}},e||{});this.$wrapper=b('<div class=\"popover_scrollbar\"></div>');this.$track=b('<div class=\"popover_scrollbar_track\"></div>');this.$thumb=b('<div class=\"popover_scrollbar_thumb\"></div>');this.is_scrollable=false;this.is_scrolling=false;this.$track.on(\"mousedown\",b.proxy(this.on_scrollbar_mousedown,this));this.$container.on(\"scroll.popover_scrollbar\",b.proxy(this.on_scroll,this));this.init()};c.prototype={init:function(){this.$container.wrap(this.$wrapper);this.update()},update:function(){if(!this.is_scrollable&&this.container.scrollHeight>this.$container.height()){this.is_scrollable=true;this.$container.after(this.$track);this.$track.append(this.$thumb);if(!(\"ontouchstart\" in document.documentElement)){this.$container.on(\"mousewheel DOMMouseScroll\",b.proxy(this.steal_scroll,this))}}if(this.is_scrollable){var d=this.$container.height()/this.container.scrollHeight;this.$thumb.height(this.$track.height()*d)}this.on_scroll()},steal_scroll:function(f){var d=f.currentTarget,g=f.originalEvent.wheelDelta||-f.originalEvent.detail;if(g>0&&d.scrollTop<=0){f.preventDefault()}if(g<0&&d.scrollTop>=d.scrollHeight-b(d).height()){f.preventDefault()}},on_scrollbar_mousedown:function(d){d.preventDefault();this.$track.addClass(\"is_scrolling\");b(window).on(\"mousemove.popover_scrollbar\",b.proxy(this.on_scrollbar_mousemove,this));b(window).on(\"mouseup.popover_scrollbar\",b.proxy(this.on_scrollbar_mouseup,this));this.on_scrollbar_mousemove(d)},on_scrollbar_mousemove:function(h){var f=h.pageY-this.$track.offset().top,g=f/this.$track.height(),d=this.container.scrollHeight-this.$container.height();if(g>=0&&g<=1){this.$container.scrollTop(d*g)}},on_scrollbar_mouseup:function(d){this.$track.removeClass(\"is_scrolling\");b(window).off(\".popover_scrollbar\")},on_scroll:function(g){var f=this.container.scrollTop/(this.container.scrollHeight-this.$container.height()),d=this.$track.height()-this.$thumb.height();this.$thumb.css(\"top\",d*f);this.options.on_scroll(this.container.scrollTop,f);if(f>0.9){this.options.on_infinite_scroll()}},destroy:function(){if(this.is_scrollable){this.$track.off().remove();this.$thumb.remove();this.$container.off(\".popover_scrollbar\")}this.$container.unwrap();this.is_scrollable=false;this.is_scrolling=false}};a.PopoverScroll=c})(jQuery,Tumblr);\n(function(b,a){var c={init:function(l){var h=b(document);var d=\"placeholder\" in document.createElement(\"input\");var j=\"placeholder\" in document.createElement(\"textarea\");l=b.extend({},l);var k=(l.els)?b(l.els):b(\"input, textarea\");var i=l.clear_on_submit;var e=l.force;function m(p){var n=b(p.target);var o=n.get(0).nodeName.toLowerCase();if(!d||!j||e){if(n.hasClass(\"placeholder\")){n.val(\"\").removeClass(\"placeholder\")}if(n.attr(\"data-type\")==\"password\"){try{n.get(0).type=\"password\"}catch(q){}}}}function f(n){if(!d||!j||e){g(n.target)}}function g(n){$input=b(n);var o=$input.attr(\"placeholder\");if(o&&$input.val()===\"\"){$input.addClass(\"placeholder\").val(o)}if($input.attr(\"type\")==\"password\"&&($input.val()===\"\"||$input.val()===o)){try{$input.get(0).type=\"text\"}catch(p){}$input.attr(\"data-type\",\"password\")}}if(!d||!j||e){h.on(\"focus\",k.selector,m);h.on(\"blur\",k.selector,f);_.each(k,function(o){g(o);if(i){var n=b(o);n.parents(\"form\").on(\"submit\",function(){if(n.val()===n.attr(\"placeholder\")){n.val(\"\")}})}})}}};a.PlaceHolders=c})(jQuery,this.Tumblr||(this.Tumblr={}));\n(function(b,a,c){if(c==null||c.Events==null){throw\"Tumblr.Events depends on Backbone.Events\"}a.Events=_.extend({},c.Events)})(jQuery,Tumblr,Backbone);\n(function(o,g,n,f,j,k){var e=g(k);var a=g(j);var m={};var i={};m.documentHeight=i.documentHeight=null;m.windowHeight=i.windowHeight=null;m.windowWidth=i.windowHeight=null;m.windowScrollTop=i.windowScrollTop=null;m.windowScrollY=i.windowScrollY=null;var l=(!Object.hasOwnProperty.call(j,\"requestAnimationFrame\")&&j.requestAnimationFrame)||(!Object.hasOwnProperty.call(j,\"webkitRequestAnimationFrame\")&&j.webkitRequestAnimationFrame)||(!Object.hasOwnProperty.call(j,\"mozRequestAnimationFrame\")&&j.mozRequestAnimationFrame)||(!Object.hasOwnProperty.call(j,\"oRequestAnimationFrame\")&&j.oRequestAnimationFrame)||(function(r){j.setTimeout(function(){r()},1000/20)});function b(){var s;function r(t){q();f.Events.trigger(\"DOMEventor:flatresize\",m);s=false}a.on(\"resize.DOMEventor-nextResizeLoop\",function(){if(!s){l(r);s=true}})}function d(){var s;var r=0;function t(u){if(!(r--)){i.documentHeight=m.documentHeight;m.documentHeight=e.height();r=1}i.windowScrollTop=i.windowScrollY=m.windowScrollTop;m.windowScrollTop=m.windowScrollY=a.scrollTop();f.Events.trigger(\"DOMEventor:flatscroll\",m);s=false}a.on(\"scroll.DOMEventor-nextScrollLoop\",function(){if(!s){l(t);s=true}})}function q(){i.documentHeight=m.documentHeight;m.documentHeight=e.height();i.windowHeight=m.windowHeight;m.windowHeight=a.height();i.windowWidth=m.windowWidth;m.windowWidth=a.width();i.windowScrollTop=i.windowScrollY=m.windowScrollTop;m.windowScrollTop=m.windowScrollY=a.scrollTop()}function h(){var r={8:\"backspace\",9:\"tab\",13:\"enter\",16:\"shift\",17:\"ctrl\",18:\"alt\",20:\"capslock\",27:\"escape\",33:\"pageup\",34:\"pagedown\",35:\"end\",36:\"home\",37:\"left\",38:\"up\",39:\"right\",40:\"down\",45:\"insert\",46:\"delete\",48:\"0\",49:\"1\",50:\"2\",51:\"3\",52:\"4\",53:\"5\",54:\"6\",55:\"7\",56:\"8\",57:\"9\",65:\"a\",66:\"b\",67:\"c\",68:\"d\",69:\"e\",70:\"f\",71:\"g\",72:\"h\",73:\"i\",74:\"j\",75:\"k\",76:\"l\",77:\"m\",78:\"n\",79:\"o\",80:\"p\",81:\"q\",82:\"r\",83:\"s\",84:\"t\",85:\"u\",86:\"v\",87:\"w\",88:\"x\",89:\"y\",90:\"z\",91:\"leftmeta\",92:\"rightmeta\",93:\"rightmeta\",96:\"num0\",97:\"num1\",98:\"num2\",99:\"num3\",100:\"num4\",101:\"num5\",102:\"num6\",103:\"num7\",104:\"num8\",105:\"num9\",106:\"multiply\",107:\"add\",109:\"subtract\",110:\"decimal\",111:\"devide\",112:\"f1\",113:\"f2\",114:\"f3\",115:\"f4\",116:\"f5\",117:\"f6\",118:\"f7\",119:\"f8\",120:\"f9\",121:\"f10\",122:\"f11\",123:\"f12\",144:\"numlock\",145:\"scrolllock\",186:\"semicolon\",187:\"equal\",188:\"comma\",189:\"dash\",190:\"period\",191:\"forwardslash\",192:\"graveaccent\",219:\"openbracket\",220:\"backslash\",221:\"closebracket\",222:\"singlequote\"};e.on(\"keydown.DOMEventor keyup.DOMEventor\",function(v){var w=v.target.nodeName.toUpperCase();if(w===\"INPUT\"||w===\"TEXTAREA\"||w===\"SELECT\"){return}var s=v.type;if(!(s===\"keyup\"||s===\"keydown\")){return}var u=v.which;var t=s+\":\"+(v.altKey&&u!==18?\"alt+\":\"\")+(v.ctrlKey&&u!==17?\"ctrl+\":\"\")+(v.metaKey&&(u!==91&&u!==92&&u!==93)?\"meta+\":\"\")+(v.shiftKey&&u!==16?\"shift+\":\"\")+(r[u]||\"\");f.Events.trigger(\"DOMEventor:\"+t,v,t)});f.Events.off(\"DOMEventor:startKeyboardObserver\");f.Events.on(\"DOMEventor:stopKeyboardObserver\",c)}function c(){e.off(\"keydown.DOMEventor keyup.DOMEventor\");f.Events.on(\"DOMEventor:startKeyboardObserver\",h);f.Events.off(\"DOMEventor:stopKeyboardObserver\")}var p={init:function(){if(!(f.Events instanceof Object)||f.Events.on!==n.Events.on||f.Events.off!==n.Events.off||f.Events.trigger!==n.Events.trigger){throw\"DOMEventor depends on Tumblr.Events being a mixin of Backbone.Events\"}q();d();b();h();f.Events.on(\"DOMEventor:updateRect\",q)},rect:function(){return m},lastRect:function(){return i}};f.DOMEventor=p})(_,jQuery,Backbone,Tumblr,window,document);\n(function(c,a){var b=new (Backbone.View.extend({id:\"glass_overlay\",events:{click:\"click\"},locked:false,initialize:function(){},render:function(){c(document.body).prepend(this.$el);this.rendered=true;c(document).on(\"keydown\",_.bind(this.keydown,this))},click:function(){if(this.locked){return}this.hide()},keydown:function(d){if(this.locked){return}if(this.visible){if(d.keyCode==27){this.hide()}}},show:function(e,d){if(Tumblr.KeyCommands&&!Tumblr.KeyCommands.suspended){Tumblr.KeyCommands.suspend();this.glass_suspended_keys=true}if(!this.rendered){this.render()}d=d||\"\";this.on_close=e||function(){};this.visible=true;this.$el.addClass(\"show\");setTimeout(_.bind(function(){this.$el.addClass(d)},this),0)},hide:function(){this.visible=false;this.$el.removeClass(\"show\");this.on_close();if(this.glass_suspended_keys){Tumblr.KeyCommands.resume();this.glass_suspended_keys=false}},lock:function(){this.locked=true},unlock:function(){this.locked=false}}))();a.Glass=b})(jQuery,Tumblr);\n(function(c,b){var a={get:function(d){return new RegExp(d+\"=([^;]+)\").test(unescape(document.cookie))?RegExp.$1:null},set:function(d,j,i,f){f=f||{};var e=new Date();var k=f.path?f.path:\"/\";var h=f.is_secure?true:false;var g=f.domain?f.domain:\"\";e.setTime(e.getTime()+(i*1000));document.cookie=d+\"=\"+escape(j)+((i==null)?\"\":\";expires=\"+e.toGMTString())+\";path=\"+k+((h===false)?\"\":\";secure\")+((g===\"\")?\"\":\";domain=\"+g)},unset:function(d){a.set(d,\"\",-1)}};b.Cookie=a})(jQuery,Tumblr);\n(function(d,b){var a=Backbone.View.extend({events:{click:\"click\"},initialize:function(e){this.button=d(e.el||this.$el);this.popover=e.popover||this.$el.find(\".popover\");this.on_hide=e.on_hide||function(){};this.on_show=e.on_show||function(){};this.auto_show=e.auto_show||false;if(this.auto_show){this.show()}a.register(this)},click:function(){this.toggle()},is_showing:false,show:function(){var e=this;Tumblr.Glass.show(function(){this.hide();this.on_hide()}.bind(this));this.popover.show();this.on_show();this.is_showing=true},hide:function(){var e=this;Tumblr.Glass.on_close=function(){if(e.is_showing){e.popover.hide()}};Tumblr.Glass.hide();this.is_showing=false},toggle:function(){return this.is_showing?this.hide():this.show()},});a.instances=[];a.register=function(e){this.instances.push(e)};a.hide_all=function(){for(var e=0;e<this.instances.length;e++){this.instances[e].hide()}};a.hide_all_after=function(e){e=(e)?e:100;setTimeout(function(){for(var f=0;f<this.instances.length;f++){this.instances[f].hide()}}.bind(this),e)};var c=a.extend({initialize:function(e){Tumblr.BasePopover.prototype.initialize.apply(this,arguments);this.skip_glass=e.skip_glass||false;this.skip_offset=e.skip_offset||false;this.direction=e.direction||\"down\";this.align=e.align||\"left\";this.options=e||{};this.options.left=e.left||0;this.options.right=e.right||0;this.options.top=e.top||0;this.options.bottom=e.bottom||0},click:function(){if(!this.options.disable_auto_show){this.show()}return},show:function(){if(this.options.directional){this.position()}var e=this;if(!this.skip_glass){Tumblr.Glass.show(function(){e.hide();e.on_hide()})}if(!this.$el.is(this.popover.parent())){var g={top:0,left:0};var f={};if(!this.skip_offset){g=this.button.position()}if(this.direction!==\"up\"){f.top=(this.options.top+g.top)+\"px\"}else{f.bottom=(this.options.bottom-g.top-this.button.height())+\"px\"}if(this.align!==\"right\"){f.left=(this.options.left+g.left)+\"px\"}else{f.right=(this.options.right-g.left-this.button.width())+\"px\"}this.popover.css(f)}this.popover.show();this.on_show();this.is_showing=true},hide:function(){var e=this;if(!this.skip_glass){Tumblr.Glass.on_close=function(){if(e.is_showing){e.popover.hide()}};Tumblr.Glass.hide()}this.is_showing=false},position:function(){this.popover.show();var i=d(window);var e={top:i.scrollTop(),left:i.scrollLeft()};this.popover.removeClass(\"up nipple_on_bottom\");e.right=e.left+i.width();e.bottom=e.top+i.height();var h=this.popover.offset();var g=this.popover.outerHeight();var f=i.height();h.right=h.left+this.popover.outerWidth();h.bottom=h.top+g;if(f>g&&e.bottom<h.bottom){this.popover.addClass(\"up nipple_on_bottom\")}}});b.BasePopover=a;b.Popover=c})(jQuery,Tumblr);\n(function(c,b){var a=Tumblr.Popover.extend({initialize:function(d){this.options=d||{};this.form=this.$(\"form\");this.form.submit(_.bind(this.submit_form,this));Tumblr.Popover.prototype.initialize.apply(this,arguments)},show:function(){Tumblr.Popover.prototype.show.call(this);if(!this.options.no_autofocus){this.$(\"form :input\").first().focus()}},submit_form:function(){var d=this.form.serializeArray();d.push({name:\"form_key\",value:c(\"#tumblr_form_key\").attr(\"content\")});c.ajax({url:this.form.attr(\"action\"),type:this.form.attr(\"method\")||\"post\",data:d,success:_.bind(this.on_success,this)||function(){},error:_.bind(function(){if(_.isFunction(this.on_error)){this.on_error()}Tumblr.Dialog.alert(l10n_str.ajax_error)},this),complete:_.bind(function(){if(!this.options.wait){this.hide()}if(_.isFunction(this.on_complete)){this.on_complete()}},this)});this.on_submit&&this.on_submit();return false}});b.PopoverWithForm=a})(jQuery,Tumblr);\n(function(c,a){var b=function(d){return function(g,f){if(!d){return}g=g||{};f=f||{};if(f.init){f.init()}var e=c.ajax({url:d,type:\"POST\",data:{form_key:c(\"#tumblr_form_key\").attr(\"content\"),data:g}});e.success(function(){if(f.success){f.success()}});e.error(function(){if(f.error){f.error()}else{Tumblr.Dialog.alert(l10n_str.ajax_error)}});e.complete(function(){if(f.complete){f.complete()}});return e}};a.follow=b(\"/svc/follow\");a.unfollow=b(\"/svc/unfollow\");a.like=b(\"/svc/like\");a.unlike=b(\"/svc/unlike\");a.ignore=b(\"/svc/ignore\");a.report=b(\"/svc/report\");a.reply=b(\"/svc/reply\")})(jQuery,Tumblr||{});\n(function(c,b){var a=Tumblr.Popover.extend({is_scroll_disabled:false,initialize:function(d){this.options=d||{};Tumblr.Popover.prototype.initialize.apply(this,arguments);this.$container=this.$el.find(\".popover_inner\");this.$scroll=this.$el.find(\".popover_scroll\");this.options.disable_infinite_scroll=d.disable_infinite_scroll||false;this.on_load_more=d.on_load_more||function(){};this.scrollbar=null;if(!this.$scroll.length){this.is_scroll_disabled=true}},show:function(){Tumblr.Popover.prototype.show.apply(this,arguments);this.position_vertical();if(Tumblr.PopoverScroll){this.scrollbar=new Tumblr.PopoverScroll(this.$scroll,{on_infinite_scroll:c.proxy(this.load_more,this)})}this.$scroll.attr(\"tabindex\",\"-1\").focus()},hide:function(){if(this.$container){this.$container.css({top:\"\",height:\"\"})}if(this.$scroll){this.$scroll.css(\"height\",\"\")}if(this.scrollbar){this.scrollbar.destroy();this.scrollbar=null}Tumblr.Popover.prototype.hide.apply(this,arguments)},update:function(){if(this.scrollbar){this.scrollbar.update()}this.position_vertical()},load_more:function(){if(this.is_scroll_disabled||this.options.disable_infinite_scroll){return}this.on_load_more()},position_vertical:function(){if(!this.$container||!this.$scroll){return}var e=50-(this.$container.height()*0.5),f=c(window).height(),h,g,d;this.$container.css(\"top\",(e<15)?e:15);if(this.$scroll.height()>f-80){this.$scroll.css(\"height\",f-80)}d=this.$container.height();h=this.$container.offset().top-c(window).scrollTop(),g=parseInt(this.$container.css(\"top\"),10);if(h<30){g=g-(h-30);this.$container.css(\"top\",(g<15)?g:15)}else{if(h+d>f-30){g=g-((h+d)-f+50);this.$container.css(\"top\",(g>-(d-80))?g:-(d-80))}}if(this.scrollbar){this.scrollbar.update()}}});b.PopoverWithScroll=a})(jQuery,Tumblr);(function(c,a){var b=Tumblr.Popover.extend({events:{click:\"click\"},initialize:function(d){this.$popover=this.$el;this.popover=this.el},click:function(e){var d=e.target;if(d.id==\"modal_alert_accept_button\"){this.on_accept()}if(d.id==\"modal_alert_cancel_button\"){this.on_cancel()}},show:function(){Tumblr.Glass.show(null,\"dark\");this.$popover.removeClass(\"belowscreen\").removeClass(\"abovescreen\").addClass(\"up\").addClass(\"modal_is_visible\");c(document.body).addClass(\"popover_alert_active\");this.on_show()},hide:function(){Tumblr.Glass.hide();this.$popover.addClass(\"abovescreen\").removeClass(\"up\").removeClass(\"belowscreen\").removeClass(\"modal_is_visible\");c(document.body).removeClass(\"popover_alert_active\");this.on_hide()},cancel:function(){this.on_cancel()},on_accept:function(){this.hide()},on_show:function(){},on_hide:function(){},on_cancel:function(){}});a.Alert=b})(jQuery,Tumblr);(function(c,a){var b=Backbone.View.extend({initialize:function(){if(!this.$el.length){return}this.popover=new Tumblr.Popover({el:this.$el,on_show:_.bind(function(){this.$el.addClass(\"show\");this.$el.closest(\"#sidebar_footer_nav\").addClass(\"show_popover\");this.close_on_scroll()},this),on_hide:_.bind(function(){this.$el.removeClass(\"show\");this.$el.closest(\"#sidebar_footer_nav\").removeClass(\"show_popover\")},this)});this.popover_button=this.$el.find(\".popover_legal_link\");this.popover_button.on(\"click\",_.bind(function(d){this.popover.show();return false},this));this.update_position()},update_position:function(){var d=Math.floor(this.popover.popover.outerWidth()/2);this.popover.popover.css({marginLeft:-d+\"px\"})},close_on_scroll:function(){c(window).on(\"scroll.legalpopover\",_.bind(function(){this.popover.hide();c(window).off(\"scroll.legalpopover\")},this))}});Tumblr.LegalPopover=b})(jQuery,Tumblr);(function(c,b){var a=Backbone.View.extend({el:\"#user_tools\",events:{\"focus #search_query\":\"focus_search_query\",\"click #popover_tracked_tags .popover_menu_item\":\"click_popover\",\"submit #search_form\":\"submit\",\"mouseenter #popover_tracked_tags\":\"mouseenter\"},initialize:function(d){this.options=d||{};this.popover_selector=this.options.popover_selector||\"#popover_tracked_tags\";this.$search_field=this.$(\"#search_field\");this.$search_form=this.$(\"#search_form\");this.$search_query=this.$(\"#search_query\");this.$popover=this.$(this.popover_selector);this.$tracked_tags=this.$(this.popover_selector+\" .tracked_tags\");this.$autocomplete_results=this.$(this.popover_selector+\" .autocomplete_results\");this.popover=new Tumblr.Popover({el:this.$search_query,popover:this.$popover,disable_auto_show:true,on_show:_.bind(function(){this.bind_key_nav()},this),on_hide:_.bind(function(){c(\"#unread_tag_notice\").show();c(\"#search_query\").addClass(\"with_unread\");this.$search_field.removeClass(\"active\");this.unbind_key_nav()},this)});this.setup_autocomplete();this.keyevents={bind_key_down:_.bind(this.keydown,this),bind_key_up:_.bind(this.keyup,this)}},setup_autocomplete:function(){this.auto_complete=new Tumblr.AutoCompleteTags({el:this.$search_query,store:\"/svc/tags/featured\",popover:this.popover,include:Tumblr.EXISTING_TAGS})},focus_search_query:function(){this.$search_field.addClass(\"active\");this.currentIndex=-1;if(!this.has_children(this.$tracked_tags)&&!this.has_children(this.$autocomplete_results)){return}this.popover.show();this.$(\"#unread_tag_notice\").hide();this.$search_query.removeClass(\"with_unread\")},mouseenter:function(d){if(this.in_popover(this.in_focus())){this.in_focus().blur()}},has_children:function(d){return(d.children().length>0)?true:false},click_popover:function(g){var f=this.$(g.currentTarget);var d=f.find(\"a\").attr(\"href\");if(g.metaKey||g.altKey){window.open(d)}else{window.location=d}this.popover.hide();g.stopPropagation();g.preventDefault()},bind_key_nav:function(){c(document).off(\"keydown\",this.keyevents.bind_key_down);c(document).off(\"keyup\",this.keyevents.bind_key_up);c(document).on(\"keydown\",this.keyevents.bind_key_down);c(document).on(\"keyup\",this.keyevents.bind_key_up)},unbind_key_nav:function(){c(document).off(\"keyup\",this.keyevents.bind_key_up);c(document).off(\"keydown\",this.keyevents.bind_key_down)},next:function(){this.$search_query.blur();this.currentIndex++;this.set_active(\"next\")},previous:function(){this.$search_query.blur();this.currentIndex--;this.set_active(\"previous\")},set_active:function(f){var d=c(this.popover_selector+\" .popover_menu_item a\").filter(\":visible\");var e=d.filter(\":focus\");if(e.length){this.currentIndex=(f===\"previous\")?d.index(e)-1:d.index(e)+1}if(this.currentIndex>=0&&this.currentIndex<d.length){d.get(this.currentIndex).focus()}else{if(this.currentIndex==-2&&f===\"previous\"){d.get(d.length-1).focus();this.currentIndex=d.length-1}else{this.currentIndex=-1;this.$search_query.focus()}}},in_focus:function(){return c(document.activeElement)},contains:function(d){return(this.in_popover(d)||this.$search_query.is(d))?true:false},in_popover:function(d){return this.$popover.has(d).length},keyup:function(d){if(d.keyCode===9){if(!this.contains(this.in_focus())){this.popover.hide();this.unbind_key_nav();this.in_focus().blur()}}},keydown:function(d){switch(d.keyCode){case 27:this.$search_query.blur();return;case 38:d.preventDefault();this.previous();break;case 40:d.preventDefault();this.next();break;default:break}},submit:function(d){if(c.trim(this.$search_query.val())===\"\"){return false}return true}});b.TagPopover=a})(jQuery,Tumblr);(function(b,a){var c=Backbone.View.extend({events:{keyup:\"keyup\"},initialize:function(d){this.options=d||{};this.init=true;this.init_value=this.$el.val();this.related_base_url=this.options.related_url||\"/related_tags/\";this.threshold=this.options.threshold||1;this.store=this.options.store||[];this.include=this.options.include||[];if(typeof this.store===\"string\"){this.ajax_store=true}this.popover=this.options.popover;this.$auto_results=b(\"#popover_tracked_tags .autocomplete_results\");this.$tracked=b(\"#popover_tracked_tags .tracked_tags\");this.$related=b(\"#popover_tracked_tags .related_tags\");this.tags_template=b(\"#autocomplete_tags_template\").html();this.related_template=b(\"#related_tags_template\").html()},keyup:_.throttle(function(d){this.lookup()},100),get_store:function(d){if(this.store_cache){if(typeof d===\"function\"){d.call(this)}return}if(this.store_xhr){this.store_xhr.abort()}this.store_xhr=b.ajax({url:this.store,dataType:\"json\"});this.store_xhr.done(_.bind(function(e){this.store_cache=this.include_unique(e,this.include,\"tag_id\",\"tag\");if(typeof d===\"function\"){d.call(this)}},this))},include_unique:function(j,d,h,e){if(!d.length){return j}if(h){var f=[];_.each(d,function(k){f.push(k[h])});var g=[];_.each(j,function(k){if(_.indexOf(f,k[h])===-1){g.push(k)}});j=b.merge(g,d);j.sort(function(n,l){var m=n[e].toLowerCase();var k=l[e].toLowerCase();if(m<k){return -1}if(m>k){return 1}return 0})}else{j=b.merge(d,j)}return j},lookup:function(){var e=b.trim(this.$el.val());var f=e.length;var d;if(f>=this.threshold&&!this.init&&e!==this.init_value){if(this.ajax_store){this.get_store(_.bind(function(){d=this.filter(this.store_cache,e);this.update(d)},this))}else{d=this.filter(this.store,e);this.update(d)}}else{this.update([])}this.init=false;this.init_value=\"\"},escapeRegex:function(d){return d.replace(/[\\-\\[\\]{}()*+?.,\\\\\\^$|#\\s]/g,\"\\\\$&\")},filter:function(f,e){var d=new RegExp(this.escapeRegex(e),\"i\");return b.grep(f,function(g){return d.test(g.tag||g)})},update:function(e){if(e.length){this.popover.show();var d={items:e};var f=_.template(this.tags_template);this.$auto_results.html(f(d));this.$tracked.hide();if(e.length===1){this.get_related(e[0][\"tag\"])}else{this.$related.empty()}}else{if(this.$tracked.children().length>0){this.$tracked.show()}else{this.popover.hide()}this.$auto_results.empty();this.$related.empty()}},get_related:function(d){var e=encodeURIComponent(d.toLowerCase());if(this.cache[e]){this.update_related(this.cache[e]);return}if(this.xhr){this.xhr.abort()}this.xhr=b.ajax({url:this.related_base_url+e,dataType:\"json\"});this.xhr.done(_.bind(function(f){this.cache[e]=f;this.update_related(f)},this))},update_related:function(d){if(d.length){var e=_.template(this.related_template);this.$related.html(e({items:d}))}},cache:{}});a.AutoCompleteTags=c})(jQuery,Tumblr);(function(c,a){var b=Backbone.View.extend({el:\"#dashboard_controls_open_blog\",events:{\"click #popover_button_blogs\":\"click_popover_button\",\"click #popover_blogs .popover_menu_item\":\"click_popover_blogs\"},initialize:function(){if(c(\"#popover_blogs\").length){this.popover=new Tumblr.Popover({el:this.$(\"#popover_button_blogs\"),popover:this.$(\"#popover_blogs\"),disable_auto_show:true,on_hide:function(){c(\"#all_channel_count_notice\").show()}});this.sortable=new Tumblr.SortableView({el:this.$(\"#popover_blogs\"),items:\".item\",callback:_.bind(this.save,this),scrollable:true})}},click_popover_button:function(d){if(d.target.id==\"open_blog_link\"){return}d.stopPropagation();d.preventDefault();this.popover.show();c(\"#all_channel_count_notice\").hide()},click_popover_blogs:function(f){var e=this.$(f.currentTarget);var d=e.find(\"a\").attr(\"href\");if(f.metaKey||f.altKey){window.open(d)}else{window.location=d}this.popover.hide();f.stopPropagation();f.preventDefault()},save:function(e){var d=_.map(e.sequence(),function(f){return f.replace(\"menuitem-\",\"\")});c.ajax({type:\"POST\",url:\"/order\",data:\"channel_names=\"+JSON.stringify(d)})}});a.BlogMenu=b})(jQuery,Tumblr);(function(c,b){var a=Tumblr.Popover.extend({events:{click:\"toggle\",\"click .popover_menu_item a\":\"select_language\"},initialize:function(){if(!this.$el.length){return}Tumblr.Popover.prototype.initialize.apply(this,arguments);this.update_timezone();this.update_position();this.language_form=this.$el.find(\"#set_language\");this.language_form_type=this.language_form.attr(\"method\");this.language_form_url=this.language_form.attr(\"action\")},show:function(){Tumblr.Popover.prototype.show.call(this);this.$el.closest(\"#sidebar_footer_nav\").addClass(\"show_popover\");this.update_position()},hide:function(){Tumblr.Popover.prototype.hide.call(this);this.$el.closest(\"#sidebar_footer_nav\").removeClass(\"show_popover\")},select_language:function(d){var e=c(d.target);d.preventDefault();c(\"#language_selected\").val(e.attr(\"data-lang\"));c(\"#language_switcher .current\").removeClass(\"current\");if(this.spinner){this.spinner.stop()}else{this.spinner=new Spinner({top:\"auto\",left:\"100%\",width:2,radius:3,length:2,color:\"#444\",className:\"language_switcher_spinner\"})}this.spinner.spin(e[0]);this.set_language()},set_language:function(){var d=_(this.language_form.serializeArray()).map(function(e){return[e.name,e.value]}).zipObject().value();c.ajax({type:this.language_form_type,url:this.language_form_url,data:d,complete:function(){if(d.redirect_to){window.location=d.redirect_to}else{window.location.reload()}}})},update_position:function(){var d=Math.floor(this.popover.outerWidth()/2);this.popover.css({marginLeft:-d+\"px\"})},update_timezone:function(){var e=new Date();var g=new Date(e.getFullYear(),0,1,0,0,0,0);var f=new Date(g.toGMTString().replace(/(.*)(\\s\\S+)/,\"$1\"));var d=Math.round((g-f)/(1000*60*60));this.$el.removeClass(\"americas europe_africa asia_pacific\");switch(d){case -12:case -11:case -10:case -9:case -8:case -7:case -6:case -4:case -3:case -2:case -1:this.$el.addClass(\"americas\");break;case 0:case 1:case 2:case 3:case 4:case 5:this.$el.addClass(\"europe_africa\");break;case 6:case 7:case 8:case 9:case 10:case 11:case 12:this.$el.addClass(\"asia_pacific\");break;default:this.$el.addClass(\"americas\");break}return d}});b.LanguageMenu=a})(jQuery,Tumblr);(function(c,a){var b=function(d){return function(g,f){if(!d){return}g=g||{};f=f||{};if(f.init){f.init()}var e=c.ajax({url:d,type:\"POST\",data:{form_key:c(\"#tumblr_form_key\").attr(\"content\"),data:g}});e.success(function(){if(f.success){f.success()}});e.error(function(){if(f.error){f.error()}else{Tumblr.Dialog.alert(l10n_str.ajax_error)}});e.complete(function(){if(f.complete){f.complete()}});return e}};a.follow=b(\"/svc/follow\");a.unfollow=b(\"/svc/unfollow\");a.like=b(\"/svc/like\");a.unlike=b(\"/svc/unlike\");a.ignore=b(\"/svc/ignore\");a.report=b(\"/svc/report\");a.reply=b(\"/svc/reply\")})(jQuery,Tumblr);(function(d,b){function c(){var e=d(\"body\"),g=e.attr(\"id\"),f=\"dashboard\";if(g==\"dashboard_posts_likes\"){f=\"likes\"}if(g==\"tagged_display\"){f=\"tagged\"}if(e.hasClass(\"tablet\")){f=\"tablet\"}return a.sources[f]}var a={init:function(){d(\"#posts\").on(\"click\",'.reblog_follow_button:not(\".onboard\")',function(g){g.stopImmediatePropagation();g.preventDefault();var f=d(this),e=d(f.closest(\".post\")[0]);f.addClass(\"active\").addClass(\"animated\").addClass(\"poof\");window.setTimeout(function(){f.addClass(\"final_state\")},1000);Tumblr.follow({tumblelog:f.attr(\"data-tumblelog-name\"),source:c(),placement_id:e.attr(\"data-placement-id\")||false},{success:function(){var h=d('[href=\"'+f.attr(\"data-tumblelog-name\")+'\"]');h.hide()},error:function(){Tumblr.Dialog.alert(l10n_str.ajax_error)}})})},sources:{dashboard:\"FOLLOW_SOURCE_REBLOG\",tagged:\"FOLLOW_SOURCE_REBLOG_TAGGED\",likes:\"FOLLOW_SOURCE_REBLOG_LIKES\",tablet:\"FOLLOW_SOURCE_REBLOG_TABLET\"}};b.ReblogFollowButtons=a})(jQuery,Tumblr);(function(b,a){var c={init:function(){b(\"#posts\").on(\"click\",\".panorama\",function(e){if(e.shiftKey||e.ctrlKey||e.altKey||e.metaKey){return}var d=b(e.target).closest(\".panorama\");if(d.hasClass(\"with_clickthru\")&&e.target.className!=\"zoomer\"){return}e.stopImmediatePropagation();e.preventDefault();d.panorama({lightbox:true})})}};a.Panos=c})(jQuery,Tumblr);(function(b,a){a.DashboardLinkPops=Backbone.View.extend({initialize:function(){},el:\"#posts\",events:{\"click a\":\"run_click\"},run_click:function(f){var c=f.currentTarget.href;var d=b(f.currentTarget);if(d.is(\".no_pop, .photoset_photo, .photo_exif_flipper, .fan_mail_read_more, .follow\")){return}if(self!==top&&d.is(\".post_control.reblog, .post_control.edit\")){c=c.replace(/\\?.*/,\"\")}else{if(d.closest(\".no_pop, .post_controls, #new_post, .controls, .user_menu_list, form, .flash_notification, .more_notes_link\").length>0){return}if(!c||c==\"#\"){return}}f.preventDefault();f.stopPropagation();window.open(c)}})})(jQuery,Tumblr);(function(b,a){a.Elevator=Backbone.View.extend({initialize:function(){this.render();this.return_to_top_visible=false;this.$sidebar_footer_nav=this.$el.find(\".pinned_sidebar_footer\");Tumblr.Events.on(\"DOMEventor:flatscroll\",this.toggle_elevator,this)},el:\"body\",events:{\"click #return_to_top\":\"scroll_to_top\"},scroll_to_top:function(c){c.preventDefault();b(\"html, body\").animate({scrollTop:0},\"slow\")},toggle_elevator:function(d){var c=d.windowScrollY;if(c>=1500){if(!this.return_to_top_visible){this.return_to_top_visible=true;this.fade_in()}}else{if(this.return_to_top_visible){this.return_to_top_visible=false;this.fade_out()}}},fade_in:function(){this.$return_to_top.addClass(\"show\");this.$sidebar_footer_nav.addClass(\"fade_footer\");window.setTimeout(_.bind(function(){this.$sidebar_footer_nav.addClass(\"hide_footer\")},this),500)},fade_out:function(){this.$return_to_top.removeClass(\"show\");this.$sidebar_footer_nav.removeClass(\"fade_footer\");window.setTimeout(_.bind(function(){this.$sidebar_footer_nav.removeClass(\"hide_footer\")},this),0)},render:function(){b(\"#return_to_top\").remove();this.$return_to_top=b(\"<a>\",{\"class\":\"return_to_top\",href:\"#\",id:\"return_to_top\"}).css({transform:\"translateZ(0)\"}).append(b(\"<div>\",{\"class\":\"return_to_top_icon\"})).appendTo(this.$el)}})})(jQuery,Tumblr);(function(c,b){var a={white:{lines:16,length:11,width:4,radius:17,color:\"#ffffff\",speed:0.9,trail:34,shadow:false,hwaccel:false,className:\"tumblr_default_spinner spinner\",zIndex:2000000000,top:\"50\",left:\"auto\"}};b.spinners=a})(jQuery,Tumblr);(function(d,b){var c=Tumblr.PopoverWithForm.extend({initialize:function(e){this.submit_button=this.$(\"button\");this.textarea=this.$(\"form textarea\");this.check_form_state();this.textarea.on(\"input\",_.bind(this.check_form_state,this));this.textarea.on(\"keyup\",_.bind(this.check_form_state,this));_.extend(this.options,{on_hide:this.on_hide});Tumblr.PopoverWithForm.prototype.initialize.apply(this,arguments)},check_form_state:function(){this.submit_button.attr(\"disabled\",this.textarea[0].value.length===0)},on_hide:function(){this.$el.removeClass(\"active\")},on_submit:function(){this.submit_button.attr(\"disabled\",true);this.submit_button.html(this.submit_button.data(\"label-loading\"))},on_success:function(){this.$el.addClass(\"already_reply\");this.$el.find(\"button\").attr(\"disabled\",false);this.$el.find(\"textarea\").val(\"\");this.submit_button.html(this.submit_button.data(\"label\"));var e=this.$el.parents(\".post\");if(e.hasClass(\"promotion_pinned\")&&!e.hasClass(\"is_mine\")){d.ajax({url:\"/unpin\",type:\"post\",data:{post_id:e.attr(\"id\").replace(\"post_\",\"\"),form_key:d(\"#tumblr_form_key\").attr(\"content\")}})}}});var a={init:function(){var e={};d(\"#posts\").on(\"click\",\".reply_button\",function(f){if(f.target!=f.currentTarget){return}f.stopPropagation();f.preventDefault();var g=f.currentTarget.id;if(!e[g]){e[g]=new c({el:d(f.target)})}d(f.currentTarget).addClass(\"active\");e[g].show()})}};b.ReplyPopover=c;b.ReplyButtons=a})(jQuery,Tumblr);(function(c,a){var d=Backbone.View.extend({initialize:function(){this.$post=this.$el.closest(\".post\")},clicked:function(){if(this.$el.closest(\".logged_out\").length||this.$el.data(\"reblogged\")){return}this.reblog();this.$el.addClass(\"animated\").addClass(\"collapse_reblog_button\");window.setTimeout(_.bind(function(){this.$el.addClass(\"final_state\")},this),1000)},reblog:function(){this.$el.data(\"reblogged\",1);c.ajax({url:\"/fast_reblog\",type:\"post\",data:{reblog_key:this.$el.attr(\"data-reblog-key\"),reblog_post_id:this.$el.attr(\"data-reblog-id\"),form_key:this.$el.attr(\"data-user-form-key\")},success:_.bind(function(){this.$el.addClass(\"reblogged\");if(this.$post.hasClass(\"promotion_pinned\")&&!this.$post.hasClass(\"is_mine\")){this.unpin()}},this),error:function(){Tumblr.Dialog.alert(l10n_str.ajax_error)},complete:function(){}})},unpin:function(){c.ajax(\"/unpin\",{type:\"post\",data:{post_id:this.$post.id().replace(\"post_\",\"\"),form_key:c(\"#tumblr_form_key\").attr(\"content\")}})}});var b={init:function(){var e={};c(\"#posts\").on(\"click\",\".reblog_button\",function(f){if(!f.altKey||f.target!=f.currentTarget){return}f.stopPropagation();f.preventDefault();new d({el:c(f.target)}).clicked()})}};a.ReblogButtons=b})(jQuery,Tumblr);(function(d,a){var c=Tumblr.Popover.extend({events:function(){return _.defaults({\"click .share_email\":\"__email_click\",\"click .share_facebook\":\"__share_facebook_click\",\"click .share_twitter\":\"__share_twitter_click\",\"input .email_address\":\"__email_input\",\"keyup .email_address\":\"__email_input\",\"click .cancel\":\"__cancel_click\",\"input .twitter .share_message\":\"__twitter_input\",\"keyup .twitter .share_message\":\"__twitter_input\",\"click .reply_to_input\":\"__reply_to_input\",},Tumblr.Popover.prototype.events)},__email_click:function(f){f.preventDefault();this.toggle_email_form()},__email_input:function(f){if(this.validate_email(this.$email_address.val())){this.$submit_button.attr(\"disabled\",false)}else{this.$submit_button.attr(\"disabled\",true)}},__twitter_input:function(f){f.preventDefault();if(this.validate_twitter(this.$share_message.val())){this.$submit_button.attr(\"disabled\",false)}else{this.$submit_button.attr(\"disabled\",true)}},__cancel_click:function(f){f.preventDefault();this.cancel_or_close()},__share_facebook_click:function(f){f.preventDefault();f.stopPropagation();if(this.$share_to_facebook){this.toggle_facebook_form()}else{this.facebook_fallback()}},__share_twitter_click:function(f){f.preventDefault();f.stopPropagation();if(this.$twitter_username){this.toggle_twitter_form()}else{window.open(\"https://twitter.com/intent/tweet?url=\"+encodeURIComponent(this.$tiny_url),\"twitter-share-dialog\",\"width=626,height=258\");this.popover.hide();this.on_hide()}},__reply_to_input:function(g){var f=d(g.currentTarget).is(\":checked\");Tumblr.Cookie.set(\"share_popover_reply_to\",f,365*24*60*60)},_placeholder_support:function(){var e=document.createElement(\"input\");return(\"placeholder\" in e)},initialize:function(e){this.options=e||{};_.extend(this.options,{on_hide:this.on_hide});Tumblr.Popover.prototype.initialize.apply(this,arguments);this.$share_form=this.$(\".share_form\");this.$share_label=this.$(\".share_label\");this.$reply_to=this.$(\".reply_to\");this.$share_form.off(\"submit.share_form\").on(\"submit.share_form\",_.bind(this.submit_share_form,this));this.$share_form.off(\"keydown.share_form\").on(\"keydown.share_form\",_.bind(function(f){if(f.keyCode==13&&(f.ctrlKey||f.metaKey||f.altKey)){f.preventDefault();f.stopPropagation();this.submit_share_form()}},this));this.$share_options=this.$(\".share_options\");this.$submit_button=this.$(\"button\");this.$email_address=this.$(\".email_address\");this.$share_message=this.$(\".share_message\");this.$character_count=this.$(\".character_count\");this.$service_cancel=this.$(\".cancel.service\");this.$status=this.$(\".status\");this.$error_status=this.$(\".error_status\");this.$status_message=this.$(\".status_message\");this.$reply_to_input=this.$(\".reply_to_input\");this.$sent_text=this.$status.data(\"sent\");this.$error_text=this.$status.data(\"error\");if(d(\".share_twitter\")){this.$twitter_username=d(\".share_twitter\").data(\"twitter-username\")}if(d(\".share_facebook\")){this.$share_to_facebook=d(\".share_facebook\").data(\"has-facebook\")}this.$post_url=this.$share_options.data(\"post-url\");this.$tiny_url=this.$share_options.data(\"post-tiny-url\");this.placeholder_supported=this._placeholder_support();if(Tumblr.Cookie.get(\"share_popover_reply_to\")===\"true\"){this.$reply_to_input.prop(\"checked\",true)}},submit_share_form:function(){var e=\"/svc/email_post\";switch(this.$share_form.data(\"type\")){case\"facebook\":e=\"/svc/share_to_facebook\";break;case\"twitter\":e=\"svc/share_to_twitter\";break}var f=this.$share_form.serializeArray();f.push({name:\"form_key\",value:d(\"#tumblr_form_key\").attr(\"content\")});d.ajax({url:e,type:\"post\",data:f,success:_.bind(function(){this.on_success(this.$share_form)},this)||function(){},error:_.bind(function(g){this.on_error(g)},this)});this.on_submit(this.$submit_button);return false},on_hide:function(){this.reset_and_hide()},on_submit:function(){this.$submit_button.attr(\"disabled\",true);this.$submit_button.html(this.$submit_button.data(\"label-sending\"))},on_success:function(){this.$status.show();this.flyaway_popup()},on_error:function(f){this.$error_status.html(this.$error_text);this.$submit_button.html(this.$submit_button.data(\"label\"));this.$submit_button.attr(\"disabled\",false);this.$error_status.addClass(\"active\")},flyaway_popup:function(){this.popover.addClass(\"flyaway\");setTimeout(d.proxy(function(){this.popover.removeClass(\"flyaway\").hide();this.hide()},this),1000)},fadeout_popup:function(e,f){setTimeout(_.bind(function(){this.popover.fadeOut(150,_.bind(function(){this.on_hide()},this))},this),1250)},toggle_email_form:function(){this.$submit_button.html(\"Send\");this.$share_form.data(\"type\",\"email\");this.$share_options.toggleClass(\"active\");this.$share_form.toggleClass(\"active\");this.$reply_to.addClass(\"active\");if(this.$share_form.hasClass(\"active\")&&this.placeholder_supported){this.$email_address.focus()}},toggle_facebook_form:function(){d.ajax({url:\"/svc/facebook_status\",type:\"post\",data:{form_key:d(\"#tumblr_form_key\").attr(\"content\")},success:_.bind(this.facebook_success,this),error:_.bind(this.facebook_fallback,this)})},facebook_success:function(e){if(e){this.$service_cancel.show();this.$submit_button.html(\"Share\");this.$share_form.data(\"type\",\"facebook\");this.$share_label.text(e);this.$submit_button.attr(\"disabled\",false);this.$share_form.addClass(\"facebook\");this.$share_options.toggleClass(\"active\");this.$share_form.toggleClass(\"active\");if(this.$share_form.hasClass(\"active\")&&this.placeholder_supported){this.$share_message.focus()}}else{this.facebook_fallback()}},facebook_fallback:function(){window.open(\"https://www.facebook.com/sharer/sharer.php?u=\"+encodeURIComponent(this.$post_url),\"facebook-share-dialog\",\"width=626,height=436\");this.popover.hide();this.on_hide()},toggle_twitter_form:function(e){this.$service_cancel.show();this.$submit_button.html(\"Tweet\");this.$share_form.data(\"type\",\"twitter\");this.$share_label.text(\"@\"+this.$twitter_username);this.$share_message.val(\" [URL]\");this.$share_form.addClass(\"active\");this.$share_options.removeClass(\"active\");this.$share_message.get(0).setSelectionRange(0,0);this.validate_twitter(this.$share_message.val());this.$share_message.attr(\"placeholder\",\"\");this.$submit_button.attr(\"disabled\",false);this.$share_form.addClass(\"twitter\");if(this.$share_form.hasClass(\"active\")&&this.placeholder_supported){this.$share_message.focus();this.$share_message.get(0).setSelectionRange(0,0)}},resets:function(){this.$service_cancel.hide();this.$submit_button.html(this.$submit_button.data(\"label\"));this.$submit_button.attr(\"disabled\",true);this.$email_address.val(\"\");this.$share_message.val(\"\");this.$share_message.attr(\"placeholder\",\"Message (Optional)\");this.$share_options.addClass(\"active\");this.$share_form.removeClass(\"active\");this.$share_form.removeClass(\"facebook\");this.$share_form.removeClass(\"twitter\");this.$status.hide();this.$status_message.html(this.$sent_text);this.$reply_to.removeClass(\"active\");this.$error_status.removeClass(\"active\")},reset_and_hide:function(){this.resets();this.$el.removeClass(\"active\")},cancel_or_close:function(){if(this.$share_form.data(\"type\")===\"email\"&&this.$email_address.val().length){this.$email_address.val(\"\");this.$submit_button.attr(\"disabled\",true)}else{this.resets()}},validate_email:function(f){var e=/\\S+@\\S+\\.\\S+/;return e.test(f)},validate_twitter:function(h){var g=h.match(/\\[URL\\]/ig);var e=(g)?(g.length*24):0;var f=140-h.length-e;this.$character_count.html(f);if(f<10){this.$character_count.css(\"color\",\"#d95e40\")}else{if(f<20){this.$character_count.css(\"color\",\"#444444\")}else{this.$character_count.css(\"color\",\"#bbbbbb\")}}if(f<0||f==140){return false}return true}});var b={init:function(){var e={};d(\"#posts\").on(\"click\",\".share_social_button\",function(g){var f=d(g.currentTarget);var h=d(g.currentTarget).attr(\"id\");if(!e[h]){e[h]=new c({el:f,wait:true,directional:true,no_autofocus:true})}f.addClass(\"active\");e[h].show()})}};a.ShareButtons=b})(jQuery,Tumblr);(function(c,a){var b=Backbone.View.extend({events:{\"click .retro_video_preview\":\"show_video\",\"click .hide_inline_video\":\"hide_video\"},show_video:function(g){var f=c(g.currentTarget);var d=f.data(\"id\");if(c(\"#video_preview_\"+d).is(\":visible\")){c(\"#video_embed_\"+d).html(c(\"#video_code_\"+d).val());c(\"#video_preview_\"+d).hide();c(\"#watch_video_\"+d).show()}this.track_view(true);return false},hide_video:function(g){var d=c(g.currentTarget);var f=d.data(\"id\");if(!c(\"#video_preview_\"+f).is(\":visible\")){c(\"#video_embed_\"+f).html(\"\");c(\"#video_preview_\"+f).show();c(\"#watch_video_\"+f).hide()}return false},track_view:function(d){if(typeof _gaq!==\"undefined\"&&_gaq){_gaq.push([\"_trackEvent\",\"dashboard_video\",\"click\",d?\"static\":\"normal\"])}}});a.VideoThumbnails=b})(jQuery,Tumblr);(function(c,b){var a=function(e,d){if(!(this instanceof a)){return new a(e,d)}this.el=(typeof e===\"string\")?c(e).get(0):e;this.$el=c(e);this.options=d;if(this.$el.data(\"resizeAnchor\")){return this.$el.data(\"resizeAnchor\")}this.$el.data(\"resizeAnchor\",this);this.metadata=this.$el.data(\"plugin-options\");this.config=c.extend({},a.defaults,this.options,this.metadata);this.config.resize=this.$el.css(\"resize\")||\"both\";if(this.config.create_container){this.$container=c(\"<div/>\").addClass(this.config.container_class).insertBefore(this.$el);this.$container.append(this.$el);this.$clearfix=c(\"<div/>\").addClass(this.config.clearfix_class).insertAfter(this.$container)}this.$anchor=c(\"<span/>\").attr({onclick:\"return false;\",tabindex:-1}).addClass(this.config.anchor_class).insertAfter(this.$el);this.anchor_visibility();this.resize_start=c.proxy(this._resize_start,this);this.resize_move=c.proxy(this._resize_move,this);this.resize_end=c.proxy(this._resize_end,this);this.$anchor.on(\"mousedown\",this.resize_start);this.$parent=c(window);a.register(this);return this};a.prototype={__event_position:function(f){var d,g;d=f.pageX;g=f.pageY;return{x:d,y:g}},_resize_start:function(d){this.start_width=this.$el.outerWidth();this.start_height=this.$el.outerHeight();this.start_position=this.__event_position(d);this.$parent.on(\"mousemove\",this.resize_move);this.$parent.on(\"mouseup\",this.resize_end);d.preventDefault()},_resize_move:function(d){this.current_position=this.__event_position(d);switch(this.config.resize){case\"vertical\":this.set_height(this.current_position.y-this.start_position.y+this.start_height);break;case\"horizontal\":this.set_width(this.current_position.x-this.start_position.x+this.start_width);break;case\"both\":this.set_size(this.current_position.x-this.start_position.x+this.start_width,this.current_position.y-this.start_position.y+this.start_height);break;case\"none\":break}},_resize_end:function(d){this.$parent.off(\"mousemove\",this.resize_move);this.$parent.off(\"mouseup\",this.resize_end)},anchor_visibility:function(){if(this.config.resize===\"none\"){this.$anchor.hide()}else{this.$anchor.show()}},set_width:function(d){this.$el.css(\"width\",Math.max(0,d))},set_height:function(d){this.$el.css(\"height\",Math.max(0,d))},set_size:function(e,d){this.$el.css({width:Math.max(0,e),height:Math.max(0,d)})},destroy:function(){this.$anchor.remove();if(this.config.create_container){this.$el.insertBefore($container);this.$container.remove();this.$clearfix.remove()}}};a.instances=[];a.defaults={container_class:\"resize_textarea_container\",clearfix_class:\"resize_textarea_clearfix\",anchor_class:\"resize_textarea_anchor\",create_container:true};a.register=function(d){this.instances.push(d)};a.destroy_all=function(d){for(var e=0;e<this.instances.length;e++){this.instances[e].destroy()}};c.fn.resizeanchor=function(d){return this.each(function(){new a(this,d)})};b.ResizeAnchor=a})(jQuery,Tumblr);(function(c,a){var b=function(f,d){if(!(this instanceof b)){return new b(f,d)}this.el=(typeof f===\"string\")?c(f).get(0):f;this.$el=c(f);this.options=d;this.metadata=this.$el.data(\"plugin-options\");this.config=c.extend({},b.defaults,this.options,this.metadata);var e=parseInt(this.$el.css(\"lineHeight\"),10);this.minHeight=this.oldHeight=(this.config.minHeight)?this.config.minHeight:this.$el.height();this.maxHeight=(this.config.maxHeight)?this.config.maxHeight:false;this.padder=e;this.$el.css(\"min-height\",this.minHeight);this.$el.each(c.proxy(function(g){this.create_shadow(g)},this));this.events={__input:c.proxy(this.__input,this),__mouseup:c.proxy(this.__mouseup,this)};this.$el.on(\"input\",this.events.__input);this.$el.on(\"mouseup\",this.events.__mouseup);this.update(this.$el);b.register(this);return this};b.prototype={__input:function(f){var d=c(f.currentTarget);this.update(d)},__mouseup:function(f){var d=c(f.currentTarget);this.oldHeight=d.outerHeight();if(this.oldHeight>=this.maxHeight){this.maxHeight=this.oldHeight}},create_shadow:function(d){this.$shadow=(c(\".\"+this.config.shadowClass).length)?c(\".\"+this.config.shadowClass):c(\"<div/>\",{\"class\":this.config.shadowClass});this.$shadow.css({position:\"absolute\",top:-10000,left:-10000,width:this.$el.width(),fontSize:this.$el.css(\"fontSize\"),fontFamily:this.$el.css(\"fontFamily\"),fontWeight:this.$el.css(\"fontWeight\"),lineHeight:this.$el.css(\"lineHeight\")}).appendTo(document.body)},replace_value:function(d){return d.replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\").replace(/&/g,\"&amp;\").replace(/\\n$/,\"<br/>&nbsp;\").replace(/\\n/g,\"<br/>\")},update:function(d){var f=this.replace_value(d.val());this.$shadow.css(\"width\",this.$el.width());this.$shadow.html(f);var e=Math.max(this.$shadow.height()+this.padder,this.oldHeight);if((this.maxHeight&&(e<this.maxHeight))||!this.maxHeight){this.$el.css(\"height\",e)}else{this.$el.css(\"height\",this.maxHeight)}},destroy:function(){this.$shadow.remove();this.$el.off(\"input\",this.events.__input);this.$el.off(\"mouseup\",this.events.__mouseup)}};b.instances=[];b.defaults={shadowClass:\"autoexpand_shadow\",minHeight:false,maxHeight:400};b.register=function(d){this.instances.push(d)};b.destroy_all=function(d){for(var e=0;e<this.instances.length;e++){this.instances[e].destroy()}};c.fn.autoexpand=function(d){return this.each(function(){new b(this,d)})};a.AutoExpand=b})(jQuery,Tumblr);(function(b,a){var c=function(e,d){if(!(this instanceof c)){return new c(e,d)}this.el=(typeof e===\"string\")?b(e).get(0):e;this.$el=b(e);this.options=d;this.metadata=this.$el.data(\"plugin-options\");this.config=b.extend({},c.defaults,this.options,this.metadata);if(this.config.event){this.config.events=this.config.event}if(this.config.selector){this.config.child_selector=this.config.selector}this.$relay_targets=b(this.$el.find(this.config.child_selector)).add(b(this.config.global_selector));this.$el.addClass(this.config.relay_class);this.$relay_targets.addClass(this.config.target_class);this.relay=b.proxy(this.__relay,this);this.events={};b.each(this.config.events.split(\",\"),b.proxy(function(f,g){this.add_event(g)},this));this.$el.data(\"eventRelayObject\",this);c.register(this);return this};c.prototype={__relay:function(d){if(this.__is_relay_element(d)){d.stopPropagation();this.$relay_targets.not(d.target).trigger(d)}},__is_relay_element:function(d){return this.$el.is(d.currentTarget)},add_event:function(d){this.events[d]=true;this.$el.on(d,this.relay)},remove_event:function(d){this.events[d]=false;this.$el.off(d,this.relay)},destroy:function(d){b.each(this.events,b.proxy(function(f){this.remove_event(f)},this));if(!d){c.unregister(this)}}};c.defaults={events:\"click\",child_selector:false,global_selector:false,relay_class:\"click_relay\",target_class:\"click_relay_target\"};c.instances=[];c.register=function(d){this.instances.push(d)};c.unregister=function(d){this.instances.splice(this.instances.indexOf(d),1)};c.destroy_all=function(d){for(var e=0;e<this.instances.length;e++){this.instances[e].destroy(true)}this.instances=[]};b.fn.eventrelay=function(d){return this.each(function(){new c(this,d)})};a.EventRelay=c})(jQuery,Tumblr);(function(c,a){var b=Backbone.View.extend({defaults:{password:\"#signup_password\",email:\"#signup_email\",tumblelog:\"#signup_username\"},initialize:function(d){this.options=d||{};this.options=_.extend(this.defaults,this.options);this.$password_meter=c(\"#password_strength_meter\");this.$password=c(this.options.password);this.$email=c(this.options.email);this.$tumblelog=c(this.options.tumblelog);if(!this.$password.length){return}this.class_name=\"password_strength_meter\";this.password_meter_markup='<div class=\"password_strength_meter inactive\" id=\"password_strength_meter\"><strong class=\"l5\"></strong><strong class=\"l4 l5\"></strong><strong class=\"l3 l4 l5\"></strong><strong class=\"l2 l3 l4 l5\"></strong><strong class=\"l1 l2 l3 l4 l5\"></strong></div>';this.render();this.test_password();this.$password.on(\"keydown keyup focus blur\",_.throttle(_.bind(function(e){if(this.last_checked!==this.get_password()){this.test_password(e)}},this),250))},render:function(){if(!this.$password_meter.length){this.$password.after(this.password_meter_markup);this.$password_meter=c(\"#password_strength_meter\")}},set_inactive:function(){this.$password_meter.addClass(\"inactive\")},set_active:function(){this.$password_meter.removeClass(\"inactive\")},set_level:function(d){this.set_active();switch(d){case 1:this.$password_meter[0].className=this.class_name+\" level_1\";break;case 2:this.$password_meter[0].className=this.class_name+\" level_2\";break;case 3:this.$password_meter[0].className=this.class_name+\" level_3\";break;case 4:this.$password_meter[0].className=this.class_name+\" level_4\";break;case 5:this.$password_meter[0].className=this.class_name+\" level_5\";break;default:this.$password_meter[0].className=this.class_name;break}},test_password:function(d){this.last_checked=this.$password.val();if(!d||!this.$password.val().length){this.set_inactive();return}this.get_password_strength()},update:function(){this.test_password()},get_email:function(){return this.$email.val()},get_password:function(){return this.$password.val()},get_username:function(){return this.$tumblelog.val()},get_form_data:function(){var d={};d.username=this.get_username();d.email=this.get_email();d.password=this.get_password();return d},get_password_strength:function(){if(this.pw_xhr){this.pw_xhr.abort()}this.pw_xhr=c.ajax({url:\"/svc/account/validation\",dataType:\"json\",type:\"POST\",data:this.get_form_data()});this.pw_xhr.done(_.bind(function(d){var e=d.score||0;this.set_level(e);this.block_registration_step=(d.reject_reason)?d.reject_reason:false;delete this.pw_xhr},this))}});Tumblr.PasswordStrengthMeter=b})(jQuery,Tumblr);(function(c,a){var b=Backbone.View.extend({initialize:function(d){this.options=d||{};if(typeof this.$el==\"undefined\"||this.$el.length===0||this.$el.find(\"leviathan\").length!==0){this.remove();return false}this.uid=Math.floor(Math.random()*10000);this.$el.append(this.html());this.$loader=c(\".leviathan.loader_\"+this.uid);this.center();this.$u1=c(\"i.unum\",this.$loader);this.$u2=c(\"i.duo\",this.$loader);this.$u3=c(\"i.tres\",this.$loader);this.ti=null;this.t1=null;this.t2=null;this.t3=null},start:function(){clearInterval(this.ti);var d=_.bind(function(){this.t1=this.rise(this.$u1,300,0);this.t2=this.rise(this.$u2,300,100);this.t3=this.rise(this.$u3,300,200)},this);d();this.ti=setInterval(_.bind(function(){clearTimeout(this.t1);clearTimeout(this.t2);clearTimeout(this.t3);d()},this,d),600);this.$loader.show()},stop:function(){this.$loader.hide();clearInterval(this.ti);clearTimeout(this.t1);clearTimeout(this.t2);clearTimeout(this.t3)},destroy:function(){this.stop();this.unbind();this.$loader.remove();this.remove()},center:function(){var e=this.$el.width();var d=this.$el.height();var g=this.$loader.width();var f=this.$loader.height();var j=(e/2)-(g/2);var h=(d/2)-(f/2);this.$loader.css({left:j,top:h})},rise:function(e,f,d){if(typeof e==\"undefined\"||e.length===0){return}return setTimeout(function(){e.stop(true,true).animate({height:\"28px\",opacity:1,marginTop:\"0px\"},f).animate({height:\"20px\",opacity:0.5,marginTop:\"4px\"},f)},d)},html:function(){return'<div class=\"loader_'+this.uid+' leviathan\"><i class=\"unum\"></i><i class=\"duo\"></i><i class=\"tres\"></i></div>'}});a.PillLoader=b})(jQuery,Tumblr);(function(b,a){a.ReportTumblelogView=Backbone.View.extend({el:\"#report_tumblelog_bar\",events:{\"click .spam\":\"report_spam\",\"click .harassment\":\"report_harassment\",\"click .dismiss\":\"dismiss\",mouseenter:\"delay_dismiss\",mouseleave:\"timeout_dismiss\"},initialize:function(c){a.Events.on(\"block_tumblelog\",_.bind(this.block_tumblelog,this))},block_tumblelog:function(c){if(c.can_report){this.tumblelog=c.tumblelog;this.animate_in();this.timeout_dismiss()}},animate_in:function(){this.$el.find(\"#report_tumblelog_with_name\").show();this.$el.find(\"#report_tumblelog_name\").html(this.tumblelog);this.$el.fadeIn(300)},report_spam:function(c){var d=this.tumblelog;a.report({tumblelog:d,reason:\"1\"}).done(function(){a.Events.trigger(\"report_tumblelog\",{tumblelog:d,reason:\"spam\"})}).always(_.bind(function(){this.dismiss()},this))},report_harassment:function(c){var d=this.tumblelog;a.report({tumblelog:d,reason:\"2\"}).done(function(){a.Events.trigger(\"report_tumblelog\",{tumblelog:d,reason:\"harassment\"})}).always(_.bind(function(){this.dismiss()},this))},dismiss:function(c){this.$el.fadeOut(300,_.bind(function(){this.$el.find(\"#report_tumblelog_name\").html(\"\");this.$el.find(\"#report_tumblelog_with_name\").hide()},this))},timeout_dismiss:function(c){c=c||3000;clearTimeout(this.dismissTimeout);this.dismissTimeout=setTimeout(_.bind(function(){this.dismiss()},this),3000)},delay_dismiss:function(c){clearTimeout(this.dismissTimeout)}})})(jQuery,Tumblr);(function(b,a){var c=Backbone.View.extend({initialize:function(){this.$no_posts_found=b(\".no_posts_found\");this.$left_column=b(\"#left_column\");this.$right_column=b(\"#right_column\");if(this.$no_posts_found.length&&this.$left_column.length&&this.$right_column.length){if(this.$right_column.css(\"min-height\")!=\"0px\"){return}var e=this.$left_column.height(),d=this.$right_column.height(),g=0,f=\"+\";if(e<d){f=\"+\";g=d-e}else{if(e>d){f=\"-\";g=e-d;if(g>=50){g=0}}}this.center_padding(g,f)}},center_padding:function(d,f){if(d>0&&(f==\"+\"||f==\"-\")){var e=d/2;this.$no_posts_found.css(\"padding-top\",f+\"=\"+e).css(\"padding-bottom\",f+\"=\"+e)}}});a.FullHeightNoPostsFound=c})(jQuery,Tumblr);(function(g,f){AutoPaginator={start:function(){k=3;Tumblr.Events.on(\"DOMEventor:flatscroll\",h)},stop:function(){loading_next_page=false;Tumblr.Events.off(\"DOMEventor:flatscroll\",h)}};_.extend(AutoPaginator,Backbone.Events);var k=3;loading_next_page=false;function h(n){if(!next_page){if(g(\"#auto_pagination_loader\").is(\":visible\")){g(\"#auto_pagination_loader\").hide()}AutoPaginator.stop();return}if(loading_next_page){return}if((n.documentHeight-n.windowScrollY)<n.windowHeight*3){loading_next_page=true;a();AutoPaginator.trigger(\"before\",next_page);g(\"#auto_pagination_loader_loading\").show();g(\"#auto_pagination_loader_failure\").hide();d()}}function d(){k--;var n=g.ajax({url:next_page,type:\"get\"});n.done(function(p){c(p);var o=n.getResponseHeader(\"X-next-page\");if(o){next_page=o}else{next_page=p.match('id=\"next_page_link\" href=\"')?p.split('id=\"next_page_link\" href=\"')[1].split('\"')[0]:false;if(!next_page){AutoPaginator.stop();g(\"#auto_pagination_loader_loading\").hide()}}});n.fail(function(){if(k){d()}else{j()}})}function c(p){if(p.indexOf('<script type=\"text/javascript\" language=\"javascript\" src=\"http://assets.tumblr.com/languages/errors.js')!==-1){AutoPaginator.stop();return false}var o;if(p.indexOf(\"<!-- START POSTS -->\")===-1){o=p}else{o=p.split(\"<!-- START POSTS -->\")[1].split(\"<!-- END POSTS -->\")[0]}var n=g(g.trim(o)).not(\":empty\");g(\"#posts\").append(n);Tumblr.Events.trigger(\"DOMEventor:updateRect\");b();loading_next_page=false;setTimeout(function(){if(typeof window.after_auto_paginate==\"function\"){after_auto_paginate()}e();AutoPaginator.trigger(\"after\",next_page)},0)}function j(){AutoPaginator.stop();g(\"#auto_pagination_loader_loading\").hide();g(\"#auto_pagination_loader_failure\").show()}function b(){next_page=next_page.replace(/https?:\\/\\/.*?\\//,\"/\");if(next_page.indexOf(\"/dashboard\")===0){next_page=next_page.substring(0,next_page.lastIndexOf(\"/\"))}if(window._gaq!==undefined){try{var n=tumblr_custom_tracking_url?tumblr_custom_tracking_url:next_page;if(n.match(/^\\/dashboard/)){n=\"/dashboard/*\"}if(n.match(/^\\/tagged/)){n=\"/tagged/*\"}if(n.match(/^\\/search/)){n=\"/search/*\"}_gaq.push([\"_trackPageview\",n])}catch(o){Tumblr.Utils.exceptions(o)}}try{if(window._qevents&&window.__qc){__qc.qpixelsent=[];_qevents.push({qacct:\"p-19UtqE8ngoZbM\"})}}catch(o){Tumblr.Utils.exceptions(o)}if(typeof(COMSCORE)!==\"undefined\"){try{COMSCORE.beacon({c1:\"2\",c2:\"15742520\"})}catch(o){Tumblr.Utils.exceptions(o)}}}var l=[];function a(){for(var n=l.length-1;n>=0;n--){if(typeof(l[n])===\"function\"){l[n]()}}}var m=[];function e(){for(var n=m.length-1;n>=0;n--){if(typeof(m[n])===\"function\"){m[n]()}}}f.AutoPaginator=AutoPaginator;window.BeforeAutoPaginationQueue=l;window.AfterAutoPaginationQueue=m})(jQuery,Tumblr);(function(g,f){var l={init:function(){_.each(j,function(m,n){l.add(false,m)});c()},add:h};var b=[],d=[],a=false,k=(\"https:\"==document.location.protocol?\"https://secure.assets.tumblr.com\":\"http://assets.tumblr.com\"),j=[k+\"/images/inline_photo_loading.gif\",k+\"/images/black_75.png\",k+\"/images/white_80.png\",k+\"/images/loading_reblog.gif\"];function h(o,m,n){if(typeof n==\"undefined\"){n=false}d.push([o,m,n])}function e(){for(i=d.length-1;i>=0;i--){var p=d[i][0];var m=d[i][1];var o=d[i][2];if(p===false){img_obj=new Image();img_obj.src=m;b.push(img_obj)}else{var n=document.getElementById(p);if(!n){continue}if(o==\"bg\"){n.style.backgroundImage=\"url(\"+m+\")\"}else{if(o==\"src\"){n.src=m}}}d.splice(i,1)}}function c(){if(a){return true}a=window.setInterval(function(){if(typeof(d)!=\"undefined\"&&d.length){e()}},500)}f.ImagePreloader=l;window.add_to_image_queue=h;window.process_image_queue=e;window.start_processing_image_queue=c})(jQuery,Tumblr);(function(c,a){var b=Backbone.View.extend({el:\"#right_column\",events:{\"mousedown li\":\"on_mousedown\"},on_mousedown:function(e){var d=this.$(e.currentTarget);if(d.length&&!d.hasClass(\"item\")&&!d.hasClass(\"no_push\")){this.$(\".selected\").removeClass(\"selected\");d.addClass(\"selected\")}}});a.PushButtons=b})(jQuery,Tumblr);(function(b,a){var c=Backbone.View.extend({events:{\"click .post_content img\":\"toggle\"},toggle:function(k){var g=this.$(k.currentTarget).parents(\".post_content\");var f=g.find(\".toggle_inline_image\");f.toggleClass(\"inline_image\");var h=g.find(\".inline_external_image\");_.each(h,_.bind(this.toggle_external,this));var j=g.find(\".image_thumbnail\");if(j.length){this.toggle_thumbnail(j)}var d=g.find(\".photo_info\");if(d.length){d.toggleClass(\"hidden\")}},toggle_thumbnail:function(d){if(d.hasClass(\"enlarged\")){d.removeClass(\"enlarged\");d.attr(\"width\",d.data(\"thumbnail-width\"));d.attr(\"height\",d.data(\"thumbnail-height\"))}else{d.addClass(\"enlarged\");d.attr(\"width\",d.data(\"width\"));d.attr(\"height\",d.data(\"height\"))}},toggle_external:function(f){var g=this.$(f);var d=g.attr(\"external_src\");if(g.hasClass(\"enlarged\")){g.attr(\"src\",g.attr(\"original_src\"));g.removeClass(\"enlarged\")}else{g.attr(\"original_src\",g.attr(\"src\"));g.addClass(\"enlarged\");if(g.attr(\"loader\")){g.attr(\"src\",g.attr(\"loader\"))}var e=new Image();e.onload=function(){g.attr(\"src\",d)};e.src=d}}});a.PhotoThumbnails=c})(jQuery,Tumblr);(function(d,a){var c=Backbone.View.extend({ignore:function(g){g.preventDefault();d(\"body\").addClass(\"dialog_open\");var j=this.tumblelog;var h=a.TumblelogActions.confirm_ignore({tumblelog:j,avatar_url:d(g.delegateTarget).find(\".avatar\").attr(\"src\")});h.done(function(){a.ignore({tumblelog:j,source:\"IGNORE_SOURCE_NOTIFICATION\"});a.Events.trigger(\"block_tumblelog\",{tumblelog:j,can_report:true})});return false}});var e=c.extend({events:{\"click .block\":\"ignore\",\"mousedown .notification_inner\":\"before_notification_click\",\"mouseup .notification_inner\":\"after_notification_click\",\"click .notification_inner\":\"notification_click\",\"click .notification_follow_button\":\"notification_follow\",\"click .photo_reply_image\":\"notification_photo_reply_image\",\"mouseenter .notification .block\":\"notification_block_hover\",\"mouseleave .notification .block\":\"notification_block_hover\",\"mouseenter .control\":\"control_hover_in\",\"mouseleave .control\":\"control_hover_out\"},initialize:function(){this.tumblelog=this.$el.find(\"a.block\").attr(\"data-tumblelog\");a.Events.on(\"block_tumblelog\",_.bind(this.tumblelog_block,this));if(this.$el.find(\"a.block\").length){this.$el.addClass(\"can_ignore\")}},tumblelog_block:function(g){if(this.tumblelog==g.tumblelog){this.$el.addClass(\"ignored\").addClass(\"no_active\").addClass(\"no_hover\").removeClass(\"can_ignore\");this.$el.find(\".block\").remove();this.$el.unbind()}},update:function(){this.$el.find(\".notification .notification_text\").each(function(h,j){var g=d(j);if(g.find(\"a\").length>1){g.addClass(\"underline_links\")}});this.$el.find(\".notification a.block\").each(function(h,j){var g=d(j);g.closest(\".notification\").addClass(\"can_ignore\")})},before_notification_click:function(h){var g=d(h.target);if(g.is(\".photo_reply_image\")||g.is(\".photo_reply_image_container\")){this.$el.addClass(\"no_active\")}},after_notification_click:function(h){var g=d(h.target);if(g.is(\".photo_reply_image\")||g.is(\".photo_reply_image_container\")){this.$el.removeClass(\"no_active\")}},notification_click:function(j){var g=d(j.target);if(!g.is(\"a\")&&!g.is(\".photo_reply_image_container\")){j.stopPropagation();j.preventDefault();var h=this.$el.find(\".notification_target\").attr(\"href\");if(!h&&this.$el.find(\"a\").length===1){h=this.$el.find(\"a\").attr(\"href\")}if(h){window.open(h)}}},notification_follow:function(h){h.stopPropagation();h.preventDefault();var g=d(h.target);var j=d(h.currentTarget);j.addClass(\"animated\").addClass(\"poof\");window.setTimeout(_.bind(function(){j.parent().remove();this.$el.removeClass(\"has_follow\");j.addClass(\"final_state\")},this),1000);a.follow({tumblelog:j.attr(\"data-tumblelog-name\"),source:\"FOLLOW_SOURCE_DASHBOARD_NOTIFICATION\"},{success:function(){var k=d('[href=\"'+j.attr(\"data-tumblelog-name\")+'\"]');k.hide()},error:function(){a.Dialog.alert(l10n_str.ajax_error)}})},notification_photo_reply_image:function(h){var g=d(h.target);h.stopPropagation();h.preventDefault();a.Lightbox.init([{high_res:g.attr(\"src\"),low_res:g.attr(\"src\"),width:500}])},notification_block_hover:function(h){var g=this.$el.find(\".notification_inner\")},control_hover_in:function(g){this.$el.addClass(\"control_hover\")},control_hover_out:function(g){this.$el.removeClass(\"control_hover\")}});a.Notifications=Backbone.View.extend({el:\"#posts\",events:{\"click .notification_dismiss\":\"notification_dismiss\"},initialize:function(){AfterAutoPaginationQueue.push(_.bind(this.updateViews,this));this.updateViews();this.$el.find(\".notification .notification_text\").each(function(h,j){var g=d(j);if(g.find(\"a\").length>1){g.addClass(\"underline_links\")}})},updateViews:function(){this.$el.find(\".notification:not([data-view-exists])\").each(function(j,k){var h=d(k);if(!h.attr(\"data-view-exists\")){var g=new e({el:k});h.attr(\"data-view-exists\",true)}})},notification_dismiss:function(k){k.stopPropagation();k.preventDefault();var h=d(k.target);var n=h.parents(\".notification\");var m=n.data(\"cookie\");if(m){m=m.split(\"|\");var j=m[0]||\"\";var l=m[1]||\"\";var o=parseInt(m[2],10)||null;if(j){set_cookie(j,l,o)}}var g=n.data(\"ajax\");if(g){d.get(g)}n.css(\"display\",\"none\")}});var b=c.extend({events:{\"click a.block\":\"ignore\"},initialize:function(){this.tumblelog=this.$el.attr(\"data-tumblelog\");a.Events.on(\"block_tumblelog\",_.bind(this.tumblelog_block,this))},tumblelog_block:function(g){if(this.tumblelog==g.tumblelog){this.$el.addClass(\"ignored\").addClass(\"no_active\").addClass(\"no_hover\").removeClass(\"can_ignore\");this.$el.find(\".block\").remove();this.$el.unbind()}}});a.NoteView=b;var f=b.extend({events:function(){return _.extend({},b.prototype.events,{click:\"note_click\",mouseenter:\"note_hover\",mouseleave:\"note_out\",\"mouseenter .avatar_frame\":\"note_img_hover\",\"mouseleave .avatar_frame\":\"note_img_out\",\"mouseleave .block\":\"note_img_out\",mousedown:\"note_down\",mouseup:\"note_up\"})},note_down:function(h){var g=d(h.target);if(!g.is(\"a\")&&!g.is(\"img\")){this.$el.addClass(\"active\")}},note_up:function(g){this.$el.removeClass(\"active\")},note_hover:function(g){this.$el.addClass(\"hover\")},note_out:function(g){this.$el.removeClass(\"hover\").removeClass(\"active\")},note_img_hover:function(g){this.$el.removeClass(\"hover\")},note_img_out:function(g){this.$el.addClass(\"hover\")},note_click:function(k){var h=d(k.target);var g=d(k.currentTarget);if(!h.is(\"a\")&&!h.is(\"img\")){k.stopPropagation();k.preventDefault();var j=g.find(\".action\").attr(\"data-post-url\");window.open(j)}}});a.ReblogNoteView=f;a.Notes=Backbone.View.extend({initialize:function(){},el:\"#posts\",loading_notes:false,events:{\"click .post_control.reblog_count\":\"toggle_notes\",\"click .more_notes_link_container\":\"more_notes\"},create_note_views:function(g){g.find(\".note:not([data-view-exists])\").each(function(j,l){if(d(l).hasClass(\"reblog\")){var k=new f({el:l})}else{var h=new b({el:l})}d(l).attr(\"data-view-exists\",true)})},toggle_notes:function(g){g.preventDefault();if(this.loading_notes){return}this.loading_notes=true;$link=d(g.currentTarget);$post=$link.closest(\".post\");$note_outer_container=$post.find(\".notes_outer_container\");$note_container=$post.find(\".notes_container\");$notes=$post.find(\".notes\");$note_outer_container.show();$note_container.show();if($notes.is(\":visible\")){this.loading_notes=true;$notes.slideUp(300,_.bind(function(){this.loading_notes=false},this));return}if($link.attr(\"data-notes-loaded\")){this.animate_in($notes);return}this.load_notes($post.attr(\"data-post-id\"),$post.attr(\"data-tumblelog-key\"),{},_.bind(function(h){$link.attr(\"data-notes-loaded\",true);$notes.append(d(h).html());this.animate_in($notes);$note_outer_container.find(\".notes_control\").hide();this.create_note_views($notes)},this))},animate_in:function(g){this.loading_notes=true;g.slideDown(300,_.bind(function(){this.loading_notes=false},this))},more_notes:function(g){g.preventDefault();$more_container=d(g.currentTarget);$link=$more_container.find(\".more_notes_link\");$post=$more_container.closest(\".post\");$notes=$post.find(\".notes\");$loading=$post.find(\".notes_loading\").show();$link.hide();this.load_notes($post.attr(\"data-post-id\"),$post.attr(\"data-tumblelog-key\"),{from_id:$link.attr(\"data-next\")},_.bind(function(h){$more_container.remove();$notes.find(\".last_note\").removeClass(\"last_note\");$notes.append(d(h).html());this.create_note_views($notes)},this))},load_notes:function(g,l,j,k){var h=\"/dashboard/notes/\"+g+\"/\"+l;if(j.from_id){h+=\"?from_c=\"+j.from_id}d.ajax(h).done(k)}})})(jQuery,Tumblr);(function(b,a){Tumblr.PostControls=Backbone.View.extend({initialize:function(){},el:\"#posts\",events:{\"click .post_control.block_link\":\"ignore\",\"click .post_control.publish_post\":\"publish\"},ignore:function(h){var g=b(h.currentTarget);var f=g.data(\"message\");var d=g.data(\"tumblelog-name\");var c=g.data(\"tumblelog-hash\");Tumblr.Dialog.confirm(f,_.bind(function(){Tumblr.ignore({tumblelog:d,source:\"IGNORE_SOURCE_POST\"});Tumblr.remove_tumblelog_posts(c)},this));return false},publish:function(g){var f=b(g.currentTarget);var d=f.data(\"message\");var c=f.data(\"post-id\");Tumblr.Dialog.confirm(d,_.bind(function(){b(\"#publish_post_\"+c).submit()}));return false}})})(jQuery,Tumblr);(function(c,a){var b={validate_tumblelog_name:function(d){return !(/^-|-$|[^\\-a-z0-9]|tumblr/i).test(d)},has_starting_hyphen:function(d){return(/^-/).test(d)},has_ending_hyphen:function(d){return(/-$/).test(d)},clean_tumblelog_name:function(d){return d.toLowerCase().replace(/[^\\-a-z0-9]/g,\"-\").replace(/^-+|-+$/g,\"\").replace(/tumblr/gi,\"\")}};a.BlogNameHelper=b})(jQuery,Tumblr);(function(c,a){var b={show:function(g){this.hide();var e=\"/send?lightbox=true\";if(g&&g.href){e=g.href;e+=(e.indexOf(\"?\")!==-1?\"&\":\"?\")+\"lightbox=true\"}var d=c('<div id=\"send_fan_mail_lightbox_loader\"></div>');d.css({zIndex:4294967294,position:\"fixed\",top:\"0px\",left:\"0px\",right:\"0px\",bottom:\"0px\",width:\"100%\",height:\"100%\",background:\"transparent url('/images/fan_mail/grid_bg_lightbox.png?709') center\"});d.html('<div style=\"position:absolute; top:0; left:0; right:0; bottom:0; background:transparent center no-repeat url(\\'/images/loading_big_fff_on_2e3133.gif?709\\')\"><img style=\"position:absolute; left:0; top:0; width:100%; height:100%; opacity:0.3;\" src=\"/images/full_page_vignette.png?709\"/></div>');c(\"body\").append(d);var f=c('<iframe id=\"send_fan_mail_lightbox\" scrolling=\"no\" border=\"0\" frameBorder=\"0\"/>');f.attr(\"src\",e);f.css({zIndex:4294967294,display:\"none\",position:\"fixed\",top:\"0px\",left:\"0px\",right:\"0px\",bottom:\"0px\",width:\"100%\",height:\"100%\",background:\"transparent\",overflow:\"hidden\"});f.load(function(){c(\"#send_fan_mail_lightbox_loader\").hide();c(\"#send_fan_mail_lightbox\").show()});c(\"body\").append(f)},hide:function(){c(\"#send_fan_mail_lightbox\").hide().remove();c(\"#send_fan_mail_lightbox_loader\").hide().remove()},sending:function(){c(\"#send_fan_mail_lightbox\").hide().load(function(d){c(\"#send_fan_mail_lightbox_loader\").hide();c(\"#send_fan_mail_lightbox\").show()});c(\"#send_fan_mail_lightbox_loader\").show()},make_url_from_tumblelog:function(d){return\"/send/\"+d}};a.FanMail=b})(jQuery,Tumblr);(function(c,b){var a=Backbone.View.extend({el:\"#posts\",events:{\"mouseover .post_footer_links .tags\":\"mouseover\",\"mousedown .post_footer_links .tags.draggable\":\"mousedown\",mousemove:\"mousemove\"},initialize:function(){c(\"body\").on(\"mouseup\",_.bind(this.mouseup,this))},mouseover:function(h){var j=this.$(h.currentTarget);var g=j.parents(\".post_footer_links\");var f=g.width();var d=g.find(\".source_url\").width();this.max_width=f;if(d){this.max_width=f-d+8}if(j.width()>this.max_width){j.addClass(\"draggable\")}h.preventDefault();h.stopPropagation()},mousedown:function(d){this.$dragging=this.$(d.currentTarget).addClass(\"dragging\");this.mouse_down_left=d.offsetX||d.clientX-this.$(d.currentTarget).offset().left;d.preventDefault();d.stopPropagation()},mousemove:function(d){if(this.$dragging){this.$dragging.offset({left:d.pageX-this.mouse_down_left});d.preventDefault();d.stopPropagation()}},mouseup:function(g){if(this.$dragging==null){return}this.$dragging.removeClass(\"dragging\");var f=parseInt(this.$dragging.css(\"left\"),10);var d=this.$dragging.width();if(f>0||f<this.max_width-d){this.$dragging.animate({left:\"0\"})}this.$dragging=null;g.preventDefault();g.stopPropagation()}});b.DraggableTags=a})(jQuery,Tumblr);(function(e,c){function d(j,k,m){var g=(m==null)?e(\"#like_form_\"+j):e(\"#\"+m),h;if(!g.length){return}h=g.attr(\"action\");if(typeof k==\"undefined\"){f(j)}else{k()}var l=e.ajax({url:h,data:g.serialize(),type:\"post\"});l.fail(function(){Tumblr.Dialog.alert(l10n_str.ajax_error)})}function f(k){var l=e(\"#like_button_\"+k);var h=e(\"#like_form_\"+k);var g=l.hasClass(\"already_like\");var j=h.attr(\"action\");e(\"#post_\"+k).addClass(\"force_redraw\");e(\"#post_\"+k)[0].offsetHeight;e(\"#post_\"+k).removeClass(\"force_redraw\");var m=l.attr(\"data-root-post-id\")||false;if(g){l.removeClass(\"already_like\");h.attr(\"action\",j.replace(\"/unlike\",\"/like\"));a(k);if(m){e(\".like_root_\"+m).removeClass(\"already_like\")}}else{l.addClass(\"already_like\");h.attr(\"action\",j.replace(\"/like\",\"/unlike\"));b(k);if(m){e(\".like_root_\"+m).addClass(\"already_like\")}}}function b(g){if(!(e(\"#notes_outer_container_\"+g)[0]&&e(\"#show_notes_link_\"+g)[0]&&e(\"#note_link_more_\"+g)[0]&&e(\"#note_link_less_\"+g)[0]&&e(\"#note_link_current_\"+g)[0])){return false}e(\"#show_notes_link_\"+g).show();if(e(\"#note_link_less_\"+g).is(\":visible\")){e(\"#note_link_less_\"+g).hide();e(\"#note_link_current_\"+g).show();e(\"#note_link_more_\"+g).hide()}else{e(\"#note_link_less_\"+g).hide();e(\"#note_link_current_\"+g).hide();e(\"#note_link_more_\"+g).show()}}function a(g){if(!(e(\"#show_notes_link_\"+g)[0]&&e(\"#note_link_more_\"+g)[0]&&e(\"#note_link_less_\"+g)[0]&&e(\"#note_link_current_\"+g)[0])){return false}e(\"#show_notes_link_\"+g).show();if(e(\"#note_link_more_\"+g).is(\":visible\")){e(\"#note_link_less_\"+g).hide();e(\"#note_link_current_\"+g).show();e(\"#note_link_more_\"+g).hide()}else{e(\"#note_link_less_\"+g).hide();e(\"#note_link_current_\"+g).hide();e(\"#note_link_less_\"+g).show()}}c.like_post=d;window.increment_note_count=b;window.decrement_note_count=a})(jQuery,Tumblr);(function(c,a){function b(e){c(\"#answer_form_\"+e+\" [name=redirect_to]\").remove();var g=\"#answer_container_\"+e,f=c(g)[0],m=f.children[0].className,l=c(\"#answer_text_\"+e)[0],k=f.querySelector(\".answer_avatar\").outerHTML,j=c(\"#answer_form_\"+e).serialize();if(!l.value){return}increment_note_count(e);c(f).addClass(\"updating\");l.disabled=true;var h=c.ajax({url:\"/answer\",data:j,type:\"post\"});h.fail(function(){Tumblr.Dialog.alert(l10n_str.ajax_error)});h.done(function(n){setTimeout(function(){f.innerHTML='<div class=\"'+m+'\">'+k+' <span class=\"answer_body\">'+l.value.replace(\"<\",\"&lt;\")+\"</span></div>\";c(f).addClass(\"updated\")},500)})}var d=Backbone.View.extend({el:\"#posts\",events:{\"keyup .answer_form .answer_input\":\"keyup\",\"submit .answer_form\":\"submit\"},keyup:function(f){this.answer_input=c(f.currentTarget);this.answer_form=this.answer_input.closest(\".answer_form\");this.answer_length_label=this.answer_form.find(\".answer_length\");this.answer_input_value=this.answer_input.val();if(this.answer_input_value.length){this.answer_length_label.html(141-this.answer_input_value.length)}else{this.answer_length_label.html()}},submit:function(g){g.preventDefault();g.stopPropagation();var f=c(g.currentTarget).attr(\"data-post-id\");if(f){b(f)}}});a.AnswerPost=d})(jQuery,Tumblr);(function(c,a){function b(e){var d=c(\".post_tumblelog_\"+e);d.fadeOut(500,function(){d.remove()})}a.remove_tumblelog_posts=b})(jQuery,Tumblr);(function(b,a){var c=Backbone.View.extend({events:{\"click #logout_button\":\"logout\",},logout:function(j){var h=b(j.currentTarget);var g=b(\"a\",h);var f=h.data(\"message\");var d=g.attr(\"href\");if(_.isObject(Tumblr.Dialog)){Tumblr.Dialog.confirm(f,_.bind(function(){window.location.href=d}));return false}}});a.Header=c})(jQuery,Tumblr);(function(c,b){var a=Backbone.View.extend({el:\"#posts\",events:{\"click .photo_exif_flipper\":\"flip\"},flip:function(d){d.preventDefault();d.stopPropagation();$el=c(d.currentTarget).parents(\".flipcard\");$el.addClass(\"initialized\");_.defer(function(){$el.toggleClass(\"reveal_back\")})}});b.ExifFlipcards=a})(jQuery,Tumblr);(function(c,b){var a=Backbone.View.extend({el:\"#posts\",events:{\"click .share_private\":\"toggle\"},toggle:function(g){g.preventDefault();var d=c(g.currentTarget).parents(\"li\").attr(\"data-post-id\");var f=c(\"#share_\"+d);f.toggle()}});b.SharePrivatePost=a})(jQuery,Tumblr);(function(b,a){a.documentWidth=function(c){if(!c){c=b(document).width()}Tumblr.Cookie.set(\"documentWidth\",c,24*60*60)}})(jQuery,Tumblr);(function(b,a){a.devicePixelRatio=function(){Tumblr.Cookie.set(\"devicePixelRatio\",window.devicePixelRatio,24*60*60)}})(jQuery,Tumblr);(function(b,a){var c=Backbone.View.extend({el:\"#dashboard_controls_open_blog .activity .count\",initialize:function(g){if(this.$el.length){var d=this.$el.data(\"sparkline\");if(typeof(this.$el.sparkline)==\"function\"){try{if(typeof(d)!==\"object\"){throw\"sparkline is not an object\"}if(_.max(d)===0){throw\"sparkline has no interesting data\"}this.$el.sparkline(d,{type:\"line\",lineColor:\"#748696\",fillColor:false,lineWidth:4,chartRangeMin:0,spotColor:false,minSpotColor:false,maxSpotColor:false,disableInteraction:true,width:\"72px\",height:\"30px\"});this.$el.find(\"canvas\").css({height:\"15px\",width:\"36px\"});return}catch(f){}}}}});a.ActivitySparkline=c})(jQuery,Tumblr);(function(b,a){var c=Backbone.View.extend({el:\"body\",defaults:{username_input:\"#signup_username\"},events:{\"click #suggested_usernames .popover_menu_item\":\"handle_click\"},initialize:function(d){this.options=d||{};this.options=_.extend(this.defaults,this.options)},handle_click:function(d){b(this.options.username_input).val(d.target.innerHTML).focus();b(\"#used_suggestion\").val(1);b(\"#suggested_usernames_container\").addClass(\"hidden\")}});a.UsernameSuggester=c})(jQuery,Tumblr);(function(c,b){var a={confirm:function(f){var e=c.Deferred();f=f||{};if(!f.tumblelog){return e.reject()}var d=f.avatar_url||\"/images/anonymous_avatar_96.png\";if(d&&!d.match(/96\\.png/)){d=d.replace(/_(\\d\\d.?)\\.png/,\"_96.png\")}var h=function(){e.resolve();c(\"body\").removeClass(\"dialog_open\")};var g=function(){e.reject();c(\"body\").removeClass(\"dialog_open\")};Tumblr.Dialog.confirm({text:f.confirm_text||\"\",text_ok:f.text_ok||Tumblr.Dialog.__(\"Ok\"),text_cancel:Tumblr.Dialog.__(\"Nevermind\"),callback_ok:h,callback_cancel:g,templates:{content:'<div class=\"avatar_image\" style=\"background-image: url('+d+');\"><div class=\"avatar_frame\"></div></div><span class=\"text\"><%= text %></span>'}});return e.promise()},confirm_ignore:function(g){if(!g.tumblelog){var f=c.Deferred();return f.reject()}var d=\"\",e=g.tumblelog.match(/post\\_id\\:/);if(e){d=l10n_str.confirm_block_this_person}else{d=l10n_str.confirm_block.replace(\"%1$s\",\"<strong>\"+g.tumblelog+\"</strong>\")}g.confirm_text=d;g.text_ok=Tumblr.Dialog.__(\"Ignore\");return this.confirm(g)},confirm_unfollow:function(e){if(!e.tumblelog){var d=c.Deferred();return d.reject()}e.confirm_text=Tumblr.Dialog.__(\"Confirm_Unfollow\").replace(\"%1$s\",\"<strong>\"+e.tumblelog+\"</strong>\");e.text_ok=Tumblr.Dialog.__(\"Unfollow\");return this.confirm(e)}};b.TumblelogActions=a})(jQuery,Tumblr);jQuery(document).ready(function(a){Tumblr.LinkButton.init();Tumblr.PhotoReply.init();Tumblr.ReblogFollowButtons.init();Tumblr.Panos.init();Tumblr.ReplyButtons.init();Tumblr.ReblogButtons.init();Tumblr.ShareButtons.init();Tumblr.ImagePreloader.init();Tumblr.PlaceHolders.init();Tumblr.DOMEventor.init();Tumblr.Lib.AJAXWithFormKey();new Tumblr.Header({el:\"#header\"});new Tumblr.VideoThumbnails({el:a(\"#posts\")});new Tumblr.PhotoThumbnails({el:a(\"#posts\")});new Tumblr.BlogMenu();new Tumblr.DashboardLinkPops();new Tumblr.LanguageMenu({el:\"#language_switcher\"});new Tumblr.LegalPopover({el:\"#popover_legal\"});new Tumblr.ReportTumblelogView();new Tumblr.FullHeightNoPostsFound();new Tumblr.PushButtons();new Tumblr.Notifications();new Tumblr.DraggableTags();new Tumblr.ExifFlipcards();new Tumblr.AnswerPost();new Tumblr.SharePrivatePost();new Tumblr.Notes();new Tumblr.PostControls();new Tumblr.ActivitySparkline();new Tumblr.devicePixelRatio();new Tumblr.documentWidth()});\n(function(c,a){var b=function(d){if(!(this instanceof b)){return new b(d)}this.token=d.token||\"\";if(d.instance){this.instance=d.instance;this.$instance=c(d.instance)}this.hide_timeout=null;this.transition_class=null;this.$hide_timeout=null;b.register(this)};b.prototype={create:function(e,f){f=f||{};var d=c(e);this.$instance=c(\"<div/>\",{\"data-token\":this.token,\"class\":\"plexi\"});this.instance=this.$instance.get(0);if(f.cssClass){this.$instance.addClass(f.cssClass)}d.append(this.$instance)},show:function(d){d=d||{};this.transition_class=d.transition_class||false;if(!this.$instance.hasClass(\"instant\")){this.$instance.addClass(\"active\")}setTimeout(c.proxy(function(){clearTimeout(this.$hide_timeout);if(this.transition_class){this.$instance.addClass(this.transition_class)}this.$instance.addClass(\"show\");if(!this.$instance.hasClass(\"instant\")){this.$instance.addClass(\"active\")}},this),1)},hide:function(){this.$instance.removeClass(\"show\");this.$hide_timeout=setTimeout(c.proxy(function(){this.$instance.removeClass(\"show instant active fast\");if(this.transition_class){this.$instance.removeClass(this.transition_class)}},this),50)},destroy:function(){b.instances.splice(_.indexOf(this),1);return this}};b.instances=[];b.register=function(d){this.instances.push(d)};b.findByToken=function(f){var d;for(var e=0;e<this.instances.length;e++){if(this.instances[e].token==f){d=this.instances[e]}}if(!d){var h=c('.plexi[data-token=\"'+f+'\"]');if(h.length){var g=new Tumblr.Plexi({instance:h,token:f});this.instances.push(g);return g}}return d};a.Plexi=b})(jQuery,Tumblr);\n(function(c,b){var a=Backbone.View.extend({initialize:function(d){this.options=d||{};d.items||(d.items=\".item\");this.callback=d.callback||function(){};this.before=d.before||function(){};this.placeholder=null;this.on_dragenter=_.throttle(this.on_dragenter,500);this.reloadItems()},events:function(){var d=this.options.items;var e=_([\"dragstart\",\"dragenter\",\"dragover\",\"drop\",\"dragend\"]).reduce(function(f,g){f[g+\" \"+d]=\"on_\"+g;return f},{});return _.extend(e,{})},on_dragstart:function(f){f.originalEvent.dataTransfer.effectAllowed=\"move\";try{f.originalEvent.dataTransfer.setData(\"text/html\",\"foo\")}catch(d){}this.dragged=f.currentTarget;this.placeholder=c(this.dragged).clone().addClass(\"sortable-placeholder\");if(!this.options.no_opacity){this.placeholder.css(\"opacity\",\"0\").find(\"*\").css(\"opacity\",\"0\")}this.placeholder=this.placeholder.get(0);this.$(this.dragged).addClass(\"sortable-dragging\");this.before.call(this);this.trigger(\"dragstart\",this);if(this.options.scrollable){this.$el.on(\"dragover.\"+this.cid,_.throttle(function(k){var i=0.2;var h=window.innerHeight;var g=k.originalEvent.clientY/h;var j=this.getBoundingClientRect();if(g<i&&j.top<0){window.scrollBy(0,-((i-g)*200))}else{if(g>(1-i)){window.scrollBy(0,((i+g-1)*200))}}k.preventDefault()},50));this.$(this.dragged).one(\"dragend\",_.bind(function(){this.$el.off([\"dragenter.\"+this.cid,\"dragover.\"+this.cid].join(\" \"))},this))}},on_dragenter:function(h){if(!this.dragged){return}h.preventDefault();var g=h.currentTarget;if(g==this.placeholder){return}this.$(this.dragged).hide();var d=this.$(g).index(this.options.items);var f=this.$(this.placeholder).index(this.options.items);if(f<d){this.$(g).after(this.placeholder)}else{this.$(g).before(this.placeholder)}this.last_droppable=g},on_dragover:function(d){if(!this.dragged){return}d.preventDefault()},on_drop:function(d){if(!this.dragged){return}d.stopPropagation();this.$(this.dragged).insertAfter(this.placeholder);return false},on_dragend:function(d){this.$(this.dragged).removeClass(\"sortable-dragging\").show();this.$(this.placeholder).detach();d.stopPropagation();this.callback(this);this.trigger(\"dragend\",this);this.dragged=null;this.last_droppable=null},sequence:function(){var d=this.$(this.options.items).toArray();return _.uniq(_.pluck(d,\"id\"))},reloadItems:function(){this.items=this.$(this.options.items);this.items.attr(\"draggable\",true);this.items.find(\"a\").attr(\"draggable\",false);this.items.find(\"img\").attr(\"draggable\",false);return this},teardown:function(){this.undelegateEvents();if(this.options.scrollable){this.$el.off([\"dragenter.\"+this.cid,\"dragover.\"+this.cid].join(\" \"))}this.items.add(\"a, img\",this.items).removeAttr(\"draggable\");this.options.items=this.items=null;this.options.callback=this.callback=null;this.options.before=this.before=null;this.on_dragenter=null;return this}});b.SortableView=a})(jQuery,Tumblr);\n(function(c,b){var a=Backbone.View.extend({el:\"#toaster\",debug_mode:false,defaults:{max_toast:5,toast_padding:623,away_speed:350,close_buttons:false,queue_heartbeat:1000,pause_on_hover:true,only_when_footer_hidden:true,token:null},default_toast:{id:null,type:\"text\",on_create:false,on_destory:false,animation:true,message:\" \",img1:{url:null,badge:\" \",is_link:false,href:\"#\"},img2:{url:null,badge:\" \",is_link:false,href:\"#\"},icon:{type:\"regular\",href:\"#\"},notification:{object:null,title:\"\",body:\"\",icon:false},is_link:false,href:\"#\",position_class:\"toast_only\",close:false,expires:7023,in_queue:false},toast_count:0,toasts:{},desk_notify_support:false,page_visible:true,transition_support:true,is_ipad:false,toast_ids:[],queue_ids:[],paused:false,t_paused:null,unpause_expires:2000,t_queue_heartbeat:null,toast_padding_mult:0,push_lock:false,time_until_lock:50,t_push_lock:null,footer_overlaps:false,templates:{text:'<li id=\"toast_<%- id %>\" class=\"toast toast_text <%- position_class %>\"><span class=\"toast_border\"><span class=\"toast_outer\"><span class=\"toast_inner\"><% if (is_link === true) { %><a class=\"anchor\" href=\"<%- href %>\" target=\"blank\"></a><% } %><span class=\"txt\"><%= message %></span></span></span><% if (close === true) { %><span class=\"close\"></span><% } %></span></li>',image_text:'<li id=\"toast_<%- id %>\" class=\"toast toast_image_text <%- position_class %>\"><span class=\"toast_border\"><span class=\"toast_outer\"><span class=\"toast_inner\"><% if (is_link === true) { %><a class=\"anchor\" href=\"<%- href %>\" target=\"blank\"></a><% } %><span class=\"frame box_left <%- img1.badge %>\"><% if (img1.is_link === true) { %><a href=\"<%- img1.href %>\" target=\"_blank\"><% } %><img src=\"<%- img1.url %>\" width=\"28\" height=\"28\" /><% if (img1.is_link === true) { %></a><% } %></span><span class=\"txt\"><%= message %></span></span></span><% if (close === true) { %><span class=\"close\"></span><% } %></span></li>',image_text_image:'<li id=\"toast_<%- id %>\" class=\"toast toast_image_text_image <%- position_class %>\"><span class=\"toast_border\"><span class=\"toast_outer\"><span class=\"toast_inner\"><% if (is_link === true) { %><a class=\"anchor\" href=\"<%- href %>\" target=\"blank\"></a><% } %><span class=\"frame box_left <%- img1.badge %>\"><% if (img1.is_link === true) { %><a href=\"<%- img1.href %>\" target=\"_blank\"><% } %><img src=\"<%- img1.url %>\" width=\"28\" height=\"28\" /><% if (img1.is_link === true) { %></a><% } %></span><span class=\"txt\"><%= message %></span><span class=\"frame box_right <%- img2.badge %>\"><% if (img2.is_link === true) { %><a href=\"<%- img2.href %>\" target=\"_blank\"><% } %><img src=\"<%- img2.url %>\" width=\"28\" height=\"28\" /><% if (img2.is_link === true) { %></a><% } %></span></span></span><% if (close === true) { %><span class=\"close\"></span><% } %></span></li>',image_text_icon:'<li id=\"toast_<%- id %>\" class=\"toast toast_image_text_icon <%- position_class %>\"><span class=\"toast_border\"><span class=\"toast_outer\"><span class=\"toast_inner\"><% if (is_link === true) { %><a class=\"anchor\" href=\"<%- href %>\" target=\"blank\"></a><% } %><span class=\"frame box_left <%- img1.badge %>\"><% if (img1.is_link === true) { %><a href=\"<%- img1.href %>\" target=\"_blank\"><% } %><img src=\"<%- img1.url %>\" width=\"28\" height=\"28\" /><% if (img1.is_link === true) { %></a><% } %></span><span class=\"txt\"><%= message %></span><a class=\"frame box_right icon <%= icon.type %>\" href=\"<%- icon.href %>\"><span class=\"inside icon <%= icon.type %>\"></span></a></span></span><% if (close === true) { %><span class=\"close\"></span><% } %></span></li>'},events:{mouseover:\"hover_in\",mouseout:\"hover_out\"},initialize:function(d){this.options=d||{};this.options=_.extend(this.defaults,this.options);this.debug_order=0;if(this.options.only_when_footer_hidden){this._sidebar_hide_helpers()}if(window.webkitNotifications||window.Notification){this.desk_notify_support=true}c('<style type=\"text/css\"> #toaster .toast .toast_border { background-color: '+c(\"body\").css(\"background-color\")+\" !important; } </style>\").appendTo(\"head\");var e=document.createElement(\"div\").style;this.transition_support=\"transition\" in e||\"WebkitTransition\" in e||\"MozTransition\" in e||\"msTransition\" in e||\"OTransition\" in e;this.is_ipad=(navigator.userAgent.match(/iPad/i)===null)?false:true;this._queue_heartbeat();this._add_visibility_helper();return this},debug:function(d){this.debug_mode=d;console.log(\"Debug mode is now \"+(d?\"on\":\"off\")+\".\")},tumblrbot:function(e){var d={type:\"image_text\",message:\"<strong>\"+e+\"</strong>\",is_link:false,href:\"#\",img1:{url:\"/images/toast_tumblrbot.png\",is_link:true,href:\"http://tumblrbot.tumblr.com/\"}};this.add_toast(d)},can_display_toasts:function(){var d=c(window);if(d.innerHeight()<400||d.innerWidth()<960){return false}return this.page_visible},footer_will_overlap:function(){if(this.options.only_when_footer_hidden){return this.footer_overlaps}return false},is_screen_full:function(){return(this.toast_ids.length>=this.options.max_toast)},is_screen_empty:function(){return(this.toast_ids.length===0)},is_queue_empty:function(){return(this.queue_ids.length===0)},_queue_heartbeat:function(){clearTimeout(this.t_queue_heartbeat);var d=function(){if(this.is_queue_empty()||!this.is_screen_empty()){this._queue_heartbeat()}else{this.push_lock=true;var g=this.queue_ids.length;this.toast_padding_mult=0;for(var e=0;e<=g;e++){if((e<this.options.max_toast)&&(e<g)){var f=this.queue_ids[0];this.queue_ids.splice(0,1);this.toast_ids.push(f);this._delayed_add_toast_to_dom(f,(this.toast_padding_mult*this.options.toast_padding));this.toast_padding_mult++}else{break}}this._queue_heartbeat()}};this.t_queue_heartbeat=setTimeout(_.bind(d,this),this.options.queue_heartbeat)},_delayed_add_toast_to_dom:function(f,d){var e=setTimeout(_.bind(function(){this._add_toast_to_dom(f)},this),d)},_add_next_queue_item:function(){if(!this.is_queue_empty()){var d=this.queue_ids[0];this.queue_ids.splice(0,1);this.toast_ids.push(d);this._add_toast_to_dom(d);this._queue_heartbeat()}},add_toast:function(d){var e={};jQuery.extend(e,this.default_toast,d);this._toast(e)},_toast:function(e){var f=this.toast_count++;var d=(this.push_lock||!this.is_queue_empty()||this.is_screen_full());if(d){this.queue_ids.push(f)}else{if(this.toast_ids.length===0){this.toast_padding_mult=0}this.toast_ids.push(f)}e=jQuery.extend(e,{id:f});var g=this._get_toast_template(e.type);$toast=c(g(e));this.toasts[f]={id:f,$el:$toast,options:e,in_queue:d,t:null};if(!d){setTimeout(_.bind(function(){this._add_toast_to_dom(f)},this),(this.toast_padding_mult*this.options.toast_padding));this.toast_padding_mult++;clearTimeout(this.t_push_lock);this.t_push_lock=setTimeout(_.bind(function(){this.push_lock=true;this.toast_padding_mult=0},this),this.time_until_lock)}return f},_add_toast_to_dom:function(d){if(this.footer_will_overlap()||!this.can_display_toasts()||typeof this.toasts[d]===\"undefined\"){this._nuke_toast(d);return}this.toasts[d].t=this._set_toast_timeout(d);this.$el.append(this.toasts[d].$el);if(this.transition_support){setTimeout(_.bind(function(){this._update_position_helpers()},this),200)}else{this._update_position_helpers()}c(\"#toast_\"+d).addClass(\"animation\");setTimeout(function(){c(\"#toast_\"+d).addClass(\"slide_open\")},50);this._measure_helpers(d);this._click_helpers(d)},_sidebar_hide_helpers:function(){var e=c(\"#right_column\");if(e.length!==1){return}var f=e.outerWidth();var d=e.outerHeight();setInterval(_.bind(function(){var p=c(window).innerHeight();var n=window.pageYOffset;var m=n+p;var o=e.offset();var k=o.top;var h=o.top+d;if((n+(p/2.5))<h){this.footer_overlaps=true;for(var l=this.toast_ids.length-1;l>=0;l--){this.pop_toast(this.toast_ids[l])}for(var g=this.queue_ids.length-1;g>=0;g--){this._nuke_toast(this.queue_ids[g])}this._queue_heartbeat()}else{this.footer_overlaps=false}},this),800)},_measure_helpers:function(d){$txt=c(\"#toast_\"+d+\" .txt\");if($txt.length>0){var e=$txt.height();if(e>0&&e<=20){$txt.addClass(\"nowrap\")}}},_click_helpers:function(d){$anchor=c(\"#toast_\"+d+\" .anchor\");if($anchor.length>0){$anchor.on(\"mousedown\",function(){c(\"#toast_\"+d).addClass(\"toast_active\")});$anchor.on(\"click, mouseup, mouseleave\",function(){c(\"#toast_\"+d).removeClass(\"toast_active\")})}},reset_all_timeouts:function(){c.each(this_toast_ids,_.bind(function(e,d){this._set_toast_timeout(d)},this))},set_all_timeouts:function(d){c.each(this.toast_ids,_.bind(function(f,e){this.toasts[e].t=this._set_custom_toast_timeout(e,d)},this))},hover_in:function(){if(this.is_ipad){return}clearTimeout(this.t_paused);if(!this.paused){this._clear_all_timeouts()}this.paused=true;this.$el.addClass(\"hover\")},hover_out:function(){if(this.is_ipad){return}this.t_paused=setTimeout(_.bind(function(){this.paused=false;this.$el.removeClass(\"hover\");c.each(this.toast_ids,_.bind(function(f,e){var d=this.unpause_expires+(f*this.options.toast_padding);this.toasts[e].t=this._set_custom_toast_timeout(e,d)},this))},this),150)},pop_toast:function(e){if(this.debug_mode||typeof this.toasts[e]===\"undefined\"){return}clearTimeout(this.toasts[e].t);var d=jQuery.inArray(e,this.toast_ids);this.toast_ids.splice(d,1);delete this.toasts[e];this._freeze_toast(e);this._animate_away(e);this._update_position_helpers();if(this.can_display_toasts()&&!this.footer_will_overlap()&&(this.toast_ids.length==(this.options.max_toast-1))){this._add_next_queue_item()}else{this._queue_heartbeat()}clearTimeout(this.t_push_lock);if(this.is_screen_empty()){this.push_lock=false}},_nuke_all_toast:function(){c.each(this.toasts,_.bind(function(e,d){this._nuke_toast(d.id)},this));this._queue_heartbeat()},_nuke_toast:function(e){var d=jQuery.inArray(e,this.toast_ids);if(d!==-1){this.toast_ids.splice(d,1)}var f=jQuery.inArray(e,this.queue_ids);if(f!==-1){this.queue_ids.splice(f,1)}if(d!==-1||f!==-1){clearTimeout(this.toasts[e].t);delete this.toasts[e];var g=c(\"#toast_\"+e);if(g.length>0){g.remove()}}this._update_position_helpers();return},_clear_all_timeouts:function(){c.each(this.toast_ids,_.bind(function(e,d){clearTimeout(this.toasts[d].t)},this))},_animate_away:function(e){var d=c(\"#toast_\"+e);if(d.length===0){return}c(\"#toast_\"+e).addClass(\"fade_out\");setTimeout(function(){c(\"#toast_\"+e).remove()},(this.options.away_speed+15))},_freeze_toast:function(d){var l=c(\"#toast_\"+d);if(l.length===0){return}var e=l.position();var j=c(\"#toaster\").height();var h=l.outerHeight();var i=l.width();var k=l.height();var g=e.top;var f=e.left;l.css({position:\"absolute\",bottom:(j-h)+\"px\",left:f+\"px\",width:i,height:k})},_get_toast_template:function(d){return _.template(this.templates[d])},_toast_expire:function(d){this.pop_toast(d)},_add_visibility_helper:function(){var g,h,f={hidden:\"visibilitychange\",mozHidden:\"mozvisibilitychange\",webkitHidden:\"webkitvisibilitychange\",msHidden:\"msvisibilitychange\",oHidden:\"ovisibilitychange\"};for(g in f){if(f.hasOwnProperty(g)&&g in document){h=f[g];break}}if(h){document.addEventListener(h,e)}else{if(c.browser.msie&&(parseInt(c.browser.version,10)<=9)){document.onfocusin=document.onfocusout=e}else{window.onfocus=window.onblur=e}}var d=this;function e(j){var i=document.body;j=j||window.event;if(j.type==\"focus\"||j.type==\"focusin\"){d.page_visible=true}else{if(j.type==\"blur\"||j.type==\"focusout\"){d.page_visible=false}else{d.page_visible=this[g]?false:true}}}},_set_toast_timeout:function(d){if(typeof this.toasts[d]!=\"object\"){return null}return this._set_custom_toast_timeout(d,this.toasts[d].options.expires)},_set_custom_toast_timeout:function(f,d){if(typeof this.toasts[f]!=\"object\"){return null}clearTimeout(this.toasts[f].t);var e=function(){this._toast_expire(f)};return setTimeout(_.bind(e,this),d)},_update_position_helpers:function(){var f=0;var d=0;for(var e=this.toast_ids.length-1;e>=0;e--){if(c(\"#toast_\"+this.toast_ids[e]).is(\":visible\")){d++}}c.each(this.toast_ids,function(h,g){$this_toast=c(\"#toast_\"+g);if($this_toast.length>0){$this_toast.removeClass(\"toast_only toast_top toast_bottom toast_middle\");if(d==1){$this_toast.addClass(\"toast_only\")}else{if(f===0){$this_toast.addClass(\"toast_top\")}else{if(f===(d-1)){$this_toast.addClass(\"toast_bottom\")}else{$this_toast.addClass(\"toast_middle\")}}}f++}})}});b.Toaster=a})(jQuery,Tumblr);(function(c,a){var b=Backbone.Model.extend({translations:{},add_translations:function(d){jQuery.extend(this.translations,d)},unset_translations:function(){this.translations={}},__:function(d){return this.translations[d]||d},_helper_icon_target_type:function(d){return d.target_post_type},_helper_media_url:function(d){return d.media_url},_helper_from_tumblelog_link:function(d){var e=d.from_tumblelog_name;if(d.from_tumblelog_name.length>14){e=d.from_tumblelog_name.substr(0,14)+\"...\"}return'<a href=\"'+d.from_tumblelog_url+'\" target=\"_blank\">'+e+\"</a>\"},_helper_other_user_badge:function(d){var e=d.type;if(e===\"answer\"){e=\"reply\"}if(e===\"photo_reply\"){e=\"reply\"}return e},_helper_blockquote:function(d){return\"<blockquote>\"+d+\"</blockquote>\"},_helper_is_empty:function(d){return(d===\"\")},_helper_has_reply:function(d){if((typeof d.quote_summary==\"string\")&&!this._helper_is_empty(d.quote_summary)){return true}else{return false}},_helper_summary_txt:function(d){if((typeof d.summary==\"string\")&&!this._helper_is_empty(d.summary)){return\": <em>\"+d.summary+\"</em>\"}else{return\"\"}},_helper_post_noun:function(d){return d.noun_type==\"question\"?\"post\":d.noun_type},_base_other_user_action:function(d){var g={img1:{url:d.from_tumblelog_avatar,badge:this._helper_other_user_badge(d),is_link:true,href:d.from_tumblelog_url}};var f={};if(d.type==\"follower\"||d.type==\"user_mention\"){f={type:\"image_text\"}}else{if(d.type==\"photo_reply\"){f={type:\"image_text_image\",img2:{url:d.photo_reply_url,is_link:true,href:d.target_post_url}}}else{if(d.target_post_type==\"photo\"){f={type:\"image_text_image\",img2:{url:this._helper_media_url(d),is_link:true,href:d.target_post_url}}}else{f={type:\"image_text_icon\",icon:{type:this._helper_icon_target_type(d),href:d.target_post_url}}}}}var e={};jQuery.extend(e,g,f);return e},notification_center_convert:function(f,d){var e={type:\"image_text\",message:\"<strong>\"+f+\"</strong>\",is_link:true,href:d.url,img1:{url:d.tumblelog.avatar,is_link:true,href:d.tumblelog.url}};return e},like:function(d){var e=this._base_other_user_action(d);var g=\"%1$s liked your \"+this._helper_post_noun(d);g=this.__(g).replace(\"%1$s\",this._helper_from_tumblelog_link(d));var f={message:g,is_link:true,href:d.target_post_url};jQuery.extend(f,e);return f},reblog:function(d){var e=this._base_other_user_action(d);var g=\"%1$s reblogged your \"+this._helper_post_noun(d);g+=this._helper_has_reply(d)?\" and added:\":\"\";g=this.__(g).replace(\"%1$s\",this._helper_from_tumblelog_link(d));if(this._helper_has_reply(d)){g+=this._helper_blockquote(d.quote_summary)}var f={message:g,is_link:true,href:d.new_post_url};jQuery.extend(f,e);return f},answer:function(d){var e=this._base_other_user_action(d);var g=\"%1$s answered your question\";g=this.__(g).replace(\"%1$s\",this._helper_from_tumblelog_link(d));g+=this._helper_summary_txt(d)+this._helper_blockquote(d.answer_text);var f={message:g,is_link:true,href:d.target_post_url};jQuery.extend(f,e);return f},reply:function(d){var e=this._base_other_user_action(d);var g=\"%1$s replied to your \"+this._helper_post_noun(d);g=this.__(g).replace(\"%1$s\",this._helper_from_tumblelog_link(d));g+=this._helper_summary_txt(d)+this._helper_blockquote(d.reply_text);var f={message:g,is_link:true,href:d.target_post_url};jQuery.extend(f,e);return f},photo_reply:function(d){var e=this._base_other_user_action(d);var g=\"%1$s replied to your \"+this._helper_post_noun(d);g=this.__(g).replace(\"%1$s\",this._helper_from_tumblelog_link(d));g+=this._helper_summary_txt(d);var f={message:g,is_link:true,href:d.target_post_url};jQuery.extend(f,e);return f},follower:function(d){var e=this._base_other_user_action(d);var g=\"%1$s started following %2$s\";if(this.has(\"primary_tumblelog\")){if(this.get(\"primary_tumblelog\")==d.target_tumblelog_name){g=\"%1$s started following you\"}}g=this.__(g);g=g.replace(\"%1$s\",this._helper_from_tumblelog_link(d));g=g.replace(\"%2$s\",d.target_tumblelog_name);var f={message:g,is_link:true,href:d.from_tumblelog_url};jQuery.extend(f,e);return f},user_mention:function(d){var f=this._base_other_user_action(d);var i=this._helper_post_noun(d);var e=i==\"audio\"?\"an\":\"a\";var h=\"%1$s mentioned %2$s in \"+e+\" \"+i;h=this.__(h);h=h.replace(\"%1$s\",this._helper_from_tumblelog_link(d));h=h.replace(\"%2$s\",d.target_tumblelog_name);var g={message:h,is_link:true,href:d.new_post_url};jQuery.extend(g,f);return g}});a.ToastKit=new b()})(jQuery,Tumblr);(function(c,a){var b=Backbone.Model.extend({enabled:true,debug_mode:false,poll_route:\"/svc/poll\",is_sleeping:false,total_sleep_heartbeats:0,total_empty_heatbeats:0,hash_history:{},use_hash_history:true,visibility_check:2000,i_visibility_check:null,is_window_visible:true,defaults:{toast_mode:0,primary_tumblelog:false,start_timestamp:false,check_posts:false,check_inbox:false,current_speed:1,initial_delay:0,poll_speeds:{0:10000,1:20000,2:30000,3:50000,4:60000,5:80000},sleep_speed:300000,sleep_max:18,slowdown_beats:10,poll_padding:30000},use_timestamps:true,last_timestamp:false,t_heartbeat:null,is_first_heartbeat:true,poll_lock:false,initialize:function(d){this.options=this.attributes;Tumblr.ToastKit.set(\"primary_tumblelog\",d.primary_tumblelog);if(typeof Tumblr.Cookie===\"object\"){var e=Tumblr.Cookie.get(\"last_toast\");if(e){e=parseInt(e,10);if(e!==0&&e>this.options.start_timestamp){this.options.start_timestamp=e}}}if(this.options.start_timestamp){this.update_timestamp(this.options.start_timestamp)}if(this.options.toast_mode===0){this.options.current_speed=3}this._set_heartbeat();this.i_visibility_check=setInterval(_.bind(this._check_visibility,this),this.visibility_check)},kill_switch:function(){this.enabled=false;this.poll_lock=true;clearTimeout(this.t_heartbeat)},debug_endless:function(){this.use_timestamps=false;this.use_hash_history=false;this.options.current_speed=0;this.heartbeat();return true},heartbeat:function(){clearTimeout(this.t_heartbeat);if(!this.enabled){return false}if(this.total_empty_heatbeats>=this.options.slowdown_beats){this.total_empty_heatbeats=0;this.poll_slower()}if(this.is_sleeping){this.total_sleep_heartbeats++;if(this.total_sleep_heartbeats<=this.options.sleep_max){this.poll()}else{}}else{this.poll()}this._set_heartbeat();return},get_next_heartbeat:function(){return this.is_sleeping?this.options.sleep_speed:this.options.poll_speeds[this.options.current_speed]},_check_visibility:function(){var d=Tumblr.Toaster.can_display_toasts();if(this.is_window_visible&&!d){this.sleep()}if(!this.is_window_visible&&d){this.wakeup()}this.is_window_visible=d},_set_heartbeat:function(){var d=this.is_sleeping?this.options.sleep_speed:this.options.poll_speeds[this.options.current_speed];if(this.is_first_heartbeat){this.is_first_heartbeat=false;d=this.is_sleeping?this.options.sleep_speed:this.options.poll_speeds[this.options.initial_delay]}this.t_heartbeat=setTimeout(_.bind(function(){this.heartbeat()},this),d)},poll_faster:function(){var d=this.options.current_speed;if((d-1)>=0){this.options.current_speed--}},poll_slower:function(){var d=this.options.current_speed;var e=_.size(this.options.poll_speeds);if((d+1)<e){this.options.current_speed++}},sleep:function(){this.is_sleeping=true;this.total_sleep_heartbeats=0},wakeup:function(){this.is_sleeping=false;this.total_sleep_heartbeats=0;this._set_heartbeat()},poll:function(){if(this.poll_lock){return}this.poll_lock=true;var g={notifications_next:(this.get_next_heartbeat()+this.options.poll_padding),magick:Math.floor(Math.random()*100001)};if(this.options.token!==null){g.token=this.options.token}if(this.options.toast_mode!==0){var d={notifications:true};jQuery.extend(g,d)}if(this.use_timestamps&&this.last_timestamp&&!this.debug_mode){jQuery.extend(g,{from:this.last_timestamp})}if(this.options.check_posts){var h={unread:true};jQuery.extend(g,h)}if(this.options.check_inbox){var e={inbox:true};jQuery.extend(g,e)}var f=c.ajax({url:this.poll_route,type:\"GET\",data:g});f.done(_.bind(function(i){this.poll_lock=false;if(this.options.toast_mode!==0){this.parse_notifications(i)}if(this.options.check_posts){this.parse_unread(i)}if(this.options.check_inbox){this.parse_inbox(i)}if(typeof i.next_from!==\"undefined\"){this.update_timestamp(i.next_from)}},this));f.fail(_.bind(function(){this.kill_switch()},this))},update_timestamp:function(d){d=parseInt(d,10);if(this.last_timestamp===false||d>this.last_timestamp){this.last_timestamp=d;if(typeof Tumblr.Cookie===\"object\"){Tumblr.Cookie.set(\"last_toast\",d,365*24*60*60)}}},parse_unread:function(f){if(typeof f.unread!==\"number\"){return}var e=f.unread;if(e){var d=e;if(e>=100){this.options.check_posts=false;d=\"100+\"}if(e>0){document.title=\"(\"+d+\") \"+(document.title.indexOf(\")\")!=-1?document.title.split(\")\")[1]:document.title);c(\".new_post_notice_container\").each(_.bind(function(h,g){var j=c(g);j.find(\".tab_notice_value\").text(d);j.show()},this))}}},parse_inbox:function(f){if(typeof f.inbox!==\"number\"){return}var e=f.inbox;if(e){var d=e;if(e>0){c(\".inbox_notice_container\").each(_.bind(function(h,g){var j=c(g);j.find(\".tab_notice_value\").text(d);j.show()},this))}else{c(\".inbox_notice_container\").hide()}}},parse_notifications:function(e){if(typeof e.notifications!==\"object\"){return}var d=e.notifications;if(d.length>0){c(d).each(_.bind(function(h,f){var j=false;if(this.use_hash_history){var k=f.hash;if(k in this.hash_history){this.hash_history[k]++;j=true}else{this.hash_history[k]=1}}if(!j&&this.options.toast_mode!==0){var g=false;switch(f.type){case\"like\":g=Tumblr.ToastKit.like(f);break;case\"reblog\":g=Tumblr.ToastKit.reblog(f);break;case\"answer\":g=Tumblr.ToastKit.answer(f);break;case\"reply\":g=Tumblr.ToastKit.reply(f);break;case\"photo_reply\":g=Tumblr.ToastKit.photo_reply(f);break;case\"follower\":g=Tumblr.ToastKit.follower(f);break;case\"user_mention\":g=Tumblr.ToastKit.user_mention(f);break}if(g){Tumblr.Toaster.add_toast(g)}}},this));this.poll_faster();this.total_empty_heatbeats=0}else{this.total_empty_heatbeats++}}});a.Thoth=b})(jQuery,Tumblr);\n/*!\n * Tumblr.Dialog\n * A highly customizable queuing dialog system with easy replacements for alert() and prompt()\n * Features:\n *   - Add custom templates\n *   - Tab between buttons + enter/escape support\n *   - Default buttons tied to keys\n *   - Multiple dialogs queue for user\n *   - Multiple button styles\n *   - Callbacks everywhere\n */\n(function(c,b){var a=Backbone.View.extend({el:\".ui_dialog\",translations:{},defaults:{},default_templates:{dialog:'<div class=\"ui_dialog <%= type %>\"><%= content_html %><div class=\"buttons\"><%= buttons_html %></div></div>',content:'<span class=\"text\"><%= text %></span>',button:'<button class=\"ui_button btn_<%= btn_id %> chrome <%= btn_class %>\" data-btn-id=\"<%= btn_id %>\"><span><%= text %></span></button>'},events:{\"click .ui_button\":\"button_click\"},default_dialog:{text:\"\",type:\"default\",has_form:\"auto\",visible_glass:true,confirm_by_enter:true,close_by_space:true,key_tab:true,key_close:true,animate:true,animate_in:{dialog_el:\".ui_dialog\",dialog_class:\"add_animation fadeIn\"},on_close:function(){},on_open:function(){}},initialize:function(d){this.options=_.extend(this.defaults,this.options);this.templates=this.default_templates;this.is_visible=false;this.dialog_queue_order=[];this.dialog_queue={};this.queue_counter=0;this.current_dialog=false;this.current_dialog_id=0;this.uid=0;this._init_click_lock();this._setup_keys()},add_translations:function(d){jQuery.extend(this.translations,d)},unset_translations:function(){this.translations={}},__:function(d){return this.translations[d]||d},dialog:function(d){if(!_.isObject(d)){return false}return this._dialog(d)},confirm:function(e,i,j,g,d){if(_.isString(e)){e={text:e}}var h={callback_ok:i,callback_cancel:j,text_ok:g,text_cancel:d};e=_.extend({},h,e);var f={text:e.text,type:\"confirm\",visible_glass:true,templates:e.templates||null,escape_button:0,buttons:{0:{text:e.text_cancel||this.__(\"Cancel\"),close:true,callback:((_.isFunction(e.callback_cancel))?e.callback_cancel:function(){})},1:{text:e.text_ok||this.__(\"OK\"),selected:true,btn_class:\"blue\",close:true,callback:((_.isFunction(e.callback_ok))?e.callback_ok:function(){})}}};return this._dialog(f)},alert:function(d,h,f){if(_.isString(d)){d={text:d}}var g={callback_ok:h,text_ok:f};d=_.extend({},g,d);var e={text:d.text,type:\"alert\",visible_glass:true,templates:d.templates||null,escape_button:0,buttons:{0:{text:d.text_ok||this.__(\"OK\"),selected:true,btn_class:\"blue\",close:true,callback:((_.isFunction(d.callback_ok))?d.callback_ok:function(){})}}};return this._dialog(e)},button_click:function(i){var h=c(i.currentTarget);var g=h.data(\"btn-id\");if(_.isUndefined(this.current_dialog.buttons[g])){return false}var f=this.current_dialog.buttons[g];var d=null;if(_.isFunction(f.callback)){d=f.callback(this)}if(d!==false&&((!_.isUndefined(f.close)&&f.close)||_.isUndefined(f.close))){this.close()}},is_active:function(d){if((this.current_dialog===false)||(this.current_dialog.uid!=d)){return false}return true},close:function(f){if(this.current_dialog===false){return false}if(_.isUndefined(f)){f=false}if(f!==false&&this.current_dialog.uid!=f){return false}this.$dialog_lock.hide();c(\".ui_dialog_pos\").remove();this.is_visible=false;if(_.isObject(Tumblr.KeyCommands)){Tumblr.KeyCommands.resume()}if(_.isFunction(this.current_dialog.on_close)){this.current_dialog.on_close()}this.current_dialog=false;if(this.dialog_queue_order.length>0){var d=this.dialog_queue_order.shift();var e=this.dialog_queue[d];delete this.dialog_queue[d];this._dialog(e)}},_tab:function(h){var g=this.$el.find(\".buttons .tab_frame\");var k=g.filter(\".focus\");var j=g.index(k);var f=g.length;var d=false;if((j+1)<f){d=j+1}else{d=0}k.removeClass(\"focus init_focus\");var i=g.eq(d);if(i.length>0){i.addClass(\"focus\");i.find(\"button\").focus()}},_form_is_tab_to_button:function(j,h){var k=this.$el.find(\":focus\");if(k.length===0){return true}var i=this.$el.find(\".buttons .tab_frame\");var g=this.$el.find(\":input:visible\");var f=g.index(k);if(h&&(f===(g.length-1))){this.$el.find(\":input:visible:first\").focus();j.preventDefault();i.removeClass(\"focus init_focus\");return false}if(f>=0){var d=this.$el.find(\":input:visible:eq(\"+(f+1)+\")\");if((d.length>0)&&d.hasClass(\"ui_button\")){return true}}i.removeClass(\"focus init_focus\");return false},_select:function(g){var f=this.$el.find(\".buttons .tab_frame.focus\");var d=f;if(d.length===1){d.find(\".ui_button\").click()}},_form_is_focus_on_button:function(d){var f=this.$el.find(\":focus\");if(f.length===0){return false}return f.hasClass(\"ui_button\")},_escape:function(d){if(_.isUndefined(this.current_dialog.escape_button)){return}var f=this.$el.find(\".btn_\"+this.current_dialog.escape_button);if(f.length){f.click()}},_dialog:function(g){if(_.isUndefined(g.uid)){g.uid=this._get_uid()}if(this.current_dialog!==false){this.dialog_queue_order.push(this.queue_counter);this.dialog_queue[this.queue_counter]=g;this.queue_counter++;return g.uid}_.defaults(g,this.default_dialog);var h=this._build_buttons(g.buttons);_.extend(g,{buttons_html:h});var e=this.templates;if(_.isObject(g.templates)){e=_.extend({},this.templates,g.templates)}var d=_.template(e.dialog);var f=_.template(e.content);g.content_html=f(g);var i=d(g);this.$dialog_lock.show();if(!_.isUndefined(g.visible_glass)){if(g.visible_glass){this.$dialog_lock.addClass(\"opaque\")}}else{this.$dialog_lock.removeClass(\"opaque\")}this.current_dialog_id=g.uid;this.current_dialog=g;c(\"body\").append('<div id=\"dialog_'+this.current_dialog_id+'\" class=\"ui_dialog_pos\">'+i+\"</div>\");this.$el=c(\"#dialog_\"+this.current_dialog_id);this.is_visible=true;if(g.animate&&_.isObject(g.animate_in)&&this.$el.find(g.animate_in.dialog_el).length){this.$el.find(g.animate_in.dialog_el).addClass(g.animate_in.dialog_class)}this._focus();if(_.isObject(Tumblr.KeyCommands)){Tumblr.KeyCommands.suspend()}if(_.isUndefined(g.has_form)){g.has_form=\"auto\"}if(g.has_form===\"auto\"){g.has_form=(this.$el.find(\"form, input\").length>0)}if(_.isFunction(g.on_open)){g.on_open()}this.el=this.$el[0];this.delegateEvents();return g.uid},_button:function(h,f,i,g){var e=_.template(this.templates.button);if(_.isObject(this.current_dialog.templates)){e=this.current_dialog.templates.button}if(g){f+=\" default-pulse\"}var d=e({btn_class:f,text:h,btn_id:((!_.isUndefined(i))?i:\"\")});d='<div class=\"tab_frame\">'+d+\"</div>\";return d},_focus:function(){if(!this.current_dialog){return false}for(var e in this.current_dialog.buttons){var d=this.current_dialog.buttons[e];if(!_.isUndefined(d.selected)&&d.selected){$button=this.$el.find(\".btn_\"+e);if($button.length>0){$button.parent().addClass(\"focus init_focus\")}}}},_setup_keys:function(){c(document).on(\"keydown\",_.bind(function(g){var f=(g.ctrlKey||g.shiftKey||g.metaKey);if(!this.is_visible||f){return}var d=g.keyCode||g.which;if((d===9)&&this.current_dialog.key_tab){if(this.current_dialog.has_form){if(!this._form_is_tab_to_button(g,true)){return}}g.preventDefault();this._tab(g)}if(((d===13)&&this.current_dialog.confirm_by_enter)||((d===32)&&this.current_dialog.close_by_space)){if(this.current_dialog.has_form&&(d===32)){if(!this._form_is_focus_on_button(g)){return}}g.preventDefault();this._select(g)}if((d===27)&&this.current_dialog.key_close){g.preventDefault();this._escape(g)}},this))},_build_buttons:function(k){if(!_.isObject(k)){return\"\"}var h=0;for(var g in k){if(k.hasOwnProperty(g)){h++}}var f=\"\";for(var e=0;e<h;e++){if(_.isUndefined(k[e])){continue}var l=(!_.isUndefined(k[e].text))?k[e].text:\"\";var d=(!_.isUndefined(k[e].btn_class))?k[e].btn_class:\"\";var j=(!_.isUndefined(k[e].selected))?k[e].selected:false;f+=this._button(l,d,e,j)}return f},_init_click_lock:function(){this.$dialog_lock=false;c(_.bind(function(){c(\"body\").prepend('<div class=\"ui_dialog_lock\"></div>');this.$dialog_lock=c(\"body > .ui_dialog_lock\")},this))},_get_uid:function(){return this.uid++}});b.Dialog=new a()})(jQuery,Tumblr);\n(function(a){Tumblr.PhotoReply=Backbone.View.extend({options:{post_id:undefined,mb_limit:10,status:\"inactive\",progress:0,image:undefined},initialize:function(b){this.options=b||{};this.post_id=this.options.post_id||this.$el.data(\"postId\");this.status=this.options.status||\"inactive\";this.progress=this.options.progress||0;this.disabled=true;this.$post=this.$el.closest(\".post\");this.$container=this.$post.find(\".photo_reply_container\");this.$icon=this.$(\".photo_reply_icon\");this.$progress=this.$(\".photo_reply_icon_progress\");this.$image=this.$(\".photo_reply_image\");this.$icon.addClass(\"show_progress_bar\");this.__proxy_functions();if(this.status!==\"has_image\"){this.enable_dropzone()}this.$el.data(\"tumblr_photoreply\",this);this.constructor.register(this)},__proxy_functions:function(){this._show_image=a.proxy(this.show_image,this);this._hide_image=a.proxy(this.hide_image,this);this._upload_file_add=a.proxy(this.upload_file_add,this);this._upload_submit=a.proxy(this.upload_submit,this);this._upload_progress=a.proxy(this.upload_progress,this);this._upload_end=a.proxy(this.upload_end,this);this._upload_cancel=a.proxy(this.upload_cancel,this);this._upload_stop=a.proxy(this.upload_stop,this);this._dragenter=a.proxy(this.dragenter,this);this._dragleave=a.proxy(this.dragleave,this);this._drop=a.proxy(this.drop,this)},attach_image:function(c){var b={width:\"\",height:\"\",src:\"\"};if(typeof c===\"string\"){b.src=c}else{if(c.url){b.src=c.url}if(c.height){b.height=c.height}if(c.width){b.width=c.width}}this.$container.addClass(\"fileupload\");if(!(this.$image&&this.$image.length)){this.$image=a('<img src=\"\" alt=\"\" class=\"photo_reply_image\"/>');this.$image.appendTo(this.$container).on(\"load\",this._show_image)}this.$image.attr(b)},show_image:function(){if(!(this.$image&&this.$image.length)){return false}this.$container.css(\"max-height\",this.$image.get(0).naturalHeight).addClass(\"has_photo_reply\")},hide_image:function(){this.$container.removeClass(\"has_photo_reply\").css(\"max-height\",\"\")},enable_dropzone:function(){this.disabled=false;this.$post.on({dragenter:this._dragenter,dragleave:this._dragleave,drop:this._drop});this.$post.find(\"*\").on(\"dragenter dragover\",this.cancel_event);this.$el.find('input[type=\"file\"]').on(\"click\",this._upload_cancel).attr(\"disabled\",false);this.create_uploader({form:this.$el,dropzone:this.$post})},disable_dropzone:function(){this.disabled=true;this.$post.off({dragenter:this.dragenter,dragleave:this.dragleave,drop:this.drop});this.$post.removeClass(\"photo_reply_hover\");this.$post.find(\"*\").off(\"dragenter dragover\",this.cancel_event);this.$el.find('input[type=\"file\"]').off(\"click\",this._upload_cancel).attr(\"disabled\",true)},create_uploader:function(b){this.destroy_uploader();this.$uploader=a(b.form).fileupload({dataType:\"json\",maxNumberOfFiles:1,dropZone:b.dropzone,pasteZone:null,add:this._upload_file_add,submit:this._upload_submit,send:this._upload_start,progress:this._upload_progress,always:this._upload_end,stop:this._upload_stop})},destroy_uploader:function(){if(this.$uploader&&this.$uploader.data(\"fileupload\")){a(this.$uploader).fileupload(\"destroy\")}},dragenter:function(b){this.$post.addClass(\"photo_reply_hover\")},dragleave:function(b){if(this.event_in_bounds(b)){return false}this.$post.removeClass(\"photo_reply_hover\")},drop:function(b){this.$post.removeClass(\"photo_reply_hover\")},show_coddled_progress:function(b){return this.show_progress(b,20)},show_progress:function(b,c){if(c){b=Math.max(c,Math.min(b,100-c))}this.$progress.css(\"width\",b+\"%\");return b},upload_submit:function(f,d){if(this.disabled){return false}if(this.status!==\"inactive\"){return false}var b=!!d.files.length;a.each(d.files,a.proxy(function(e,g){if(g.size&&g.size>this.options.mb_limit*1048576){b=false}},this));if(!b){var c=l10n_str.ajax_error;if(l10n_str.over_max_file_size_mb){c=l10n_str.over_max_file_size_mb.replace(\"%1$s\",this.options.mb_limit)}alert(c);return false}},upload_file_add:function(c,b){this.jqXHR=b.submit()},upload_start:function(c,b){this.status=\"uploading\";this.progress=0;this.show_progress(this.progress)},upload_progress:function(c,b){this.progress=parseInt(b.loaded/b.total*100,10);this.show_coddled_progress(this.progress)},upload_end:function(d,c){var b;if(c.textStatus===\"success\"){b=c.result}else{b=a.parseJSON(c.jqXHR.responseText)}if(b&&b.meta&&b.meta.status&&b.meta.status===200){if(b&&b.response&&b.response[0].url){this.image=b.response[0];this.progress=100;this.status=\"has_image\";this.disable_dropzone();this.attach_image(this.image)}}else{if(c&&c.errorThrown===\"abort\"){this.progress=0;this.status=\"inactive\"}else{this.progress=0;this.status=\"error\";alert(b&&b.response?b.response:l10n_str.ajax_error)}}this.show_progress(this.progress)},upload_cancel:function(){try{this.jqXHR.abort()}catch(b){}this.progress=0;this.show_progress(this.progress);this.enable_dropzone()},upload_stop:function(){this.destroy_uploader()},cancel_event:function(b){b.preventDefault();b.stopPropagation();return false},event_in_bounds:function(f){var d=f.currentTarget.getBoundingClientRect();var c=f.originalEvent;var b,g;if(typeof c.clientX===\"undefined\"){b=c.pageX;g=c.pageY}else{b=c.clientX;g=c.clientY}return !(b>d.left+d.width-1||b<d.left||g>d.top+d.height-1||g<d.top)}},{instances:[],register:function(b){this.instances.push(b)},unregister:function(b){this.instances.splice(_.indexOf(this.instances,b),1)},clean_up:function(d){if(!document.body){return}var c,b;for(c=0;c<this.instances.length;c++){b=this.instances[c];if(!(b.$el.data(\"tumblr_photoreply\")&&b.$el.closest(document.body).length)){b.remove();c--}}},init:function(){if(!this._scan){this._scan=a.proxy(this.scan,this)}if(_.indexOf(AfterAutoPaginationQueue,this._scan)<0){AfterAutoPaginationQueue.push(this._scan)}this.scan()},scan:function(b){b=a.extend({},b);a(b.el||\".photo_reply_form\").each(a.proxy(function(c,d){if(!a(d).data(\"tumblr_photoreply\")){new Tumblr.PhotoReply({el:d})}},this));return this}})})(jQuery);\n(function(a){Tumblr.LinkButton=Backbone.View.extend({events:{click:\"follow_link\"},initialize:function(b){this.$el.addClass(\"clickable\");this.determine_size();this.$el.data(\"tumblr_linkbutton\",this);this.constructor.register(this)},determine_size:function(){this.$el.removeClass(\"small\");if(this.$(\".link_title\").text().length>100||this.$(\".link_text\").height()>110){this.$el.addClass(\"small\")}},follow_link:function(b){if(a(b.target).is(\".link_title\")){return true}b.preventDefault();b.stopPropagation();this.$(\".link_title\").click();return false}},{instances:[],register:function(b){this.instances.push(b)},unregister:function(b){this.instances.splice(_.indexOf(this.instances,b),1)},init:function(){if(!this._scan){this._scan=a.proxy(this.scan,this)}if(_.indexOf(AfterAutoPaginationQueue,this._scan)<0){AfterAutoPaginationQueue.push(this._scan)}this.scan()},scan:function(b){b=a.extend({},b);a(b.el||\".link_button\").each(a.proxy(function(c,d){if(!a(d).data(\"tumblr_linkbutton\")){new Tumblr.LinkButton({el:d})}},this));return this}})})(jQuery);\n(function(c,b){var a=function(d,e){if(!(this instanceof a)){return new a(d)}this.options=d;this.config=c.extend({},a.defaults,this.options);this._=c.extend({},a.init,this.init);this.evt=c.extend({},a.events);c.each(this.evt,c.proxy(function(f){if(typeof this.config[f]===\"function\"){this.evt[f]=this.config[f]}},this));this.clock=false;this.still=true;this.motion=false;this.paused=false;a.register(this);return this};a.prototype={start_clock:function(){if(this.clock){return false}this.clock=true;clearInterval(this.ticker);this.ticker=setInterval(c.proxy(this.tick,this),this.config.dt)},stop_clock:function(){this.clock=false;clearInterval(this.ticker)},tick:function(d){if(!d){d=this.config.dt}return this.paused?false:this.__tick(d)},__tick:function(f,e){if(this.evt.pre_tick&&!this.evt.pre_tick.apply(this,[this])){return this}if(!f){f=this.config.dt}if(!e){this.set_properties({px0:this._.px,vx0:this._.vx,ax0:this._.ax,py0:this._.py,vy0:this._.vy,ay0:this._.ay,pz0:this._.pz,vz0:this._.vz,az0:this._.az,dt:f})}if(!f){return this}this.still=true;this.motion=false;var d=f*f;if(this.config.x&&(this._.vx||this._.ax)){this._.px=this._.px+this._.vx*f+0.5*this._.ax*d;this._.vx=this.__almost_zero(this._.vx+this._.ax*f);if(this._.drag<1){this._.vx*=this._.drag}if(this._.vx){this.still=false}if(this._.vx||this._.ax){this.motion=true}}if(this.config.y&&(this._.vy||this._.ay)){this._.py=this._.py+this._.vy*f+0.5*this._.ay*d;this._.vy=this.__almost_zero(this._.vy+this._.ay*f);if(this._.drag<1){this._.vy*=this._.drag}if(this._.vy){this.still=false}if(this._.vy||this._.ay){this.motion=true}}if(this.config.z&&(this._.vz||this._.az)){this._.pz=this._.pz+this._.vz*f+0.5*this._.az*d;this._.vz=this.__almost_zero(this._.vz+this._.az*f);if(this._.drag<1){this._.vz*=this._.drag}if(this._.vz){this.still=false}if(this._.vz||this._.az){this.motion=true}}if(this.evt.post_tick){this.evt.post_tick.apply(this,[this])}if(this.still&&this.evt.when_still){this.evt.when_still.apply(this,[this])}if(!this.motion&&this.evt.no_motion){this.evt.no_motion.apply(this,[this])}return this},__split_tick:function(g,f,h){if(typeof h!==\"function\"){return this.__tick(g,true)}var d=f*g;var e=g-d;if(e){this.__tick(e)}h.apply(this,[this]);if(d){this.__tick(d)}return this},__almost_zero:function(d){return Math.abs(d)<this.config.threshold?0:d},set_properties:function(d,e){if(c.isPlainObject(d)){c.extend(this._,d)}else{this._[d]=e}return this},calculate_velocity:function(g,h,n){if(g.length<2){return false}if(this.evt.slide_start){this.evt.slide_start.apply(this,[this])}var l=0,j=g.length-1;var e=(new Date()).getTime()-h;for(var f=0;f<g.length;f++){if(g[f][0]<e){l=f+1}}if(l>=j){return false}var m=g[l],k=g[j],d=k[0]-m[0];this.set_properties({vx0:this._.vx,vy0:this._.vy,vx:(m[1]-k[1])/d,vy:(m[2]-k[2])/d});if(n){this.autostart_xy()}return this},autostart_xy:function(){var d=(this.config.x&&this._.vx)||(this.config.y&&this._.vy);if(d){this.start_clock()}return d},autostop_xy:function(){var d=!(this._.vx&&this.config.x)&&!(this._.vy&&this.config.y);if(d){this.stop_clock()}return d}};a.instances=[];a.register=function(d){this.instances.push(d)};a.unregister=function(d){this.instances.splice(this.instances.indexOf(d),1)};a.dt=15;a.tick=function(e){if(typeof e!==\"number\"){e=this.dt}for(var d=0;d<this.instances.length;d++){this.instances[d].tick(e)}};a.init={px:0,vx:0,ax:0,py:0,vy:0,ay:0,pz:0,vz:0,az:0,px0:0,vx0:0,ax0:0,py0:0,vy0:0,ay0:0,pz0:0,vz0:0,az0:0,drag0:0.9,drag:0.9,dt:null};a.events={pre_tick:false,post_tick:false,slide_start:false,when_still:false,no_motion:false};a.defaults={x:true,y:false,z:false,threshold:0.005,dt:a.dt};b.Physics=a})(jQuery,this.Tumblr||(this.Tumblr={}));(function(c,b){var a=function(e,d){if(!(this instanceof a)){return new a(e,d)}this.el=(typeof e===\"string\")?c(e).get(0):e;this.$el=c(e);this.options=d;this.metadata=this.$el.data(\"plugin-options\");this.config=c.extend({},a.defaults,this.options,this.metadata);this.$parent=c(this.config.parent);this.start=c.proxy(this.__start,this);this.end=c.proxy(this.__end,this);this.move=c.proxy(this.__move,this);this.click=c.proxy(this.__click,this);this.scroll=c.proxy(this.__scroll,this);this.__init();a.register(this);return this};a.prototype={__init:function(){this.__reset_positions();if(this.autostart){this.enable()}this.touch=(\"ontouchstart\" in window||\"onmsgesturechange\" in window)&&navigator.msMaxTouchPoints>1;if(this.touch){c.extend(this.config,{start:\"touchstart\",end:\"touchend\",move:\"touchmove\"})}this.physics=this.config.physics?new Tumblr.Physics(this.config.physics):false},enable:function(){this.enable_dragging();if(this.config.can_scroll){this.enable_scrolling()}},enable_dragging:function(){this.dragging=false;this.$el.on(this.config.start,this.start);this.$el.on(this.config.click,this.click)},enable_scrolling:function(){this.scrolling=false;this.$el.on(this.config.scroll,this.scroll);clearTimeout(this.enable_scrolling_delay)},disable:function(){this.disable_dragging();this.disable_scrolling()},disable_dragging:function(){this.dragging=false;this.$el.off(this.config.start,this.start);this.$el.off(this.config.click,this.click);this.$parent.off(this.config.blur,this.end);this.$parent.off(this.config.end,this.end);this.$parent.off(this.config.move,this.move)},disable_scrolling:function(){this.scrolling=false;this.$el.off(this.config.scroll,this.scroll);clearTimeout(this.enable_scrolling_delay)},__start:function(d){this.dragging=true;this.$parent.on(this.config.blur,this.end);this.$parent.on(this.config.end,this.end);this.$parent.on(this.config.move,this.move);this.__reset_positions();this.__event_position(d);this.start_position=this.end_position=this.positions[0];if(this.config.start_position){this.config.start_position(this.start_position[1],this.start_position[2])}if(this.physics){this.physics.set_properties({vx0:this.physics._.vx,vy0:this.physics._.vy,vx:0,vy:0}).stop_clock()}d.stopPropagation();return false},__end:function(d){this.dragging=false;this.$parent.off(this.config.blur,this.end);this.$parent.off(this.config.end,this.end);this.$parent.off(this.config.move,this.move);if(this.config.end_position){this.config.end_position(this.end_position[1],this.end_position[2])}if(this.physics){this.physics.calculate_velocity(this.positions,this.config.pos_time,true)}},__click:function(d){if(this.__any_movement()){d.stopPropagation();return false}return true},__move:function(f){var d=this.__event_position(f);this.end_position=this.positions[this.positions.length-1];if(this.config.update_position){this.config.update_position(d.x-this.start_position[1],d.y-this.start_position[2],false)}},__scroll:function(d){if(this.physics&&this.physics.clock){d.preventDefault();this.physics.set_properties({vx0:this.physics._.vx,vy0:this.physics._.vy,vz0:0,vx:0,vy:0,vz:0}).stop_clock();this.physics.motion=false;if(this.physics.evt.no_motion){this.physics.evt.no_motion.apply(this.physics,[this.physics])}return false}if(this.config.update_position){this.config.update_position(this.$el.scrollLeft(),this.$el.scrollTop(),true)}},__event_position:function(f,h){var d,g;if(this.touch){if(!f.originalEvent.targetTouches.length){return false}d=f.originalEvent.targetTouches[0].pageX;g=f.originalEvent.targetTouches[0].pageY}else{d=f.pageX;g=f.pageY}if(h){return{x:d,y:g}}else{return this.__record_position(d,g)}},__any_movement:function(){if(this.positions<2){return false}var e=this.positions[0],d=this.positions[this.positions.length-1];return d[0]!==e[0]||d[1]!==e[1]},__reset_positions:function(){delete this.start_position;delete this.end_position;this.positions=[];this.scroll_x=this.$el.scrollLeft();this.scroll_y=this.$el.scrollTop()},__record_position:function(d,f){if(c.isPlainObject(d)){f=d.y;d=d.x}var e=(new Date()).getTime();this.positions.push([e,d,f]);if(this.positions.length-1===this.config.pos_limit){this.positions.shift()}else{if(this.positions.length>this.config.pos_limit){this.positions.splice(-this.config.pos_limit,this.positions.length)}}this.positions.push([e,d,f]);return{x:d,y:f}},sync_scroll:function(e){if(!this.config.can_scroll){return}this.disable_scrolling();var d=c(e);this.$el.scrollLeft(d.scrollLeft());this.$el.scrollTop(d.scrollTop());this.scroll_x=this.$el.scrollLeft();this.scroll_y=this.$el.scrollTop();if(this.physics){this.physics.set_properties({px:this.scroll_x,py:this.scroll_Y})}clearTimeout(this.enable_scrolling_delay);this.enable_scrolling_delay=setTimeout(c.proxy(this.enable_scrolling,this),200)}};a.instances=[];a.register=function(d){this.instances.push(d)};a.unregister=function(d){this.instances.splice(this.instances.indexOf(d),1)};a.defaults={pos_limit:5,pos_time:200,start:\"mousedown\",end:\"mouseup\",move:\"mousemove\",click:\"click\",scroll:\"scroll\",blur:\"blur\",parent:window,can_scroll:true,physics:false,start_position:false,end_position:false,update_position:false,autostart:true};b.DragRelay=a})(jQuery,Tumblr);(function(c,a){var d=function(e){this.options=e;this.__init(this.config);return this};d.prototype={__init:function(){Tumblr.Glass.show(function(){this.__destroy()}.bind(this));this.click=c.proxy(this.__click,this);this.resize=c.proxy(this.__resize,this);this.keydown=c.proxy(this.__keydown,this);this.keyup=c.proxy(this.__keyup,this);this.keycancel=c.proxy(this.__keycancel,this);this.__create();if(this.options.pano){this.__clone_pano(this.options.pano)}this.__open()},__bind_events:function(){this.$lightbox.on(\"click\",this.click);c(window).on(\"resize\",this.resize);c(window).on(\"keydown\",this.keydown)},__unbind_events:function(){this.$lightbox.off(\"click\",this.click);c(window).off(\"resize\",this.resize);c(window).off(\"keydown\",this.keydown);c(window).off(\"keyup\",this.keyup);c(window).off(\"blur\",this.keycancel)},__create:function(){this.$lightbox=c(\"<div/>\").attr(\"class\",\"pano_lightbox\").appendTo(c(\"body\"));this.$lightbox.css({position:\"fixed\",top:0,left:0,right:0,bottom:0,zIndex:4294967294,overflow:\"hidden\",backgroundColor:\"rgba(15,15,15,0.95)\"});c(\"<img/>\").attr(\"id\",\"vignette\").attr(\"src\",\"http://assets.tumblr.com/images/full_page_vignette.png\").css({position:\"absolute\",top:0,left:0,right:0,bottom:0,width:\"100%\",height:\"100%\"}).appendTo(this.$lightbox);c(\"<div/>\").css({position:\"absolute\",top:0,left:0,right:0,bottom:0,width:\"100%\",height:\"100%\"}).appendTo(this.$lightbox)},__destroy:function(){this.__unbind_events();this.$lightbox.css(\"display\",\"none\").remove();this.pano.$parent.css(\"overflow\",\"\");delete this.$lightbox;if(window.top!=window.self){if(typeof window.top.pano_iframe_preloader!=\"undefined\"&&window.top.pano_iframe_preloader){window.top.pano_iframe_preloader.remove()}}b.unregister(this)},__clone_pano:function(e){this.$pano=c(e).clone(false).appendTo(this.$lightbox);this.pano=new b(this.$pano,{side_margins:100});this.pano.lightbox=this},__open:function(){this.__bind_events();this.pano.__center_vertically(c(window).height());this.pano.$parent.css(\"overflow\",\"hidden\")},__close:function(){Tumblr.Glass.hide()},__click:function(f){if(c(f.target).closest(\".pano_dragger\").length||c(f.target).closest(\".pano_thumb\").length){return}this.__close()},__resize:function(f){this.pano.__enforce_max_height();this.pano.__center_vertically(c(window).height());this.pano.__draw_shades();c(\"#vignette\").css(\"display\",\"none\")},__keydown:function(g){if(!g){return false}var f=g.charCode?g.charCode:g.keyCode;if((g.ctrlKey||g.metaKey)&&f===87){this.__close();return false}if(!g.shiftKey&&!g.ctrlKey&&g.altKey&&!g.metaKey){return true}switch(f){case 37:if(this.arrowed){return false}this.arrowed=true;this.pano.physics.set_properties({drag0:this.pano.physics._.drag,drag:1,vx0:this.pano.physics._.vx,vx:-0.9}).autostart_xy();c(window).on(\"blur\",this.keycancel);c(window).on(\"keyup\",this.keyup);return false;case 39:if(this.arrowed){return false}this.arrowed=true;this.pano.physics.set_properties({drag0:this.pano.physics._.drag,drag:1,vx0:this.pano.physics._.vx,vx:0.9}).autostart_xy();c(window).on(\"blur\",this.keycancel);c(window).on(\"keyup\",this.keyup);return false;case 27:case 32:case 74:case 75:this.__close();return false}},__keyup:function(g){if(!g){return false}var f=g.charCode?g.charCode:g.keyCode;if(!g.shiftKey&&!g.ctrlKey&&g.altKey&&!g.metaKey){return true}switch(f){case 37:this.arrowed=false;this.pano.physics.set_properties({drag:this.pano.physics._.drag0}).autostop_xy();c(window).off(\"blur\",this.keycancel);c(window).off(\"keyup\",this.keyup);return false;case 39:this.arrowed=false;this.pano.physics.set_properties({drag:this.pano.physics._.drag0}).autostop_xy();c(window).off(\"blur\",this.keycancel);c(window).off(\"keyup\",this.keyup);return false}},__keycancel:function(f){if(this.arrowed){this.arrowed=false;this.pano.physics.set_properties({drag:this.pano.physics._.drag0,vx0:this.pano.physics._.vx,vx:0}).autostop_xy()}c(window).off(\"blur\",this.keycancel);c(window).off(\"keyup\",this.keyup)}};var b=function(f,e){if(!(this instanceof b)){return new b(f,e)}this.el=(typeof f===\"string\")?c(f).get(0):f;this.$el=c(f);if(this.$el.data(\"panoObject\")){return this.$el.data(\"panoObject\")}this.options=e;this.metadata=this.$el.data(\"plugin-options\");this.config=c.extend({physics:{post_tick:c.proxy(function(g){this.viewport_size();if(g._.px<=0){g.set_properties({px:0,vx:0.1*Math.abs(g._.vx)});if(this.lightbox){this.lightbox.keycancel()}}else{if(g._.px>=(this.display_width+(this.display_side_margins*2))-this.viewport_width){g.set_properties({px:(this.display_width+(this.display_side_margins*2))-this.viewport_width,vx:-0.1*Math.abs(g._.vx)});if(this.lightbox){this.lightbox.keycancel()}}}this.set_position(g._.px,g._.py,true)},this),slide_start:c.proxy(function(g){this.relay.disable_scrolling();this.scrubber_relay.disable_scrolling()},this),no_motion:c.proxy(function(g){g.stop_clock();this.relay.enable_scrolling();this.scrubber_relay.enable_scrolling();this.relay.sync_scroll(this.$viewport)},this)},autostart:true},this.options,this.metadata);this.__init(this.config);return this};b.prototype={__init:function(e){this.img_loaded=c.proxy(this.__img_loaded,this);this.img_ready=c.proxy(this.__img_ready,this);this.__create();c.extend(this.config,{start_position:c.proxy(this.set_start_position,this),end_position:c.proxy(this.set_end_position,this),update_position:c.proxy(this.set_position,this)});this.relay=new Tumblr.DragRelay(this.$dragger,this.config);this.physics=this.relay.physics;this.scrubber_relay=new Tumblr.DragRelay(this.$scrubber,c.extend({},this.config,{can_scroll:false,physics:false,start_position:c.proxy(this.set_inverted_start_position,this),update_position:c.proxy(this.set_inverted_position,this)}));this.__load_pano_image();b.register(this)},__create:function(){if(this.$el.is(\"a\")){this.$orig_a=this.$el;this.$orig_img=this.$el.children(\"img\")}else{this.$orig_img=this.$el}this.src=this.$orig_img.data(\"panoSrc\");this.href=this.$orig_img.data(\"panoHref\");this.width=this.$orig_img.data(\"panoWidth\");this.height=this.$orig_img.data(\"panoHeight\");this.position_height=Math.min(80,this.$orig_img.data(\"thumbHeight\"));this.position_width=this.$orig_img.data(\"thumbWidth\")*(this.position_height/this.$orig_img.data(\"thumbHeight\"));this.position_width=Math.min(500,this.position_width);this.$parent=c(\"body\");this.$container=c(\"<div/>\").attr(\"class\",\"pano_container loading\");this.$view_container=c(\"<div/>\").attr(\"class\",\"pano_view_container\").appendTo(this.$container);this.$viewport=c(\"<div/>\").attr(\"class\",\"pano_viewport\").appendTo(this.$view_container);this.$img_container=c(\"<div/>\").attr(\"class\",\"pano_img_container\").css({width:this.width,height:this.height,padding:\"0 \"+this.options.side_margins+\"px\"}).appendTo(this.$viewport);this.$img=c(\"<img/>\").attr({src:\"http://assets.tumblr.com/images/x.gif\",\"class\":\"pano_img\"}).css({width:this.width,height:this.height}).appendTo(this.$img_container);this.$loader_img=c(\"<img/>\").attr({\"class\":\"pano_loader_img\",src:this.$orig_img.attr(\"src\")}).css({width:this.width,height:this.height}).appendTo(this.$img_container);this.$position=c(\"<div/>\").attr(\"class\",\"pano_position\").css({width:this.position_width,height:this.position_height}).appendTo(this.$container);this.$thumb=c(\"<img/>\").attr(\"class\",\"pano_thumb\").attr(\"src\",this.$orig_img.attr(\"src\")).appendTo(this.$position);this.$shade_left=c(\"<div/>\").attr(\"class\",\"pano_shade left\").appendTo(this.$position);this.$shade_right=c(\"<div/>\").attr(\"class\",\"pano_shade right\").appendTo(this.$position);this.$scrubber=c(\"<div/>\").attr(\"class\",\"pano_scrubber grab\").appendTo(this.$position);this.$dragger=c(\"<div/>\").attr(\"class\",\"pano_dragger grab\").css({height:this.height}).appendTo(this.$container);this.$scroller=c(\"<div/>\").attr(\"class\",\"pano_scroller\").css({width:this.width,height:this.height,borderLeft:this.options.side_margins+\"px solid transparent\",borderRight:this.options.side_margins+\"px solid transparent\"}).appendTo(this.$dragger);this.$el.css(\"display\",\"none\").data(\"panoObject\",this).after(this.$container);this.__set_img_dimensions(this.width,this.height,this.options.side_margins);this.__enforce_max_height();return this},__destroy:function(){this.$img.off(\"load\",this.img_ready);this.$container.remove();delete this.$container;delete this.$view_container;delete this.$viewport;delete this.$img;delete this.$loader_img;delete this.$position;delete this.$thumb;delete this.$pos_frame;delete this.$dragger;this.$el.css(\"display\",\"\").data(\"panoObject\",\"\")},__load_pano_image:function(e){if(!e){e=this.src}this.img_poll=setInterval(this.img_ready,1000);this.$img.on(\"load\",this.img_loaded).attr(\"src\",e);this.__img_init()},__img_init:function(){this.relay.enable();this.scrubber_relay.enable();this.__scrubber_sizing();this.set_position(0,0)},__img_ready:function(e){if(!e){e=this.$img[0]}if(e&&e.src&&e.complete){this.__img_loaded()}},__img_loaded:function(f){this.__scrubber_sizing();this.$container.removeClass(\"loading\");clearInterval(this.img_poll)},__scrubber_sizing:function(){this.viewport_size();var e=100*this.viewport_width/(this.$img.width()+(this.options.side_margins*2));this.$scrubber.width(Math.min(e,100)+\"%\");if(Math.min(e,100)==100){this.$position.css(\"opacity\",\"0\")}else{this.$position.css(\"opacity\",\"1\")}},__draw_shades:function(){if(this.relay.touch){return}this.$shade_left.css(\"width\",Math.max(0,this.scrubber_x));this.$shade_right.css(\"width\",Math.max(0,this.position_width-this.scrubber_x-this.$scrubber.width()))},__set_img_dimensions:function(g,e,f){this.$img_container.css({width:g,height:e});this.$img.css({width:g,height:e});this.$loader_img.css({width:g,height:e});this.$dragger.css({height:e});this.$scroller.css({width:g,height:e});this.display_width=g;this.display_height=e;if(typeof f===\"number\"){this.$img_container.css({padding:\"0 \"+f+\"px\"});this.$scroller.css({borderLeft:f+\"px solid transparent\",borderRight:f+\"px solid transparent\"});this.display_side_margins=f}},__enforce_max_height:function(f){f=f||200;var g=c(window).height()-this.$position.outerHeight(true);g-=30;var e=Math.max(f,Math.min(this.height,g));var h=this.width*(e/this.height);this.__set_img_dimensions(h,e);this.$img_container.css(\"min-width\",c(window).width()-2*this.display_side_margins);this.__scrubber_sizing()},__center_vertically:function(e){this.$container.css(\"top\",(e/2)-(this.$container.height()/2))},set_start_position:function(e,f){this.$parent.addClass(\"grabbing\");this.start_x=this.$viewport.scrollLeft();this.start_y=this.$viewport.scrollTop()},set_inverted_start_position:function(e,f){this.$parent.addClass(\"grabbing\");this.start_x=this.$scrubber.position().left;this.start_y=this.$scrubber.position().top},set_end_position:function(e,f){this.$parent.removeClass(\"grabbing\");this.relay.sync_scroll(this.$viewport)},viewport_size:function(){this.viewport_width=this.$viewport.width();this.viewport_height=this.$viewport.height()},set_position:function(f,g,e){this.viewport_size();if(e){this.position_x=f;this.position_y=g}else{this.position_x=this.start_x-f;this.position_y=this.start_y-g}this.$viewport.scrollLeft(this.position_x);this.position_x=this.$viewport.scrollLeft();this.scrubber_x=this.$scrubber.width()*this.position_x/this.viewport_width;this.$scrubber.css(\"left\",parseInt(this.scrubber_x,10)+\"px\");this.__draw_shades()},set_inverted_position:function(f,g,e){this.viewport_size();if(e){this.scrubber_x=f}else{this.scrubber_x=this.start_x+f}this.scrubber_x=Math.max(0,Math.min(this.scrubber_x,(this.$position.width()-this.$scrubber.width())));this.position_x=this.$viewport.width()*this.scrubber_x/this.$scrubber.width();this.$scrubber.css(\"left\",parseInt(this.scrubber_x,10)+\"px\");this.__draw_shades();this.$viewport.scrollLeft(this.position_x)}};b.instances=[];b.register=function(e){this.instances.push(e)};b.unregister=function(e){this.instances.splice(this.instances.indexOf(e),1)};c.fn.panorama=function(e){e=e||{};var f=e.lightbox||false;return this.each(function(){if(f){new d(c.extend({},e,{pano:this}))}else{new b(this,e)}})};a.Panorama=b})(jQuery,this.Tumblr||(this.Tumblr={}));\n(function(c,b){var a=Tumblr.TagPopover.extend({events:{\"focus #search_query\":\"focus_search_query\",\"blur #search_query\":\"blur_search_query\",\"keyup #search_query\":\"keyup_search_query\",\"keydown #search_query\":\"keydown_search_query\",\"click #popover_search .popover_menu_item\":\"click_popover\",\"submit #search_form\":\"submit\",\"mouseenter #popover_search\":\"mouseenter\",\"mouseenter .popover_menu_item a\":\"mouseenter_search_type\",\"mouseleave #popover_search\":\"mouseleave_search_type\"},initialize:function(d){this.options=d||{};this.options.popover_selector=\"#popover_search\";this.log_session=Tumblr.Features(\"log_search_box\")(true);this.onboarding_search=this.options.onboarding||false;this.onboarding_search_endpoint=this.options.onboarding_search_endpoint||false;this.search_results_redesign=Tumblr.Features(\"search_results_redesign\")(true,false);Tumblr.TagPopover.prototype.initialize.apply(this,arguments);this.search_term=this.$search_query.val();if(this.options.promo){this.should_show_promo()}this.capturing=(Tumblr.Capture)?new Tumblr.Capture.SearchPopover():null;this.pressed_keys=[];this.is_new_search=Tumblr.Features(\"search_results_redesign\")(true,false);this.listenTo(Tumblr.Events,\"search:change:query\",this.change_query,this);this.listenTo(Tumblr.Events,\"search:submit\",this.force_submit,this)},should_show_promo:function(){if(Tumblr.Cookie.get(\"search_promo\")!=1){this.show_promo()}},show_promo:function(){if(!this.promo_popover){this.promo_popover=new Tumblr.Popover({el:c(\"#popover_search_promo\").parent(),popover:c(\"#popover_search_promo\"),disable_auto_show:true,on_show:function(){c(\"#glass_overlay\").addClass(\"blue\");c(\"#search_field\").addClass(\"showing_search_promo over_glass\")},on_hide:_.bind(this.hide_promo,this)})}this.promo_popover.show();this.promo_popover.popover.find(\".search_promo_button\").on(\"click\",_.bind(this.hide_promo,this));this.$search_query.on(\"focus.search_promo\",_.bind(this.hide_promo,this))},hide_promo:function(){this.promo_popover.hide();this.promo_popover.popover.remove();this.$search_query.off(\"focus.search_promo\");c(\"#glass_overlay\").removeClass(\"blue\");c(\"#search_field\").removeClass(\"showing_search_promo over_glass\");Tumblr.Cookie.set(\"search_promo\",1);this.popover.show();this.$search_query.focus()},click_popover:function(h){var g=this.$(h.currentTarget);var f=g.find(\"a\");var d=f.attr(\"href\");if(h.metaKey||h.altKey){window.open(d);h.stopPropagation();h.preventDefault()}this.popover.hide();if(this.search_results_redesign){this.change_query(f.data(\"tag-result\"));if(f.hasClass(\"search_typeahead\")){h.preventDefault();h.stopPropagation();this.force_submit();this.clicked_typeahead(f.data(\"tag-result\"),f)}}},clicked_typeahead:function(g,h){var d=h.closest(\".popover_menu_item\");var f=d.parent().children().index(d);var e=h.find(\".result_title u\").text();this.log_search_box(\"typeahead_click\",{position:f,query:g,characters:e})},log_search_box:function(d,e){if(this.log_session){Tumblr.Events.trigger(\"Capture:push\",\"search_box_usage\",d,e)}},setup_autocomplete:function(){if(this.onboarding_search){this.auto_complete=new Tumblr.OnboardingAutoCompleteSearch({el:this.$search_query,endpoint:this.onboarding_search_endpoint,popover:this.popover})}else{this.auto_complete=new Tumblr.AutoCompleteSearch({el:this.$search_query,store:\"/svc/search_popover\",popover:this.popover,include:Tumblr.EXISTING_TAGS,base_blog_search_url:this.options.base_blog_search_url||null,blog_search_label:this.options.blog_search_label||'More results for \"%1$s\"'})}},focus_search_query:function(){this.$search_field.addClass(\"active\");this.currentIndex=-1;this.set_search_type(this.search_type);if(this.$search_query.val()==this.$search_query.attr(\"placeholder\")){this.$search_query.val(\"\")}if(this.$search_query.val().length){this.auto_complete.lookup()}else{if(!this.has_children(this.$tracked_tags)&&!this.has_children(this.$autocomplete_results)){return}this.popover.show();this.$(\"#unread_tag_notice\").hide();this.$search_query.removeClass(\"with_unread\")}this.log_search_box(\"focus\")},blur_search_query:function(){var d=this.$search_query.val();if(d==this.auto_complete.init_value){this.set_search_type(this.search_type)}if(d===\"\"){this.set_search_type(\"tag\")}if(d){this.log_search_box(\"blur_with_typed\")}},keyup_search_query:function(d){this.pressed_keys[d.keyCode]=0;if(this.$search_query.val()!==this.auto_complete.init_value){this.set_search_type(\"tag\")}else{this.set_search_type(this.search_type)}if(!this.pressed_keys[16]){this.set_search_type(this.search_type)}},keydown_search_query:function(d){this.pressed_keys[d.keyCode]=1;if(this.pressed_keys[18]){this.set_search_type(\"blog\")}if(this.pressed_keys[18]&&d.keyCode==13){d.stopPropagation();d.preventDefault();this.do_blog_search()}},set_active:function(g){var d=c(this.popover_selector+\" .popover_menu_item a\").filter(\":visible\");var f=d.filter(\":focus\");if(f.length){this.currentIndex=(g===\"previous\")?d.index(f)-1:d.index(f)+1}if(this.currentIndex>=0&&this.currentIndex<d.length){d.eq(this.currentIndex).focus()}else{if(this.currentIndex==-2&&g===\"previous\"){d.eq(d.length-1).focus();this.currentIndex=d.length-1}else{this.currentIndex=-1;this.$search_query.focus()}}var e=(this.currentIndex>=0)?d.eq(this.currentIndex):false;if(e.length){if(e.closest(\".search_results_section\").hasClass(\"blog\")){this.set_search_type(\"blog\")}if(e.closest(\".search_results_section\").hasClass(\"tag\")){this.set_search_type(\"tag\")}}},set_search_type:function(d){if(this.is_new_search){return}this.search_type=d;if(d==\"blog\"){this.$search_form.removeClass(\"is_tag_search\").addClass(\"is_blog_search\")}if(d==\"tag\"){this.$search_form.addClass(\"is_tag_search\").removeClass(\"is_blog_search\")}},do_blog_search:function(){var d=c.trim(this.$search_query.val());document.location=\"/search/blogs?q=\"+d},mouseenter_search_type:function(e){var d=c(e.currentTarget);if(d.length&&d.closest(\".search_results_section\").hasClass(\"blog\")){this.set_search_type(\"blog\")}else{this.set_search_type(\"tag\")}},mouseleave_search_type:function(){this.set_search_type(\"tag\")},change_query:function(d){this.$search_query.val(d);return this},force_submit:function(){this.$(\"#search_form\").trigger(\"submit\")},submit:function(){if(c.trim(this.$search_query.val())===\"\"){window.location=\"/search\";return false}if(_.isFunction(this.auto_complete.abort)){this.auto_complete.abort()}this.popover.hide();this.$search_query.blur();this.$search_field.removeClass(\"active\");this.log_search_box(\"form_submit\");Tumblr.Events.trigger(\"Capture:push\",\"search_page_usage\",\"submit\")}});b.SearchPopover=a})(jQuery,Tumblr);\n(function(c,a){var b=Backbone.View.extend({events:{keyup:\"keyup\"},initialize:function(d){this.options=d||{};this.endpoint=this.options.endpoint||\"/svc/search_popover/\";this.threshold=this.options.threshold||1;this.cache_size=this.options.cache_size||15;this.init_value=this.$el.val();this.base_blog_search_url=this.options.base_blog_search_url||\"/search/blogs?q=\";this.blog_search_label=this.options.blog_search_label||'More blogs with \"%1$s\"';this.form_key=c(\"#tumblr_form_key\").attr(\"content\");this.search_results_redesign=Tumblr.Features(\"search_results_redesign\")(true,false);this.cache={};this.queries=[];this.popover=this.options.popover;this.search_loading_template=c(\"#search_loading_template\").html();this.search_results_template=c(\"#search_results_template\").html();this.search_results_item_blogs_template=c(\"#search_results_item_blogs\").html();this.search_results_item_tags_template=c(\"#search_results_item_tags\").html();this.$search_query=c(\"#search_query\");this.$search_results_container=c(\"#search_results_container\");this.$tracked_tags=c(\".tracked_tags.search_results_section\");this.tracked_tags_markup=c(\"<div>\").append(this.$tracked_tags.clone()).html()},keyup:_.throttle(function(d){this.lookup()},100),prepare_search_data:function(){this.queries.push(this.search_query);return{q:this.search_query_raw,form_key:this.form_key}},get_results:function(d){d=d||function(){};if(this.cache[this.search_query]){this.results=this.cache[this.search_query];d.call(this);return}this.search_in_progress=true;this.results={tags:[],blogs:[]};this.store_xhr=c.ajax({url:this.endpoint,data:this.prepare_search_data(),dataType:\"json\",type:\"GET\"});this.store_xhr.done(_.bind(function(e){this.results=e;this.add_to_cache(this.search_query,e)},this));this.store_xhr.fail(_.bind(function(f,e){if(e===\"abort\"){this.force_hide=true}},this));this.store_xhr.always(_.bind(function(e){this.search_in_progress=false;d.call(this)},this))},lookup:function(){var e=c.trim(this.$el.val());if(e[0]==\"#\"){e=e.substr(1)}var f=e.length;var d;if(f>=this.threshold&&e.length){this.search_query=_.escape(e);this.search_query_raw=e;this.force_hide=false;this.get_results(_.bind(function(){this.update()},this))}else{this.reset_popover()}this.init=false;this.init_value=\"\"},show_tracked_tags:function(){if(this.$tracked_tags.children().length>0){this.$tracked_tags.show()}else{this.popover.hide()}},hide_tracked_tags:function(){this.$tracked_tags.hide()},reset_popover:function(){if(this.tracked_tags_markup.length){this.$search_results_container.html(this.tracked_tags_markup)}else{this.popover.hide()}},add_to_cache:function(d,e){this.cache[d]=e;if(_.size(this.cache)>this.cache_size){delete this.cache[this.queries[0]];this.queries.shift()}},should_add_query_to_tags:function(d){var e=_.find(d,function(g){var i=g.tag.toLowerCase(),j=this.search_query.toLowerCase(),h=this.search_query_raw.toLowerCase();return(i==j||i==h)},this);if(!e){var f={tag:this.search_query,url:\"/tagged/\"+this.search_query,is_query:true};d.unshift(f)}return d},inject_search_substring:function(d,f){if(!this.search_query){return}var e=new RegExp(this._escapeRegExp(this.search_query),\"gi\"),g=this.decorate_search_substring;if(!e){return}_.each(d,function(j,h){if(f==\"tag\"&&!j.is_query){d[h].escaped_tag=d[h].escaped_tag||_.escape(j.tag);d[h].hilite_tag=d[h].hilite_tag||j.escaped_tag.replace(e,g)}if(f==\"blog\"){d[h].hilite_name=d[h].hilite_name||j.name.replace(e,g);d[h].hilite_title=d[h].hilite_title||j.title.replace(e,g);d[h].hilite_url=d[h].hilite_url||j.url.replace(e,g)}});return d},decorate_search_substring:function(d){return\"<u>\"+d+\"</u>\"},_escapeRegExp:function(d){return d.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|\\~\\`\\!\\@\\#]/g,\"\\\\$&\")},update:function(){if(!_.isObject(this.results)){return}var f=_.isArray(this.results.tags)?this.results.tags:[],j=_.isArray(this.results.blogs)?this.results.blogs:[],h=\"\",e=false,d=false,g=_.template(this.search_results_template),i;f=this.should_add_query_to_tags(f);f=this.inject_search_substring(f,\"tag\");j=this.inject_search_substring(j,\"blog\");if(_.size(f)){if(f.length>5){f=f.slice(0,5)}i={results:{type:\"tag\",items:f,query:this.search_query,item_template:this.search_results_item_tags_template,blog_search_url:this.base_blog_search_url,blog_search_label:this.blog_search_label}};h+=g(i)}if(_.size(j)||!this.search_results_redesign){g=_.template(this.search_results_template);i={results:{type:\"blog\",items:j,query:this.search_query,item_template:this.search_results_item_blogs_template,blog_search_url:this.base_blog_search_url,blog_search_label:this.blog_search_label}};h+=g(i)}if(h.length&&!this.force_hide){this.$search_results_container.empty().prop(\"innerHTML\",h);this.popover.show()}else{this.reset_popover()}},abort:function(){if(this.store_xhr){this.store_xhr.abort()}}});a.AutoCompleteSearch=b})(jQuery,Tumblr);\n(function(c,b){var a={};a.Base=Backbone.View.extend({el:\"body\",svc_url:\"/svc/log/capture\",initialize:function(){this.form_key=c(\"#tumblr_form_key\").attr(\"content\");this.$start_time=new Date().getTime();this.tracking_data={};c(window).on(\"beforeunload.capture\",_.bind(this.send_data,this))},_get_delta:function(){var d=new Date().getTime();return d-this.$start_time},enable_listeners:function(){this.listenTo(Tumblr.Events,\"Capture:set\",this._set,this);this.listenTo(Tumblr.Events,\"Capture:push\",this._push,this)},_set:function(e,d,f){if(!(e in this.tracking_data)){this.tracking_data[e]={}}this.tracking_data[e][d]=f},_push:function(e,d,f){f=f||{};if(_.isObject(f)){f.time=this._get_delta()}if(!(e in this.tracking_data)){this.tracking_data[e]={}}if(!(d in this.tracking_data[e])||!_.isArray(this.tracking_data[e][d])){this.tracking_data[e][d]=[]}this.tracking_data[e][d].push(f)},send_data:function(){if(typeof Tumblr.enable_capture_js===\"undefined\"||Tumblr.enable_capture_js===false){return}if(this.sending_data){return}if(_.size(this.tracking_data)<1){return}this.track_context();var d=c.ajax({url:this.svc_url,type:\"POST\",data:{log:this.tracking_data},with_form_key:true,async:false});this.sending_data=true},unique_cookie:function(){var d=Tumblr.Cookie.get(\"capture\")||this.form_key;if(d==this.form_key){Tumblr.Cookie.set(\"capture\",this.form_key)}return d},track_context:function(){this.tracking_data.context=this.tracking_data.context||{};this.tracking_data.context.id=this.unique_cookie();this.tracking_data.context.language=(window.navigator.userLanguage||window.navigator.language).toLowerCase();this.tracking_data.context.path=document.location.pathname}});a.Generic=a.Base.extend({initialize:function(){a.Base.prototype.initialize.call(this);this.enable_listeners()},_set_generic_data:function(){this.tracking_data._init=this.$start_time;this.tracking_data._elapsed=this._get_delta()},send_data:function(){if(_.size(this.tracking_data)<1){return}this._set_generic_data();a.Base.prototype.send_data.call(this)}});a.UserActions=a.Base.extend({el:\"body\",initialize:function(){a.Base.prototype.initialize.call(this);this.tracking_data.context={}},get_post_id:function(f,g){g=g||\".post\";var e=0,d=f.closest(g);if(d.length){e=d.data(\"post-id\")}return e},track_signup_buttons:function(e){var f=c(e.target),d=f.attr(\"id\").replace(\"signup_button_\",\"\");this.tracking_data.signup_button[d]=1;Tumblr.Eventbug.track({type:\"click\",target:\"signup_buttons\",args:[d,this.source_page]})},track_search:function(f){var d=c(f.target);var e=d.serialize();this.tracking_data.search=e;Tumblr.Eventbug.track({type:\"submit\",target:\"search\",args:[e,this.source_page]})},track_explore_tag:function(e){var d=c(e.target);this.tracking_data.explore=d.text();Tumblr.Eventbug.track({type:\"click\",target:\"explore_tag\",args:[d.text(),this.source_page]})},track_spotlight_blog:function(f){var d=c(f.target),e=d.find(\".tumblelog_name\").text();this.tracking_data.spotlight=e;Tumblr.Eventbug.track({type:\"click\",target:\"spotlight_blog\",args:[e,this.source_page]})},track_small_links:function(f){var e=c(f.target),d=e.attr(\"href\");if(d==\"/explore\"){this.tracking_data.explore_link=1}if(d==\"/spotlight\"){this.tracking_data.spotlight_link=1}Tumblr.Eventbug.track({type:\"click\",target:\"small_sidebar_links\",args:[d.replace(\"/\",\"\"),this.source_page]})},track_post_tags:function(g){var e=c(g.target),f=this.get_post_id(e),d={post_id:e.text()};this.tracking_data.post_tags.push(d);Tumblr.Eventbug.track({type:\"click\",target:\"post_tags\",args:[d,f,this.source_page]})},track_post_info:function(f){var g=c(f.target),d=this.get_post_id(g),e=g.text();this.tracking_data.post_info={post_id:e};Tumblr.Eventbug.track({type:\"click\",target:\"post_info\",args:[e,d,this.source_page]})},track_post_controls:function(g){var f=c(g.target),d=this.get_post_id(f),e;if(f.hasClass(\"reblog_button\")){e=\"reblog\"}if(f.hasClass(\"like_button\")){e=\"like\"}if(f.hasClass(\"reblog_count\")||f.closest(\".reblog_count\").length){e=\"notes\"}this.tracking_data.post_controls[d]=this.tracking_data.post_controls[d]||[];this.tracking_data.post_controls[d][e]=1;Tumblr.Eventbug.track({type:\"click\",target:\"post_controls\",args:[e,d,this.source_page]})},track_post_content:function(h){var f=c(h.target),d=f.closest(\".post\"),g=this.get_post_id(f),i=d.attr(\"data-type\")||\"unknown\",e=f[0].outerHTML.replace(/[\\n\\r]/g,\" \").replace(/\\>\\s+\\/</g,\"\");this.tracking_data.post_content[g]=this.tracking_data.post_content[g]||{};this.tracking_data.post_content[g].post_type=i;this.tracking_data.post_content[g].clicks=this.tracking_data.post_content[g].clicks||[];this.tracking_data.post_content[g].clicks.push(e);Tumblr.Eventbug.track({type:\"click\",target:\"post_content\",args:[g,i,e,this.source_page]})},track_j_k_keys:function(e){var d=e.keyCode;if((d==74||d==75)&&!c(\"body\").hasClass(\"show_form\")){this.tracking_data.keycommands=1;Tumblr.Eventbug.track({type:\"scroll\",target:\"j_k_next_prev\",args:[d,this.source_page]})}},track_auto_pager:function(d){this.page_number=this.page_number||1;this.tracking_data.auto_pager=this.page_number;Tumblr.Eventbug.track({type:\"scroll\",target:\"auto_pager\",args:[this.page_number,this.source_page]});this.page_number++},track_recommendations:function(h){var f=c(h.target);var e=f.closest(\".ht_post\").data(\"id\"),g=(f.hasClass(\"hello_tag\"))?\"tag\":\"thumbnail\",d=f.attr(\"href\");this.tracking_data.recommendations.push({post_id:e,type:g,url:d});Tumblr.Eventbug.track({type:\"click\",target:\"recommendation\",args:[e,g,d,this.source_page]})},track_related_tag:function(e){var d=c(e.target),f=false;if(!d.hasClass(\".tag\")){d=d.closest(\".tag\")}f=c.trim(d.text());if(f&&f.length){this.tracking_data.related_tags.push(f);Tumblr.Eventbug.track({type:\"click\",target:\"related_tag\",args:[f,this.source_page]})}},track_related_blog:function(f){var d=c(f.target),e=false;if(!d.hasClass(\".blog\")){d=d.closest(\".blog\")}e=d.data(\"tumblelog\");if(e&&e.length){this.tracking_data.related_blogs.push(e);Tumblr.Eventbug.track({type:\"click\",target:\"related_blog\",args:[e,this.source_page]})}},track_tag_source:function(){if(c(\"body\").hasClass(\"sassafras\")){this.tracking_data.tag_source=\"sassafras\"}else{this.tracking_data.tag_source=\"default\"}}});a.OnboardingDash=a.UserActions.extend({events:{\"submit #search_form\":\"track_search\",\"click .signup_buttons .chrome\":\"track_signup_buttons\",\"click .tracked_tag .tag\":\"track_explore_tag\",\"click #tag_editors .blog\":\"track_spotlight_blog\",\"click .post .tag\":\"track_post_tags\",\"click .post_info a\":\"track_post_info\",\"click .post_controls a\":\"track_post_controls\",\"click .post_content > *\":\"track_post_content\",\"click #right_column .small_links a\":\"track_small_links\",keydown:\"track_j_k_keys\"},initialize:function(){a.UserActions.prototype.initialize.call(this);this.svc_url=\"/svc/log/capture/logged_out_dashboard\";this.tracking_data.signup_button={};this.tracking_data.search=\"\";this.tracking_data.explore=\"\";this.tracking_data.explore_link=0;this.tracking_data.spotlight=\"\";this.tracking_data.spotlight_link=0;this.tracking_data.post_tags=[];this.tracking_data.post_info={};this.tracking_data.post_controls={};this.tracking_data.post_content={};this.tracking_data.keycommands=0;this.tracking_data.auto_pager=0;this.track_auto_pager();if(window.AfterAutoPaginationQueue){window.AfterAutoPaginationQueue.push(this.track_auto_pager.bind(this))}this.source_page=\"onboarding_dash\"}});a.OnboardingTags=a.OnboardingDash.extend({events:_.extend({\"click #related_tags .tag\":\"track_related_tag\"},a.OnboardingDash.prototype.events),initialize:function(){a.OnboardingDash.prototype.initialize.call(this);this.svc_url=\"/svc/log/capture/logged_out_tags\";this.tracking_data.related_tags=[];this.track_tag_source();this.source_page=\"onboarding_tags\"}});a.HelloDash=a.UserActions.extend({el:\"body\",events:{\"submit #search_form\":\"track_search\",\"click .signup_buttons .chrome\":\"track_signup_buttons\",\"click .ht_post .hello_tag\":\"track_post_tags\",\"click .ht_post .go\":\"track_go_lightbox\",keydown:\"track_j_k_keys\"},track_post_tags:function(g){var e=c(g.target),f=this.get_post_id(e,\".ht_post\"),d={};d[f]=e.text();this.tracking_data.post_tags.push(d);Tumblr.Eventbug.track({type:\"click\",target:\"post_tags\",args:[d,f,this.source_page]})},track_go_lightbox:function(f){var e=c(f.target);var d=this.get_post_id(e,\".ht_post\");this.tracking_data.go_lightbox.push(d);Tumblr.Eventbug.track({type:\"click\",target:\"lightbox_open\",args:[d,this.has_zoom_effect(),this.source_page]})},has_zoom_effect:function(){return(c('.ht_post[data-effect=\"grow\"]').length||c(\".ht_post\").data(\"grow\"))},track_post_zoom_effect:function(){if(this.has_zoom_effect){this.tracking_data.has_zoom=1}},initialize:function(){a.UserActions.prototype.initialize.call(this);this.svc_url=\"/svc/log/capture/hello_dash\";this.tracking_data.signup_button={};this.tracking_data.search=\"\";this.tracking_data.post_tags=[];this.tracking_data.go_lightbox=[];this.tracking_data.has_zoom=0;this.track_post_zoom_effect();this.source_page=\"hello_dash\"}});a.HelloLightbox=a.UserActions.extend({events:{\"click .post .tag\":\"track_post_tags\",\"click .post_info a\":\"track_post_info\",\"click .post_controls a\":\"track_post_controls\",\"click .post_content > *\":\"track_post_content\",\"click .recommendations a\":\"track_recommendations\",keydown:\"track_j_k_keys\"},initialize:function(){a.UserActions.prototype.initialize.call(this);this.svc_url=\"/svc/log/capture/hello_lightbox\";this.tracking_data.post_tags=[];this.tracking_data.post_info={};this.tracking_data.post_controls={};this.tracking_data.post_content={};this.tracking_data.keycommands=0;this.tracking_data.auto_pager=0;this.tracking_data.recommendations=[];this.track_auto_pager();if(window.AfterAutoPaginationQueue){window.AfterAutoPaginationQueue.push(this.track_auto_pager.bind(this))}this.source_page=\"hello_lightbox\"}});a.Radar=a.UserActions.extend({el:\"#tumblr_radar\",events:{\"click .radar_content a\":\"track_radar_content\",\"click .radar_controls a\":\"track_radar_controls\",\"click .radar_footer a\":\"track_radar_footer\"},initialize:function(){a.UserActions.prototype.initialize.call(this);this.svc_url=\"/svc/log/capture_radar\";this.tracking_data.radar_id={};this.tracking_data.radar_content=[];this.tracking_data.radar_controls={};this.tracking_data.radar_footer=0},send_data:function(){if(!this.tracking_data.radar_id.post_id){return}a.UserActions.prototype.send_data.call(this)},track_radar_id:function(){if(this.tracking_data.radar_id.post_id){return}this.tracking_data.radar_id={tumblelog:this.$el.data(\"tumblelog\"),post_id:this.$el.data(\"post-id\")}},track_follow:function(d){if(d.hasClass(\"followed\")){this.tracking_data.radar_controls.unfollow=1}if(!d.hasClass(\"followed\")){this.tracking_data.radar_controls.follow=1}},track_like:function(d){if(d.hasClass(\"liked\")){this.tracking_data.radar_controls.unlike=1}if(!d.hasClass(\"liked\")){this.tracking_data.radar_controls.like=1}},track_reblog:function(f,e){var d=(e.altKey)?2:1;this.tracking_data.radar_controls.reblog=d},track_radar_content:function(f){var e=c(f.target);e=(e.is(\"a\"))?e:e.closest(\"a\");var d=e.attr(\"href\");this.tracking_data.radar_content.push({clicked:d});this.track_radar_id()},track_radar_controls:function(g){var f=c(g.target);f=(f.is(\"a\"))?f:f.closest(\"a\");var h=(f.hasClass(\"follow\"))?\"follow\":((f.hasClass(\"reblog\"))?\"reblog\":\"like\");if(h==\"reblog\"){var d=this;var e=function(i){d.track_reblog(c(i.target),i);d.track_radar_id();c(\"body\").off(\"click.capturejs\")};c(\"body\").on(\"click.capturejs\",\"#create_post > button\",e)}else{this[\"track_\"+h](f,g);this.track_radar_id()}},track_radar_footer:function(d){this.tracking_data.radar_footer=1;this.track_radar_id()}});a.WebInStream=a.UserActions.extend({el:\".sponsored_post\",events:{\"click .post_controls .post_control\":\"track_sponsored_controls\",\"click .post_permalink\":\"track_sponsored_controls\",\"click .post_avatar a\":\"track_sponsored_controls\",\"click .post_info .post_info_fence\":\"track_sponsored_controls\",\"click .post_info .reblog_follow_button\":\"track_sponsored_controls\",\"click .sponsored_badge a\":\"track_sponsored_controls\",\"click .post_tags a.post_tag\":\"track_sponsored_controls\",\"click .post_content a\":\"track_sponsored_content\"},initialize:function(){if(this.initialized){return}a.UserActions.prototype.initialize.call(this);this.svc_url=\"/svc/log/capture_web_instream\";this.tracking_data.sponsored_id={};this.tracking_data.sponsored_controls={};this.tracking_data.sponsored_content=[];this.tracking_data.sponsored_tags=[];this.control_names={post_avatar_image:\"avatar\",post_tag:\"tag\",post_permalink:\"permalink\",reblog_follow_button:\"follow\",reblog:\"reblog\",like:\"like\",reblog_count:\"notes\",external:\"share_permalink\",ring:\"sponsored_badge\"};this.initialized=true},send_data:function(){if(!this.tracking_data.sponsored_id.post_id){return}a.UserActions.prototype.send_data.call(this)},track_sponsored_id:function(){if(this.tracking_data.sponsored_id.post_id){return}this.tracking_data.sponsored_id={tumblelog:this.$el.data(\"tumblelog-name\"),post_id:this.$el.data(\"post-id\"),placement_id:this.$el.data(\"placement-id\")}},track_follow:function(d){if(d.hasClass(\"followed\")){this.tracking_data.sponsored_controls.unfollow=1}if(!d.hasClass(\"followed\")){this.tracking_data.sponsored_controls.follow=1}},track_like:function(d){if(d.hasClass(\"liked\")){this.tracking_data.sponsored_controls.like=1}if(!d.hasClass(\"liked\")){this.tracking_data.sponsored_controls.unlike=1}},track_reblog:function(e,d){this.tracking_data.sponsored_controls.reblog=(d.altKey)?2:1},track_sponsored_content:function(e){var d=c(e.target);d=(d.is(\"a\"))?d:d.closest(\"a\");this.tracking_data.sponsored_content.push({clicked:d.attr(\"href\")});this.track_sponsored_id()},track_sponsored_controls:function(j){var h=(c(j.target).className)?c(j.target):c(j.currentTarget);var k=null;switch(true){case h.parent().hasClass(\"source_url\"):k=\"source_url\";break;case h.parent().hasClass(\"post_info\"):if(h.hasClass(\"reblog_follow_button\")){k=\"follow\"}else{k=\"header\"}break;case h.parent().is(\"li.share_email\"):k=\"share_email\";break;default:var f=h.attr(\"class\").split(\" \");for(var e=0;e<f.length;e++){if(f[e] in this.control_names){k=this.control_names[f[e]]}}break}if(!k){return}if(k==\"reblog\"){var d=this;var g=function(i){d.track_reblog(c(i.target),i);d.track_sponsored_id();d.send_data();c(\"body\").off(\"click.capturejs\")};c(\"body\").on(\"click.capturejs\",\"#create_post > button\",g)}else{if(this[\"track_\"+k]&&this[\"track_\"+k].call){this[\"track_\"+k](h,j);this.track_sponsored_id()}else{this.tracking_data.sponsored_controls[k]=1;this.track_sponsored_id()}}}});a.PremiumRadar=a.Radar.extend({el:\"#tumblr_radar.premium\",events:function(){return _.extend({},a.Radar.prototype.events,{\"click .sponsored_badge\":\"track_radar_badge\",\"mouseenter .radar_content a\":\"track_radar_hover\",\"mouseleave .radar_content a\":\"track_radar_hover\"})},initialize:function(){a.Radar.prototype.initialize.call(this);this.svc_url=\"/svc/log/capture_premium_radar\";_.bindAll(this,\"track_radar_loaded\");c(window).load(this.track_radar_loaded);this.track_radar_visibility();_.bindAll(this,\"track_radar_visibility\");c(window).scroll(this.track_radar_visibility)},track_radar_id:function(){if(this.tracking_data.radar_id.post_id){return}this.tracking_data.radar_id={tumblelog:this.$el.data(\"tumblelog\"),post_id:this.$el.data(\"post-id\"),placement_id:this.$el.data(\"placement-id\")}},get_radar_args:function(d){var f=[this.$el.data(\"tumblelog\"),this.$el.data(\"post-id\")];for(var e=0;e<arguments.length;e++){f.push(arguments[e])}return f},track_follow:function(d){a.Radar.prototype.track_follow.call(this,d);var e=(d.hasClass(\"followed\"))?1:0;Tumblr.Eventbug.track({type:\"click\",target:\"premium_radar_follow\",args:this.get_radar_args(e)})},track_like:function(e){a.Radar.prototype.track_like.call(this,e);var d=(e.hasClass(\"liked\"))?1:0;Tumblr.Eventbug.track({type:\"click\",target:\"premium_radar_like\",args:this.get_radar_args(d)})},track_reblog:function(f,e){a.Radar.prototype.track_reblog.call(this,f,e);var d=(e.altKey)?2:1;Tumblr.Eventbug.track({type:\"click\",target:\"premium_radar_reblog\",args:this.get_radar_args(d)})},track_radar_content:function(f){a.Radar.prototype.track_radar_content.call(this,f);var e=c(f.target);e=(e.is(\"a\"))?e:e.closest(\"a\");var d=e.attr(\"href\");Tumblr.Eventbug.track({type:\"click\",target:\"premium_radar_content\",args:this.get_radar_args(d)})},track_radar_hover:function(e){var d=(e.type==\"mouseenter\")?1:0;Tumblr.Eventbug.track({type:\"hover\",target:\"premium_radar_content\",args:this.get_radar_args(d)})},track_radar_loaded:function(e){var d=this;this.$el.find(\".radar_content a img\").each(function(g,f){if(f.complete&&!f.hidden){Tumblr.Eventbug.track({type:\"view\",target:\"premium_radar\",args:d.get_radar_args()})}})},track_radar_visibility:function(e){if(this.$el.length>0){var d=this.elInView(this.$el[0])?1:0;var f=this.is_radar_visible!=d;this.is_radar_visible=d;if(f){Tumblr.Eventbug.track({type:\"scroll\",target:\"premium_radar\",args:this.get_radar_args(d)})}}},elInView:function(f){var h=f.offsetTop;var g=f.offsetLeft;var e=f.offsetWidth;var d=f.offsetHeight;while(f.offsetParent){f=f.offsetParent;h+=f.offsetTop;g+=f.offsetLeft}return(h<(window.pageYOffset+window.innerHeight)&&g<(window.pageXOffset+window.innerWidth)&&(h+d)>window.pageYOffset&&(g+e)>window.pageXOffset)},track_radar_footer:function(d){a.Radar.prototype.track_radar_footer.call(this,d);Tumblr.Eventbug.track({type:\"click\",target:\"premium_radar_footer\",args:this.get_radar_args()})},track_radar_badge:function(d){this.tracking_data.radar_badge=1;this.track_radar_id();Tumblr.Eventbug.track({type:\"click\",target:\"premium_radar_badge\",args:this.get_radar_args()})}});a.SearchPopover=a.UserActions.extend({el:\"#header\",events:{\"mousedown .tracked_tags .result_link\":\"track_tracked_tag_click\",\"mousedown .tag .result_title\":\"track_tag_click\",\"mousedown .blog .result_link\":\"track_blog_click\",\"mousedown .blog .more_results_link\":\"track_blog_click\",\"keydown #popover_search\":\"keyup\"},initialize:function(){a.UserActions.prototype.initialize.call(this);this.svc_url=\"/svc/log/capture_search\";this.$search_field=this.$el.find(\"#search_query\");this.$search_popover=this.$el.find(\"#popover_search\");this.tracking_data.query=0;this.tracking_data.tag=0;this.tracking_data.blog=0;this.tracking_data.search_tag=0;this.tracking_data.search_blog=0;this.tracking_data.tracked_tag=0},send_data:function(){if(this.tracking_data.tracked_tag===0&&this.tracking_data.query===0){return}a.UserActions.prototype.send_data.call(this)},get_query_name:function(){return c.trim(this.$search_field.val())},get_tag_name:function(d){return c.trim(d.text()).replace(\"#\",\"\")},get_tumblelog_name:function(d){return(d)?d.attr(\"data-tumblelog-name\"):\"\"},track_query:function(d){this.tracking_data.query=((this.get_query_name().length)?1:0)},track_tag:function(d){if(d.closest(\".result.is_query\").length){this.tracking_data.search_tag++;Tumblr.Eventbug.track({type:\"click\",target:\"search_popover_search_tag\",args:[this.get_query_name()]})}else{this.tracking_data.tag++;Tumblr.Eventbug.track({type:\"click\",target:\"search_popover_popular_tag\",args:[this.get_query_name(),this.get_tag_name(d)]})}this.track_query()},track_blog:function(d){if(d.hasClass(\"more_results_link\")){this.tracking_data.search_blog++;Tumblr.Eventbug.track({type:\"click\",target:\"search_popover_search_blog\",args:[this.get_query_name()]})}else{this.tracking_data.blog++;Tumblr.Eventbug.track({type:\"click\",target:\"search_popover_popular_blog\",args:[this.get_query_name(),this.get_tumblelog_name(d)]})}this.track_query()},track_tag_click:function(e){var d=c(e.currentTarget);this.track_tag(d)},track_tracked_tag_click:function(e){var d=c(e.currentTarget);this.track_tracked_tag(d)},track_tracked_tag:function(d){this.tracking_data.tracked_tag++;this.track_query();Tumblr.Eventbug.track({type:\"click\",target:\"search_popover_tracked_tag\",args:[this.get_query_name(),this.get_tag_name(d)]})},track_blog_click:function(e){var d=c(e.currentTarget);this.track_blog(d)},track_submit:function(d){this.track_query();Tumblr.Eventbug.track({type:\"click\",target:\"search_popover_submit\",args:[this.get_query_name()]})},keyup:function(e){if(e.keyCode==13){var d=c(document.activeElement);if(d.closest(\".tag\").length){this.track_tag(d)}if(d.closest(\".tracked_tags\").length){this.track_tracked_tag(d)}if(d.closest(\".blog\").length){this.track_blog(d)}}}});a.CrushClick=a.UserActions.extend({el:\"#crushes\",events:{\"mousedown .crush\":\"track_crush_click\"},initialize:function(){a.UserActions.prototype.initialize.call(this);this.svc_url=\"/svc/log/capture_crush\";this.tracking_data.crush_clicks=[]},track_crush_click:function(e){var d=c(e.currentTarget);this.tracking_data.crush_clicks.push({click_time:Math.round(Date.now()/1000),tumblelog_name:d.data(\"tumblelog-name\"),position:d.attr(\"id\").split(\"_\")[1],love:d.data(\"love\")})}});b.Capture=a;c(function(d){Tumblr.CaptureGeneric=new Tumblr.Capture.Generic()})})(jQuery,Tumblr);\n(function(c,a){var b=Backbone.View.extend({initialize:function(d){this.div=document.createElement(\"div\");this.isScrollEnabled=false;this.transform=(this.check_support(\"transform\")||this.check_support(\"webkitTransform\")||this.check_support(\"MozTransform\")||this.check_support(\"msTransform\")||this.check_support(\"OTransform\"));this.div=null;if(!this.transform){return}this.rings=c();Tumblr.AutoPaginator.on(\"after\",c.proxy(this.on_autopaginator_after,this));this.check_for_rings()},check_support:function(d){if(d in this.div.style){return d}return false},check_for_rings:function(){this.rings=this.rings.add(\".sponsored_badge_icon .ring\");if(!this.isScrollEnabled&&this.rings.length>0){this.isScrollEnabled=true;Tumblr.Events.on(\"DOMEventor:flatscroll\",this.on_window_scroll,this)}},on_autopaginator_after:function(){this.check_for_rings()},on_window_scroll:function(g){var d=g.windowScrollTop;for(var f=0,e=this.rings.length;f<e;f++){this.rings[f].style[this.transform]=\"rotate(\"+d+\"deg)\"}}});c(function(){a.SponsoredPosts=new b()})})(jQuery,Tumblr);\n(function(f){function e(a,i){if({}.hasOwnProperty.call(e.cache,a)){return e.cache[a]}var h=e.resolve(a);if(!h){throw new Error(\"Failed to resolve module \"+a)}var j={id:a,require:e,filename:a,exports:{},loaded:!1,parent:i,children:[]};i&&i.children.push(j);var g=a.slice(0,a.lastIndexOf(\"/\")+1);return e.cache[a]=j.exports,h.call(j.exports,j,j.exports,g,a),j.loaded=!0,e.cache[a]=j.exports}e.modules={},e.cache={},e.resolve=function(a){return{}.hasOwnProperty.call(e.modules,a)?e.modules[a]:void 0},e.define=function(a,g){e.modules[a]=g};var d=function(b){return b=\"/\",{title:\"browser\",version:\"v0.10.5\",browser:!0,env:{},argv:[],nextTick:f.setImmediate||function(c){setTimeout(c,0)},cwd:function(){return b},chdir:function(a){b=a}}}();e.define(\"/gif.coffee\",function(t,a,l,m){function s(g,c){return{}.hasOwnProperty.call(g,c)}function o(i,g){for(var h=0,j=g.length;h<j;++h){if(h in g&&g[h]===i){return !0}}return !1}function n(g,c){function h(){this.constructor=g}for(var i in c){s(c,i)&&(g[i]=c[i])}return h.prototype=c.prototype,g.prototype=new h,g.__super__=c.prototype,g}var q,r,p;r=e(\"events\",t).EventEmitter,q=e(\"/browser.coffee\",t),p=function(h,c,i){function g(j){var b,k;this.running=!1,this.options={},this.frames=[],this.freeWorkers=[],this.activeWorkers=[],this.setOptions(j);for(b in c){k=c[b],null!=this.options[b]?this.options[b]:this.options[b]=k}}return n(g,h),c={workerScript:\"gif.worker.js\",workers:2,repeat:0,background:\"#fff\",quality:10,width:null,height:null},i={delay:500,copy:!1},g.prototype.setOption=function(k,j){return this.options[k]=j,null!=this._canvas&&(k===\"width\"||k===\"height\")?this._canvas[k]=j:void 0},g.prototype.setOptions=function(b){return function(u){var j,k;for(j in b){if(!s(b,j)){continue}k=b[j],u.push(this.setOption(j,k))}return u}.call(this,[])},g.prototype.addFrame=function(j,v){var k,u;null==v&&(v={}),k={};for(u in i){k[u]=v[u]||i[u]}if(\"undefined\"!==typeof CanvasRenderingContext2D&&null!=CanvasRenderingContext2D&&j instanceof CanvasRenderingContext2D||\"undefined\"!==typeof WebGLRenderingContext&&null!=WebGLRenderingContext&&j instanceof WebGLRenderingContext){v.copy?k.data=this.getContextData(j):k.context=j}else{if(null!=j.childNodes){null!=this.options.width||this.setOption(\"width\",j.width),null!=this.options.height||this.setOption(\"height\",j.height),v.copy?k.data=this.getImageData(j):k.image=j}else{throw new Error(\"Invalid image\")}}return this.frames.push(k),null!=k.width&&this.setOption(\"width\",k.width),null!=k.height?this.setOption(\"height\",k.height):void 0},g.prototype.render=function(){var u,k;if(this.running){throw new Error(\"Already running\")}this.running=!0,this.nextFrame=0,this.finishedFrames=0,this.imageParts=function(w){var y;for(var x=0,z=function(){var A,A;A=[];for(var B=0;0<=this.frames.length?B<this.frames.length:B>this.frames.length;0<=this.frames.length?++B:--B){A.push(B)}return A}.apply(this,arguments).length;x<z;++x){y=function(){var A,A;A=[];for(var B=0;0<=this.frames.length?B<this.frames.length:B>this.frames.length;0<=this.frames.length?++B:--B){A.push(B)}return A}.apply(this,arguments)[x],w.push(null)}return w}.call(this,[]),k=this.spawnWorkers();for(var j=0,v=function(){var x,x;x=[];for(var w=0;0<=k?w<k:w>k;0<=k?++w:--w){x.push(w)}return x}.apply(this,arguments).length;j<v;++j){u=function(){var x,x;x=[];for(var w=0;0<=k?w<k:w>k;0<=k?++w:--w){x.push(w)}return x}.apply(this,arguments)[j],this.renderNextFrame()}return this.emit(\"start\"),this.emit(\"progress\",0)},g.prototype.abort=function(){var b;while(!0){if(b=this.activeWorkers.shift(),!(null!=b)){break}console.log(\"killing active worker\"),b.terminate()}return this.running=!1,this.emit(\"abort\")},g.prototype.spawnWorkers=function(){var u,k,j;k=Math.min(this.options.workers,this.frames.length);for(var w=0,v=function(){var y,y;y=[];for(var x=this.freeWorkers.length;this.freeWorkers.length<=k?x<k:x>k;this.freeWorkers.length<=k?++x:--x){y.push(x)}return y}.apply(this,arguments).length;w<v;++w){u=function(){var y,y;y=[];for(var x=this.freeWorkers.length;this.freeWorkers.length<=k?x<k:x>k;this.freeWorkers.length<=k?++x:--x){y.push(x)}return y}.apply(this,arguments)[w],(j=this,function(x){var b,y;return console.log(\"spawning worker \"+x),y=new Worker(j.options.workerScript),b=j,y.onmessage=function(z){return b.activeWorkers.splice(b.activeWorkers.indexOf(y),1),b.freeWorkers.push(y),b.frameFinished(z.data)},j.freeWorkers.push(y)})()}return k},g.prototype.frameFinished=function(b){return console.log(\"frame \"+b.index+\" finished - \"+this.activeWorkers.length+\" active\"),this.finishedFrames++,this.emit(\"progress\",this.finishedFrames/this.frames.length),this.imageParts[b.index]=b,o(null,this.imageParts)?this.renderNextFrame():this.finishRendering()},g.prototype.finishRendering=function(){var C,G,w,u,F,D,z;F=0;for(var B=0,x=this.imageParts.length;B<x;++B){G=this.imageParts[B],F+=(G.data.length-1)*G.pageSize+G.cursor}F+=G.pageSize-G.cursor,console.log(\"rendering finished - filesize \"+Math.round(F/1000)+\"kb\"),C=new Uint8Array(F),D=0;for(var A=0,v=this.imageParts.length;A<v;++A){G=this.imageParts[A];for(var E=0,y=G.data.length;E<y;++E){z=G.data[E],w=E,C.set(z,D),w===G.data.length-1?D+=G.cursor:D+=G.pageSize}}return u=new Blob([C],{type:\"image/gif\"}),this.emit(\"finished\",u,C)},g.prototype.renderNextFrame=function(){var u,k,j;if(this.freeWorkers.length===0){throw new Error(\"No free workers\")}return this.nextFrame>=this.frames.length?void 0:(u=this.frames[this.nextFrame++],j=this.freeWorkers.shift(),k=this.getTask(u),console.log(\"starting frame \"+(k.index+1)+\" of \"+this.frames.length),this.activeWorkers.push(j),j.postMessage(k))},g.prototype.getContextData=function(b){return b.getImageData(0,0,this.options.width,this.options.height).data},g.prototype.getImageData=function(j){var k;return null!=this._canvas||(this._canvas=document.createElement(\"canvas\"),this._canvas.width=this.options.width,this._canvas.height=this.options.height),k=this._canvas.getContext(\"2d\"),k.setFill=this.options.background,k.fillRect(0,0,this.options.width,this.options.height),k.drawImage(j,0,0),this.getContextData(k)},g.prototype.getTask=function(k){var u,j;if(u=this.frames.indexOf(k),j={index:u,last:u===this.frames.length-1,delay:k.delay,width:this.options.width,height:this.options.height,quality:this.options.quality,repeat:this.options.repeat,canTransfer:q.name===\"chrome\"},null!=k.data){j.data=k.data}else{if(null!=k.context){j.data=this.getContextData(k.context)}else{if(null!=k.image){j.data=this.getImageData(k.image)}else{throw new Error(\"Invalid frame\")}}}return j},g}(r),t.exports=p}),e.define(\"/browser.coffee\",function(m,l,k,j){var r,o,n,p,q;p=navigator.userAgent.toLowerCase(),n=navigator.platform.toLowerCase(),q=p.match(/(opera|ie|firefox|chrome|version)[\\s\\/:]([\\w\\d\\.]+)?.*?(safari|version[\\s\\/:]([\\w\\d\\.]+)|$)/)||[null,\"unknown\",0],o=q[1]===\"ie\"&&document.documentMode,r={name:q[1]===\"version\"?q[3]:q[1],version:o||parseFloat(q[1]===\"opera\"&&q[4]?q[4]:q[2]),platform:{name:p.match(/ip(?:ad|od|hone)/)?\"ios\":(p.match(/(?:webos|android)/)||n.match(/mac|win|linux/)||[\"other\"])[0]}},r[r.name]=!0,r[r.name+parseInt(r.version,10)]=!0,r.platform[r.platform.name]=!0,m.exports=r}),e.define(\"events\",function(k,l,j,i){d.EventEmitter||(d.EventEmitter=function(){});var b=l.EventEmitter=d.EventEmitter,n=typeof Array.isArray===\"function\"?Array.isArray:function(c){return Object.prototype.toString.call(c)===\"[object Array]\"},m=10;b.prototype.setMaxListeners=function(c){this._events||(this._events={}),this._events.maxListeners=c},b.prototype.emit=function(p){if(p===\"error\"&&(!(this._events&&this._events.error)||n(this._events.error)&&!this._events.error.length)){throw arguments[1] instanceof Error?arguments[1]:new Error(\"Uncaught, unspecified 'error' event.\")}if(!this._events){return !1}var h=this._events[p];if(!h){return !1}if(!(typeof h==\"function\")){if(n(h)){var c=Array.prototype.slice.call(arguments,1),q=h.slice();for(var r=0,o=q.length;r<o;r++){q[r].apply(this,c)}return !0}else{return !1}}switch(arguments.length){case 1:h.call(this);break;case 2:h.call(this,arguments[1]);break;case 3:h.call(this,arguments[1],arguments[2]);break;default:var c=Array.prototype.slice.call(arguments,1);h.apply(this,c)}return !0},b.prototype.addListener=function(g,c){if(\"function\"!==typeof c){throw new Error(\"addListener only takes instances of Function\")}if(this._events||(this._events={}),this.emit(\"newListener\",g,c),!this._events[g]){this._events[g]=c}else{if(n(this._events[g])){if(!this._events[g].warned){var h;this._events.maxListeners!==undefined?h=this._events.maxListeners:h=m,h&&h>0&&this._events[g].length>h&&(this._events[g].warned=!0,console.error(\"(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.\",this._events[g].length),console.trace())}this._events[g].push(c)}else{this._events[g]=[this._events[g],c]}}return this},b.prototype.on=b.prototype.addListener,b.prototype.once=function(g,p){var h=this;return h.on(g,function o(){h.removeListener(g,o),p.apply(this,arguments)}),this},b.prototype.removeListener=function(g,o){if(\"function\"!==typeof o){throw new Error(\"removeListener only takes instances of Function\")}if(!(this._events&&this._events[g])){return this}var c=this._events[g];if(n(c)){var h=c.indexOf(o);if(h<0){return this}c.splice(h,1),c.length==0&&delete this._events[g]}else{this._events[g]===o&&delete this._events[g]}return this},b.prototype.removeAllListeners=function(c){return c&&this._events&&this._events[c]&&(this._events[c]=null),this},b.prototype.listeners=function(c){return this._events||(this._events={}),this._events[c]||(this._events[c]=[]),n(this._events[c])||(this._events[c]=[this._events[c]]),this._events[c]}}),f.GIF=e(\"/gif.coffee\")}.call(this,this));\n(function(c,a){var b=function(){var g=(function(){var j={click:[\"explore_tag\",\"lightbox_open\",\"post_content\",\"post_controls\",\"post_info\",\"post_tags\",\"premium_radar_badge\",\"premium_radar_content\",\"premium_radar_follow\",\"premium_radar_footer\",\"premium_radar_like\",\"premium_radar_reblog\",\"recommendation\",\"related_blog\",\"related_tag\",\"search_popover_popular_blog\",\"search_popover_popular_tag\",\"search_popover_search_blog\",\"search_popover_search_tag\",\"search_popover_submit\",\"search_popover_tracked_tag\",\"signup_buttons\",\"small_sidebar_links\",\"spotlight_blog\"],hover:[\"premium_radar_content\"],keyboard:[],navigate:[],scroll:[\"auto_pager\",\"j_k_next_prev\",\"premium_radar\"],submit:[\"search\"],view:[\"premium_radar\"],error:[\"window_onerror\",\"exception\"]};function i(k){var o={};for(var l in k){o[l]={};for(var m=0;m<k[l].length;m++){var n=k[l][m];if(typeof ENVIRONMENT!==\"undefined\"&&ENVIRONMENT==\"development\"){if(typeof o[l][n]!==\"undefined\"){console.error(\"Event \"+l+\".\"+n+\" is duplicated!\")}}o[l][n]=true}}return o}return i(j)})();var h=\"www.tumblr.com/evixu\";var d=[];var e=0;function f(){for(var k=0;k<d.length;k++){var l=c.param(d[k]);var j=new Image(1,1);j.src=document.location.protocol+\"//\"+h+\"?\"+l}d.length=0}setInterval(f,5000);c(window).on(\"beforeunload\",f);return{track:function(i){setTimeout(function(){if(typeof Tumblr.enable_eventbug===\"undefined\"||Tumblr.enable_eventbug===false){return}if(typeof g[i.type]===\"undefined\"||typeof g[i.type][i.target]===\"undefined\"){throw\"Event \"+i.type+\".\"+i.target+\" is not a valid event type!\"}var k={ev:i.type,tg:i.target,v:i.version||\"default\",seq:e+=1,ts:Math.floor(new Date().getTime()/1000),url:encodeURIComponent(document.location.href)};if(i.args instanceof Array){for(var j=0;j<i.args.length;j++){k[\"a\"+j]=i.args[j]}}d.push(k);f()},0)}}};a.Eventbug=a.Eventbug||b()})(jQuery,Tumblr);\n/*!\n * hoverIntent r7 // 2013.03.11 // jQuery 1.9.1+\n * http://cherne.net/brian/resources/jquery.hoverIntent.html\n *\n * You may use hoverIntent under the terms of the MIT license. Basically that\n * means you are free to use hoverIntent as long as this header is left intact.\n * Copyright 2007, 2013 Brian Cherne\n */\n(function(a){a.fn.hoverIntent=function(m,d,h){var j={interval:100,sensitivity:7,timeout:0};if(typeof m===\"object\"){j=a.extend(j,m)}else{if(a.isFunction(d)){j=a.extend(j,{over:m,out:d,selector:h})}else{j=a.extend(j,{over:m,out:m,selector:d})}}var l,k,g,f;var e=function(n){l=n.pageX;k=n.pageY};var c=function(o,n){n.hoverIntent_t=clearTimeout(n.hoverIntent_t);if((Math.abs(g-l)+Math.abs(f-k))<j.sensitivity){a(n).off(\"mousemove.hoverIntent\",e);n.hoverIntent_s=1;return j.over.apply(n,[o])}else{g=l;f=k;n.hoverIntent_t=setTimeout(function(){c(o,n)},j.interval)}};var i=function(o,n){n.hoverIntent_t=clearTimeout(n.hoverIntent_t);n.hoverIntent_s=0;return j.out.apply(n,[o])};var b=function(p){var o=jQuery.extend({},p);var n=this;if(n.hoverIntent_t){n.hoverIntent_t=clearTimeout(n.hoverIntent_t)}if(p.type==\"mouseenter\"){g=o.pageX;f=o.pageY;a(n).on(\"mousemove.hoverIntent\",e);if(n.hoverIntent_s!=1){n.hoverIntent_t=setTimeout(function(){c(o,n)},j.interval)}}else{a(n).off(\"mousemove.hoverIntent\",e);if(n.hoverIntent_s==1){n.hoverIntent_t=setTimeout(function(){i(o,n)},j.timeout)}}};return this.on({\"mouseenter.hoverIntent\":b,\"mouseleave.hoverIntent\":b},j.selector)}})(jQuery);\n(function(m,f,l,d){var e=\"name\";var g=new l.Collection();var i=/^[a-z0-9-_]{2,}$/i;var j=d.Features(\"is_admin\");function h(v,s,w){var u=f.Deferred();var p={data:{tumblelog:v.get(\"name\")}};if(w.placement_id){p.data.placement_id=w.placement_id}if(w.source){p.data.source=w.source}var r=function(){if(!w.wait){v.set({following:s.following},w)}};var q=function(x,y){if(!w.wait){v.set({following:!s.following},w)}u.reject(y)};var t=function(){if(w.wait){v.set({following:s.following},w)}u.resolve()};var o=(s.following?\"/svc/follow\":\"/svc/unfollow\");f.ajax({beforeSend:r,cache:!w.force,data:p,error:q,type:\"POST\",success:t,url:o,with_form_key:true});return u.promise()}function c(v,r){var p=f.Deferred();var t={is_tumblelog_popover:r.is_tumblelog_popover};var q=function(w,x){p.reject(x)};var u=function(w){v.set({highlighted_posts:w});p.resolve()};var o=Tumblr.Features(\"enable_new_highlighted_posts\")(true,false);var s=(o?\"/svc/\"+v.get(\"name\")+\"/posts/highlighted\":\"/svc/highlighted_posts/\"+v.get(\"name\"));f.ajax({cache:!r.force,data:t,error:q,type:\"GET\",success:u,url:s,with_form_key:true});return p.promise()}var b=l.Model.extend({save_following:function(p,o){o||(o={});p||(p={});p.following=!!p.following;var q=this;if(!o.force&&q.get(\"following\")===p.following){return f.when(q.get(\"following\"))}else{return h(q,p,o).then(m.bindKey(q,\"save_following\",p))}},fetch_highlighted_posts:function(o){o||(o={});o.is_tumblelog_popover=!!o.is_tumblelog_popover||false;var p=this;if(!o.force&&p.has(\"highlighted_posts\")){return f.when(p.get(\"highlighted_posts\"))}else{return c(p,o).then(m.bindKey(p,\"fetch_highlighted_posts\",undefined))}},save_spam:j(function a(){return function(p,o){}},function n(){return function(){return f.Deferred().reject()}}),save_nsfw:j(function k(){return function(){}},function n(){return function(){return f.Deferred().reject()}}),defaults:{},idAttribute:e,constructor:function(o,q){var r=o&&o[e];if(!(typeof r===\"number\"||typeof r===\"string\")||!(r=r+\"\")||!(i.test(r))){throw'Invalid Tumblelog \"'+e+'\".'}var p=g.get(r);if(p){if(m.keys(o).length>1){p.set(o,q)}return p}else{g.add((p=this));p.constructor.__super__.constructor.apply(p,arguments)}},initialize:function(){},parse:function(o){return o},validate:function(){return false},destroy:function(){return this},fetch:function(){return this},save:function(){return this},url:function(){},urlRoot:function(){}},m.extend({instances:function(){return g.slice()},collection:g},l.Events));(d.Models||(d.Models={})).Tumblelog=b})(_,jQuery,Backbone,this.Tumblr||(this.Tumblr={}));\n(function(b,d,e,a){if(!a.Models||!a.Models.Tumblelog){throw\"Tumblr.Models.Tumblelog is missing.\"}var c=e.Collection.extend({url:\"/svc/top/blogs\",model:a.Models.Tumblelog,initialize:function(){},parse:function(f){return(f&&b.isArray(f.blogs))?f.blogs:[]}});(a.Collections||(a.Collections={})).TopContentBlogs=c})(_,jQuery,Backbone,this.Tumblr||(this.Tumblr={}));\n(function(g,d){var c=500;var a=\"badkey\";var i;var o;var k;var j=[];function f(){g.ajax({type:\"POST\",url:\"/svc/secure_form_key\",withoutFormKeyTransport:true,with_form_key:true,beforeSend:function(){i=true},complete:function(p){i=false;k=p.getResponseHeader(\"X-tumblr-secure-form-key\");h()}})}function m(){g.each(j,function(p,q){q.complete(c,a,{},\"\")});j.length=0}function h(){if(i===true||!j.length){return}if(i===void 0){return f()}e()}function e(){var p=j[0];var q=p.originalOptions;q.beforeSend&&(q.beforeSend=null);q.complete&&(q.complete=null);q.error&&(q.error=null);q.success&&(q.success=null);q.headers||(q.headers={});q.headers[\"X-tumblr-puppies\"]=k;q.withoutFormKeyTransport=true;i=true;p.ajax=g.ajax(q).always(function(r){r.getResponseHeader||(r=arguments[2]);if(r.readyState===0||r.readyState===1){}else{k=r.getResponseHeader(\"X-tumblr-kittens\")}var s={};r.responseJSON&&(s.json=r.responseJSON);r.responseText&&(s.text=r.responseText);r.responseXML&&(s.xml=r.responseXML);p.complete(r.status,r.statusText,s,r.getAllResponseHeaders());j.splice(g.inArray(j,p),1);i=false;h()})}function b(){var p=/^\\/svc\\/(post\\/update|upload)\\/?$/;g.ajaxTransport(\"+*\",function(q,u,t){if(q.type!==\"POST\"||!p.test(q.url)){return}if(q.withoutFormKeyTransport){return}var r;var s={options:q,originalOptions:u,jqXHR:t,ajax:null,complete:null};j.push(s);return{send:function(w,v){s.complete=v;if(u.beforeSend){r=setTimeout(h,0)}else{h()}},abort:function(){r&&clearTimeout(r);s.ajax&&s.ajax.abort()}}})}function n(){o||(o=g(\"#tumblr_form_key\").attr(\"content\"));var p=(function(q){var r=Object.prototype.toString;return function(t){var s=(typeof t===\"undefined\")?\"[object Object]\":r.call(t);return q[s]||q[\"*\"]}})({\"[object String]\":function(){},\"[object Object]\":function(q,r){q.data=g.param(g.extend({},r.data,{form_key:o}))},\"[object FormData]\":function(q){q.data.append(\"form_key\",o)},\"*\":function(){}});g.ajaxPrefilter(function(q,r){if(!r.with_form_key){return}p(r.data)(q,r)})}var l=(function(){var p;return d.Features(\"secure_form_key\")(function r(){return function(){p||(p=true,n(),b())}},function q(){return function(){p||(p=true,n())}})})();(d.Lib||(d.Lib={})).AJAXWithFormKey=l})(jQuery,this.Tumblr||(this.Tumblr={}));\n(function(c,b){var a=Backbone.View.extend({el:\".binary_switcher\",className:\"binary_switch\",defaults:{additionalClassNames:\"\"},initialize:function(d){this.options=d||{};this.options=_.extend(this.defaults,this.options||{})},render:function(){_.each(this.$el.not(\"[data-binary-switch-init]\"),_.bind(function(e){var d=c(e);d.attr(\"data-binary-switch-init\",true);d.wrap(c(\"<label>\").addClass(this.className).addClass(this.options.additionalClassNames));d.after(c(\"<span>\",{\"class\":this.className+\"_button\"}));d.after(c(\"<span>\",{\"class\":this.className+\"_track\"}))},this));return this}});b.BinarySwitch=a})(jQuery,Tumblr);\n(function(e,b,a){var d={};var c=function(i){var h=e(i),j={left:0,right:0,top:0,bottom:0};if(h.length){j=h.offset();j.right=j.left+h.width();j.bottom=j.top+h.height()}return j};var g=Backbone.View.extend({events:{\"click .follow\":\"on_follow_click\",\"click .unfollow\":\"on_follow_click\",\"click .tumblelog_menu_btn\":\"on_menu_click\",\"click .ask\":\"on_ask_click\",\"click .fan_mail\":\"on_fan_mail_click\",\"click .ignore\":\"on_ignore_click\",\"click .toggle_spam\":\"on_spam_click\",\"click .toggle_nsfw\":\"on_nsfw_click\"},initialize:function(h){this.options=h||{};this.template=b.template(this.options.template||e(\"#tumblelog_popover_info\").html());this.on_close=this.options.on_close||e.noop;this.on_menu_toggle=this.options.on_menu_toggle||e.noop;this.min_load_time=this.options.min_load_time||500;this.current_data=this.options.current_data||null;this.hide_posts_on_unfollow=(this.options.hide_posts_on_unfollow!==false)?true:false;this.is_user_mention=this.options.is_user_mention||false;this.is_mobile=!!(\"ontouchstart\" in document.documentElement);this.is_disabled=false;this.is_menu_open=false;this.xhr=null;this.$recent_posts=this.$el.find(\".recent_posts\");this.$menu=this.$el.find(\".tumblelog_menu\");this.model=new a.Models.Tumblelog({name:this.options.tumblelog});this.listenTo(this.model,\"add\",this.render);this.listenTo(this.model,\"change\",this.render);this.listenTo(this.model,\"change:highlighted_posts\",this.on_posts_change);if(this.current_data&&!b.isEmpty(this.current_data)){var j=this.model.toJSON();for(var i in j){this.current_data[i]=j[i]}this.model.set(this.current_data,{silent:true});this.render();if(this.current_data.highlighted_posts&&b.isArray(this.current_data.highlighted_posts)){this.render_posts(true)}else{this.model.fetch_highlighted_posts({is_tumblelog_popover:true})}}else{this.fetch_popover_data()}},render:function(){this.$el.find(\".tumblelog_info\").html(this.template(this.model.toJSON()));this.update_cache();return this},render_posts:function(q){var k=this.model.toJSON();if(!b.isArray(k.highlighted_posts)){return}var r=k.highlighted_posts,p=r.join(\"\"),o=e(p).find(\"img\"),n=0;if(r.length<2){setTimeout(e.proxy(function(){this.$el.addClass(\"is_empty\");this.$recent_posts.html(\"\")},this),this.min_load_time);return}this.$recent_posts.addClass(\"has_\"+r.length+\"_posts\");if(q){this.$recent_posts.addClass(\"is_cached\").html(p);return}if(o.length<1){setTimeout(e.proxy(function(){this.$recent_posts.addClass(\"is_loaded\").html(p)},this),this.min_load_time);return}for(var m=0,h=o.length;m<h;m++){var j=new Image();e(j).load(e.proxy(function(){n++;if(n===o.length){setTimeout(e.proxy(function(){this.$recent_posts.addClass(\"is_loaded\").html(p)},this),this.min_load_time);e(j).unbind()}},this));j.src=o[m].src}},close:function(h){h=h||true;if(h){this.on_close()}if(this.xhr){this.xhr.abort();this.xhr=null}e(document).off(\".tumblelog_popover_menu\");this.$el.off();this.remove()},fetch_popover_data:function(){var k=this.model;var h=e.Deferred();var i=function(l,m){h.reject(m)};var j=function(l){k.set(l);h.resolve()};e.ajax({cache:true,data:{is_user_mention:this.is_user_mention},error:i,type:\"GET\",success:j,url:\"/svc/tumblelog_popover/\"+k.get(\"name\"),with_form_key:true})},update_cache:function(){var h=this.model.toJSON(),i=this.model.get(\"name\");d[i]={timestamp:new Date().getTime(),data:JSON.stringify(h)}},open_dialog:function(h,i){i=i||e.noop;this.is_disabled=true;h.fail(e.proxy(function(){this.is_disabled=this.is_menu_open},this));h.done(e.proxy(function(){this.is_disabled=this.is_menu_open;i()},this))},hide_posts:function(){a.Posts.whereBy({tumblelog:this.model.get(\"name\"),sponsored:false}).invoke(\"dismiss\");this.close()},show_menu:function(){this.is_menu_open=true;this.is_disabled=true;this.$el.addClass(\"admin_menu_open\")},hide_menu:function(){this.is_menu_open=false;this.is_disabled=false;this.$el.removeClass(\"admin_menu_open\")},on_posts_change:function(h){this.update_cache();this.render_posts()},on_follow_click:function(h){h.preventDefault();h.stopPropagation();if(e(h.currentTarget).hasClass(\"unfollow\")){var i=a.TumblelogActions.confirm_unfollow({tumblelog:this.model.get(\"name\"),avatar_url:this.model.get(\"avatar_url\")||\"\"});this.open_dialog(i,e.proxy(function(){this.model.save_following({following:false,},{source:\"FOLLOW_SOURCE_TUMBLELOG_POPOVER\"});if(this.hide_posts_on_unfollow){this.hide_posts()}},this))}else{this.model.save_following({following:true},{source:\"FOLLOW_SOURCE_TUMBLELOG_POPOVER\"})}},on_menu_click:function(h){h.preventDefault();if(!this.is_menu_open){this.show_menu();e(document).on(\"mouseup.tumblelog_popover_menu\",e.proxy(this.on_menu_mouseup,this))}},on_menu_mouseup:function(j){var h=c(this.$el.find(\".tumblelog_menu_popover\"));var k=!(h.left<=j.pageX&&j.pageX<=h.right),i=!(h.top<=j.pageY&&j.pageY<=h.bottom);if(k||i){e(document).off(\".tumblelog_popover_menu\");this.hide_menu()}},on_ask_click:function(h){this.close()},on_fan_mail_click:function(i){if(b.isObject(a.FanMail)){var h={href:a.FanMail.make_url_from_tumblelog(this.model.get(\"name\"))};i.preventDefault();a.FanMail.show(h);this.close()}},on_ignore_click:function(h){h.preventDefault();var i=a.TumblelogActions.confirm_ignore({tumblelog:this.model.get(\"name\"),avatar_url:this.model.get(\"avatar_url\")||\"\"});this.open_dialog(i,e.proxy(function(){a.ignore({tumblelog:this.model.get(\"name\")},{success:e.proxy(function(){this.model.set(\"ignoring\",true);this.hide_posts()},this)})},this))},on_spam_click:function(h){h.preventDefault();e.ajax({url:\"/spam/toggle\",type:\"POST\",data:{tumblelog:this.model.get(\"name\")},with_form_key:true,success:e.proxy(function(i){this.model.set(\"spam\",(i.spammer)?true:false)},this)})},on_nsfw_click:function(h){h.preventDefault();e.ajax({url:\"/nsfw/toggle\",type:\"POST\",data:{tumblelog:this.model.get(\"name\")},with_form_key:true,success:e.proxy(function(i){this.model.set(\"nsfw\",i.nsfw)},this)})}});var f=Backbone.View.extend({el:\"body\",initialize:function(k){this.options=k||{};this.popover_template=e.trim(this.options.template||e(\"#tumblelog_popover_template\").html());this.cache_timeout=this.options.cache_timeout||3600000;this.mention_hostname=this.options.mention_hostname||\"tmblr.co\";this.hide_posts_on_unfollow=(this.options.hide_posts_on_unfollow!==false)?true:false;this.$popover=null;this.popover=null;this.popover_info=null;this.current_target=null;this.current_data=null;this.current_tumblelog=\"\";this.current_mouse_x=0;this.hide_timeout=null;this.queued_event=null;this.hover_bounds={};this.is_open=false;this.is_user_mention=false;this.is_mobile=!!(\"ontouchstart\" in document.documentElement);var m=e(\"body\");var h=e(this.options.selector||this.el);if(this.is_mobile){var n=h.find(\"a[data-tumblelog-popover]\");n.addClass(\"no_pop\");n.on(\"touchend\",e.proxy(this.on_touch_open,this))}else{var i=String(window.location.host).replace(/^(https?:\\/\\/)?(www\\.)?/,\"\"),j=\"a[data-tumblelog-popover], a[href^='http://www.'], a[href^='https://www.'], .popover a, .link_text a, .photo_info a, .notification_target, .no_popover\";h.hoverIntent({selector:\"a[data-tumblelog-popover], a[href*='.\"+i+\"']:not(\"+j+\"), a[href*='\"+this.mention_hostname+\"']\",over:e.proxy(this.on_mouseover,this),out:e.noop})}if(window.sessionStorage){try{this.sync_storage()}catch(l){}}},sync_storage:function(){var k=sessionStorage.getItem(\"tumblelog_popover\");if(k){var j=e.parseJSON(k),h=new Date().getTime();for(var i in j){if(h-j[i].timestamp>this.cache_timeout||!b.has(j[i],\"data\")){delete j[i]}}d=j}e(window).on(\"beforeunload\",e.proxy(function(){var p=b.size(d),l=50;if(p>l){var o=0;for(var m in d){o++;if(o<=p-l){delete d[m]}}}try{sessionStorage.setItem(\"tumblelog_popover\",JSON.stringify(d))}catch(n){}},this))},show:function(){var h=e(this.current_target),i=(d)?d[this.current_tumblelog]:null;if(i&&i.data){var j=b.isObject(i.data)?i.data:e.parseJSON(i.data);if(b.size(j)>1){this.current_data=b.isObject(i.data)?i.data:e.parseJSON(i.data)}}this.$popover=e(b.template(this.popover_template,this.current_data||{}));this.$popover.appendTo(this.$el).hide();this.popover=new a.Popover({button:h,popover:this.$popover,skip_glass:true}).show();this.popover_info=new g({el:this.$popover,tumblelog:this.current_tumblelog,current_data:this.current_data,on_close:e.proxy(this.animate_out,this),hide_posts_on_unfollow:this.hide_posts_on_unfollow,is_user_mention:this.is_user_mention});this.position();this.animate_in();this.is_open=true;this.bind_events()},hide:function(){if(this.$popover){this.$popover.off();this.$popover.remove();this.$popover=null}if(this.popover){this.popover.hide();this.popover=null}if(this.popover_info){this.popover_info.close(false);this.popover_info=null}this.current_data={};this.current_tumblelog=\"\";this.is_open=false;this.is_user_mention=false;if(this.queued_event){this.on_mouseover(this.queued_event);this.queued_event=null}},animate_in:function(){if(this.hide_timeout){clearTimeout(this.hide_timeout);this.hide_timeout=null}if(this.$popover){this.$popover.removeClass(\"is_closed\").addClass(\"is_open\")}},animate_out:function(){if(this.hide_timeout){clearTimeout(this.hide_timeout);this.hide_timeout=null}if(this.$popover){this.$popover.removeClass(\"is_open\").addClass(\"is_closed\")}this.unbind_events();this.hide_timeout=setTimeout(e.proxy(this.hide,this),300)},position:function(){if(!this.$popover||!this.current_target){return}this.$popover.show();var o=e(window),j=e(this.current_target),l=this.$popover.outerHeight();var i={top:o.scrollTop(),left:o.scrollLeft()};i.right=i.left+o.width();i.bottom=i.top+o.height();var n=j.offset().top,m=j.offset().left+(j.width()*0.5);j.css(\"white-space\",\"nowrap\");if(j.offset().top>n){m=this.current_mouse_x}j.css(\"white-space\",\"\");this.$popover.removeClass(\"down nipple_on_top left\");this.$popover.addClass(\"up nipple_on_bottom\");this.$popover.css({left:m,top:j.offset().top-l});var k=c(this.$popover),h=c(j);if(k.top<i.top+20){this.$popover.removeClass(\"up nipple_on_bottom\");this.$popover.addClass(\"down nipple_on_top\");this.$popover.css(\"top\",h.bottom);k=c(this.$popover)}if(k.right>i.right-20){this.$popover.addClass(\"left\");k=c(this.$popover)}this.hover_bounds.left=Math.min(k.left,h.left);this.hover_bounds.top=Math.min(k.top,h.top);this.hover_bounds.right=Math.max(k.right,h.right);this.hover_bounds.bottom=Math.max(k.bottom,h.bottom)},bind_events:function(){if(this.is_mobile){e(document).on(\"touchstart.tumblelog_popover\",e.proxy(this.on_touch_close,this))}else{e(document).on(\"mousemove.tumblelog_popover\",b.throttle(e.proxy(this.on_mousemove,this),50))}},unbind_events:function(){e(document).off(\".tumblelog_popover\")},on_mouseover:function(n){var j=e(n.currentTarget);var i=j.attr(\"href\");var m=!!(j.attr(\"data-tumblelog-popover\"));var p=!!(j.text().replace(/\\s+/g,\" \").length>1);this.current_mouse_x=n.clientX;if(!m&&!p){return}if(this.is_open){if(this.current_target!==n.currentTarget){this.queued_event=n;this.animate_out()}return}if(m){this.current_data=e.parseJSON(j.attr(\"data-tumblelog-popover\"));this.current_tumblelog=this.current_data.name.toString()}else{if(j[0].hostname&&j[0].hostname===this.mention_hostname){var h=(i.substr(-1)===\"/\")?i.substr(0,i.length-1):i;var o=h.split(\"/\");this.is_user_mention=true;this.current_tumblelog=o[o.length-1]}else{if(p){var h=i.replace(/.*?:\\/\\//g,\"\");var o=h.split(\"/\");if(o.length>1&&o[1].length&&o[1]!==\"post\"){return}var l=i.match(/([^\\/\\.]+\\/\\/)([^\\/\\.]+)(\\..*)/i);var k=l&&l[2];if(k){this.current_tumblelog=k.toLowerCase()}}}}if(this.current_tumblelog){this.current_target=n.currentTarget;this.show()}},on_mousemove:function(i){if((this.popover_info&&this.popover_info.is_disabled)||!this.hover_bounds||b.isEmpty(this.hover_bounds)){return}var j=!(this.hover_bounds.left<=i.pageX&&i.pageX<=this.hover_bounds.right),h=!(this.hover_bounds.top<=i.pageY&&i.pageY<=this.hover_bounds.bottom);if(j||h){this.animate_out()}},on_touch_open:function(h){h.preventDefault();h.stopPropagation();(this.is_open)?this.animate_out():this.on_mouseover(h)},on_touch_close:function(h){this.on_mousemove(h.originalEvent)}});a.TumblelogPopover=f})(jQuery,_,Tumblr);\n"}
],
[
{"endColumn":411,"endLine":1,"scriptId":"89","startColumn":0,"startLine":0,"url":"http://assets.tumblr.com/assets/scripts/fast_dashboard.js?_v=a5e388a3a364a5d385309bd023e08c92"},{"scriptSource":"(function(p,e,d){function q(){}function m(t){var s=Array.prototype.slice;var r=s.call(arguments,1);return function(){return t.apply(this,r.concat(s.call(arguments)))}}function o(r){return(r!==null&&r!==undefined)?((\"length\" in r)?r:[r]):[]}function i(r){if(r&&typeof r.then===\"function\"){return r}else{if(typeof r===\"function\"){return function(){return i(r.apply(this,arguments))}}else{return e.Deferred()[r===false?\"reject\":\"resolve\"](r).promise()}}}function f(r,s){return p.compact(p.map(o(s),function(t){return n(r,t)}))}function n(r,t){var s;return(s=t.parentNode)?((s!==r)?n(r,s):t):false}var a=(function(){var u=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==\";function t(w){return(w.nodeName===\"IMG\")?[w]:p.toArray(w.getElementsByTagName(\"img\"))}function s(w){var x=w.src;if(x&&x!==u){w.src=u;return{img:w,src:x}}}function r(w){return(w.img.src=w.src,w.img)}return function v(w){var x=p.chain(o(w)).map(t).flatten().map(s).compact().value();return(x.length)?m(p.map,x,r):q}})();var h=(function(){function t(v){var u=p.toArray(v.querySelectorAll(\"[data-background-image]\"));v.getAttribute(\"data-background-image\")&&u.push(v);return u}function s(v){var u=v.getAttribute(\"data-background-image\");if(u){v.style.backgroundImage=\"url(\"+u+\")\";v.removeAttribute(\"data-background-image\");return v}}return function r(u){return p.chain(o(u)).map(t).flatten().map(s).compact().value()}})();function j(u,s){var t=s.options.onBeforeAttach;var r=s.options.onAfterAttach;return p.map(u,function(w){var x=e.data(w);if(x.exclude){return w}if(!x.reattach){return w}t.call(s,w,x).then(function v(){x.reattach();x.reattach=null;r.call(s,w,x)})})}function c(t,r){var s=r.options.onViewable;p.each(t,function(u){var v=e.data(u);if(v.exclude){return}if(v.promise&&v.promise.state&&v.promise.state()===\"pending\"){return u}s.call(r,u,v,h)})}function b(v,s){var u=s.options.styles;var r=s.options.onBeforeDetach;var t=s.options.onAfterDetach;return p.chain(v).map(function(x){var y=e.data(x);if(y.exclude){return x}if(y.promise&&y.promise.state&&y.promise.state()===\"pending\"){return x}(y.promise=r.call(s,x,y)).then(function z(A){y.reattach=l(x,u,(A===\"hide\"));y.promise=null;t.call(s,x,y)},function w(){y.promise=null});return x}).tap(function(){v=null}).value()}function l(w,y,v){var u=p.toArray(w.children);var r=(function(){var z=p.pick(w.style,p.keys(y));p.extend(w.style,y,{height:e(w).height()+\"px\",width:e(w).width()+\"px\"});return function(){p.extend(w.style,z,{height:\"\",width:\"\"})}})();var t=p.map(u,v?function(A){var z=A.style.display;A.style.display=\"none\";return function(){A.style.display=z;return A}}:function(z){w.removeChild(z);return function(){w.appendChild(z);return z}});var x=a(u);u=null;y=null;return function s(){x();r();p.each(t,function(z){z()})}}function k(C){var D=-(C.windowHeight*this.options.PAGES_ABOVE);var y=C.windowHeight+(C.windowHeight*this.options.PAGES_BELOW);var s=this.container.children;var t=[];var w=(C.windowScrollY/C.documentHeight);(w>=0)||(w=0);(w<=1)||(w=1);var z=Math.floor(s.length*w);var v;var r;var A;v=z;while((v>=0)&&(r=s[v--])&&(A=r.getBoundingClientRect())&&(D<A.bottom)){if(r.nodeType!==1){continue}if(A.top<y){t.push(r)}}v=z+1;while((r=s[v++])&&(A=r.getBoundingClientRect())&&(A.top<y)){if(r.nodeType!==1){continue}if(D<A.bottom){t.push(r)}}var B=p.difference(this.attached,t);if(B.length){b(B,this)}var x=p.intersection(t,this.detached);if(x.length){j(x,this)}var u=p.difference(t,this.attached);if(u.length){c(u,this)}this.detached=p.without.apply(null,[this.detached].concat(x)).concat(B);this.attached=t}function g(s){var r=e(s.container).get(0);if(!r){throw\"GhostList: Bad container form.\"}if(s.eventor){s.eventor.on(\"DOMEventor:flatscroll\",p.bind(k,this))}else{throw\"GhostList depends on DOMEventor:flatscroll.\"}this.container=r;this.attached=[];this.detached=[];this.options={styles:s.styles||{},onBeforeDetach:i(s.onBeforeDetach||q),onAfterDetach:s.onAfterDetach||q,onBeforeAttach:i(s.onBeforeAttach||q),onAfterAttach:s.onAfterAttach||q,onViewable:s.onViewable||q,PAGES_ABOVE:(s.pages&&s.pages[0]!==undefined)?s.pages[0]:1,PAGES_BELOW:(s.pages&&s.pages[1]!==undefined)?s.pages[1]:1};if(p.isFunction(s.initialize)){s.initialize.call(this)}}g.prototype={exclude:function(r){return p.map(f(this.container,r),function(s){return(e.data(s,\"exclude\",true),s)})},unexclude:function(r){return p.map(f(this.container,r),function(s){return(e.data(s,\"exclude\",false),s)})},clean:function(){},remove:function(){},relayout:function(){}};d.GhostList=g})(_,jQuery,Tumblr);\n(function(b,c,a){c(function(){a.dashboardGL=new Tumblr.GhostList({container:\"#posts\",pages:[1,2],eventor:Tumblr.Events,styles:{backgroundColor:\"#ffffff\",borderRadius:\"6px\"},initialize:function(){this.exclude(this.container.querySelector(\"#new_post_buttons\"))},onBeforeDetach:function(d,e){return\"hide\"},onAfterDetach:function(){},onBeforeAttach:function(){},onAfterAttach:function(d,e){}})})})(_,jQuery,Tumblr);"}
],
[
{"endColumn":4,"endLine":118,"scriptId":"90","startColumn":35,"startLine":105,"url":"http://www.tumblr.com/dashboard"},{"scriptSource":"\n        tumblr_custom_tracking_url  = '/dashboard';\n        var _gaq = _gaq || [];\n        _gaq.push(['_setAccount', 'UA-97144-8']);\n        _gaq.push(['_setAllowLinker', true]);\n        _gaq.push(['_setDomainName', 'tumblr.com']);\n                    _gaq.push(['_trackPageview', '/dashboard']);\n                \n        (function() {\n            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;\n            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';\n            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);\n        })();\n    "}
],
[
{"endColumn":0,"endLine":225,"scriptId":"91","startColumn":8,"startLine":223,"url":"http://www.tumblr.com/dashboard"},{"scriptSource":"\n    Tumblr.EXISTING_TAGS = [];\n"}
],
[
{"endColumn":0,"endLine":748,"scriptId":"92","startColumn":31,"startLine":742,"url":"http://www.tumblr.com/dashboard"},{"scriptSource":"\n    jQuery(document).ready(function($) {\n        if (Tumblr && Tumblr.Capture) {\n                            Tumblr.CaptureRadar = new Tumblr.Capture.Radar();\n                    }\n    });\n"}
],
[
{"endColumn":506,"endLine":750,"scriptId":"93","startColumn":31,"startLine":750,"url":"http://www.tumblr.com/dashboard"},{"scriptSource":"!function(s){s.src='http://www.tumblr.com/impixu?T=1384691237&J=eyJ0eXBlIjoicG9zdCIsInVybCI6Imh0dHA6XC9cL3d3dy50dW1ibHIuY29tXC9kYXNoYm9hcmQiLCJyZXF0eXBlIjowLCJyb3V0ZSI6IlwvZGFzaGJvYXJkIiwicG9zdHMiOlt7InBvc3RpZCI6IjU5NDc5NjQwMjk0IiwiYmxvZ2lkIjoiODIyNzExNDciLCJzb3VyY2UiOjM5fV19&U=EOIEADPJGL&K=16ca9d59685950ee259d0aab1753fe6a1dac707af775d0d0a9d12a4bb77f7f3f&R='.replace(/&R=[^&$]*/,'').concat('&R='+escape(document.referrer)).slice(0,2000).replace(/%.?.?$/,'');}(new Image());"}
],
[
{"endColumn":0,"endLine":64,"scriptId":"94","startColumn":0,"startLine":0,"url":"http://www.google-analytics.com/ga.js"},{"scriptSource":"(function(){var aa=encodeURIComponent,ba=Infinity,ca=setTimeout,da=isNaN,m=Math,ea=decodeURIComponent;function ha(a,b){return a.name=b}\nvar n=\"push\",ia=\"test\",ja=\"slice\",p=\"replace\",ka=\"load\",la=\"floor\",ma=\"charAt\",na=\"value\",q=\"indexOf\",oa=\"match\",pa=\"port\",qa=\"createElement\",ra=\"path\",r=\"name\",g=\"getTime\",u=\"host\",v=\"toString\",w=\"length\",x=\"prototype\",sa=\"clientWidth\",y=\"split\",ta=\"stopPropagation\",ua=\"scope\",z=\"location\",va=\"search\",A=\"protocol\",wa=\"clientHeight\",xa=\"href\",B=\"substring\",ya=\"apply\",za=\"navigator\",C=\"join\",D=\"toLowerCase\",E;function Aa(a,b){switch(b){case 0:return\"\"+a;case 1:return 1*a;case 2:return!!a;case 3:return 1E3*a}return a}function Ba(a){return\"function\"==typeof a}function Ca(a){return void 0!=a&&-1<(a.constructor+\"\")[q](\"String\")}function F(a,b){return void 0==a||\"-\"==a&&!b||\"\"==a}function Da(a){if(!a||\"\"==a)return\"\";for(;a&&-1<\" \\n\\r\\t\"[q](a[ma](0));)a=a[B](1);for(;a&&-1<\" \\n\\r\\t\"[q](a[ma](a[w]-1));)a=a[B](0,a[w]-1);return a}function Ea(){return m.round(2147483647*m.random())}function Fa(){}\nfunction G(a,b){if(aa instanceof Function)return b?encodeURI(a):aa(a);H(68);return escape(a)}function I(a){a=a[y](\"+\")[C](\" \");if(ea instanceof Function)try{return ea(a)}catch(b){H(17)}else H(68);return unescape(a)}var Ga=function(a,b,c,d){a.addEventListener?a.addEventListener(b,c,!!d):a.attachEvent&&a.attachEvent(\"on\"+b,c)},Ha=function(a,b,c,d){a.removeEventListener?a.removeEventListener(b,c,!!d):a.detachEvent&&a.detachEvent(\"on\"+b,c)};\nfunction Ia(a,b){if(a){var c=J[qa](\"script\");c.type=\"text/javascript\";c.async=!0;c.src=a;c.id=b;var d=J.getElementsByTagName(\"script\")[0];d.parentNode.insertBefore(c,d);return c}}function K(a){return a&&0<a[w]?a[0]:\"\"}function L(a){var b=a?a[w]:0;return 0<b?a[b-1]:\"\"}var Ja=function(){this.prefix=\"ga.\";this.R={}};Ja[x].set=function(a,b){this.R[this.prefix+a]=b};Ja[x].get=function(a){return this.R[this.prefix+a]};Ja[x].contains=function(a){return void 0!==this.get(a)};function Ka(a){0==a[q](\"www.\")&&(a=a[B](4));return a[D]()}function La(a,b){var c,d={url:a,protocol:\"http\",host:\"\",path:\"\",d:new Ja,anchor:\"\"};if(!a)return d;c=a[q](\"://\");0<=c&&(d.protocol=a[B](0,c),a=a[B](c+3));c=a[va](\"/|\\\\?|#\");if(0<=c)d.host=a[B](0,c)[D](),a=a[B](c);else return d.host=a[D](),d;c=a[q](\"#\");0<=c&&(d.anchor=a[B](c+1),a=a[B](0,c));c=a[q](\"?\");0<=c&&(Na(d.d,a[B](c+1)),a=a[B](0,c));d.anchor&&b&&Na(d.d,d.anchor);a&&\"/\"==a[ma](0)&&(a=a[B](1));d.path=a;return d}\nfunction Oa(a,b){function c(a){var b=(a.hostname||\"\")[y](\":\")[0][D](),c=(a[A]||\"\")[D](),c=1*a[pa]||(\"http:\"==c?80:\"https:\"==c?443:\"\");a=a.pathname||\"\";0==a[q](\"/\")||(a=\"/\"+a);return[b,\"\"+c,a]}var d=b||J[qa](\"a\");d.href=J[z][xa];var e=(d[A]||\"\")[D](),f=c(d),Be=d[va]||\"\",k=e+\"//\"+f[0]+(f[1]?\":\"+f[1]:\"\");0==a[q](\"//\")?a=e+a:0==a[q](\"/\")?a=k+a:a&&0!=a[q](\"?\")?0>a[y](\"/\")[0][q](\":\")&&(a=k+f[2][B](0,f[2].lastIndexOf(\"/\"))+\"/\"+a):a=k+f[2]+(a||Be);d.href=a;e=c(d);return{protocol:(d[A]||\"\")[D](),host:e[0],\nport:e[1],path:e[2],Oa:d[va]||\"\",url:a||\"\"}}function Na(a,b){function c(b,c){a.contains(b)||a.set(b,[]);a.get(b)[n](c)}for(var d=Da(b)[y](\"&\"),e=0;e<d[w];e++)if(d[e]){var f=d[e][q](\"=\");0>f?c(d[e],\"1\"):c(d[e][B](0,f),d[e][B](f+1))}}function Pa(a,b){if(F(a)||\"[\"==a[ma](0)&&\"]\"==a[ma](a[w]-1))return\"-\";var c=J.domain;return a[q](c+(b&&\"/\"!=b?b:\"\"))==(0==a[q](\"http://\")?7:0==a[q](\"https://\")?8:0)?\"0\":a};var Qa=0;function Ra(a,b,c){1<=Qa||1<=100*m.random()||(a=[\"utmt=error\",\"utmerr=\"+a,\"utmwv=5.4.5\",\"utmn=\"+Ea(),\"utmsp=1\"],b&&a[n](\"api=\"+b),c&&a[n](\"msg=\"+G(c[B](0,100))),M.w&&a[n](\"aip=1\"),Sa(a[C](\"&\")),Qa++)};var Ta=0,Ua={};function N(a){return Va(\"x\"+Ta++,a)}function Va(a,b){Ua[a]=!!b;return a}\nvar Wa=N(),Xa=Va(\"anonymizeIp\"),Ya=N(),$a=N(),ab=N(),bb=N(),O=N(),P=N(),cb=N(),db=N(),eb=N(),fb=N(),gb=N(),hb=N(),ib=N(),jb=N(),kb=N(),lb=N(),nb=N(),ob=N(),pb=N(),qb=N(),rb=N(),sb=N(),tb=N(),ub=N(),vb=N(),wb=N(),xb=N(),yb=N(),zb=N(),Ab=N(),Bb=N(),Cb=N(),Db=N(),Eb=N(),Fb=N(!0),Gb=Va(\"currencyCode\"),Hb=Va(\"page\"),Ib=Va(\"title\"),Jb=N(),Kb=N(),Lb=N(),Mb=N(),Nb=N(),Ob=N(),Pb=N(),Qb=N(),Rb=N(),Q=N(!0),Sb=N(!0),Tb=N(!0),Ub=N(!0),Vb=N(!0),Wb=N(!0),Zb=N(!0),$b=N(!0),ac=N(!0),bc=N(!0),cc=N(!0),R=N(!0),dc=N(!0),\nec=N(!0),fc=N(!0),gc=N(!0),hc=N(!0),ic=N(!0),jc=N(!0),S=N(!0),kc=N(!0),lc=N(!0),mc=N(!0),nc=N(!0),oc=N(!0),pc=N(!0),qc=N(!0),rc=Va(\"campaignParams\"),sc=N(),tc=Va(\"hitCallback\"),uc=N();N();var vc=N(),wc=N(),xc=N(),yc=N(),zc=N(),Ac=N(),Bc=N(),Cc=N(),Dc=N(),Ec=N(),Fc=N(),Gc=N(),Hc=N(),Ic=N();N();var Mc=N(),Nc=N(),Oc=N(),Oe=Va(\"uaName\"),Pe=Va(\"uaDomain\"),Qe=Va(\"uaPath\");var Re=function(){function a(a,c,d){T($[x],a,c,d)}a(\"_createTracker\",$[x].r,55);a(\"_getTracker\",$[x].oa,0);a(\"_getTrackerByName\",$[x].u,51);a(\"_getTrackers\",$[x].pa,130);a(\"_anonymizeIp\",$[x].aa,16);a(\"_forceSSL\",$[x].la,125);a(\"_getPlugin\",Pc,120)},Se=function(){function a(a,c,d){T(U[x],a,c,d)}Qc(\"_getName\",$a,58);Qc(\"_getAccount\",Wa,64);Qc(\"_visitCode\",Q,54);Qc(\"_getClientInfo\",ib,53,1);Qc(\"_getDetectTitle\",lb,56,1);Qc(\"_getDetectFlash\",jb,65,1);Qc(\"_getLocalGifPath\",wb,57);Qc(\"_getServiceMode\",\nxb,59);V(\"_setClientInfo\",ib,66,2);V(\"_setAccount\",Wa,3);V(\"_setNamespace\",Ya,48);V(\"_setAllowLinker\",fb,11,2);V(\"_setDetectFlash\",jb,61,2);V(\"_setDetectTitle\",lb,62,2);V(\"_setLocalGifPath\",wb,46,0);V(\"_setLocalServerMode\",xb,92,void 0,0);V(\"_setRemoteServerMode\",xb,63,void 0,1);V(\"_setLocalRemoteServerMode\",xb,47,void 0,2);V(\"_setSampleRate\",vb,45,1);V(\"_setCampaignTrack\",kb,36,2);V(\"_setAllowAnchor\",gb,7,2);V(\"_setCampNameKey\",ob,41);V(\"_setCampContentKey\",tb,38);V(\"_setCampIdKey\",nb,39);V(\"_setCampMediumKey\",\nrb,40);V(\"_setCampNOKey\",ub,42);V(\"_setCampSourceKey\",qb,43);V(\"_setCampTermKey\",sb,44);V(\"_setCampCIdKey\",pb,37);V(\"_setCookiePath\",P,9,0);V(\"_setMaxCustomVariables\",yb,0,1);V(\"_setVisitorCookieTimeout\",cb,28,1);V(\"_setSessionCookieTimeout\",db,26,1);V(\"_setCampaignCookieTimeout\",eb,29,1);V(\"_setReferrerOverride\",Jb,49);V(\"_setSiteSpeedSampleRate\",Dc,132);a(\"_trackPageview\",U[x].Fa,1);a(\"_trackEvent\",U[x].F,4);a(\"_trackPageLoadTime\",U[x].Ea,100);a(\"_trackSocial\",U[x].Ga,104);a(\"_trackTrans\",U[x].Ia,\n18);a(\"_sendXEvent\",U[x].t,78);a(\"_createEventTracker\",U[x].ia,74);a(\"_getVersion\",U[x].qa,60);a(\"_setDomainName\",U[x].B,6);a(\"_setAllowHash\",U[x].va,8);a(\"_getLinkerUrl\",U[x].na,52);a(\"_link\",U[x].link,101);a(\"_linkByPost\",U[x].ua,102);a(\"_setTrans\",U[x].za,20);a(\"_addTrans\",U[x].$,21);a(\"_addItem\",U[x].Y,19);a(\"_clearTrans\",U[x].ea,105);a(\"_setTransactionDelim\",U[x].Aa,82);a(\"_setCustomVar\",U[x].wa,10);a(\"_deleteCustomVar\",U[x].ka,35);a(\"_getVisitorCustomVar\",U[x].ra,50);a(\"_setXKey\",U[x].Ca,83);\na(\"_setXValue\",U[x].Da,84);a(\"_getXKey\",U[x].sa,76);a(\"_getXValue\",U[x].ta,77);a(\"_clearXKey\",U[x].fa,72);a(\"_clearXValue\",U[x].ga,73);a(\"_createXObj\",U[x].ja,75);a(\"_addIgnoredOrganic\",U[x].W,15);a(\"_clearIgnoredOrganic\",U[x].ba,97);a(\"_addIgnoredRef\",U[x].X,31);a(\"_clearIgnoredRef\",U[x].ca,32);a(\"_addOrganic\",U[x].Z,14);a(\"_clearOrganic\",U[x].da,70);a(\"_cookiePathCopy\",U[x].ha,30);a(\"_get\",U[x].ma,106);a(\"_set\",U[x].xa,107);a(\"_addEventListener\",U[x].addEventListener,108);a(\"_removeEventListener\",\nU[x].removeEventListener,109);a(\"_addDevId\",U[x].V);a(\"_getPlugin\",Pc,122);a(\"_setPageGroup\",U[x].ya,126);a(\"_trackTiming\",U[x].Ha,124);a(\"_initData\",U[x].v,2);a(\"_setVar\",U[x].Ba,22);V(\"_setSessionTimeout\",db,27,3);V(\"_setCookieTimeout\",eb,25,3);V(\"_setCookiePersistence\",cb,24,1);a(\"_setAutoTrackOutbound\",Fa,79);a(\"_setTrackOutboundSubdomains\",Fa,81);a(\"_setHrefExamineLimit\",Fa,80)};function Pc(a){var b=this.plugins_;if(b)return b.get(a)}\nvar T=function(a,b,c,d){a[b]=function(){try{return void 0!=d&&H(d),c[ya](this,arguments)}catch(a){throw Ra(\"exc\",b,a&&a[r]),a;}}},Qc=function(a,b,c,d){U[x][a]=function(){try{return H(c),Aa(this.a.get(b),d)}catch(e){throw Ra(\"exc\",a,e&&e[r]),e;}}},V=function(a,b,c,d,e){U[x][a]=function(f){try{H(c),void 0==e?this.a.set(b,Aa(f,d)):this.a.set(b,e)}catch(Be){throw Ra(\"exc\",a,Be&&Be[r]),Be;}}},Te=function(a,b){return{type:b,target:a,stopPropagation:function(){throw\"aborted\";}}};var Rc=RegExp(/(^|\\.)doubleclick\\.net$/i),Sc=function(a,b){return Rc[ia](J[z].hostname)?!0:\"/\"!==b?!1:0!=a[q](\"www.google.\")&&0!=a[q](\".google.\")&&0!=a[q](\"google.\")||-1<a[q](\"google.org\")?!1:!0},Tc=function(a){var b=a.get(bb),c=a.c(P,\"/\");Sc(b,c)&&a[ta]()};var Zc=function(){var a={},b={},c=new Uc;this.g=function(a,b){c.add(a,b)};var d=new Uc;this.e=function(a,b){d.add(a,b)};var e=!1,f=!1,Be=!0;this.T=function(){e=!0};this.j=function(a){this[ka]();this.set(sc,a,!0);a=new Vc(this);e=!1;d.execute(this);e=!0;b={};this.n();a.Ja()};this.load=function(){e&&(e=!1,this.Ka(),Wc(this),f||(f=!0,c.execute(this),Xc(this),Wc(this)),e=!0)};this.n=function(){if(e)if(f)e=!1,Xc(this),e=!0;else this[ka]()};this.get=function(c){Ua[c]&&this[ka]();return void 0!==b[c]?b[c]:\na[c]};this.set=function(c,d,e){Ua[c]&&this[ka]();e?b[c]=d:a[c]=d;Ua[c]&&this.n()};this.Za=function(b){a[b]=this.b(b,0)+1};this.b=function(a,b){var c=this.get(a);return void 0==c||\"\"===c?b:1*c};this.c=function(a,b){var c=this.get(a);return void 0==c?b:c+\"\"};this.Ka=function(){if(Be){var b=this.c(bb,\"\"),c=this.c(P,\"/\");Sc(b,c)||(a[O]=a[hb]&&\"\"!=b?Yc(b):1,Be=!1)}}};Zc[x].stopPropagation=function(){throw\"aborted\";};\nvar Vc=function(a){var b=this;this.q=0;var c=a.get(tc);this.Ua=function(){0<b.q&&c&&(b.q--,b.q||c())};this.Ja=function(){!b.q&&c&&ca(c,10)};a.set(uc,b,!0)};function $c(a,b){b=b||[];for(var c=0;c<b[w];c++){var d=b[c];if(\"\"+a==d||0==d[q](a+\".\"))return d}return\"-\"}\nvar bd=function(a,b,c){c=c?\"\":a.c(O,\"1\");b=b[y](\".\");if(6!==b[w]||ad(b[0],c))return!1;c=1*b[1];var d=1*b[2],e=1*b[3],f=1*b[4];b=1*b[5];if(!(0<=c&&0<d&&0<e&&0<f&&0<=b))return!1;a.set(Q,c);a.set(Vb,d);a.set(Wb,e);a.set(Zb,f);a.set($b,b);return!0},cd=function(a){var b=a.get(Q),c=a.get(Vb),d=a.get(Wb),e=a.get(Zb),f=a.b($b,1);return[a.b(O,1),void 0!=b?b:\"-\",c||\"-\",d||\"-\",e||\"-\",f][C](\".\")},dd=function(a){return[a.b(O,1),a.b(cc,0),a.b(R,1),a.b(dc,0)][C](\".\")},ed=function(a,b,c){c=c?\"\":a.c(O,\"1\");var d=\nb[y](\".\");if(4!==d[w]||ad(d[0],c))d=null;a.set(cc,d?1*d[1]:0);a.set(R,d?1*d[2]:10);a.set(dc,d?1*d[3]:a.get(ab));return null!=d||!ad(b,c)},fd=function(a,b){var c=G(a.c(Tb,\"\")),d=[],e=a.get(Fb);if(!b&&e){for(var f=0;f<e[w];f++){var Be=e[f];Be&&1==Be[ua]&&d[n](f+\"=\"+G(Be[r])+\"=\"+G(Be[na])+\"=1\")}0<d[w]&&(c+=\"|\"+d[C](\"^\"))}return c?a.b(O,1)+\".\"+c:null},gd=function(a,b,c){c=c?\"\":a.c(O,\"1\");b=b[y](\".\");if(2>b[w]||ad(b[0],c))return!1;b=b[ja](1)[C](\".\")[y](\"|\");0<b[w]&&a.set(Tb,I(b[0]));if(1>=b[w])return!0;\nb=b[1][y](-1==b[1][q](\",\")?\"^\":\",\");for(c=0;c<b[w];c++){var d=b[c][y](\"=\");if(4==d[w]){var e={};ha(e,I(d[1]));e.value=I(d[2]);e.scope=1;a.get(Fb)[d[0]]=e}}return!0},hd=function(a,b){var c=Ue(a,b);return c?[a.b(O,1),a.b(ec,0),a.b(fc,1),a.b(gc,1),c][C](\".\"):\"\"},Ue=function(a){function b(b,e){if(!F(a.get(b))){var f=a.c(b,\"\"),f=f[y](\" \")[C](\"%20\"),f=f[y](\"+\")[C](\"%20\");c[n](e+\"=\"+f)}}var c=[];b(ic,\"utmcid\");b(nc,\"utmcsr\");b(S,\"utmgclid\");b(kc,\"utmgclsrc\");b(lc,\"utmdclid\");b(mc,\"utmdsid\");b(jc,\"utmccn\");\nb(oc,\"utmcmd\");b(pc,\"utmctr\");b(qc,\"utmcct\");return c[C](\"|\")},id=function(a,b,c){c=c?\"\":a.c(O,\"1\");b=b[y](\".\");if(5>b[w]||ad(b[0],c))return a.set(ec,void 0),a.set(fc,void 0),a.set(gc,void 0),a.set(ic,void 0),a.set(jc,void 0),a.set(nc,void 0),a.set(oc,void 0),a.set(pc,void 0),a.set(qc,void 0),a.set(S,void 0),a.set(kc,void 0),a.set(lc,void 0),a.set(mc,void 0),!1;a.set(ec,1*b[1]);a.set(fc,1*b[2]);a.set(gc,1*b[3]);Ve(a,b[ja](4)[C](\".\"));return!0},Ve=function(a,b){function c(a){return(a=b[oa](a+\"=(.*?)(?:\\\\|utm|$)\"))&&\n2==a[w]?a[1]:void 0}function d(b,c){c?(c=e?I(c):c[y](\"%20\")[C](\" \"),a.set(b,c)):a.set(b,void 0)}-1==b[q](\"=\")&&(b=I(b));var e=\"2\"==c(\"utmcvr\");d(ic,c(\"utmcid\"));d(jc,c(\"utmccn\"));d(nc,c(\"utmcsr\"));d(oc,c(\"utmcmd\"));d(pc,c(\"utmctr\"));d(qc,c(\"utmcct\"));d(S,c(\"utmgclid\"));d(kc,c(\"utmgclsrc\"));d(lc,c(\"utmdclid\"));d(mc,c(\"utmdsid\"))},ad=function(a,b){return b?a!=b:!/^\\d+$/[ia](a)};var Uc=function(){this.filters=[]};Uc[x].add=function(a,b){this.filters[n]({name:a,s:b})};Uc[x].execute=function(a){try{for(var b=0;b<this.filters[w];b++)this.filters[b].s.call(W,a)}catch(c){}};function jd(a){100!=a.get(vb)&&a.get(Q)%1E4>=100*a.get(vb)&&a[ta]()}function kd(a){ld(a.get(Wa))&&a[ta]()}function md(a){\"file:\"==J[z][A]&&a[ta]()}function Ge(a){He()&&a[ta]()}function nd(a){a.get(Ib)||a.set(Ib,J.title,!0);a.get(Hb)||a.set(Hb,J[z].pathname+J[z][va],!0)};var od=new function(){var a=[];this.set=function(b){a[b]=!0};this.Xa=function(){for(var b=[],c=0;c<a[w];c++)a[c]&&(b[m[la](c/6)]=b[m[la](c/6)]^1<<c%6);for(c=0;c<b[w];c++)b[c]=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_\"[ma](b[c]||0);return b[C](\"\")+\"~\"}};function H(a){od.set(a)};var W=window,J=document,ld=function(a){var b=W._gaUserPrefs;if(b&&b.ioo&&b.ioo()||a&&!0===W[\"ga-disable-\"+a])return!0;try{var c=W.external;if(c&&c._gaUserPrefs&&\"oo\"==c._gaUserPrefs)return!0}catch(d){}return!1},He=function(){return W[za]&&\"preview\"==W[za].loadPurpose},We=function(a,b){ca(a,b)},pd=function(a){var b=[],c=J.cookie[y](\";\");a=RegExp(\"^\\\\s*\"+a+\"=\\\\s*(.*?)\\\\s*$\");for(var d=0;d<c[w];d++){var e=c[d][oa](a);e&&b[n](e[1])}return b},X=function(a,b,c,d,e,f){e=ld(e)?!1:Sc(d,c)?!1:He()?!1:!0;if(e){if(b&&\n0<=W[za].userAgent[q](\"Firefox\")){b=b[p](/\\n|\\r/g,\" \");e=0;for(var Be=b[w];e<Be;++e){var k=b.charCodeAt(e)&255;if(10==k||13==k)b=b[B](0,e)+\"?\"+b[B](e+1)}}b&&2E3<b[w]&&(b=b[B](0,2E3),H(69));a=a+\"=\"+b+\"; path=\"+c+\"; \";f&&(a+=\"expires=\"+(new Date((new Date)[g]()+f)).toGMTString()+\"; \");d&&(a+=\"domain=\"+d+\";\");J.cookie=a}};var qd,rd,sd=function(){if(!qd){var a={},b=W[za],c=W.screen;a.Q=c?c.width+\"x\"+c.height:\"-\";a.P=c?c.colorDepth+\"-bit\":\"-\";a.language=(b&&(b.language||b.browserLanguage)||\"-\")[D]();a.javaEnabled=b&&b.javaEnabled()?1:0;a.characterSet=J.characterSet||J.charset||\"-\";try{var d;var e=J.documentElement,f=J.body,Be=f&&f[sa]&&f[wa],b=[];e&&e[sa]&&e[wa]&&(\"CSS1Compat\"===J.compatMode||!Be)?b=[e[sa],e[wa]]:Be&&(b=[f[sa],f[wa]]);d=0>=b[0]||0>=b[1]?\"\":b[C](\"x\");a.Wa=d}catch(k){H(135)}qd=a}},td=function(){sd();for(var a=\nqd,b=W[za],a=b.appName+b.version+a.language+b.platform+b.userAgent+a.javaEnabled+a.Q+a.P+(J.cookie?J.cookie:\"\")+(J.referrer?J.referrer:\"\"),b=a[w],c=W.history[w];0<c;)a+=c--^b++;return Yc(a)},ud=function(a){sd();var b=qd;a.set(Lb,b.Q);a.set(Mb,b.P);a.set(Pb,b.language);a.set(Qb,b.characterSet);a.set(Nb,b.javaEnabled);a.set(Rb,b.Wa);if(a.get(ib)&&a.get(jb)){if(!(b=rd)){var c,d,e;d=\"ShockwaveFlash\";if((b=(b=W[za])?b.plugins:void 0)&&0<b[w])for(c=0;c<b[w]&&!e;c++)d=b[c],-1<d[r][q](\"Shockwave Flash\")&&\n(e=d.description[y](\"Shockwave Flash \")[1]);else{d=d+\".\"+d;try{c=new ActiveXObject(d+\".7\"),e=c.GetVariable(\"$version\")}catch(f){}if(!e)try{c=new ActiveXObject(d+\".6\"),e=\"WIN 6,0,21,0\",c.AllowScriptAccess=\"always\",e=c.GetVariable(\"$version\")}catch(Be){}if(!e)try{c=new ActiveXObject(d),e=c.GetVariable(\"$version\")}catch(k){}e&&(e=e[y](\" \")[1][y](\",\"),e=e[0]+\".\"+e[1]+\" r\"+e[2])}b=e?e:\"-\"}rd=b;a.set(Ob,rd)}else a.set(Ob,\"-\")};var vd=function(a){if(Ba(a))this.s=a;else{var b=a[0],c=b.lastIndexOf(\":\"),d=b.lastIndexOf(\".\");this.h=this.i=this.l=\"\";-1==c&&-1==d?this.h=b:-1==c&&-1!=d?(this.i=b[B](0,d),this.h=b[B](d+1)):-1!=c&&-1==d?(this.l=b[B](0,c),this.h=b[B](c+1)):c>d?(this.i=b[B](0,d),this.l=b[B](d+1,c),this.h=b[B](c+1)):(this.i=b[B](0,d),this.h=b[B](d+1));this.k=a[ja](1);this.Ma=!this.l&&\"_require\"==this.h;this.J=!this.i&&!this.l&&\"_provide\"==this.h}},Y=function(){T(Y[x],\"push\",Y[x][n],5);T(Y[x],\"_getPlugin\",Pc,121);T(Y[x],\n\"_createAsyncTracker\",Y[x].Sa,33);T(Y[x],\"_getAsyncTracker\",Y[x].Ta,34);this.I=new Ja;this.p=[]};E=Y[x];E.Na=function(a,b,c){var d=this.I.get(a);if(!Ba(d))return!1;b.plugins_=b.plugins_||new Ja;b.plugins_.set(a,new d(b,c||{}));return!0};E.push=function(a){var b=Z.Va[ya](this,arguments),b=Z.p.concat(b);for(Z.p=[];0<b[w]&&!Z.O(b[0])&&!(b.shift(),0<Z.p[w]););Z.p=Z.p.concat(b);return 0};E.Va=function(a){for(var b=[],c=0;c<arguments[w];c++)try{var d=new vd(arguments[c]);d.J?this.O(d):b[n](d)}catch(e){}return b};\nE.O=function(a){try{if(a.s)a.s[ya](W);else if(a.J)this.I.set(a.k[0],a.k[1]);else{var b=\"_gat\"==a.i?M:\"_gaq\"==a.i?Z:M.u(a.i);if(a.Ma){if(!this.Na(a.k[0],b,a.k[2])){if(!a.Pa){var c=Oa(\"\"+a.k[1]);var d=c[A],e=J[z][A];var f;if(f=\"https:\"==d||d==e?!0:\"http:\"!=d?!1:\"http:\"==e){var Be;t:{var k=Oa(J[z][xa]);if(!(c.Oa||0<=c.url[q](\"?\")||0<=c[ra][q](\"://\")||c[u]==k[u]&&c[pa]==k[pa]))for(var s=\"http:\"==c[A]?80:443,t=M.S,b=0;b<t[w];b++)if(c[u]==t[b][0]&&(c[pa]||s)==(t[b][1]||s)&&0==c[ra][q](t[b][2])){Be=!0;break t}Be=\n!1}f=Be&&!ld()}f&&(a.Pa=Ia(c.url))}return!0}}else a.l&&(b=b.plugins_.get(a.l)),b[a.h][ya](b,a.k)}}catch(Za){}};E.Sa=function(a,b){return M.r(a,b||\"\")};E.Ta=function(a){return M.u(a)};var yd=function(){function a(a,b,c,d){void 0==f[a]&&(f[a]={});void 0==f[a][b]&&(f[a][b]=[]);f[a][b][c]=d}function b(a,b,c){if(void 0!=f[a]&&void 0!=f[a][b])return f[a][b][c]}function c(a,b){if(void 0!=f[a]&&void 0!=f[a][b]){f[a][b]=void 0;var c=!0,d;for(d=0;d<Be[w];d++)if(void 0!=f[a][Be[d]]){c=!1;break}c&&(f[a]=void 0)}}function d(a){var b=\"\",c=!1,d,e;for(d=0;d<Be[w];d++)if(e=a[Be[d]],void 0!=e){c&&(b+=Be[d]);for(var c=[],f=void 0,ga=void 0,ga=0;ga<e[w];ga++)if(void 0!=e[ga]){f=\"\";ga!=mb&&void 0==\ne[ga-1]&&(f+=ga[v]()+Za);for(var Cd=e[ga],Jc=\"\",Yb=void 0,Kc=void 0,Lc=void 0,Yb=0;Yb<Cd[w];Yb++)Kc=Cd[ma](Yb),Lc=Ma[Kc],Jc+=void 0!=Lc?Lc:Kc;f+=Jc;c[n](f)}b+=k+c[C](t)+s;c=!1}else c=!0;return b}var e=this,f=[],Be=[\"k\",\"v\"],k=\"(\",s=\")\",t=\"*\",Za=\"!\",Ma={\"'\":\"'0\"};Ma[s]=\"'1\";Ma[t]=\"'2\";Ma[Za]=\"'3\";var mb=1;e.Ra=function(a){return void 0!=f[a]};e.A=function(){for(var a=\"\",b=0;b<f[w];b++)void 0!=f[b]&&(a+=b[v]()+d(f[b]));return a};e.Qa=function(a){if(void 0==a)return e.A();for(var b=a.A(),c=0;c<f[w];c++)void 0==\nf[c]||a.Ra(c)||(b+=c[v]()+d(f[c]));return b};e.f=function(b,c,d){if(!wd(d))return!1;a(b,\"k\",c,d);return!0};e.o=function(b,c,d){if(!xd(d))return!1;a(b,\"v\",c,d[v]());return!0};e.getKey=function(a,c){return b(a,\"k\",c)};e.N=function(a,c){return b(a,\"v\",c)};e.L=function(a){c(a,\"k\")};e.M=function(a){c(a,\"v\")};T(e,\"_setKey\",e.f,89);T(e,\"_setValue\",e.o,90);T(e,\"_getKey\",e.getKey,87);T(e,\"_getValue\",e.N,88);T(e,\"_clearKey\",e.L,85);T(e,\"_clearValue\",e.M,86)};function wd(a){return\"string\"==typeof a}\nfunction xd(a){return!(\"number\"==typeof a||void 0!=Number&&a instanceof Number)||m.round(a)!=a||da(a)||a==ba?!1:!0};var zd=function(a){var b=W.gaGlobal;a&&!b&&(W.gaGlobal=b={});return b},Ad=function(){var a=zd(!0).hid;null==a&&(a=Ea(),zd(!0).hid=a);return a},Dd=function(a){a.set(Kb,Ad());var b=zd();if(b&&b.dh==a.get(O)){var c=b.sid;c&&(a.get(ac)?H(112):H(132),a.set(Zb,c),a.get(Sb)&&a.set(Wb,c));b=b.vid;a.get(Sb)&&b&&(b=b[y](\".\"),a.set(Q,1*b[0]),a.set(Vb,1*b[1]))}};var Ed,Fd=function(a,b,c,d){var e=a.c(bb,\"\"),f=a.c(P,\"/\");d=void 0!=d?d:a.b(cb,0);a=a.c(Wa,\"\");X(b,c,f,e,a,d)},Xc=function(a){var b=a.c(bb,\"\");a.b(O,1);var c=a.c(P,\"/\"),d=a.c(Wa,\"\");X(\"__utma\",cd(a),c,b,d,a.get(cb));X(\"__utmb\",dd(a),c,b,d,a.get(db));X(\"__utmc\",\"\"+a.b(O,1),c,b,d);var e=hd(a,!0);e?X(\"__utmz\",e,c,b,d,a.get(eb)):X(\"__utmz\",\"\",c,b,\"\",-1);(e=fd(a,!1))?X(\"__utmv\",e,c,b,d,a.get(cb)):X(\"__utmv\",\"\",c,b,\"\",-1)},Wc=function(a){var b=a.b(O,1);if(!bd(a,$c(b,pd(\"__utma\"))))return a.set(Ub,!0),!1;\nvar c=!ed(a,$c(b,pd(\"__utmb\")));a.set(bc,c);id(a,$c(b,pd(\"__utmz\")));gd(a,$c(b,pd(\"__utmv\")));Ed=!c;return!0},Gd=function(a){Ed||0<pd(\"__utmb\")[w]||(X(\"__utmd\",\"1\",a.c(P,\"/\"),a.c(bb,\"\"),a.c(Wa,\"\"),1E4),0==pd(\"__utmd\")[w]&&a[ta]())};var h=0,Jd=function(a){void 0==a.get(Q)?Hd(a):a.get(Ub)&&!a.get(Mc)?Hd(a):a.get(bc)&&(Id(a),h++,1<h&&H(137))},Kd=function(a){a.get(hc)&&!a.get(ac)&&(Id(a),a.set(fc,a.get($b)))},Hd=function(a){var b=a.get(ab);a.set(Sb,!0);a.set(Q,Ea()^td(a)&2147483647);a.set(Tb,\"\");a.set(Vb,b);a.set(Wb,b);a.set(Zb,b);a.set($b,1);a.set(ac,!0);a.set(cc,0);a.set(R,10);a.set(dc,b);a.set(Fb,[]);a.set(Ub,!1);a.set(bc,!1)},Id=function(a){a.set(Wb,a.get(Zb));a.set(Zb,a.get(ab));a.Za($b);a.set(ac,!0);a.set(cc,0);a.set(R,10);\na.set(dc,a.get(ab));a.set(bc,!1)};var Ld=\"daum:q eniro:search_word naver:query pchome:q images.google:q google:q yahoo:p yahoo:q msn:q bing:q aol:query aol:q lycos:q lycos:query ask:q netscape:query cnn:query about:terms mamma:q voila:rdata virgilio:qs live:q baidu:wd alice:qs yandex:text najdi:q seznam:q rakuten:qt biglobe:q goo.ne:MT wp:szukaj onet:qt yam:k kvasir:q ozu:q terra:query rambler:query conduit:q babylon:q search-results:q avg:q comcast:q incredimail:q startsiden:q go.mail.ru:q search.centrum.cz:q 360.cn:q\".split(\" \"),\nSd=function(a){if(a.get(kb)&&!a.get(Mc)){for(var b=!F(a.get(ic))||!F(a.get(nc))||!F(a.get(S))||!F(a.get(lc)),c={},d=0;d<Md[w];d++){var e=Md[d];c[e]=a.get(e)}(d=a.get(rc))?(H(149),e=new Ja,Na(e,d),d=e):d=La(J[z][xa],a.get(gb)).d;if(\"1\"!=L(d.get(a.get(ub)))||!b)if(d=Xe(a,d)||Qd(a),d||b||!a.get(ac)||(Pd(a,void 0,\"(direct)\",void 0,void 0,void 0,\"(direct)\",\"(none)\",void 0,void 0),d=!0),d&&(a.set(hc,Rd(a,c)),b=\"(direct)\"==a.get(nc)&&\"(direct)\"==a.get(jc)&&\"(none)\"==a.get(oc),a.get(hc)||a.get(ac)&&!b))a.set(ec,\na.get(ab)),a.set(fc,a.get($b)),a.Za(gc)}},Xe=function(a,b){function c(c,d){d=d||\"-\";var e=L(b.get(a.get(c)));return e&&\"-\"!=e?I(e):d}var d=L(b.get(a.get(nb)))||\"-\",e=L(b.get(a.get(qb)))||\"-\",f=L(b.get(a.get(pb)))||\"-\",Be=L(b.get(\"gclsrc\"))||\"-\",k=L(b.get(\"dclid\"))||\"-\",s=c(ob,\"(not set)\"),t=c(rb,\"(not set)\"),Za=c(sb),Ma=c(tb);if(F(d)&&F(f)&&F(k)&&F(e))return!1;var mb=!F(f)&&!F(Be),mb=F(e)&&(!F(k)||mb),Xb=F(Za);if(mb||Xb){var Bd=Nd(a),Bd=La(Bd,!0);(Bd=Od(a,Bd))&&!F(Bd[1]&&!Bd[2])&&(mb&&(e=Bd[0]),Xb&&\n(Za=Bd[1]))}Pd(a,d,e,f,Be,k,s,t,Za,Ma);return!0},Qd=function(a){var b=Nd(a),c=La(b,!0);if(!(void 0!=b&&null!=b&&\"\"!=b&&\"0\"!=b&&\"-\"!=b&&0<=b[q](\"://\"))||c&&-1<c[u][q](\"google\")&&c.d.contains(\"q\")&&\"cse\"==c[ra])return!1;if((b=Od(a,c))&&!b[2])return Pd(a,void 0,b[0],void 0,void 0,void 0,\"(organic)\",\"organic\",b[1],void 0),!0;if(b||!a.get(ac))return!1;t:{for(var b=a.get(Bb),d=Ka(c[u]),e=0;e<b[w];++e)if(-1<d[q](b[e])){a=!1;break t}Pd(a,void 0,d,void 0,void 0,void 0,\"(referral)\",\"referral\",void 0,\"/\"+c[ra]);\na=!0}return a},Od=function(a,b){for(var c=a.get(zb),d=0;d<c[w];++d){var e=c[d][y](\":\");if(-1<b[u][q](e[0][D]())){var f=b.d.get(e[1]);if(f&&(f=K(f),!f&&-1<b[u][q](\"google.\")&&(f=\"(not provided)\"),!e[3]||-1<b.url[q](e[3]))){t:{for(var c=f,d=a.get(Ab),c=I(c)[D](),Be=0;Be<d[w];++Be)if(c==d[Be]){c=!0;break t}c=!1}return[e[2]||e[0],f,c]}}}return null},Pd=function(a,b,c,d,e,f,Be,k,s,t){a.set(ic,b);a.set(nc,c);a.set(S,d);a.set(kc,e);a.set(lc,f);a.set(jc,Be);a.set(oc,k);a.set(pc,s);a.set(qc,t)},Md=[jc,ic,\nS,lc,nc,oc,pc,qc],Rd=function(a,b){function c(a){a=(\"\"+a)[y](\"+\")[C](\"%20\");return a=a[y](\" \")[C](\"%20\")}function d(c){var d=\"\"+(a.get(c)||\"\");c=\"\"+(b[c]||\"\");return 0<d[w]&&d==c}if(d(S)||d(lc))return H(131),!1;for(var e=0;e<Md[w];e++){var f=Md[e],Be=b[f]||\"-\",f=a.get(f)||\"-\";if(c(Be)!=c(f))return!0}return!1},Td=RegExp(/^https?:\\/\\/(www\\.)?google(\\.com?)?(\\.[a-z]{2}t?)?\\/?$/i),Nd=function(a){a=Pa(a.get(Jb),a.get(P));try{if(Td[ia](a))return H(136),a+\"?q=\"}catch(b){H(145)}return a};var Ud,Vd,Wd=function(a){Ud=a.c(S,\"\");Vd=a.c(kc,\"\")},Xd=function(a){var b=a.c(S,\"\"),c=a.c(kc,\"\");b!=Ud&&(-1<c[q](\"ds\")?a.set(mc,void 0):!F(Ud)&&-1<Vd[q](\"ds\")&&a.set(mc,Ud))};var Zd=function(a){Yd(a,J[z][xa])?(a.set(Mc,!0),H(12)):a.set(Mc,!1)},Yd=function(a,b){if(!a.get(fb))return!1;var c=La(b,a.get(gb)),d=K(c.d.get(\"__utma\")),e=K(c.d.get(\"__utmb\")),f=K(c.d.get(\"__utmc\")),Be=K(c.d.get(\"__utmx\")),k=K(c.d.get(\"__utmz\")),s=K(c.d.get(\"__utmv\")),c=K(c.d.get(\"__utmk\"));if(Yc(\"\"+d+e+f+Be+k+s)!=c){d=I(d);e=I(e);f=I(f);Be=I(Be);f=$d(d+e+f+Be,k,s,c);if(!f)return!1;k=f[0];s=f[1]}if(!bd(a,d,!0))return!1;ed(a,e,!0);id(a,k,!0);gd(a,s,!0);ae(a,Be,!0);return!0},ce=function(a,b,c){var d;\nd=cd(a)||\"-\";var e=dd(a)||\"-\",f=\"\"+a.b(O,1)||\"-\",Be=be(a)||\"-\",k=hd(a,!1)||\"-\";a=fd(a,!1)||\"-\";var s=Yc(\"\"+d+e+f+Be+k+a),t=[];t[n](\"__utma=\"+d);t[n](\"__utmb=\"+e);t[n](\"__utmc=\"+f);t[n](\"__utmx=\"+Be);t[n](\"__utmz=\"+k);t[n](\"__utmv=\"+a);t[n](\"__utmk=\"+s);d=t[C](\"&\");if(!d)return b;e=b[q](\"#\");if(c)return 0>e?b+\"#\"+d:b+\"&\"+d;c=\"\";f=b[q](\"?\");0<e&&(c=b[B](e),b=b[B](0,e));return 0>f?b+\"?\"+d+c:b+\"&\"+d+c},$d=function(a,b,c,d){for(var e=0;3>e;e++){for(var f=0;3>f;f++){if(d==Yc(a+b+c))return H(127),[b,c];\nvar Be=b[p](/ /g,\"%20\"),k=c[p](/ /g,\"%20\");if(d==Yc(a+Be+k))return H(128),[Be,k];Be=Be[p](/\\+/g,\"%20\");k=k[p](/\\+/g,\"%20\");if(d==Yc(a+Be+k))return H(129),[Be,k];try{var s=b[oa](\"utmctr=(.*?)(?:\\\\|utm|$)\");if(s&&2==s[w]&&(Be=b[p](s[1],G(I(s[1]))),d==Yc(a+Be+c)))return H(139),[Be,c]}catch(t){}b=I(b)}c=I(c)}};var de=\"|\",fe=function(a,b,c,d,e,f,Be,k,s){var t=ee(a,b);t||(t={},a.get(Cb)[n](t));t.id_=b;t.affiliation_=c;t.total_=d;t.tax_=e;t.shipping_=f;t.city_=Be;t.state_=k;t.country_=s;t.items_=t.items_||[];return t},ge=function(a,b,c,d,e,f,Be){a=ee(a,b)||fe(a,b,\"\",0,0,0,\"\",\"\",\"\");var k;t:{if(a&&a.items_){k=a.items_;for(var s=0;s<k[w];s++)if(k[s].sku_==c){k=k[s];break t}}k=null}s=k||{};s.transId_=b;s.sku_=c;s.name_=d;s.category_=e;s.price_=f;s.quantity_=Be;k||a.items_[n](s);return s},ee=function(a,b){for(var c=\na.get(Cb),d=0;d<c[w];d++)if(c[d].id_==b)return c[d];return null};var he,ie=function(a){if(!he){var b;b=J[z].hash;var c=W[r],d=/^#?gaso=([^&]*)/;if(c=(b=(b=b&&b[oa](d)||c&&c[oa](d))?b[1]:K(pd(\"GASO\")))&&b[oa](/^(?:!([-0-9a-z.]{1,40})!)?([-.\\w]{10,1200})$/i))Fd(a,\"GASO\",\"\"+b,0),M._gasoDomain=a.get(bb),M._gasoCPath=a.get(P),a=c[1],Ia(\"https://www.google.com/analytics/web/inpage/pub/inpage.js?\"+(a?\"prefix=\"+a+\"&\":\"\")+Ea(),\"_gasojs\");he=!0}};var ae=function(a,b,c){c&&(b=I(b));c=a.b(O,1);b=b[y](\".\");2>b[w]||!/^\\d+$/[ia](b[0])||(b[0]=\"\"+c,Fd(a,\"__utmx\",b[C](\".\"),void 0))},be=function(a,b){var c=$c(a.get(O),pd(\"__utmx\"));\"-\"==c&&(c=\"\");return b?G(c):c},Ye=function(a){try{var b=La(J[z][xa],!1),c=ea(L(b.d.get(\"utm_referrer\")))||\"\";c&&a.set(Jb,c);var d=ea(K(b.d.get(\"utm_expid\")))||\"\";d&&(d=d[y](\".\")[0],a.set(Oc,\"\"+d))}catch(e){H(146)}},l=function(a){var b=W.gaData&&W.gaData.expId;b&&a.set(Oc,\"\"+b)};var ke=function(a,b){var c=m.min(a.b(Dc,0),100);if(a.b(Q,0)%100>=c)return!1;c=Ze()||$e();if(void 0==c)return!1;var d=c[0];if(void 0==d||d==ba||da(d))return!1;0<d?af(c)?b(je(c)):b(je(c[ja](0,1))):Ga(W,\"load\",function(){ke(a,b)},!1);return!0},me=function(a,b,c,d){var e=new yd;e.f(14,90,b[B](0,500));e.f(14,91,a[B](0,150));e.f(14,92,\"\"+le(c));void 0!=d&&e.f(14,93,d[B](0,500));e.o(14,90,c);return e},af=function(a){for(var b=1;b<a[w];b++)if(da(a[b])||a[b]==ba||0>a[b])return!1;return!0},le=function(a){return da(a)||\n0>a?0:5E3>a?10*m[la](a/10):5E4>a?100*m[la](a/100):41E5>a?1E3*m[la](a/1E3):41E5},je=function(a){for(var b=new yd,c=0;c<a[w];c++)b.f(14,c+1,\"\"+le(a[c])),b.o(14,c+1,a[c]);return b},Ze=function(){var a=W.performance||W.webkitPerformance;if(a=a&&a.timing){var b=a.navigationStart;if(0==b)H(133);else return[a.loadEventStart-b,a.domainLookupEnd-a.domainLookupStart,a.connectEnd-a.connectStart,a.responseStart-a.requestStart,a.responseEnd-a.responseStart,a.fetchStart-b,a.domInteractive-b,a.domContentLoadedEventStart-\nb]}},$e=function(){if(W.top==W){var a=W.external,b=a&&a.onloadT;a&&!a.isValidLoadTime&&(b=void 0);2147483648<b&&(b=void 0);0<b&&a.setPageReadyTime();return void 0==b?void 0:[b]}};var cf=function(a){if(a.get(Sb))try{var b;t:{var c=pd(a.get(Oe)||\"_ga\");if(c&&!(1>c[w])){for(var d=[],e=0;e<c[w];e++){var f;var Be=c[e][y](\".\"),k=Be.shift();if((\"GA1\"==k||\"1\"==k)&&1<Be[w]){var s=Be.shift()[y](\"-\");1==s[w]&&(s[1]=\"1\");s[0]*=1;s[1]*=1;f={Ya:s,$a:Be[C](\".\")}}else f=void 0;f&&d[n](f)}if(1==d[w]){b=d[0].$a;break t}if(0!=d[w]){var t=a.get(Pe)||a.get(bb),d=bf(d,(0==t[q](\".\")?t.substr(1):t)[y](\".\")[w],0);if(1==d[w]){b=d[0].$a;break t}var Za=a.get(Qe)||a.get(P);(c=Za)?(1<c[w]&&\"/\"==c[ma](c[w]-\n1)&&(c=c.substr(0,c[w]-1)),0!=c[q](\"/\")&&(c=\"/\"+c),Za=c):Za=\"/\";d=bf(d,\"/\"==Za?1:Za[y](\"/\")[w],1);b=d[0].$a;break t}}b=void 0}if(b){var Ma=(\"\"+b)[y](\".\");2==Ma[w]&&/[0-9.]/[ia](Ma)&&(H(114),a.set(Q,Ma[0]),a.set(Vb,Ma[1]),a.set(Sb,!1))}}catch(mb){H(115)}},bf=function(a,b,c){for(var d=[],e=[],f=128,Be=0;Be<a[w];Be++){var k=a[Be];if(k.Ya[c]==b)d[n](k);else if(k.Ya[c]==f)e[n](k);else k.Ya[c]<f&&(e=[k],f=k.Ya[c])}return 0<d[w]?d:e};var U=function(a,b,c){function d(a){return function(b){if((b=b.get(Nc)[a])&&b[w])for(var c=Te(e,a),d=0;d<b[w];d++)b[d].call(e,c)}}var e=this;this.a=new Zc;this.get=function(a){return this.a.get(a)};this.set=function(a,b,c){this.a.set(a,b,c)};this.set(Wa,b||\"UA-XXXXX-X\");this.set($a,a||\"\");this.set(Ya,c||\"\");this.set(ab,m.round((new Date)[g]()/1E3));this.set(P,\"/\");this.set(cb,63072E6);this.set(eb,15768E6);this.set(db,18E5);this.set(fb,!1);this.set(yb,50);this.set(gb,!1);this.set(hb,!0);this.set(ib,\n!0);this.set(jb,!0);this.set(kb,!0);this.set(lb,!0);this.set(ob,\"utm_campaign\");this.set(nb,\"utm_id\");this.set(pb,\"gclid\");this.set(qb,\"utm_source\");this.set(rb,\"utm_medium\");this.set(sb,\"utm_term\");this.set(tb,\"utm_content\");this.set(ub,\"utm_nooverride\");this.set(vb,100);this.set(Dc,1);this.set(Ec,!1);this.set(wb,\"/__utm.gif\");this.set(xb,1);this.set(Cb,[]);this.set(Fb,[]);this.set(zb,Ld[ja](0));this.set(Ab,[]);this.set(Bb,[]);this.B(\"auto\");this.set(Jb,J.referrer);Ye(this.a);this.set(Nc,{hit:[],\nload:[]});this.a.g(\"0\",Zd);this.a.g(\"1\",Wd);this.a.g(\"2\",Jd);this.a.g(\"3\",cf);this.a.g(\"4\",Sd);this.a.g(\"5\",Xd);this.a.g(\"6\",Kd);this.a.g(\"7\",d(\"load\"));this.a.g(\"8\",ie);this.a.e(\"A\",kd);this.a.e(\"B\",md);this.a.e(\"C\",Ge);this.a.e(\"D\",Jd);this.a.e(\"E\",jd);this.a.e(\"F\",Tc);this.a.e(\"G\",ne);this.a.e(\"H\",Gd);this.a.e(\"I\",nd);this.a.e(\"J\",ud);this.a.e(\"K\",Dd);this.a.e(\"L\",l);this.a.e(\"M\",d(\"hit\"));this.a.e(\"N\",oe);this.a.e(\"O\",pe);0===this.get(ab)&&H(111);this.a.T();this.H=void 0};E=U[x];\nE.m=function(){var a=this.get(Db);a||(a=new yd,this.set(Db,a));return a};E.La=function(a){for(var b in a){var c=a[b];a.hasOwnProperty(b)&&this.set(b,c,!0)}};E.K=function(a){if(this.get(Ec))return!1;var b=this,c=ke(this.a,function(c){b.set(Hb,a,!0);b.t(c)});this.set(Ec,c);return c};E.Fa=function(a){a&&Ca(a)?(H(13),this.set(Hb,a,!0)):\"object\"===typeof a&&null!==a&&this.La(a);this.H=a=this.get(Hb);this.a.j(\"page\");this.K(a)};\nE.F=function(a,b,c,d,e){if(\"\"==a||!wd(a)||\"\"==b||!wd(b)||void 0!=c&&!wd(c)||void 0!=d&&!xd(d))return!1;this.set(wc,a,!0);this.set(xc,b,!0);this.set(yc,c,!0);this.set(zc,d,!0);this.set(vc,!!e,!0);this.a.j(\"event\");return!0};E.Ha=function(a,b,c,d,e){var f=this.a.b(Dc,0);1*e===e&&(f=e);if(this.a.b(Q,0)%100>=f)return!1;c=1*(\"\"+c);if(\"\"==a||!wd(a)||\"\"==b||!wd(b)||!xd(c)||da(c)||0>c||0>f||100<f||void 0!=d&&(\"\"==d||!wd(d)))return!1;this.t(me(a,b,c,d));return!0};\nE.Ga=function(a,b,c,d){if(!a||!b)return!1;this.set(Ac,a,!0);this.set(Bc,b,!0);this.set(Cc,c||J[z][xa],!0);d&&this.set(Hb,d,!0);this.a.j(\"social\");return!0};E.Ea=function(){this.set(Dc,10);this.K(this.H)};E.Ia=function(){this.a.j(\"trans\")};E.t=function(a){this.set(Eb,a,!0);this.a.j(\"event\")};E.ia=function(a){this.v();var b=this;return{_trackEvent:function(c,d,e){H(91);b.F(a,c,d,e)}}};E.ma=function(a){return this.get(a)};\nE.xa=function(a,b){if(a)if(Ca(a))this.set(a,b);else if(\"object\"==typeof a)for(var c in a)a.hasOwnProperty(c)&&this.set(c,a[c])};E.addEventListener=function(a,b){var c=this.get(Nc)[a];c&&c[n](b)};E.removeEventListener=function(a,b){for(var c=this.get(Nc)[a],d=0;c&&d<c[w];d++)if(c[d]==b){c.splice(d,1);break}};E.qa=function(){return\"5.4.5\"};E.B=function(a){this.get(hb);a=\"auto\"==a?Ka(J.domain):a&&\"-\"!=a&&\"none\"!=a?a[D]():\"\";this.set(bb,a)};E.va=function(a){this.set(hb,!!a)};\nE.na=function(a,b){return ce(this.a,a,b)};E.link=function(a,b){if(this.a.get(fb)&&a){var c=ce(this.a,a,b);J[z].href=c}};E.ua=function(a,b){this.a.get(fb)&&a&&a.action&&(a.action=ce(this.a,a.action,b))};\nE.za=function(){this.v();var a=this.a,b=J.getElementById?J.getElementById(\"utmtrans\"):J.utmform&&J.utmform.utmtrans?J.utmform.utmtrans:null;if(b&&b[na]){a.set(Cb,[]);for(var b=b[na][y](\"UTM:\"),c=0;c<b[w];c++){b[c]=Da(b[c]);for(var d=b[c][y](de),e=0;e<d[w];e++)d[e]=Da(d[e]);\"T\"==d[0]?fe(a,d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8]):\"I\"==d[0]&&ge(a,d[1],d[2],d[3],d[4],d[5],d[6])}}};E.$=function(a,b,c,d,e,f,Be,k){return fe(this.a,a,b,c,d,e,f,Be,k)};E.Y=function(a,b,c,d,e,f){return ge(this.a,a,b,c,d,e,f)};\nE.Aa=function(a){de=a||\"|\"};E.ea=function(){this.set(Cb,[])};E.wa=function(a,b,c,d){var e=this.a;if(0>=a||a>e.get(yb))a=!1;else if(!b||!c||128<b[w]+c[w])a=!1;else{1!=d&&2!=d&&(d=3);var f={};ha(f,b);f.value=c;f.scope=d;e.get(Fb)[a]=f;a=!0}a&&this.a.n();return a};E.ka=function(a){this.a.get(Fb)[a]=void 0;this.a.n()};E.ra=function(a){return(a=this.a.get(Fb)[a])&&1==a[ua]?a[na]:void 0};E.Ca=function(a,b,c){this.m().f(a,b,c)};E.Da=function(a,b,c){this.m().o(a,b,c)};\nE.sa=function(a,b){return this.m().getKey(a,b)};E.ta=function(a,b){return this.m().N(a,b)};E.fa=function(a){this.m().L(a)};E.ga=function(a){this.m().M(a)};E.ja=function(){return new yd};E.W=function(a){a&&this.get(Ab)[n](a[D]())};E.ba=function(){this.set(Ab,[])};E.X=function(a){a&&this.get(Bb)[n](a[D]())};E.ca=function(){this.set(Bb,[])};E.Z=function(a,b,c,d,e){if(a&&b){a=[a,b[D]()][C](\":\");if(d||e)a=[a,d,e][C](\":\");d=this.get(zb);d.splice(c?0:d[w],0,a)}};E.da=function(){this.set(zb,[])};\nE.ha=function(a){this.a[ka]();var b=this.get(P),c=be(this.a);this.set(P,a);this.a.n();ae(this.a,c);this.set(P,b)};E.ya=function(a,b){if(0<a&&5>=a&&Ca(b)&&\"\"!=b){var c=this.get(Fc)||[];c[a]=b;this.set(Fc,c)}};E.V=function(a){a=\"\"+a;if(a[oa](/^[A-Za-z0-9]{1,5}$/)){var b=this.get(Ic)||[];b[n](a);this.set(Ic,b)}};E.v=function(){this.a[ka]()};E.Ba=function(a){a&&\"\"!=a&&(this.set(Tb,a),this.a.j(\"var\"))};var ne=function(a){\"trans\"!==a.get(sc)&&500<=a.b(cc,0)&&a[ta]();if(\"event\"===a.get(sc)){var b=(new Date)[g](),c=a.b(dc,0),d=a.b(Zb,0),c=m[la](1*((b-(c!=d?c:1E3*c))/1E3));0<c&&(a.set(dc,b),a.set(R,m.min(10,a.b(R,0)+c)));0>=a.b(R,0)&&a[ta]()}},pe=function(a){\"event\"===a.get(sc)&&a.set(R,m.max(0,a.b(R,10)-1))};var qe=function(){var a=[];this.add=function(b,c,d){d&&(c=G(\"\"+c));a[n](b+\"=\"+c)};this.toString=function(){return a[C](\"&\")}},re=function(a,b){(b||2!=a.get(xb))&&a.Za(cc)},se=function(a,b){b.add(\"utmwv\",\"5.4.5\");b.add(\"utms\",a.get(cc));b.add(\"utmn\",Ea());var c=J[z].hostname;F(c)||b.add(\"utmhn\",c,!0);c=a.get(vb);100!=c&&b.add(\"utmsp\",c,!0)},te=function(a,b){b.add(\"utmht\",(new Date)[g]());b.add(\"utmac\",Da(a.get(Wa)));a.get(Oc)&&b.add(\"utmxkey\",a.get(Oc),!0);a.get(vc)&&b.add(\"utmni\",1);var c=a.get(Ic);\nc&&0<c[w]&&b.add(\"utmdid\",c[C](\".\"));ff(a,b);!1!==a.get(Xa)&&(a.get(Xa)||M.w)&&b.add(\"aip\",1);1<M.ab()&&b.add(\"utmmt\",1);b.add(\"utmu\",od.Xa())},ue=function(a,b){for(var c=a.get(Fc)||[],d=[],e=1;e<c[w];e++)c[e]&&d[n](e+\":\"+G(c[e][p](/%/g,\"%25\")[p](/:/g,\"%3A\")[p](/,/g,\"%2C\")));d[w]&&b.add(\"utmpg\",d[C](\",\"))},ff=function(a,b){function c(a,b){b&&d[n](a+\"=\"+b+\";\")}var d=[];c(\"__utma\",cd(a));c(\"__utmz\",hd(a,!1));c(\"__utmv\",fd(a,!0));c(\"__utmx\",be(a));b.add(\"utmcc\",d[C](\"+\"),!0)},ve=function(a,b){a.get(ib)&&\n(b.add(\"utmcs\",a.get(Qb),!0),b.add(\"utmsr\",a.get(Lb)),a.get(Rb)&&b.add(\"utmvp\",a.get(Rb)),b.add(\"utmsc\",a.get(Mb)),b.add(\"utmul\",a.get(Pb)),b.add(\"utmje\",a.get(Nb)),b.add(\"utmfl\",a.get(Ob),!0))},we=function(a,b){a.get(lb)&&a.get(Ib)&&b.add(\"utmdt\",a.get(Ib),!0);b.add(\"utmhid\",a.get(Kb));b.add(\"utmr\",Pa(a.get(Jb),a.get(P)),!0);b.add(\"utmp\",G(a.get(Hb),!0),!0)},xe=function(a,b){for(var c=a.get(Db),d=a.get(Eb),e=a.get(Fb)||[],f=0;f<e[w];f++){var Be=e[f];Be&&(c||(c=new yd),c.f(8,f,Be[r]),c.f(9,f,Be[na]),\n3!=Be[ua]&&c.f(11,f,\"\"+Be[ua]))}F(a.get(wc))||F(a.get(xc),!0)||(c||(c=new yd),c.f(5,1,a.get(wc)),c.f(5,2,a.get(xc)),e=a.get(yc),void 0!=e&&c.f(5,3,e),e=a.get(zc),void 0!=e&&c.o(5,1,e));c?b.add(\"utme\",c.Qa(d),!0):d&&b.add(\"utme\",d.A(),!0)},ye=function(a,b,c){var d=new qe;re(a,c);se(a,d);d.add(\"utmt\",\"tran\");d.add(\"utmtid\",b.id_,!0);d.add(\"utmtst\",b.affiliation_,!0);d.add(\"utmtto\",b.total_,!0);d.add(\"utmttx\",b.tax_,!0);d.add(\"utmtsp\",b.shipping_,!0);d.add(\"utmtci\",b.city_,!0);d.add(\"utmtrg\",b.state_,\n!0);d.add(\"utmtco\",b.country_,!0);xe(a,d);ve(a,d);we(a,d);(b=a.get(Gb))&&d.add(\"utmcu\",b,!0);c||(ue(a,d),te(a,d));return d[v]()},ze=function(a,b,c){var d=new qe;re(a,c);se(a,d);d.add(\"utmt\",\"item\");d.add(\"utmtid\",b.transId_,!0);d.add(\"utmipc\",b.sku_,!0);d.add(\"utmipn\",b.name_,!0);d.add(\"utmiva\",b.category_,!0);d.add(\"utmipr\",b.price_,!0);d.add(\"utmiqt\",b.quantity_,!0);xe(a,d);ve(a,d);we(a,d);(b=a.get(Gb))&&d.add(\"utmcu\",b,!0);c||(ue(a,d),te(a,d));return d[v]()},Ae=function(a,b){var c=a.get(sc);if(\"page\"==\nc)c=new qe,re(a,b),se(a,c),xe(a,c),ve(a,c),we(a,c),b||(ue(a,c),te(a,c)),c=[c[v]()];else if(\"event\"==c)c=new qe,re(a,b),se(a,c),c.add(\"utmt\",\"event\"),xe(a,c),ve(a,c),we(a,c),b||(ue(a,c),te(a,c)),c=[c[v]()];else if(\"var\"==c)c=new qe,re(a,b),se(a,c),c.add(\"utmt\",\"var\"),!b&&te(a,c),c=[c[v]()];else if(\"trans\"==c)for(var c=[],d=a.get(Cb),e=0;e<d[w];++e){c[n](ye(a,d[e],b));for(var f=d[e].items_,Be=0;Be<f[w];++Be)c[n](ze(a,f[Be],b))}else\"social\"==c?b?c=[]:(c=new qe,re(a,b),se(a,c),c.add(\"utmt\",\"social\"),\nc.add(\"utmsn\",a.get(Ac),!0),c.add(\"utmsa\",a.get(Bc),!0),c.add(\"utmsid\",a.get(Cc),!0),xe(a,c),ve(a,c),we(a,c),ue(a,c),te(a,c),c=[c[v]()]):\"feedback\"==c?b?c=[]:(c=new qe,re(a,b),se(a,c),c.add(\"utmt\",\"feedback\"),c.add(\"utmfbid\",a.get(Gc),!0),c.add(\"utmfbpr\",a.get(Hc),!0),xe(a,c),ve(a,c),we(a,c),ue(a,c),te(a,c),c=[c[v]()]):c=[];return c},oe=function(a){var b,c=a.get(xb),d=a.get(uc),e=d&&d.Ua,f=0;if(0==c||2==c){var Be=a.get(wb)+\"?\";b=Ae(a,!0);for(var k=0,s=b[w];k<s;k++)Sa(b[k],e,Be,!0),f++}if(1==c||2==\nc)for(b=Ae(a),k=0,s=b[w];k<s;k++)try{Sa(b[k],e),f++}catch(t){t&&Ra(t[r],void 0,t.message)}d&&(d.q=f)};var Ce=function(a){ha(this,\"len\");this.message=a+\"-8192\"},De=function(a){ha(this,\"ff2post\");this.message=a+\"-2036\"},Sa=function(a,b,c,d){b=b||Fa;if(d||2036>=a[w])gf(a,b,c);else if(8192>=a[w]){if(0<=W[za].userAgent[q](\"Firefox\")&&![].reduce)throw new De(a[w]);hf(a,b)||Ee(a,b)}else throw new Ce(a[w]);},gf=function(a,b,c){c=c||(\"https:\"==J[z][A]||M.G?\"https://ssl.google-analytics.com\":\"http://www.google-analytics.com\")+\"/__utm.gif?\";var d=new Image(1,1);d.src=c+a;d.onload=function(){d.onload=null;d.onerror=\nnull;b()};d.onerror=function(){d.onload=null;d.onerror=null;b()}},hf=function(a,b){var c,d=(\"https:\"==J[z][A]||M.G?\"https://ssl.google-analytics.com\":\"http://www.google-analytics.com\")+\"/p/__utm.gif\",e=W.XDomainRequest;if(e)c=new e,c.open(\"POST\",d);else if(e=W.XMLHttpRequest)e=new e,\"withCredentials\"in e&&(c=e,c.open(\"POST\",d,!0),c.setRequestHeader(\"Content-Type\",\"text/plain\"));if(c)return c.onreadystatechange=function(){4==c.readyState&&(b(),c=null)},c.send(a),!0},Ee=function(a,b){if(J.body){a=aa(a);\ntry{var c=J[qa]('<iframe name=\"'+a+'\"></iframe>')}catch(d){c=J[qa](\"iframe\"),ha(c,a)}c.height=\"0\";c.width=\"0\";c.style.display=\"none\";c.style.visibility=\"hidden\";var e=J[z],e=(\"https:\"==J[z][A]||M.G?\"https://ssl.google-analytics.com\":\"http://www.google-analytics.com\")+\"/u/post_iframe.html#\"+aa(e[A]+\"//\"+e[u]+\"/favicon.ico\"),f=function(){c.src=\"\";c.parentNode&&c.parentNode.removeChild(c)};Ga(W,\"beforeunload\",f);var Be=!1,k=0,s=function(){if(!Be){try{if(9<k||c.contentWindow[z][u]==J[z][u]){Be=!0;f();\nHa(W,\"beforeunload\",f);b();return}}catch(a){}k++;ca(s,200)}};Ga(c,\"load\",s);J.body.appendChild(c);c.src=e}else We(function(){Ee(a,b)},100)};var $=function(){this.G=this.w=!1;this.C={};this.D=[];this.U=0;this.S=[[\"www.google-analytics.com\",\"\",\"/plugins/\"]];this._gasoCPath=this._gasoDomain=void 0;Re();Se()};E=$[x];E.oa=function(a,b){return this.r(a,void 0,b)};E.r=function(a,b,c){b&&H(23);c&&H(67);void 0==b&&(b=\"~\"+M.U++);a=new U(b,a,c);M.C[b]=a;M.D[n](a);return a};E.u=function(a){a=a||\"\";return M.C[a]||M.r(void 0,a)};E.pa=function(){return M.D[ja](0)};E.ab=function(){return M.D[w]};E.aa=function(){this.w=!0};E.la=function(){this.G=!0};var Fe=function(a){if(\"prerender\"==J.webkitVisibilityState)return!1;a();return!0};var M=new $;var jf=W._gat;jf&&Ba(jf._getTracker)?M=jf:W._gat=M;var Z=new Y;(function(a){if(!Fe(a)){H(123);var b=!1,c=function(){!b&&Fe(a)&&(b=!0,Ha(J,\"webkitvisibilitychange\",c))};Ga(J,\"webkitvisibilitychange\",c)}})(function(){var a=W._gaq,b=!1;if(a&&Ba(a[n])&&(b=\"[object Array]\"==Object[x][v].call(Object(a)),!b)){Z=a;return}W._gaq=Z;b&&Z[n][ya](Z,a)});function Yc(a){var b=1,c=0,d;if(a)for(b=0,d=a[w]-1;0<=d;d--)c=a.charCodeAt(d),b=(b<<6&268435455)+c+(c<<14),c=b&266338304,b=0!=c?b^c>>21:b;return b};})();\n"}
],
[
{"endColumn":7,"endLine":881,"scriptId":"95","startColumn":2,"startLine":880,"url":"http://www.tumblr.com/dashboard"},{"scriptSource":"(function() {with (this[2]) {with (this[1]) {with (this[0]) {return function(event) {if (this.src.indexOf('_100') != -1) { this.style.backgroundColor = 'transparent'; this.src='http://25.media.tumblr.com/db06d2b9e8c7c9312f6131d1d9f77f4e/tumblr_mq05k6YAxD1qb0n4ho1_500.jpg'; }\n};}}}})"}
],
[
{"endColumn":4,"endLine":1618,"scriptId":"96","startColumn":52,"startLine":1565,"url":"http://www.tumblr.com/dashboard"},{"scriptSource":"\n    var domain = document.domain, \n        photoset_id = '66937518482', \n        photoset_photos_66937518482 = [{\"width\":\"960\",\"height\":\"1169\",\"low_res\":\"http:\\/\\/24.media.tumblr.com\\/92b4810828a06f8e45b19b6083373e50\\/tumblr_mvtnd8Vzki1r6obgro1_500.jpg\",\"high_res\":\"http:\\/\\/24.media.tumblr.com\\/92b4810828a06f8e45b19b6083373e50\\/tumblr_mvtnd8Vzki1r6obgro1_1280.jpg\",\"caption\":\"the book is: Zeus Grants Stupid Wishes: A No-Bullshit Guide to World Mythology\"},{\"width\":\"960\",\"height\":\"1280\",\"low_res\":\"http:\\/\\/31.media.tumblr.com\\/bb4b5736240f9a1979b9a447339dc003\\/tumblr_mvtnd8Vzki1r6obgro2_r1_500.jpg\",\"high_res\":\"http:\\/\\/25.media.tumblr.com\\/bb4b5736240f9a1979b9a447339dc003\\/tumblr_mvtnd8Vzki1r6obgro2_r1_1280.jpg\"},{\"width\":\"960\",\"height\":\"1280\",\"low_res\":\"http:\\/\\/25.media.tumblr.com\\/3f4824d23735febf0b14d5580e9f84df\\/tumblr_mvtnd8Vzki1r6obgro3_r1_500.jpg\",\"high_res\":\"http:\\/\\/24.media.tumblr.com\\/3f4824d23735febf0b14d5580e9f84df\\/tumblr_mvtnd8Vzki1r6obgro3_r1_1280.jpg\"},{\"width\":\"960\",\"height\":\"1280\",\"low_res\":\"http:\\/\\/25.media.tumblr.com\\/ac59224f49bfa01653549c09932bd9b6\\/tumblr_mvtnd8Vzki1r6obgro4_r1_250.jpg\",\"high_res\":\"http:\\/\\/31.media.tumblr.com\\/ac59224f49bfa01653549c09932bd9b6\\/tumblr_mvtnd8Vzki1r6obgro4_r1_1280.jpg\"},{\"width\":\"960\",\"height\":\"1280\",\"low_res\":\"http:\\/\\/25.media.tumblr.com\\/3753e844fbe59aee66ad7c1c6a18a9b9\\/tumblr_mvtnd8Vzki1r6obgro5_r1_250.jpg\",\"high_res\":\"http:\\/\\/25.media.tumblr.com\\/3753e844fbe59aee66ad7c1c6a18a9b9\\/tumblr_mvtnd8Vzki1r6obgro5_r1_1280.jpg\"}];\n        \n    function event_is_alt_key(e) {\n        return (\n            (! e && window.event && (window.event.metaKey || window.event.altKey)) ||\n            (e && (e.metaKey || e.altKey))\n        );\n    };\n    \n            document.getElementById('photoset_link_66937518482_1').onclick = function(e){\n            if (event_is_alt_key(e)) return true;\n            \n            Tumblr.Lightbox.init(\n                photoset_photos_66937518482, 1            );\n            \n            return false;\n        }\n            document.getElementById('photoset_link_66937518482_2').onclick = function(e){\n            if (event_is_alt_key(e)) return true;\n            \n            Tumblr.Lightbox.init(\n                photoset_photos_66937518482, 2            );\n            \n            return false;\n        }\n            document.getElementById('photoset_link_66937518482_3').onclick = function(e){\n            if (event_is_alt_key(e)) return true;\n            \n            Tumblr.Lightbox.init(\n                photoset_photos_66937518482, 3            );\n            \n            return false;\n        }\n            document.getElementById('photoset_link_66937518482_4').onclick = function(e){\n            if (event_is_alt_key(e)) return true;\n            \n            Tumblr.Lightbox.init(\n                photoset_photos_66937518482, 4            );\n            \n            return false;\n        }\n            document.getElementById('photoset_link_66937518482_5').onclick = function(e){\n            if (event_is_alt_key(e)) return true;\n            \n            Tumblr.Lightbox.init(\n                photoset_photos_66937518482, 5            );\n            \n            return false;\n        }\n        \n    "}
],
[
{"endColumn":12,"endLine":1801,"scriptId":"97","startColumn":43,"startLine":1799,"url":"http://www.tumblr.com/dashboard"},{"scriptSource":"\n                add_to_image_queue('sub_avatar_66883324010','http://25.media.tumblr.com/avatar_a963092d964b_30.png','bg');\n            "}
],
[
{"endColumn":12,"endLine":2022,"scriptId":"98","startColumn":43,"startLine":2020,"url":"http://www.tumblr.com/dashboard"},{"scriptSource":"\n                add_to_image_queue('sub_avatar_66878555955','http://31.media.tumblr.com/avatar_cc9a7f0c7047_30.png','bg');\n            "}
],
[
{"endColumn":12,"endLine":2449,"scriptId":"99","startColumn":43,"startLine":2447,"url":"http://www.tumblr.com/dashboard"},{"scriptSource":"\n                add_to_image_queue('sub_avatar_66821626174','http://31.media.tumblr.com/avatar_6534e00d8be2_30.png','bg');\n            "}
],
[
{"endColumn":4,"endLine":2536,"scriptId":"100","startColumn":12,"startLine":2516,"url":"http://www.tumblr.com/dashboard"},{"scriptSource":"\n        if(document.getElementById('high_res_link_66821626174')) {\n            document.getElementById('high_res_link_66821626174').onclick = function(e){\n                // Don't run lightbox on alt-click\n                if (\n                    (!e && window.event && (window.event.metaKey || window.event.altKey)) ||\n                    (e && (e.metaKey || e.altKey))\n                ) {\n                    return true;\n                }\n\n                Tumblr.Lightbox.init([{\n                    high_res: 'http://24.media.tumblr.com/40a84e422e3e5a5a23c4ae37bb7de1a8/tumblr_mw4dpyIvwv1qz8q0ho1_r2_1280.png',\n                    low_res: 'http://24.media.tumblr.com/40a84e422e3e5a5a23c4ae37bb7de1a8/tumblr_mw4dpyIvwv1qz8q0ho1_r2_500.png'                                        ,\n                    width: 898,\n                    height: 449                                    }]);\n\n                return false;\n            };\n        }\n    "}
],
[
{"endColumn":12,"endLine":2930,"scriptId":"101","startColumn":43,"startLine":2928,"url":"http://www.tumblr.com/dashboard"},{"scriptSource":"\n                add_to_image_queue('sub_avatar_66730417875','http://25.media.tumblr.com/avatar_c63edbd16033_30.png','bg');\n            "}
],
[
{"endColumn":1554,"endLine":3117,"scriptId":"102","startColumn":71,"startLine":3117,"url":"http://www.tumblr.com/dashboard"},{"scriptSource":"!function(s){s.src='http://www.tumblr.com/impixu?T=1384691237&J=eyJ0eXBlIjoicG9zdCIsInVybCI6Imh0dHA6XC9cL3d3dy50dW1ibHIuY29tXC9kYXNoYm9hcmQiLCJyZXF0eXBlIjowLCJyb3V0ZSI6IlwvZGFzaGJvYXJkIiwicG9zdHMiOlt7InJvb3RfYmxvZ2lkIjoiMzE2NjU0MiIsInJvb3RfcG9zdGlkIjo1NjU3OTA5ODQ3MSwicG9zdGlkIjo2NzEyNjI2NjM1MSwiYmxvZ2lkIjoiMTc2NTE4MTciLCJzb3VyY2UiOjMyfSx7InJvb3RfYmxvZ2lkIjoiODAzNzYwNyIsInJvb3RfcG9zdGlkIjo2Njc5MTA2NTIwNiwicG9zdGlkIjo2NzAyOTE5NzI2NywiYmxvZ2lkIjoiMTc2NTE4MTciLCJzb3VyY2UiOjMyfSx7InJvb3RfYmxvZ2lkIjoiMjQ0NDYyODIiLCJyb290X3Bvc3RpZCI6NjY4Nzk4NjA0MTAsInBvc3RpZCI6IjY2OTQ5MjUzMzQ1IiwiYmxvZ2lkIjoiMTc2NTE4MTciLCJzb3VyY2UiOjMyfSx7InJvb3RfYmxvZ2lkIjoiMzM5MzE4NzQiLCJyb290X3Bvc3RpZCI6NjYxNTMyNTg1NDIsInBvc3RpZCI6IjY2OTM3NTE4NDgyIiwiYmxvZ2lkIjoiMTc2NTE4MTciLCJzb3VyY2UiOjMyfSx7InJvb3RfYmxvZ2lkIjoiMjY3NDg5Iiwicm9vdF9wb3N0aWQiOiI2MTU5Mjg1MTY2MiIsInBvc3RpZCI6IjY2ODgzMzI0MDEwIiwiYmxvZ2lkIjoiMTg0MzAyIiwic291cmNlIjozMn0seyJwb3N0aWQiOiI2Njg3ODU1NTk1NSIsImJsb2dpZCI6IjE4NDMwMiIsInNvdXJjZSI6MzJ9LHsicG9zdGlkIjoiNjY4NDQzMzMxMzciLCJibG9naWQiOiIxNzY1MTgxNyIsInNvdXJjZSI6MzJ9LHsicG9zdGlkIjoiNjY4MjE2MjYxNzQiLCJibG9naWQiOiIxODQzMDIiLCJzb3VyY2UiOjMyfSx7InBvc3RpZCI6IjY2NzYxNjg5ODE2IiwiYmxvZ2lkIjoiMTc2NTE4MTciLCJzb3VyY2UiOjMyfSx7InBvc3RpZCI6IjY2NzMwNDE3ODc1IiwiYmxvZ2lkIjoiMTg0MzAyIiwic291cmNlIjozMn1dfQ==&U=BCAPPCJNLI&K=31240095638b07a73dc108e6e13768f5bd83e83b3aee01638297def5e2855116&R='.replace(/&R=[^&$]*/,'').concat('&R='+escape(document.referrer)).slice(0,2000).replace(/%.?.?$/,'');}(new Image());"}
],
[
{"endColumn":4,"endLine":3337,"scriptId":"103","startColumn":35,"startLine":3325,"url":"http://www.tumblr.com/dashboard"},{"scriptSource":"\n      var _qevents = _qevents || [];\n\n      (function() {\n       var elem = document.createElement('script');\n\n       elem.src = (document.location.protocol == \"https:\" ? \"https://secure\" : \"http://edge\") + \".quantserve.com/quant.js\";\n       elem.async = true;\n       elem.type = \"text/javascript\";\n       var scpt = document.getElementsByTagName('script')[0];\n       scpt.parentNode.insertBefore(elem, scpt);\n      })();\n    "}
],
[
{"endColumn":4,"endLine":3340,"scriptId":"104","startColumn":35,"startLine":3338,"url":"http://www.tumblr.com/dashboard"},{"scriptSource":"\n        _qevents.push( { qacct: 'p-19UtqE8ngoZbM' } );\n    "}
],
[
{"endColumn":4,"endLine":3351,"scriptId":"105","startColumn":35,"startLine":3345,"url":"http://www.tumblr.com/dashboard"},{"scriptSource":"\n        var _comscore = _comscore || [];\n        _comscore.push(\n            { c1: \"2\", c2: '15742520' }\n        );\n        (function(){ var s = document.createElement(\"script\"), el = document.getElementsByTagName(\"script\")[0]; s.async = true; s.src = (document.location.protocol == \"https:\" ? \"https://sb\" : \"http://b\") + \".scorecardresearch.com/beacon.js\"; el.parentNode.insertBefore(s, el); })();\n    "}
],
[
{"endColumn":422,"endLine":3354,"scriptId":"106","startColumn":35,"startLine":3354,"url":"http://www.tumblr.com/dashboard"},{"scriptSource":"!function(s){s.src='http://www.tumblr.com/impixu?T=1384691237&J=eyJ0eXBlIjoidXJsIiwidXJsIjoiaHR0cDpcL1wvd3d3LnR1bWJsci5jb21cL2Rhc2hib2FyZCIsInJlcXR5cGUiOjAsInJvdXRlIjoiXC9kYXNoYm9hcmQifQ==&U=JCDMGHIPHP&K=b3728cd2f6e6b9cd57db572890dacfd334fd43ab598a6ca54671b4c2a2b520d8&R='.replace(/&R=[^&$]*/,'').concat('&R='+escape(document.referrer)).slice(0,2000).replace(/%.?.?$/,'');}(new Image());"}
],
[
{"endColumn":7,"endLine":1856,"scriptId":"107","startColumn":2,"startLine":1855,"url":"http://www.tumblr.com/dashboard"},{"scriptSource":"(function() {with (this[2]) {with (this[1]) {with (this[0]) {return function(event) {if (this.src.indexOf('_100') != -1) { this.style.backgroundColor = 'transparent'; this.src='http://25.media.tumblr.com/380f66408529894a2760218b573c386b/tumblr_mtbvsiQQP31qzn57yo1_500.gif'; }\n};}}}})"}
],
[
{"endColumn":7,"endLine":2500,"scriptId":"108","startColumn":2,"startLine":2499,"url":"http://www.tumblr.com/dashboard"},{"scriptSource":"(function() {with (this[2]) {with (this[1]) {with (this[0]) {return function(event) {if (this.src.indexOf('_100') != -1) { this.style.backgroundColor = 'transparent'; this.src='http://24.media.tumblr.com/40a84e422e3e5a5a23c4ae37bb7de1a8/tumblr_mw4dpyIvwv1qz8q0ho1_r2_500.png'; }\n};}}}})"}
],
[
{"endColumn":6112,"endLine":21,"scriptId":"109","startColumn":0,"startLine":0,"url":"http://l.yimg.com/ss/rapid-3.9.js"},{"scriptSource":"if(YAHOO===void 0||!YAHOO)var YAHOO={};YAHOO.i13n=YAHOO.i13n||{},YAHOO.i13n.EventTypes=function(){function e(e,t,n){this.yqlid=e,this.eventName=t,this.spaceidPrefix=n}e.prototype={getYQLID:function(){return this.yqlid},getEventName:function(){return this.eventName}};var t={pageview:new e(\"pv\",\"pageview\",\"\"),simple:new e(\"lv\",\"event\",\"P\"),linkview:new e(\"lv\",\"linkview\",\"P\"),richview:new e(\"richview\",\"richview\",\"R\")};return{getEventByName:function(e){return t[e]}}}(),YAHOO.i13n.Rapid=function(e){function t(){}function n(){this.map={},this.count=0}function r(){this.map={},this.count=0}function o(e,t){if(!e)return null;null===t&&(t=!1);var n=new r,o=N.getAttribute(e,N.data_action_outcome);o&&n.set(\"outcm\",o);var i=N.getAttribute(e,\"data-ylk\");if(null===i||0===i.length)return n;for(var a=i.split(N.ylk_pair_delim),u=0,c=a.length;c>u;u++){var s=a[u].split(N.ylk_kv_delim);if(2===s.length){var l=s[0],d=s[1];null!==l&&\"\"!==l&&null!==d&&8>=l.length&&300>=d.length&&(\"_p\"!==l||t)&&n.set(l,d)}}return n}function i(e,t,n){return t>e?t:e>n?n:e}function a(){I.set(\"A_sid\",YAHOO.i13n.A_SID||N.rand()),I.set(\"_w\",N.rmProto(window.location.href)),e.keys&&I.absorb(e.keys)}function u(e){var t=YAHOO.i13n,n=YAHOO.i13n.TEST_ID||e.test_id,r=document.location+\"\";a(),n&&(n=N.norm(\"\"+n));var o=300,u=700,c={version:\"3.9\",keys:I,referrer:N.norm(N.clref(e.referrer||document.referrer)),spaceid:N.norm(YAHOO.i13n.SPACEID||e.spaceid),yrid:N.norm(e.yrid||\"\"),oo:e.oo?\"1\":\"0\",yql_enabled:e.yql_enabled!==!1,ywa:e.ywa||null,ywa_dpid:null,ywa_cf_override:t.YWA_CF_MAP||{},ywa_action_map:t.YWA_ACTION_MAP||{},ywa_outcome_map:t.YWA_OUTCOME_MAP||{},USE_RAPID:e.use_rapid!==!1,linktrack_attribut:e.lt_attr||\"text\",tracked_mods:e.tracked_mods||[],lt_attr:e.lt_attr||\"text\",client_only:e.client_only,text_link_len:e.text_link_len||-1,test_id:n,yql_host:e.yql_host||\"analytics.query.yahoo.com\",yql_path:e.yql_path||\"/v1/public/yql\",compr_timeout:e.compr_timeout||u,compr_on:e.compr_on!==!1,compr_type:e.compr_type||\"deflate\",webworker_file:e.webworker_file||\"rapidworker-1.1.js\",nofollow_classname:e.nofollow_class||\"rapidnofollow\",no_click_listen:e.rapid_noclick_resp||\"rapid-noclick-resp\",nonanchor_track_class:e.nonanchor_track_class||\"rapid-nonanchor-lt\",anc_pos_attr:\"data-rapid_p\",deb:e.debug===!0,ldbg:r.indexOf(\"yhldebug=1\")>0,addmod_timeout:e.addmodules_timeout||300,ult_token_capture:\"boolean\"==typeof e.ult_token_capture?e.ult_token_capture:!1,track_type:e.track_type||\"data-tracktype\",dwell_on:0!=e.dwell_on};c.ywa_action_map[YAHOO.i13n.EventTypes.getEventByName(\"richview\").getEventName()]=100,!c.ywa||c.ywa.project_id&&0!=c.ywa.project_id&&N.isNumeric(c.ywa.project_id)||(d(\"Invalid YWA project id: null or not numeric.\"),c.ywa=null);var s=1*c.compr_timeout;c.compr_timeout=N.isNum(s)?i(s,o,u):u;var l=1*e.click_timeout,f=300;return c.click_timeout=N.isNum(l)&&f>=l&&l>=150?l:f,c}function c(){I.set(\"A_sid\",N.rand())}function s(){return\"Rapid-\"+L.version+\"(\"+(new Date).getTime()+\"):\"}function l(e){console.warn(\"RAPID WARNING: \"+e)}function d(e){console.error(\"RAPID ERROR: \"+e)}function f(e){L.ldbg&&console.log(s()+e)}function m(){var e=document.cookie,t=!1;if(this.cookieMap={},/[^=]+=[^=;]?(?:; [^=]+=[^=]?)?/.test(e))for(var n=e.split(/;\\s/g),r=null,o=null,i=null,a=0,u=n.length;u>a;a++){if(i=n[a].match(/([^=]+)=/i),i instanceof Array)try{r=N.dec(i[1]),o=N.dec(n[a].substring(i[1].length+1))}catch(c){d(c)}else r=N.dec(n[a]),o=r;\"B\"===r||\"BX\"===r||L.ywa&&r===\"fpc\"+L.ywa.project_id||\"D\"===r?this.cookieMap[r]=o:0===r.indexOf(\"ywadp\")&&(L.ywa_dpid=o,t=!0)}if(!t&&L.ywa){var s=\"ywadp\"+L.ywa.project_id,l=_();L.ywa_dpid=l,h(s,l,31536e4),this.cookieMap[s]=l}}function v(){if(L.ult_token_capture&&YAHOO.i13n.__handled_ult_tokens__!==!0){YAHOO.i13n.__handled_ult_tokens__=!0;var e=window.document.location+\"\";if(e.match(/;_yl[a-z]{1}=/))L.ldbg&&f(\"Found ULT Token on URL.\"),Y.sendGeoT(e);else{var t=new m,n=t.getCookieByName(\"D\");n&&(document.cookie=\"D= ; path=/; Expires=Thu, 01 Jan 1970 00:00:00 GMT; Domain=.yahoo.com;\",Y.sendGeoT(n))}}}function p(){return Math.floor((new Date).valueOf()/1e3)}function h(e,t,n){var r=new Date,o=\"\";r.setTime(r.getTime()+1e3*n),o=\"; expires=\"+r.toGMTString();var i=e+\"=\"+t+o+\"; path=/\";document.cookie=i}function _(){return\"\"+Math.floor(4294967295*Math.random())}function y(){function e(e){var t=\"cf\";return t+=10>e&&\"0\"!==(\"\"+e).charAt(0)?\"0\"+e:e}function t(){void 0!==window.ITTs&&N.isArr(window.ITTs)&&0!==window.ITTs.length||(window.ITTs=[{}]),window.ITTs[0].setFPCookies||(window.ITTs[0].setFPCookies=function(){h(\"fpc\"+L.ywa.project_id,window.ITTs[0].FPCV,31536e3)})}function r(e,t,n,r){L.ldbg&&f(e);var o=new Image,i=null;o.onload=o.onabort=o.onerror=function(){t&&n?t[n]=1:r&&(clearTimeout(i),r.call(null))},o.src=e,r&&(i=setTimeout(function(){r.call(null)},L.click_timeout)),setTimeout(function(){o=null},1e5)}function o(e,t){for(var n in e)if(N.hasOwn(e,n)){var r=L.ywa_cf_override[n];r&&(t[r]=e[n])}}function i(n,r,i,a,u,c,s){function l(e,t){var n=t?\"%3B\":\";\";return e+(i?n+e:\"\")}var f=new m,v=f.getYWAFPC();a=a||{},\"c\"!==n&&t();var h=[N.curProto(),L.ywa.host||\"a.analytics.yahoo.com\",\"/\",\"p\"===n?\"fpc.pl\":\"p.pl\",\"?\"],_=L.ywa.project_id,y=L.ywa.document_group,g={};L.test_id&&(g[\"14\"]=L.test_id);var w=[\"_cb=\"+N.rand(),\".ys=\"+L.spaceid,\"a=\"+_,\"b=\"+N.enc(L.ywa.document_name||document.title),\"d=\"+N.enc(new Date),\"f=\"+N.enc(window.location.href),\"j=\"+N.sr(\"x\"),\"k=\"+N.cold(),\"t=\"+p(),\"l=true\"];if(s)for(var b in s)N.hasOwn(s,b)&&w.push(b+\"=\"+N.enc(s[b]));if(y&&\"\"!==y&&w.push(\"c=\"+N.enc(y)),L.ywa_dpid&&w.push(\"dpid=\"+L.ywa_dpid),\"c\"===n){a.x=12;var A=\"12\";i&&(A=N.enc(A+\";\"+i)),w.splice(0,0,\"x=\"+A)}else\"e\"===n&&w.push(\"x=\"+r+(i?\";\"+i:\"\"));v&&w.push(\"fpc=\"+N.enc(v));var E=L.ywa.member_id;E&&w.push(\"m=\"+E),\"\"!==L.referrer&&w.push(\"e=\"+N.enc(L.referrer)),o(c||k().getAll(),g),\"e\"===n&&u&&o(u,g);var T=L.ywa.cf;N.aug(g,T,function(e){return!N.isResCF(e)});for(var C in g)N.hasOwn(g,C)&&w.push(e(C)+\"=\"+l(N.enc(g[C]),1));if((\"e\"===n||\"c\"===n)&&w.push(\"ca=1\"),\"c\"===n)for(var O in a)if(N.hasOwn(a,O)&&\"x\"!==O){var P=a[O];try{P=N.enc(l(P))}catch(D){d(D)}w.push(e(O)+\"=\"+P)}return h.join(\"\")+w.join(\"&\")}function a(){return\"rapid_if_\"+N.rand()}function u(e){var t=\"display:none;\";!N.isIE||6!==N.ieV&&7!==N.ieV&&8!==N.ieV?N.sa(e,\"style\",t):e.style.setAttribute(\"cssText\",t,0)}function c(e){var t=null;if(N.isIE&&8>=N.ieV){var n=\"\";N.isSecure()&&6==N.ieV&&(n='src=\"https://geo.yahoo.com/b.html\"'),t=document.createElement(\"<iframe \"+n+' name=\"'+e+'\"></iframe>')}else t=document.createElement(\"iframe\");return t.name=e,t}function s(){setTimeout(function(){var e=c(\"\");N.addEvent(e,\"load\",function(){N.rmBodyEl(e)}),N.appBodyEl(e)},1)}function l(e,t){var n=null,r=N.make(\"form\"),o=N.make(\"input\"),i=a(),l=a(),d=\"application/x-www-form-urlencoded;charset=UTF-8\";n=c(i),u(n),u(r),r.id=l,r.method=\"POST\",r.action=v(t),r.target=i,N.isIE&&7>=N.ieV?r.setAttribute(\"enctype\",d):(r.setAttribute(\"enctype\",d),r.setAttribute(\"encoding\",d)),o.name=\"q\",o.value=e,N.isIE&&N.ieV>=10&&(o.type=\"submit\"),r.appendChild(o);var m=\"load\",p=function(){var e=\"\";if(L.ldbg&&(!N.isIE||N.ieV>=9)){var t=n.contentDocument||n.contentWindow.document;e=t.body.innerHTML}N.rmEvent(n,m,p),setTimeout(function(){N.rmBodyEl(n),N.rmBodyEl(r)},0),L.ldbg&&f(\"iframe resp: \"+e),N.isIE&&7>=N.ieV&&s()};N.addEvent(n,m,p),N.appBodyEl(n),N.appBodyEl(r),r.submit()}function v(e){var t=L.deb,n=N.rand(),r=[N.curProto(),L.yql_host,L.yql_path,\"?format=json&yhlVer=2&yhlClient=rapid&yhlS=\",L.spaceid,t===!0?\"&yhlEnv=staging\":\"\",t===!0||L.ldbg?\"&debug=true&diagnostics=true\":\"\",\"&yhlCT=2&yhlBTMS=\",(new Date).valueOf(),\"&yhlClientVer=\",L.version,\"&yhlRnd=\",n,\"&yhlCompressed=\",e||0].join(\"\");return L.ldbg&&f(r),r}function _(e,t){var n=N.getXHR(),r=v(t);n.open(\"POST\",r,!0),n.withCredentials=!0,n.setRequestHeader(\"Content-Type\",\"application/x-www-form-urlencoded; charset=UTF-8\"),L.ldbg&&(n.onreadystatechange=function(){4===n.readyState&&f(n.status+\":xhr response: \"+n.responseText)}),n.send(e)}function y(e,t,n){var r={};return N.isObj(e)?(N.aug(r,e,n),r):r}function g(e,t){var n={m:N.norm(e.moduleName),l:[]};e.moduleYLK&&(n.ylk=e.moduleYLK.getAll());for(var r=e.links,o=function(e){var n=\"_p\"===e;return t&&n?!0:\"sec\"!==e&&!n},i=0,a=r.length;a>i;i++)n.l.push(y(r[i],t,o));return n}function w(e,t){var n=[],r=null;for(var o in e)if(N.hasOwn(e,o)&&(r=e[o])){var i=g(r,t);i.l.length>0?n.push(i):L.ldbg&&f('Not capturing 0 links mod: \"'+r.moduleName+'\"')}return n}function b(e,t){return e?\"pv\":t&&t.event?t.event.type.getYQLID():\"lv\"}function A(e,t,n,r,o){return[{t:b(t,o),s:L.spaceid,pp:k(t,r).getAll(),_ts:p(),lv:w(e,n)}]}function k(e,t){var r=n.makeFromPP(L.keys);return r.absorb(t),e&&r.set(\"A_\",1),r}function E(e,t,n){var r=\"INSERT INTO data.track2 (trackdata) VALUES ('\";return r+=e,r+=\"')\",(t?\"q=\":\"\")+(n?N.enc(r):r)}function T(e){var t={bp:V(),r:e.call(0),yrid:L.yrid,optout:L.oo};return N.toJSON(t)}function C(e,t,n){var r={};n.event&&N.aug(r,n.event.data);var o=T(function(){return A([e],t,!0,r,n)});D(o,t)}function O(e,t,n,r){var o=T(function(){return A(e,t,!1,n,r)});D(o)}function P(e){return e.identifier}function D(e){function t(e,t){0===t&&(e=e.replace(/'/g,\"\\\\'\")),r&&f(\"body: \"+e),N.hasCORS()?(o=E(e,!0,!0),_(o,t)):(o=E(e,0,0),l(o,t))}function n(){u||(u=!0,t(e,0),r&&f(\"sent in failSend\"))}var r=L.ldbg,o=\"\",i=S[L.compr_type];if(L.compr_on&&N.hasWorkers()&&i>1&&e.length>2048){r&&f(\"Looking for worker:\"+L.webworker_file+\", compr timeout:\"+L.compr_timeout);var a=new Worker(L.webworker_file),u=!1,c=null,s=0;a.onerror=function(e){clearTimeout(c),n(),d(e.message),a.terminate()},a.onmessage=function(n){clearTimeout(c);var o=N.tms();u||(u=!0,t(n.data,i)),r&&f(\"Ratio (\"+n.data.length+\"/\"+e.length+\"): \"+(100*n.data.length/e.length).toFixed(2)+\"% -> C_T: \"+(o-s)+\" ms (\"+o+\"-\"+s+\")\"),a.terminate()},r&&f(\"posting to worker: \"+e),s=N.tms(),a.postMessage({type:i,json:e}),c=setTimeout(function(){n(),a.terminate()},L.compr_timeout)}else t(e,0)}function M(e,t){return N.curProto()+j+\"/\"+e+[\"?s=\"+L.spaceid,\"t=\"+N.rand()+\",\"+Math.random(),\"_I=\"+L.yrid,\"_AO=\"+L.oo,\"_R=\"+N.enc(L.referrer),(\"c\"===e?\"_K=\":\"_P=\")+x(t)].join(\"&\")}function x(e){var t=new n;return t.absorb(V(!1)),t.absorb(L.keys.getAll()),e&&(e instanceof n?t.absorb(e.getAll()):d(\"Internal error in buildGeoPP: not PP type\")),L.version+\"%05\"+t.ser()}function I(e){var t=[M(\"c\")+\"&_C=\"+N.ser(e.data)];return t.join(\"&\")}function R(e,t){var n=e[t];return n&&N.isNum(n)&&n>=0?n:null}function Y(e){var t=N.getAttribute(e,N.DATA_ACTION),n=N.getAttribute(e,N.data_action_outcome);return null!==t?R(L.ywa_action_map,t):null!==n?R(L.ywa_outcome_map,n):null}var j=YAHOO.i13n.beacon_server||\"geo.yahoo.com\",V=function(){var e={_pl:1,A_v:L.version},t=!1;return function(n){if(t)return e;t=!0;var r=L.referrer;return r&&n!==!1&&(e._R=r),L.test_id&&(e.test=L.test_id),e._bt||(e._bt=\"rapid\"),e}}(),q=function(){var e=null,t=[],n=0,r=L.addmod_timeout;return function(o,i,a,u){clearTimeout(e);var c=+new Date-n;if(t=N.uniqConcat(t,o,P),c>r)n=+new Date,O(t,i,a,u),t=[];else{var s=r-c;e=setTimeout(function(){L.ldbg&&f(\"queueing send in addMods\"),O(t,i,a,u),t=[]},s)}}}();return{sendGeoT:function(e){var t=[N.curProto(),j,\"/t?\",e].join(\"\");r(t)},sendGeoPV:function(){r(M(\"b\"))},sendRapidNoDelay:function(e,t,o,i){if(L.yql_enabled)O(e,t,o,i);else{var a=null;o&&(a=new n,a.absorb(o)),r(M(t?\"b\":\"p\",a))}},sendRapid:function(e,t,n,r){q(e,t,n,r)},sendRefreshedContent:C,sendYWAEvent:function(e){var t=null,n=null,o=e.name;L.ywa_action_map&&o&&(t=R(L.ywa_action_map,o)),null!==t&&(L.ywa_outcome_map&&e.outcome&&(n=R(L.ywa_outcome_map,e.outcome)),r(i(\"e\",t,n,null,e.data)))},sendEvents:function(e){if(L.USE_RAPID){var t=M(\"p\")+N.cd+N.ser(e.data);e.type&&(t+=\"&_V=\"+e.type.spaceidPrefix),r(t)}L.ywa&&this.sendYWAEvent(e)},sendClick:function(e){var t=null,n=\"\",a=\"\",u=null,c=!1,s=null;if(L.USE_RAPID&&(n=I(e)),L.ywa){var l=e.data,d=e.targetElement,f={18:l.sec,19:l.slk,20:l._p};u=d?Y(d):R(L.ywa_outcome_map,e.outcome),L.ywa_cf_override&&o(l,f),a=i(\"c\",0,u,f)}if(!e.synch)return n&&r(n),a&&r(a),void 0;if(N.prevDef(e.event),t=function(){if(!c){c=!0;var t=e.targetElement.href;e.hasTargetTop?top.document.location=t:document.location=t}},L.USE_RAPID)if(L.ywa){var m=new Image,v=new Image,p=0;m.onload=m.onerror=m.onabort=v.onload=v.onerror=v.onabort=function(){2===++p&&(clearTimeout(s),t())},m.src=n,v.src=a,s=setTimeout(t,L.click_timeout),setTimeout(function(){m=null,v=null},1e5)}else r(n,0,0,t);else L.ywa&&r(a,0,0,t)},sendYWAPV:function(e){function t(){r[0].removeChild(a)}var n=i(\"p\",0,0,0,0,e),r=document.getElementsByTagName(\"head\"),o=\"true\";if(0!==r.length){var a=N.make(\"script\",{defer:o,async:o,type:\"text/javascript\",src:n});N.isIE?a.onreadystatechange=function(){var e=this.readyState;(\"loaded\"===e||\"complete\"===e)&&(a.onload=a.onreadystatechange=null,t())}:N.isWebkit?a.addEventListener(\"load\",t):a.onload=t,r[0].appendChild(a)}},sendYWAECommerce:function(e,t){var n={},o={PRODUCT_VIEW:1,ADD_TO_CART:1,CANCELLED_SALE:1,PENDING_SALE:1,SALE:1},a={amount:\"xa\",orderId:\"oc\",tax:\"xt\",shipping:\"xs\",discount:\"xd\",sku:\"p\",units:\"q\",amounts:\"r\"};if(!(e in o))return d(\"invalid YWA ecommerce action: \"+e),void 0;for(var u in t)if(N.hasOwn(t,u)&&u in a){var c=a[u];n[c]=t[u]}var s=i(\"e\",e,null,null,null,null,n);r(s)}}}function g(e,t,n,r){r.setAttribute(L.anc_pos_attr,n);var i=N.getLT(r,e),a=null;i&&\"\"!==i?a=o(r):i=\"_ELINK_\";var u={sec:t,_p:n,slk:i};return null!==a&&N.aug(u,a.getAll()),u}function w(){var e={};return{addModule:function(t,n){e[N.norm(t)]=n},addModules:function(e){var t=N.isArr(e),n=[];t||N.isStr(e)&&(e=Array(e),t=!0);for(var r in e)if(N.hasOwn(e,r)){var o=t?e[r]:r,i=N.trim(e[r]);if(this.exists(o))d('addModules() called with prev processed id:\"'+o+'\"');else{var a=D(i,o);a&&(this.addModule(o,a),n.push(a))}}return n},getModules:function(){return e},refreshModule:function(t,n,r,o){var i=e[N.norm(t)];i?i.refreshModule(t,n,r,o):d(\"refreshModule called on unknown section: \"+i)},removeModule:function(t){var n=e[N.norm(t)];n&&(n.removeHandlers(),delete e[t])},destroy:function(){for(var t in e)N.hasOwn(e,t)&&this.removeModule(t);e={}},exists:function(t){return e[N.norm(t)]}}}function b(e,t){return N.hasClass(e,\"rapid_track_href\")?\"href\":N.hasClass(e,\"rapid_track_text\")?\"text\":N.hasClass(e,\"rapid_track_title\")?\"title\":N.hasClass(e,\"rapid_track_id\")?\"id\":t}function A(e){return\"input\"===e.nodeName.toLowerCase()&&\"submit\"===N.getAttribute(e,\"type\")}function k(e,t){var n=C(e,t);n&&Y.sendClick(n)}function E(e,t,n){var r=N.getAttribute;return t.target&&\"_blank\"===t.target.toLowerCase()||2===e.which||4===e.button||e.altKey||e.ctrlKey||e.shiftKey||e.metaKey||\"on\"===r(t,\"data-nofollow\")||r(t,\"href\")&&\"javascript:\"===r(t,\"href\").substr(0,11).toLowerCase()||N.hasClass(t,L.nofollow_classname)||N.hasClass(n,L.nofollow_classname)}function T(e,t,n,r){n=n||{};var o=null;return e?(o=YAHOO.i13n.EventTypes.getEventByName(e),n._E=o.getEventName(),t=n._E):n._E=t||\"_\",r&&(n.outcm=r),{type:o,name:t,data:n,outcome:r}}function C(e,t){e=e||event;for(var n=N.getTarget(e),r=\"button\",i=\"input\",a=\"\",u=!1,c=null;n&&(a=n.nodeName.toLowerCase())&&\"a\"!==a&&a!==r&&!A(n)&&!N.hasClass(n,L.nonanchor_track_class);)n=n.parentNode;if(!n||N.hasClass(n,L.no_click_listen))return 0;if(N.hasClass(n,L.nonanchor_track_class)){c={pos:0,sec:t.moduleName,slk:\"_\"};var s=o(n,1);s&&N.aug(c,s.getAll())}else{var l=N.getAttribute(n,L.anc_pos_attr);if(c=t.getLinkAtPos(l),!c)return 0;a===i||a===r||E(e,n,t.moduleElement)||(u=!0)}if(!c.tar){var d=N.getAttribute(n,\"href\");d&&(c.tar=N.extDomain(d)),d&&c.tar||(c.tar=N.extDomain(window.document.location+\"\"))}var f=t.moduleYLK;if(f){var m=f.getAll();N.aug(c,m,function(e){return!(e in c)})}return c.A_xy=N.xy(e),c.A_sr=N.sr(),{data:c,event:e,moduleElement:t.moduleElement,targetElement:n,synch:u,hasTargetTop:n&&n.target&&\"_top\"===n.target.toLowerCase()}}function O(e,t,n,r,o){var i={};return N.aug(i,r),i.sec=e,i.slk=t,i._p=n,{data:i,outcome:o,event:null,moduleElement:null,targetElement:null,synch:!1,hasTargetTop:!1}}function P(e,t,n){t||(t=document);for(var r=e.split(\",\"),o=[],i=0,a=r.length;a>i;i++)for(var u=t.getElementsByTagName(r[i]),c=0,s=u.length;s>c;c++){var l=u[c];(!n||n.call(0,l))&&o.push(l)}var d=o[0];return d?(d.sourceIndex?o.sort(function(e,t){return e.sourceIndex-t.sourceIndex}):d.compareDocumentPosition&&o.sort(function(e,t){return 3-(6&e.compareDocumentPosition(t))}),o):[]}function D(e,t){function n(t,n){var r=[];n=n||1;for(var o=0,i=t.length;i>o;o++){var a=g(s,e,n++,t[o]);u.push(a),r.push(a)}return r}var r=document.getElementById(t),i=\"a,button,input\";if(!r)return l(\"Specified module not in DOM: \"+t),null;var a=o(r),u=[],c=P(i,r),s=b(r,L.lt_attr),d=c.length,m=N.getAttribute(r,L.track_type);n(c);var v={moduleYLK:a,links:u,moduleName:e,trackType:m,moduleElement:r,refreshModule:function(e,t,r,o){var a=P(i,document.getElementById(e),function(e){return!N.getAttribute(e,L.anc_pos_attr)});if(t===!0||a.length>0){var u=n(a,d+1);if(d+=a.length,L.USE_RAPID||o.event){var c={};N.aug(c,this),c.links=u,(t===!0||r)&&Y.sendRefreshedContent(c,t,o)}}else N.ldbg&&f(\"refreshModule(\"+e+\") - no new links.\");t===!0&&L.ywa&&Y.sendYWAPV()},removeHandlers:function(){N.rmEvent(r,\"click\",p)},getLinkAtPos:function(e){return e>u.length?null:u[e-1]},identifier:t},p=function(e){k(e,v)};return N.addEvent(r,\"click\",p),v}function M(){v(),L.ldbg&&f(\"tracked_mods: \"+N.fData(L.tracked_mods));var e=R.addModules(L.tracked_mods);L.USE_RAPID&&Y.sendRapidNoDelay(e,1==L.client_only),L.ywa&&Y.sendYWAPV()}function x(e){var t=navigator.userAgent,n=Object.prototype,r=t.match(/MSIE\\s[^;]*/)?1:0,o=/KHTML/.test(t)?1:0,i=RegExp(/\\ufeff|\\uffef|[\\u0000-\\u001f]/g),a=RegExp(/[\\u007f-\\u00a0]|\\s{2,}/g),u=\"http://\",c=\"https://\",s=\"class\",l=\" \",f=-1,m=\"https:\"===window.location.protocol;return r&&(f=parseFloat(navigator.appVersion.split(\"MSIE\")[1])),{ca:\"%01\",cb:\"%02\",cc:\"%03\",cd:\"%04\",ce:\"%05\",cf:\"%06\",cg:\"%07\",ch:\"%08\",ylk_kv_delim:e.ylk_kv_delim||\":\",ylk_pair_delim:e.ylk_pair_delim||\";\",DATA_ACTION:\"data-action\",data_action_outcome:\"data-action-outcome\",isIE:r,isWebkit:o,ieV:f,hasOwn:function(e,t){return n.hasOwnProperty.call(e,t)},enc:encodeURIComponent,dec:decodeURIComponent,curProto:function(){return m?c:u},isSecure:function(){return m},strip:function(e){for(var t={\"/\":\"P\",\";\":\"1\",\"?\":\"P\",\"&\":\"1\",\"#\":\"P\"},n={url:e,clean:\"\",cookie:\"\",keys:[]},r=0;-1!==e.indexOf(\"_yl\",r);){var o=e.indexOf(\"_yl\",r);if(o>r&&(n.clean+=e.slice(r,o-1)),r=o+3,t[e.charAt(o-1)]&&\"=\"===e.charAt(o+4)){n.ult=1;var i=\"_yl\"+e.charAt(o+3),a=\"\";for(o+=5;e.length>o&&!t[e.charAt(o)];o++)a+=e.charAt(o);n.keys.push(i),n[i]=a,\"_ylv\"!==i&&(n.cookie+=\"&\"+i+\"=\"+a),t[e.charAt(o)]&&\"P\"===t[e.charAt(o)]&&(n.clean+=e.charAt(o)),r=o+1}else n.clean+=e.slice(o-1,r)}return n.ult&&(n.cookie=n.cookie.substr(1),n.clean+=e.substr(r),\"0\"===n._ylv),n},prevDef:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},appBodyEl:function(e){document.body.appendChild(e)},rmBodyEl:function(e){document.body.removeChild(e)},sa:function(e,t,n){e.setAttribute(t,n)},make:function(e,t){var n=document.createElement(e);if(t&&this.isObj(t))for(var r in t)this.sa(n,r,t[r]);return n},getXHR:function(){function e(){for(var e=!1,n=t.length,r=0;n>r;r++){try{e=t[r]()}catch(o){continue}break}return e}var t=[function(){return new XMLHttpRequest},function(){return new ActiveXObject(\"Msxml2.XMLHTTP\")},function(){return new ActiveXObject(\"Msxml3.XMLHTTP\")},function(){return new ActiveXObject(\"Microsoft.XMLHTTP\")}];return e()},hasCORS:function(){return r&&10>f?!1:\"withCredentials\"in new XMLHttpRequest?!0:\"undefined\"!=typeof XDomainRequest?!0:!1},hasWorkers:function(){return!!window.Worker},uniqConcat:function(e,t,n){function r(e){for(var t=0,r=e.length;r>t;t++){var a=e[t];if(a){var u=n(a);i[u]||(i[u]=1,o.push(a))}}}var o=[],i={};return r(e),r(t),o},trim:function(e){return e?e.replace(/^\\s\\s*/,\"\").replace(/\\s\\s*$/,\"\"):e},extDomain:function(e){var t=e.match(/^https?\\:\\/\\/([^\\/?#]+)(?:[\\/?#]|$)/i);return t&&t[1]},getAttribute:function(e,t){var n=\"\";return document.documentElement.hasAttribute||t!==s||(t=\"className\"),e&&e.getAttribute&&(n=e.getAttribute(t,2)),n},isDate:function(e){return\"[object Date]\"===n.toString.call(e)},isArr:function(e){return\"[object Array]\"===n.toString.apply(e)},isStr:function(e){return\"string\"==typeof e},isNum:function(e){return\"number\"==typeof e&&isFinite(e)},isNumeric:function(e){return e-0==e&&(e+\"\").replace(/^\\s+|\\s+$/g,\"\").length>0},isObj:function(e){return e&&\"object\"==typeof e},rTN:function(e){try{if(e&&3===e.nodeType)return e.parentNode}catch(t){d(t)}return e},getTarget:function(e){var t=e.target||e.srcElement;return this.rTN(t)},addEvent:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent(\"on\"+t,n)},rmEvent:function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent(\"on\"+t,n)},aug:function(e,t,n){if(t)for(var r in t)if(this.hasOwn(t,r)){if(n&&!n.call(null,r))continue;e[r]=t[r]}},rmProto:function(e){return e?e.substr(0,7)===u?e.substr(7,e.length):e.substr(0,8)===c?e.substr(8,e.length):e:\"\"},norm:function(e){return null===e?\"\":(e=\"\"+e,this.trim(e.replace(a,\" \").replace(i,\"\")))},_hasClass:function(e,t){var n,r=!1;return e&&t&&(n=this.getAttribute(e,s)||\"\",r=t.exec?t.test(n):t&&(l+n+l).indexOf(l+t+l)>-1),r},hasClass:function(e,t){if(this.isArr(t)){for(var n=0,r=t.length;r>n;n++)if(this._hasClass(e,t[n]))return!0;return!1}return this.isStr(t)?this._hasClass(e,t):!1},quote:function(e){var t=/[\"\\\\\\x00-\\x1f\\x7f-\\x9f]/g,n={\"\\b\":\"\\\\b\",\"\t\":\"\\\\t\",\"\\n\":\"\\\\n\",\"\\f\":\"\\\\f\",\"\\r\":\"\\\\r\",'\"':'\\\\\"',\"\\\\\":\"\\\\\\\\\"},r='\"',o='\"';if(e.match(t)){var i=e.replace(t,function(e){var t=n[e];return\"string\"==typeof t?t:(t=e.charCodeAt(),\"\\\\u00\"+Math.floor(t/16).toString(16)+(e%16).toString(16))});return r+i+r}return o+e+o},/* @license\nCopyright 2013 jQuery Foundation and other contributors\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n */\nsfy:function(e){if(!e&&\"\"!==e)return{};var t,n=typeof e;if(\"undefined\"===n)return\"undefined\";if(\"number\"===n||\"boolean\"===n)return\"\"+e;if(\"string\"===n)return this.quote(e);if(\"function\"==typeof e.toJSON)return this.sfy(e.toJSON());if(this.isDate(e)){var r=e.getUTCMonth()+1,o=e.getUTCDate(),i=e.getUTCFullYear(),a=e.getUTCHours(),u=e.getUTCMinutes(),c=e.getUTCSeconds(),s=e.getUTCMilliseconds();return 10>r&&(r=\"0\"+r),10>o&&(o=\"0\"+o),10>a&&(a=\"0\"+a),10>u&&(u=\"0\"+u),10>c&&(c=\"0\"+c),100>s&&(s=\"0\"+s),10>s&&(s=\"0\"+s),'\"'+i+\"-\"+r+\"-\"+o+\"T\"+a+\":\"+u+\":\"+c+\".\"+s+'Z\"'}if(t=[],this.isArr(e)){for(var l=0,d=e.length;d>l;l++)t.push(this.sfy(e[l]));return\"[\"+t.join(\",\")+\"]\"}if(\"object\"===n){for(var f in e)if(this.hasOwn(e,f)){var m=typeof f,v=null;if(\"string\"===m)v=this.quote(f);else{if(\"number\"!==m)continue;v='\"'+f+'\"'}if(m=typeof e[f],\"function\"!==m&&\"undefined\"!==m){var p=\"\";p=null===e[f]?'\"\"':0===e[f]?0:this.sfy(e[f]),t.push(v+\":\"+p)}}return\"{\"+t.join(\",\")+\"}\"}},toJSON:function(){var e=null;return function(t){return e||(e=\"object\"==typeof JSON&&JSON.stringify&&6!==f&&7!==f&&8!==f?JSON.stringify:this.sfy),e.call(this,t)}}(),getLinkContent:function(e){for(var t,n=0,r=\"\";(t=e.childNodes[n])&&t;n++)1===t.nodeType&&(\"img\"===t.nodeName.toLowerCase()&&(r+=(this.getAttribute(t,\"alt\")||\"\")+\" \"),r+=this.getLinkContent(t));return r},fData:function(e){return this.isStr(e)?e:this.toJSON(e)},getLT:function(e,t){if(!e)return\"_\";var n=\"\";return t=t.toLowerCase(),n=\"input\"===e.nodeName.toLowerCase()?this.getAttribute(e,\"value\"):\"text\"===t?o?e.textContent:e.innerText?e.innerText:e.textContent:\"href\"===t?this.rmProto(this.getAttribute(e,\"href\")):this.getAttribute(e,t)||\"\",n=this.norm(n),\"\"===n&&(n=this.norm(this.getLinkContent(e)),n||(n=this.norm(this.rmProto(this.getAttribute(e,\"href\"))))),\"\"===n?\"_\":n},clref:function(e){if(0!==e.indexOf(u)&&0!==e.indexOf(c))return\"\";var t=this.strip(e);return t.clean||t.url},cold:function(){return screen?screen.colorDepth||screen.pixelDepth:\"unknown\"},sr:function(e){return screen?screen.width+(e?e:\",\")+screen.height:\"\"},xy:function(e){function t(){var e=document.documentElement,t=document.body;return e&&(e.scrollTop||e.scrollLeft)?[e.scrollTop,e.scrollLeft]:t?[t.scrollTop,t.scrollLeft]:[0,0]}var n=null,o=e.pageX,i=e.pageY;return r&&(n=t()),o||0===o||(o=e.clientX||0,r&&(o+=n[1])),i||0===i||(i=e.clientY||0,r&&(i+=n[0])),o+\",\"+i},hasCC:function(e){for(var t=0,n=e.length;n>t;t++){var r=e.charCodeAt(t);if(32>r||\"=\"===r)return!0}return!1},ser:function(e,t){if(!e)return\"\";void 0===typeof t&&(t=!0);var n=[],r=\"\";for(var o in e)if(this.hasOwn(e,o)){var i=o,a=e[o];if(null===i||null===a)continue;if(i+=\"\",a+=\"\",8>=i.length&&300>=a.length&&!this.hasCC(i)&&!this.hasCC(a)){r=\"\",a=this.trim(a),\"\"!==a&&\" \"!==a||!t||(a=\"_\");try{r=this.enc(i+\"\u0003\"+a)}catch(u){r=\"_ERR_ENCODE_\",d(u)}n.push(r)}}return n.join(this.cd)},rand:function(){for(var e=0,t=\"\",n=\"\";16>e++;){var r=Math.floor(62*Math.random());n=10>r?r:String.fromCharCode(36>r?r+55:r+61),t+=n}return t},tms:function(){return+new Date},isResCF:function(e){var t={14:1,18:1,19:1,20:1};return t[e]}}}(\"undefined\"==typeof console||console.log===void 0)&&(console={log:function(){}}),console.error===void 0&&(console.error=console.log),console.warn===void 0&&(console.warn=console.log),t.prototype={ser:function(){return N.ser(this.map)},set:function(e,t){var n=t?N.norm(t):t;n=n||\"\",n=n.replace(/\\\\/g,\"\\\\\\\\\"),this.map[N.norm(e)]=n,this.count++},getAll:function(){return this.map},absorb:function(e){for(var t in e)N.hasOwn(e,t)&&this.set(t,e[t])},getSize:function(){return this.count}},n.prototype=new t,n.prototype.constructor=t,r.prototype=new t,r.prototype.constructor=t,n.makeFromPP=function(e){var t=new n;return e&&t.absorb(e.getAll()),t};var I=new n,N=x(e),R=new w,S={none:0,gzip:1,lzw:2,deflate:3};m.prototype={getYWAFPC:function(){if(!L.ywa)return null;var e=this.cookieMap[\"fpc\"+L.ywa.project_id];return e?e:null},getCookieByName:function(e){return this.cookieMap[e]}};var L=u(e),Y=y();return M(),{init:function(){},beaconEvent:function(e,t,n){L.ldbg&&f('beaconEvent: event=\"'+e+'\" data='+N.fData(t)+\" outcome=\"+n);var r=T(0,e,t,n);Y.sendEvents(r)},beaconRichView:function(e,t){L.ldbg&&f(\"beaconRichView: outcome=\"+t);var n=T(\"richview\",\"\",e,t);Y.sendEvents(n)},beaconClick:function(e,t,n,r,o){!r&&o&&(r={}),o&&(r.outcm=o),Y.sendClick(O(e,t,n,r,o))},addModules:function(e,t,n){L.ldbg&&f(\"addModules() called: mods=\"+N.fData(e)+\" isPage: \"+t);var r={A_am:1};if(n=n||{},!L.yql_enabled)return t?this.beaconPageview(r):n.event&&this.beaconRichView(r,n.event.outcome),void 0;n&&n.event&&t&&(d(\"Cannot track event type and pageview at same time.\"),n.event=null);var o=R.addModules(e);(0!==o.length||n.event)&&((L.USE_RAPID||n.event)&&(t||n.event?(n.event&&n.event.data&&N.aug(r,n.event.data),Y.sendRapidNoDelay(o,t,r,n)):Y.sendRapid(o,t,r,n)),t===!0&&L.ywa&&Y.sendYWAPV())},addModulesAsRichView:function(e,t){var n=T(\"richview\",\"\",{},t),r=!0;this.addModules(e,!1,{event:n}),L.yql_enabled||(r=!1),L.ywa&&r&&Y.sendYWAEvent(n)},refreshModule:function(e,t,n,r){if(L.ldbg&&f(\"refreshModule called: mod=\"+e+\" isPV: \"+t+\" sendLinks: \"+n+\" options: \"+N.fData(r)),r=r||{},!L.yql_enabled)return t?this.beaconPageview({}):r.event&&this.beaconRichView({},r.event.outcome),void 0;var o=n===!1?!1:!0;t&&r&&r.event&&(r.event=null),R.refreshModule(e,t,o,r)},refreshModuleAsRichView:function(e,t){var n=T(\"richview\",\"\",{},t),r=!0;this.refreshModule(e,!1,!0,{event:n}),L.yql_enabled||(r=!1),L.ywa&&r&&Y.sendYWAEvent(n)},removeModule:function(e){R.removeModule(e)},isModuleTracked:function(e){return L.ldbg&&f(\"isTracked called: \"+e),R&&void 0!==R.exists(e)},destroy:function(){f(\"destroy called\"),R.destroy()},reInit:function(e){return L.ldbg&&f(\"reInit called with: \"+N.fData(e)),e=e||{},e.spaceid?(L=u(e),N=x(e),void 0):(d(\"Invalid spid in reInit config: \"+N.fData(e)),void 0)},beaconPageview:function(e){if(L.ldbg&&f(\"beaconPageview called, pp=\"+N.fData(e)),c(),L.USE_RAPID&&Y.sendRapidNoDelay([],!0,e),L.ywa){var t=n.makeFromPP(L.keys);t.absorb(e),Y.sendYWAPV(t.getAll())}},beaconECommerce:function(e,t){L.ywa&&Y.sendYWAECommerce(e,t)}}};"}
],
[
{"endColumn":16,"endLine":3364,"scriptId":"110","startColumn":24,"startLine":3356,"url":"http://www.tumblr.com/dashboard"},{"scriptSource":"\n                    (function(YAHOO) {\n                        if (YAHOO) {\n                            YAHOO.i13n.beacon_server = 'nol.yahoo.com';\n                            var keys = { pd:'/dashboard', _li:1, i_rad:0, i_strm:0 };\n                            YAHOO.rapid = new YAHOO.i13n.Rapid({spaceid:1197719223, oo:1, client_only:1, yql_enabled:false, keys:keys});\n                        }\n                    })(window.YAHOO);\n                "}
],
[
{"endColumn":0,"endLine":3369,"scriptId":"111","startColumn":8,"startLine":3367,"url":"http://www.tumblr.com/dashboard"},{"scriptSource":"\n    Tumblr.ASK_CHARACTER_LIMIT = 500;\n"}
],
[
{"endColumn":12,"endLine":3440,"scriptId":"112","startColumn":20,"startLine":3431,"url":"http://www.tumblr.com/dashboard"},{"scriptSource":"\n                if(document.addEventListener) {\n                    document.addEventListener('DOMContentLoaded', function() {\n                        var mode = 'index';\n                        Tumblr.PostForms.initialize({mode: mode});\n                    }, false);\n                } else {\n                   // IE (less than 9) gets old post forms\n                }\n            "}
],
[
{"endColumn":0,"endLine":3502,"scriptId":"113","startColumn":8,"startLine":3443,"url":"http://www.tumblr.com/dashboard"},{"scriptSource":"\n\nvar __ = (function() {\n\n    var translation = {\n        // General words\n        \"Dismiss\": 'Dismiss',\n        \"Text\": 'Text',\n        \"Photo\": 'Photo',\n        \"Quote\": 'Quote',\n        \"Link\": 'Link',\n        \"Chat\": 'Chat',\n        \"Audio\": 'Audio',\n        \"Video\": 'Video',\n        // General form errors\n        \"Cancel editing this post? All changes will be lost.\": 'Cancel editing this post?  All changes will be lost.',\n        \"You must agree that you have permission to share this file.\": 'You must agree that you have permission to share this file.',\n        \"Please wait for the upload to complete.\": 'Please wait for the upload to complete.',\n        \"Post cannot be empty.\": 'Post cannot be empty.',\n        \"You have an unsaved post.\": 'You have an unsaved post.',\n        \"Are you sure you want to change post type? All changes will be lost.\": 'Are you sure you want to change post type? All changes will be lost.',\n        // No file errors\n        \"Please choose an image before continuing.\": 'Please choose an image before continuing.',\n        \"Please choose a video source before continuing.\": 'Please choose a video source before continuing.',\n        \"Please choose an audio source before continuing.\": 'Please choose an audio source before continuing.',\n        // File size errors\n        \"File is too big.\": 'File is too big.',\n        \"File is too big. Max 10MB.\": 'File is too big. Max 10MB.',\n        \"File is too big. Max 100MB.\": 'File is too big. Max 100MB.',\n        // File type errors\n        \"Filetype is not allowed.\": 'Filetype is not allowed.',\n        \"Only image files are allowed.\": 'Only image files are allowed.',\n        \"Only audio files are allowed.\": 'Only audio files are allowed.',\n        \"Only video files are allowed.\": 'Only video files are allowed.',\n        // Video-specific errors\n        \"Video is too long. Must be 5 minutes or less.\": 'Video is too long. Must be 5 minutes or less.',\n        \"Video preview not available.\": 'Video preview not available.',\n        \"Sorry, we don't recognize that video service. Please use their embed code instead.\": 'Sorry, we don\\'t recognize that video service. Please use their embed code instead.',\n        // Photo errors\n        \"Error loading image from url\": 'Error loading image from url',\n        \"You can only upload up to 10 photos. Please remove some if you want to add more\" : 'You can only upload up to 10 photos. Please remove some if you want to add more',\n        // Delete\n        \"Delete this post?\" : 'Delete this post?',\n        \"Upload Image\" : 'Upload Image'    };\n\n    return function(string) {\n        return translation[string] || string;\n    };\n\n})();\n\nTumblr.USER_TAGS = ['dotnet','MongoDB'];\n\n    Tumblr.use_link_opengraph = true;\n\n    Tumblr.use_spotify_metadata = true;\n\n    Tumblr.use_search_endpoint = true;\n\n"}
],
[
{"endColumn":0,"endLine":46,"scriptId":"114","startColumn":0,"startLine":0,"url":"http://edge.quantserve.com/quant.js"},{"scriptSource":"/* Copyright (c) 2008-2013, Quantcast Corp. */\nif(!__qc){var __qc={qs:'quantserve.com',ql:'quantcount.com',pixelcalls:[],pmto:null,pmc:undefined,qcdst:function(){if(__qc.qctzoff(0)!=__qc.qctzoff(6))return 1;return 0;},qctzoff:function(m){var d1=new Date(2000,m,1,0,0,0,0);var t=d1.toGMTString();var d3=new Date(t.substring(0,t.lastIndexOf(\" \")-1));return d1-d3;},qceuc:function(s){if(typeof(encodeURIComponent)=='function'){return encodeURIComponent(s);}\nelse{return escape(s);}},qcrnd:function(){return Math.round(Math.random()*2147483647);},qcgc:function(n){var v='';var c=document.cookie;if(!c)return v;var i=c.indexOf(n+\"=\");var len=i+n.length+1;if(i>-1){var end=c.indexOf(\";\",len);if(end<0)end=c.length;v=c.substring(len,end);}\nreturn v;},qcdomain:function(){var d=document.domain;if(d.substring(0,4)==\"www.\")d=d.substring(4,d.length);var a=d.split(\".\");var len=a.length;if(len<3)return d;var e=a[len-1];if(e.length<3)return d;d=a[len-2]+\".\"+a[len-1];return d;},qhash2:function(h,s){for(var i=0;i<s.length;i++){h^=s.charCodeAt(i);h+=(h<<1)+(h<<4)+(h<<7)+(h<<8)+(h<<24);}\nreturn h;},qhash:function(s){var h1=0x811c9dc5,h2=0xc9dc5118;var hash1=__qc.qhash2(h1,s);var hash2=__qc.qhash2(h2,s);return(Math.round(Math.abs(hash1*hash2)/65536)).toString(16);},sd:[\"4dcfa7079941\",\"127fdf7967f31\",\"588ab9292a3f\",\"32f92b0727e5\",\"22f9aa38dfd3\",\"a4abfe8f3e04\",\"18b66bc1325c\",\"958e70ea2f28\",\"bdbf0cb4bbb\",\"65118a0d557\",\"40a1d9db1864\",\"18ae3d985046\",\"3b26460f55d\"],qcsc:function(){var s=\"\";var d=__qc.qcdomain();if(__qc.qad==1)return\";fpan=u;fpa=\";var qh=__qc.qhash(d);for(var i=0;i<__qc.sd.length;i++){if(__qc.sd[i]==qh)return\";fpan=u;fpa=\";}\nvar u=document;var a=__qc.qcgc(\"__qca\");if(a.length>0){s+=\";fpan=0;fpa=\"+a;}\nelse{var da=new Date();var db=new Date(da.getTime()+47335389000);a='P0-'+__qc.qcrnd()+'-'+da.getTime();u.cookie=\"__qca=\"+a+\"; expires=\"+db.toGMTString()+\"; path=/; domain=\"+d;a=__qc.qcgc(\"__qca\");if(a.length>0){s+=\";fpan=1;fpa=\"+a;}\nelse{s+=\";fpan=u;fpa=\";}}\nreturn s;},qcdc:function(n){document.cookie=n+\"=; expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/; domain=\"+__qc.qcdomain();},qpxload:function(img){if(img&&typeof(img.width)==\"number\"&&img.width==3){__qc.qcdc(\"__qca\");}},qcdnt:function(){var ipf=false;if(typeof(window.external)!=='undefined'&&window.external!==null){var we=window.external;ipf=(typeof we.InPrivateFilteringEnabled==='function'&&we.InPrivateFilteringEnabled()===true);}\nreturn(ipf||navigator.doNotTrack===\"1\"||navigator.doNotTrack===\"yes\"||navigator.msDoNotTrack===\"1\");},qcp:function(p,myqo){var s='',a=null;uh=null;var media='webpage',event='load';if(myqo!=null){for(var k in myqo){if(typeof(k)!='string'){continue;}\nif(typeof(myqo[k])!='string'){continue;}\nif(k=='uid'||k=='uh'){if(__qc.qcdnt()===false){uh=__qc.qhash(myqo[k]);}\ndelete myqo[k];continue;}\nif(k=='qacct'){a=myqo[k];continue;}\ns+=';'+k+p+'='+__qc.qceuc(myqo[k]);if(k=='media'){media=myqo[k];}\nif(k=='event'){event=myqo[k];}}}\nif(typeof a!=\"string\"){if((typeof _qacct==\"undefined\")||(_qacct.length==0))return'';a=_qacct;}\nif(typeof uh==='string'){myqo['uh']=uh;s+=';uh'+p+'='+__qc.qceuc(uh);}\nif(media=='webpage'&&event=='load'){for(var i=0;i<__qc.qpixelsent.length;i++){if(__qc.qpixelsent[i]==a)return'';}\n__qc.qpixelsent.push(a);}\nif(media=='ad'){__qc.qad=1;}\ns=';a'+p+'='+a+s;return s;},qcesc:function(s){return s.replace(/\\./g,'%2E').replace(/,/g,'%2C');},qcd:function(o){return(typeof(o)!=\"undefined\"&&o!=null);},qcogl:function(){var m=document.getElementsByTagName('meta');var o='';for(var i=0;i<m.length;i++){if(o.length>=1000)return o;if(__qc.qcd(m[i])&&__qc.qcd(m[i].attributes)&&__qc.qcd(m[i].attributes.property)&&__qc.qcd(m[i].attributes.property.value)&&__qc.qcd(m[i].content)){var p=m[i].attributes.property.value;var c=m[i].content;if(p.length>3&&p.substring(0,3)=='og:'){if(o.length>0)o+=',';var l=(c.length>80)?80:c.length;o+=__qc.qcesc(p.substring(3,p.length))+'.'+__qc.qcesc(c.substring(0,l));}}}\nreturn __qc.qceuc(o);},qchcr:function(e){if(e.source!==window.top){return;}\nvar params=null;try{params=(typeof JSON==='object')&&JSON.parse(e.data);}catch(e){}\nif(params&&typeof params.PrivacyManagerAPI==='object'){clearTimeout(__qc.pmto);if(window.removeEventListener){window.removeEventListener('message',__qc.qchcr,false);}\nelse if(window.detachEvent){window.detachEvent('onmessage',__qc.qchcr);}\n__qc.pmc=params.PrivacyManagerAPI;__qc.firepixels();}},qccfp:function(action,type){__qc.pmc=PrivacyManagerAPI.callApi(action,__qc.qs,__qc.qcdomain(),\"truste.com\",type);__qc.firepixels();},qcctp:function(action,type){var params={PrivacyManagerAPI:{timestamp:new Date().getTime(),action:action,self:__qc.qs,domain:__qc.qcdomain(),authority:\"truste.com\",type:type}};if(window.addEventListener){window.addEventListener('message',__qc.qchcr,false);}\nelse if(window.attachEvent){window.attachEvent('onmessage',__qc.qchcr);}\nelse{__qc.pmc=true;__qc.firepixels();return;}\ntry{window.top.postMessage(JSON.stringify(params),\"*\");}\ncatch(e){}\n__qc.pmto=setTimeout(function(){if(__qc.pmc===undefined){__qc.pmc=true;__qc.firepixels();}},25);},qc_consent:function(action,type){if(__qc.pmc===undefined){if(window.top===window.self){if(typeof PrivacyManagerAPI==='object'&&typeof PrivacyManagerAPI.callApi==='function'){__qc.qccfp(action,type);return;}}\nelse if(!!window.postMessage&&typeof JSON==='object'){__qc.qcctp(action,type);return;}\n__qc.pmc=true;}\n__qc.firepixels();},qctv:function(cm_consent){var cmv='';if(typeof cm_consent==='object'){cmv='p';cmv+=cm_consent.consent==='approved'?'a':'d';cmv+=cm_consent.source==='asserted'?'e':'i';}\nreturn cmv;},qcenqp:function(qoptions){var e=(typeof(encodeURIComponent)=='function')?\"n\":\"s\";var r=__qc.qcrnd();var sr='',qo='',qm='',url='',ref='',je='u',ns='1';var qocount=0;__qc.qad=0;if(typeof __qc.qpixelsent==\"undefined\"){__qc.qpixelsent=new Array();}\nif(typeof qoptions!=\"undefined\"&&qoptions!=null){__qc.qopts=qoptions;for(var k in __qc.qopts){if(typeof(__qc.qopts[k])=='string'){qo=__qc.qcp(\"\",__qc.qopts);break;}else if(typeof(__qc.qopts[k])=='object'&&__qc.qopts[k]!=null){++qocount;qo+=__qc.qcp(\".\"+qocount,__qc.qopts[k]);}}}else if(typeof _qacct==\"string\"){qo=__qc.qcp(\"\",null);}\nif(qo.length==0)return;var ce=(navigator.cookieEnabled)?\"1\":\"0\";if(typeof navigator.javaEnabled!='undefined')je=(navigator.javaEnabled())?\"1\":\"0\";if(typeof _qmeta!=\"undefined\"&&_qmeta!=null){qm=';m='+__qc.qceuc(_qmeta);_qmeta=null;}\nif(self.screen){sr=screen.width+\"x\"+screen.height+\"x\"+screen.colorDepth;}\nvar d=new Date();var dst=__qc.qcdst();var fp=__qc.qcsc();if(window.location&&window.location.href)url=__qc.qceuc(window.location.href);if(window.document&&window.document.referrer)ref=__qc.qceuc(window.document.referrer);if(self==top)ns='0';var ogl=__qc.qcogl();var p1='/pixel;r='+r+qo+fp+';ns='+ns+';ce='+ce;var p2=';je='+je+';sr='+sr+';enc='+e+';dst='+dst+';et='+d.getTime()+';tzo='+d.getTimezoneOffset()+qm+';ref='+ref+';url='+url+';ogl='+ogl;__qc.pixelcalls.push({p1:p1,p2:p2});__qc.firepixels();},fire:function(o){var src='http';if(window.location.protocol=='https:'){src+='s';}\nsrc+='://pixel.';src+=(__qc.pmc===true||__qc.pmc.consent==='approved')?__qc.qs:__qc.ql;src+=o.p1;src+=';cm='+__qc.qctv(__qc.pmc);src+=o.p2;var img=new Image();img.alt='';img.src=src;img.onload=function(){__qc.qpxload(img);};},firepixels:function(){if(__qc.pmc){while(__qc.pixelcalls.length){__qc.fire(__qc.pixelcalls.shift());}}else{__qc.qc_consent('getConsent','advertising');}},quantserve:function(){if(typeof _qevents=='undefined'){_qevents=[];}\nif(typeof _qoptions!=\"undefined\"&&_qoptions!=null){__qc.qcenqp(_qoptions);_qoptions=null;}else if(!_qevents.length&&typeof _qacct!=\"undefined\"){__qc.qcenqp(null);}\nif(!__qc.evts){for(var k in _qevents){__qc.qcenqp(_qevents[k]);}\n_qevents={push:function(){var a=arguments;for(var i=0;i<a.length;i++){__qc.qcenqp(a[i]);}}};__qc.evts=1;}}};}\nfunction quantserve(){__qc.quantserve();}\nquantserve();\n"}
],
[
{"endColumn":0,"endLine":7,"scriptId":"115","startColumn":0,"startLine":0,"url":"http://b.scorecardresearch.com/beacon.js"},{"scriptSource":"function udm_(a,b){var c=\"comScore=\",d=document,e=d.cookie,f=\"\",g=\"indexOf\",h=\"substring\",i=\"length\",j=2048,k,l=\"&ns_\",m=\"&\",n,o,p,q,r=window,s=r.encodeURIComponent||escape;if(e[g](c)+1)for(p=0,o=e.split(\";\"),q=o[i];p<q;p++)n=o[p][g](c),n+1&&(f=m+unescape(o[p][h](n+c[i])));a+=l+\"_t=\"+ +(new Date)+l+\"c=\"+(d.characterSet||d.defaultCharset||\"\")+\"&c8=\"+s(d.title)+f+\"&c7=\"+s(d.URL)+\"&c9=\"+s(d.referrer),a[i]>j&&a[g](m)>0&&(k=a[h](0,j-8).lastIndexOf(m),a=(a[h](0,k)+l+\"cut=\"+s(a[h](k+1)))[h](0,j)),d.images?(n=new Image,r.ns_p||(ns_p=n),typeof b==\"function\"&&(n.onload=n.onerror=b),n.src=a):d.write(\"<\",\"p\",\"><\",'img src=\"',a,'\" height=\"1\" width=\"1\" alt=\"*\"',\"><\",\"/p\",\">\")}typeof _comscore==\"undefined\"&&(_comscore=[]),function(){var a=\"length\",b=self,c=b.encodeURIComponent?encodeURIComponent:escape,d=\".scorecardresearch.com\",e=\"//app\"+d+\"/s2e/invite\",f=Math,g=\"script\",h=\"width\",i=/c2=(\\d*)&/,j,k=function(b){if(!!b){var e,f=[],g,h=0,i,j,k=\"\";for(var l in b){g=typeof b[l];if(g==\"string\"||g==\"number\")f[f[a]]=l+\"=\"+c(b[l]),l==\"c2\"?k=b[l]:l==\"c1\"&&(h=1)}if(f[a]<=0||k==\"\")return;j=b.options||{},j.d=j.d||document;if(typeof j.url_append==\"string\"){i=j.url_append.replace(/&amp;/,\"&\").split(\"&\");for(var l=0,n=i[a],o;l<n;l++)o=i[l].split(\"=\"),o[a]==2&&(f[f[a]]=o[0]+\"=\"+c(o[1]))}e=[\"http\",j.d.URL.charAt(4)==\"s\"?\"s://sb\":\"://b\",d,\"/b?\",h?\"\":\"c1=2&\",f.join(\"&\").replace(/&$/,\"\")],udm_(e.join(\"\"),function(){m(this,j)})}},l=function(b){b=b||_comscore;for(var c=0,d=b[a];c<d;c++)k(b[c]);b=_comscore=[]},m=function(a,b){if(!(a.src.indexOf(\"c1=2\")<0||!b.d.createElement))if(b.force_script_extension||a[h]==2&&a.height>f.round(f.random()*100)){var c=b.d.createElement(g),d=b.d.getElementsByTagName(g)[0],j=[b.script_extension_url||e,\"?\",\"c2=\",a.src.match(i)[1]].join(\"\");d&&(c.src=j,c.async=!0,d.parentNode.insertBefore(c,d))}};l(),(j=b.COMSCORE)?(j.purge=l,j.beacon=k):COMSCORE={purge:l,beacon:k}}()\n\n\n\n\n\n\r\n"}
],
[
{"endColumn":0,"endLine":4401,"scriptId":"116","startColumn":31,"startLine":4399,"url":"http://www.tumblr.com/dashboard"},{"scriptSource":"\n    Tumblr.video_regexes = {\"youtube\\\\.com\\/watch.*[\\\\?|\\\\&]v=([a-z0-9-_]+)\":\"youtube\",\"youtube\\\\.com\\/(?:v|video)\\/([a-z0-9-_]+)\":\"youtube\",\"youtube\\\\.com\\/e\\/([a-z0-9-_]+)\":\"youtube\",\"youtube\\\\.com.*[\\\\?|\\\\&]v=([a-z0-9-_]+)\":\"youtube\",\"youtu\\\\.be\\/([a-z0-9-_]+)\":\"youtube\",\"youtube\\\\.com\\/embed\\/([a-z0-9-_]+)\":\"youtube\",\"video\\\\.google\\\\.com\\/googleplayer\\\\.swf\\\\?docId=([0-9:]+)\":\"google\",\"video\\\\.google\\\\.com\\/videoplay\\\\?docid=([0-9:]+)\":\"google\",\"vimeo\\\\.com\\/moogaloop\\\\.swf\\\\?clip_id=([0-9]+)\":\"vimeo\",\"vimeo\\\\.com\\/groups\\/[^\\/]+\\/videos\\/([0-9]+)\":\"vimeo\",\"vimeo\\\\.com\\/channels\\/[^\\/]+[\\/|\\\\#]([0-9]+)\":\"vimeo\",\"vimeo\\\\.com\\/([0-9]+)\":\"vimeo\",\"player\\\\.vimeo\\\\.com\\/video\\/([0-9]+)\":\"vimeo\",\"vimeo\\\\.com\\/ondemand\\/[^\\/]+\\/([0-9]+)\":\"vimeo\",\"metacafe\\\\.com\\/fplayer\\/([0-9]+)\":\"metacafe\",\"metacafe\\\\.com\\/watch\\/([0-9]+)\":\"metacafe\",\"metacafe\\\\.com\\/embed\\/([0-9]+)\":\"metacafe\",\"funnyordie\\\\.com\\/videos\\/([a-z0-9]+)\":\"funny_or_die\",\"funnyordie\\\\.com\\/embed\\/([a-z0-9]+)\":\"funny_or_die\",\"player\\\\.ordienetworks\\\\.com\\/flash\\/fodplayer\\\\.swf.*key=([a-z0-9]+)\":\"funny_or_die\",\"dailymotion\\\\.com\\/video\\/([a-z0-9]+)\":\"dailymotion\",\"dailymotion\\\\.com\\/swf\\/video\\/([a-z0-9]+)\":\"dailymotion\",\"dailymotion\\\\.com\\/embed\\/video\\/([a-z0-9]+)\":\"dailymotion\",\"blip\\\\.tv\\/play\\/episode\\/([a-zA-Z0-9-_\\\\+]+)\":\"blip\",\"blip\\\\.tv\\/play\\/([a-zA-Z0-9-_\\\\+]+)\":\"blip\",\"blip\\\\.tv\\/([a-zA-Z0-9-]+\\/[a-zA-Z0-9-_\\\\+]+)\":\"blip\",\"collegehumor\\\\.com\\/video\\/([0-9]+)\":\"collegehumor\",\"collegehumor\\\\.com\\/e\\/([0-9]+)\":\"collegehumor\",\"collegehumor\\\\.cvcdn\\\\.com\\/moogaloop.*clip_id=([0-9]+)\":\"collegehumor\",\"hulu\\\\.com\\/embed\\/([a-zA-Z0-9-_]+)\":\"hulu_eid\",\"hulu\\\\.com\\/embed\\\\.html.*[\\\\?\\\\&]?eid=([a-zA-Z0-9-_]+)\":\"hulu_eid\",\"videofy\\\\.me\\/[a-zA-Z0-9]+\\/([0-9]+)\":\"videofy\",\"jest\\\\.com\\/video\\/([0-9]+)\":\"jest\",\"jest\\\\.com\\/embed\\/([0-9]+)\":\"jest\",\"jest\\\\.com\\/e\\/([0-9]+)\":\"jest\",\"jest\\\\.cvcdn\\\\.com\\/moogaloop.*clip_id=([0-9+]+)\":\"jest\",\"coub\\\\.com\\/view\\/([a-zA-Z0-9]+)\":\"coub\",\"coub\\\\.com\\/embed\\/([a-zA-Z0-9]+)\":\"coub\",\"viddler\\\\.com\\/([a-zA-Z0-9-_\\\\+]+)\":\"viddler\",\"viddler\\\\.com\\/embed\\/([a-zA-Z0-9-_\\\\+]+)\":\"viddler\",\"vevo\\\\.com\\/embed\\/Embedded\\\\?videoId\\\\=([a-zA-Z0-9-_\\\\+]+)\":\"vevo\",\"vevo\\\\.com\\/watch\\/[^\\\\\\/]+\\/[^\\\\\\/]+\\/([a-zA-Z0-9-_\\\\+]+)(?:\\\\\\/.*)?\":\"vevo\",\"screen\\\\.yahoo\\\\.com\\/(?:.*\\\\\\/)?([a-zA-Z0-9-_\\\\+]+).html\":\"yahoo\",\"(?:sports|news|shine|sports|music|tv|omg|finance)\\\\.yahoo\\\\.com\\\\\\/(?:video\\\\\\/)([a-zA-Z0-9-_\\\\+]+).html\":\"yahoo\"};\n"}
],
[
{"endColumn":0,"endLine":4646,"scriptId":"117","startColumn":39,"startLine":4627,"url":"http://www.tumblr.com/dashboard"},{"scriptSource":"\n\n    var dialog_translations = {\n        'OK': 'OK',\n        'Cancel': 'Cancel',\n        'Nevermind': 'Nevermind',\n        'Ignore': 'Ignore', \n        'Unfollow': 'Unfollow', \n        'Confirm_Unfollow': 'Are you sure you want to unfollow %1$s?'    };\n\n    jQuery(document).ready(function($){\n\n        // Add translations to Tumblr.Dialog\n        if (_.isObject(Tumblr.Dialog)) {\n            Tumblr.Dialog.add_translations(dialog_translations);\n        }\n        \n    });\n    \n"}
],
[
{"endColumn":1421,"endLine":0,"scriptId":"118","startColumn":0,"startLine":0,"url":"http://assets.tumblr.com/assets/scripts/follow_list.js?_v=72ecdf5a71b21f70aea5e370819611f1"},{"scriptSource":"(function(d,a){var c=Backbone.View.extend({events:{\"click .show_more\":\"show_more\",\"mouseenter .follow\":\"control_hover_in\",\"mouseleave .follow\":\"control_hover_out\",},initialize:function(){var f=this.collection=new Backbone.Collection();var e=this.subViews=[];_.forEach(this.$(\"li.item\"),function(j){var k=d(j).data();var h=(k&&k.json)||{};var g=new Tumblr.Models.Tumblelog(h);f.add(g);var i=new b({el:j,model:g}).render();e.push(i);j.removeAttribute(\"data-json\")},this)},show_more:function(f){this.$(\".item.last\").removeClass(\"last\");this.$(\".item\").last().addClass(\"after_showing\");this.$(\".item.hidden\").removeClass(\"hidden\");d(f.currentTarget).hide();return false},control_hover_in:function(){this.$el.addClass(\"control_hover\")},control_hover_out:function(){this.$el.removeClass(\"control_hover\")}});var b=Backbone.View.extend({events:{\"click .follow\":\"follow\"},initialize:function(){this.$button=this.$(\".follow\");this.followSource=this.$button.data(\"follow-source\");this.listenTo(this.model,\"change:following\",this.render)},follow:function(){this.model.save_following({following:true,source:this.followSource}).fail(function(){alert(l10n_str.ajax_error)});return false},render:function(){this.$button.toggle(!this.model.get(\"following\"));return this}});a.FollowList=c;a.FollowListItem=b})(jQuery,Tumblr);jQuery(document).ready(function(a){a(\".control_follow_list\").each(function(c,b){new Tumblr.FollowList({el:b})})});"}
],
[
{"endColumn":2705,"endLine":0,"scriptId":"119","startColumn":0,"startLine":0,"url":"http://assets.tumblr.com/assets/scripts/fullsize_photo_slideshow.js?_v=89eadbf27a1bd46f7c0345c6dee35a74"},{"scriptSource":"(function(b,a){var c=Backbone.View.extend({initialize:function(d){this.options=d||{};this.slides=this.options.slideshow_items||[];this.root=b(this.options.slideshow_container)||b(\"#rad_slideshow\"),this.interval=this.options.interval||3000,this.display_badge=this.options.display_badge||false,this.display_like_and_reblog=this.options.display_like_and_reblog||false,this.current_slide=false;this.next_slide=false;this.count=false;if(!this.slides.length){return}this.start_slideshow()},create_slide:function(){var d,e,h,g,f;d=b('<div class=\"slide\" />');h=b('<a class=\"source\" />');if(this.display_badge){e=b('<div class=\"radar_badge\" />');d.append(e)}if(this.display_like_and_reblog){g=b('<a class=\"reblog reblog_button\" />');f=b('<a class=\"like\" />');d.append(g);d.append(f)}d.append(h);return d},update_slide:function(f,d){if(!d){return false}var i=f.find(\".source\"),g=f.find(\".like\"),h=f.find(\".reblog\"),e=f.find(\".radar_badge\");if(typeof(d.photo_url)!==\"undefined\"){f.css({\"background-image\":\"url(\"+d.photo_url+\")\"})}if(d.source_url!==undefined){i.attr(\"href\",d.source_url);i.attr(\"target\",\"_new\");if(d.trackable_url!==undefined){i.attr(\"onclick\",d.trackable_url)}if(d.source_label!==undefined){i.html(d.source_label||\"Source\")}}if(this.display_badge){e.addClass(d.radar_badge_class||\"radar_badge\")}if(this.display_like_and_reblog){if(d.like_url!==undefined){g.attr(\"href\",d.like_url)}if(d.like_url===\"#like\"){g.off(\"click.NerdSlideshow\").on(\"click.NerdSlideshow\",function(j){j.preventDefault();var k=(!d.like_state)?\"like\":\"unlike\";Tumblr[k]({id:d.post_id,key:d.reblog_key},{complete:function(){b(\"#rad_slideshow_like_\"+d.post_id).toggleClass(\"red\");d.like_state=!d.like_state}})})}g.attr({id:\"rad_slideshow_like_\"+d.post_id,\"class\":(d.like_state===true)?\"like red like_button\":\"like like_button\"}).html(d.like_label||\"Like\");if(d.reblog_url!==undefined){h.html(d.reblog_label||\"Reblog\");h.attr(\"href\",d.reblog_url)}}},transition:function(){b(this.current_slide).fadeOut(function(f){if(this.next_slide){this.next_slide.css({zIndex:1})}if(this.current_slide){this.current_slide.css({zIndex:0}).show()}var d=this.next_slide;this.next_slide=this.current_slide;this.current_slide=d;var e=this.slides[count%this.slides.length];this.update_slide(this.next_slide,e);count++;setTimeout(_.bind(this.transition,this),this.interval)}.bind(this))},start_slideshow:function(){this.current_slide=this.create_slide();this.root.append(this.current_slide);this.update_slide(this.current_slide,this.slides[0]);if(this.slides.length>1){this.next_slide=this.create_slide();this.root.append(this.next_slide);this.update_slide(this.next_slide,this.slides[1]);count=2;this.transition()}}});a.NerdSlideshow=c})(jQuery,Tumblr);"}
],
[
{"endColumn":2898,"endLine":0,"scriptId":"120","startColumn":0,"startLine":0,"url":"http://assets.tumblr.com/assets/scripts/radar.js?_v=7ffc18e0899e645009144e33e5d60f02"},{"scriptSource":"(function(c,b){var a=Backbone.View.extend({el:\"#tumblr_radar\",events:{\"click .follow\":\"toggleFollow\",\"click .reblog\":\"reblog\",\"click .like:not(.liked)\":\"like\",\"click .liked\":\"unlike\"},initialize:function(){this.post_id=this.$el.attr(\"data-post-id\");this.tumblelog=this.$el.attr(\"data-tumblelog\");this.form_key=c(\"#tumblr_form_key\").attr(\"content\");this.placement_id=this.$el.attr(\"data-placement-id\");this.tumblelogModel=new Tumblr.Models.Tumblelog({name:this.$el.attr(\"data-tumblelog\"),following:(this.$el.attr(\"data-following-tumblelog\")===\"1\"),ignoring:false,radared:true});this.listenTo(this.tumblelogModel,\"change:following\",this.renderFollow);this.$followButton=this.$(\".follow\");this.version=this.$el.hasClass(\"radar_v2\")?\"v2\":\"v1\";if(this.version===\"v2\"&&this.$el.hasClass(\"radar_type_video\")){var d=this.$el.find(\".thumbnail_anchor\");var j=c.parseJSON(c(d).attr(\"data-thumbnail-urls\"));var h=[];for(var g=0;g<j.length;g++){h.push({photo_url:j[g]})}var f=new Tumblr.NerdSlideshow({slideshow_container:d,slideshow_items:h,display_badge:false,display_like_and_reblog:false})}else{if(this.version===\"v2\"&&this.$el.find(\".photoset\").length>0){var e=this.$el.find(\".photoset\");var j=c.parseJSON(c(e).attr(\"data-thumbnail-urls\"));var f=new Tumblr.RadarPhotosetSlideshow({container:e,image_urls:j})}}},renderFollow:function(d,e){if(d._previousAttributes.following==null||d._previousAttributes.following===e){return}if(this.version===\"v2\"){this.$followButton[e?\"hide\":\"show\"]()}else{if(this.version===\"v1\"){this.$followButton.toggleClass(\"followed\",e)}}},toggleFollow:function(){this.tumblelogModel.save_following({following:!this.tumblelogModel.get(\"following\")},{placement_id:this.placement_id,source:!this.tumblelogModel.get(\"following\")?\"FOLLOW_SOURCE_RADAR\":\"UNFOLLOW_SOURCE_RADAR\"}).fail(function(){alert(l10n_str.ajax_error)});return false},like:function(e){e.stopPropagation();e.preventDefault();var d=c(e.currentTarget);d.addClass(\"liked\");Tumblr.like({id:this.post_id,key:d.attr(\"data-reblog-key\"),placement_id:this.placement_id,source:\"LIKE_SOURCE_RADAR\"},{error:function(){d.removeClass(\"liked\");alert(l10n_str.ajax_error)}})},unlike:function(e){e.stopPropagation();e.preventDefault();var d=c(e.currentTarget);d.removeClass(\"liked\");Tumblr.unlike({id:this.post_id,key:d.attr(\"data-reblog-key\"),placement_id:this.placement_id,source:\"UNLIKE_SOURCE_RADAR\"},{error:function(){d.addClass(\"liked\");alert(l10n_str.ajax_error)}})},reblog:function(e){if(e.altKey){e.stopPropagation();e.preventDefault();var d=c(e.currentTarget);if(d.hasClass(\"reblogged\")){return}d.addClass(\"reblogged\");c.ajax({url:\"/fast_reblog\",type:\"post\",data:{reblog_key:d.attr(\"data-reblog-key\"),reblog_post_id:d.attr(\"data-reblog-id\"),form_key:this.form_key},error:function(){d.removeClass(\"reblogged\");alert(l10n_str.ajax_error)}})}}});b.Radar=a})(jQuery,Tumblr);jQuery(document).ready(function(a){new Tumblr.Radar()});"}
],
[
{"endColumn":13370,"endLine":0,"scriptId":"121","startColumn":0,"startLine":0,"url":"http://assets.tumblr.com/assets/scripts/application/keycommands.js?_v=98bb400faf45317979385f63dc27af23"},{"scriptSource":"(function(b,a){var c=Backbone.View.extend({el:\"body\",post_types:[\"text\",\"photo\",\"quote\",\"link\",\"chat\",\"audio\",\"video\"],suspended:false,suspended_exceptions:[],last_key_code:0,mouseout_id:null,events:{keydown:\"keydown\",keyup:\"keyup\",\"click .post_tab_switching .tab_post_type\":\"click_tab_switch\",\"mouseover .post_tab_switching .tab_post_type\":\"mouseover_tab_switch\",\"mouseout .post_tab_switching .tab_post_type\":\"mouseout_tab_switch\",\"click .post_tab_switching\":\"dismiss_fast_compose\"},dismiss_fast_compose:function(d){if(this.post_keying){this.post_keys({toggle:\"cancel\"})}if(this.tab_switching){this.blog_switcher({toggle:\"cancel\"})}},click_tab_switch:function(d){this.post_keys({toggle:\"stop\"})},mouseover_tab_switch:function(d){window.clearTimeout(this.mouseout_id);this.post_keys({toggle:\"start\",pos:d.currentTarget.attributes[\"data-index\"].value})},mouseout_tab_switch:function(d){this.mouseout_id=window.setTimeout(_.bind(function(){this.post_keys({toggle:\"clear\"})},this),250)},initialize:function(){this.logged_in=(!b(document.body).hasClass(\"logged_out\"));this.auto_paginate=Tumblr.auto_paginate||false;this.animate_scroll=(Tumblr.animate_scroll!==undefined)?Tumblr.animate_scroll:false;this.scroll_speed=100;this.scroll_offset=7;this.pressed_keys=[];this.current_post=null;if(!Tumblr.enable_dashboard_key_commands){this.suspend()}this.blog_switcher_detection();if(Tumblr.is_xbox){this.animate_scroll=false}},suspend:function(d){this.suspended=true;this.suspended_exceptions=d||[]},resume:function(){this.suspended=false;this.suspended_exceptions=[]},left:function(){if(!this.auto_paginate&&!b(\"#tumblr_lightbox\").length){var d=b(\"#previous_page_link\").attr(\"href\");if(d){location.href=d}}},right:function(){if(!this.auto_paginate&&!b(\"#tumblr_lightbox\").length){var d=b(\"#next_page_link\").attr(\"href\");if(d){location.href=d}}},next:function(d){if(d>(this.current_position+2)&&(d<this.go_to_position||!this.go_to_position)){Tumblr.Popover.hide_all();this.go_to_position=d}},previous:function(d){if(d<(this.current_position-2)&&d>this.go_to_position){Tumblr.Popover.hide_all();this.go_to_position=d}},check_offset:function(d){return(Math.abs(d-this.current_position)<2)},update_post_positions:function(){var d={};b(\"#posts .post[data-post-id]\").each(function(){var e=b(this);var f=this.id;d[f]=e.closest(\".post_container\").offset().top});this.post_positions=d},get_parse_params:function(d){var e=window.location.pathname.split(\"/\");e.shift();if(e[0]===\"tagged\"){return\"/new/\"+d+\"?post[tags]=\"+e[1]}else{return\"/new/\"+d}},create_new:function(f){if(typeof Tumblr.PostForms==\"object\"){var d=b(\"#new_post_label_\"+f);var e=d.length?d.attr(\"href\"):this.get_parse_params(f);var g=Tumblr.PostForms.endpoints_to_types[f];var h=Tumblr.PostForms.parse_url_params(e);h.detached=true;Tumblr.PostForms.create({type:g,attach_to:\"body\",detached:true,mode:\"index\"},h)}else{document.location.href=\"/new/\"+f;this.suspend()}},like:function(e){var d=b(\"#\"+e);var f=d.find(\".post_control.like\");var g=d.data(\"post-id\");if(f.length&&g){Tumblr.Events.trigger(\"post:like\",g,\"keyboard\")}},notes:function(f){var e=b(\"#\"+f);var d=e.find(\".post_notes_label\");if(d.length<1||d.find(\".note_link_current\").text()===\"\"){return}var g=d.offset().top-500,h;if(e.find(\".post_notes .popover\").length>0&&g>e.offset().top){b(\"html,body\").animate({scrollTop:g},200,function(){if(!h){d.trigger(\"click\")}h=true})}else{d.trigger(\"click\")}},reblog:function(d){var e=b(\"#\"+d).find(\".post_control.reblog\");if(e.length){e.trigger(\"click\")}},elevate:function(){var d=window.pageYOffset||(document.documentElement&&document.documentElement.scrollTop)||document.body.scrollTop;if(d>=1500){b(\"html, body\").stop(true).animate({scrollTop:0},\"slow\")}},play:function(g,i){var d=b(\"#\"+g),h=d.data(\"type\");if(h==\"video\"){var f=d.find(\"iframe.tumblr_video_iframe\");var j=d.find(\".retro_video_preview\");if(f.length>0){f[0].contentWindow.postMessage(\"toggle\",\"http://\"+f.attr(\"data-origin\"));f[0].contentWindow.focus()}else{if(j.length>0){b(\".big_play_button\",j).click();i.preventDefault()}}}},fast_reblog:function(f,g,e){var h=b(\"#tumblr_form_key\").attr(\"content\"),d=b(\"#\"+f),i=d.find(\".post_control.reblog:not(.reblogged)\");if(i.length&&this.check_offset(g)){Tumblr.Events.trigger(\"post:fastreblog\",b(\"#\"+f).data(\"post-id\"),e)}},show_plexi:function(){if(Tumblr.Plexi.findByToken(\"body-plexi\")){this.body_plexi=Tumblr.Plexi.findByToken(\"body-plexi\")}if(!this.body_plexi){this.body_plexi=new Tumblr.Plexi({token:\"body-plexi\"});this.body_plexi.create(document.body,{insertAt:\"top\",cssClass:\"color\"})}this.body_plexi.show({transition_class:\"fast\"})},hide_plexi:function(){if(Tumblr.Plexi.findByToken(\"body-plexi\")){this.body_plexi=Tumblr.Plexi.findByToken(\"body-plexi\")}if(this.body_plexi){this.body_plexi.hide()}},post_keys:function(g){g.toggle=g.toggle||null;g.shift=g.shift||null;g.pos=g.pos||null;if(this.tab_switching){return}var e=b(\"#post_tab_switching\");if(!e.length){return}var f=e.find(\".tab_post_type\");if(g.toggle==\"cancel\"){if(!this.creating_new){this.hide_plexi()}this.creating_new=false;e.removeClass(\"active\");clearTimeout(this.show_timeout);clearTimeout(this.fade_timeout);this.cancel_timeout=setTimeout(function(){e.addClass(\"inactive undimmed\")},50);this.post_keying=false;this.post_tab_index=undefined;return}if(g.toggle==\"clear\"){this.post_tab_index=undefined;f.removeClass(\"selected loading\")}if(g.toggle==\"stop\"){var d=null;if(this.post_tab_index!==undefined){d=this.post_types[this.post_tab_index]}this.post_tab_index=undefined;if(d){this.creating_new=true;this.create_new(d)}else{this.hide_plexi()}this.post_keys({toggle:\"cancel\"});return}if(g.toggle==\"init\"){this.show_plexi();clearTimeout(this.cancel_timeout);clearTimeout(this.fade_timeout);setTimeout(function(){f.removeClass(\"selected loading\");e.removeClass(\"inactive\");e.addClass(\"active\");this.post_keys({toggle:\"start\"})}.bind(this),50);this.post_keying=true;return}if(g.toggle==\"start\"){clearTimeout(this.show_timeout);if(g.pos&&(g.pos-1==this.post_tab_index)){return}setTimeout(function(){e.removeClass(\"undimmed\");f.removeClass(\"selected loading\");if(this.post_tab_index===undefined){this.post_tab_index=g.pos?g.pos-1:0}else{this.post_tab_index=g.pos?g.pos-1:(this.post_tab_index+((g.shift)?-1:1));if(this.post_tab_index>=7){this.post_tab_index=0}if(this.post_tab_index<0){this.post_tab_index=6}}e.addClass(\"active\");this.tab_current_post_type=f.eq(this.post_tab_index);this.tab_current_post_type.addClass(\"selected\")}.bind(this),1);return}},blog_switcher:function(h){h.toggle=h.toggle||null;h.shift=h.shift||null;if(this.post_keying){return}this.tab_switching=(h.toggle.length)?true:false;var e=b(\"#tab_switching\");if(!e.length){return}var g=e.find(\".tab_blog\");g.removeClass(\"selected loading\");if(h.toggle==\"cancel\"){this.tab_switching=false;this.tab_index=undefined;this.hide_plexi();e.removeClass(\"active\");setTimeout(function(){e.addClass(\"inactive\")},500);return}if(h.toggle==\"stop\"){this.tab_index=undefined;var d=this.tab_current_blog.find(\"a.blog_name\").attr(\"href\");if(!document.location.href.match(d)){this.tab_current_blog.addClass(\"loading\");var f=new Spinner(Tumblr.spinners.white).spin();this.tab_current_blog.append(f.el);document.location.href=d;this.suspend();b(window).on(\"keydown\",function(){return false})}else{this.blog_switcher({toggle:\"cancel\"})}return}if(h.toggle==\"start\"){e.removeClass(\"inactive\");this.show_plexi();setTimeout(_.bind(function(){if(this.tab_index===undefined){this.tab_index=1}else{this.tab_index=this.tab_index+((h.shift)?-1:1);if(this.tab_index>=g.length){this.tab_index=0}if(this.tab_index<0){this.tab_index=g.length-1}}e.addClass(\"active\");this.tab_current_blog=g.eq(this.tab_index);this.tab_current_blog.addClass(\"selected\")},this),50);return}},blog_switcher_detection:function(){if(window.devicePixelRatio){if(escape(navigator.javaEnabled.toString())==\"function%20javaEnabled%28%29%20%7B%20%5Bnative%20code%5D%20%7D\"){b(\"html\").addClass(\"tab_switcher_chrome\")}else{if(escape(navigator.javaEnabled.toString())!=\"function%20javaEnabled%28%29%20%7B%20%5Bnative%20code%5D%20%7D\"){b(\"html\").addClass(\"tab_switcher_safari\")}}}},match_modifier_keys:function(h,d){if(typeof d==\"string\"){d=[d]}var f={shift:_.indexOf(d,\"shift\")>-1,ctrl:_.indexOf(d,\"ctrl\")>-1,alt:_.indexOf(d,\"alt\")>-1,meta:_.indexOf(d,\"meta\")>-1};var g={shift:h.shiftKey,ctrl:h.ctrlKey,alt:h.altKey,meta:h.metaKey};return _.isEqual(f,g)},keydown:function(k){var f=k.charCode?k.charCode:k.keyCode;if(this.suspended&&_.indexOf(this.suspended_exceptions,f)<0){return}if(this.animating){return}var l=k?k.target:window.event.srcElement;if(b(l).is(\"input:focus\")){return}this.update_post_positions();this.current_position=(window.pageYOffset||(document.documentElement&&document.documentElement.scrollTop)||document.body.scrollTop)+7;this.go_to_position=0;var n=(k.shiftKey||k.ctrlKey||k.altKey||k.metaKey),j;this.pressed_keys[f]=1;if((this.post_keying||this.tab_switching)&&!(k.ctrlKey||k.altKey||k.metaKey)){var h=[74,75,190,76,78,82,32,38,40,33,34,35,36];if(_.indexOf(h,f)>=0){return false}}if(f==37){this.left()}else{if(f==39){this.right()}else{if(!n){for(j in this.post_positions){var g=j,m=this.post_positions[j],d=b;if(f==74){this.next(m)}if(f==75){this.previous(m)}if(Tumblr.is_xbox&&f==40){this.next(m);k.preventDefault()}if(Tumblr.is_xbox&&f==38){this.previous(m);k.preventDefault()}if(f==190){this.elevate();k.preventDefault();return false}if(this.check_offset(m)){this.current_post=b(\"#\"+g);if(f==76){this.like(g)}if(f==78){this.notes(g)}if(f==82){this.reblog(g)}if(f==32){this.play(g,k);if(this.current_post.length){if(this.current_post.attr(\"data-type\")==\"video\"&&this.current_post.attr(\"data-direct-video\")){return false}}return true}}}if(f==74&&!this.go_to_position){this.go_to_position=b(document).height()}if(this.animate_scroll){if(this.go_to_position&&!this.animating){this.animating=true;b(\"html,body\").stop().animate({scrollTop:this.go_to_position-this.scroll_offset},this.scroll_speed,_.bind(function(){this.animating=false},this))}}else{if(this.go_to_position){window.scrollTo(0,this.go_to_position-this.scroll_offset)}}}}}if(navigator.platform==\"MacIntel\"){if(f==67&&this.post_keying){this.post_keys({toggle:\"start\",shift:k.shiftKey})}else{if(f==67&&this.match_modifier_keys(k,\"alt\")){this.post_keys({toggle:\"init\",shift:k.shiftKey})}}if(f==13&&this.post_keying){this.post_keys({toggle:\"stop\"});return false}if(f==27&&this.post_keying){this.post_keys({toggle:\"cancel\"});return false}if(f==37&&this.post_keying){this.post_keys({toggle:\"start\",shift:true});return false}if(f==39&&this.post_keying){this.post_keys({toggle:\"start\"});return false}if(f==9&&this.post_keying){this.post_keys({toggle:\"start\",shift:k.shiftKey});return false}if(k.altKey&&f==9){this.blog_switcher({toggle:\"start\",shift:k.shiftKey});return false}if(k.altKey&&f==192){this.blog_switcher({toggle:\"start\",shift:true});return false}if(k.altKey&&f==27&&this.tab_switching){this.blog_switcher({toggle:\"cancel\"});return false}if(k.altKey&&f==37&&this.tab_switching){this.blog_switcher({toggle:\"start\",shift:true});return false}if(k.altKey&&f==39&&this.tab_switching){this.blog_switcher({toggle:\"start\"});return false}if(k.altKey&&f==82&&this.logged_in){for(j in this.post_positions){this.fast_reblog(j,this.post_positions[j])}return false}if(k.altKey&&f==69&&this.logged_in){for(j in this.post_positions){this.fast_reblog(j,this.post_positions[j],true)}return false}}if(navigator.platform==\"Win32\"){if(this.pressed_keys[67]&&this.post_keying){this.post_keys({toggle:\"start\",shift:k.shiftKey})}else{if(this.pressed_keys[90]&&this.pressed_keys[67]){this.post_keys({toggle:\"init\",shift:k.shiftKey})}}if(this.pressed_keys[13]&&this.post_keying){this.post_keys({toggle:\"stop\"});return false}if(this.pressed_keys[27]&&this.post_keying){this.post_keys({toggle:\"cancel\"});return false}if(this.pressed_keys[37]&&this.post_keying){this.post_keys({toggle:\"start\",shift:true});return false}if(this.pressed_keys[39]&&this.post_keying){this.post_keys({toggle:\"start\"});return false}if(this.pressed_keys[9]&&this.post_keying){this.post_keys({toggle:\"start\",shift:k.shiftKey});return false}if(this.pressed_keys[90]&&this.pressed_keys[9]){this.blog_switcher({toggle:\"start\",shift:k.shiftKey});return false}if(this.pressed_keys[90]&&this.pressed_keys[27]&&this.tab_switching){this.blog_switcher({toggle:\"cancel\"});return false}if(this.pressed_keys[90]&&this.pressed_keys[192]){this.blog_switcher({toggle:\"start\",shift:true});return false}if(this.pressed_keys[90]&&this.pressed_keys[37]&&this.tab_switching){this.blog_switcher({toggle:\"start\",shift:true});return false}if(this.pressed_keys[90]&&this.pressed_keys[39]&&this.tab_switching){this.blog_switcher({toggle:\"start\"});return false}if(k.shiftKey&&f==82&&this.logged_in){for(j in this.post_positions){this.fast_reblog(j,this.post_positions[j])}return false}if(k.shiftKey&&f==69&&this.logged_in){for(j in this.post_positions){this.fast_reblog(j,this.post_positions[j],true)}return false}}},keyup:function(g){var f=g.charCode?g.charCode:g.keyCode,d=(g.shiftKey||g.ctrlKey||g.altKey||g.metaKey);this.pressed_keys[f]=0;if(navigator.platform==\"MacIntel\"){if(!g.altKey&&this.tab_switching){this.blog_switcher({toggle:\"stop\"});return false}}if(navigator.platform==\"Win32\"){if(!this.pressed_keys[90]&&this.tab_switching){this.blog_switcher({toggle:\"stop\"});return false}}}});a.KeyCommandsConstructor=c})(jQuery,Tumblr);"}
],
[
{"endColumn":33726,"endLine":0,"scriptId":"122","startColumn":0,"startLine":0,"url":"http://assets.tumblr.com/assets/scripts/posts.js?_v=577f7b14efd64d853ca2c3b9b945f392"},{"scriptSource":"(Tumblr.Post||Tumblr.PostView||Tumblr.Posts||Tumblr.PostsView)||(function(g,q){var p=q.Features;var j=p(\"is_logged_in\");var k=Backbone.View.extend({el:\"#posts\",initialize:function(){this.collection=q.Posts;this.postViews=[];this.form_key=g(\"#tumblr_form_key\").attr(\"content\");this.createPosts();q.AutoPaginator.on(\"after\",this.createPosts,this);q.Events.on(\"posts:load\",this.createPosts,this);q.Events.on(\"post:like\",this.likePostById,this);q.Events.on(\"post:fastreblog\",this.fastReblogById,this)},createPosts:function(){var r=_.map(this.$el.find(\".post:not(.new_post_buttons):not([data-view-exists])\"),this.createPost,this);q.Events.trigger(\"PostsView:addBatch\",r)},createPost:function(v,u){var r=g(v);var t=new d({id:r.attr(\"data-post-id\"),type:r.attr(\"data-type\"),root_id:r.attr(\"data-root-id\"),tumblelog:r.attr(\"data-tumblelog-name\"),tumblelog_key:r.attr(\"data-tumblelog-key\"),reblog_key:r.attr(\"data-reblog-key\"),is_mine:r.hasClass(\"is_mine\"),accepts_answers:(r.attr(\"data-accepts-answers\")===\"1\"),following_tumblelog:(r.attr(\"data-following-tumblelog\")===\"1\"),reblogged:false,liked:r.find(\".post_control.like\").hasClass(\"liked\"),form_key:this.form_key,sponsored:(r.attr(\"data-sponsored\")===\"1\"),placement_id:r.attr(\"data-placement-id\")||false,featured_tags:(r.attr(\"data-featured-tags\")||\"\").split(\",\"),reblog_source:r.find(\".reblog_source [data-tumblelog-popover]\").data(\"tumblelog-popover\")});var s=j(function(){var w=(t.get(\"type\")===\"fan_mail\")?l:c;return new w({el:r,model:t})},function(){return new f({el:r,model:t})});this.collection.add(t);this.postViews.push(s);r.attr(\"data-view-exists\",true);q.Events.trigger(\"PostsView:add\",s);return s},likePostById:function(s,r){r=r||\"mouse\";this.collection.get(s).like(r)},fastReblogById:function(s,r){this.collection.get(s).fastReblog(r)}});var m=Backbone.Collection.extend({model:d,initialize:function(){this.on(\"change:liked\",this.updateLikeStatus,this);this.on(\"ignore:success\",this.dismiss,this);this.on(\"unfollow:success\",this.dismiss,this)},updateLikeStatus:function(r,s){var t=this.whereBy({liked:!s,root_id:r.get(\"root_id\")});t.invoke(\"set\",{liked:s});if(r.get(\"liked\")){t.invoke(\"trigger\",\"like:success\")}else{t.invoke(\"trigger\",\"unlike:success\")}},dismiss:function(r){this.whereBy({tumblelog:r.get(\"tumblelog\"),sponsored:false}).invoke(\"dismiss\")},whereBy:function(r){return new m(this.where(r))}});var d=Backbone.Model.extend({initialize:function(r){this.tumblelog=new q.Models.Tumblelog(_({name:r.tumblelog,ignoring:false,sponsor:r.sponsored,following:!!r.following_tumblelog}).omit(_.isUndefined).omit(_.isNull).value());var s=r.reblog_source;if(s&&s.name){this.reblog_tumblelog=new q.Models.Tumblelog(_({name:s.name,ignoring:false,following:!!s.following}).omit(_.isUndefined).omit(_.isNull).value())}},getLikeSource:function(r){r=r||\"like\";var s=\"LIKE_\";switch(r){case\"unlike\":s=\"UNLIKE_\";break;case\"reply\":s=\"REPLY_\";break;case\"ignore\":s=\"IGNORE_\"}var t=location.pathname;if(t.match(/^\\/dashboard/)){return s+\"SOURCE_DASHBOARD\"}if(t.match(/^\\/tagged/)){return s+\"SOURCE_TAG_PAGE\"}if(t.match(/^\\/likes/)){return s+\"SOURCE_LIKES_PAGE\"}if(t.match(/^\\/inbox/)){return s+\"SOURCE_INBOX\"}if(t.match(/^\\/search/)){return s+\"SOURCE_SEARCH_RESULTS_PAGE\"}return s+\"SOURCE_UNKNOWN\"},likePayload:function(s,r){s=s||\"mouse\";r=r||\"LIKE_SOURCE_UNKNOWN\";return{id:this.get(\"id\"),key:this.get(\"reblog_key\"),method:s,source:r,placement_id:this.get(\"placement_id\")||false}},like:function(r){if(this.get(\"is_mine\")){return}this.trigger(\"like:success\",this);if(!this.get(\"liked\")){this.set(\"liked\",true);q.like(this.likePayload(r,this.getLikeSource(\"like\"))).error(_.bind(this.trigger,this,\"like:failure\"))}},xhr_request:function(r,u,s){u=_.extend(u,{form_key:this.get(\"form_key\")});var t=g.ajax({data:JSON.stringify(u),type:\"POST\",url:r});t.done(_.bind(function(v){if(s[200]){s[200].call(this,v)}},this));t.fail(_.bind(function(x,v,w){if(s[x.status]){s[x.status].call(this,x.status)}},this))},unlike:function(){this.set(\"liked\",false);this.trigger(\"unlike:success\",this);q.unlike(this.likePayload(\"mouse\",this.getLikeSource(\"unlike\"))).error(_.bind(this.trigger,this,\"unlike:failure\"))},toggleLike:function(){if(this.get(\"liked\")){this.unlike()}else{this.like()}},reblog:function(){if(this.get(\"reblogged\")){return}this.set(\"reblogged\",true);return g.ajax({url:\"/fast_reblog\",type:\"post\",data:{reblog_key:this.get(\"reblog_key\"),reblog_post_id:this.get(\"id\"),form_key:g(\"#tumblr_form_key\").attr(\"content\")},success:function(){this.set(\"reblogged\",true)}.bind(this),error:function(){this.set(\"reblogged\",false)}.bind(this)})},fastReblog:function(r){r=r||false;this.trigger(\"fastreblog:success\",r);this.set(\"reblogged\",true);return g.ajax({url:\"/fast_reblog\",type:\"post\",data:{reblog_key:this.get(\"reblog_key\"),reblog_post_id:this.get(\"id\"),form_key:g(\"#tumblr_form_key\").attr(\"content\"),queue:r},success:_.bind(function(){this.set(\"reblogged\",true)},this),error:_.bind(function(){this.set(\"reblogged\",false)},this)})},reply:function(s){var r=q.reply({reply_text:s,post_id:this.get(\"id\"),tumblelog:this.get(\"tumblelog\"),tumblelog_key:this.get(\"tumblelog_key\"),source:this.getLikeSource(\"reply\")});r.done(function(){this.trigger(\"replied\")}.bind(this));return r},destroy:function(){var r={post_id:this.get(\"id\"),channel_id:this.get(\"tumblelog\")};this.xhr_request(\"/svc/post/delete\",r,{200:_.bind(this.trigger,this,\"destroy:success\"),401:_.bind(this.trigger,this,\"destroy:failure\"),403:_.bind(this.trigger,this,\"destroy:failure\"),500:_.bind(this.trigger,this,\"destroy:failure\")})},toggle_spam_tumblelog:function(){var r=g.ajax({url:\"/spam/toggle\",type:\"post\",data:{tumblelog:this.get(\"tumblelog\"),form_key:this.get(\"form_key\")}});r.fail(_.bind(this.trigger,this,\"spam_toggle:failure\"));r.done(_.bind(this.trigger,this,\"spam_toggle:success\"));return r},toggle_nsfw_tumblelog:function(){var r=g.ajax({url:\"/nsfw/toggle\",type:\"post\",data:{tumblelog:this.get(\"tumblelog\"),form_key:this.get(\"form_key\")}});r.fail(_.bind(this.trigger,this,\"nsfw_toggle:failure\"));r.done(_.bind(this.trigger,this,\"nsfw_toggle:success\"));return r},toggle_adult_tumblelog:function(){var r=g.ajax({url:\"/adult/toggle\",type:\"post\",data:{tumblelog:this.get(\"tumblelog\"),form_key:this.get(\"form_key\")}});r.fail(_.bind(this.trigger,this,\"adult_toggle:failure\"));r.done(_.bind(this.trigger,this,\"adult_toggle:success\"));return r},toggle_follow:function(t){var r;var s={tumblelog:this.get(\"tumblelog\"),source:t};if(this.get(\"following_tumblelog\")){this.set(\"following_tumblelog\",false);r=q.unfollow(s);r.done(_.bind(this.trigger,this,\"unfollow:success\",this));r.fail(_.bind(this.trigger,this,\"unfollow:failure\",this))}else{this.set(\"following_tumblelog\",true);r=q.follow(s);r.done(_.bind(this.trigger,this,\"follow:success\",this));r.fail(_.bind(this.trigger,this,\"follow:failure\",this))}return r},fan_mail:function(){if(_.isObject(q.FanMail)){var r={href:q.FanMail.make_url_from_tumblelog(this.get(\"tumblelog\"))};q.FanMail.show(r)}},publish:function(){var r=g.ajax({url:\"/publish\",type:\"post\",data:{form_key:this.get(\"form_key\"),id:this.get(\"id\")}});r.fail(_.bind(this.trigger,this,\"publish:failure\"));r.done(_.bind(this.trigger,this,\"publish:success\"))},promote:function(r){var s=g.ajax({url:\"/svc/promote\",type:\"post\",data:{tag:r,post_id:this.get(\"id\"),form_key:this.get(\"form_key\"),reblog_key:this.get(\"reblog_key\"),tumblelog_name:this.get(\"tumblelog\")}});s.fail(_.bind(this.trigger,this,\"promote:failure\"));s.done(function(t){if(t&&t.status&&t.status==\"failure\"){this.trigger(\"promote:failure\",t.error)}else{this.trigger(\"promote:success\",r)}}.bind(this));return s},unpromote:function(r){var s=g.ajax({url:\"/svc/unpromote\",type:\"post\",data:{tag_id:r,post_id:this.get(\"id\"),form_key:this.get(\"form_key\"),reblog_key:this.get(\"reblog_key\"),tumblelog_name:this.get(\"tumblelog\")}});s.fail(_.bind(this.trigger,this,\"unpromote:failure\"));s.done(_.bind(this.trigger,this,\"unpromote:success\"));return s},follow:function(s,r){s=s||this.get(\"tumblelog\");q.follow({tumblelog:s,source:r,placement_id:this.get(\"placement_id\")||false},{success:g.proxy(function(){q.Events.trigger(\"follow_tumblelog\",{tumblelog:s});this.trigger(\"follow:success\",this)},this),error:g.proxy(function(){this.trigger(\"follow:failure\",this)},this)})},ignore:function(u){u=u||this.get(\"tumblelog\");var t=q.ignore({tumblelog:u,source:this.getLikeSource(\"ignore\")});var s=u.match(/post\\_id\\:/);var r=!s;t.done(_.bind(function(){q.Events.trigger(\"block_tumblelog\",{tumblelog:u,can_report:r});if(u==this.get(\"tumblelog\")){this.trigger(\"ignore:success\",this)}else{this.dismiss()}},this));t.fail(_.bind(this.trigger,this,\"ignore:failure\"))},queue:function(){var r=g.ajax({url:\"/publish\",type:\"post\",data:{form_key:this.get(\"form_key\"),id:this.get(\"id\"),queue:\"queue\"}});r.fail(_.bind(this.trigger,this,\"queue:failure\"));r.done(_.bind(this.trigger,this,\"queue:success\"))},removeSource:function(){var r=g.ajax({url:\"/remove_app_attribution\",type:\"post\",dataType:\"text\",data:{post_id:this.get(\"id\"),tumblelog_id:this.get(\"tumblelog\"),form_key:this.get(\"form_key\")}});r.done(_.bind(this.trigger,this,\"remove_source:success\"));r.fail(_.bind(this.trigger,this,\"remove_source:failure\"));return r},dismiss:function(){this.trigger(\"dismiss\",this)},approve:function(r){var t={form_key:this.get(\"form_key\"),id:this.get(\"id\")};if(r){t.queue=true}var s=g.ajax({url:\"/approve_submission/\"+this.get(\"id\"),type:\"post\",dataType:\"text\",data:t});s.fail(_.bind(this.trigger,this,\"approve:failure\"));s.done(_.bind(this.trigger,this,\"approve:success\"));return s},deny:function(){var r=g.ajax({url:\"/deny_submission\",type:\"post\",dataType:\"text\",data:{pid:this.get(\"id\"),form_key:this.get(\"form_key\")}});r.fail(_.bind(this.trigger,this,\"deny:failure\"));r.done(_.bind(this.trigger,this,\"deny:success\"));return r},answer:function(s){var r=g.ajax({url:\"/answer\",type:\"post\",data:{form_key:this.get(\"form_key\"),post_id:this.get(\"id\"),tumblelog:this.get(\"tumblelog\"),key:this.get(\"tumblelog_key\"),answer_text:s}});r.fail(_.bind(this.trigger,this,\"answer:failure\"));r.done(_.bind(this.trigger,this,\"answer:success\"));return r}});var i=q.PopoverWithForm.extend({template:\"#post_reply_form\",events:{\"input textarea\":\"check_form_state\",\"keydown textarea\":\"on_keydown\"},initialize:function(r){this.options=r||{};var s=_.template(g(this.template).html());this.$el.html(s());this.submit_button=this.$(\"button\");this.textarea=this.$(\"form textarea\");this.check_form_state();this.is_empty=true;_.extend(this.options,{on_hide:this.on_hide,on_show:this.on_show});q.PopoverWithForm.prototype.initialize.apply(this,arguments)},on_keydown:function(r){this.check_form_state();if(!this.is_empty&&(r.ctrlKey||r.metaKey)&&r.which===13){r.preventDefault();this.submit_form()}},check_form_state:function(){this.is_empty=!!(this.textarea[0].value.length===0);this.submit_button.attr(\"disabled\",this.is_empty)},on_show:function(){this.position()},on_hide:function(){this.$el.removeClass(\"active\")},submit_form:function(s){if(s){s.preventDefault()}this.submit_button.attr(\"disabled\",true);this.submit_button.html(this.submit_button.data(\"label-loading\"));var r=this.model.reply(this.textarea.val());r.done(_.bind(this.on_success,this))},on_success:function(){this.model.set(\"replied_to\",true);this.trigger(\"success\");this.$el.find(\"button\").attr(\"disabled\",false);this.$el.find(\"textarea\").val(\"\");this.hide();this.submit_button.html(this.submit_button.data(\"label\"))}});var e=q.Popover.extend({events:{\"click .post_control.delete\":\"delete\",\"click .post_control.edit\":\"edit\",\"click .post_control.queue\":\"queue\"},initialize:function(r){this.options=r||{};_.extend(this.options,{on_show:this.on_show,disable_auto_show:true});q.Popover.prototype.initialize.apply(this,arguments)},\"delete\":function(r){this.hide();this.$el.removeClass(\"active\")},edit:function(r){this.hide();this.$el.removeClass(\"active\");this.trigger(\"action:edit\");if(q.PostForms){r.preventDefault()}},queue:function(r){this.hide()},on_show:function(){this.position()}});var a=Backbone.View.extend({events:{\"click .promote_post a\":\"promote\",\"change select.promotable_tags\":\"promote_select\"},button_count:5,initialize:function(r){this.model.on(\"promote:success\",this.update_tag_count,this);this.render()},render:function(){this.$el.html(this.template())},promote:function(t){var r=g(t.currentTarget);var s=this.model.promote(r.data(\"tag\"));r.addClass(\"loading\");s.always(r.removeClass.bind(r,\"loading\"));if(q.Popover){q.Popover.hide_all()}},update_tag_count:function(r){for(var s=0;s<window.promotable_tags.length;s++){if(window.promotable_tags[s].tag==r){window.promotable_tags[s].promote_diff-=1}}this.render()},promote_select:function(t){var r=g(t.currentTarget);var s=this.model.promote(r.val());if(q.Popover){q.Popover.hide_all()}},show:function(r){this.$el.show();this.$el.removeClass(\"hidden\")},hide:function(r){this.$el.hide();this.$el.addClass(\"hidden\")},template:function(){var r=_.compact(this.$el.data(\"promotion-warnings\").split(\";;\"));var s=\"\";s+=\"<ul>\";s+='<li class=\"popover_sub_header promote_post_header\">Promote</li>';if(window.promotable_tags.length>this.button_count){s+='<div class=\"promote_select_wrapper\">';s+='<select class=\"popover_menu_item promotable_tags\">';s+='<option value=\"\">'+l10n_str.promote_this_post_in+\"</option>\"}_.each(window.promotable_tags,function(t,v){var u=(t.promote_diff<0)?\"\":\" (\"+t.promote_diff+\")\";if(t.promote_diff===0){r.push(l10n_str.promote_warning_none.replace(\"%1$s\",t.title))}if(window.promotable_tags.length>this.button_count){s+='<option value=\"'+t.tag+'\">'+window.promotable_tags[v].title+u+\"</option>\"}else{s+='<li class=\"popover_menu_item promote_post\">';s+='<a data-tag=\"'+t.tag+'\" href=\"#\">';s+=window.promotable_tags[v].title+u;s+=\"</a>\";s+=\"</li>\"}},this);if(window.promotable_tags.length>this.button_count){s+=\"</select>\";s+=\"</div>\"}if(r.length){s+='<div class=\"promote_pane_warnings>';_.each(r,function(t){s+='<div class=\"warning\">'+t+\"</div>\"});s+=\"</div>\"}s+=\"</ul>\";return s}});var b=q.Popover.extend({events:{\"click .post_control.unpromote\":\"unpromote\",\"click .post_control.remove_source\":\"remove_source\"},initialize:function(r){this.options=r||{};_.extend(this.options,{on_show:this.on_show,on_hide:this.on_hide,disable_auto_show:true});if(window.promotable_tags&&window.promotable_tags.length){this.promote_tag_view=new a({el:this.$(\".promote_pane\"),model:this.model,tags:window.promotable_tags});this.promote_tag_view.show()}this.model.on(\"remove_source:failure\",this.error,this);q.Popover.prototype.initialize.apply(this,arguments)},on_show:function(){this.position()},remove_source:function(){this.hide();this.model.removeSource()},on_hide:function(){},error:function(){q.Dialog.alert(\"Error removing source from this post\")},promote:function(r){r.preventDefault();if(!(this.promote_tag_view instanceof a)){this.promote_tag_view=new a({el:this.$(\".promote_pane\"),model:this.model,tags:window.promotable_tags})}this.promote_tag_view.show()},unpromote:function(t){var r=g(t.currentTarget);var s=this.model.unpromote(r.data(\"tag\"));r.addClass(\"loading\");s.always(r.removeClass.bind(r,\"loading\"))}});var h=q.Popover.extend({initialize:function(r){this.options=r||{};_.extend(this.options,{on_show:this.on_show,on_hide:this.on_hide,disable_auto_show:false});this.model.on(\"nsfw_toggle:success\",this.toggle_nsfw_class,this);this.model.on(\"adult_toggle:success\",this.toggle_adult_class,this);this.model.on(\"spam_toggle:success\",this.toggle_spam_class,this);this.model.on(\"unfollow:success\",this.toggle_follow_class,this);this.model.on(\"follow:success\",this.toggle_follow_class,this);this.$el.on(\"click\",\".user_menu_toggle_spam\",_.bind(this.toggle_spam,this));this.$el.on(\"click\",\".user_menu_toggle_nsfw\",_.bind(this.toggle_nsfw,this));this.$el.on(\"click\",\".user_menu_toggle_adult\",_.bind(this.toggle_adult,this));this.$el.on(\"click\",\".user_menu_toggle_follow\",_.bind(this.toggle_follow,this));this.$el.on(\"click\",\".fan_mail\",_.bind(this.fan_mail,this));q.Popover.prototype.initialize.apply(this,arguments)},on_show:function(){this.position();this.$el.addClass(\"active\")},on_hide:function(){this.$el.removeClass(\"active\")},fan_mail:function(r){if(_.isObject(q.FanMail)){r.preventDefault();this.hide();this.model.fan_mail()}},toggle_spam:function(r){r.preventDefault();this.hide();this.model.toggle_spam_tumblelog()},toggle_nsfw:function(r){r.preventDefault();this.hide();this.model.toggle_nsfw_tumblelog()},toggle_adult:function(r){r.preventDefault();this.hide();this.model.toggle_adult_tumblelog()},toggle_follow:function(r){r.preventDefault();this.hide();this.model.toggle_follow(\"FOLLOW_SOURCE_DASHBOARD\")},toggle_spam_class:function(){this.$(\".user_menu_toggle_spam\").toggleClass(\"is_spam\")},toggle_nsfw_class:function(){this.$(\".user_menu_toggle_nsfw\").toggleClass(\"is_nsfw\")},toggle_adult_class:function(){this.$(\".user_menu_toggle_adult\").toggleClass(\"is_adult\")},toggle_follow_class:function(){this.$(\".user_menu_toggle_follow\").toggleClass(\"follow\").toggleClass(\"unfollow\")}});var c=Backbone.View.extend({events:{\"click .post_control.like:not(.liked)\":\"like\",\"click .post_control.liked\":\"unlike\",\"click .post_control.reblog\":\"reblog\",\"click .post_control.reply\":\"reply\",\"click .post_control.block\":\"ignore\",\"click .post_control.publish\":\"publish\",\"click .post_control.queue\":\"queue\",\"click .post_control.queue_submission\":\"queue_submission\",\"click .post_control.delete\":\"delete\",\"click .post_control.approve\":\"approve\",\"click .post_control.post_control_menu.creator\":\"creator_popover\",\"click .post_control.post_control_menu.admin\":\"admin_popover\",\"click .tumblelog_menu_button\":\"user_popover\",\"touchend .tumblelog_menu\":\"user_popover\",\"click .post_control.deny\":\"deny\",\"click .note .follow\":\"follow\",\"click .photo_reply_image_container\":\"photo_reply_click\",'click .reblog_follow_button:not(\".onboard\")':\"follow_reblog\"},initialize:function(){this.controls={};this.controls.like=this.$el.find(\".post_control.like\");this.controls.reblog=this.$el.find(\".post_control.reblog\");this.note_count=this.$el.find(\".note_count\");this.tagsDraggable();if(this.model.get(\"accepts_answers\")){this.setupAnswerForm()}this.like_heart_timeout=null;this.is_click_trigger=false;this.is_reblogged=false;this.model.on(\"like:success\",_.bind(this.updateLikeStatus,this,true));this.model.on(\"unlike:success\",_.bind(this.updateLikeStatus,this,false));this.model.on(\"like:success\",_.bind(this.updateNoteCount,this,true));this.model.on(\"unlike:success\",_.bind(this.updateNoteCount,this,false));this.model.on(\"destroy:success\",this.destroy,this);this.model.on(\"dismiss\",this.destroy,this);this.model.on(\"publish:success\",this.destroy,this);this.model.on(\"queue:success\",this.destroy,this);this.model.on(\"unpromote:success\",this.destroy,this);this.model.on(\"promote:failure\",this.alert,this);this.model.on(\"deny:success\",this.destroy,this);this.model.on(\"approve:success\",this.destroy,this);this.model.on(\"answer:success\",this.answer,this);this.model.on(\"fastreblog:success\",this.updateReblog,this);this.model.on(\"remove_source:success\",this.hidePost,this);this.model.reblog_tumblelog&&this.model.reblog_tumblelog.on(\"change:following\",this.updateReblogFollow,this);this.current_link=true;this.less_link=false;this.more_link=false},edit:function(){if(!q.PostForms){return}q.PostForms.edit({type:this.model.get(\"type\"),edit:true,channel_id:this.model.get(\"tumblelog\"),post_id:this.model.get(\"id\"),endpoint:this.model.get(\"type\"),attach_to:this.$el,previous_content_selector:this.$(\".post_wrapper\"),adjust_offset:true})},\"delete\":function(s){s.preventDefault();var r=g(s.currentTarget).data(\"confirm\");q.Dialog.confirm(r,_.bind(this.model.destroy,this.model))},deny:function(s){s.preventDefault();var r=g(s.currentTarget).data(\"confirm\");q.Dialog.confirm(r,_.bind(function(){this.destroy();this.model.deny()},this))},approve:function(s){s.preventDefault();var r=g(s.currentTarget).data(\"confirm\");q.Dialog.confirm(r,_.bind(this.model.approve,this.model,false))},queue:function(s){s.preventDefault();var r=g(s.currentTarget).data(\"confirm\");q.Dialog.confirm(r,_.bind(this.model.queue,this.model))},queue_submission:function(s){s.preventDefault();var r=g(s.currentTarget).data(\"confirm\");q.Dialog.confirm(r,_.bind(this.model.approve,this.model,true))},creator_popover:function(r){if(r.target!=r.currentTarget){return}var s=g(r.currentTarget);if(!(this.creatorPopover instanceof e)){this.creatorPopover=new e({model:this.model,el:g(r.target),on_hide:_.bind(function(){s.removeClass(\"active\")},this)});this.creatorPopover.on(\"action:edit\",_.bind(this.edit,this))}s.addClass(\"active\");this.creatorPopover.show()},admin_popover:function(r){if(r.target!=r.currentTarget){return}if(!(this.adminPopover instanceof b)){this.adminPopover=new b({model:this.model,el:g(r.target)})}this.adminPopover.show()},user_popover:function(s){var r=(s.type==\"touchend\");if(r){s.preventDefault();s.stopPropagation();this.$el.off(\"click\",\".tumblelog_menu_button\")}if(!(this.userPopover instanceof h)){var t=this.$(s.currentTarget);this.userPopover=new h({model:this.model,el:r?t:t.closest(\".tumblelog_menu\"),popover:r?t.find(\".popover\"):t.siblings(\".popover\")})}this.userPopover.show()},like:function(r){r.preventDefault();this.is_click_trigger=true;this.model.like(\"mouse\")},unlike:function(r){r.preventDefault();this.is_click_trigger=true;this.model.unlike()},reply:function(r){var s=g(r.currentTarget);if(!(this.replyPopover instanceof i)){this.replyPopover=new i({model:this.model,el:s});this.replyPopover.on(\"success\",function(){s.addClass(\"replied\")});this.replyPopover.on(\"close\",function(){s.removeClass(\"active\")})}s.addClass(\"active\");this.replyPopover.show()},publish:function(s){s.preventDefault();var r=g(s.currentTarget).data(\"confirm\");q.Dialog.confirm(r,_.bind(this.model.publish,this.model))},reblog:function(r){if(r.altKey&&!this.model.reblogged){r.preventDefault();this.is_click_trigger=true;return this.fastReblog(r)}if(this.is_reblogged||!q.PostForms){return}r.preventDefault();this.is_click_trigger=true;q.PostForms.edit({type:this.model.get(\"type\"),channel_id:this.model.get(\"tumblelog\"),reblog_id:this.model.get(\"id\"),endpoint:this.model.get(\"type\"),detached:true,reblog:true,animate_from:this.$el,reblog_key:this.model.get(\"reblog_key\"),previous_content_selector:null})},fastReblog:function(r){r.stopPropagation();r.preventDefault();if(!this.is_reblogged){this.model.fastReblog()}},follow:function(t){t.preventDefault();var s=g(t.currentTarget);var r=s.closest(\".note\");var u=r.data(\"tumblelog\");r.addClass(\"is_following\");this.model.follow(u)},follow_reblog:function(){if(!this.model.reblog_tumblelog){return false}var r=this.$('.reblog_follow_button:not(\".onboard\")');r.addClass(\"active animated poof\");this.model.reblog_tumblelog.save_following({following:true},{source:(function(t,s){if(t===\"dashboard_posts_likes\"){s=\"FOLLOW_SOURCE_REBLOG_TAGGED\"}if(t===\"tagged_display\"){s=\"FOLLOW_SOURCE_REBLOG_LIKES\"}if(g(\"body\").hasClass(\"tablet\")){s=\"FOLLOW_SOURCE_REBLOG_TABLET\"}return s})(document.body.id,\"FOLLOW_SOURCE_REBLOG\"),placement_id:this.model.get(\"placement_id\")}).done(function(){r.addClass(\"final_state\")}).fail(function(){q.Dialog.alert(l10n_str.ajax_error)});return false},ignore:function(s){s.preventDefault();var r=g(s.target).data(\"block\")||this.model.get(\"tumblelog\");var t=q.TumblelogActions.confirm_ignore({tumblelog:r,avatar_url:this.$(\".post_avatar_link\").attr(\"data-avatar-url\")});t.done(_.bind(this.model.ignore,this.model,r))},hidePost:function(r){this.$el.fadeOut(\"fast\")},updateReblogFollow:function(r,s){if(r._previousAttributes.following==null||r._previousAttributes.following===s){return}if(s===false){this.$('.reblog_follow_button:not(\".onboard\")').removeClass(\"active animated poof final_state\")}},updateReblog:function(r){this.is_reblogged=true;var t=g('<div class=\"post_reblog_poof post_poof\"></div>'),s=this.controls.reblog;if(r){t.addClass(\"queue\")}if(this.is_click_trigger){s.append(t)}else{if(this.$el.height()>g(window).height()){t.css(\"top\",g(window).height()*0.5)}this.$el.append(t)}this.is_click_trigger=false;setTimeout(function(){t.fadeOut(200,function(){t.remove();s.addClass(\"reblogged\");if(r){s.addClass(\"queued\")}})},300)},updateLikeStatus:function(s){this.controls.like.toggleClass(\"liked\",s);var r=g('<div class=\"post_animated_heart post_poof\"><span class=\"heart_left\"></span><span class=\"heart_right\"></span></div>').toggleClass(\"unliked\",!s);if(this.is_click_trigger){this.controls.like.append(r)}else{if(this.$el.height()>g(window).height()){r.css(\"top\",g(window).height()*0.5)}if(g(\".post_animated_heart\").length>0){var t=0.2+(Math.random()*0.6);r.css(\"left\",this.$el.width()*t)}this.$el.append(r)}this.is_click_trigger=false;setTimeout(function(){r.fadeOut(200,function(){r.remove()})},300)},updateNoteCount:function(s){var r=this.$(\".note_link_current\"),t;if(s){t=r.data(\"more\");if(r.data(\"more\")!=r.text()){r.data(\"less\",r.text())}this.$el.removeClass(\"no_notes\")}else{t=r.data(\"less\");if(!t.length){this.$el.addClass(\"no_notes\")}}r.text(t);r.attr(\"title\",t)},destroy:function(){this.$el.fadeOut(500,function(){this.unbind();this.$el.parent().remove();q.Events.trigger(\"DOMEventor:updateRect\");this.remove()}.bind(this))},alert:function(r){alert(r)},tagsDraggable:function(){var r=this.$(\".post_tags\");var s=r.find(\".post_tags_inner\");if(r.width()<s.width()){r.addClass(\"draggable no_pop\");new o({el:r})}},setupAnswerForm:function(){var r=this.$(\".post_answer\");if(!(this.answer_form instanceof n)&&r.find(\".post_answer_input\").length){this.answer_form=new n({model:this.model,el:r,existing_note:this.$el.hasClass(\"existing_note\")})}},answer:function(){this.$el.addClass(\"existing_note\")},photo_reply_click:function(r){q.Lightbox.init([{high_res:g(r.currentTarget).find(\"img\").attr(\"src\"),low_res:g(r.currentTarget).find(\"img\").attr(\"src\"),width:500}])}});var f=c.extend({events:{\"click .post_control.like\":\"send_to_signup\",\"click .post_control.reblog\":\"send_to_signup\"},send_to_signup:function(r){if(r){g(r.currentTarget).trigger(\"PostsView:send_to_signup\",[r,this]);if(r.isPropagationStopped()){return false}r.preventDefault();r.stopPropagation()}window.open(\"/register\");return false}});var l=c.extend({events:{'click [data-action=\"ignore\"]':\"ignore\",'click [data-action=\"read_more\"]':\"read_more\",'click [data-action=\"deny\"]':\"deny\",'click [data-action=\"reply\"]':\"reply\"},read_more:function(r){r.preventDefault();this.$(\".read_more\").hide();this.$(\".message_body_truncated\").hide();this.$(\".message_body\").show()},reply:function(r){r.preventDefault();q.FanMail.show(r.target)},deny:function(r){c.prototype.deny.call(this,r)}});q.NotesPopover=q.PopoverWithScroll.extend({show_by_el:function(r){this.$el=g(r);this.$container=this.$el.find(\".notes_container\");this.$scroll=this.$el.find(\".popover_scroll\");this.popover=this.$el.find(\".popover\");this.show()}});q.Notes=Backbone.View.extend({el:\"#posts\",loading_notes:false,at_end:false,events:{\"click .post_notes_label\":\"show_notes\",\"click .more_notes_link\":\"on_more_click\",keydown:\"on_keydown\"},initialize:function(){var r=this;this.popover=new q.NotesPopover({direction:\"left\",disable_auto_show:true,on_show:function(){r.on_notes_show(this.$el)},on_load_more:function(){if(!r.loading_notes&&this.$el.find(\"a.more_notes_link\").length>0){r.more_notes(this.$el.closest(\".post\"))}}})},show_notes:function(r){r.preventDefault();if(this.popover.is_showing){return}this.popover.show_by_el(r.currentTarget);q.KeyCommands.suspend([74,75])},create_note_views:function(r){r.find(\".note:not([data-view-exists])\").each(function(t,v){if(g(v).hasClass(\"reblog\")){var u=new q.ReblogNoteView({el:v})}else{var s=new q.NoteView({el:v})}g(v).attr(\"data-view-exists\",true)});this.popover.update()},updateControls:function(s,t){var r=s.find(\".more_notes_link\");if(t){s.show();r.attr(\"data-next\",t).show()}else{this.at_end=true;this.popover.is_scroll_disabled=true;r.attr(\"data-notes-complete\",true);s.hide()}},animate_in:function(r){this.loading_notes=true;r.slideDown(300,_.bind(function(){this.loading_notes=false},this))},on_more_click:function(r){r.preventDefault();this.more_notes(g(r.currentTarget).closest(\".post\"))},on_keydown:function(s){var r=s.charCode?s.charCode:s.keyCode;if(r===78&&this.popover.is_showing){s.preventDefault();s.stopPropagation();this.popover.hide()}},on_notes_show:function(t){var s=g(t),r=s.closest(\".post\");this.at_end=(s.find(\".more_notes_link\").data(\"notes-complete\"))?true:false;this.popover.is_scroll_disabled=this.at_end;if(!s.attr(\"data-notes-loaded\")){this.load_notes(r,{},_.bind(function(v,w,u){if(!v){this.popover.hide()}s.attr(\"data-notes-loaded\",true)},this))}},more_notes:function(r){$post=g(r);$link=$post.find(\".more_notes_link\").hide();$loading=$post.find(\".notes_loading\").show();this.loading_notes=true;this.load_notes($post,{from_id:$link.attr(\"data-next\")},_.bind(function(t,u,s){$loading.hide();$link.show();this.loading_notes=false},this))},load_notes:function(r,t,u){var s=\"/dashboard/notes/\"+r.attr(\"data-post-id\")+\"/\"+r.attr(\"data-tumblelog-key\")+\"/\"+r.attr(\"data-tumblelog-name\");if(t.from_id){s+=\"?from_c=\"+t.from_id}g.ajax(s).done(_.bind(function(A,B,y){var x=r.find(\".more_notes_link_container\"),v=r.find(\".notes\"),w=r.find(\".more_notes_link\"),z=r.find(\".notes_loading\");w.show();z.hide();A=g.trim(A);this.updateControls(x,y.getResponseHeader(\"X-next-note\"));v.append(g(A).children());this.create_note_views(v);q.Events.trigger(\"DOMEventor:updateRect\");u(A,B,y)},this))}});var o=Backbone.View.extend({initialize:function(){this.dragging=false;this.drag_x=false;this.drag_inner=this.$(\".post_tags_inner\");this.doc=g(document);this.d=this.getDimensions();this.transform=this.isTransformSupported();this.bindEvents()},bindEvents:function(){this.$el.on(\"mousedown touchstart touchmove mouseleave mouseup touchend\",\".post_tags_inner\",_.bind(this.dragEvents,this));this.$el.on(\"click\",\".post_tag\",_.bind(this.handleLinks,this))},getDimensions:function(){var s=this.$el.width();var r=this.drag_inner.width();return{post_width:s,tag_width:r,max_left:0,max_right:((s-r)-10)}},isTransformSupported:function(){var s=\"transform WebkitTransform MozTransform OTransform msTransform\".split(\" \");for(var r=0;r<s.length;r++){if(document.createElement(\"div\").style[s[r]]!==undefined){return true}}return false},dragEvents:function(r){switch(r.type){case\"mousedown\":case\"touchstart\":this.dragStart(r);break;case\"mousemove\":case\"touchmove\":if(this.pointer_down){this.dragMove(r)}break;case\"touchend\":case\"mouseup\":this.dragEnd(r);break}},bindDocEvents:function(){this.doc.on(\"mousemove.tagsDraggable\",_.bind(this.dragEvents,this));this.doc.on(\"mouseup.tagsDraggable\",_.bind(this.resetDrag,this))},unbindDocEvents:function(){this.doc.off(\"mousemove.tagsDraggable\");this.doc.off(\"mouseup.tagsDraggable\")},dragStart:function(r){r.preventDefault();if(!this.dragging&&!this.pointer_down){this.pointer_down=true;this.start_x=this.drag_inner.position().left;this.page_x=(\"pageX\" in r?r.pageX:r.originalEvent.touches[0].pageX);this.bindDocEvents()}},dragMove:function(s){s.preventDefault();s.stopPropagation();this.drag_inner[0].classList.add(\"dragging\");this.dragging=true;var r=(\"clientX\" in s?s.clientX:s.originalEvent.touches[0].clientX)-this.page_x;this.drag_x=r+this.start_x;this.dragSet(this.drag_x)},dragSet:function(r){if(this.transform){this.drag_inner.css(\"transform\",\"translate(\"+r+\"px, 0)\")}else{this.drag_inner.css(\"left\",r)}},handleLinks:function(r){r.preventDefault();r.stopPropagation();if(!this.dragging){window.open(g(r.currentTarget).attr(\"href\"),\"_blank\")}return false},resetDragPosition:function(){if(this.drag_x>this.d.max_left){this.dragSet(this.d.max_left)}else{if(this.drag_x<this.d.max_right){this.dragSet(this.d.max_right)}}},dragEnd:function(s){s.preventDefault();s.stopPropagation();var r=_.bind(this.resetDrag,this);_.delay(r,100)},resetDrag:function(){if(this.dragging||this.pointer_down){this.dragging=false;this.pointer_down=false;this.drag_inner[0].classList.remove(\"dragging\");this.resetDragPosition();this.unbindDocEvents()}}});var n=Backbone.View.extend({events:{\"keyup .post_answer_input\":\"keyup\",\"focus .post_answer_input\":\"focus\",\"blur  .post_answer_input\":\"blur\",\"click .post_answer_submit\":\"submit\"},initialize:function(r){this.options=r||{};this.max_length=140;this.answer_input=this.$(\".post_answer_input\");this.answer_submit=this.$(\".post_answer_submit\");this.answer_length=this.$(\".post_answer_length\");this.answer_error_message=this.answer_input.data(\"error-message\");this.existing_note=this.options.existing_note||false;this.answer_text=this.answer_input.val();this.model.on(\"answer:success\",this.answer,this);this.model.on(\"answer:failure\",this.error,this)},keyup:function(r){if(this.existing_note){return false}this.remaining_chars=this.max_length-this.getAnswerLength();if(this.remaining_chars<=0){this.remaining_chars=0}this.answer_length.text(this.remaining_chars);this.answer_text=(this.answer_text!==this.answer_input.val())?this.answer_input.val():this.answer_text;if(r.keyCode==13){r.preventDefault();this.answer_post()}},focus:function(r){if(this.existing_note){return false}this.answer_text=this.answer_input.val();this.$el.addClass(\"show_submit\")},blur:function(r){if(this.getAnswerLength()==0){this.$el.removeClass(\"show_submit\")}},submit:function(r){r.preventDefault();this.answer_post()},answer_post:function(){if(this.getAnswerLength()){this.model.answer(this.getAnswer())}},answer:function(){this.answer_input.blur();this.answer_input.attr(\"readonly\",\"readonly\")},error:function(){q.Dialog.confirm(this.answer_error_message)},getAnswerLength:function(){return this.getAnswer().length},getAnswer:function(){return g.trim(this.answer_input.val())}});q.Post=d;q.PostView=c;q.Posts=new m();q.PostsView=k;g(function(r){new q.PostsView();if(q&&q.Capture){q.CaptureWebInStream=new q.Capture.WebInStream()}})})(jQuery,Tumblr);"}
],
[
{"endColumn":8358,"endLine":0,"scriptId":"123","startColumn":0,"startLine":0,"url":"http://assets.tumblr.com/assets/scripts/mention.js?_v=a1bbf6a9ae130736ca706f42733959e1"},{"scriptSource":"(function(c,a){var b=Backbone.View.extend({defaults:{left_offset:-36,top_offset:13},default_templates:{popover:'<div id=\"mention_popover_<%= uid %>\" class=\"popover popover_menu popover_gradient mention_popover nipple_on_<%- nipple_position %>\" style=\"display:none;\"><div class=\"popover_inner\"><%= items %></div></div>',items:'<% _.each(items, function(item, i) { %><div id=\"mention_<%- i %>\" class=\"popover_menu_item\" data-tumblelog=\"<%- items[i].name %>\"><div class=\"t_info\"><span class=\"t_name\"><%= items[i].hilite_name %></span><span class=\"t_title\"><%- items[i].title %></span></div><span class=\"result_thumb thumb\" style=\"background-image:url(\\'<%- items[i].avatar_url %>\\')\"></span></div><% }); %>'},events:{\"mouseenter .popover_menu_item\":\"_hover\",\"mouseleave .popover_menu_item\":\"_hover\",\"click .popover_menu_item\":\"_click\"},initialize:function(d){this.options=d||{};this.options=_.extend(this.defaults,this.options);if(!_.isObject(this.options.list)||_.isUndefined(this.options.list.blogs)){return false}this.templates=this.default_templates;this.uid=Math.floor(Math.random()*100001);this.position=this.options.position;this.list=this.options.list.blogs;this.is_active=false;this.$popover=false;this.$items=false;this.$container=c(this.options.container);this.show()},_html_items:function(d){var f={items:d};var e=_.template(this.templates.items);return e(f)},_html_popover:function(d){var f={uid:this.uid,nipple_position:\"top\",items:d};var e=_.template(this.templates.popover);return e(f)},show:function(){c(\".popover.mention_popover\").remove();if(!_.isObject(this.list)||this.list.length===0){c(\"#mention_popover_\"+this.uid).hide();this.is_active=false;return false}var e=this._items_underline(this.list,this.options.mention);var d=this._html_items(e);var f=this._html_popover(d);this.$container.append(f);this.$popover=c(\"#mention_popover_\"+this.uid);this.popover=new Tumblr.Popover({el:this.$popover,popover:this.$popover,button:this.$container,skip_glass:true,skip_offset:true,left:(this.position.left+this.options.left_offset),top:(this.position.top+this.position.height+this.options.top_offset),disable_auto_show:true,on_show:_.bind(function(){},this),on_hide:_.bind(function(){},this)});this.$items=jQuery(\".popover_menu_item\",this.$popover);this.$el=this.$popover;this.popover.show();this.is_active=true},hide:function(){this.is_active=false;this.$items=false;if(this.popover&&this.popover.is_showing){this.popover.hide()}},update:function(g,e,d){if(!this.is_active){return false}if(!_.isUndefined(d)){this.position=d}this._update_position();this.list=this._items_underline(e.blogs,g);var f=this._html_items(this.list);c(\".popover_inner\",this.$popover).html(f);this.$items=jQuery(\".popover_menu_item\",this.$popover);this._remove_helpers();if(!_.isObject(this.list)||this.list.length===0){this.$popover.hide()}else{this.$popover.show()}},update_position:function(d){if(!_.isObject(d)||!_.isObject(this.position)){return}if((this.position.left===d.left)&&(this.position.top===d.top)){return}this.position=d;this._update_position()},_update_position:function(){if(this.$popover.length>0){this.$popover.css({left:(this.position.left+this.options.left_offset),top:(this.position.top+this.position.height+this.options.top_offset)})}},up:function(){if(!this.is_active||!this.$popover){return false}if(!this.$items||this.$items.length===0){return false}this._remove_helpers();var d=this.$items.filter(\".focus\");var e=this.$items.index(d);if(e===-1){$next=this.$items.filter(\":last\")}else{$next=this.$items.filter(\":eq(\"+(e-1)+\")\")}d.removeClass(\"focus\");this._update_current($next);return true},down:function(){if(!this.is_active||!this.$popover){return false}if(!this.$items||this.$items.length===0){return false}this._remove_helpers();var d=this.$items.filter(\".focus\");var e=this.$items.index(d);if(e===-1||e>=(this.$items.length-1)){$next=this.$items.filter(\":first\")}else{$next=this.$items.filter(\":eq(\"+(e+1)+\")\")}d.removeClass(\"focus\");this._update_current($next);return true},enter:function(e,d){if(!this.is_active||!this.$popover){return false}if(!this.$items||this.$items.length===0){return false}var h=false;var g=this.$items.filter(\".focus\");if(!h&&g.length===1){h=g.data(\"tumblelog\")}var f=this.$items.first();if(!h&&f.length===1){h=f.data(\"tumblelog\")}if(h){if(!_.isUndefined(e)){if(h.toUpperCase()!==e.toUpperCase()){return false}}Tumblr.Mention.tinymce.set_suggestion(h,(!_.isUndefined(d)&&d===true));return true}return false},_hover:function(d){if(this.$items&&this.$items.length>0){this.$items.removeClass(\"focus\")}this._remove_helpers();$next=jQuery(d.currentTarget);this._update_current($next)},_click:function(d){$current=jQuery(d.currentTarget).closest(\".popover_menu_item\");Tumblr.Mention.tinymce.set_suggestion($current.data(\"tumblelog\"));return false},_update_current:function(d){if(!d||d.length===0){return}d.addClass(\"focus\");this._remove_helpers();if(d.is(\":first-child\")){this.$el.addClass(\"first-item\")}else{if(d.is(\":last-child\")){this.$el.addClass(\"last-item\")}else{this.$el.addClass(\"inner-item\")}}var e=d.data(\"tumblelog\");if(!_.isUndefined(e)){Tumblr.Mention.tinymce.update_typeahead(e)}},_remove_helpers:function(){this.$el.removeClass(\"inner-item first-item last-item\")},is_selected:function(){if(!this.is_active||!this.$items||this.$items.length===0){return false}$selected=this.$items.filter(\".focus\");return($selected.length===1)},destroy:function(){this.hide();if(this.$popover){this.$popover.remove()}},_items_underline:function(d,e){var f=new RegExp(this._escapeRegExp(e),\"gi\"),g=this.decorate_item_substring;if(!f){return false}_.each(d,function(j,h){d[h].hilite_name=j.name.replace(f,g)});return d},decorate_item_substring:function(d){return\"<u>\"+d+\"</u>\"},_escapeRegExp:function(d){return d.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|\\~\\`\\!\\@\\#]/g,\"\\\\$&\")}});a.MentionPopover=b})(jQuery,Tumblr);(function(c,b){var a=Backbone.Model.extend({defaults:{route:\"/svc/mention\"},initialize:function(d){this.options=_.extend(this.defaults,this.options);this.form_key=c(\"#tumblr_form_key\").attr(\"content\");this.user_cache={};this.tinymce=false;this.container=false;this.popover=false;this.last_search=false;this.is_waiting=false;this.is_active=false;this.req=false},setup:function(d){if(d){this.tinymce=d}},search:function(d,f){if(!_.isFunction(f)){var f=function(){}}if(!_.isUndefined(this.user_cache[d])){if((!this.tinymce.is_mention_active())||(this.tinymce.mention_string(true)!==d.toUpperCase())){return}f.call(this.user_cache[d],d,this);this.show(this.container,this.position,this.user_cache[d],d);return}if((typeof this.req===\"object\")&&this.req!==false){this.req.abort()}this.is_waiting=true;var e=c.ajax({url:this.options.route,type:\"GET\",data:{q:d,form_key:this.form_key}});e.done(_.bind(function(g){this.user_cache[d]=g;if((!this.tinymce.is_mention_active())||(this.tinymce.mention_string(true)!==d.toUpperCase())){return}f.call(this.user_cache[d],d,this);this.show(this.container,this.position,this.user_cache[d],d);this._reset()},this));e.fail(_.bind(function(){this.user_cache[d]={};this._reset();if(!Tumblr.Dialog.is_visible){Tumblr.Dialog.alert(l10n_str.ajax_error)}},this))},_reset:function(){if((typeof this.req===\"object\")&&this.req!==false){this.req.abort()}this.is_waiting=false},update:function(e,f,d,g){if(f.string===this.last_search){return}this.last_search=f.string;this.container=e;this.mention=f;this.position=d;this.search(f.string);if(_.isFunction(g)){g()}},show:function(e,d,g,f){if(!this.tinymce.is_mention_active()){return}if(this.popover&&this.popover.is_active){this.popover.update(f,g,d)}else{this.is_active=true;this.popover=new Tumblr.MentionPopover({container:e,position:d,mention:f,list:g});if(typeof _gaq!==\"undefined\"&&_gaq){_gaq.push([\"_trackEvent\",\"mentions\",\"popover\",\"opened\"])}}var h=\"\";if(_.isObject(g.blogs)&&!_.isEmpty(g.blogs)){h=g.blogs[0].name}if((!this.tinymce.is_mention_active())||(this.tinymce.mention_string(true)!==f.toUpperCase())){return}this.tinymce.update_typeahead(h)},update_position:function(d){if(!_.isObject(d)||!this.popover&&!this.popover.is_active){return}this.popover.update_position(d)},hide:function(d){if(!_.isUndefined(d)&&(d===true)){if(this.is_active){this.tinymce.abort_current(false)}}this._reset();this.is_active=false;this.last_search=false;if(_.isObject(this.popover)){this.popover.destroy()}}});b.Mention=new a()})(jQuery,Tumblr);"}
],
[
{"endColumn":0,"endLine":2,"scriptId":"124","startColumn":0,"startLine":0,"url":"http://assets.tumblr.com/assets/scripts/audio_player.js?_v=3c2d3dee544d5bd882f88ff370888a9f"},{"scriptSource":"(function(e,b,a){var d=(function(){var j=new RegExp(\"audio(\\\\.min)?\\\\.js.*\"),f=document.getElementsByTagName(\"script\");for(var g=0,h=f.length;g<h;g++){var k=f[g].getAttribute(\"src\");if(j.test(k)){return k.replace(j,\"\")}}return\"\"})();a[e]={instanceCount:0,instances:{},flashSource:'      <object classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\" id=\"$1\" width=\"1\" height=\"1\" name=\"$1\" style=\"position: absolute; left: -1px;\">         <param name=\"movie\" value=\"$2?playerInstance='+e+'.instances[\\'$1\\']&datetime=$3\">         <param name=\"allowscriptaccess\" value=\"always\">         <embed name=\"$1\" src=\"$2?playerInstance='+e+'.instances[\\'$1\\']&datetime=$3\" width=\"1\" height=\"1\" allowscriptaccess=\"always\">       </object>',settings:{autoplay:false,loop:false,preload:true,imageLocation:d+\"player-graphics.gif\",swfLocation:d+\"audiojs.swf\",useFlash:(function(){var f=document.createElement(\"audio\");return !(f.canPlayType&&f.canPlayType(\"audio/mpeg;\").replace(/no/,\"\"))})(),hasFlash:(function(){if(navigator.plugins&&navigator.plugins.length&&navigator.plugins[\"Shockwave Flash\"]){return true}else{if(navigator.mimeTypes&&navigator.mimeTypes.length){var h=navigator.mimeTypes[\"application/x-shockwave-flash\"];return h&&h.enabledPlugin}else{try{var f=new ActiveXObject(\"ShockwaveFlash.ShockwaveFlash\");return true}catch(g){}}}return false})(),createPlayer:{markup:'          <div class=\"play-pause\">             <p class=\"play\"></p>             <p class=\"pause\"></p>             <p class=\"loading\"></p>             <p class=\"error\"></p>           </div>           <div class=\"scrubber\">             <div class=\"progress\"></div>             <div class=\"loaded\"></div>           </div>           <div class=\"time\">             <em class=\"played\">00:00</em>/<strong class=\"duration\">00:00</strong>           </div>           <div class=\"error-message\"></div>',playPauseClass:\"play-pause\",scrubberClass:\"scrubber\",progressClass:\"progress\",loaderClass:\"loaded\",timeClass:\"time\",durationClass:\"duration\",playedClass:\"played\",errorMessageClass:\"error-message\",playingClass:\"playing\",loadingClass:\"loading\",errorClass:\"error\"},css:'        .audiojs audio { position: absolute; left: -1px; }         .audiojs { width: 460px; height: 36px; background: #404040; overflow: hidden; font-family: monospace; font-size: 12px;           background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #444), color-stop(0.5, #555), color-stop(0.51, #444), color-stop(1, #444));           background-image: -moz-linear-gradient(center top, #444 0%, #555 50%, #444 51%, #444 100%);           -webkit-box-shadow: 1px 1px 8px rgba(0, 0, 0, 0.3); -moz-box-shadow: 1px 1px 8px rgba(0, 0, 0, 0.3);           -o-box-shadow: 1px 1px 8px rgba(0, 0, 0, 0.3); box-shadow: 1px 1px 8px rgba(0, 0, 0, 0.3); }         .audiojs .play-pause { width: 25px; height: 40px; padding: 4px 6px; margin: 0px; float: left; overflow: hidden; border-right: 1px solid #000; }         .audiojs p { display: none; width: 25px; height: 40px; margin: 0px; cursor: pointer; }         .audiojs .play { display: block; }         .audiojs .scrubber { position: relative; float: left; width: 280px; background: #5a5a5a; height: 14px; margin: 10px; border-top: 1px solid #3f3f3f; border-left: 0px; border-bottom: 0px; overflow: hidden; }         .audiojs .progress { position: absolute; top: 0px; left: 0px; height: 14px; width: 0px; background: #ccc; z-index: 1;           background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #ccc), color-stop(0.5, #ddd), color-stop(0.51, #ccc), color-stop(1, #ccc));           background-image: -moz-linear-gradient(center top, #ccc 0%, #ddd 50%, #ccc 51%, #ccc 100%); }         .audiojs .loaded { position: absolute; top: 0px; left: 0px; height: 14px; width: 0px; background: #000;           background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #222), color-stop(0.5, #333), color-stop(0.51, #222), color-stop(1, #222));           background-image: -moz-linear-gradient(center top, #222 0%, #333 50%, #222 51%, #222 100%); }         .audiojs .time { float: left; height: 36px; line-height: 36px; margin: 0px 0px 0px 6px; padding: 0px 6px 0px 12px; border-left: 1px solid #000; color: #ddd; text-shadow: 1px 1px 0px rgba(0, 0, 0, 0.5); }         .audiojs .time em { padding: 0px 2px 0px 0px; color: #f9f9f9; font-style: normal; }         .audiojs .time strong { padding: 0px 0px 0px 2px; font-weight: normal; }         .audiojs .error-message { float: left; display: none; margin: 0px 10px; height: 36px; width: 400px; overflow: hidden; line-height: 36px; white-space: nowrap; color: #fff;           text-overflow: ellipsis; -o-text-overflow: ellipsis; -icab-text-overflow: ellipsis; -khtml-text-overflow: ellipsis; -moz-text-overflow: ellipsis; -webkit-text-overflow: ellipsis; }         .audiojs .error-message a { color: #eee; text-decoration: none; padding-bottom: 1px; border-bottom: 1px solid #999; white-space: wrap; }                 .audiojs .play { background: url(\"$1\") -2px -1px no-repeat; }         .audiojs .loading { background: url(\"$1\") -2px -31px no-repeat; }         .audiojs .error { background: url(\"$1\") -2px -61px no-repeat; }         .audiojs .pause { background: url(\"$1\") -2px -91px no-repeat; }                 .playing .play, .playing .loading, .playing .error { display: none; }         .playing .pause { display: block; }                 .loading .play, .loading .pause, .loading .error { display: none; }         .loading .loading { display: block; }                 .error .time, .error .play, .error .pause, .error .scrubber, .error .loading { display: none; }         .error .error { display: block; }         .error .play-pause p { cursor: auto; }         .error .error-message { display: block; }',trackEnded:function(f){},flashError:function(){var h=this.settings.createPlayer,f=c(h.errorMessageClass,this.wrapper),g='Missing <a href=\"http://get.adobe.com/flashplayer/\">flash player</a> plugin.';if(this.mp3){g+=' <a href=\"'+this.mp3+'\">Download audio file</a>.'}a[e].helpers.removeClass(this.wrapper,h.loadingClass);a[e].helpers.addClass(this.wrapper,h.errorClass);f.innerHTML=g},loadError:function(h){var g=this.settings.createPlayer,f=c(g.errorMessageClass,this.wrapper);a[e].helpers.removeClass(this.wrapper,g.loadingClass);a[e].helpers.addClass(this.wrapper,g.errorClass);f.innerHTML='Error loading: \"'+this.mp3+'\"'},init:function(){var f=this.settings.createPlayer;a[e].helpers.addClass(this.wrapper,f.loadingClass)},loadStarted:function(){var g=this.settings.createPlayer,i=c(g.durationClass,this.wrapper),f=Math.floor(this.duration/60),h=Math.floor(this.duration%60);a[e].helpers.removeClass(this.wrapper,g.loadingClass);i.innerHTML=((f<10?\"0\":\"\")+f+\":\"+(h<10?\"0\":\"\")+h)},loadProgress:function(h){var g=this.settings.createPlayer,i=c(g.scrubberClass,this.wrapper),f=c(g.loaderClass,this.wrapper);f.style.width=(i.offsetWidth*h)+\"px\"},playPause:function(){if(this.playing){this.settings.play()}else{this.settings.pause()}},play:function(){var f=this.settings.createPlayer;a[e].helpers.addClass(this.wrapper,f.playingClass)},pause:function(){var f=this.settings.createPlayer;a[e].helpers.removeClass(this.wrapper,f.playingClass)},updatePlayhead:function(j){var h=this.settings.createPlayer,l=c(h.scrubberClass,this.wrapper),g=c(h.progressClass,this.wrapper);g.style.width=(l.offsetWidth*j)+\"px\";var k=c(h.playedClass,this.wrapper),n=this.duration*j,f=Math.floor(n/60),i=Math.floor(n%60);k.innerHTML=((f<10?\"0\":\"\")+f+\":\"+(i<10?\"0\":\"\")+i)}},create:function(g,f){var f=f||{};if(g.length){return this.createAll(f,g)}else{return this.newInstance(g,f)}},createAll:function(g,k){var f=k||document.getElementsByTagName(\"audio\"),l=[];g=g||{};for(var h=0,j=f.length;h<j;h++){l.push(this.newInstance(f[h],g))}return l},newInstance:function(g,f){var g=g,h=this.helpers.clone(this.settings),l=\"audiojs\"+this.instanceCount,k=\"audiojs_wrapper\"+this.instanceCount,j=this.instanceCount++;if(g.getAttribute(\"autoplay\")!=null){h.autoplay=true}if(g.getAttribute(\"loop\")!=null){h.loop=true}if(g.getAttribute(\"preload\")==\"none\"){h.preload=false}if(f){this.helpers.merge(h,f)}if(h.createPlayer.markup){g=this.createPlayer(g,h.createPlayer,k)}else{g.parentNode.setAttribute(\"id\",k)}var i=new a[b](g,h);if(h.css){this.helpers.injectCss(i,h.css)}if(h.useFlash&&h.hasFlash){this.injectFlash(i,l);this.attachFlashEvents(i.wrapper,i)}else{if(h.useFlash&&!h.hasFlash){h.flashError.apply(i)}}if(!h.useFlash||(h.useFlash&&h.hasFlash)){this.attachEvents(i.wrapper,i)}this.instances[l]=i;return i},createPlayer:function(g,f,j){var i=document.createElement(\"div\"),h=g.cloneNode(true);i.setAttribute(\"class\",\"audiojs\");i.setAttribute(\"className\",\"audiojs\");i.setAttribute(\"id\",j);if(h.outerHTML&&!document.createElement(\"audio\").canPlayType){h=this.helpers.cloneHtml5Node(g);i.innerHTML=f.markup;i.appendChild(h);g.outerHTML=i.outerHTML;i=document.getElementById(j)}else{i.appendChild(h);i.innerHTML=i.innerHTML+f.markup;g.parentNode.replaceChild(i,g)}return i.getElementsByTagName(\"audio\")[0]},attachEvents:function(k,h){if(!h.settings.createPlayer){return}var g=h.settings.createPlayer,j=c(g.playPauseClass,k),i=c(g.scrubberClass,k),f=function(l){var m=0;if(l.offsetParent){do{m+=l.offsetLeft}while(l=l.offsetParent)}return m};a[e].events.addListener(j,\"click\",function(l){h.playPause.apply(h)});a[e].events.addListener(i,\"click\",function(m){var l=m.clientX-f(this);h.skipTo(l/i.offsetWidth)});if(h.settings.useFlash){return}a[e].events.trackLoadProgress(h);a[e].events.addListener(h.element,\"timeupdate\",function(l){h.updatePlayhead.apply(h)});a[e].events.addListener(h.element,\"ended\",function(l){h.trackEnded.apply(h)});a[e].events.addListener(h.source,\"error\",function(l){clearInterval(h.readyTimer);clearInterval(h.loadTimer);h.settings.loadError.apply(h)})},attachFlashEvents:function(f,g){g.swfReady=false;g.load=function(h){g.mp3=h;if(g.swfReady){g.element.load(h)}};g.loadProgress=function(h,i){g.loadedPercent=h;g.duration=i;g.settings.loadStarted.apply(g);g.settings.loadProgress.apply(g,[h])};g.skipTo=function(h){if(h>g.loadedPercent){return}g.updatePlayhead.call(g,[h]);g.element.skipTo(h)};g.updatePlayhead=function(h){g.settings.updatePlayhead.apply(g,[h])};g.play=function(){if(!g.settings.preload){g.settings.preload=true;g.element.init(g.mp3)}g.playing=true;g.element.pplay();g.settings.play.apply(g)};g.pause=function(){g.playing=false;g.element.ppause();g.settings.pause.apply(g)};g.setVolume=function(h){g.element.setVolume(h)};g.loadStarted=function(){g.swfReady=true;if(g.settings.flashReady){g.settings.flashReady.apply(g)}if(g.settings.preload&&g.mp3){g.element.init(g.mp3)}if(g.settings.autoplay){g.play.apply(g)}}},injectFlash:function(h,j){var f=this.flashSource.replace(/\\$1/g,j);f=f.replace(/\\$2/g,h.settings.swfLocation);f=f.replace(/\\$3/g,(+new Date+Math.random()));var g=h.wrapper.innerHTML,i=document.createElement(\"div\");i.innerHTML=f+g;h.wrapper.innerHTML=i.innerHTML;h.element=this.helpers.getSwf(j)},helpers:{merge:function(g,f){for(attr in f){if(g.hasOwnProperty(attr)||f.hasOwnProperty(attr)){g[attr]=f[attr]}}},clone:function(h){if(h==null||typeof(h)!==\"object\"){return h}var f=new h.constructor();for(var g in h){f[g]=arguments.callee(h[g])}return f},addClass:function(f,h){var g=new RegExp(\"(\\\\s|^)\"+h+\"(\\\\s|$)\");if(g.test(f.className)){return}f.className+=\" \"+h},removeClass:function(f,h){var g=new RegExp(\"(\\\\s|^)\"+h+\"(\\\\s|$)\");f.className=f.className.replace(g,\" \")},injectCss:function(g,k){var q=\"\",p=document.getElementsByTagName(\"style\"),j=k.replace(/\\$1/g,g.settings.imageLocation);for(var h=0,o=p.length;h<o;h++){var m=p[h].getAttribute(\"title\");if(m&&~m.indexOf(\"audiojs\")){f=p[h];if(f.innerHTML===j){return}q=f.innerHTML;break}}var l=document.getElementsByTagName(\"head\")[0],n=l.firstChild,f=document.createElement(\"style\");if(!l){return}f.setAttribute(\"type\",\"text/css\");f.setAttribute(\"title\",\"audiojs\");if(f.styleSheet){f.styleSheet.cssText=q+j}else{f.appendChild(document.createTextNode(q+j))}if(n){l.insertBefore(f,n)}else{l.appendChild(styleElement)}},cloneHtml5Node:function(g){var f=document.createDocumentFragment(),h=f.createElement?f:document;h.createElement(\"audio\");var i=h.createElement(\"div\");f.appendChild(i);i.innerHTML=g.outerHTML;return i.firstChild},getSwf:function(f){var g=document[f]||window[f];return g.length>1?g[g.length-1]:g}},events:{memoryLeaking:false,listeners:[],addListener:function(g,f,h){if(g.addEventListener){g.addEventListener(f,h,false)}else{if(g.attachEvent){this.listeners.push(g);if(!this.memoryLeaking){window.attachEvent(\"onunload\",function(){if(this.listeners){for(var j=0,k=this.listeners.length;j<k;j++){a[e].events.purge(this.listeners[j])}}});this.memoryLeaking=true}g.attachEvent(\"on\"+f,function(){h.call(g,window.event)})}}},trackLoadProgress:function(h){if(!h.settings.preload){return}if(!h.element.src){return}var f,i,h=h,g=(/(ipod|iphone|ipad)/i).test(navigator.userAgent);f=setInterval(function(){if(h.element.readyState>-1){if(!g){h.init.apply(h)}}if(h.element.readyState>1){if(h.settings.autoplay){h.play.apply(h)}clearInterval(f);i=setInterval(function(){h.loadProgress.apply(h);if(h.loadedPercent>=1){clearInterval(i)}})}},10);h.readyTimer=f;h.loadTimer=i},purge:function(h){var f=h.attributes,g;if(f){for(g=0;g<f.length;g+=1){if(typeof h[f[g].name]===\"function\"){h[f[g].name]=null}}}f=h.childNodes;if(f){for(g=0;g<f.length;g+=1){purge(h.childNodes[g])}}},ready:(function(){return function(l){var h=window,g=false,k=true,n=h.document,m=n.documentElement,q=n.addEventListener?\"addEventListener\":\"attachEvent\",o=n.addEventListener?\"removeEventListener\":\"detachEvent\",f=n.addEventListener?\"\":\"on\",p=function(r){if(r.type==\"readystatechange\"&&n.readyState!=\"complete\"){return}(r.type==\"load\"?h:n)[o](f+r.type,p,false);if(!g&&(g=true)){l.call(h,r.type||r)}},j=function(){try{m.doScroll(\"left\")}catch(r){setTimeout(j,50);return}p(\"poll\")};if(n.readyState==\"complete\"){l.call(h,\"lazy\")}else{if(n.createEventObject&&m.doScroll){try{k=!h.frameElement}catch(i){}if(k){j()}}n[q](f+\"DOMContentLoaded\",p,false);n[q](f+\"readystatechange\",p,false);h[q](f+\"load\",p,false)}}})()}};a[b]=function(f,g){this.element=f;this.wrapper=f.parentNode;this.source=f.getElementsByTagName(\"source\")[0]||f;this.mp3=(function(h){var i=h.getElementsByTagName(\"source\")[0];return h.getAttribute(\"src\")||(i?i.getAttribute(\"src\"):null)})(f);this.settings=g;this.loadStartedCalled=false;this.loadedPercent=0;this.duration=1;this.playing=false};a[b].prototype={updatePlayhead:function(){var f=this.element.currentTime/this.duration;this.settings.updatePlayhead.apply(this,[f])},skipTo:function(f){if(f>this.loadedPercent){return}this.element.currentTime=this.duration*f;this.updatePlayhead()},load:function(f){this.loadStartedCalled=false;this.source.setAttribute(\"src\",f);this.element.load();this.mp3=f;a[e].events.trackLoadProgress(this)},loadError:function(){this.settings.loadError.apply(this)},init:function(){this.settings.init.apply(this)},loadStarted:function(){if(!this.element.duration){return false}this.duration=this.element.duration;this.updatePlayhead();this.settings.loadStarted.apply(this);return true},loadProgress:function(){if(this.element.buffered!=null&&this.element.buffered.length){if(!this.loadStartedCalled){this.loadStartedCalled=this.loadStarted()}var f=this.element.buffered.end(this.element.buffered.length-1);this.loadedPercent=f/this.duration;this.settings.loadProgress.apply(this,[this.loadedPercent])}},playPause:function(){if(this.playing){this.pause()}else{this.play()}},play:function(){var f=(/(ipod|iphone|ipad)/i).test(navigator.userAgent);if(f&&this.element.readyState==0){this.init.apply(this)}if(!this.settings.preload){this.settings.preload=true;this.element.setAttribute(\"preload\",\"auto\");a[e].events.trackLoadProgress(this)}this.playing=true;this.element.play();this.settings.play.apply(this)},pause:function(){this.playing=false;this.element.pause();this.settings.pause.apply(this)},setVolume:function(f){this.element.volume=f},trackEnded:function(f){this.skipTo.apply(this,[0]);if(!this.settings.loop){this.pause.apply(this)}this.settings.trackEnded.apply(this)}};var c=function(n,j){var m=[];j=j||document;if(j.getElementsByClassName){m=j.getElementsByClassName(n)}else{var h,f,g=j.getElementsByTagName(\"*\"),k=new RegExp(\"(^|\\\\s)\"+n+\"(\\\\s|$)\");for(h=0,f=g.length;h<f;h++){if(k.test(g[h].className)){m.push(g[h])}}}return m.length>1?m:m[0]}})(\"audiojs\",\"audiojsInstance\",this);\n(function(){var b=0;var c=[\"ms\",\"moz\",\"webkit\",\"o\"];for(var a=0;a<c.length&&!window.requestAnimationFrame;++a){window.requestAnimationFrame=window[c[a]+\"RequestAnimationFrame\"];window.cancelAnimationFrame=window[c[a]+\"CancelAnimationFrame\"]||window[c[a]+\"CancelRequestAnimationFrame\"]}if(!window.requestAnimationFrame){window.requestAnimationFrame=function(h,e){var d=new Date().getTime();var f=Math.max(0,16-(d-b));var g=window.setTimeout(function(){h(d+f)},f);b=d+f;return g}}if(!window.cancelAnimationFrame){window.cancelAnimationFrame=function(d){clearTimeout(d)}}}());(function(d,b){var c=c||function(f){return f};var a=function(f){if(!(this instanceof a)){return new a(f)}this.options=f;this.config=d.extend(true,{},a.defaults,this.options);this.config.audiojs_settings=d.extend({},audiojs.settings,a.defaults.audiojs_settings,this.config.audiojs_settings);this.localized=d.extend({no_id3:\"Listen\",flash_error:'<a href=\"http://get.adobe.com/flashplayer/\">Flash 9 is required to listen to audio.</a>'},this.config.localized);this.__init();a.register(this);return this};a.prototype={playing:false,onscreen:true,animation_interval:false,animation_callback:false,animation_arguments:[],last_tick:0,__init:function(){this.__build_track_list();this.title=a.format_title(this.tracks[0]);if(typeof this.config.template===\"string\"){this.config.template=_.template(this.config.template)}this.$container=d(this.config.template({service:this.config.service,cover:this.config.cover,tracks:this.config.tracks,title:this.title}));if(this.config.replace){d(this.config.replace).replaceWith(this.$container)}else{if(this.config.append_to){d(this.config.append_to).append(this.$container)}else{if(this.config.prepend_to){d(this.config.prepend_to).prepend(this.$container)}}}this.__cache_selectors();this.__proxy_functions();this.$player.addClass(this.config.player_classes);this.starting_track_id=this.config.start_at||0;if(!this.track_info(this.starting_track_id,\"artist\")&&!this.track_info(this.starting_track_id,\"track\")&&!this.track_info(this.starting_track_id,\"album\")){this.$message_text.html(this.localized.no_id3);this.$player.addClass(\"message\")}this.__init_visualizations();this.config.audiojs_settings.createPlayer.markup=\"\";this.config.audiojs_settings.createPlayer.css=\"\";this.__init_audiojs();if(!this.audiojs.settings.useFlash||!this.audiojs.settings.hasFlash){this.bind_events()}if(this.config.lightbox){this.$container.addClass(\"has_lightbox\")}d(document.body).trigger(\"tumblr:audio:ready\",{audioplayer:this,using_flash:(this.audiojs.settings.useFlash&&this.audiojs.settings.hasFlash)})},__init_audiojs:function(){this.element=this.config.el||this.__create_el(this.config.wrapper||this.$player.get(0));this.audiojs=audiojs.create(this.element,this.config.audiojs_settings);this.audiojs.audioplayer=this;this.check_flash_error()},__create_el:function(f){return d(\"<audio/>\").attr({type:\"audio/mp3\"}).appendTo(f).get(0)},__cache_selectors:function(){this.$player=this.$container.find(\".audio_player\");if(this.track_info(0,\"cover\")){this.$container.addClass(\"has_art\")}this.$controls=this.$container.find(\".audio_controls\");this.$visualizer=this.$container.find(\".audio_visualizer\");this.$message_container=this.$container.find(\".audio_message_container\");this.$message_text=this.$container.find(\".audio_message_text\");this.$overlay=this.$container.find(\".audio_player_overlay\");this.$progress_container=this.$container.find(\".progress_container\");this.$load_progress=this.$container.find(\".load_progress\");this.$play_progress=this.$container.find(\".play_progress\");this.$playhead=this.$container.find(\".playhead\");this.$seek_overlay=this.$container.find(\".seek_overlay\");this.$seek_position=this.$container.find(\".seek_position\");this.$seek_time=this.$container.find(\".seek_time\");this.$play_pause_container=this.$container.find(\".play_pause_container\");this.$play_button=this.$container.find(\".play_button\");this.$pause_button=this.$container.find(\".pause_button\");this.$text_wrapper=this.$container.find(\".player_text_wrapper\");this.$text=this.$container.find(\".player_text\");this.$track_name=this.$container.find(\".track_name\");this.$artist_name=this.$container.find(\".artist_name\");this.$album_name=this.$container.find(\".album_name\");this.truncate_text();this.$current_time=this.$container.find(\".current_time\");this.$total_time=this.$container.find(\".total_time\");this.$album_art_container=this.$container.find(\".album_art_container\");this.$main_album_art=this.$container.find(\".album_art.main\");this.$album_art=this.$container.find(\".album_art\").not(this.$main_album_art).hide()},__init_visualizations:function(){this.$visualizer.empty();if(this.config.eq){this.generate_equalizer();this.equalizer_levels(0);this.real_frequencies=a.has_equalizer_support();this.$container.addClass(\"has_visualizer\")}},__proxy_functions:function(){this._on_focus_player=d.proxy(this.on_focus_player,this);this._album_art_lightbox=d.proxy(this.album_art_lightbox,this);this._on_overlay_mouseenter=d.proxy(this.on_overlay_mouseenter,this);this._on_overlay_mouseleave=d.proxy(this.on_overlay_mouseleave,this);this._on_overlay_mousedown=d.proxy(this.on_overlay_mousedown,this);this._on_seek_mouseenter=d.proxy(this.on_seek_mouseenter,this);this._on_seek_mousemove=d.proxy(this.on_seek_mousemove,this);this._on_seek_mouseleave=d.proxy(this.on_seek_mouseleave,this);this._on_seek_begin=d.proxy(this.on_seek_begin,this);this._on_seek_move=d.proxy(this.on_seek_move,this);this._on_seek_end=d.proxy(this.on_seek_end,this);this._on_audio_playing=d.proxy(this.on_audio_playing,this);this._on_audio_pause=d.proxy(this.on_audio_pause,this);this._play=d.proxy(this.play,this);this._pause=d.proxy(this.pause,this);this._load_progress=d.proxy(this.load_progress,this);this._play_progress=d.proxy(this.play_progress,this)},__build_track_list:function(f){this.tracks=f||this.config.tracks;if(!this.tracks.length){this.tracks=[d.extend({},a.defaults.tracks[0])];this.tracks[0].bpm=this.config.bpm;this.tracks[0].stream_url=this.config.stream_url;this.tracks[0].track=this.config.track;this.tracks[0].artist=this.config.artist;this.tracks[0].album=this.config.album;this.tracks[0].cover=this.config.cover}},bind_events:function(){this.$player.on({touchstart:this._on_focus_player,mousedown:this._on_focus_player});this.$album_art_container.on(\"click\",this._album_art_lightbox);this.$overlay.on({touchstart:this._on_overlay_mousedown,mouseenter:this._on_overlay_mouseenter,mouseleave:this._on_overlay_mouseleave,mousedown:this._on_overlay_mousedown});this.$seek_overlay.on({mouseenter:this._on_seek_mouseenter,mouseleave:this._on_seek_mouseleave,mousemove:this._on_seek_mousemove,mousedown:this._on_seek_begin});d(document.body).on({\"tumblr:audio:playing\":this._on_audio_playing,\"tumblr:audio:pause\":this._on_audio_pause})},unbind_events:function(){this.$player.off({touchstart:this._on_focus_player,mousedown:this._on_focus_player});this.$album_art_container.off(\"click\",this._album_art_lightbox);this.$overlay.off({touchstart:this._on_overlay_mousedown,mouseenter:this._on_overlay_mouseenter,mouseleave:this._on_overlay_mouseleave,mousedown:this._on_overlay_mousedown});this.$seek_overlay.off({mouseenter:this._on_seek_mouseenter,mouseleave:this._on_seek_mouseleave,mousemove:this._on_seek_mousemove,mousedown:this._on_seek_begin});d(document.body).off({mousemove:this._on_seek_move,mouseup:this._on_seek_end,\"tumblr:audio:playing\":this._on_audio_playing,\"tumblr:audio:pause\":this._on_audio_pause});this.unbind_key_events()},responsive_size_embed:function(h,f){this.$container.removeClass(\"hide_art hide_visualizer condense_visualizer\");this.$container.addClass(\"embed\");if(this.track_info(0,\"cover\")){this.$container.addClass(\"has_art\")}if(this.config.eq){this.$container.addClass(\"has_visualizer\")}if(this.$container.hasClass(\"has_art\")&&f*2<=h&&f>=30){this.$album_art_container.css(\"width\",f);this.$player.css(\"padding-right\",f);this.$visualizer.css(\"margin-right\",f)}else{this.$album_art_container.css(\"width\",\"\");this.$player.css(\"padding-right\",\"\");this.$visualizer.css(\"margin-right\",\"\");if(this.$container.hasClass(\"has_art\")||h<250){this.$container.removeClass(\"has_visualizer embed\")}this.$container.removeClass(\"has_art\")}if(this.$container.hasClass(\"has_art\")){if(f<169){this.$controls.css(\"height\",\"\");this.$container.removeClass(\"has_visualizer\")}else{this.$controls.css(\"height\",f-this.$visualizer.outerHeight())}}else{this.$controls.css(\"height\",\"\");if(f<85||f>85){this.$container.removeClass(\"has_visualizer\")}}if(this.$equalizer){if(this.$equalizer.width()<300){this.$container.addClass(\"condense_visualizer\")}var j=this.$equalizer.children().length;var g=this.$equalizer.width();var i=this.$equalizer.children(\".audio_equalizer_band\").outerWidth(true)-this.$equalizer.children(\".audio_equalizer_band\").outerWidth(false);this.$equalizer.children(\".audio_equalizer_band\").width(g/j-i)}this.responsive_size(this.$controls.width(),this.$controls.height())},responsive_size:function(g,f){this.$container.removeClass(\"switch small button listen\");if(f>50){if(g<110){this.$container.addClass(\"button\")}else{if(g<205){this.$container.addClass(\"listen\")}}}else{this.$container.addClass(\"small\");if(g<70){this.$container.addClass(\"button\")}else{this.$container.addClass(\"listen\")}}},check_flash_error:function(){var f=this.audiojs.settings.useFlash&&!this.audiojs.settings.hasFlash;if(f&&!this.flash_error){this.audiojs.settings.flashError.apply(this.audiojs)}},on_focus_player:function(f){if(f&&!a.is_left_click(f)){return true}a.set_key_commands(true,true)},on_overlay_mouseenter:function(f){this.$player.addClass(\"hover\")},on_overlay_mouseleave:function(f){this.$player.removeClass(\"hover\")},on_overlay_mousedown:function(f){if(f&&!a.is_left_click(f)){return true}if(this.flash_error){return true}else{if(!this.audiojs.loadedPercent){if(this.load_track(this.config.start_at)){this.play()}}else{if(!this.error){this.play_pause()}}}f.preventDefault()},on_seek_mouseenter:function(f){this.$progress_container.addClass(\"seek\")},on_seek_mousemove:function(g){var f=this.get_seek_progress(g.pageX-this.$progress_container.offset().left);this.$seek_position.css(\"left\",(100*f)+\"%\");if(this.$progress_container.width()*Math.abs(this.play_progress-f)<5){this.$player.addClass(\"playhead_hover\")}else{this.$player.removeClass(\"playhead_hover\")}if(this.total_time){this.$seek_time.text(a.format_time(f*this.total_time))}},on_seek_mouseleave:function(f){this.$player.removeClass(\"playhead_hover\");this.$progress_container.removeClass(\"seek\")},on_audio_playing:function(g,f){a.handling_on_play=true;if(a.config.one_at_a_time&&f.audioplayer!==this){if(this.current_state(\"unplayed\")){this.paused_animation_start(true)}else{if(this.playing){this.pause()}}}a.handling_on_play=false},on_audio_pause:function(g,f){if(a.handling_on_play){return}if(a.config.one_at_a_time&&f.audioplayer!==this){if(this.current_state(\"unplayed\")){this.demo_animation_start()}}},on_seek_begin:function(f){if(f&&!a.is_left_click(f)){return true}this.$player.addClass(\"seeking\");d(document.body).addClass(\"grabbing\");this.was_playing=this.audiojs.playing;if(this.was_playing){this.$player.addClass(\"was_playing\")}this.pause();d(document.body).on({mousemove:this._on_seek_move,mouseup:this._on_seek_end});this.seek_move_timeout=_.delay(this._on_seek_move,50,f,true);this.on_focus_player(f);return false},on_seek_move:function(h,f){clearTimeout(this.seek_move_timeout);if(!f){this.$player.addClass(\"show_seek_time\")}this.on_seek_mousemove(h);var g=this.get_seek_progress();this.set_play_progress(g);this.set_time(g*this.total_time,this.total_time)},on_seek_end:function(f){this.$player.removeClass(\"seeking show_seek_time was_playing\");d(document.body).removeClass(\"grabbing\");this.skip_to(Math.min(this.total_time?(this.total_time-0.1)/this.total_time:1,this.get_seek_progress(f.pageX-this.$progress_container.offset().left)));if(this.was_playing){this.play()}d(document.body).off({mousemove:this._on_seek_move,mouseup:this._on_seek_end})},load_track:function(h){if(this.current_track_id===h){return false}if(h>=this.tracks.length||h<0){return false}if(this.audiojs.playing){this.pause()}var g=!this.current_track_id;this.current_track_id=h;this.current_track=this.tracks[h];this.$track_name.text(this.current_track.track);this.$artist_name.text(this.current_track.artist);this.$album_name.text(this.current_track.album);this.$current_album_art=d(this.$album_art.get(h));this.$current_album_art.show();this.$album_art.not(this.$current_album_art).hide();this.truncate_text();this.$player.removeClass(\"message\");var f=this.config.post_key?\"?play_key=\"+this.config.post_key:\"\";this.audiojs.load(this.current_track.stream_url+f);this.equalizer_levels(0);if(!this.audiojs.settings.useFlash){this.use_audio_context(Tumblr.AudioPlayer.context)}return true},play_pause:function(){return this.audiojs.playing?this.audiojs.pause():this.audiojs.play()},smart_play_pause:function(f){if(typeof f===\"undefined\"){f=!this.audiojs.playing}if(this.flash_error){return false}else{if(!this.audiojs.loadedPercent){if(f&&this.load_track(this.config.start_at)){this.play()}}else{if(!this.error){return f?this.play():this.pause()}}}},play:function(){return this.audiojs.play()},pause:function(){return this.audiojs.pause()},skip_to:function(f){return this.audiojs.skipTo(f)},previous_track:function(){if(this.load_track(this.current_track_id-1)){this.play();return true}return false},next_track:function(){if(this.load_track(this.current_track_id+1)){this.play();return true}return false},get_seek_progress:function(f){if(typeof f!==\"number\"){f=this.$seek_position.position().left}return Math.max(0,Math.min(f/this.$progress_container.width(),1))},set_play_progress:function(f){this.$play_progress.width((100*f)+\"%\");this.$playhead.css(\"left\",(100*f)+\"%\")},set_time:function(g,f){if(typeof g!==\"number\"){g=0}this.$current_time.text(a.format_time(g));if(typeof f!==\"number\"){return}this.$total_time.text(a.format_time(f))},set_load_progress:function(f){this.$load_progress.width((100*f)+\"%\")},album_art_lightbox:function(f){if(f&&!a.is_left_click(f)){return true}if(!this.config.lightbox){return false}var g=this.current_track_info(\"cover\");if(!g){return false}return this.config.lightbox.init([{high_res:g}])},truncate_text:function(g){var h=this.$text_wrapper.width();if(!h){if(typeof g!==\"number\"){g=10}if(g>0){_.delay(d.proxy(this.truncate_text,this),100,--g);return}}var f=this.max_lines(this.$track_name,3,\"...\");this.max_lines(this.$artist_name,4-f,\"...\")},max_lines:function(f,n,j){var m=d(f);var l=m.clone().css(\"opacity\",0.5).text(\"A\");m.after(l);var k=l.height(),h=k*n;if(!m.data(\"full_text\")){m.data(\"full_text\",m.text())}if(!h){l.remove();m.text(\"\");return n}l.text(m.data(\"full_text\"));if(l.height()<=h){l.remove();m.text(m.data(\"full_text\"));return Math.ceil(m.height()/k)}if(typeof j!==\"string\"){j=\"...\"}var i=m.data(\"full_text\").split(\" \");var g=0;do{l.text(i.slice(0,++g).join(\" \")+j)}while(l.height()<=h&&g<=i.length);m.text(i.slice(0,g-1).join(\" \")+j);l.remove();return Math.ceil(m.height()/k)},use_audio_context:function(g){if(!g){return false}this.context=g;this.source=this.context.createMediaElementSource(this.audiojs.source);this.analyser_node=this.context.createAnalyser();this.analyser_node.fftSize=128;this.analyser_node.smoothingTimeConstant=0.2;this.frequency_array=new Uint8Array(this.analyser_node.frequencyBinCount);this.nodes=[this.source,this.analyser_node,this.context.destination];for(var f=1;f<this.nodes.length;f++){this.nodes[f-1].connect(this.nodes[f])}},read_analyser_frequencies:function(l,h,r,p){if(this.analyser_node){this.analyser_node.getByteFrequencyData(this.frequency_array)}else{if(this.audiojs.settings.useFlash&&this.audiojs.settings.hasFlash){var s;try{s=this.audiojs.element.getByteFrequencyData()}catch(m){return false}if(!s||s===\"NO_ACCESS\"||s.match(/ERR/)){this.equalizer_levels(0);return false}var j=s.match(/.{1,2}/g);var q=Math.floor(0.5*j.length);var f;var o=true;this.frequency_array=[];for(var k=0;k<q;k++){f=0.5*(parseInt(j[k],16)+parseInt(j[k+q],16));if(f){o=false}this.frequency_array.push(f)}if(o){return false}}else{return false}}if(typeof r!==\"number\"){r=1}if(typeof p!==\"number\"){p=0}var g=a.scale_array_values(this.frequency_array,this.config.eq.bands+p,true,function(t,n){t*=r;if(l){t/=l}if(h){return Math.max(0,Math.min(t,1))}else{return t}});if(p){return g.slice(0,this.config.eq.bands)}else{return g}},generate_equalizer:function(){if(this.$equalizer){this.$equalizer.remove()}var h=this.config.eq;if(!h){return false}this.$equalizer=d(\"<div/>\").addClass(\"audio_equalizer\");if(!this.config.preview&&!this.$container.hasClass(\"has_art\")){h.bands=7}var g,j;for(var f=0;f<h.bands;f++){g=d(\"<div/>\").addClass(\"audio_equalizer_band\").data({wait:0,peak:0,level:0}).appendTo(this.$equalizer);for(var i=0;i<h.levels;i++){j=d(\"<b>\").appendTo(g);if(i===h.levels-1){j.addClass(\"peak\")}}}this.$visualizer.append(this.$equalizer);return true},equalizer_levels:function(i,j,g,f){if(!this.$equalizer){return false}if(typeof i!==\"number\"&&!d.isArray(i)){var h=[];this.$equalizer.children(\".audio_equalizer_band\").each(function(k,l){h[k]=d(l).data(\"level\")});return h}this.$equalizer.children(\".audio_equalizer_band\").each(d.proxy(function(n,q){var r=0;if(typeof i===\"number\"){r=i}else{if(i&&n<i.length&&i[n]){r=i[n]}}var o=d(q);var l=this.config.eq.levels;var m=Math.floor(r*(l-1));var p=parseFloat(o.data(\"peak\"))||0;var k=j||(r>p);if(k){o.data({wait:10,peak:r})}o.data(\"level\",r);o.children(\"b\").each(function(s,u){var t=d(u);t.removeClass(\"on\");if(!g&&l-m<s+1){t.addClass(\"on\")}if(k){t.removeClass(\"peak\");if(f){if(l-m-0.5*f<=s+1&&l-m+0.5*f>s+1){t.addClass(\"peak\")}}else{if(l-m===s+1){t.addClass(\"peak\")}}}})},this));return true},equalizer_image:function(f){if(!this.$equalizer){return false}this.$equalizer.children(\".audio_equalizer_band\").each(d.proxy(function(g,i){var h=d(i);h.children(\"b\").each(function(l,k){var j=d(k);j.removeClass(\"on peak\");if(g>=f.length){return}if(l>=f[g].length){return}if(f[g][l]<0){j.addClass(\"on\")}else{if(f[g][l]>0){j.addClass(\"peak\")}}})},this));return true},equalizer_dolphin:function(f,j,i,h){var g=a.offset_image(a.dolphin_frames[i?1:0],f,j,h);return this.equalizer_image(g)},equalizer_peaks:function(){if(!this.$equalizer){return false}var f=true;this.$equalizer.children(\".audio_equalizer_band\").each(d.proxy(function(j,n){var k=d(n);var l=parseFloat(k.data(\"peak\"))||0;var o=parseFloat(k.data(\"level\"))||0;var m=parseFloat(k.data(\"wait\"))||0;if(l!==o){f=false}if(m>0){k.data(\"wait\",m-1);return}l=Math.max(l-0.1,o);k.data(\"peak\",l);var g=this.config.eq.levels;var h=Math.floor(l*(g-1));k.data(\"peak\",l);k.children(\"b\").each(function(p,r){var q=d(r);q.removeClass(\"peak\");if(g-h===p+1){q.addClass(\"peak\")}})},this));return f},set_animation_callback:function(h,f,g){if(!h){return this.reset_animation()}this.animation_callback=h;this.animation_interval=f||30;this.animation_arguments=g||[];this.last_tick=0},reset_animation:function(){this.animation=false;d(document.body).trigger(\"tumblr:audio:animation_complete\",{audioplayer:this});this.animation_callback=false;this.animation_interval=false;this.animation_arguments=[];this.last_tick=0},animation_tick:function(f,g){if(!this.animation_callback){return false}if(!(g||this.onscreen)){return false}if(this.last_tick&&f-this.last_tick<this.animation_interval){return false}this.animation_callback.apply(this,this.animation_arguments);this.last_tick=f;return true},demo_animation_start:function(g){if(a.config.disable_inactive_loop){return false}if(!(g||this.$player.hasClass(\"inactive\"))){return false}var f=60;var h=this.current_track_info(\"bpm\")||150;this.demo_frequency=h/2/Math.PI/f;this.demo_loop_index=0;this.set_animation_callback(this.demo_animation_tick,f)},demo_animation_tick:function(){this.loop_index++;var f=Math.abs(Math.tan(Math.sin(this.demo_frequency*this.demo_loop_index))*2/Math.PI);f*=0.5*Math.max(0,Math.sin(0.5*this.demo_frequency*this.demo_loop_index))+0.5;f=0.4*Math.abs(f)+0.6;this.equalizer_levels(this.generate_demo_eq(0.75*f,0.3,0.2,1.6));this.equalizer_peaks()},playing_animation_start:function(){var f=30;if(typeof this.fallback_offset!==\"number\"){this.fallback_offset=0}if(this.real_frequencies){this.set_animation_callback(this.visualizer_animation_tick,f,[true,true,false])}else{this.set_animation_callback(this.fallback_animation_tick,f)}},paused_animation_start:function(g){var f=30;if(g){this.equalizer_levels(0)}this.set_animation_callback(this.visualizer_animation_tick,f,[false,true,true])},visualizer_animation_tick:function(h,i,f){if(h){this.equalizer_levels(this.read_analyser_frequencies(255,true,1.3,2))}var g=false;if(i){g=this.equalizer_peaks();this.animation=true}if(g&&f){this.reset_animation()}},fallback_animation_tick:function(){if(this.playing){this.fallback_offset++}this.equalizer_levels(this.generate_sine_eq(this.fallback_offset),true,true,2)},idle_animation_start:function(){if(!this.$equalizer){return}this.dolphin_width=6;this.dolphin_height=5;this.dolphin_x=-this.dolphin_width;this.dolphin_y=0;this.dolphin_left=false;this.dolphin_up=false;this.dolphin_frame=0;this.dolphin_min_x=-1;this.dolphin_max_x=this.config.eq.bands-this.dolphin_width+1;this.dolphin_min_y=-1;this.dolphin_max_y=this.config.eq.levels-this.dolphin_height+1;if(!a.dolphin_frames){a.generate_dolphins()}this.set_animation_callback(this.idle_animation_tick,300)},idle_animation_tick:function(){this.equalizer_dolphin(this.dolphin_x,this.dolphin_y,this.dolphin_frame,this.dolphin_left);this.dolphin_frame=(this.dolphin_frame+1)%a.dolphin_frames.length;if(this.dolphin_frame!==0){return}this.dolphin_x+=this.dolphin_left?-1:1;this.dolphin_y+=this.dolphin_up?-1:1;if(!this.dolphin_left&&this.dolphin_x>=this.dolphin_max_x){this.dolphin_x=this.dolphin_max_x;this.dolphin_left=true}else{if(this.dolphin_left&&this.dolphin_x<=this.dolphin_min_x){this.dolphin_x=this.dolphin_min_x;this.dolphin_left=false}}if(!this.dolphin_up&&this.dolphin_y>=this.dolphin_max_y){this.dolphin_y=this.dolphin_max_y;this.dolphin_up=true}else{if(this.dolphin_up&&this.dolphin_y<=this.dolphin_min_y){this.dolphin_y=this.dolphin_min_y;this.dolphin_up=false}}},visualizer_fallback_tick:function(){var h=this.fallback_offset++;var g=this.config.eq.bands;var f=_.range(g).map(function(j,k){return 0.3*Math.sin(k+0.3*h)+0.5});this.equalizer_levels(f,true,true,2)},generate_sine_eq:function(h,f){var g=this.config.eq?this.config.eq.bands:11;if(typeof h!==\"number\"){h=0}if(typeof f!==\"number\"){f=0.3}return _.range(g).map(function(j,k){return f*Math.sin(k+0.3*h)+0.5})},generate_demo_eq:function(i,h,f,g){if(typeof i!==\"number\"){i=1}if(typeof h!==\"number\"){pad=0}if(typeof f!==\"number\"){f=0}if(typeof g!==\"number\"){g=1}return _.range(this.config.eq.bands).map(d.proxy(function(j,k){var l=Math.max(0,Math.min(1-k/(this.config.eq.bands-1)+h,1));return Math.pow(i*l*(f*Math.random()+1-f),g)},this))},track_info:function(h,g){if(!this.tracks.length){return}if(typeof h===\"undefined\"){h=this.config.start_at}if(h<0||h>=this.tracks.length){return}var f=this.tracks[h];return g?f[g]:f},current_track_info:function(f){return this.track_info(this.current_track_id,f)},is_onscreen:function(g){if(typeof g!==\"number\"){g=50}var i=this.$container.offset().top;var f=this.$container.offset().top+this.$container.height();var h=this.rect.windowScrollTop;var j=h+this.rect.windowHeight;if(i>j+g){return(this.onscreen=false)}if(f<h-g){return(this.onscreen=false)}return(this.onscreen=true)},needs_animation:function(f){if(f){this.is_onscreen()}if(!this.onscreen){return false}if(this.playing||this.animation){return true}if(!a.config.disable_inactive_loop&&this.$player.hasClass(\"unplayed\")){return true}if(!this.$player.hasClass(\"unplayed\")&&this.$player.hasClass(\"inactive\")){return true}return false},current_state:function(f){var g=\"\";if(this.playing){g=\"playing\"}else{if(this.$player.hasClass(\"unplayed\")){g=\"unplayed\"}else{if(this.$player.hasClass(\"inactive\")){g=\"inactive\"}else{if(this.$player.hasClass(\"error\")){g=\"error\"}else{g=\"paused\"}}}}if(typeof f===\"undefined\"){return g}else{return(g===f)}}};a.instances=[];a.register=function(f){this.instances.push(f)};a.unregister=function(f){this.instances.splice(_.indexOf(this.instances,f),1)};a.config={disable_inactive_loop:true,draw_offscreen:false,one_at_a_time:true,auto_advance:false,key_commands:true};a.key_commands=false;a.idle_delay=1;a.__init_jukebox=function(f){this.config=d.extend(this.config,f);d(document.body).on({\"tumblr:audio:animation_complete\":d.proxy(function(i,h){this.update_onscreen()},this),\"tumblr:audio:playing\":d.proxy(function(i,h){this.current_player_id=d.inArray(h.audioplayer,this.instances);this.current_player=h.audioplayer;d(\"iframe.tumblr_video_iframe\").each(function(j,k){k.contentWindow.postMessage(\"pause\",\"*\")});this.update_onscreen()},this),\"tumblr:audio:pause\":d.proxy(function(i,h){this.update_onscreen()},this),\"tumblr:audio:ended\":d.proxy(function(i,h){if(this.config.auto_advance){if(this.current_player_id+1<this.instances.length){this.instances[this.current_player_id+1].on_overlay_mousedown()}}},this),mousedown:d.proxy(function(h){this.set_key_commands(false)},this),keydown:d.proxy(function(i){if(!i){return false}if(!this.key_commands){return true}if(!this.current_player){return true}var h=i.charCode?i.charCode:i.keyCode;switch(h){case 32:this.current_player.play_pause();i.preventDefault();i.stopPropagation();return false;case 37:if(!(i.ctrlKey||i.metaKey)){return true}i.preventDefault();i.stopPropagation();if(this.current_player.current_time>2){this.current_player.skip_to(0);return false}return !this.current_player.previous_track();case 39:if(!(i.ctrlKey||i.metaKey)){return true}i.preventDefault();i.stopPropagation();return !this.current_player.next_track();case 27:this.set_key_commands(false);return false}},this)});if(b.DOMEventor){b.Events.on(\"DOMEventor:flatscroll\",_.debounce(this.update_onscreen,100),this);this.prototype.rect=b.DOMEventor.rect()}else{d(window).on(\"scroll\",_.debounce((function(h){var j=d(window);var i=h.prototype.rect={};return function(){i.windowScrollTop=j.scrollTop();i.windowHeight=j.height();h.update_onscreen()}})(this),100))}this.update_all();try{Tumblr.PostMessageListener.initialize(function(i,h){if(i[0]===\"video_do_play\"){Tumblr.AudioPlayer.pause_all()}})}catch(g){}};a.update_all=function(){var f=false;var g=false;var h=(!this.current_player||!this.current_player.playing);this.replace_placeholders();d.each(this.instances,d.proxy(function(k,j){if(j.is_onscreen()){f=true}if(!g&&j.needs_animation()){g=true}if(h&&j.current_state(\"unplayed\")){j.demo_animation_start(false)}},this));if(this.instances.length){if(g){this.animation_start()}else{this.animation_stop()}}};a.update_onscreen=function(){var f=false;var g=false;d.each(this.instances,function(j,h){if(h.is_onscreen()){f=true}if(!g&&h.needs_animation()){g=true}});if(this.instances.length){if(g){this.animation_start()}else{this.animation_stop()}}};a.pause_all=function(f){d.each(this.instances,function(h,g){if(f&&f===g.config.post_id){return}g.pause()})};a.animation_start=function(){if(this.animating){return}this.animating=true;window.cancelAnimationFrame(this.animation_frame);this.animation_frame=window.requestAnimationFrame(this._animation_tick)};a.animation_tick=function(){var f=Date.now();d.each(this.instances,d.proxy(function(h,g){g.animation_tick(f,this.config.draw_offscreen)},this));if(this.animating){this.animation_frame=window.requestAnimationFrame(this._animation_tick)}};a._animation_tick=d.proxy(a.animation_tick,a);a.animation_stop=function(f){this.animating=false;window.cancelAnimationFrame(this.animation_frame)};a.inactive_player_demo=function(){d.each(this.instances,function(g,f){if(f.current_state(\"unplayed\")){f.demo_animation_start(false)}})};a.when_dolphins_cry=function(){d.each(this.instances,function(g,f){f.idle_animation_start()})};a.create_context=function(){try{this.context=new webkitAudioContext();return this.context}catch(f){return false}};a.replace_placeholders=function(f,g){var h=f?d(f):d(document.body);h.find(\".audio_player_container.placeholder\").each(function(k,m){var j=d(m);var n=j.data();var o=d(\"<div/>\");j.before(o);var l=new a({post_key:n.postKey,replace:o,player_classes:n.playerClasses,post_id:n.postId,service:n.service,cover:n.cover,tracks:[{bpm:n.bpm,stream_url:n.streamUrl,track:n.track,artist:n.artist,album:n.album,cover:n.cover}],localized:{no_id3:n.noId3,flash_error:n.flashError}});j.remove()});if(g){this.clean_up(true)}};a.clean_up=function(h){if(!document.body){return}var g,f;for(g=0;g<this.instances.length;g++){f=this.instances[g];if(!f.$container.closest(document.body).length){this.unregister(f);g--}}if(h){this.sort()}};a.sort=function(){d.each(d(\".audio_player_container\"),function(g,f){d(f).data(\"tumblr_audioplayer_sort\",g)});this.instances.sort(function(g,f){return g.$container.data(\"tumblr_audioplayer_sort\")-f.$container.data(\"tumblr_audioplayer_sort\")});this.current_player_id=d.inArray(this.current_player,this.instances)};a.scale_array_values=function(g,l,k,j){if(l<=0){return[]}if(g.length===l){if(typeof j===\"function\"){return g.slice().map(j)}else{return g.slice()}}if(l===1){var i=_.reduce(g,function(o,p){return o+p},0);if(typeof j===\"function\"){return[j(i)]}else{return[i]}}var f=_.range(l);var h=g.length/l;if(h>1){return f.map(function(n,q){var s=q*h;var p=q*h+h;var t=1-s%1;var r=p%1;s=Math.floor(s);p=Math.floor(p);if(!r&&s+1<p){p-=1;r=1}var m=t*g[s]+r*g[p];for(var o=s+1;o<p;o++){m+=g[o]}if(k){m/=h}if(typeof j===\"function\"){return j(m)}else{return m}})}else{return f.map(function(n,o){var p=Math.floor(o*h);var m=g[p]*h;if(k){m/=h}if(typeof j===\"function\"){return j(m)}else{return m}})}};a.format_title=function(f){var g=\"\";if(f.artist){g+=f.artist}if(f.track){if(g){g+=\" \"}g+=\"&quot;\"+f.track+\"&quot;\"}if(f.album){if(g){g+=\" \"}g+=\"(from '\"+f.album+\"')\"}return g};a.format_time=function(i){if(!i||i<0){i=0}function h(l,k){if(typeof l!==\"string\"){l=l.toString()}return l.length<k?h(\"0\"+l,k):l}var j=Math.floor(i%60);var g=Math.floor(i/60)%60;var f=Math.floor(i/3600);if(f){return f+\":\"+h(g,2)+\":\"+h(j,2)}else{return g+\":\"+h(j,2)}};a.has_equalizer_support=function(){if(this.context||this.create_context()){if(/chrome/.test(navigator.userAgent.toLowerCase())){return true}}else{if(Tumblr.flashVersion()>=9){return false}}return false};a.is_left_click=function(f){return !(f&&(f.which>1||f.which<=1&&f.ctrlKey))};a.generate_image=function(g,j){var f,l,k=[];for(var h=0;h<g.length;h++){f=h%j;l=Math.floor(h/j);if(!k[f]){k[f]=[]}switch(g[h]){case\" \":k[f][l]=0;break;case\"o\":k[f][l]=-1;break;default:case\"x\":k[f][l]=1;break}}return k};a.offset_image=function(j,f,k,g){j=j.slice();if(g){j.reverse()}if(f>0){d.each(_.range(f),function(){j.unshift([])})}else{if(f<0){j.splice(0,-f)}}if(k){for(var h=0;h<j.length;h++){j[h]=j[h].slice();if(k>0){d.each(_.range(k),function(){j[h].unshift(0)})}else{if(k<0){j[h].splice(0,-k)}}}}return j};a.generate_dolphins=function(){this.dolphin_frames=[this.generate_image(\"   x  x  xx xxxxxxx oxoo   x  \",6),this.generate_image(\"   x     xx x xxxxxxoxoox  x  \",6)];return this.dolphin_frames};a.set_key_commands=function(f,g){if(this.ignore_next){this.ignore_next=false;return this.key_commands}if(g){this.ignore_next=true}this.key_commands=this.config.key_commands&&f;return this.key_commands};var e=(function(){var j=new RegExp(\"audio(\\\\.min|_src|_player)?\\\\.js.*\"),k=new RegExp(\"(^[^/]+//[^/]+|)(/.*$)|(.*)\"),f=document.getElementsByTagName(\"script\");for(var g=0,h=f.length;g<h;g++){var l=f[g].getAttribute(\"src\");if(j.test(l)){return l.replace(k,\"$1\")}}return\"\"})();a.defaults={template:_.template('<div class=\"audio_player_container\"><div class=\"album_art_container\"><% if (cover) { %><img src=\"<%= cover %>\" alt=\"<%- title %>\" class=\"album_art main\"/><% }%><% _.each(tracks, function(t, i) { %><% if (t.cover) { %><img src=\"<%= t.cover %>\" alt=\"<%- Tumblr.AudioPlayer.format_title(t) %>\" class=\"album_art album_art_<%= i %>\"/><% }%><% }); %></div><div class=\"audio_player inactive unplayed\"><div class=\"audio_controls\"><div class=\"progress_container\"><div class=\"load_progress\"></div><div class=\"play_progress\"></div><i class=\"playhead\"></i><i class=\"seek_position\"></i><i class=\"seek_time\"></i></div><div class=\"player_text_wrapper\"><div class=\"player_text\"><% if (tracks.length) { %><ul class=\"id3_tags\"><li class=\"track_name\"><%- tracks[0].track %></li><li class=\"artist_name\"><%- tracks[0].artist %></li><li class=\"album_name\"><%- tracks[0].album %></li></ul><% } %></div></div><ul class=\"time_container\"><li class=\"current_time\">0:00</li><li class=\"separator\"> / </li><li class=\"total_time\">0:00</li></ul><div class=\"seek_overlay\"></div><div class=\"play_pause_container\"><i class=\"play_button audio_player_button\">'+c(\"Play\")+'</i><i class=\"pause_button audio_player_button\">'+c(\"Pause\")+'</i><i class=\"error_x audio_player_button\">'+c(\"X\")+'</i></div><div class=\"audio_message_container\"><span class=\"audio_message_text\">'+c(\"Listen\")+'</span></div></div><div class=\"audio_visualizer\"></div><div class=\"audio_player_overlay\"></div></div></div>'),preview:false,eq:{width:330,height:84,padding_x:16,padding_y:7,bands:11,levels:14,tick_width:18,tick_height:3,tick_radius:2,tick_margin_x:10,tick_margin_y:2},cover:\"\",service:\"\",player_classes:\"\",autoplay:false,tracks:[{bpm:150,stream_url:\"\",track:\"\",artist:\"\",album:\"\",cover:\"\"}],start_at:0,lightbox:Tumblr.Lightbox,audiojs_settings:{swfLocation:e+\"/javascript/audio-js/audiojs.swf\",createPlayer:{playPauseClass:\"play_pause_container\",scrubberClass:\"progress_container\",progressClass:\"play_progress\",loaderClass:\"load_progress\",timeClass:\"time_container\",durationClass:\"total_time\",playedClass:\"current_time\",errorMessageClass:\"audio_message_text\",playingClass:\"playing\",loadingClass:\"loading\",errorClass:\"error\"},css:\"\",trackEnded:function(g){var f=this.audioplayer;f.playing=false;audiojs.settings.trackEnded.apply(this,arguments);f.$player.addClass(\"inactive\");f.paused_animation_start(true);f.idle_timeout=_.delay(d.proxy(f.idle_animation_start,f),a.idle_delay*1000);d(document.body).trigger(\"tumblr:audio:ended\",{audioplayer:f})},flashError:function(){if(!this.audioplayer){return}audiojs.settings.flashError.apply(this,arguments);var f=this.audioplayer;f.playing=false;f.flash_error=true;f.error=true;f.$player.addClass(\"inactive error flash_error\").removeClass(\"playing\");f.$message_text.html(f.localized.flash_error)},loadError:function(){audiojs.settings.loadError.apply(this,arguments);var f=this.audioplayer;f.error=true;f.$player.addClass(\"inactive error\").removeClass(\"playing\");f.$message_text.html(c(\"Error\"))},init:function(){return audiojs.settings.init.apply(this,arguments)},loadStarted:function(){audiojs.settings.loadStarted.apply(this,arguments);var f=this.audioplayer;f.error=false},loadProgress:function(f){return audiojs.settings.loadProgress.apply(this,arguments)},flashReady:function(){var f=this.audioplayer;f.__cache_selectors();f.__init_visualizations();f.bind_events();d(document.body).trigger(\"tumblr:audio:flashready\",{audioplayer:f})},play:function(){audiojs.settings.play.apply(this,arguments);var f=this.audioplayer;f.$player.removeClass(\"inactive unplayed\");f.playing=true;f.playing_animation_start();clearTimeout(f.idle_timeout);d(document.body).trigger(\"tumblr:audio:playing\",{audioplayer:f})},pause:function(){audiojs.settings.pause.apply(this,arguments);var f=this.audioplayer;f.playing=false;if(!f.$player.hasClass(\"inactive\")){f.paused_animation_start()}clearTimeout(f.idle_timeout);d(document.body).trigger(\"tumblr:audio:pause\",{audioplayer:f})},updatePlayhead:function(g){audiojs.settings.updatePlayhead.apply(this,arguments);var f=this.audioplayer;f.$player.addClass(\"duration\");f.total_time=this.element.duration||this.duration;f.current_time=f.total_time*g;f.play_progress=f.current_time/f.total_time;f.set_play_progress(f.play_progress);f.set_time(f.current_time,f.total_time);d(document.body).trigger(\"tumblr:audio:update\",{current_time:a.format_time(f.current_time),total_time:a.format_time(f.total_time),audioplayer:f})}}};b.AudioPlayer=a;d(function(){if(Tumblr.AudioPlayerSettings&&!d.isEmptyObject(Tumblr.AudioPlayerSettings)){Tumblr.AudioPlayer.defaults=d.extend(Tumblr.AudioPlayer.defaults,Tumblr.AudioPlayerSettings)}if(window.AfterAutoPaginationQueue&&_.indexOf(AfterAutoPaginationQueue,a.replace_placeholders)<0){AfterAutoPaginationQueue.push(d.proxy(a.update_all,a))}a.__init_jukebox()});d(window).on(\"load\",function(f){a.create_context()})})(jQuery,Tumblr);\n"}
],
[
{"endColumn":2,"endLine":47,"hasSourceURL":true,"scriptId":"125","startColumn":0,"startLine":0,"url":"/lodash/template/source[0]"},{"scriptSource":"(function(_\n/**/) {\nreturn function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div class=\"audio_player_container\"><div class=\"album_art_container\">';\n if (cover) { ;\n__p += '<img src=\"' +\n((__t = ( cover )) == null ? '' : __t) +\n'\" alt=\"' +\n__e( title ) +\n'\" class=\"album_art main\"/>';\n };\n\n _.each(tracks, function(t, i) { ;\n\n if (t.cover) { ;\n__p += '<img src=\"' +\n((__t = ( t.cover )) == null ? '' : __t) +\n'\" alt=\"' +\n__e( Tumblr.AudioPlayer.format_title(t) ) +\n'\" class=\"album_art album_art_' +\n((__t = ( i )) == null ? '' : __t) +\n'\"/>';\n };\n\n }); ;\n__p += '</div><div class=\"audio_player inactive unplayed\"><div class=\"audio_controls\"><div class=\"progress_container\"><div class=\"load_progress\"></div><div class=\"play_progress\"></div><i class=\"playhead\"></i><i class=\"seek_position\"></i><i class=\"seek_time\"></i></div><div class=\"player_text_wrapper\"><div class=\"player_text\">';\n if (tracks.length) { ;\n__p += '<ul class=\"id3_tags\"><li class=\"track_name\">' +\n__e( tracks[0].track ) +\n'</li><li class=\"artist_name\">' +\n__e( tracks[0].artist ) +\n'</li><li class=\"album_name\">' +\n__e( tracks[0].album ) +\n'</li></ul>';\n } ;\n__p += '</div></div><ul class=\"time_container\"><li class=\"current_time\">0:00</li><li class=\"separator\"> / </li><li class=\"total_time\">0:00</li></ul><div class=\"seek_overlay\"></div><div class=\"play_pause_container\"><i class=\"play_button audio_player_button\">Play</i><i class=\"pause_button audio_player_button\">Pause</i><i class=\"error_x audio_player_button\">X</i></div><div class=\"audio_message_container\"><span class=\"audio_message_text\">Listen</span></div></div><div class=\"audio_visualizer\"></div><div class=\"audio_player_overlay\"></div></div></div>';\n\n}\nreturn __p\n}\n/*\n//# sourceURL=/lodash/template/source[0]\n*/\n})"}
],
[
{"endColumn":8389,"endLine":0,"scriptId":"126","startColumn":0,"startLine":0,"url":"http://assets.tumblr.com/assets/scripts/dashboard_ask.js?_v=5f0fbbd240b22a965f915cb3b1df5486"},{"scriptSource":"(function(d,a){var c=c||function(g){return g};var e={initialize:function(){d(document).on(\"click\",\"a.ask\",_.bind(function(g){g.preventDefault();this.open_ask(d(g.currentTarget))},this))},open_ask:function(g){Tumblr.Popover.hide_all();var h=g.attr(\"data-tumblelog-name\");var i=(parseInt(g.data(\"anonymous-ask\"),10)===1)?true:false;this.model=new f();if(this.view){this.view.destroy()}this.view=new b({model:this.model,recipient:h,allow_anonymous:i}).show_form()}};var f=Backbone.Model.extend({defaults:{form_key:d(\"#tumblr_form_key\").attr(\"content\")},urlRoot:\"/svc/post/ask\",validate:function(g){if(!d.trim(g.question)){return{error:c(\"You need to enter a question!\")}}else{if(this.is_url(g.question)){return{error:c(\"Sorry, but please don't include links in questions.\")}}}if(g.response&&g.response.errors){return g.response.errors}},is_url:function(g){return !!(g.match(/(http|https):\\/\\//i)||g.match(/www\\./i)||g.match(/[a-zA-Z0-9]+(\\.arpa|\\.root|\\.aero|\\.biz|\\.cat|\\.com|\\.coop|\\.edu|\\.gov|\\.info|\\.int|\\.jobs|\\.mil|\\.mobi|\\.museum|\\.name|\\.net|\\.org|\\.pro|\\.travel|TLD|\\.ac|\\.ad|\\.ae|\\.af|\\.ag|\\.ai|\\.al|\\.am|\\.an|\\.ao|\\.aq|\\.ar|\\.as|\\.at|\\.au|\\.aw|\\.ax|\\.az|\\.ba|\\.bb|\\.bd|\\.be|\\.bf|\\.bg|\\.bh|\\.bi|\\.bj|\\.bm|\\.bn|\\.bo|\\.br|\\.bs|\\.bt|\\.bv|\\.bw|\\.by|\\.bz|\\.ca|\\.cc|\\.cd|\\.cf|\\.cg|\\.ch|\\.ci|\\.ck|\\.cl|\\.cm|\\.cn|\\.co|\\.cr|\\.cu|\\.cv|\\.cx|\\.cy|\\.cz|\\.de|\\.dj|\\.dk|\\.dm|\\.do|\\.dz|\\.ec|\\.ee|\\.eg|\\.er|\\.es|\\.et|\\.eu|\\.fi|\\.fj|\\.fk|\\.fm|\\.fo|\\.fr|\\.ga|\\.gb|\\.gd|\\.ge|\\.gf|\\.gg|\\.gh|\\.gi|\\.gl|\\.gm|\\.gn|\\.gp|\\.gq|\\.gr|\\.gs|\\.gt|\\.gu|\\.gw|\\.gy|\\.hk|\\.hm|\\.hn|\\.hr|\\.ht|\\.hu|\\.id|\\.ie|\\.il|\\.im|\\.in|\\.io|\\.iq|\\.ir|\\.is|\\.it|\\.je|\\.jm|\\.jo|\\.jp|\\.ke|\\.kg|\\.kh|\\.ki|\\.km|\\.kn|\\.kr|\\.kw|\\.ky|\\.kz|\\.la|\\.lb|\\.lc|\\.li|\\.lk|\\.lr|\\.ls|\\.lt|\\.lu|\\.lv|\\.ly|\\.ma|\\.mc|\\.md|\\.mg|\\.mh|\\.mk|\\.ml|\\.mm|\\.mn|\\.mo|\\.mp|\\.mq|\\.mr|\\.ms|\\.mt|\\.mu|\\.mv|\\.mw|\\.mx|\\.my|\\.mz|\\.na|\\.nc|\\.ne|\\.nf|\\.ng|\\.ni|\\.nl|\\.no|\\.np|\\.nr|\\.nu|\\.nz|\\.om|\\.pa|\\.pe|\\.pf|\\.pg|\\.ph|\\.pk|\\.pl|\\.pm|\\.pn|\\.pr|\\.ps|\\.pt|\\.pw|\\.py|\\.qa|\\.re|\\.ro|\\.ru|\\.rw|\\.sa|\\.sb|\\.sc|\\.sd|\\.se|\\.sg|\\.sh|\\.si|\\.sj|\\.sk|\\.sl|\\.sm|\\.sn|\\.so|\\.sr|\\.st|\\.su|\\.sv|\\.sy|\\.sz|\\.tc|\\.td|\\.tf|\\.tg|\\.th|\\.tj|\\.tk|\\.tl|\\.tm|\\.tn|\\.to|\\.tp|\\.tr|\\.tt|\\.tv|\\.tw|\\.tz|\\.ua|\\.ug|\\.uk|\\.um|\\.us|\\.uy|\\.uz|\\.va|\\.vc|\\.ve|\\.vg|\\.vi|\\.vn|\\.vu|\\.wf|\\.ws|\\.ye|\\.yt|\\.yu|\\.za|\\.zm|\\.zw)/i))}});var b=Backbone.View.extend({className:\"ask_container\",events:{\"click button.close\":\"__close_button_click\",\"keydown #question\":\"__textarea_keydown\",\"input #question\":\"__textarea_input\",\"change #question\":\"__textarea_input\",\"submit #ask_form\":\"__form_submit\",\"change #ask_anonymously\":\"__ask_anonymously_change\"},__close_button_click:function(g){g.preventDefault();this.hide_form()},__textarea_keydown:function(g){if(g.keyCode===13){g.preventDefault()}},__textarea_input:function(g){this.update()},__form_submit:function(g){g.preventDefault();this.submit_form()},__ask_anonymously_change:function(h){var g=d(h.currentTarget);this.toggle_anonymous(g)},__keydown:function(g){if(g.keyCode===27){this.hide_form(g)}},initialize:function(g){this.options=g||{};this.template=d(\"#dashboard_ask_template\").html();this.$body=d(\"body\");this.ask_limit=Tumblr.ASK_CHARACTER_LIMIT||500;this.recipient=this.options.recipient;this.recipient_avatar=this.options.recipient_avatar;this.allow_anonymous=this.options.allow_anonymous;this.render();var h={lines:13,length:6,width:2,radius:6,color:\"rgba(0,0,0,.5)\",speed:0.9,trail:34,shadow:false,hwaccel:false,className:\"spinner\",zIndex:2000000000,top:\"0\",left:\"0\"};this.keyboard_events={keydown:_.bind(this.__keydown,this)};this.spinner=new Spinner(h)},render:function(){var g=_.template(this.template);this.$body.append(this.$el.append(g({recipient:this.recipient,allow_anonymous:this.allow_anonymous})));this.cache_selectors();this.is_ie9=d(\"html\").hasClass(\"ie9\");if(this.is_ie9){this.disable_submit()}Tumblr.PlaceHolders.init({els:this.$(\"#question\"),clear_on_submit:true});return this},cache_selectors:function(){this.$form=this.$(\"form\");this.$loader=this.$(\".post_loader\");this.$plexi=this.$(\".plexi\");this.$question=this.$(\"#question\");this.$character_count=this.$(\"#character_count\");this.$post_form_wrapper=this.$(\".post_form_wrapper\");this.$close_button=this.$(\"button.close\");this.$post_avatar=this.$(\".post_avatar\");this.$post_avatar_link=this.$(\".post_avatar_link\");this.$tumblelog_name=this.$(\"#from .tumblelog_name\");this.$anonymous=this.$(\"#from .anonymous\");this.$anonymous_avatar=this.$(\".post_avatar .anonymous\");this.$ask_button=this.$(\"#ask_button\")},toggle_anonymous:function(g){this.is_anonymous=g.prop(\"checked\");if(this.is_anonymous){this.$post_avatar_link.removeClass(\"use_blog_avatar\");this.$tumblelog_name.hide();this.$anonymous.show()}else{this.$post_avatar_link.addClass(\"use_blog_avatar\");this.$tumblelog_name.show();this.$anonymous.hide()}},show_form:function(){Tumblr.KeyCommands.suspend();d(document).on(\"keydown\",this.keyboard_events.keydown);this.$body.addClass(\"scrollverlay_active\");this.$plexi.addClass(\"active\");setTimeout(_.bind(function(){this.$plexi.addClass(\"show\");this.$post_form_wrapper.addClass(\"active\")},this),10);return this},hide_form:function(){Tumblr.KeyCommands.resume();this.$post_form_wrapper.removeClass(\"active\");this.$plexi.removeClass(\"show\");setTimeout(_.bind(function(){this.$plexi.removeClass(\"active\");this.destroy()},this),250);this.$body.removeClass(\"scrollverlay_active\");return this},show_loader:function(){this.$loader.show();this.$close_button.hide();setTimeout(_.bind(function(){this.$loader.addClass(\"active\")},this),10);this.spinner.spin(this.$(\".loader\").get(0))},hide_loader:function(){this.$close_button.show();this.$loader.removeClass(\"active\");this.spinner.stop();this.$loader.hide()},serialize:function(i,j){var h={};var g=i.serializeArray();d.each(g,function(){if(h[this.name]!==undefined){if(!h[this.name].push){h[this.name]=[h[this.name]]}h[this.name].push(this.value||\"\")}else{h[this.name]=this.value||\"\"}});return(j)?JSON.stringify(h):h},destroy:function(){this.remove();d(document).off(\"keydown\",this.keyboard_events.keydown)},update:function(){if(d.trim(this.$question.val()).length>0){this.enable_submit()}else{this.disable_submit()}if(this.$question.val().match(/\\n/g)){this.$question.val(this.$question.val().replace(/\\n/g,\"\"))}if(this.$question.val().length>this.ask_limit){this.$question.val(this.$question.val().substring(0,this.ask_limit))}var g=this.ask_limit-this.$question.val().length;this.$character_count.text(g);if(g<=100){this.$character_count.addClass(\"active\");if(g>40){this.$character_count.css({color:\"#a8b1ba\"})}else{if(g>20&&g<=40){this.$character_count.css({color:\"#b2212e\"})}else{this.$character_count.css({color:\"#cd1828\"})}}}else{this.$character_count.removeClass(\"active\")}},enable_submit:function(){if(!this.is_ie9){this.$ask_button.prop(\"disabled\",false)}else{this.$ask_button.prop(\"disabled\",false).removeClass(\"ui_disabled\")}},disable_submit:function(){if(!this.is_ie9){this.$ask_button.prop(\"disabled\",true)}else{this.$ask_button.prop(\"disabled\",false).addClass(\"ui_disabled\")}},submit_form:function(){var g=this.serialize(this.$form);this.show_loader();this.delay_loader=setTimeout(_.bind(function(){this.show_loader()},this),150);this.model.save(g,{success:_.bind(function(h){setTimeout(_.bind(function(){clearTimeout(this.delay_loader);if(typeof Tumblr.Toaster===\"object\"&&typeof Tumblr.ToastKit===\"object\"){var j=\"Sent to %1$s\";j=Tumblr.ToastKit.__(j).replace(\"%1$s\",this.recipient);var i={type:\"image_text\",message:\"<strong>\"+j+\" </strong>\",is_link:false,href:\"#\",img1:{url:(this.is_anonymous)?this.$anonymous_avatar.data(\"anonymous-avatar-url\"):this.$post_avatar_link.data(\"user-avatar-url\"),is_link:false,href:\"#\"}};Tumblr.Toaster.add_toast(i)}this.hide_form()},this),350)},this),error:_.bind(function(h,i){clearTimeout(this.delay_loader);this.hide_loader();this.display_errors(i)},this)})},show_messages:function(h,i){var j=this.$(\".\"+h);var g=j.get(0);if(!g){return}j.empty();if(typeof i===\"string\"){i=[i]}_.each(i,function(l){var k=d(\"<li/>\",{text:l});j.append(k)});j.show().fadeTo(250,1)},hide_messages:function(g){var h=this.$(\".\"+g);if(!h.length){return}h.empty().hide()},display_errors:function(g){this.show_messages(\"errors\",g)},hide_errors:function(){this.hide_messages(\"errors\")}});a.DashboardAsk=e;a.DashboardAskModel=f;a.DashboardAskView=b})(jQuery,Tumblr||{});jQuery(function(){Tumblr.DashboardAsk.initialize()});"}
],
[
{"endColumn":45295,"endLine":0,"scriptId":"127","startColumn":0,"startLine":0,"url":"http://assets.tumblr.com/assets/scripts/jquery.sparkline.min.js?_v=37c522fc7980fcb0823c2e263929e72b"},{"scriptSource":"(function(b){typeof define==\"function\"&&define.amd?define([\"jquery\"],b):b(jQuery)})(function(ar){var aq={},ap,ao,an,am,al,ak,aj,ai,ah,ag,af,ae,ad,ac,aa,Y,W,U,S,Q,O,M,K,J,ab,Z,X,V,T,R,P,N,L=0;ap=function(){return{common:{type:\"line\",lineColor:\"#00f\",fillColor:\"#cdf\",defaultPixelsPerValue:3,width:\"auto\",height:\"auto\",composite:!1,tagValuesAttribute:\"values\",tagOptionsPrefix:\"spark\",enableTagOptions:!1,enableHighlight:!0,highlightLighten:1.4,tooltipSkipNull:!0,tooltipPrefix:\"\",tooltipSuffix:\"\",disableHiddenCheck:!1,numberFormatter:!1,numberDigitGroupCount:3,numberDigitGroupSep:\",\",numberDecimalMark:\".\",disableTooltips:!1,disableInteraction:!1},line:{spotColor:\"#f80\",highlightSpotColor:\"#5f5\",highlightLineColor:\"#f22\",spotRadius:1.5,minSpotColor:\"#f80\",maxSpotColor:\"#f80\",lineWidth:1,normalRangeMin:undefined,normalRangeMax:undefined,normalRangeColor:\"#ccc\",drawNormalOnTop:!1,chartRangeMin:undefined,chartRangeMax:undefined,chartRangeMinX:undefined,chartRangeMaxX:undefined,tooltipFormat:new an('<span style=\"color: {{color}}\">&#9679;</span> {{prefix}}{{y}}{{suffix}}')},bar:{barColor:\"#3366cc\",negBarColor:\"#f44\",stackedBarColor:[\"#3366cc\",\"#dc3912\",\"#ff9900\",\"#109618\",\"#66aa00\",\"#dd4477\",\"#0099c6\",\"#990099\"],zeroColor:undefined,nullColor:undefined,zeroAxis:!0,barWidth:4,barSpacing:1,chartRangeMax:undefined,chartRangeMin:undefined,chartRangeClip:!1,colorMap:undefined,tooltipFormat:new an('<span style=\"color: {{color}}\">&#9679;</span> {{prefix}}{{value}}{{suffix}}')},tristate:{barWidth:4,barSpacing:1,posBarColor:\"#6f6\",negBarColor:\"#f44\",zeroBarColor:\"#999\",colorMap:{},tooltipFormat:new an('<span style=\"color: {{color}}\">&#9679;</span> {{value:map}}'),tooltipValueLookups:{map:{\"-1\":\"Loss\",0:\"Draw\",1:\"Win\"}}},discrete:{lineHeight:\"auto\",thresholdColor:undefined,thresholdValue:0,chartRangeMax:undefined,chartRangeMin:undefined,chartRangeClip:!1,tooltipFormat:new an(\"{{prefix}}{{value}}{{suffix}}\")},bullet:{targetColor:\"#f33\",targetWidth:3,performanceColor:\"#33f\",rangeColors:[\"#d3dafe\",\"#a8b6ff\",\"#7f94ff\"],base:undefined,tooltipFormat:new an(\"{{fieldkey:fields}} - {{value}}\"),tooltipValueLookups:{fields:{r:\"Range\",p:\"Performance\",t:\"Target\"}}},pie:{offset:0,sliceColors:[\"#3366cc\",\"#dc3912\",\"#ff9900\",\"#109618\",\"#66aa00\",\"#dd4477\",\"#0099c6\",\"#990099\"],borderWidth:0,borderColor:\"#000\",tooltipFormat:new an('<span style=\"color: {{color}}\">&#9679;</span> {{value}} ({{percent.1}}%)')},box:{raw:!1,boxLineColor:\"#000\",boxFillColor:\"#cdf\",whiskerColor:\"#000\",outlierLineColor:\"#333\",outlierFillColor:\"#fff\",medianColor:\"#f00\",showOutliers:!0,outlierIQR:1.5,spotRadius:1.5,target:undefined,targetColor:\"#4a2\",chartRangeMax:undefined,chartRangeMin:undefined,tooltipFormat:new an(\"{{field:fields}}: {{value}}\"),tooltipFormatFieldlistKey:\"field\",tooltipValueLookups:{fields:{lq:\"Lower Quartile\",med:\"Median\",uq:\"Upper Quartile\",lo:\"Left Outlier\",ro:\"Right Outlier\",lw:\"Left Whisker\",rw:\"Right Whisker\"}}}}},Z='.jqstooltip { position: absolute;left: 0px;top: 0px;visibility: hidden;background: rgb(0, 0, 0) transparent;background-color: rgba(0,0,0,0.6);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);-ms-filter: \"progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)\";color: white;font: 10px arial, san serif;text-align: left;white-space: nowrap;padding: 5px;border: 1px solid white;z-index: 10000;}.jqsfield { color: white;font: 10px arial, san serif;text-align: left;}',ao=function(){var a,d;return a=function(){this.init.apply(this,arguments)},arguments.length>1?(arguments[0]?(a.prototype=ar.extend(new arguments[0],arguments[arguments.length-1]),a._super=arguments[0].prototype):a.prototype=arguments[arguments.length-1],arguments.length>2&&(d=Array.prototype.slice.call(arguments,1,-1),d.unshift(a.prototype),ar.extend.apply(ar,d))):a.prototype=arguments[0],a.prototype.cls=a,a},ar.SPFormatClass=an=ao({fre:/\\{\\{([\\w.]+?)(:(.+?))?\\}\\}/g,precre:/(\\w+)\\.(\\d+)/,init:function(d,c){this.format=d,this.fclass=c},render:function(t,s,r){var q=this,p=t,o,n,m,l,k;return this.format.replace(this.fre,function(){var b;return n=arguments[1],m=arguments[3],o=q.precre.exec(n),o?(k=o[2],n=o[1]):k=!1,l=p[n],l===undefined?\"\":m&&s&&s[m]?(b=s[m],b.get?s[m].get(l)||l:s[m][l]||l):(ah(l)&&(r.get(\"numberFormatter\")?l=r.get(\"numberFormatter\")(l):l=ac(l,k,r.get(\"numberDigitGroupCount\"),r.get(\"numberDigitGroupSep\"),r.get(\"numberDecimalMark\"))),l)})}}),ar.spformat=function(d,c){return new an(d,c)},am=function(e,d,f){return e<d?d:e>f?f:e},al=function(e,d){var f;return d===2?(f=Math.floor(e.length/2),e.length%2?e[f]:(e[f-1]+e[f])/2):e.length%2?(f=(e.length*d+d)/4,f%1?(e[Math.floor(f)]+e[Math.floor(f)-1])/2:e[f-1]):(f=(e.length*d+2)/4,f%1?(e[Math.floor(f)]+e[Math.floor(f)-1])/2:e[f-1])},ak=function(d){var c;switch(d){case\"undefined\":d=undefined;break;case\"null\":d=null;break;case\"true\":d=!0;break;case\"false\":d=!1;break;default:c=parseFloat(d),d==c&&(d=c)}return d},aj=function(e){var d,f=[];for(d=e.length;d--;){f[d]=ak(e[d])}return f},ai=function(g,f){var j,i,h=[];for(j=0,i=g.length;j<i;j++){g[j]!==f&&h.push(g[j])}return h},ah=function(b){return !isNaN(parseFloat(b))&&isFinite(b)},ac=function(a,n,m,l,k){var j,i;a=(n===!1?parseFloat(a).toString():a.toFixed(n)).split(\"\"),j=(j=ar.inArray(\".\",a))<0?a.length:j,j<a.length&&(a[j]=k);for(i=j-m;i>0;i-=m){a.splice(i,0,l)}return a.join(\"\")},ag=function(f,e,h){var g;for(g=e.length;g--;){if(h&&e[g]===null){continue}if(e[g]!==f){return !1}}return !0},af=function(e){var d=0,f;for(f=e.length;f--;){d+=typeof e[f]==\"number\"?e[f]:0}return d},ad=function(a){return ar.isArray(a)?a:[a]},ae=function(d){var c;document.createStyleSheet?document.createStyleSheet().cssText=d:(c=document.createElement(\"style\"),c.type=\"text/css\",document.getElementsByTagName(\"head\")[0].appendChild(c),c[typeof document.body.style.WebkitAppearance==\"string\"?\"innerText\":\"innerHTML\"]=d)},ar.fn.simpledraw=function(a,l,k,j){var i,h;if(k&&(i=this.data(\"_jqs_vcanvas\"))){return i}a===undefined&&(a=ar(this).innerWidth()),l===undefined&&(l=ar(this).innerHeight());if(ar.fn.sparkline.hasCanvas){i=new R(a,l,this,j)}else{if(!ar.fn.sparkline.hasVML){return !1}i=new P(a,l,this)}return h=ar(this).data(\"_jqs_mhandler\"),h&&h.registerCanvas(i),i},ar.fn.cleardraw=function(){var b=this.data(\"_jqs_vcanvas\");b&&b.reset()},ar.RangeMapClass=aa=ao({init:function(f){var e,h,g=[];for(e in f){f.hasOwnProperty(e)&&typeof e==\"string\"&&e.indexOf(\":\")>-1&&(h=e.split(\":\"),h[0]=h[0].length===0?-Infinity:parseFloat(h[0]),h[1]=h[1].length===0?Infinity:parseFloat(h[1]),h[2]=f[e],g.push(h))}this.map=f,this.rangelist=g||!1},get:function(g){var f=this.rangelist,j,i,h;if((h=this.map[g])!==undefined){return h}if(f){for(j=f.length;j--;){i=f[j];if(i[0]<=g&&i[1]>=g){return i[2]}}}return undefined}}),ar.range_map=function(b){return new aa(b)},Y=ao({init:function(a,f){var e=ar(a);this.$el=e,this.options=f,this.currentPageX=0,this.currentPageY=0,this.el=a,this.splist=[],this.tooltip=null,this.over=!1,this.displayTooltips=!f.get(\"disableTooltips\"),this.highlightEnabled=!f.get(\"disableHighlight\")},registerSparkline:function(b){this.splist.push(b),this.over&&this.updateDisplay()},registerCanvas:function(a){var d=ar(a.canvas);this.canvas=a,this.$canvas=d,d.mouseenter(ar.proxy(this.mouseenter,this)),d.mouseleave(ar.proxy(this.mouseleave,this)),d.click(ar.proxy(this.mouseclick,this))},reset:function(b){this.splist=[],this.tooltip&&b&&(this.tooltip.remove(),this.tooltip=undefined)},mouseclick:function(a){var d=ar.Event(\"sparklineClick\");d.originalEvent=a,d.sparklines=this.splist,this.$el.trigger(d)},mouseenter:function(a){ar(document.body).unbind(\"mousemove.jqs\"),ar(document.body).bind(\"mousemove.jqs\",ar.proxy(this.mousemove,this)),this.over=!0,this.currentPageX=a.pageX,this.currentPageY=a.pageY,this.currentEl=a.target,!this.tooltip&&this.displayTooltips&&(this.tooltip=new W(this.options),this.tooltip.updatePosition(a.pageX,a.pageY)),this.updateDisplay()},mouseleave:function(){ar(document.body).unbind(\"mousemove.jqs\");var a=this.splist,j=a.length,i=!1,h,g;this.over=!1,this.currentEl=null,this.tooltip&&(this.tooltip.remove(),this.tooltip=null);for(g=0;g<j;g++){h=a[g],h.clearRegionHighlight()&&(i=!0)}i&&this.canvas.render()},mousemove:function(b){this.currentPageX=b.pageX,this.currentPageY=b.pageY,this.currentEl=b.target,this.tooltip&&this.tooltip.updatePosition(b.pageX,b.pageY),this.updateDisplay()},updateDisplay:function(){var v=this.splist,u=v.length,t=!1,s=this.$canvas.offset(),r=this.currentPageX-s.left,q=this.currentPageY-s.top,p,o,n,m,a;if(!this.over){return}for(n=0;n<u;n++){o=v[n],m=o.setRegionHighlight(this.currentEl,r,q),m&&(t=!0)}if(t){a=ar.Event(\"sparklineRegionChange\"),a.sparklines=this.splist,this.$el.trigger(a);if(this.tooltip){p=\"\";for(n=0;n<u;n++){o=v[n],p+=o.getCurrentRegionTooltip()}this.tooltip.setContent(p)}this.disableHighlight||this.canvas.render()}m===null&&this.mouseleave()}}),W=ao({sizeStyle:\"position: static !important;display: block !important;visibility: hidden !important;float: left !important;\",init:function(a){var h=a.get(\"tooltipClassname\",\"jqstooltip\"),g=this.sizeStyle,f;this.container=a.get(\"tooltipContainer\")||document.body,this.tooltipOffsetX=a.get(\"tooltipOffsetX\",10),this.tooltipOffsetY=a.get(\"tooltipOffsetY\",12),ar(\"#jqssizetip\").remove(),ar(\"#jqstooltip\").remove(),this.sizetip=ar(\"<div/>\",{id:\"jqssizetip\",style:g,\"class\":h}),this.tooltip=ar(\"<div/>\",{id:\"jqstooltip\",\"class\":h}).appendTo(this.container),f=this.tooltip.offset(),this.offsetLeft=f.left,this.offsetTop=f.top,this.hidden=!0,ar(window).unbind(\"resize.jqs scroll.jqs\"),ar(window).bind(\"resize.jqs scroll.jqs\",ar.proxy(this.updateWindowDims,this)),this.updateWindowDims()},updateWindowDims:function(){this.scrollTop=ar(window).scrollTop(),this.scrollLeft=ar(window).scrollLeft(),this.scrollRight=this.scrollLeft+ar(window).width(),this.updatePosition()},getSize:function(b){this.sizetip.html(b).appendTo(this.container),this.width=this.sizetip.width()+1,this.height=this.sizetip.height(),this.sizetip.remove()},setContent:function(b){if(!b){this.tooltip.css(\"visibility\",\"hidden\"),this.hidden=!0;return}this.getSize(b),this.tooltip.html(b).css({width:this.width,height:this.height,visibility:\"visible\"}),this.hidden&&(this.hidden=!1,this.updatePosition())},updatePosition:function(d,c){if(d===undefined){if(this.mousex===undefined){return}d=this.mousex-this.offsetLeft,c=this.mousey-this.offsetTop}else{this.mousex=d-=this.offsetLeft,this.mousey=c-=this.offsetTop}if(!this.height||!this.width||this.hidden){return}c-=this.height+this.tooltipOffsetY,d+=this.tooltipOffsetX,c<this.scrollTop&&(c=this.scrollTop),d<this.scrollLeft?d=this.scrollLeft:d+this.width>this.scrollRight&&(d=this.scrollRight-this.width),this.tooltip.css({left:d,top:c})},remove:function(){this.tooltip.remove(),this.sizetip.remove(),this.sizetip=this.tooltip=undefined,ar(window).unbind(\"resize.jqs scroll.jqs\")}}),X=function(){ae(Z)},ar(X),N=[],ar.fn.sparkline=function(a,d){return this.each(function(){var i=new ar.fn.sparkline.options(this,d),h=ar(this),c,b;c=function(){var q,p,o,n,m,l,e;if(a===\"html\"||a===undefined){e=this.getAttribute(i.get(\"tagValuesAttribute\"));if(e===undefined||e===null){e=h.html()}q=e.replace(/(^\\s*<!--)|(-->\\s*$)|\\s+/g,\"\").split(\",\")}else{q=a}p=i.get(\"width\")===\"auto\"?q.length*i.get(\"defaultPixelsPerValue\"):i.get(\"width\");if(i.get(\"height\")===\"auto\"){if(!i.get(\"composite\")||!ar.data(this,\"_jqs_vcanvas\")){n=document.createElement(\"span\"),n.innerHTML=\"a\",h.html(n),o=ar(n).innerHeight()||ar(n).height(),ar(n).remove(),n=null}}else{o=i.get(\"height\")}i.get(\"disableInteraction\")?m=!1:(m=ar.data(this,\"_jqs_mhandler\"),m?i.get(\"composite\")||m.reset():(m=new Y(this,i),ar.data(this,\"_jqs_mhandler\",m)));if(i.get(\"composite\")&&!ar.data(this,\"_jqs_vcanvas\")){ar.data(this,\"_jqs_errnotify\")||(alert(\"Attempted to attach a composite sparkline to an element with no existing sparkline\"),ar.data(this,\"_jqs_errnotify\",!0));return}l=new (ar.fn.sparkline[i.get(\"type\")])(this,q,i,p,o),l.render(),m&&m.registerSparkline(l)};if(ar(this).html()&&!i.get(\"disableHiddenCheck\")&&ar(this).is(\":hidden\")||ar.fn.jquery<\"1.3.0\"&&ar(this).parents().is(\":hidden\")||!ar(this).parents(\"body\").length){if(!i.get(\"composite\")&&ar.data(this,\"_jqs_pending\")){for(b=N.length;b;b--){N[b-1][0]==this&&N.splice(b-1,1)}}N.push([this,c]),ar.data(this,\"_jqs_pending\",!0)}else{c.call(this)}})},ar.fn.sparkline.defaults=ap(),ar.sparkline_display_visible=function(){var a,h,g,f=[];for(h=0,g=N.length;h<g;h++){a=N[h][0],ar(a).is(\":visible\")&&!ar(a).parents().is(\":hidden\")?(N[h][1].call(a),ar.data(N[h][0],\"_jqs_pending\",!1),f.push(h)):!ar(a).closest(\"html\").length&&!ar.data(a,\"_jqs_pending\")&&(ar.data(N[h][0],\"_jqs_pending\",!1),f.push(h))}for(h=f.length;h;h--){N.splice(f[h-1],1)}},ar.fn.sparkline.options=ao({init:function(l,k){var j,i,b,a;this.userOptions=k=k||{},this.tag=l,this.tagValCache={},i=ar.fn.sparkline.defaults,b=i.common,this.tagOptionsPrefix=k.enableTagOptions&&(k.tagOptionsPrefix||b.tagOptionsPrefix),a=this.getTagSetting(\"type\"),a===aq?j=i[k.type||b.type]:j=i[a],this.mergedOptions=ar.extend({},b,j,k)},getTagSetting:function(b){var l=this.tagOptionsPrefix,k,j,i,h;if(l===!1||l===undefined){return aq}if(this.tagValCache.hasOwnProperty(b)){k=this.tagValCache.key}else{k=this.tag.getAttribute(l+b);if(k===undefined||k===null){k=aq}else{if(k.substr(0,1)===\"[\"){k=k.substr(1,k.length-2).split(\",\");for(j=k.length;j--;){k[j]=ak(k[j].replace(/(^\\s*)|(\\s*$)/g,\"\"))}}else{if(k.substr(0,1)===\"{\"){i=k.substr(1,k.length-2).split(\",\"),k={};for(j=i.length;j--;){h=i[j].split(\":\",2),k[h[0].replace(/(^\\s*)|(\\s*$)/g,\"\")]=ak(h[1].replace(/(^\\s*)|(\\s*$)/g,\"\"))}}else{k=ak(k)}}}this.tagValCache.key=k}return k},get:function(b,h){var g=this.getTagSetting(b),f;return g!==aq?g:(f=this.mergedOptions[b])===undefined?h:f}}),ar.fn.sparkline._base=ao({disabled:!1,init:function(a,j,i,h,g){this.el=a,this.$el=ar(a),this.values=j,this.options=i,this.width=h,this.height=g,this.currentRegion=undefined},initTarget:function(){var b=!this.options.get(\"disableInteraction\");(this.target=this.$el.simpledraw(this.width,this.height,this.options.get(\"composite\"),b))?(this.canvasWidth=this.target.pixelWidth,this.canvasHeight=this.target.pixelHeight):this.disabled=!0},render:function(){return this.disabled?(this.el.innerHTML=\"\",!1):!0},getRegion:function(d,c){},setRegionHighlight:function(h,g,l){var k=this.currentRegion,j=!this.options.get(\"disableHighlight\"),i;return g>this.canvasWidth||l>this.canvasHeight||g<0||l<0?null:(i=this.getRegion(h,g,l),k!==i?(k!==undefined&&j&&this.removeHighlight(),this.currentRegion=i,i!==undefined&&j&&this.renderHighlight(),!0):!1)},clearRegionHighlight:function(){return this.currentRegion!==undefined?(this.removeHighlight(),this.currentRegion=undefined,!0):!1},renderHighlight:function(){this.changeHighlight(!0)},removeHighlight:function(){this.changeHighlight(!1)},changeHighlight:function(b){},getCurrentRegionTooltip:function(){var G=this.options,F=\"\",E=[],D,C,B,A,z,y,x,w,v,u,t,e,a,H;if(this.currentRegion===undefined){return\"\"}D=this.getCurrentRegionFields(),t=G.get(\"tooltipFormatter\");if(t){return t(this,G,D)}G.get(\"tooltipChartTitle\")&&(F+='<div class=\"jqs jqstitle\">'+G.get(\"tooltipChartTitle\")+\"</div>\\n\"),C=this.options.get(\"tooltipFormat\");if(!C){return\"\"}ar.isArray(C)||(C=[C]),ar.isArray(D)||(D=[D]),x=this.options.get(\"tooltipFormatFieldlist\"),w=this.options.get(\"tooltipFormatFieldlistKey\");if(x&&w){v=[];for(y=D.length;y--;){u=D[y][w],(H=ar.inArray(u,x))!=-1&&(v[H]=D[y])}D=v}B=C.length,a=D.length;for(y=0;y<B;y++){e=C[y],typeof e==\"string\"&&(e=new an(e)),A=e.fclass||\"jqsfield\";for(H=0;H<a;H++){if(!D[H].isNull||!G.get(\"tooltipSkipNull\")){ar.extend(D[H],{prefix:G.get(\"tooltipPrefix\"),suffix:G.get(\"tooltipSuffix\")}),z=e.render(D[H],G.get(\"tooltipValueLookups\"),G),E.push('<div class=\"'+A+'\">'+z+\"</div>\")}}}return E.length?F+E.join(\"\\n\"):\"\"},getCurrentRegionFields:function(){},calcHighlightColor:function(j,f){var p=f.get(\"highlightColor\"),o=f.get(\"highlightLighten\"),n,m,l,k;if(p){return p}if(o){n=/^#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(j)||/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i.exec(j);if(n){l=[],m=j.length===4?16:1;for(k=0;k<3;k++){l[k]=am(Math.round(parseInt(n[k+1],16)*m*o),0,255)}return\"rgb(\"+l.join(\",\")+\")\"}}return j}}),U={changeHighlight:function(a){var j=this.currentRegion,i=this.target,h=this.regionShapes[j],g;h&&(g=this.renderRegion(j,a),ar.isArray(g)||ar.isArray(h)?(i.replaceWithShapes(h,g),this.regionShapes[j]=ar.map(g,function(b){return b.id})):(i.replaceWithShape(h,g),this.regionShapes[j]=g.id))},render:function(){var a=this.values,n=this.target,m=this.regionShapes,l,k,j,i;if(!this.cls._super.render.call(this)){return}for(j=a.length;j--;){l=this.renderRegion(j);if(l){if(ar.isArray(l)){k=[];for(i=l.length;i--;){l[i].append(),k.push(l[i].id)}m[j]=k}else{l.append(),m[j]=l.id}}else{m[j]=null}}n.render()}},ar.fn.sparkline.line=S=ao(ar.fn.sparkline._base,{type:\"line\",init:function(g,f,j,i,h){S._super.init.call(this,g,f,j,i,h),this.vertices=[],this.regionMap=[],this.xvalues=[],this.yvalues=[],this.yminmax=[],this.hightlightSpotId=null,this.lastShapeId=null,this.initTarget()},getRegion:function(g,f,j){var i,h=this.regionMap;for(i=h.length;i--;){if(h[i]!==null&&f>=h[i][0]&&f<=h[i][1]){return h[i][2]}}return undefined},getCurrentRegionFields:function(){var b=this.currentRegion;return{isNull:this.yvalues[b]===null,x:this.xvalues[b],y:this.yvalues[b],color:this.options.get(\"lineColor\"),fillColor:this.options.get(\"fillColor\"),offset:b}},renderHighlight:function(){var r=this.currentRegion,q=this.target,p=this.vertices[r],o=this.options,n=o.get(\"spotRadius\"),m=o.get(\"highlightSpotColor\"),l=o.get(\"highlightLineColor\"),k,j;if(!p){return}n&&m&&(k=q.drawCircle(p[0],p[1],n,undefined,m),this.highlightSpotId=k.id,q.insertAfterShape(this.lastShapeId,k)),l&&(j=q.drawLine(p[0],this.canvasTop,p[0],this.canvasTop+this.canvasHeight,l),this.highlightLineId=j.id,q.insertAfterShape(this.lastShapeId,j))},removeHighlight:function(){var b=this.target;this.highlightSpotId&&(b.removeShapeId(this.highlightSpotId),this.highlightSpotId=null),this.highlightLineId&&(b.removeShapeId(this.highlightLineId),this.highlightLineId=null)},scanValues:function(){var t=this.values,s=t.length,r=this.xvalues,q=this.yvalues,p=this.yminmax,o,n,m,l,k;for(o=0;o<s;o++){n=t[o],m=typeof t[o]==\"string\",l=typeof t[o]==\"object\"&&t[o] instanceof Array,k=m&&t[o].split(\":\"),m&&k.length===2?(r.push(Number(k[0])),q.push(Number(k[1])),p.push(Number(k[1]))):l?(r.push(n[0]),q.push(n[1]),p.push(n[1])):(r.push(o),t[o]===null||t[o]===\"null\"?q.push(null):(q.push(Number(n)),p.push(Number(n))))}this.options.get(\"xvalues\")&&(r=this.options.get(\"xvalues\")),this.maxy=this.maxyorg=Math.max.apply(Math,p),this.miny=this.minyorg=Math.min.apply(Math,p),this.maxx=Math.max.apply(Math,r),this.minx=Math.min.apply(Math,r),this.xvalues=r,this.yvalues=q,this.yminmax=p},processRangeOptions:function(){var e=this.options,d=e.get(\"normalRangeMin\"),f=e.get(\"normalRangeMax\");d!==undefined&&(d<this.miny&&(this.miny=d),f>this.maxy&&(this.maxy=f)),e.get(\"chartRangeMin\")!==undefined&&(e.get(\"chartRangeClip\")||e.get(\"chartRangeMin\")<this.miny)&&(this.miny=e.get(\"chartRangeMin\")),e.get(\"chartRangeMax\")!==undefined&&(e.get(\"chartRangeClip\")||e.get(\"chartRangeMax\")>this.maxy)&&(this.maxy=e.get(\"chartRangeMax\")),e.get(\"chartRangeMinX\")!==undefined&&(e.get(\"chartRangeClipX\")||e.get(\"chartRangeMinX\")<this.minx)&&(this.minx=e.get(\"chartRangeMinX\")),e.get(\"chartRangeMaxX\")!==undefined&&(e.get(\"chartRangeClipX\")||e.get(\"chartRangeMaxX\")>this.maxx)&&(this.maxx=e.get(\"chartRangeMaxX\"))},drawNormalRange:function(r,q,p,o,n){var m=this.options.get(\"normalRangeMin\"),l=this.options.get(\"normalRangeMax\"),k=q+Math.round(p-p*((l-this.miny)/n)),j=Math.round(p*(l-m)/n);this.target.drawRect(r,k,o,j,undefined,this.options.get(\"normalRangeColor\")).append()},render:function(){var aV=this.options,aU=this.target,aT=this.canvasWidth,aS=this.canvasHeight,aR=this.vertices,aQ=aV.get(\"spotRadius\"),aP=this.regionMap,aO,aN,aM,aL,aK,aJ,aI,aH,aE,aC,aA,ax,av,at,q,a,aG,aF,aD,aB,az,ay,aw,au,u;if(!S._super.render.call(this)){return}this.scanValues(),this.processRangeOptions(),aw=this.xvalues,au=this.yvalues;if(!this.yminmax.length||this.yvalues.length<2){return}aL=aK=0,aO=this.maxx-this.minx===0?1:this.maxx-this.minx,aN=this.maxy-this.miny===0?1:this.maxy-this.miny,aM=this.yvalues.length-1,aQ&&(aT<aQ*4||aS<aQ*4)&&(aQ=0);if(aQ){az=aV.get(\"highlightSpotColor\")&&!aV.get(\"disableInteraction\");if(az||aV.get(\"minSpotColor\")||aV.get(\"spotColor\")&&au[aM]===this.miny){aS-=Math.ceil(aQ)}if(az||aV.get(\"maxSpotColor\")||aV.get(\"spotColor\")&&au[aM]===this.maxy){aS-=Math.ceil(aQ),aL+=Math.ceil(aQ)}if(az||(aV.get(\"minSpotColor\")||aV.get(\"maxSpotColor\"))&&(au[0]===this.miny||au[0]===this.maxy)){aK+=Math.ceil(aQ),aT-=Math.ceil(aQ)}if(az||aV.get(\"spotColor\")||aV.get(\"minSpotColor\")||aV.get(\"maxSpotColor\")&&(au[aM]===this.miny||au[aM]===this.maxy)){aT-=Math.ceil(aQ)}}aS--,aV.get(\"normalRangeMin\")!==undefined&&!aV.get(\"drawNormalOnTop\")&&this.drawNormalRange(aK,aL,aS,aT,aN),aI=[],aH=[aI],at=q=null,a=au.length;for(u=0;u<a;u++){aE=aw[u],aA=aw[u+1],aC=au[u],ax=aK+Math.round((aE-this.minx)*(aT/aO)),av=u<a-1?aK+Math.round((aA-this.minx)*(aT/aO)):aT,q=ax+(av-ax)/2,aP[u]=[at||0,q,u],at=q,aC===null?u&&(au[u-1]!==null&&(aI=[],aH.push(aI)),aR.push(null)):(aC<this.miny&&(aC=this.miny),aC>this.maxy&&(aC=this.maxy),aI.length||aI.push([ax,aL+aS]),aJ=[ax,aL+Math.round(aS-aS*((aC-this.miny)/aN))],aI.push(aJ),aR.push(aJ))}aG=[],aF=[],aD=aH.length;for(u=0;u<aD;u++){aI=aH[u],aI.length&&(aV.get(\"fillColor\")&&(aI.push([aI[aI.length-1][0],aL+aS]),aF.push(aI.slice(0)),aI.pop()),aI.length>2&&(aI[0]=[aI[0][0],aI[1][1]]),aG.push(aI))}aD=aF.length;for(u=0;u<aD;u++){aU.drawShape(aF[u],aV.get(\"fillColor\"),aV.get(\"fillColor\")).append()}aV.get(\"normalRangeMin\")!==undefined&&aV.get(\"drawNormalOnTop\")&&this.drawNormalRange(aK,aL,aS,aT,aN),aD=aG.length;for(u=0;u<aD;u++){aU.drawShape(aG[u],aV.get(\"lineColor\"),undefined,aV.get(\"lineWidth\")).append()}if(aQ&&aV.get(\"valueSpots\")){aB=aV.get(\"valueSpots\"),aB.get===undefined&&(aB=new aa(aB));for(u=0;u<a;u++){ay=aB.get(au[u]),ay&&aU.drawCircle(aK+Math.round((aw[u]-this.minx)*(aT/aO)),aL+Math.round(aS-aS*((au[u]-this.miny)/aN)),aQ,undefined,ay).append()}}aQ&&aV.get(\"spotColor\")&&au[aM]!==null&&aU.drawCircle(aK+Math.round((aw[aw.length-1]-this.minx)*(aT/aO)),aL+Math.round(aS-aS*((au[aM]-this.miny)/aN)),aQ,undefined,aV.get(\"spotColor\")).append(),this.maxy!==this.minyorg&&(aQ&&aV.get(\"minSpotColor\")&&(aE=aw[ar.inArray(this.minyorg,au)],aU.drawCircle(aK+Math.round((aE-this.minx)*(aT/aO)),aL+Math.round(aS-aS*((this.minyorg-this.miny)/aN)),aQ,undefined,aV.get(\"minSpotColor\")).append()),aQ&&aV.get(\"maxSpotColor\")&&(aE=aw[ar.inArray(this.maxyorg,au)],aU.drawCircle(aK+Math.round((aE-this.minx)*(aT/aO)),aL+Math.round(aS-aS*((this.maxyorg-this.miny)/aN)),aQ,undefined,aV.get(\"maxSpotColor\")).append())),this.lastShapeId=aU.getLastShapeId(),this.canvasTop=aL,aU.render()}}),ar.fn.sparkline.bar=Q=ao(ar.fn.sparkline._base,U,{type:\"bar\",init:function(aW,aV,aU,aT,aS){var aR=parseInt(aU.get(\"barWidth\"),10),aQ=parseInt(aU.get(\"barSpacing\"),10),aP=aU.get(\"chartRangeMin\"),aO=aU.get(\"chartRangeMax\"),aN=aU.get(\"chartRangeClip\"),aM=Infinity,aL=-Infinity,aK,aJ,aI,aH,aG,aF,aE,aD,aC,aB,aA,az,ay,ax,aw,av,au,at,v,q,j,i,h;Q._super.init.call(this,aW,aV,aU,aT,aS);for(aF=0,aE=aV.length;aF<aE;aF++){q=aV[aF],aK=typeof q==\"string\"&&q.indexOf(\":\")>-1;if(aK||ar.isArray(q)){aw=!0,aK&&(q=aV[aF]=aj(q.split(\":\"))),q=ai(q,null),aJ=Math.min.apply(Math,q),aI=Math.max.apply(Math,q),aJ<aM&&(aM=aJ),aI>aL&&(aL=aI)}}this.stacked=aw,this.regionShapes={},this.barWidth=aR,this.barSpacing=aQ,this.totalBarWidth=aR+aQ,this.width=aT=aV.length*aR+(aV.length-1)*aQ,this.initTarget(),aN&&(ay=aP===undefined?-Infinity:aP,ax=aO===undefined?Infinity:aO),aG=[],aH=aw?[]:aG;var f=[],a=[];for(aF=0,aE=aV.length;aF<aE;aF++){if(aw){av=aV[aF],aV[aF]=v=[],f[aF]=0,aH[aF]=a[aF]=0;for(au=0,at=av.length;au<at;au++){q=v[au]=aN?am(av[au],ay,ax):av[au],q!==null&&(q>0&&(f[aF]+=q),aM<0&&aL>0?q<0?a[aF]+=Math.abs(q):aH[aF]+=q:aH[aF]+=Math.abs(q-(q<0?aL:aM)),aG.push(q))}}else{q=aN?am(aV[aF],ay,ax):aV[aF],q=aV[aF]=ak(q),q!==null&&aG.push(q)}}this.max=az=Math.max.apply(Math,aG),this.min=aA=Math.min.apply(Math,aG),this.stackMax=aL=aw?Math.max.apply(Math,f):az,this.stackMin=aM=aw?Math.min.apply(Math,aG):aA,aU.get(\"chartRangeMin\")!==undefined&&(aU.get(\"chartRangeClip\")||aU.get(\"chartRangeMin\")<aA)&&(aA=aU.get(\"chartRangeMin\")),aU.get(\"chartRangeMax\")!==undefined&&(aU.get(\"chartRangeClip\")||aU.get(\"chartRangeMax\")>az)&&(az=aU.get(\"chartRangeMax\")),this.zeroAxis=aC=aU.get(\"zeroAxis\",!0),aA<=0&&az>=0&&aC?aB=0:aC==0?aB=aA:aA>0?aB=aA:aB=az,this.xaxisOffset=aB,aD=aw?Math.max.apply(Math,aH)+Math.max.apply(Math,a):az-aA,this.canvasHeightEf=aC&&aA<0?this.canvasHeight-2:this.canvasHeight-1,aA<aB?(i=aw&&az>=0?aL:az,j=(i-aB)/aD*this.canvasHeight,j!==Math.ceil(j)&&(this.canvasHeightEf-=2,j=Math.ceil(j))):j=this.canvasHeight,this.yoffset=j,ar.isArray(aU.get(\"colorMap\"))?(this.colorMapByIndex=aU.get(\"colorMap\"),this.colorMapByValue=null):(this.colorMapByIndex=null,this.colorMapByValue=aU.get(\"colorMap\"),this.colorMapByValue&&this.colorMapByValue.get===undefined&&(this.colorMapByValue=new aa(this.colorMapByValue))),this.range=aD},getRegion:function(f,e,h){var g=Math.floor(e/this.totalBarWidth);return g<0||g>=this.values.length?undefined:g},getCurrentRegionFields:function(){var g=this.currentRegion,f=ad(this.values[g]),j=[],i,h;for(h=f.length;h--;){i=f[h],j.push({isNull:i===null,value:i,color:this.calcColor(h,i,g),offset:g})}return j},calcColor:function(a,p,o){var n=this.colorMapByIndex,m=this.colorMapByValue,l=this.options,k,j;return this.stacked?k=l.get(\"stackedBarColor\"):k=p<0?l.get(\"negBarColor\"):l.get(\"barColor\"),p===0&&l.get(\"zeroColor\")!==undefined&&(k=l.get(\"zeroColor\")),m&&(j=m.get(p))?k=j:n&&n.length>o&&(k=n[o]),ar.isArray(k)?k[a%k.length]:k},renderRegion:function(aB,aA){var az=this.values[aB],ay=this.options,ax=this.xaxisOffset,aw=[],av=this.range,au=this.stacked,at=this.target,I=aB*this.totalBarWidth,H=this.canvasHeightEf,G=this.yoffset,F,E,D,C,B,A,z,y,l,a;az=ar.isArray(az)?az:[az],z=az.length,y=az[0],C=ag(null,az),a=ag(ax,az,!0);if(C){return ay.get(\"nullColor\")?(D=aA?ay.get(\"nullColor\"):this.calcHighlightColor(ay.get(\"nullColor\"),ay),F=G>0?G-1:G,at.drawRect(I,F,this.barWidth-1,0,D,D)):undefined}B=G;for(A=0;A<z;A++){y=az[A];if(au&&y===ax){if(!a||l){continue}l=!0}av>0?E=Math.floor(H*(Math.abs(y-ax)/av))+1:E=1,y<ax||y===ax&&G===0?(F=B,B+=E):(F=G-E,G-=E),D=this.calcColor(A,y,aB),aA&&(D=this.calcHighlightColor(D,ay)),aw.push(at.drawRect(I,F,this.barWidth-1,E-1,D,D))}return aw.length===1?aw[0]:aw}}),ar.fn.sparkline.tristate=O=ao(ar.fn.sparkline._base,U,{type:\"tristate\",init:function(a,n,m,l,k){var j=parseInt(m.get(\"barWidth\"),10),i=parseInt(m.get(\"barSpacing\"),10);O._super.init.call(this,a,n,m,l,k),this.regionShapes={},this.barWidth=j,this.barSpacing=i,this.totalBarWidth=j+i,this.values=ar.map(n,Number),this.width=l=n.length*j+(n.length-1)*i,ar.isArray(m.get(\"colorMap\"))?(this.colorMapByIndex=m.get(\"colorMap\"),this.colorMapByValue=null):(this.colorMapByIndex=null,this.colorMapByValue=m.get(\"colorMap\"),this.colorMapByValue&&this.colorMapByValue.get===undefined&&(this.colorMapByValue=new aa(this.colorMapByValue))),this.initTarget()},getRegion:function(e,d,f){return Math.floor(d/this.totalBarWidth)},getCurrentRegionFields:function(){var b=this.currentRegion;return{isNull:this.values[b]===undefined,value:this.values[b],color:this.calcColor(this.values[b],b),offset:b}},calcColor:function(j,i){var p=this.values,o=this.options,n=this.colorMapByIndex,m=this.colorMapByValue,l,k;return m&&(k=m.get(j))?l=k:n&&n.length>i?l=n[i]:p[i]<0?l=o.get(\"negBarColor\"):p[i]>0?l=o.get(\"posBarColor\"):l=o.get(\"zeroBarColor\"),l},renderRegion:function(v,u){var t=this.values,s=this.options,r=this.target,q,p,o,n,m,l;q=r.pixelHeight,o=Math.round(q/2),n=v*this.totalBarWidth,t[v]<0?(m=o,p=o-1):t[v]>0?(m=0,p=o-1):(m=o-1,p=2),l=this.calcColor(t[v],v);if(l===null){return}return u&&(l=this.calcHighlightColor(l,s)),r.drawRect(n,m,this.barWidth-1,p-1,l,l)}}),ar.fn.sparkline.discrete=M=ao(ar.fn.sparkline._base,U,{type:\"discrete\",init:function(a,j,i,h,g){M._super.init.call(this,a,j,i,h,g),this.regionShapes={},this.values=j=ar.map(j,Number),this.min=Math.min.apply(Math,j),this.max=Math.max.apply(Math,j),this.range=this.max-this.min,this.width=h=i.get(\"width\")===\"auto\"?j.length*2:this.width,this.interval=Math.floor(h/j.length),this.itemWidth=h/j.length,i.get(\"chartRangeMin\")!==undefined&&(i.get(\"chartRangeClip\")||i.get(\"chartRangeMin\")<this.min)&&(this.min=i.get(\"chartRangeMin\")),i.get(\"chartRangeMax\")!==undefined&&(i.get(\"chartRangeClip\")||i.get(\"chartRangeMax\")>this.max)&&(this.max=i.get(\"chartRangeMax\")),this.initTarget(),this.target&&(this.lineHeight=i.get(\"lineHeight\")===\"auto\"?Math.round(this.canvasHeight*0.3):i.get(\"lineHeight\"))},getRegion:function(e,d,f){return Math.floor(d/this.itemWidth)},getCurrentRegionFields:function(){var b=this.currentRegion;return{isNull:this.values[b]===undefined,value:this.values[b],offset:b}},renderRegion:function(F,E){var D=this.values,C=this.options,B=this.min,A=this.max,z=this.range,y=this.interval,x=this.target,w=this.canvasHeight,v=this.lineHeight,u=w-v,t,s,r,f;return s=am(D[F],B,A),f=F*y,t=Math.round(u-u*((s-B)/z)),r=C.get(\"thresholdColor\")&&s<C.get(\"thresholdValue\")?C.get(\"thresholdColor\"):C.get(\"lineColor\"),E&&(r=this.calcHighlightColor(r,C)),x.drawLine(f,t,f,t+v,r)}}),ar.fn.sparkline.bullet=K=ao(ar.fn.sparkline._base,{type:\"bullet\",init:function(j,i,p,o,n){var m,l,k;K._super.init.call(this,j,i,p,o,n),this.values=i=aj(i),k=i.slice(),k[0]=k[0]===null?k[2]:k[0],k[1]=i[1]===null?k[2]:k[1],m=Math.min.apply(Math,i),l=Math.max.apply(Math,i),p.get(\"base\")===undefined?m=m<0?m:0:m=p.get(\"base\"),this.min=m,this.max=l,this.range=l-m,this.shapes={},this.valueShapes={},this.regiondata={},this.width=o=p.get(\"width\")===\"auto\"?\"4.0em\":o,this.target=this.$el.simpledraw(o,n,p.get(\"composite\")),i.length||(this.disabled=!0),this.initTarget()},getRegion:function(f,e,h){var g=this.target.getShapeAt(f,e,h);return g!==undefined&&this.shapes[g]!==undefined?this.shapes[g]:undefined},getCurrentRegionFields:function(){var b=this.currentRegion;return{fieldkey:b.substr(0,1),value:this.values[b.substr(1)],region:b}},changeHighlight:function(f){var e=this.currentRegion,h=this.valueShapes[e],g;delete this.shapes[h];switch(e.substr(0,1)){case\"r\":g=this.renderRange(e.substr(1),f);break;case\"p\":g=this.renderPerformance(f);break;case\"t\":g=this.renderTarget(f)}this.valueShapes[e]=g.id,this.shapes[g.id]=e,this.target.replaceWithShape(h,g)},renderRange:function(g,f){var j=this.values[g],i=Math.round(this.canvasWidth*((j-this.min)/this.range)),h=this.options.get(\"rangeColors\")[g-2];return f&&(h=this.calcHighlightColor(h,this.options)),this.target.drawRect(0,0,i-1,this.canvasHeight-1,h,h)},renderPerformance:function(f){var e=this.values[1],h=Math.round(this.canvasWidth*((e-this.min)/this.range)),g=this.options.get(\"performanceColor\");return f&&(g=this.calcHighlightColor(g,this.options)),this.target.drawRect(0,Math.round(this.canvasHeight*0.3),h-1,Math.round(this.canvasHeight*0.4)-1,g,g)},renderTarget:function(h){var g=this.values[0],l=Math.round(this.canvasWidth*((g-this.min)/this.range)-this.options.get(\"targetWidth\")/2),k=Math.round(this.canvasHeight*0.1),j=this.canvasHeight-k*2,i=this.options.get(\"targetColor\");return h&&(i=this.calcHighlightColor(i,this.options)),this.target.drawRect(l,k,this.options.get(\"targetWidth\")-1,j-1,i,i)},render:function(){var f=this.values.length,e=this.target,h,g;if(!K._super.render.call(this)){return}for(h=2;h<f;h++){g=this.renderRange(h).append(),this.shapes[g.id]=\"r\"+h,this.valueShapes[\"r\"+h]=g.id}this.values[1]!==null&&(g=this.renderPerformance().append(),this.shapes[g.id]=\"p1\",this.valueShapes.p1=g.id),this.values[0]!==null&&(g=this.renderTarget().append(),this.shapes[g.id]=\"t0\",this.valueShapes.t0=g.id),e.render()}}),ar.fn.sparkline.pie=J=ao(ar.fn.sparkline._base,{type:\"pie\",init:function(a,n,m,l,k){var j=0,i;J._super.init.call(this,a,n,m,l,k),this.shapes={},this.valueShapes={},this.values=n=ar.map(n,Number),m.get(\"width\")===\"auto\"&&(this.width=this.height);if(n.length>0){for(i=n.length;i--;){j+=n[i]}}this.total=j,this.initTarget(),this.radius=Math.floor(Math.min(this.canvasWidth,this.canvasHeight)/2)},getRegion:function(f,e,h){var g=this.target.getShapeAt(f,e,h);return g!==undefined&&this.shapes[g]!==undefined?this.shapes[g]:undefined},getCurrentRegionFields:function(){var b=this.currentRegion;return{isNull:this.values[b]===undefined,value:this.values[b],percent:this.values[b]/this.total*100,color:this.options.get(\"sliceColors\")[b%this.options.get(\"sliceColors\").length],offset:b}},changeHighlight:function(f){var e=this.currentRegion,h=this.renderSlice(e,f),g=this.valueShapes[e];delete this.shapes[g],this.target.replaceWithShape(g,h),this.valueShapes[e]=h.id,this.shapes[h.id]=e},renderSlice:function(F,E){var D=this.target,C=this.options,B=this.radius,A=C.get(\"borderWidth\"),z=C.get(\"offset\"),y=2*Math.PI,x=this.values,w=this.total,v=z?2*Math.PI*(z/360):0,u,t,s,r,q;r=x.length;for(s=0;s<r;s++){u=v,t=v,w>0&&(t=v+y*(x[s]/w));if(F===s){return q=C.get(\"sliceColors\")[s%C.get(\"sliceColors\").length],E&&(q=this.calcHighlightColor(q,C)),D.drawPieSlice(B,B,B-A,u,t,undefined,q)}v=t}},render:function(){var i=this.target,h=this.values,n=this.options,m=this.radius,l=n.get(\"borderWidth\"),k,j;if(!J._super.render.call(this)){return}l&&i.drawCircle(m,m,Math.floor(m-l/2),n.get(\"borderColor\"),undefined,l).append();for(j=h.length;j--;){h[j]&&(k=this.renderSlice(j).append(),this.valueShapes[j]=k.id,this.shapes[k.id]=j)}i.render()}}),ar.fn.sparkline.box=ab=ao(ar.fn.sparkline._base,{type:\"box\",init:function(a,j,i,h,g){ab._super.init.call(this,a,j,i,h,g),this.values=ar.map(j,Number),this.width=i.get(\"width\")===\"auto\"?\"4.0em\":h,this.initTarget(),this.values.length||(this.disabled=1)},getRegion:function(){return 1},getCurrentRegionFields:function(){var b=[{field:\"lq\",value:this.quartiles[0]},{field:\"med\",value:this.quartiles[1]},{field:\"uq\",value:this.quartiles[2]}];return this.loutlier!==undefined&&b.push({field:\"lo\",value:this.loutlier}),this.routlier!==undefined&&b.push({field:\"ro\",value:this.routlier}),this.lwhisker!==undefined&&b.push({field:\"lw\",value:this.lwhisker}),this.rwhisker!==undefined&&b.push({field:\"rw\",value:this.rwhisker}),b},render:function(){var ax=this.target,aw=this.values,av=aw.length,au=this.options,at=this.canvasWidth,I=this.canvasHeight,H=au.get(\"chartRangeMin\")===undefined?Math.min.apply(Math,aw):au.get(\"chartRangeMin\"),G=au.get(\"chartRangeMax\")===undefined?Math.max.apply(Math,aw):au.get(\"chartRangeMax\"),F=0,E,D,C,B,A,z,y,x,w,v,g;if(!ab._super.render.call(this)){return}if(au.get(\"raw\")){au.get(\"showOutliers\")&&aw.length>5?(D=aw[0],E=aw[1],B=aw[2],A=aw[3],z=aw[4],y=aw[5],x=aw[6]):(E=aw[0],B=aw[1],A=aw[2],z=aw[3],y=aw[4])}else{aw.sort(function(d,c){return d-c}),B=al(aw,1),A=al(aw,2),z=al(aw,3),C=z-B;if(au.get(\"showOutliers\")){E=y=undefined;for(w=0;w<av;w++){E===undefined&&aw[w]>B-C*au.get(\"outlierIQR\")&&(E=aw[w]),aw[w]<z+C*au.get(\"outlierIQR\")&&(y=aw[w])}D=aw[0],x=aw[av-1]}else{E=aw[0],y=aw[av-1]}}this.quartiles=[B,A,z],this.lwhisker=E,this.rwhisker=y,this.loutlier=D,this.routlier=x,g=at/(G-H+1),au.get(\"showOutliers\")&&(F=Math.ceil(au.get(\"spotRadius\")),at-=2*Math.ceil(au.get(\"spotRadius\")),g=at/(G-H+1),D<E&&ax.drawCircle((D-H)*g+F,I/2,au.get(\"spotRadius\"),au.get(\"outlierLineColor\"),au.get(\"outlierFillColor\")).append(),x>y&&ax.drawCircle((x-H)*g+F,I/2,au.get(\"spotRadius\"),au.get(\"outlierLineColor\"),au.get(\"outlierFillColor\")).append()),ax.drawRect(Math.round((B-H)*g+F),Math.round(I*0.1),Math.round((z-B)*g),Math.round(I*0.8),au.get(\"boxLineColor\"),au.get(\"boxFillColor\")).append(),ax.drawLine(Math.round((E-H)*g+F),Math.round(I/2),Math.round((B-H)*g+F),Math.round(I/2),au.get(\"lineColor\")).append(),ax.drawLine(Math.round((E-H)*g+F),Math.round(I/4),Math.round((E-H)*g+F),Math.round(I-I/4),au.get(\"whiskerColor\")).append(),ax.drawLine(Math.round((y-H)*g+F),Math.round(I/2),Math.round((z-H)*g+F),Math.round(I/2),au.get(\"lineColor\")).append(),ax.drawLine(Math.round((y-H)*g+F),Math.round(I/4),Math.round((y-H)*g+F),Math.round(I-I/4),au.get(\"whiskerColor\")).append(),ax.drawLine(Math.round((A-H)*g+F),Math.round(I*0.1),Math.round((A-H)*g+F),Math.round(I*0.9),au.get(\"medianColor\")).append(),au.get(\"target\")&&(v=Math.ceil(au.get(\"spotRadius\")),ax.drawLine(Math.round((au.get(\"target\")-H)*g+F),Math.round(I/2-v),Math.round((au.get(\"target\")-H)*g+F),Math.round(I/2+v),au.get(\"targetColor\")).append(),ax.drawLine(Math.round((au.get(\"target\")-H)*g+F-v),Math.round(I/2),Math.round((au.get(\"target\")-H)*g+F+v),Math.round(I/2),au.get(\"targetColor\")).append()),ax.render()}}),function(){document.namespaces&&!document.namespaces.v?(ar.fn.sparkline.hasVML=!0,document.namespaces.add(\"v\",\"urn:schemas-microsoft-com:vml\",\"#default#VML\")):ar.fn.sparkline.hasVML=!1;var a=document.createElement(\"canvas\");ar.fn.sparkline.hasCanvas=!!a.getContext&&!!a.getContext(\"2d\")}(),V=ao({init:function(f,e,h,g){this.target=f,this.id=e,this.type=h,this.args=g},append:function(){return this.target.appendShape(this),this}}),T=ao({_pxregex:/(\\d+)(px)?\\s*$/i,init:function(a,f,e){if(!a){return}this.width=a,this.height=f,this.target=e,this.lastShapeId=null,e[0]&&(e=e[0]),ar.data(e,\"_jqs_vcanvas\",this)},drawLine:function(h,g,l,k,j,i){return this.drawShape([[h,g],[l,k]],j,i)},drawShape:function(f,e,h,g){return this._genShape(\"Shape\",[f,e,h,g])},drawCircle:function(h,g,l,k,j,i){return this._genShape(\"Circle\",[h,g,l,k,j,i])},drawPieSlice:function(i,h,n,m,l,k,j){return this._genShape(\"PieSlice\",[i,h,n,m,l,k,j])},drawRect:function(h,g,l,k,j,i){return this._genShape(\"Rect\",[h,g,l,k,j,i])},getElement:function(){return this.canvas},getLastShapeId:function(){return this.lastShapeId},reset:function(){alert(\"reset not implemented\")},_insert:function(a,d){ar(d).html(a)},_calculatePixelDims:function(a,h,g){var f;f=this._pxregex.exec(h),f?this.pixelHeight=f[1]:this.pixelHeight=ar(g).height(),f=this._pxregex.exec(a),f?this.pixelWidth=f[1]:this.pixelWidth=ar(g).width()},_genShape:function(e,d){var f=L++;return d.unshift(f),new V(this,f,e,d)},appendShape:function(b){alert(\"appendShape not implemented\")},replaceWithShape:function(d,c){alert(\"replaceWithShape not implemented\")},insertAfterShape:function(d,c){alert(\"insertAfterShape not implemented\")},removeShapeId:function(b){alert(\"removeShapeId not implemented\")},getShapeAt:function(e,d,f){alert(\"getShapeAt not implemented\")},render:function(){alert(\"render not implemented\")}}),R=ao(T,{init:function(a,h,g,f){R._super.init.call(this,a,h,g),this.canvas=document.createElement(\"canvas\"),g[0]&&(g=g[0]),ar.data(g,\"_jqs_vcanvas\",this),ar(this.canvas).css({display:\"inline-block\",width:a,height:h,verticalAlign:\"top\"}),this._insert(this.canvas,g),this._calculatePixelDims(a,h,this.canvas),this.canvas.width=this.pixelWidth,this.canvas.height=this.pixelHeight,this.interact=f,this.shapes={},this.shapeseq=[],this.currentTargetShapeId=undefined,ar(this.canvas).css({width:this.pixelWidth,height:this.pixelHeight})},_getContext:function(f,e,h){var g=this.canvas.getContext(\"2d\");return f!==undefined&&(g.strokeStyle=f),g.lineWidth=h===undefined?1:h,e!==undefined&&(g.fillStyle=e),g},reset:function(){var b=this._getContext();b.clearRect(0,0,this.pixelWidth,this.pixelHeight),this.shapes={},this.shapeseq=[],this.currentTargetShapeId=undefined},_drawShape:function(j,i,p,o,n){var m=this._getContext(p,o,n),l,k;m.beginPath(),m.moveTo(i[0][0]+0.5,i[0][1]+0.5);for(l=1,k=i.length;l<k;l++){m.lineTo(i[l][0]+0.5,i[l][1]+0.5)}p!==undefined&&m.stroke(),o!==undefined&&m.fill(),this.targetX!==undefined&&this.targetY!==undefined&&m.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=j)},_drawCircle:function(j,i,p,o,n,m,l){var k=this._getContext(n,m,l);k.beginPath(),k.arc(i,p,o,0,2*Math.PI,!1),this.targetX!==undefined&&this.targetY!==undefined&&k.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=j),n!==undefined&&k.stroke(),m!==undefined&&k.fill()},_drawPieSlice:function(r,q,p,o,n,m,l,k){var j=this._getContext(l,k);j.beginPath(),j.moveTo(q,p),j.arc(q,p,o,n,m,!1),j.lineTo(q,p),j.closePath(),l!==undefined&&j.stroke(),k&&j.fill(),this.targetX!==undefined&&this.targetY!==undefined&&j.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=r)},_drawRect:function(i,h,n,m,l,k,j){return this._drawShape(i,[[h,n],[h+m,n],[h+m,n+l],[h,n+l],[h,n]],k,j)},appendShape:function(b){return this.shapes[b.id]=b,this.shapeseq.push(b.id),this.lastShapeId=b.id,b.id},replaceWithShape:function(f,e){var h=this.shapeseq,g;this.shapes[e.id]=e;for(g=h.length;g--;){h[g]==f&&(h[g]=e.id)}delete this.shapes[f]},replaceWithShapes:function(i,h){var n=this.shapeseq,m={},l,k,j;for(k=i.length;k--;){m[i[k]]=!0}for(k=n.length;k--;){l=n[k],m[l]&&(n.splice(k,1),delete this.shapes[l],j=k)}for(k=h.length;k--;){n.splice(j,0,h[k].id),this.shapes[h[k].id]=h[k]}},insertAfterShape:function(f,e){var h=this.shapeseq,g;for(g=h.length;g--;){if(h[g]===f){h.splice(g+1,0,e.id),this.shapes[e.id]=e;return}}},removeShapeId:function(e){var d=this.shapeseq,f;for(f=d.length;f--;){if(d[f]===e){d.splice(f,1);break}}delete this.shapes[e]},getShapeAt:function(e,d,f){return this.targetX=d,this.targetY=f,this.render(),this.currentTargetShapeId},render:function(){var i=this.shapeseq,h=this.shapes,n=i.length,m=this._getContext(),l,k,j;m.clearRect(0,0,this.pixelWidth,this.pixelHeight);for(j=0;j<n;j++){l=i[j],k=h[l],this[\"_draw\"+k.type].apply(this,k.args)}this.interact||(this.shapes={},this.shapeseq=[])}}),P=ao(T,{init:function(a,h,g){var f;P._super.init.call(this,a,h,g),g[0]&&(g=g[0]),ar.data(g,\"_jqs_vcanvas\",this),this.canvas=document.createElement(\"span\"),ar(this.canvas).css({display:\"inline-block\",position:\"relative\",overflow:\"hidden\",width:a,height:h,margin:\"0px\",padding:\"0px\",verticalAlign:\"top\"}),this._insert(this.canvas,g),this._calculatePixelDims(a,h,this.canvas),this.canvas.width=this.pixelWidth,this.canvas.height=this.pixelHeight,f='<v:group coordorigin=\"0 0\" coordsize=\"'+this.pixelWidth+\" \"+this.pixelHeight+'\" style=\"position:absolute;top:0;left:0;width:'+this.pixelWidth+\"px;height=\"+this.pixelHeight+'px;\"></v:group>',this.canvas.insertAdjacentHTML(\"beforeEnd\",f),this.group=ar(this.canvas).children()[0],this.rendered=!1,this.prerender=\"\"},_drawShape:function(z,y,x,w,v){var u=[],t,s,r,q,p,o,n;for(n=0,o=y.length;n<o;n++){u[n]=\"\"+y[n][0]+\",\"+y[n][1]}return t=u.splice(0,1),v=v===undefined?1:v,s=x===undefined?' stroked=\"false\" ':' strokeWeight=\"'+v+'px\" strokeColor=\"'+x+'\" ',r=w===undefined?' filled=\"false\"':' fillColor=\"'+w+'\" filled=\"true\" ',q=u[0]===u[u.length-1]?\"x \":\"\",p='<v:shape coordorigin=\"0 0\" coordsize=\"'+this.pixelWidth+\" \"+this.pixelHeight+'\"  id=\"jqsshape'+z+'\" '+s+r+' style=\"position:absolute;left:0px;top:0px;height:'+this.pixelHeight+\"px;width:\"+this.pixelWidth+'px;padding:0px;margin:0px;\"  path=\"m '+t+\" l \"+u.join(\", \")+\" \"+q+'e\"> </v:shape>',p},_drawCircle:function(t,s,r,q,p,o,n){var m,l,k;return s-=q,r-=q,m=p===undefined?' stroked=\"false\" ':' strokeWeight=\"'+n+'px\" strokeColor=\"'+p+'\" ',l=o===undefined?' filled=\"false\"':' fillColor=\"'+o+'\" filled=\"true\" ',k='<v:oval  id=\"jqsshape'+t+'\" '+m+l+' style=\"position:absolute;top:'+r+\"px; left:\"+s+\"px; width:\"+q*2+\"px; height:\"+q*2+'px\"></v:oval>',k},_drawPieSlice:function(F,E,D,C,B,A,z,y){var x,w,v,u,t,s,r,q;if(B===A){return\"\"}A-B===2*Math.PI&&(B=0,A=2*Math.PI),w=E+Math.round(Math.cos(B)*C),v=D+Math.round(Math.sin(B)*C),u=E+Math.round(Math.cos(A)*C),t=D+Math.round(Math.sin(A)*C);if(w===u&&v===t){if(A-B<Math.PI){return\"\"}w=u=E+C,v=t=D}return w===u&&v===t&&A-B<Math.PI?\"\":(x=[E-C,D-C,E+C,D+C,w,v,u,t],s=z===undefined?' stroked=\"false\" ':' strokeWeight=\"1px\" strokeColor=\"'+z+'\" ',r=y===undefined?' filled=\"false\"':' fillColor=\"'+y+'\" filled=\"true\" ',q='<v:shape coordorigin=\"0 0\" coordsize=\"'+this.pixelWidth+\" \"+this.pixelHeight+'\"  id=\"jqsshape'+F+'\" '+s+r+' style=\"position:absolute;left:0px;top:0px;height:'+this.pixelHeight+\"px;width:\"+this.pixelWidth+'px;padding:0px;margin:0px;\"  path=\"m '+E+\",\"+D+\" wa \"+x.join(\", \")+' x e\"> </v:shape>',q)},_drawRect:function(i,h,n,m,l,k,j){return this._drawShape(i,[[h,n],[h,n+l],[h+m,n+l],[h+m,n],[h,n]],k,j)},reset:function(){this.group.innerHTML=\"\"},appendShape:function(d){var c=this[\"_draw\"+d.type].apply(this,d.args);return this.rendered?this.group.insertAdjacentHTML(\"beforeEnd\",c):this.prerender+=c,this.lastShapeId=d.id,d.id},replaceWithShape:function(a,h){var g=ar(\"#jqsshape\"+a),f=this[\"_draw\"+h.type].apply(this,h.args);g[0].outerHTML=f},replaceWithShapes:function(a,l){var k=ar(\"#jqsshape\"+a[0]),j=\"\",i=l.length,h;for(h=0;h<i;h++){j+=this[\"_draw\"+l[h].type].apply(this,l[h].args)}k[0].outerHTML=j;for(h=1;h<a.length;h++){ar(\"#jqsshape\"+a[h]).remove()}},insertAfterShape:function(a,h){var g=ar(\"#jqsshape\"+a),f=this[\"_draw\"+h.type].apply(this,h.args);g[0].insertAdjacentHTML(\"afterEnd\",f)},removeShapeId:function(a){var d=ar(\"#jqsshape\"+a);this.group.removeChild(d[0])},getShapeAt:function(f,e,h){var g=f.id.substr(8);return g},render:function(){this.rendered||(this.group.innerHTML=this.prerender,this.rendered=!0)}})});"}
],
[
{"endColumn":232483,"endLine":1,"scriptId":"128","startColumn":0,"startLine":0,"url":"http://assets.tumblr.com/assets/scripts/vendor/tiny_mce_3_5_10/tiny_mce.js?_v=3a169f79ce47732e81e06e1cc7f78db8"},{"scriptSource":"(function() { var version = '3_5_10' + '_4'; })();\n(function(e){var a=/^\\s*|\\s*$/g,b,d=\"B\".replace(/A(.)|B/,\"$1\")===\"$1\";var c={majorVersion:\"3\",minorVersion:\"5.10\",releaseDate:\"2013-10-24\",_init:function(){var s=this,q=document,o=navigator,g=o.userAgent,m,f,l,k,j,r;s.isIE11=g.indexOf(\"Trident/\")!=-1&&(g.indexOf(\"rv:\")!=-1||o.appName.indexOf(\"Netscape\")!=-1);s.isOpera=e.opera&&opera.buildNumber;s.isWebKit=/WebKit/.test(g);s.isIE=!s.isWebKit&&!s.isOpera&&(/MSIE/gi).test(g)&&(/Explorer/gi).test(o.appName)||s.isIE11;s.isIE6=s.isIE&&/MSIE [56]/.test(g);s.isIE7=s.isIE&&/MSIE [7]/.test(g);s.isIE8=s.isIE&&/MSIE [8]/.test(g);s.isIE9=s.isIE&&/MSIE [9]/.test(g);s.isGecko=!s.isWebKit&&!s.isIE11&&/Gecko/.test(g);s.isMac=g.indexOf(\"Mac\")!=-1;s.isAir=/adobeair/i.test(g);s.isIDevice=/(iPad|iPhone)/.test(g);s.isIOS5=s.isIDevice&&g.match(/AppleWebKit\\/(\\d*)/)[1]>=534;if(e.tinyMCEPreInit){s.suffix=tinyMCEPreInit.suffix;s.baseURL=tinyMCEPreInit.base;s.query=tinyMCEPreInit.query;return}s.suffix=\"\";f=q.getElementsByTagName(\"base\");for(m=0;m<f.length;m++){r=f[m].href;if(r){if(/^https?:\\/\\/[^\\/]+$/.test(r)){r+=\"/\"}k=r?r.match(/.*\\//)[0]:\"\"}}function h(i){if(i.src&&/tiny_mce(|_gzip|_jquery|_prototype|_full)(_dev|_src)?.js/.test(i.src)){if(/_(src|dev)\\.js/g.test(i.src)){s.suffix=\"_src\"}if((j=i.src.indexOf(\"?\"))!=-1){s.query=i.src.substring(j+1)}s.baseURL=i.src.substring(0,i.src.lastIndexOf(\"/\"));if(k&&s.baseURL.indexOf(\"://\")==-1&&s.baseURL.indexOf(\"/\")!==0){s.baseURL=k+s.baseURL}return s.baseURL}return null}f=q.getElementsByTagName(\"script\");for(m=0;m<f.length;m++){if(h(f[m])){return}}l=q.getElementsByTagName(\"head\")[0];if(l){f=l.getElementsByTagName(\"script\");for(m=0;m<f.length;m++){if(h(f[m])){return}}}return},is:function(g,f){if(!f){return g!==b}if(f==\"array\"&&c.isArray(g)){return true}return typeof(g)==f},isArray:Array.isArray||function(f){return Object.prototype.toString.call(f)===\"[object Array]\"},makeMap:function(f,j,h){var g;f=f||[];j=j||\",\";if(typeof(f)==\"string\"){f=f.split(j)}h=h||{};g=f.length;while(g--){h[f[g]]={}}return h},each:function(i,f,h){var j,g;if(!i){return 0}h=h||i;if(i.length!==b){for(j=0,g=i.length;j<g;j++){if(f.call(h,i[j],j,i)===false){return 0}}}else{for(j in i){if(i.hasOwnProperty(j)){if(f.call(h,i[j],j,i)===false){return 0}}}}return 1},map:function(g,h){var i=[];c.each(g,function(f){i.push(h(f))});return i},grep:function(g,h){var i=[];c.each(g,function(f){if(!h||h(f)){i.push(f)}});return i},inArray:function(g,h){var j,f;if(g){for(j=0,f=g.length;j<f;j++){if(g[j]===h){return j}}}return -1},extend:function(n,k){var j,f,h,g=arguments,m;for(j=1,f=g.length;j<f;j++){k=g[j];for(h in k){if(k.hasOwnProperty(h)){m=k[h];if(m!==b){n[h]=m}}}}return n},trim:function(f){return(f?\"\"+f:\"\").replace(a,\"\")},create:function(o,f,j){var n=this,g,i,k,l,h,m=0;o=/^((static) )?([\\w.]+)(:([\\w.]+))?/.exec(o);k=o[3].match(/(^|\\.)(\\w+)$/i)[2];i=n.createNS(o[3].replace(/\\.\\w+$/,\"\"),j);if(i[k]){return}if(o[2]==\"static\"){i[k]=f;if(this.onCreate){this.onCreate(o[2],o[3],i[k])}return}if(!f[k]){f[k]=function(){};m=1}i[k]=f[k];n.extend(i[k].prototype,f);if(o[5]){g=n.resolve(o[5]).prototype;l=o[5].match(/\\.(\\w+)$/i)[1];h=i[k];if(m){i[k]=function(){return g[l].apply(this,arguments)}}else{i[k]=function(){this.parent=g[l];return h.apply(this,arguments)}}i[k].prototype[k]=i[k];n.each(g,function(p,q){i[k].prototype[q]=g[q]});n.each(f,function(p,q){if(g[q]){i[k].prototype[q]=function(){this.parent=g[q];return p.apply(this,arguments)}}else{if(q!=k){i[k].prototype[q]=p}}})}n.each(f[\"static\"],function(p,q){i[k][q]=p});if(this.onCreate){this.onCreate(o[2],o[3],i[k].prototype)}},walk:function(i,h,j,g){g=g||this;if(i){if(j){i=i[j]}c.each(i,function(k,f){if(h.call(g,k,f,j)===false){return false}c.walk(k,h,j,g)})}},createNS:function(j,h){var g,f;h=h||e;j=j.split(\".\");for(g=0;g<j.length;g++){f=j[g];if(!h[f]){h[f]={}}h=h[f]}return h},resolve:function(j,h){var g,f;h=h||e;j=j.split(\".\");for(g=0,f=j.length;g<f;g++){h=h[j[g]];if(!h){break}}return h},addUnload:function(j,i){var h=this,g;g=function(){var f=h.unloads,l,m;if(f){for(m in f){l=f[m];if(l&&l.func){l.func.call(l.scope,1)}}if(e.detachEvent){e.detachEvent(\"onbeforeunload\",k);e.detachEvent(\"onunload\",g)}else{if(e.removeEventListener){e.removeEventListener(\"unload\",g,false)}}h.unloads=l=f=w=g=0;if(e.CollectGarbage){CollectGarbage()}}};function k(){var l=document;function f(){l.detachEvent(\"onstop\",f);if(g){g()}l=0}if(l.readyState==\"interactive\"){if(l){l.attachEvent(\"onstop\",f)}e.setTimeout(function(){if(l){l.detachEvent(\"onstop\",f)}},0)}}j={func:j,scope:i||this};if(!h.unloads){if(e.attachEvent){e.attachEvent(\"onunload\",g);e.attachEvent(\"onbeforeunload\",k)}else{if(e.addEventListener){e.addEventListener(\"unload\",g,false)}}h.unloads=[j]}else{h.unloads.push(j)}return j},removeUnload:function(i){var g=this.unloads,h=null;c.each(g,function(j,f){if(j&&j.func==i){g.splice(f,1);h=i;return false}});return h},explode:function(f,g){if(!f||c.is(f,\"array\")){return f}return c.map(f.split(g||\",\"),c.trim)},_addVer:function(g){var f;if(!this.query){return g}f=(g.indexOf(\"?\")==-1?\"?\":\"&\")+this.query;if(g.indexOf(\"#\")==-1){return g+f}return g.replace(\"#\",f+\"#\")},_replace:function(h,f,g){if(d){return g.replace(h,function(){var l=f,j=arguments,k;for(k=0;k<j.length-2;k++){if(j[k]===b){l=l.replace(new RegExp(\"\\\\$\"+k,\"g\"),\"\")}else{l=l.replace(new RegExp(\"\\\\$\"+k,\"g\"),j[k])}}return l})}return g.replace(h,f)}};c._init();e.tinymce=e.tinyMCE=c})(window);tinymce.create(\"tinymce.util.Dispatcher\",{scope:null,listeners:null,inDispatch:false,Dispatcher:function(a){this.scope=a||this;this.listeners=[]},add:function(b,a){this.listeners.push({cb:b,scope:a||this.scope});return b},addToTop:function(d,b){var a=this,c={cb:d,scope:b||a.scope};if(a.inDispatch){a.listeners=[c].concat(a.listeners)}else{a.listeners.unshift(c)}return d},remove:function(c){var b=this.listeners,a=null;tinymce.each(b,function(e,d){if(c==e.cb){a=e;b.splice(d,1);return false}});return a},dispatch:function(){var a=this,e,b=arguments,c,d=a.listeners,f;a.inDispatch=true;for(c=0;c<d.length;c++){f=d[c];e=f.cb.apply(f.scope,b.length>0?b:[f.scope]);if(e===false){break}}a.inDispatch=false;return e}});(function(){var a=tinymce.each;tinymce.create(\"tinymce.util.URI\",{URI:function(e,g){var f=this,i,d,c,h;e=tinymce.trim(e);g=f.settings=g||{};if(/^([\\w\\-]+):([^\\/]{2})/i.test(e)||/^\\s*#/.test(e)){f.source=e;return}if(e.indexOf(\"/\")===0&&e.indexOf(\"//\")!==0){e=(g.base_uri?g.base_uri.protocol||\"http\":\"http\")+\"://mce_host\"+e}if(!/^[\\w\\-]*:?\\/\\//.test(e)){h=g.base_uri?g.base_uri.path:new tinymce.util.URI(location.href).directory;e=((g.base_uri&&g.base_uri.protocol)||\"http\")+\"://mce_host\"+f.toAbsPath(h,e)}e=e.replace(/@@/g,\"(mce_at)\");e=/^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@\\/]*):?([^:@\\/]*))?@)?([^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/.exec(e);a([\"source\",\"protocol\",\"authority\",\"userInfo\",\"user\",\"password\",\"host\",\"port\",\"relative\",\"path\",\"directory\",\"file\",\"query\",\"anchor\"],function(b,j){var k=e[j];if(k){k=k.replace(/\\(mce_at\\)/g,\"@@\")}f[b]=k});c=g.base_uri;if(c){if(!f.protocol){f.protocol=c.protocol}if(!f.userInfo){f.userInfo=c.userInfo}if(!f.port&&f.host===\"mce_host\"){f.port=c.port}if(!f.host||f.host===\"mce_host\"){f.host=c.host}f.source=\"\"}},setPath:function(c){var b=this;c=/^(.*?)\\/?(\\w+)?$/.exec(c);b.path=c[0];b.directory=c[1];b.file=c[2];b.source=\"\";b.getURI()},toRelative:function(b){var d=this,f;if(b===\"./\"){return b}b=new tinymce.util.URI(b,{base_uri:d});if((b.host!=\"mce_host\"&&d.host!=b.host&&b.host)||d.port!=b.port||d.protocol!=b.protocol){return b.getURI()}var c=d.getURI(),e=b.getURI();if(c==e||(c.charAt(c.length-1)==\"/\"&&c.substr(0,c.length-1)==e)){return c}f=d.toRelPath(d.path,b.path);if(b.query){f+=\"?\"+b.query}if(b.anchor){f+=\"#\"+b.anchor}return f},toAbsolute:function(b,c){b=new tinymce.util.URI(b,{base_uri:this});return b.getURI(this.host==b.host&&this.protocol==b.protocol?c:0)},toRelPath:function(g,h){var c,f=0,d=\"\",e,b;g=g.substring(0,g.lastIndexOf(\"/\"));g=g.split(\"/\");c=h.split(\"/\");if(g.length>=c.length){for(e=0,b=g.length;e<b;e++){if(e>=c.length||g[e]!=c[e]){f=e+1;break}}}if(g.length<c.length){for(e=0,b=c.length;e<b;e++){if(e>=g.length||g[e]!=c[e]){f=e+1;break}}}if(f===1){return h}for(e=0,b=g.length-(f-1);e<b;e++){d+=\"../\"}for(e=f-1,b=c.length;e<b;e++){if(e!=f-1){d+=\"/\"+c[e]}else{d+=c[e]}}return d},toAbsPath:function(e,f){var c,b=0,h=[],d,g;d=/\\/$/.test(f)?\"/\":\"\";e=e.split(\"/\");f=f.split(\"/\");a(e,function(i){if(i){h.push(i)}});e=h;for(c=f.length-1,h=[];c>=0;c--){if(f[c].length===0||f[c]===\".\"){continue}if(f[c]===\"..\"){b++;continue}if(b>0){b--;continue}h.push(f[c])}c=e.length-b;if(c<=0){g=h.reverse().join(\"/\")}else{g=e.slice(0,c).join(\"/\")+\"/\"+h.reverse().join(\"/\")}if(g.indexOf(\"/\")!==0){g=\"/\"+g}if(d&&g.lastIndexOf(\"/\")!==g.length-1){g+=d}return g},getURI:function(d){var c,b=this;if(!b.source||d){c=\"\";if(!d){if(b.protocol){c+=b.protocol+\"://\"}if(b.userInfo){c+=b.userInfo+\"@\"}if(b.host){c+=b.host}if(b.port){c+=\":\"+b.port}}if(b.path){c+=b.path}if(b.query){c+=\"?\"+b.query}if(b.anchor){c+=\"#\"+b.anchor}b.source=c}return b.source}})})();(function(){var a=tinymce.each;tinymce.create(\"static tinymce.util.Cookie\",{getHash:function(d){var b=this.get(d),c;if(b){a(b.split(\"&\"),function(e){e=e.split(\"=\");c=c||{};c[unescape(e[0])]=unescape(e[1])})}return c},setHash:function(j,b,g,f,i,c){var h=\"\";a(b,function(e,d){h+=(!h?\"\":\"&\")+escape(d)+\"=\"+escape(e)});this.set(j,h,g,f,i,c)},get:function(i){var h=document.cookie,g,f=i+\"=\",d;if(!h){return}d=h.indexOf(\"; \"+f);if(d==-1){d=h.indexOf(f);if(d!==0){return null}}else{d+=2}g=h.indexOf(\";\",d);if(g==-1){g=h.length}return unescape(h.substring(d+f.length,g))},set:function(i,b,g,f,h,c){document.cookie=i+\"=\"+escape(b)+((g)?\"; expires=\"+g.toGMTString():\"\")+((f)?\"; path=\"+escape(f):\"\")+((h)?\"; domain=\"+h:\"\")+((c)?\"; secure\":\"\")},remove:function(c,e,d){var b=new Date();b.setTime(b.getTime()-1000);this.set(c,\"\",b,e,d)}})})();(function(){function serialize(o,quote){var i,v,t,name;quote=quote||'\"';if(o==null){return\"null\"}t=typeof o;if(t==\"string\"){v=\"\\bb\\tt\\nn\\ff\\rr\\\"\\\"''\\\\\\\\\";return quote+o.replace(/([\\u0080-\\uFFFF\\x00-\\x1f\\\"\\'\\\\])/g,function(a,b){if(quote==='\"'&&a===\"'\"){return a}i=v.indexOf(b);if(i+1){return\"\\\\\"+v.charAt(i+1)}a=b.charCodeAt().toString(16);return\"\\\\u\"+\"0000\".substring(a.length)+a})+quote}if(t==\"object\"){if(o.hasOwnProperty&&Object.prototype.toString.call(o)===\"[object Array]\"){for(i=0,v=\"[\";i<o.length;i++){v+=(i>0?\",\":\"\")+serialize(o[i],quote)}return v+\"]\"}v=\"{\";for(name in o){if(o.hasOwnProperty(name)){v+=typeof o[name]!=\"function\"?(v.length>1?\",\"+quote:quote)+name+quote+\":\"+serialize(o[name],quote):\"\"}}return v+\"}\"}return\"\"+o}tinymce.util.JSON={serialize:serialize,parse:function(s){try{return eval(\"(\"+s+\")\")}catch(ex){}}}})();tinymce.create(\"static tinymce.util.XHR\",{send:function(g){var a,e,b=window,h=0;function f(){if(!g.async||a.readyState==4||h++>10000){if(g.success&&h<10000&&a.status==200){g.success.call(g.success_scope,\"\"+a.responseText,a,g)}else{if(g.error){g.error.call(g.error_scope,h>10000?\"TIMED_OUT\":\"GENERAL\",a,g)}}a=null}else{b.setTimeout(f,10)}}g.scope=g.scope||this;g.success_scope=g.success_scope||g.scope;g.error_scope=g.error_scope||g.scope;g.async=g.async===false?false:true;g.data=g.data||\"\";function d(i){a=0;try{a=new ActiveXObject(i)}catch(c){}return a}a=b.XMLHttpRequest?new XMLHttpRequest():d(\"Microsoft.XMLHTTP\")||d(\"Msxml2.XMLHTTP\");if(a){if(a.overrideMimeType){a.overrideMimeType(g.content_type)}a.open(g.type||(g.data?\"POST\":\"GET\"),g.url,g.async);if(g.content_type){a.setRequestHeader(\"Content-Type\",g.content_type)}a.setRequestHeader(\"X-Requested-With\",\"XMLHttpRequest\");a.send(g.data);if(!g.async){return f()}e=b.setTimeout(f,10)}}});(function(){var c=tinymce.extend,b=tinymce.util.JSON,a=tinymce.util.XHR;tinymce.create(\"tinymce.util.JSONRequest\",{JSONRequest:function(d){this.settings=c({},d);this.count=0},send:function(f){var e=f.error,d=f.success;f=c(this.settings,f);f.success=function(h,g){h=b.parse(h);if(typeof(h)==\"undefined\"){h={error:\"JSON Parse error.\"}}if(h.error){e.call(f.error_scope||f.scope,h.error,g)}else{d.call(f.success_scope||f.scope,h.result)}};f.error=function(h,g){if(e){e.call(f.error_scope||f.scope,h,g)}};f.data=b.serialize({id:f.id||\"c\"+(this.count++),method:f.method,params:f.params});f.content_type=\"application/json\";a.send(f)},\"static\":{sendRPC:function(d){return new tinymce.util.JSONRequest().send(d)}}})}());(function(a){a.VK={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(b){return b.shiftKey||b.ctrlKey||b.altKey},metaKeyPressed:function(b){return a.isMac?b.metaKey:b.ctrlKey&&!b.altKey}}})(tinymce);tinymce.util.Quirks=function(a){var j=tinymce.VK,f=j.BACKSPACE,k=j.DELETE,e=a.dom,m=a.selection,I=a.settings,x=a.parser,p=a.serializer,F=tinymce.each;function B(O,N){try{a.getDoc().execCommand(O,false,N)}catch(M){}}function o(){var M=a.getDoc().documentMode;return M?M:6}function A(M){return M.isDefaultPrevented()}function K(){function M(S){var O,Q,N,T,P,R,U;function V(){if(P.nodeType==3){if(S&&R==P.length){return true}if(!S&&R===0){return true}}}O=m.getRng();var W=[O.startContainer,O.startOffset,O.endContainer,O.endOffset];if(!O.collapsed){S=true}P=O[(S?\"start\":\"end\")+\"Container\"];R=O[(S?\"start\":\"end\")+\"Offset\"];if(P.nodeType==3){Q=e.getParent(O.startContainer,e.isBlock);if(S){Q=e.getNext(Q,e.isBlock)}if(Q&&(V()||!O.collapsed)){N=e.create(\"em\",{id:\"__mceDel\"});F(tinymce.grep(Q.childNodes),function(X){N.appendChild(X)});Q.appendChild(N)}}O=e.createRng();O.setStart(W[0],W[1]);O.setEnd(W[2],W[3]);m.setRng(O);a.getDoc().execCommand(S?\"ForwardDelete\":\"Delete\",false,null);if(N){T=m.getBookmark();while(U=e.get(\"__mceDel\")){e.remove(U,true)}m.moveToBookmark(T)}}a.onKeyDown.add(function(N,P){var O;O=P.keyCode==k;if(!A(P)&&(O||P.keyCode==f)&&!j.modifierPressed(P)){P.preventDefault();M(O)}});a.addCommand(\"Delete\",function(){M()})}function r(){function M(P){var O=e.create(\"body\");var Q=P.cloneContents();O.appendChild(Q);return m.serializer.serialize(O,{format:\"html\"})}function N(O){var Q=M(O);var R=e.createRng();R.selectNode(a.getBody());var P=M(R);return Q===P}a.onKeyDown.add(function(P,R){var Q=R.keyCode,O;if(!A(R)&&(Q==k||Q==f)){O=P.selection.isCollapsed();if(O&&!e.isEmpty(P.getBody())){return}if(tinymce.isIE&&!O){return}if(!O&&!N(P.selection.getRng())){return}P.setContent(\"\");P.selection.setCursorLocation(P.getBody(),0);P.nodeChanged()}})}function J(){a.onKeyDown.add(function(M,N){if(!A(N)&&N.keyCode==65&&j.metaKeyPressed(N)){N.preventDefault();M.execCommand(\"SelectAll\")}})}function L(){if(!a.settings.content_editable){e.bind(a.getDoc(),\"focusin\",function(M){m.setRng(m.getRng())});e.bind(a.getDoc(),\"mousedown\",function(M){if(M.target==a.getDoc().documentElement){a.getWin().focus();m.setRng(m.getRng())}})}}function C(){a.onKeyDown.add(function(M,P){if(!A(P)&&P.keyCode===f){if(m.isCollapsed()&&m.getRng(true).startOffset===0){var O=m.getNode();var N=O.previousSibling;if(N&&N.nodeName&&N.nodeName.toLowerCase()===\"hr\"){e.remove(N);tinymce.dom.Event.cancel(P)}}}})}function z(){if(!Range.prototype.getClientRects){a.onMouseDown.add(function(N,O){if(!A(O)&&O.target.nodeName===\"HTML\"){var M=N.getBody();M.blur();setTimeout(function(){M.focus()},0)}})}}function h(){a.onClick.add(function(M,N){N=N.target;if(/^(IMG|HR)$/.test(N.nodeName)){m.getSel().setBaseAndExtent(N,0,N,1)}if(N.nodeName==\"A\"&&e.hasClass(N,\"mceItemAnchor\")){m.select(N)}M.nodeChanged()})}function c(){function N(){var P=e.getAttribs(m.getStart().cloneNode(false));return function(){var Q=m.getStart();if(Q!==a.getBody()){e.setAttrib(Q,\"style\",null);F(P,function(R){Q.setAttributeNode(R.cloneNode(true))})}}}function M(){return !m.isCollapsed()&&e.getParent(m.getStart(),e.isBlock)!=e.getParent(m.getEnd(),e.isBlock)}function O(P,Q){Q.preventDefault();return false}a.onKeyPress.add(function(P,R){var Q;if(!A(R)&&(R.keyCode==8||R.keyCode==46)&&M()){Q=N();P.getDoc().execCommand(\"delete\",false,null);Q();R.preventDefault();return false}});e.bind(a.getDoc(),\"cut\",function(Q){var P;if(!A(Q)&&M()){P=N();a.onKeyUp.addToTop(O);setTimeout(function(){P();a.onKeyUp.remove(O)},0)}})}function b(){var N,M;e.bind(a.getDoc(),\"selectionchange\",function(){if(M){clearTimeout(M);M=0}M=window.setTimeout(function(){var O=m.getRng();if(!N||!tinymce.dom.RangeUtils.compareRanges(O,N)){a.nodeChanged();N=O}},50)})}function y(){document.body.setAttribute(\"role\",\"application\")}function u(){a.onKeyDown.add(function(M,O){if(!A(O)&&O.keyCode===f){if(m.isCollapsed()&&m.getRng(true).startOffset===0){var N=m.getNode().previousSibling;if(N&&N.nodeName&&N.nodeName.toLowerCase()===\"table\"){return tinymce.dom.Event.cancel(O)}}}})}function D(){if(o()>7){return}B(\"RespectVisibilityInDesign\",true);a.contentStyles.push(\".mceHideBrInPre pre br {display: none}\");e.addClass(a.getBody(),\"mceHideBrInPre\");x.addNodeFilter(\"pre\",function(M,O){var P=M.length,R,N,S,Q;while(P--){R=M[P].getAll(\"br\");N=R.length;while(N--){S=R[N];Q=S.prev;if(Q&&Q.type===3&&Q.value.charAt(Q.value-1)!=\"\\n\"){Q.value+=\"\\n\"}else{S.parent.insert(new tinymce.html.Node(\"#text\",3),S,true).value=\"\\n\"}}}});p.addNodeFilter(\"pre\",function(M,O){var P=M.length,R,N,S,Q;while(P--){R=M[P].getAll(\"br\");N=R.length;while(N--){S=R[N];Q=S.prev;if(Q&&Q.type==3){Q.value=Q.value.replace(/\\r?\\n$/,\"\")}}}})}function g(){e.bind(a.getBody(),\"mouseup\",function(O){var N,M=m.getNode();if(M.nodeName==\"IMG\"){if(N=e.getStyle(M,\"width\")){e.setAttrib(M,\"width\",N.replace(/[^0-9%]+/g,\"\"));e.setStyle(M,\"width\",\"\")}if(N=e.getStyle(M,\"height\")){e.setAttrib(M,\"height\",N.replace(/[^0-9%]+/g,\"\"));e.setStyle(M,\"height\",\"\")}}})}function d(){a.onKeyDown.add(function(S,T){var R,M,N,P,Q,U,O;R=T.keyCode==k;if(!A(T)&&(R||T.keyCode==f)&&!j.modifierPressed(T)){M=m.getRng();N=M.startContainer;P=M.startOffset;O=M.collapsed;if(N.nodeType==3&&N.nodeValue.length>0&&((P===0&&!O)||(O&&P===(R?0:1)))){U=N.previousSibling;if(U&&U.nodeName==\"IMG\"){return}nonEmptyElements=S.schema.getNonEmptyElements();T.preventDefault();Q=e.create(\"br\",{id:\"__tmp\"});N.parentNode.insertBefore(Q,N);S.getDoc().execCommand(R?\"ForwardDelete\":\"Delete\",false,null);N=m.getRng().startContainer;U=N.previousSibling;if(U&&U.nodeType==1&&!e.isBlock(U)&&e.isEmpty(U)&&!nonEmptyElements[U.nodeName.toLowerCase()]){e.remove(U)}e.remove(\"__tmp\")}}})}function H(){a.onKeyDown.add(function(Q,R){var O,N,S,M,P;if(A(R)||R.keyCode!=j.BACKSPACE){return}O=m.getRng();N=O.startContainer;S=O.startOffset;M=e.getRoot();P=N;if(!O.collapsed||S!==0){return}while(P&&P.parentNode&&P.parentNode.firstChild==P&&P.parentNode!=M){P=P.parentNode}if(P.tagName===\"BLOCKQUOTE\"){Q.formatter.toggle(\"blockquote\",null,P);O=e.createRng();O.setStart(N,0);O.setEnd(N,0);m.setRng(O)}})}function G(){function M(){a._refreshContentEditable();B(\"StyleWithCSS\",false);B(\"enableInlineTableEditing\",false);if(!I.object_resizing){B(\"enableObjectResizing\",false)}}if(!I.readonly){a.onBeforeExecCommand.add(M);a.onMouseDown.add(M)}}function t(){function M(N,O){F(e.select(\"a\"),function(R){var P=R.parentNode,Q=e.getRoot();if(P.lastChild===R){while(P&&!e.isBlock(P)){if(P.parentNode.lastChild!==P||P===Q){return}P=P.parentNode}e.add(P,\"br\",{\"data-mce-bogus\":1})}})}a.onExecCommand.add(function(N,O){if(O===\"CreateLink\"){M(N)}});a.onSetContent.add(m.onSetContent.add(M))}function n(){if(I.forced_root_block){a.onInit.add(function(){B(\"DefaultParagraphSeparator\",I.forced_root_block)})}}function q(){function M(O,N){if(!O||!N.initial){a.execCommand(\"mceRepaint\")}}a.onUndo.add(M);a.onRedo.add(M);a.onSetContent.add(M)}function i(){a.onKeyDown.add(function(N,O){var M;if(!A(O)&&O.keyCode==f){M=N.getDoc().selection.createRange();if(M&&M.item){O.preventDefault();N.undoManager.beforeChange();e.remove(M.item(0));N.undoManager.add()}}})}function s(){var M;if(o()>=10){M=\"\";F(\"p div h1 h2 h3 h4 h5 h6\".split(\" \"),function(N,O){M+=(O>0?\",\":\"\")+N+\":empty\"});a.contentStyles.push(M+\"{padding-right: 1px !important}\")}}function v(){var O,N,ae,M,Z,ac,aa,ad,P,Q,ab,X,W,Y=document,U=a.getDoc();if(!I.object_resizing||I.webkit_fake_resize===false){return}B(\"enableObjectResizing\",false);ab={n:[0.5,0,0,-1],e:[1,0.5,1,0],s:[0.5,1,0,1],w:[0,0.5,-1,0],nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};function S(ai){var ah,ag;ah=ai.screenX-ac;ag=ai.screenY-aa;X=ah*Z[2]+ad;W=ag*Z[3]+P;X=X<5?5:X;W=W<5?5:W;if(j.modifierPressed(ai)||(ae.nodeName==\"IMG\"&&Z[2]*Z[3]!==0)){X=Math.round(W/Q);W=Math.round(X*Q)}e.setStyles(M,{width:X,height:W});if(Z[2]<0&&M.clientWidth<=X){e.setStyle(M,\"left\",O+(ad-X))}if(Z[3]<0&&M.clientHeight<=W){e.setStyle(M,\"top\",N+(P-W))}}function af(){function ag(ah,ai){if(ai){if(ae.style[ah]||!a.schema.isValid(ae.nodeName.toLowerCase(),ah)){e.setStyle(ae,ah,ai)}else{e.setAttrib(ae,ah,ai)}}}ag(\"width\",X);ag(\"height\",W);e.unbind(U,\"mousemove\",S);e.unbind(U,\"mouseup\",af);if(Y!=U){e.unbind(Y,\"mousemove\",S);e.unbind(Y,\"mouseup\",af)}e.remove(M);R(ae)}function R(aj){var ah,ai,ag;T();ah=e.getPos(aj);O=ah.x;N=ah.y;ai=aj.offsetWidth;ag=aj.offsetHeight;if(ae!=aj){ae=aj;X=W=0}F(ab,function(am,ak){var al;al=e.get(\"mceResizeHandle\"+ak);if(!al){al=e.add(U.documentElement,\"div\",{id:\"mceResizeHandle\"+ak,\"class\":\"mceResizeHandle\",style:\"cursor:\"+ak+\"-resize; margin:0; padding:0\"});e.bind(al,\"mousedown\",function(an){an.preventDefault();af();ac=an.screenX;aa=an.screenY;ad=ae.clientWidth;P=ae.clientHeight;Q=P/ad;Z=am;M=ae.cloneNode(true);e.addClass(M,\"mceClonedResizable\");e.setStyles(M,{left:O,top:N,margin:0});U.documentElement.appendChild(M);e.bind(U,\"mousemove\",S);e.bind(U,\"mouseup\",af);if(Y!=U){e.bind(Y,\"mousemove\",S);e.bind(Y,\"mouseup\",af)}})}else{e.show(al)}e.setStyles(al,{left:(ai*am[0]+O)-(al.offsetWidth/2),top:(ag*am[1]+N)-(al.offsetHeight/2)})});if(!tinymce.isOpera&&ae.nodeName==\"IMG\"){ae.setAttribute(\"data-mce-selected\",\"1\")}}function T(){if(ae){ae.removeAttribute(\"data-mce-selected\")}for(var ag in ab){e.hide(\"mceResizeHandle\"+ag)}}a.contentStyles.push(\".mceResizeHandle {position: absolute;border: 1px solid black;background: #FFF;width: 5px;height: 5px;z-index: 10000}.mceResizeHandle:hover {background: #000}img[data-mce-selected] {outline: 1px solid black}img.mceClonedResizable, table.mceClonedResizable {position: absolute;outline: 1px dashed black;opacity: .5;z-index: 10000}\");function V(){var ag=e.getParent(m.getNode(),\"table,img\");F(e.select(\"img[data-mce-selected]\"),function(ah){ah.removeAttribute(\"data-mce-selected\")});if(ag){R(ag)}else{T()}}a.onNodeChange.add(V);e.bind(U,\"selectionchange\",V);a.serializer.addAttributeFilter(\"data-mce-selected\",function(ag,ah){var ai=ag.length;while(ai--){ag[ai].attr(ah,null)}})}function E(){if(o()<9){x.addNodeFilter(\"noscript\",function(M){var N=M.length,O,P;while(N--){O=M[N];P=O.firstChild;if(P){O.attr(\"data-mce-innertext\",P.value)}}});p.addNodeFilter(\"noscript\",function(M){var N=M.length,O,Q,P;while(N--){O=M[N];Q=M[N].firstChild;if(Q){Q.value=tinymce.html.Entities.decode(Q.value)}else{P=O.attributes.map[\"data-mce-innertext\"];if(P){O.attr(\"data-mce-innertext\",null);Q=new tinymce.html.Node(\"#text\",3);Q.value=P;Q.raw=true;O.append(Q)}}}})}}function l(){a.contentStyles.push(\"body {min-height: 100px}\");a.onClick.add(function(M,N){if(N.target.nodeName==\"HTML\"){a.execCommand(\"SelectAll\");a.selection.collapse(true);a.nodeChanged()}})}u();H();r();if(tinymce.isWebKit){d();K();L();h();n();if(tinymce.isIDevice){b()}else{v();J()}}if(tinymce.isIE&&!tinymce.isIE11){C();y();D();g();i();s();E()}if(tinymce.isIE11){l()}if(tinymce.isGecko&&!tinymce.isIE11){C();z();c();G();t();q()}if(tinymce.isOpera){v()}};(function(j){var a,g,d,k=/[&<>\\\"\\u007E-\\uD7FF\\uE000-\\uFFEF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g,b=/[<>&\\u007E-\\uD7FF\\uE000-\\uFFEF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g,f=/[<>&\\\"\\']/g,c=/&(#x|#)?([\\w]+);/g,i={128:\"\\u20AC\",130:\"\\u201A\",131:\"\\u0192\",132:\"\\u201E\",133:\"\\u2026\",134:\"\\u2020\",135:\"\\u2021\",136:\"\\u02C6\",137:\"\\u2030\",138:\"\\u0160\",139:\"\\u2039\",140:\"\\u0152\",142:\"\\u017D\",145:\"\\u2018\",146:\"\\u2019\",147:\"\\u201C\",148:\"\\u201D\",149:\"\\u2022\",150:\"\\u2013\",151:\"\\u2014\",152:\"\\u02DC\",153:\"\\u2122\",154:\"\\u0161\",155:\"\\u203A\",156:\"\\u0153\",158:\"\\u017E\",159:\"\\u0178\"};g={'\"':\"&quot;\",\"'\":\"&#39;\",\"<\":\"&lt;\",\">\":\"&gt;\",\"&\":\"&amp;\"};d={\"&lt;\":\"<\",\"&gt;\":\">\",\"&amp;\":\"&\",\"&quot;\":'\"',\"&apos;\":\"'\"};function h(l){var m;m=document.createElement(\"div\");m.innerHTML=l;return m.textContent||m.innerText||l}function e(m,p){var n,o,l,q={};if(m){m=m.split(\",\");p=p||10;for(n=0;n<m.length;n+=2){o=String.fromCharCode(parseInt(m[n],p));if(!g[o]){l=\"&\"+m[n+1]+\";\";q[o]=l;q[l]=o}}return q}}a=e(\"50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro\",32);j.html=j.html||{};j.html.Entities={encodeRaw:function(m,l){return m.replace(l?k:b,function(n){return g[n]||n})},encodeAllRaw:function(l){return(\"\"+l).replace(f,function(m){return g[m]||m})},encodeNumeric:function(m,l){return m.replace(l?k:b,function(n){if(n.length>1){return\"&#\"+(((n.charCodeAt(0)-55296)*1024)+(n.charCodeAt(1)-56320)+65536)+\";\"}return g[n]||\"&#\"+n.charCodeAt(0)+\";\"})},encodeNamed:function(n,l,m){m=m||a;return n.replace(l?k:b,function(o){return g[o]||m[o]||o})},getEncodeFunc:function(l,o){var p=j.html.Entities;o=e(o)||a;function m(r,q){return r.replace(q?k:b,function(s){return g[s]||o[s]||\"&#\"+s.charCodeAt(0)+\";\"||s})}function n(r,q){return p.encodeNamed(r,q,o)}l=j.makeMap(l.replace(/\\+/g,\",\"));if(l.named&&l.numeric){return m}if(l.named){if(o){return n}return p.encodeNamed}if(l.numeric){return p.encodeNumeric}return p.encodeRaw},decode:function(l){return l.replace(c,function(n,m,o){if(m){o=parseInt(o,m.length===2?16:10);if(o>65535){o-=65536;return String.fromCharCode(55296+(o>>10),56320+(o&1023))}else{return i[o]||String.fromCharCode(o)}}return d[n]||a[n]||h(n)})}}})(tinymce);tinymce.html.Styles=function(d,f){var k=/rgb\\s*\\(\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*\\)/gi,h=/(?:url(?:(?:\\(\\s*\\\"([^\\\"]+)\\\"\\s*\\))|(?:\\(\\s*\\'([^\\']+)\\'\\s*\\))|(?:\\(\\s*([^)\\s]+)\\s*\\))))|(?:\\'([^\\']+)\\')|(?:\\\"([^\\\"]+)\\\")/gi,b=/\\s*([^:]+):\\s*([^;]+);?/g,l=/\\s+$/,m=/rgb/,e,g,a={},j;d=d||{};j=\"\\\\\\\" \\\\' \\\\; \\\\: ; : \\uFEFF\".split(\" \");for(g=0;g<j.length;g++){a[j[g]]=\"\\uFEFF\"+g;a[\"\\uFEFF\"+g]=j[g]}function c(n,q,p,i){function o(r){r=parseInt(r).toString(16);return r.length>1?r:\"0\"+r}return\"#\"+o(q)+o(p)+o(i)}return{toHex:function(i){return i.replace(k,c)},parse:function(s){var z={},q,n,x,r,v=d.url_converter,y=d.url_converter_scope||this;function p(D,G){var F,C,B,E;if(z[\"border-image\"]===\"none\"){delete z[\"border-image\"]}F=z[D+\"-top\"+G];if(!F){return}C=z[D+\"-right\"+G];if(F!=C){return}B=z[D+\"-bottom\"+G];if(C!=B){return}E=z[D+\"-left\"+G];if(B!=E){return}z[D+G]=E;delete z[D+\"-top\"+G];delete z[D+\"-right\"+G];delete z[D+\"-bottom\"+G];delete z[D+\"-left\"+G]}function u(C){var D=z[C],B;if(!D||D.indexOf(\" \")<0){return}D=D.split(\" \");B=D.length;while(B--){if(D[B]!==D[0]){return false}}z[C]=D[0];return true}function A(D,C,B,E){if(!u(C)){return}if(!u(B)){return}if(!u(E)){return}z[D]=z[C]+\" \"+z[B]+\" \"+z[E];delete z[C];delete z[B];delete z[E]}function t(B){r=true;return a[B]}function i(C,B){if(r){C=C.replace(/\\uFEFF[0-9]/g,function(D){return a[D]})}if(!B){C=C.replace(/\\\\([\\'\\\";:])/g,\"$1\")}return C}function o(C,B,F,E,G,D){G=G||D;if(G){G=i(G);return\"'\"+G.replace(/\\'/g,\"\\\\'\")+\"'\"}B=i(B||F||E);if(v){B=v.call(y,B,\"style\")}return\"url('\"+B.replace(/\\'/g,\"\\\\'\")+\"')\"}if(s){s=s.replace(/\\\\[\\\"\\';:\\uFEFF]/g,t).replace(/\\\"[^\\\"]+\\\"|\\'[^\\']+\\'/g,function(B){return B.replace(/[;:]/g,t)});while(q=b.exec(s)){n=q[1].replace(l,\"\").toLowerCase();x=q[2].replace(l,\"\");if(n&&x.length>0){if(n===\"font-weight\"&&x===\"700\"){x=\"bold\"}else{if(n===\"color\"||n===\"background-color\"){x=x.toLowerCase()}}x=x.replace(k,c);x=x.replace(h,o);z[n]=r?i(x,true):x}b.lastIndex=q.index+q[0].length}p(\"border\",\"\");p(\"border\",\"-width\");p(\"border\",\"-color\");p(\"border\",\"-style\");p(\"padding\",\"\");p(\"margin\",\"\");A(\"border\",\"border-width\",\"border-style\",\"border-color\");if(z.border===\"medium none\"){delete z.border}}return z},serialize:function(p,r){var o=\"\",n,q;function i(t){var x,u,s,v;x=f.styles[t];if(x){for(u=0,s=x.length;u<s;u++){t=x[u];v=p[t];if(v!==e&&v.length>0){o+=(o.length>0?\" \":\"\")+t+\": \"+v+\";\"}}}}if(r&&f&&f.styles){i(\"*\");i(r)}else{for(n in p){q=p[n];if(q!==e&&q.length>0){o+=(o.length>0?\" \":\"\")+n+\": \"+q+\";\"}}}return o}}};(function(f){var a={},e=f.makeMap,g=f.each;function d(j,i){return j.split(i||\",\")}function h(m,l){var j,k={};function i(n){return n.replace(/[A-Z]+/g,function(o){return i(m[o])})}for(j in m){if(m.hasOwnProperty(j)){m[j]=i(m[j])}}i(l).replace(/#/g,\"#text\").replace(/(\\w+)\\[([^\\]]+)\\]\\[([^\\]]*)\\]/g,function(q,o,n,p){n=d(n,\"|\");k[o]={attributes:e(n),attributesOrder:n,children:e(p,\"|\",{\"#comment\":{}})}});return k}function b(){var i=a.html5;if(!i){i=a.html5=h({A:\"id|accesskey|class|dir|draggable|item|hidden|itemprop|role|spellcheck|style|subject|title|onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup\",B:\"#|a|abbr|area|audio|b|bdo|br|button|canvas|cite|code|command|datalist|del|dfn|em|embed|i|iframe|img|input|ins|kbd|keygen|label|link|map|mark|meta|meter|noscript|object|output|progress|q|ruby|samp|script|select|small|span|strong|sub|sup|svg|textarea|time|var|video|wbr\",C:\"#|a|abbr|area|address|article|aside|audio|b|bdo|blockquote|br|button|canvas|cite|code|command|datalist|del|details|dfn|dialog|div|dl|em|embed|fieldset|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|i|iframe|img|input|ins|kbd|keygen|label|link|map|mark|menu|meta|meter|nav|noscript|ol|object|output|p|pre|progress|q|ruby|samp|script|section|select|small|span|strong|style|sub|sup|svg|table|textarea|time|ul|var|video\"},\"html[A|manifest][body|head]head[A][base|command|link|meta|noscript|script|style|title]title[A][#]base[A|href|target][]link[A|href|rel|media|type|sizes][]meta[A|http-equiv|name|content|charset][]style[A|type|media|scoped][#]script[A|charset|type|src|defer|async][#]noscript[A][C]body[A][C]section[A][C]nav[A][C]article[A][C]aside[A][C]h1[A][B]h2[A][B]h3[A][B]h4[A][B]h5[A][B]h6[A][B]hgroup[A][h1|h2|h3|h4|h5|h6]header[A][C]footer[A][C]address[A][C]p[A][B]br[A][]pre[A][B]dialog[A][dd|dt]blockquote[A|cite][C]ol[A|start|reversed][li]ul[A][li]li[A|value][C]dl[A][dd|dt]dt[A][B]dd[A][C]a[A|href|target|ping|rel|media|type][B]em[A][B]strong[A][B]small[A][B]cite[A][B]q[A|cite][B]dfn[A][B]abbr[A][B]code[A][B]var[A][B]samp[A][B]kbd[A][B]sub[A][B]sup[A][B]i[A][B]b[A][B]mark[A][B]progress[A|value|max][B]meter[A|value|min|max|low|high|optimum][B]time[A|datetime][B]ruby[A][B|rt|rp]rt[A][B]rp[A][B]bdo[A][B]span[A][B]ins[A|cite|datetime][B]del[A|cite|datetime][B]figure[A][C|legend|figcaption]figcaption[A][C]img[A|alt|src|height|width|usemap|ismap][]iframe[A|name|src|height|width|sandbox|seamless][]embed[A|src|height|width|type][]object[A|data|type|height|width|usemap|name|form|classid][param]param[A|name|value][]details[A|open][C|legend]command[A|type|label|icon|disabled|checked|radiogroup][]menu[A|type|label][C|li]legend[A][C|B]div[A][C]source[A|src|type|media][]audio[A|src|autobuffer|autoplay|loop|controls][source]video[A|src|autobuffer|autoplay|loop|controls|width|height|poster][source]hr[A][]form[A|accept-charset|action|autocomplete|enctype|method|name|novalidate|target][C]fieldset[A|disabled|form|name][C|legend]label[A|form|for][B]input[A|type|accept|alt|autocomplete|autofocus|checked|disabled|form|formaction|formenctype|formmethod|formnovalidate|formtarget|height|list|max|maxlength|min|multiple|pattern|placeholder|readonly|required|size|src|step|width|files|value|name][]button[A|autofocus|disabled|form|formaction|formenctype|formmethod|formnovalidate|formtarget|name|value|type][B]select[A|autofocus|disabled|form|multiple|name|size][option|optgroup]datalist[A][B|option]optgroup[A|disabled|label][option]option[A|disabled|selected|label|value][]textarea[A|autofocus|disabled|form|maxlength|name|placeholder|readonly|required|rows|cols|wrap][]keygen[A|autofocus|challenge|disabled|form|keytype|name][]output[A|for|form|name][B]canvas[A|width|height][]map[A|name][B|C]area[A|shape|coords|href|alt|target|media|rel|ping|type][]mathml[A][]svg[A][]table[A|border][caption|colgroup|thead|tfoot|tbody|tr]caption[A][C]colgroup[A|span][col]col[A|span][]thead[A][tr]tfoot[A][tr]tbody[A][tr]tr[A][th|td]th[A|headers|rowspan|colspan|scope][B]td[A|headers|rowspan|colspan][C]wbr[A][]\")}return i}function c(){var i=a.html4;if(!i){i=a.html4=h({Z:\"H|K|N|O|P\",Y:\"X|form|R|Q\",ZG:\"E|span|width|align|char|charoff|valign\",X:\"p|T|div|U|W|isindex|fieldset|table\",ZF:\"E|align|char|charoff|valign\",W:\"pre|hr|blockquote|address|center|noframes\",ZE:\"abbr|axis|headers|scope|rowspan|colspan|align|char|charoff|valign|nowrap|bgcolor|width|height\",ZD:\"[E][S]\",U:\"ul|ol|dl|menu|dir\",ZC:\"p|Y|div|U|W|table|br|span|bdo|object|applet|img|map|K|N|Q\",T:\"h1|h2|h3|h4|h5|h6\",ZB:\"X|S|Q\",S:\"R|P\",ZA:\"a|G|J|M|O|P\",R:\"a|H|K|N|O\",Q:\"noscript|P\",P:\"ins|del|script\",O:\"input|select|textarea|label|button\",N:\"M|L\",M:\"em|strong|dfn|code|q|samp|kbd|var|cite|abbr|acronym\",L:\"sub|sup\",K:\"J|I\",J:\"tt|i|b|u|s|strike\",I:\"big|small|font|basefont\",H:\"G|F\",G:\"br|span|bdo\",F:\"object|applet|img|map|iframe\",E:\"A|B|C\",D:\"accesskey|tabindex|onfocus|onblur\",C:\"onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup\",B:\"lang|xml:lang|dir\",A:\"id|class|style|title\"},\"script[id|charset|type|language|src|defer|xml:space][]style[B|id|type|media|title|xml:space][]object[E|declare|classid|codebase|data|type|codetype|archive|standby|width|height|usemap|name|tabindex|align|border|hspace|vspace][#|param|Y]param[id|name|value|valuetype|type][]p[E|align][#|S]a[E|D|charset|type|name|href|hreflang|rel|rev|shape|coords|target][#|Z]br[A|clear][]span[E][#|S]bdo[A|C|B][#|S]applet[A|codebase|archive|code|object|alt|name|width|height|align|hspace|vspace][#|param|Y]h1[E|align][#|S]img[E|src|alt|name|longdesc|width|height|usemap|ismap|align|border|hspace|vspace][]map[B|C|A|name][X|form|Q|area]h2[E|align][#|S]iframe[A|longdesc|name|src|frameborder|marginwidth|marginheight|scrolling|align|width|height][#|Y]h3[E|align][#|S]tt[E][#|S]i[E][#|S]b[E][#|S]u[E][#|S]s[E][#|S]strike[E][#|S]big[E][#|S]small[E][#|S]font[A|B|size|color|face][#|S]basefont[id|size|color|face][]em[E][#|S]strong[E][#|S]dfn[E][#|S]code[E][#|S]q[E|cite][#|S]samp[E][#|S]kbd[E][#|S]var[E][#|S]cite[E][#|S]abbr[E][#|S]acronym[E][#|S]sub[E][#|S]sup[E][#|S]input[E|D|type|name|value|checked|disabled|readonly|size|maxlength|src|alt|usemap|onselect|onchange|accept|align][]select[E|name|size|multiple|disabled|tabindex|onfocus|onblur|onchange][optgroup|option]optgroup[E|disabled|label][option]option[E|selected|disabled|label|value][]textarea[E|D|name|rows|cols|disabled|readonly|onselect|onchange][]label[E|for|accesskey|onfocus|onblur][#|S]button[E|D|name|value|type|disabled][#|p|T|div|U|W|table|G|object|applet|img|map|K|N|Q]h4[E|align][#|S]ins[E|cite|datetime][#|Y]h5[E|align][#|S]del[E|cite|datetime][#|Y]h6[E|align][#|S]div[E|align][#|Y]ul[E|type|compact][li]li[E|type|value][#|Y]ol[E|type|compact|start][li]dl[E|compact][dt|dd]dt[E][#|S]dd[E][#|Y]menu[E|compact][li]dir[E|compact][li]pre[E|width|xml:space][#|ZA]hr[E|align|noshade|size|width][]blockquote[E|cite][#|Y]address[E][#|S|p]center[E][#|Y]noframes[E][#|Y]isindex[A|B|prompt][]fieldset[E][#|legend|Y]legend[E|accesskey|align][#|S]table[E|summary|width|border|frame|rules|cellspacing|cellpadding|align|bgcolor][caption|col|colgroup|thead|tfoot|tbody|tr]caption[E|align][#|S]col[ZG][]colgroup[ZG][col]thead[ZF][tr]tr[ZF|bgcolor][th|td]th[E|ZE][#|Y]form[E|action|method|name|enctype|onsubmit|onreset|accept|accept-charset|target][#|X|R|Q]noscript[E][#|Y]td[E|ZE][#|Y]tfoot[ZF][tr]tbody[ZF][tr]area[E|D|shape|coords|href|nohref|alt|target][]base[id|href|target][]body[E|onload|onunload|background|bgcolor|text|link|vlink|alink][#|Y]\")}return i}f.html.Schema=function(A){var u=this,s={},k={},j=[],D,y;var o,q,z,r,v,n,p={};function m(F,E,H){var G=A[F];if(!G){G=a[F];if(!G){G=e(E,\" \",e(E.toUpperCase(),\" \"));G=f.extend(G,H);a[F]=G}}else{G=e(G,\",\",e(G.toUpperCase(),\" \"))}return G}A=A||{};y=A.schema==\"html5\"?b():c();if(A.verify_html===false){A.valid_elements=\"*[*]\"}if(A.valid_styles){D={};g(A.valid_styles,function(F,E){D[E]=f.explode(F)})}o=m(\"whitespace_elements\",\"pre script noscript style textarea\");q=m(\"self_closing_elements\",\"colgroup dd dt li option p td tfoot th thead tr\");z=m(\"short_ended_elements\",\"area base basefont br col frame hr img input isindex link meta param embed source wbr\");r=m(\"boolean_attributes\",\"checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls\");n=m(\"non_empty_elements\",\"td th iframe video audio object script\",z);textBlockElementsMap=m(\"text_block_elements\",\"h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure\");v=m(\"block_elements\",\"hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex samp option datalist select optgroup\",textBlockElementsMap);function i(E){return new RegExp(\"^\"+E.replace(/([?+*])/g,\".$1\")+\"$\")}function C(L){var K,G,Z,V,aa,F,I,U,X,Q,Y,ac,O,J,W,E,S,H,ab,ad,P,T,N=/^([#+\\-])?([^\\[\\/]+)(?:\\/([^\\[]+))?(?:\\[([^\\]]+)\\])?$/,R=/^([!\\-])?(\\w+::\\w+|[^=:<]+)?(?:([=:<])(.*))?$/,M=/[*?+]/;if(L){L=d(L);if(s[\"@\"]){S=s[\"@\"].attributes;H=s[\"@\"].attributesOrder}for(K=0,G=L.length;K<G;K++){F=N.exec(L[K]);if(F){W=F[1];Q=F[2];E=F[3];X=F[4];O={};J=[];I={attributes:O,attributesOrder:J};if(W===\"#\"){I.paddEmpty=true}if(W===\"-\"){I.removeEmpty=true}if(S){for(ad in S){O[ad]=S[ad]}J.push.apply(J,H)}if(X){X=d(X,\"|\");for(Z=0,V=X.length;Z<V;Z++){F=R.exec(X[Z]);if(F){U={};ac=F[1];Y=F[2].replace(/::/g,\":\");W=F[3];T=F[4];if(ac===\"!\"){I.attributesRequired=I.attributesRequired||[];I.attributesRequired.push(Y);U.required=true}if(ac===\"-\"){delete O[Y];J.splice(f.inArray(J,Y),1);continue}if(W){if(W===\"=\"){I.attributesDefault=I.attributesDefault||[];I.attributesDefault.push({name:Y,value:T});U.defaultValue=T}if(W===\":\"){I.attributesForced=I.attributesForced||[];I.attributesForced.push({name:Y,value:T});U.forcedValue=T}if(W===\"<\"){U.validValues=e(T,\"?\")}}if(M.test(Y)){I.attributePatterns=I.attributePatterns||[];U.pattern=i(Y);I.attributePatterns.push(U)}else{if(!O[Y]){J.push(Y)}O[Y]=U}}}}if(!S&&Q==\"@\"){S=O;H=J}if(E){I.outputName=Q;s[E]=I}if(M.test(Q)){I.pattern=i(Q);j.push(I)}else{s[Q]=I}}}}}function t(E){s={};j=[];C(E);g(y,function(G,F){k[F]=G.children})}function l(F){var E=/^(~)?(.+)$/;if(F){g(d(F),function(J){var H=E.exec(J),I=H[1]===\"~\",K=I?\"span\":\"div\",G=H[2];k[G]=k[K];p[G]=K;if(!I){v[G.toUpperCase()]={};v[G]={}}if(!s[G]){s[G]=s[K]}g(k,function(L,M){if(L[K]){L[G]=L[K]}})})}}function x(F){var E=/^([+\\-]?)(\\w+)\\[([^\\]]+)\\]$/;if(F){g(d(F),function(J){var I=E.exec(J),G,H;if(I){H=I[1];if(H){G=k[I[2]]}else{G=k[I[2]]={\"#comment\":{}}}G=k[I[2]];g(d(I[3],\"|\"),function(K){if(H===\"-\"){delete G[K]}else{G[K]={}}})}})}}function B(E){var G=s[E],F;if(G){return G}F=j.length;while(F--){G=j[F];if(G.pattern.test(E)){return G}}}if(!A.valid_elements){g(y,function(F,E){s[E]={attributes:F.attributes,attributesOrder:F.attributesOrder};k[E]=F.children});if(A.schema!=\"html5\"){g(d(\"strong/b,em/i\"),function(E){E=d(E,\"/\");s[E[1]].outputName=E[0]})}s.img.attributesDefault=[{name:\"alt\",value:\"\"}];g(d(\"ol,ul,sub,sup,blockquote,span,font,a,table,tbody,tr,strong,em,b,i\"),function(E){if(s[E]){s[E].removeEmpty=true}});g(d(\"p,h1,h2,h3,h4,h5,h6,th,td,pre,div,address,caption\"),function(E){s[E].paddEmpty=true})}else{t(A.valid_elements)}l(A.custom_elements);x(A.valid_children);C(A.extended_valid_elements);x(\"+ol[ul|ol],+ul[ul|ol]\");if(A.invalid_elements){f.each(f.explode(A.invalid_elements),function(E){if(s[E]){delete s[E]}})}if(!B(\"span\")){C(\"span[!data-mce-type|*]\")}u.children=k;u.styles=D;u.getBoolAttrs=function(){return r};u.getBlockElements=function(){return v};u.getTextBlockElements=function(){return textBlockElementsMap};u.getShortEndedElements=function(){return z};u.getSelfClosingElements=function(){return q};u.getNonEmptyElements=function(){return n};u.getWhiteSpaceElements=function(){return o};u.isValidChild=function(E,G){var F=k[E];return !!(F&&F[G])};u.isValid=function(F,E){var H,G,I=B(F);if(I){if(E){if(I.attributes[E]){return true}H=I.attributePatterns;if(H){G=H.length;while(G--){if(H[G].pattern.test(F)){return true}}}}else{return true}}return false};u.getElementRule=B;u.getCustomElements=function(){return p};u.addValidElements=C;u.setValidElements=t;u.addCustomElements=l;u.addValidChildren=x;u.elements=s}})(tinymce);(function(a){a.html.SaxParser=function(c,e){var b=this,d=function(){};c=c||{};b.schema=e=e||new a.html.Schema();if(c.fix_self_closing!==false){c.fix_self_closing=true}a.each(\"comment cdata text start end pi doctype\".split(\" \"),function(f){if(f){b[f]=c[f]||d}});b.parse=function(E){var n=this,g,G=0,I,B,A=[],N,Q,C,r,z,s,M,H,O,v,m,k,t,R,o,P,F,S,L,f,J,l,D,K,h,x=0,j=a.html.Entities.decode,y,q;function u(T){var V,U;V=A.length;while(V--){if(A[V].name===T){break}}if(V>=0){for(U=A.length-1;U>=V;U--){T=A[U];if(T.valid){n.end(T.name)}}A.length=V}}function p(U,T,Y,X,W){var Z,V;T=T.toLowerCase();Y=T in H?T:j(Y||X||W||\"\");if(v&&!z&&T.indexOf(\"data-\")!==0){Z=P[T];if(!Z&&F){V=F.length;while(V--){Z=F[V];if(Z.pattern.test(T)){break}}if(V===-1){Z=null}}if(!Z){return}if(Z.validValues&&!(Y in Z.validValues)){return}}N.map[T]=Y;N.push({name:T,value:Y})}l=new RegExp(\"<(?:(?:!--([\\\\w\\\\W]*?)-->)|(?:!\\\\[CDATA\\\\[([\\\\w\\\\W]*?)\\\\]\\\\]>)|(?:!DOCTYPE([\\\\w\\\\W]*?)>)|(?:\\\\?([^\\\\s\\\\/<>]+) ?([\\\\w\\\\W]*?)[?/]>)|(?:\\\\/([^>]+)>)|(?:([A-Za-z0-9\\\\-\\\\:\\\\.]+)((?:\\\\s+[^\\\"'>]+(?:(?:\\\"[^\\\"]*\\\")|(?:'[^']*')|[^>]*))*|\\\\/|\\\\s+)>))\",\"g\");D=/([\\w:\\-]+)(?:\\s*=\\s*(?:(?:\\\"((?:[^\\\"])*)\\\")|(?:\\'((?:[^\\'])*)\\')|([^>\\s]+)))?/g;K={script:/<\\/script[^>]*>/gi,style:/<\\/style[^>]*>/gi,noscript:/<\\/noscript[^>]*>/gi};M=e.getShortEndedElements();J=c.self_closing_elements||e.getSelfClosingElements();H=e.getBoolAttrs();v=c.validate;s=c.remove_internals;y=c.fix_self_closing;q=a.isIE;o=/^:/;while(g=l.exec(E)){if(G<g.index){n.text(j(E.substr(G,g.index-G)))}if(I=g[6]){I=I.toLowerCase();if(q&&o.test(I)){I=I.substr(1)}u(I)}else{if(I=g[7]){I=I.toLowerCase();if(q&&o.test(I)){I=I.substr(1)}O=I in M;if(y&&J[I]&&A.length>0&&A[A.length-1].name===I){u(I)}if(!v||(m=e.getElementRule(I))){k=true;if(v){P=m.attributes;F=m.attributePatterns}if(R=g[8]){z=R.indexOf(\"data-mce-type\")!==-1;if(z&&s){k=false}N=[];N.map={};R.replace(D,p)}else{N=[];N.map={}}if(v&&!z){S=m.attributesRequired;L=m.attributesDefault;f=m.attributesForced;if(f){Q=f.length;while(Q--){t=f[Q];r=t.name;h=t.value;if(h===\"{$uid}\"){h=\"mce_\"+x++}N.map[r]=h;N.push({name:r,value:h})}}if(L){Q=L.length;while(Q--){t=L[Q];r=t.name;if(!(r in N.map)){h=t.value;if(h===\"{$uid}\"){h=\"mce_\"+x++}N.map[r]=h;N.push({name:r,value:h})}}}if(S){Q=S.length;while(Q--){if(S[Q] in N.map){break}}if(Q===-1){k=false}}if(N.map[\"data-mce-bogus\"]){k=false}}if(k){n.start(I,N,O)}}else{k=false}if(B=K[I]){B.lastIndex=G=g.index+g[0].length;if(g=B.exec(E)){if(k){C=E.substr(G,g.index-G)}G=g.index+g[0].length}else{C=E.substr(G);G=E.length}if(k&&C.length>0){n.text(C,true)}if(k){n.end(I)}l.lastIndex=G;continue}if(!O){if(!R||R.indexOf(\"/\")!=R.length-1){A.push({name:I,valid:k})}else{if(k){n.end(I)}}}}else{if(I=g[1]){n.comment(I)}else{if(I=g[2]){n.cdata(I)}else{if(I=g[3]){n.doctype(I)}else{if(I=g[4]){n.pi(I,g[5])}}}}}}G=g.index+g[0].length}if(G<E.length){n.text(j(E.substr(G)))}for(Q=A.length-1;Q>=0;Q--){I=A[Q];if(I.valid){n.end(I.name)}}}}})(tinymce);(function(d){var c=/^[ \\t\\r\\n]*$/,e={\"#text\":3,\"#comment\":8,\"#cdata\":4,\"#pi\":7,\"#doctype\":10,\"#document-fragment\":11};function a(k,l,j){var i,h,f=j?\"lastChild\":\"firstChild\",g=j?\"prev\":\"next\";if(k[f]){return k[f]}if(k!==l){i=k[g];if(i){return i}for(h=k.parent;h&&h!==l;h=h.parent){i=h[g];if(i){return i}}}}function b(f,g){this.name=f;this.type=g;if(g===1){this.attributes=[];this.attributes.map={}}}d.extend(b.prototype,{replace:function(g){var f=this;if(g.parent){g.remove()}f.insert(g,f);f.remove();return f},attr:function(h,l){var f=this,g,j,k;if(typeof h!==\"string\"){for(j in h){f.attr(j,h[j])}return f}if(g=f.attributes){if(l!==k){if(l===null){if(h in g.map){delete g.map[h];j=g.length;while(j--){if(g[j].name===h){g=g.splice(j,1);return f}}}return f}if(h in g.map){j=g.length;while(j--){if(g[j].name===h){g[j].value=l;break}}}else{g.push({name:h,value:l})}g.map[h]=l;return f}else{return g.map[h]}}},clone:function(){var g=this,n=new b(g.name,g.type),h,f,m,j,k;if(m=g.attributes){k=[];k.map={};for(h=0,f=m.length;h<f;h++){j=m[h];if(j.name!==\"id\"){k[k.length]={name:j.name,value:j.value};k.map[j.name]=j.value}}n.attributes=k}n.value=g.value;n.shortEnded=g.shortEnded;return n},wrap:function(g){var f=this;f.parent.insert(g,f);g.append(f);return f},unwrap:function(){var f=this,h,g;for(h=f.firstChild;h;){g=h.next;f.insert(h,f,true);h=g}f.remove()},remove:function(){var f=this,h=f.parent,g=f.next,i=f.prev;if(h){if(h.firstChild===f){h.firstChild=g;if(g){g.prev=null}}else{i.next=g}if(h.lastChild===f){h.lastChild=i;if(i){i.next=null}}else{g.prev=i}f.parent=f.next=f.prev=null}return f},append:function(h){var f=this,g;if(h.parent){h.remove()}g=f.lastChild;if(g){g.next=h;h.prev=g;f.lastChild=h}else{f.lastChild=f.firstChild=h}h.parent=f;return h},insert:function(h,f,i){var g;if(h.parent){h.remove()}g=f.parent||this;if(i){if(f===g.firstChild){g.firstChild=h}else{f.prev.next=h}h.prev=f.prev;h.next=f;f.prev=h}else{if(f===g.lastChild){g.lastChild=h}else{f.next.prev=h}h.next=f.next;h.prev=f;f.next=h}h.parent=g;return h},getAll:function(g){var f=this,h,i=[];for(h=f.firstChild;h;h=a(h,f)){if(h.name===g){i.push(h)}}return i},empty:function(){var g=this,f,h,j;if(g.firstChild){f=[];for(j=g.firstChild;j;j=a(j,g)){f.push(j)}h=f.length;while(h--){j=f[h];j.parent=j.firstChild=j.lastChild=j.next=j.prev=null}}g.firstChild=g.lastChild=null;return g},isEmpty:function(k){var f=this,j=f.firstChild,h,g;if(j){do{if(j.type===1){if(j.attributes.map[\"data-mce-bogus\"]){continue}if(k[j.name]){return false}h=j.attributes.length;while(h--){g=j.attributes[h].name;if(g===\"name\"||g.indexOf(\"data-mce-\")===0){return false}}}if(j.type===8){return false}if((j.type===3&&!c.test(j.value))){return false}}while(j=a(j,f))}return true},walk:function(f){return a(this,null,f)}});d.extend(b,{create:function(g,f){var i,h;i=new b(g,e[g]||1);if(f){for(h in f){i.attr(h,f[h])}}return i}});d.html.Node=b})(tinymce);(function(b){var a=b.html.Node;b.html.DomParser=function(g,h){var f=this,e={},d=[],i={},c={};g=g||{};g.validate=\"validate\" in g?g.validate:true;g.root_name=g.root_name||\"body\";f.schema=h=h||new b.html.Schema();function j(n){var p,q,y,x,A,o,r,l,u,v,k,t,m,z,s;t=b.makeMap(\"tr,td,th,tbody,thead,tfoot,table\");k=h.getNonEmptyElements();m=h.getTextBlockElements();for(p=0;p<n.length;p++){q=n[p];if(!q.parent||q.fixed){continue}if(m[q.name]&&q.parent.name==\"li\"){z=q.next;while(z){if(m[z.name]){z.name=\"li\";z.fixed=true;q.parent.insert(z,q.parent)}else{break}z=z.next}q.unwrap(q);continue}x=[q];for(y=q.parent;y&&!h.isValidChild(y.name,q.name)&&!t[y.name];y=y.parent){x.push(y)}if(y&&x.length>1){x.reverse();A=o=f.filterNode(x[0].clone());for(u=0;u<x.length-1;u++){if(h.isValidChild(o.name,x[u].name)){r=f.filterNode(x[u].clone());o.append(r)}else{r=o}for(l=x[u].firstChild;l&&l!=x[u+1];){s=l.next;r.append(l);l=s}o=r}if(!A.isEmpty(k)){y.insert(A,x[0],true);y.insert(q,A)}else{y.insert(q,x[0],true)}y=x[0];if(y.isEmpty(k)||y.firstChild===y.lastChild&&y.firstChild.name===\"br\"){y.empty().remove()}}else{if(q.parent){if(q.name===\"li\"){z=q.prev;if(z&&(z.name===\"ul\"||z.name===\"ul\")){z.append(q);continue}z=q.next;if(z&&(z.name===\"ul\"||z.name===\"ul\")){z.insert(q,z.firstChild,true);continue}q.wrap(f.filterNode(new a(\"ul\",1)));continue}if(h.isValidChild(q.parent.name,\"div\")&&h.isValidChild(\"div\",q.name)){q.wrap(f.filterNode(new a(\"div\",1)))}else{if(q.name===\"style\"||q.name===\"script\"){q.empty().remove()}else{q.unwrap()}}}}}}f.filterNode=function(m){var l,k,n;if(k in e){n=i[k];if(n){n.push(m)}else{i[k]=[m]}}l=d.length;while(l--){k=d[l].name;if(k in m.attributes.map){n=c[k];if(n){n.push(m)}else{c[k]=[m]}}}return m};f.addNodeFilter=function(k,l){b.each(b.explode(k),function(m){var n=e[m];if(!n){e[m]=n=[]}n.push(l)})};f.addAttributeFilter=function(k,l){b.each(b.explode(k),function(m){var n;for(n=0;n<d.length;n++){if(d[n].name===m){d[n].callbacks.push(l);return}}d.push({name:m,callbacks:[l]})})};f.parse=function(v,m){var n,J,B,A,D,C,x,r,F,N,z,o,E,M=[],L,t,k,y,s,p,u,q;m=m||{};i={};c={};o=b.extend(b.makeMap(\"script,style,head,html,body,title,meta,param\"),h.getBlockElements());u=h.getNonEmptyElements();p=h.children;z=g.validate;q=\"forced_root_block\" in m?m.forced_root_block:g.forced_root_block;s=h.getWhiteSpaceElements();E=/^[ \\t\\r\\n]+/;t=/[ \\t\\r\\n]+$/;k=/[ \\t\\r\\n]+/g;y=/^[ \\t\\r\\n]+$/;function G(){var O=J.firstChild,l,P;while(O){l=O.next;if(O.type==3||(O.type==1&&O.name!==\"p\"&&!o[O.name]&&!O.attr(\"data-mce-type\"))){if(!P){P=K(q,1);J.insert(P,O);P.append(O)}else{P.append(O)}}else{P=null}O=l}}function K(l,O){var P=new a(l,O),Q;if(l in e){Q=i[l];if(Q){Q.push(P)}else{i[l]=[P]}}return P}function I(P){var Q,l,O;for(Q=P.prev;Q&&Q.type===3;){l=Q.value.replace(t,\"\");if(l.length>0){Q.value=l;Q=Q.prev}else{O=Q.prev;Q.remove();Q=O}}}function H(O){var P,l={};for(P in O){if(P!==\"li\"&&P!=\"p\"){l[P]=O[P]}}return l}n=new b.html.SaxParser({validate:z,self_closing_elements:H(h.getSelfClosingElements()),cdata:function(l){B.append(K(\"#cdata\",4)).value=l},text:function(P,l){var O;if(!L){P=P.replace(k,\" \");if(B.lastChild&&o[B.lastChild.name]){P=P.replace(E,\"\")}}if(P.length!==0){O=K(\"#text\",3);O.raw=!!l;B.append(O).value=P}},comment:function(l){B.append(K(\"#comment\",8)).value=l},pi:function(l,O){B.append(K(l,7)).value=O;I(B)},doctype:function(O){var l;l=B.append(K(\"#doctype\",10));l.value=O;I(B)},start:function(l,W,P){var U,R,Q,O,S,X,V,T;Q=z?h.getElementRule(l):{};if(Q){U=K(Q.outputName||l,1);U.attributes=W;U.shortEnded=P;B.append(U);T=p[B.name];if(T&&p[U.name]&&!T[U.name]){M.push(U)}R=d.length;while(R--){S=d[R].name;if(S in W.map){F=c[S];if(F){F.push(U)}else{c[S]=[U]}}}if(o[l]){I(U)}if(!P){B=U}if(!L&&s[l]){L=true}}},end:function(l){var S,P,R,O,Q;P=z?h.getElementRule(l):{};if(P){if(o[l]){if(!L){S=B.firstChild;if(S&&S.type===3){R=S.value.replace(E,\"\");if(R.length>0){S.value=R;S=S.next}else{O=S.next;S.remove();S=O}while(S&&S.type===3){R=S.value;O=S.next;if(R.length===0||y.test(R)){S.remove();S=O}S=O}}S=B.lastChild;if(S&&S.type===3){R=S.value.replace(t,\"\");if(R.length>0){S.value=R;S=S.prev}else{O=S.prev;S.remove();S=O}while(S&&S.type===3){R=S.value;O=S.prev;if(R.length===0||y.test(R)){S.remove();S=O}S=O}}}}if(L&&s[l]){L=false}if(P.removeEmpty||P.paddEmpty){if(B.isEmpty(u)){if(P.paddEmpty){B.empty().append(new a(\"#text\",\"3\")).value=\"\\u00a0\"}else{if(!B.attributes.map.name&&!B.attributes.map.id){Q=B.parent;B.empty().remove();B=Q;return}}}}B=B.parent}}},h);J=B=new a(m.context||g.root_name,11);n.parse(v);if(z&&M.length){if(!m.context){j(M)}else{m.invalid=true}}if(q&&J.name==\"body\"){G()}if(!m.invalid){for(N in i){F=e[N];A=i[N];x=A.length;while(x--){if(!A[x].parent){A.splice(x,1)}}for(D=0,C=F.length;D<C;D++){F[D](A,N,m)}}for(D=0,C=d.length;D<C;D++){F=d[D];if(F.name in c){A=c[F.name];x=A.length;while(x--){if(!A[x].parent){A.splice(x,1)}}for(x=0,r=F.callbacks.length;x<r;x++){F.callbacks[x](A,F.name,m)}}}}return J};if(g.remove_trailing_brs){f.addNodeFilter(\"br\",function(n,m){var r,q=n.length,o,v=b.extend({},h.getBlockElements()),k=h.getNonEmptyElements(),t,s,p,u;v.body=1;for(r=0;r<q;r++){o=n[r];t=o.parent;if(v[o.parent.name]&&o===t.lastChild){p=o.prev;while(p){u=p.name;if(u!==\"span\"||p.attr(\"data-mce-type\")!==\"bookmark\"){if(u!==\"br\"){break}if(u===\"br\"){o=null;break}}p=p.prev}if(o){o.remove();if(t.isEmpty(k)){elementRule=h.getElementRule(t.name);if(elementRule){if(elementRule.removeEmpty){t.remove()}else{if(elementRule.paddEmpty){t.empty().append(new b.html.Node(\"#text\",3)).value=\"\\u00a0\"}}}}}}else{s=o;while(t.firstChild===s&&t.lastChild===s){s=t;if(v[t.name]){break}t=t.parent}if(s===t){textNode=new b.html.Node(\"#text\",3);textNode.value=\"\\u00a0\";o.replace(textNode)}}}})}if(!g.allow_html_in_named_anchor){f.addAttributeFilter(\"id,name\",function(k,l){var n=k.length,p,m,o,q;while(n--){q=k[n];if(q.name===\"a\"&&q.firstChild&&!q.attr(\"href\")){o=q.parent;p=q.lastChild;do{m=p.prev;o.insert(p,q);p=m}while(p)}}})}}})(tinymce);tinymce.html.Writer=function(e){var c=[],a,b,d,f,g;e=e||{};a=e.indent;b=tinymce.makeMap(e.indent_before||\"\");d=tinymce.makeMap(e.indent_after||\"\");f=tinymce.html.Entities.getEncodeFunc(e.entity_encoding||\"raw\",e.entities);g=e.element_format==\"html\";return{start:function(m,k,p){var n,j,h,o;if(a&&b[m]&&c.length>0){o=c[c.length-1];if(o.length>0&&o!==\"\\n\"){c.push(\"\\n\")}}c.push(\"<\",m);if(k){for(n=0,j=k.length;n<j;n++){h=k[n];c.push(\" \",h.name,'=\"',f(h.value,true),'\"')}}if(!p||g){c[c.length]=\">\"}else{c[c.length]=\" />\"}if(p&&a&&d[m]&&c.length>0){o=c[c.length-1];if(o.length>0&&o!==\"\\n\"){c.push(\"\\n\")}}},end:function(h){var i;c.push(\"</\",h,\">\");if(a&&d[h]&&c.length>0){i=c[c.length-1];if(i.length>0&&i!==\"\\n\"){c.push(\"\\n\")}}},text:function(i,h){if(i.length>0){c[c.length]=h?i:f(i)}},cdata:function(h){c.push(\"<![CDATA[\",h,\"]]>\")},comment:function(h){c.push(\"<!--\",h,\"-->\")},pi:function(h,i){if(i){c.push(\"<?\",h,\" \",i,\"?>\")}else{c.push(\"<?\",h,\"?>\")}if(a){c.push(\"\\n\")}},doctype:function(h){c.push(\"<!DOCTYPE\",h,\">\",a?\"\\n\":\"\")},reset:function(){c.length=0},getContent:function(){return c.join(\"\").replace(/\\n$/,\"\")}}};(function(a){a.html.Serializer=function(c,d){var b=this,e=new a.html.Writer(c);c=c||{};c.validate=\"validate\" in c?c.validate:true;b.schema=d=d||new a.html.Schema();b.writer=e;b.serialize=function(h){var g,i;i=c.validate;g={3:function(k,j){e.text(k.value,k.raw)},8:function(j){e.comment(j.value)},7:function(j){e.pi(j.name,j.value)},10:function(j){e.doctype(j.value)},4:function(j){e.cdata(j.value)},11:function(j){if((j=j.firstChild)){do{f(j)}while(j=j.next)}}};e.reset();function f(k){var t=g[k.type],j,o,s,r,p,u,n,m,q;if(!t){j=k.name;o=k.shortEnded;s=k.attributes;if(i&&s&&s.length>1){u=[];u.map={};q=d.getElementRule(k.name);for(n=0,m=q.attributesOrder.length;n<m;n++){r=q.attributesOrder[n];if(r in s.map){p=s.map[r];u.map[r]=p;u.push({name:r,value:p})}}for(n=0,m=s.length;n<m;n++){r=s[n].name;if(!(r in u.map)){p=s.map[r];u.map[r]=p;u.push({name:r,value:p})}}s=u}e.start(k.name,s,o);if(!o){if((k=k.firstChild)){do{f(k)}while(k=k.next)}e.end(j)}}else{t(k)}}if(h.type==1&&!c.inner){f(h)}else{g[11](h)}return e.getContent()}}})(tinymce);tinymce.dom={};(function(b,h){var g=!!document.addEventListener;function c(k,j,l,i){if(k.addEventListener){k.addEventListener(j,l,i||false)}else{if(k.attachEvent){k.attachEvent(\"on\"+j,l)}}}function e(k,j,l,i){if(k.removeEventListener){k.removeEventListener(j,l,i||false)}else{if(k.detachEvent){k.detachEvent(\"on\"+j,l)}}}function a(n,l){var i,k=l||{};function j(){return false}function m(){return true}for(i in n){if(i!==\"layerX\"&&i!==\"layerY\"){k[i]=n[i]}}if(!k.target){k.target=k.srcElement||document}k.preventDefault=function(){k.isDefaultPrevented=m;if(n){if(n.preventDefault){n.preventDefault()}else{n.returnValue=false}}};k.stopPropagation=function(){k.isPropagationStopped=m;if(n){if(n.stopPropagation){n.stopPropagation()}else{n.cancelBubble=true}}};k.stopImmediatePropagation=function(){k.isImmediatePropagationStopped=m;k.stopPropagation()};if(!k.isDefaultPrevented){k.isDefaultPrevented=j;k.isPropagationStopped=j;k.isImmediatePropagationStopped=j}return k}function d(m,n,l){var k=m.document,j={type:\"ready\"};function i(){if(!l.domLoaded){l.domLoaded=true;n(j)}}if(k.readyState==\"complete\"){i();return}if(g){c(m,\"DOMContentLoaded\",i)}else{c(k,\"readystatechange\",function(){if(k.readyState===\"complete\"){e(k,\"readystatechange\",arguments.callee);i()}});if(k.documentElement.doScroll&&m===m.top){(function(){try{k.documentElement.doScroll(\"left\")}catch(o){setTimeout(arguments.callee,0);return}i()})()}}c(m,\"load\",i)}function f(k){var q=this,p={},i,o,n,m,l;m=\"onmouseenter\" in document.documentElement;n=\"onfocusin\" in document.documentElement;l={mouseenter:\"mouseover\",mouseleave:\"mouseout\"};i=1;q.domLoaded=false;q.events=p;function j(t,x){var s,u,r,v;s=p[x][t.type];if(s){for(u=0,r=s.length;u<r;u++){v=s[u];if(v&&v.func.call(v.scope,t)===false){t.preventDefault()}if(t.isImmediatePropagationStopped()){return}}}}q.bind=function(x,A,D,E){var s,t,u,r,B,z,C,v=window;function y(F){j(a(F||v.event),s)}if(!x||x.nodeType===3||x.nodeType===8){return}if(!x[h]){s=i++;x[h]=s;p[s]={}}else{s=x[h];if(!p[s]){p[s]={}}}E=E||x;A=A.split(\" \");u=A.length;while(u--){r=A[u];z=y;B=C=false;if(r===\"DOMContentLoaded\"){r=\"ready\"}if((q.domLoaded||x.readyState==\"complete\")&&r===\"ready\"){q.domLoaded=true;D.call(E,a({type:r}));continue}if(!m){B=l[r];if(B){z=function(F){var H,G;H=F.currentTarget;G=F.relatedTarget;if(G&&H.contains){G=H.contains(G)}else{while(G&&G!==H){G=G.parentNode}}if(!G){F=a(F||v.event);F.type=F.type===\"mouseout\"?\"mouseleave\":\"mouseenter\";F.target=H;j(F,s)}}}}if(!n&&(r===\"focusin\"||r===\"focusout\")){C=true;B=r===\"focusin\"?\"focus\":\"blur\";z=function(F){F=a(F||v.event);F.type=F.type===\"focus\"?\"focusin\":\"focusout\";j(F,s)}}t=p[s][r];if(!t){p[s][r]=t=[{func:D,scope:E}];t.fakeName=B;t.capture=C;t.nativeHandler=z;if(!g){t.proxyHandler=k(s)}if(r===\"ready\"){d(x,z,q)}else{c(x,B||r,g?z:t.proxyHandler,C)}}else{t.push({func:D,scope:E})}}x=t=0;return D};q.unbind=function(x,z,A){var s,u,v,B,r,t;if(!x||x.nodeType===3||x.nodeType===8){return q}s=x[h];if(s){t=p[s];if(z){z=z.split(\" \");v=z.length;while(v--){r=z[v];u=t[r];if(u){if(A){B=u.length;while(B--){if(u[B].func===A){u.splice(B,1)}}}if(!A||u.length===0){delete t[r];e(x,u.fakeName||r,g?u.nativeHandler:u.proxyHandler,u.capture)}}}}else{for(r in t){u=t[r];e(x,u.fakeName||r,g?u.nativeHandler:u.proxyHandler,u.capture)}t={}}for(r in t){return q}delete p[s];try{delete x[h]}catch(y){x[h]=null}}return q};q.fire=function(u,s,r){var v,t;if(!u||u.nodeType===3||u.nodeType===8){return q}t=a(null,r);t.type=s;do{v=u[h];if(v){j(t,v)}u=u.parentNode||u.ownerDocument||u.defaultView||u.parentWindow}while(u&&!t.isPropagationStopped());return q};q.clean=function(u){var s,r,t=q.unbind;if(!u||u.nodeType===3||u.nodeType===8){return q}if(u[h]){t(u)}if(!u.getElementsByTagName){u=u.document}if(u&&u.getElementsByTagName){t(u);r=u.getElementsByTagName(\"*\");s=r.length;while(s--){u=r[s];if(u[h]){t(u)}}}return q};q.callNativeHandler=function(s,r){if(p){p[s][r.type].nativeHandler(r)}};q.destory=function(){p={}};q.add=function(v,s,u,t){if(typeof(v)===\"string\"){v=document.getElementById(v)}if(v&&v instanceof Array){var r=v.length;while(r--){q.add(v[r],s,u,t)}return}if(s===\"init\"){s=\"ready\"}return q.bind(v,s instanceof Array?s.join(\" \"):s,u,t)};q.remove=function(v,s,u,t){if(!v){return q}if(typeof(v)===\"string\"){v=document.getElementById(v)}if(v instanceof Array){var r=v.length;while(r--){q.remove(v[r],s,u,t)}return q}return q.unbind(v,s instanceof Array?s.join(\" \"):s,u)};q.clear=function(r){if(typeof(r)===\"string\"){r=document.getElementById(r)}return q.clean(r)};q.cancel=function(r){if(r){q.prevent(r);q.stop(r)}return false};q.prevent=function(r){if(!r.preventDefault){r=a(r)}r.preventDefault();return false};q.stop=function(r){if(!r.stopPropagation){r=a(r)}r.stopPropagation();return false}}b.EventUtils=f;b.Event=new f(function(i){return function(j){tinymce.dom.Event.callNativeHandler(i,j)}});b.Event.bind(window,\"ready\",function(){});b=0})(tinymce.dom,\"data-mce-expando\");tinymce.dom.TreeWalker=function(a,c){var b=a;function d(i,f,e,j){var h,g;if(i){if(!j&&i[f]){return i[f]}if(i!=c){h=i[e];if(h){return h}for(g=i.parentNode;g&&g!=c;g=g.parentNode){h=g[e];if(h){return h}}}}}this.current=function(){return b};this.next=function(e){return(b=d(b,\"firstChild\",\"nextSibling\",e))};this.prev=function(e){return(b=d(b,\"lastChild\",\"previousSibling\",e))}};(function(e){var g=e.each,d=e.is,f=e.isWebKit,b=e.isIE,h=e.html.Entities,c=/^([a-z0-9],?)+$/i,a=/^[ \\t\\r\\n]*$/;e.create(\"tinymce.dom.DOMUtils\",{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{\"for\":\"htmlFor\",\"class\":\"className\",className:\"className\",checked:\"checked\",disabled:\"disabled\",maxlength:\"maxLength\",readonly:\"readOnly\",selected:\"selected\",value:\"value\",id:\"id\",name:\"name\",type:\"type\"},DOMUtils:function(o,l){var k=this,i,j,n;k.doc=o;k.win=window;k.files={};k.cssFlicker=false;k.counter=0;k.stdMode=!e.isIE||o.documentMode>=8;k.boxModel=!e.isIE||o.compatMode==\"CSS1Compat\"||k.stdMode;k.hasOuterHTML=\"outerHTML\" in o.createElement(\"a\");k.settings=l=e.extend({keep_values:false,hex_colors:1},l);k.schema=l.schema;k.styles=new e.html.Styles({url_converter:l.url_converter,url_converter_scope:l.url_converter_scope},l.schema);if(e.isIE6){try{o.execCommand(\"BackgroundImageCache\",false,true)}catch(m){k.cssFlicker=true}}k.fixDoc(o);k.events=l.ownEvents?new e.dom.EventUtils(l.proxy):e.dom.Event;e.addUnload(k.destroy,k);n=l.schema?l.schema.getBlockElements():{};k.isBlock=function(q){if(!q){return false}var p=q.nodeType;if(p){return !!(p===1&&n[q.nodeName])}return !!n[q]}},fixDoc:function(k){var j=this.settings,i;if(b&&!e.isIE11&&j.schema){(\"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video\").replace(/\\w+/g,function(l){k.createElement(l)});for(i in j.schema.getCustomElements()){k.createElement(i)}}},clone:function(k,i){var j=this,m,l;if(!b||e.isIE11||k.nodeType!==1||i){return k.cloneNode(i)}l=j.doc;if(!i){m=l.createElement(k.nodeName);g(j.getAttribs(k),function(n){j.setAttrib(m,n.nodeName,j.getAttrib(k,n.nodeName))});return m}return m.firstChild},getRoot:function(){var i=this,j=i.settings;return(j&&i.get(j.root_element))||i.doc.body},getViewPort:function(j){var k,i;j=!j?this.win:j;k=j.document;i=this.boxModel?k.documentElement:k.body;return{x:j.pageXOffset||i.scrollLeft,y:j.pageYOffset||i.scrollTop,w:j.innerWidth||i.clientWidth,h:j.innerHeight||i.clientHeight}},getRect:function(l){var k,i=this,j;l=i.get(l);k=i.getPos(l);j=i.getSize(l);return{x:k.x,y:k.y,w:j.w,h:j.h}},getSize:function(l){var j=this,i,k;l=j.get(l);i=j.getStyle(l,\"width\");k=j.getStyle(l,\"height\");if(i.indexOf(\"px\")===-1){i=0}if(k.indexOf(\"px\")===-1){k=0}return{w:parseInt(i,10)||l.offsetWidth||l.clientWidth,h:parseInt(k,10)||l.offsetHeight||l.clientHeight}},getParent:function(k,j,i){return this.getParents(k,j,i,false)},getParents:function(s,m,k,q){var j=this,i,l=j.settings,p=[];s=j.get(s);q=q===undefined;if(l.strict_root){k=k||j.getRoot()}if(d(m,\"string\")){i=m;if(m===\"*\"){m=function(o){return o.nodeType==1}}else{m=function(o){return j.is(o,i)}}}while(s){if(s==k||!s.nodeType||s.nodeType===9){break}if(!m||m(s)){if(q){p.push(s)}else{return s}}s=s.parentNode}return q?p:null},get:function(i){var j;if(i&&this.doc&&typeof(i)==\"string\"){j=i;i=this.doc.getElementById(i);if(i&&i.id!==j){return this.doc.getElementsByName(j)[1]}}return i},getNext:function(j,i){return this._findSib(j,i,\"nextSibling\")},getPrev:function(j,i){return this._findSib(j,i,\"previousSibling\")},select:function(k,j){var i=this;return e.dom.Sizzle(k,i.get(j)||i.get(i.settings.root_element)||i.doc,[])},is:function(l,j){var k;if(l.length===undefined){if(j===\"*\"){return l.nodeType==1}if(c.test(j)){j=j.toLowerCase().split(/,/);l=l.nodeName.toLowerCase();for(k=j.length-1;k>=0;k--){if(j[k]==l){return true}}return false}}return e.dom.Sizzle.matches(j,l.nodeType?[l]:l).length>0},add:function(l,o,i,k,m){var j=this;return this.run(l,function(r){var q,n;q=d(o,\"string\")?j.doc.createElement(o):o;j.setAttribs(q,i);if(k){if(k.nodeType){q.appendChild(k)}else{j.setHTML(q,k)}}return !m?r.appendChild(q):q})},create:function(k,i,j){return this.add(this.doc.createElement(k),k,i,j,1)},createHTML:function(q,i,m){var p=\"\",l=this,j;p+=\"<\"+q;for(j in i){if(i.hasOwnProperty(j)){p+=\" \"+j+'=\"'+l.encode(i[j])+'\"'}}if(typeof(m)!=\"undefined\"){return p+\">\"+m+\"</\"+q+\">\"}return p+\" />\"},remove:function(i,j){return this.run(i,function(l){var m,k=l.parentNode;if(!k){return null}if(j){while(m=l.firstChild){if(!e.isIE||m.nodeType!==3||m.nodeValue){k.insertBefore(m,l)}else{l.removeChild(m)}}}return k.removeChild(l)})},setStyle:function(l,i,j){var k=this;return k.run(l,function(o){var n,m;n=o.style;i=i.replace(/-(\\D)/g,function(q,p){return p.toUpperCase()});if(k.pixelStyles.test(i)&&(e.is(j,\"number\")||/^[\\-0-9\\.]+$/.test(j))){j+=\"px\"}switch(i){case\"opacity\":if(b&&!e.isIE11){n.filter=j===\"\"?\"\":\"alpha(opacity=\"+(j*100)+\")\";if(!l.currentStyle||!l.currentStyle.hasLayout){n.display=\"inline-block\"}}n[i]=n[\"-moz-opacity\"]=n[\"-khtml-opacity\"]=j||\"\";break;case\"float\":(b&&!e.isIE11)?n.styleFloat=j:n.cssFloat=j;break;default:n[i]=j||\"\"}if(k.settings.update_styles){k.setAttrib(o,\"data-mce-style\")}})},getStyle:function(l,i,k){l=this.get(l);if(!l){return}if(this.doc.defaultView&&k){i=i.replace(/[A-Z]/g,function(m){return\"-\"+m});try{return this.doc.defaultView.getComputedStyle(l,null).getPropertyValue(i)}catch(j){return null}}i=i.replace(/-(\\D)/g,function(n,m){return m.toUpperCase()});if(i==\"float\"){i=b?\"styleFloat\":\"cssFloat\"}if(l.currentStyle&&k){return l.currentStyle[i]}return l.style?l.style[i]:undefined},setStyles:function(l,m){var j=this,k=j.settings,i;i=k.update_styles;k.update_styles=0;g(m,function(o,p){j.setStyle(l,p,o)});k.update_styles=i;if(k.update_styles){j.setAttrib(l,k.cssText)}},removeAllAttribs:function(i){return this.run(i,function(l){var k,j=l.attributes;for(k=j.length-1;k>=0;k--){l.removeAttributeNode(j.item(k))}})},setAttrib:function(k,l,i){var j=this;if(!k||!l){return}if(j.settings.strict){l=l.toLowerCase()}return this.run(k,function(p){var o=j.settings;var m=p.getAttribute(l);if(i!==null){switch(l){case\"style\":if(!d(i,\"string\")){g(i,function(q,r){j.setStyle(p,r,q)});return}if(o.keep_values){if(i&&!j._isRes(i)){p.setAttribute(\"data-mce-style\",i,2)}else{p.removeAttribute(\"data-mce-style\",2)}}p.style.cssText=i;break;case\"class\":p.className=i||\"\";break;case\"src\":case\"href\":if(o.keep_values){if(o.url_converter){i=o.url_converter.call(o.url_converter_scope||j,i,l,p)}j.setAttrib(p,\"data-mce-\"+l,i,2)}break;case\"shape\":p.setAttribute(\"data-mce-style\",i);break}}if(d(i)&&i!==null&&i.length!==0){p.setAttribute(l,\"\"+i,2)}else{p.removeAttribute(l,2)}if(tinyMCE.activeEditor&&m!=i){var n=tinyMCE.activeEditor;n.onSetAttrib.dispatch(n,p,l,i)}})},setAttribs:function(j,k){var i=this;return this.run(j,function(l){g(k,function(m,o){i.setAttrib(l,o,m)})})},getAttrib:function(m,o,k){var i,j=this,l;m=j.get(m);if(!m||m.nodeType!==1){return k===l?false:k}if(!d(k)){k=\"\"}if(/^(src|href|style|coords|shape)$/.test(o)){i=m.getAttribute(\"data-mce-\"+o);if(i){return i}}if(b&&j.props[o]){i=m[j.props[o]];i=i&&i.nodeValue?i.nodeValue:i}if(!i){i=m.getAttribute(o,2)}if(/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(o)){if(m[j.props[o]]===true&&i===\"\"){return o}return i?o:\"\"}if(m.nodeName===\"FORM\"&&m.getAttributeNode(o)){return m.getAttributeNode(o).nodeValue}if(o===\"style\"){i=i||m.style.cssText;if(i){i=j.serializeStyle(j.parseStyle(i),m.nodeName);if(j.settings.keep_values&&!j._isRes(i)){m.setAttribute(\"data-mce-style\",i)}}}if(f&&o===\"class\"&&i){i=i.replace(/(apple|webkit)\\-[a-z\\-]+/gi,\"\")}if(b){switch(o){case\"rowspan\":case\"colspan\":if(i===1){i=\"\"}break;case\"size\":if(i===\"+0\"||i===20||i===0){i=\"\"}break;case\"width\":case\"height\":case\"vspace\":case\"checked\":case\"disabled\":case\"readonly\":if(i===0){i=\"\"}break;case\"hspace\":if(i===-1){i=\"\"}break;case\"maxlength\":case\"tabindex\":if(i===32768||i===2147483647||i===\"32768\"){i=\"\"}break;case\"multiple\":case\"compact\":case\"noshade\":case\"nowrap\":if(i===65535){return o}return k;case\"shape\":i=i.toLowerCase();break;default:if(o.indexOf(\"on\")===0&&i){i=e._replace(/^function\\s+\\w+\\(\\)\\s+\\{\\s+(.*)\\s+\\}$/,\"$1\",\"\"+i)}}}return(i!==l&&i!==null&&i!==\"\")?\"\"+i:k},getPos:function(q,l){var j=this,i=0,p=0,m,o=j.doc,k;q=j.get(q);l=l||o.body;if(q){if(q.getBoundingClientRect){q=q.getBoundingClientRect();m=j.boxModel?o.documentElement:o.body;i=q.left+(o.documentElement.scrollLeft||o.body.scrollLeft)-m.clientTop;p=q.top+(o.documentElement.scrollTop||o.body.scrollTop)-m.clientLeft;return{x:i,y:p}}k=q;while(k&&k!=l&&k.nodeType){i+=k.offsetLeft||0;p+=k.offsetTop||0;k=k.offsetParent}k=q.parentNode;while(k&&k!=l&&k.nodeType){i-=k.scrollLeft||0;p-=k.scrollTop||0;k=k.parentNode}}return{x:i,y:p}},parseStyle:function(i){return this.styles.parse(i)},serializeStyle:function(j,i){return this.styles.serialize(j,i)},addStyle:function(j){var k=this.doc,i;styleElm=k.getElementById(\"mceDefaultStyles\");if(!styleElm){styleElm=k.createElement(\"style\"),styleElm.id=\"mceDefaultStyles\";styleElm.type=\"text/css\";i=k.getElementsByTagName(\"head\")[0];if(i.firstChild){i.insertBefore(styleElm,i.firstChild)}else{i.appendChild(styleElm)}}if(styleElm.styleSheet){styleElm.styleSheet.cssText+=j}else{styleElm.appendChild(k.createTextNode(j))}},loadCSS:function(i){var k=this,l=k.doc,j;if(!i){i=\"\"}j=l.getElementsByTagName(\"head\")[0];g(i.split(\",\"),function(m){var n;if(k.files[m]){return}k.files[m]=true;n=k.create(\"link\",{rel:\"stylesheet\",href:e._addVer(m)});if(b&&!e.isIE11&&l.documentMode&&l.recalc){n.onload=function(){if(l.recalc){l.recalc()}n.onload=null}}j.appendChild(n)})},addClass:function(i,j){return this.run(i,function(k){var l;if(!j){return 0}if(this.hasClass(k,j)){return k.className}l=this.removeClass(k,j);return k.className=(l!=\"\"?(l+\" \"):\"\")+j})},removeClass:function(k,l){var i=this,j;return i.run(k,function(n){var m;if(i.hasClass(n,l)){if(!j){j=new RegExp(\"(^|\\\\s+)\"+l+\"(\\\\s+|$)\",\"g\")}m=n.className.replace(j,\" \");m=e.trim(m!=\" \"?m:\"\");n.className=m;if(!m){n.removeAttribute(\"class\");n.removeAttribute(\"className\")}return m}return n.className})},hasClass:function(j,i){j=this.get(j);if(!j||!i){return false}return(\" \"+j.className+\" \").indexOf(\" \"+i+\" \")!==-1},show:function(i){return this.setStyle(i,\"display\",\"block\")},hide:function(i){return this.setStyle(i,\"display\",\"none\")},isHidden:function(i){i=this.get(i);return !i||i.style.display==\"none\"||this.getStyle(i,\"display\")==\"none\"},uniqueId:function(i){return(!i?\"mce_\":i)+(this.counter++)},setHTML:function(k,j){var i=this;return i.run(k,function(m){if(b){while(m.firstChild){m.removeChild(m.firstChild)}try{m.innerHTML=\"<br />\"+j;m.removeChild(m.firstChild)}catch(l){var n=i.create(\"div\");n.innerHTML=\"<br />\"+j;g(e.grep(n.childNodes),function(p,o){if(o&&m.canHaveHTML){m.appendChild(p)}})}}else{m.innerHTML=j}return j})},getOuterHTML:function(k){var j,i=this;k=i.get(k);if(!k){return null}if(k.nodeType===1&&i.hasOuterHTML){return k.outerHTML}j=(k.ownerDocument||i.doc).createElement(\"body\");j.appendChild(k.cloneNode(true));return j.innerHTML},setOuterHTML:function(l,j,m){var i=this;function k(p,o,r){var s,q;q=r.createElement(\"body\");q.innerHTML=o;s=q.lastChild;while(s){i.insertAfter(s.cloneNode(true),p);s=s.previousSibling}i.remove(p)}return this.run(l,function(o){o=i.get(o);if(o.nodeType==1){m=m||o.ownerDocument||i.doc;if(b){try{if(b&&o.nodeType==1){o.outerHTML=j}else{k(o,j,m)}}catch(n){k(o,j,m)}}else{k(o,j,m)}}})},decode:h.decode,encode:h.encodeAllRaw,insertAfter:function(i,j){j=this.get(j);return this.run(i,function(l){var k,m;k=j.parentNode;m=j.nextSibling;if(m){k.insertBefore(l,m)}else{k.appendChild(l)}return l})},replace:function(m,l,i){var j=this;if(d(l,\"array\")){m=m.cloneNode(true)}return j.run(l,function(k){if(i){g(e.grep(k.childNodes),function(n){m.appendChild(n)})}return k.parentNode.replaceChild(m,k)})},rename:function(l,i){var k=this,j;if(l.nodeName!=i.toUpperCase()){j=k.create(i);g(k.getAttribs(l),function(m){k.setAttrib(j,m.nodeName,k.getAttrib(l,m.nodeName))});k.replace(j,l,1)}return j||l},findCommonAncestor:function(k,i){var l=k,j;while(l){j=i;while(j&&l!=j){j=j.parentNode}if(l==j){break}l=l.parentNode}if(!l&&k.ownerDocument){return k.ownerDocument.documentElement}return l},toHex:function(i){var k=/^\\s*rgb\\s*?\\(\\s*?([0-9]+)\\s*?,\\s*?([0-9]+)\\s*?,\\s*?([0-9]+)\\s*?\\)\\s*$/i.exec(i);function j(l){l=parseInt(l,10).toString(16);return l.length>1?l:\"0\"+l}if(k){i=\"#\"+j(k[1])+j(k[2])+j(k[3]);return i}return i},getClasses:function(){var n=this,j=[],m,o={},p=n.settings.class_filter,l;if(n.classes){return n.classes}function q(i){g(i.imports,function(s){q(s)});g(i.cssRules||i.rules,function(t){switch(t.type||1){case 1:if(t.selectorText){g(t.selectorText.split(\",\"),function(r){r=r.replace(/^\\s*|\\s*$|^\\s\\./g,\"\");if(/\\.mce/.test(r)||!/\\.[\\w\\-]+$/.test(r)){return}l=r;r=e._replace(/.*\\.([a-z0-9_\\-]+).*/i,\"$1\",r);if(p&&!(r=p(r,l))){return}if(!o[r]){j.push({\"class\":r});o[r]=1}})}break;case 3:try{q(t.styleSheet)}catch(s){}break}})}try{g(n.doc.styleSheets,q)}catch(k){}if(j.length>0){n.classes=j}return j},run:function(l,k,j){var i=this,m;if(i.doc&&typeof(l)===\"string\"){l=i.get(l)}if(!l){return false}j=j||this;if(!l.nodeType&&(l.length||l.length===0)){m=[];g(l,function(o,n){if(o){if(typeof(o)==\"string\"){o=i.doc.getElementById(o)}m.push(k.call(j,o,n))}});return m}return k.call(j,l)},getAttribs:function(j){var i;j=this.get(j);if(!j){return[]}if(b){i=[];if(j.nodeName==\"OBJECT\"){return j.attributes}if(j.nodeName===\"OPTION\"&&this.getAttrib(j,\"selected\")){i.push({specified:1,nodeName:\"selected\"})}j.cloneNode(false).outerHTML.replace(/<\\/?[\\w:\\-]+ ?|=[\\\"][^\\\"]+\\\"|=\\'[^\\']+\\'|=[\\w\\-]+|>/gi,\"\").replace(/[\\w:\\-]+/gi,function(k){i.push({specified:1,nodeName:k})});return i}return j.attributes},isEmpty:function(m,k){var r=this,o,n,q,j,l,p=0;m=m.firstChild;if(m){j=new e.dom.TreeWalker(m,m.parentNode);k=k||r.schema?r.schema.getNonEmptyElements():null;do{q=m.nodeType;if(q===1){if(m.getAttribute(\"data-mce-bogus\")){continue}l=m.nodeName.toLowerCase();if(k&&k[l]){if(l===\"br\"){p++;continue}return false}n=r.getAttribs(m);o=m.attributes.length;while(o--){l=m.attributes[o].nodeName;if(l===\"name\"||l===\"data-mce-bookmark\"){return false}}}if(q==8){return false}if((q===3&&!a.test(m.nodeValue))){return false}}while(m=j.next())}return p<=1},destroy:function(j){var i=this;i.win=i.doc=i.root=i.events=i.frag=null;if(!j){e.removeUnload(i.destroy)}},createRng:function(){var i=this.doc;return i.createRange?i.createRange():new e.dom.Range(this)},nodeIndex:function(m,n){var i=0,k,l,j;if(m){for(k=m.nodeType,m=m.previousSibling,l=m;m;m=m.previousSibling){j=m.nodeType;if(n&&j==3){if(j==k||!m.nodeValue.length){continue}}i++;k=j}}return i},split:function(m,l,p){var q=this,i=q.createRng(),n,k,o;function j(v){var t,s=v.childNodes,u=v.nodeType;function x(A){var z=A.previousSibling&&A.previousSibling.nodeName==\"SPAN\";var y=A.nextSibling&&A.nextSibling.nodeName==\"SPAN\";return z&&y}if(u==1&&v.getAttribute(\"data-mce-type\")==\"bookmark\"){return}for(t=s.length-1;t>=0;t--){j(s[t])}if(u!=9){if(u==3&&v.nodeValue.length>0){var r=e.trim(v.nodeValue).length;if(!q.isBlock(v.parentNode)||r>0||r===0&&x(v)){return}}else{if(u==1){s=v.childNodes;if(s.length==1&&s[0]&&s[0].nodeType==1&&s[0].getAttribute(\"data-mce-type\")==\"bookmark\"){v.parentNode.insertBefore(s[0],v)}if(s.length||/^(br|hr|input|img)$/i.test(v.nodeName)){return}}}q.remove(v)}return v}if(m&&l){i.setStart(m.parentNode,q.nodeIndex(m));i.setEnd(l.parentNode,q.nodeIndex(l));n=i.extractContents();i=q.createRng();i.setStart(l.parentNode,q.nodeIndex(l)+1);i.setEnd(m.parentNode,q.nodeIndex(m)+1);k=i.extractContents();o=m.parentNode;o.insertBefore(j(n),m);if(p){o.replaceChild(p,l)}else{o.insertBefore(l,m)}o.insertBefore(j(k),m);q.remove(m);return p||l}},bind:function(l,i,k,j){return this.events.add(l,i,k,j||this)},unbind:function(k,i,j){return this.events.remove(k,i,j)},fire:function(k,j,i){return this.events.fire(k,j,i)},getContentEditable:function(j){var i;if(j.nodeType!=1){return null}i=j.getAttribute(\"data-mce-contenteditable\");if(i&&i!==\"inherit\"){return i}return j.contentEditable!==\"inherit\"?j.contentEditable:null},_findSib:function(l,i,j){var k=this,m=i;if(l){if(d(m,\"string\")){m=function(n){return k.is(n,i)}}for(l=l[j];l;l=l[j]){if(m(l)){return l}}}return null},_isRes:function(i){return/^(top|left|bottom|right|width|height)/i.test(i)||/;\\s*(top|left|bottom|right|width|height)/i.test(i)}});e.DOM=new e.dom.DOMUtils(document,{process_html:0})})(tinymce);(function(a){function b(c){var O=this,e=c.doc,U=0,F=1,j=2,E=true,S=false,W=\"startOffset\",h=\"startContainer\",Q=\"endContainer\",A=\"endOffset\",k=tinymce.extend,n=c.nodeIndex;k(O,{startContainer:e,startOffset:0,endContainer:e,endOffset:0,collapsed:E,commonAncestorContainer:e,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:q,setEnd:s,setStartBefore:g,setStartAfter:J,setEndBefore:K,setEndAfter:u,collapse:B,selectNode:y,selectNodeContents:G,compareBoundaryPoints:v,deleteContents:p,extractContents:I,cloneContents:d,insertNode:D,surroundContents:N,cloneRange:L,toStringIE:T});function x(){return e.createDocumentFragment()}function q(X,t){C(E,X,t)}function s(X,t){C(S,X,t)}function g(t){q(t.parentNode,n(t))}function J(t){q(t.parentNode,n(t)+1)}function K(t){s(t.parentNode,n(t))}function u(t){s(t.parentNode,n(t)+1)}function B(t){if(t){O[Q]=O[h];O[A]=O[W]}else{O[h]=O[Q];O[W]=O[A]}O.collapsed=E}function y(t){g(t);u(t)}function G(t){q(t,0);s(t,t.nodeType===1?t.childNodes.length:t.nodeValue.length)}function v(aa,t){var ad=O[h],Y=O[W],ac=O[Q],X=O[A],ab=t.startContainer,af=t.startOffset,Z=t.endContainer,ae=t.endOffset;if(aa===0){return H(ad,Y,ab,af)}if(aa===1){return H(ac,X,ab,af)}if(aa===2){return H(ac,X,Z,ae)}if(aa===3){return H(ad,Y,Z,ae)}}function p(){l(j)}function I(){return l(U)}function d(){return l(F)}function D(aa){var X=this[h],t=this[W],Z,Y;if((X.nodeType===3||X.nodeType===4)&&X.nodeValue){if(!t){X.parentNode.insertBefore(aa,X)}else{if(t>=X.nodeValue.length){c.insertAfter(aa,X)}else{Z=X.splitText(t);X.parentNode.insertBefore(aa,Z)}}}else{if(X.childNodes.length>0){Y=X.childNodes[t]}if(Y){X.insertBefore(aa,Y)}else{X.appendChild(aa)}}}function N(X){var t=O.extractContents();O.insertNode(X);X.appendChild(t);O.selectNode(X)}function L(){return k(new b(c),{startContainer:O[h],startOffset:O[W],endContainer:O[Q],endOffset:O[A],collapsed:O.collapsed,commonAncestorContainer:O.commonAncestorContainer})}function P(t,X){var Y;if(t.nodeType==3){return t}if(X<0){return t}Y=t.firstChild;while(Y&&X>0){--X;Y=Y.nextSibling}if(Y){return Y}return t}function m(){return(O[h]==O[Q]&&O[W]==O[A])}function H(Z,ab,X,aa){var ac,Y,t,ad,af,ae;if(Z==X){if(ab==aa){return 0}if(ab<aa){return -1}return 1}ac=X;while(ac&&ac.parentNode!=Z){ac=ac.parentNode}if(ac){Y=0;t=Z.firstChild;while(t!=ac&&Y<ab){Y++;t=t.nextSibling}if(ab<=Y){return -1}return 1}ac=Z;while(ac&&ac.parentNode!=X){ac=ac.parentNode}if(ac){Y=0;t=X.firstChild;while(t!=ac&&Y<aa){Y++;t=t.nextSibling}if(Y<aa){return -1}return 1}ad=c.findCommonAncestor(Z,X);af=Z;while(af&&af.parentNode!=ad){af=af.parentNode}if(!af){af=ad}ae=X;while(ae&&ae.parentNode!=ad){ae=ae.parentNode}if(!ae){ae=ad}if(af==ae){return 0}t=ad.firstChild;while(t){if(t==af){return -1}if(t==ae){return 1}t=t.nextSibling}}function C(X,aa,Z){var t,Y;if(X){O[h]=aa;O[W]=Z}else{O[Q]=aa;O[A]=Z}t=O[Q];while(t.parentNode){t=t.parentNode}Y=O[h];while(Y.parentNode){Y=Y.parentNode}if(Y==t){if(H(O[h],O[W],O[Q],O[A])>0){O.collapse(X)}}else{O.collapse(X)}O.collapsed=m();O.commonAncestorContainer=c.findCommonAncestor(O[h],O[Q])}function l(ad){var ac,Z=0,af=0,X,ab,Y,aa,t,ae;if(O[h]==O[Q]){return f(ad)}for(ac=O[Q],X=ac.parentNode;X;ac=X,X=X.parentNode){if(X==O[h]){return r(ac,ad)}++Z}for(ac=O[h],X=ac.parentNode;X;ac=X,X=X.parentNode){if(X==O[Q]){return V(ac,ad)}++af}ab=af-Z;Y=O[h];while(ab>0){Y=Y.parentNode;ab--}aa=O[Q];while(ab<0){aa=aa.parentNode;ab++}for(t=Y.parentNode,ae=aa.parentNode;t!=ae;t=t.parentNode,ae=ae.parentNode){Y=t;aa=ae}return o(Y,aa,ad)}function f(ac){var ae,af,t,Y,Z,ad,aa,X,ab;if(ac!=j){ae=x()}if(O[W]==O[A]){return ae}if(O[h].nodeType==3){af=O[h].nodeValue;t=af.substring(O[W],O[A]);if(ac!=F){Y=O[h];X=O[W];ab=O[A]-O[W];if(X===0&&ab>=Y.nodeValue.length-1){Y.parentNode.removeChild(Y)}else{Y.deleteData(X,ab)}O.collapse(E)}if(ac==j){return}if(t.length>0){ae.appendChild(e.createTextNode(t))}return ae}Y=P(O[h],O[W]);Z=O[A]-O[W];while(Y&&Z>0){ad=Y.nextSibling;aa=z(Y,ac);if(ae){ae.appendChild(aa)}--Z;Y=ad}if(ac!=F){O.collapse(E)}return ae}function r(ad,aa){var ac,ab,X,t,Z,Y;if(aa!=j){ac=x()}ab=i(ad,aa);if(ac){ac.appendChild(ab)}X=n(ad);t=X-O[W];if(t<=0){if(aa!=F){O.setEndBefore(ad);O.collapse(S)}return ac}ab=ad.previousSibling;while(t>0){Z=ab.previousSibling;Y=z(ab,aa);if(ac){ac.insertBefore(Y,ac.firstChild)}--t;ab=Z}if(aa!=F){O.setEndBefore(ad);O.collapse(S)}return ac}function V(ab,aa){var ad,X,ac,t,Z,Y;if(aa!=j){ad=x()}ac=R(ab,aa);if(ad){ad.appendChild(ac)}X=n(ab);++X;t=O[A]-X;ac=ab.nextSibling;while(ac&&t>0){Z=ac.nextSibling;Y=z(ac,aa);if(ad){ad.appendChild(Y)}--t;ac=Z}if(aa!=F){O.setStartAfter(ab);O.collapse(E)}return ad}function o(ab,t,ae){var Y,ag,aa,ac,ad,X,af,Z;if(ae!=j){ag=x()}Y=R(ab,ae);if(ag){ag.appendChild(Y)}aa=ab.parentNode;ac=n(ab);ad=n(t);++ac;X=ad-ac;af=ab.nextSibling;while(X>0){Z=af.nextSibling;Y=z(af,ae);if(ag){ag.appendChild(Y)}af=Z;--X}Y=i(t,ae);if(ag){ag.appendChild(Y)}if(ae!=F){O.setStartAfter(ab);O.collapse(E)}return ag}function i(ac,ad){var Y=P(O[Q],O[A]-1),ae,ab,aa,t,X,Z=Y!=O[Q];if(Y==ac){return M(Y,Z,S,ad)}ae=Y.parentNode;ab=M(ae,S,S,ad);while(ae){while(Y){aa=Y.previousSibling;t=M(Y,Z,S,ad);if(ad!=j){ab.insertBefore(t,ab.firstChild)}Z=E;Y=aa}if(ae==ac){return ab}Y=ae.previousSibling;ae=ae.parentNode;X=M(ae,S,S,ad);if(ad!=j){X.appendChild(ab)}ab=X}}function R(ac,ad){var Z=P(O[h],O[W]),aa=Z!=O[h],ae,ab,Y,t,X;if(Z==ac){return M(Z,aa,E,ad)}ae=Z.parentNode;ab=M(ae,S,E,ad);while(ae){while(Z){Y=Z.nextSibling;t=M(Z,aa,E,ad);if(ad!=j){ab.appendChild(t)}aa=E;Z=Y}if(ae==ac){return ab}Z=ae.nextSibling;ae=ae.parentNode;X=M(ae,S,E,ad);if(ad!=j){X.appendChild(ab)}ab=X}}function M(t,aa,ad,ae){var Z,Y,ab,X,ac;if(aa){return z(t,ae)}if(t.nodeType==3){Z=t.nodeValue;if(ad){X=O[W];Y=Z.substring(X);ab=Z.substring(0,X)}else{X=O[A];Y=Z.substring(0,X);ab=Z.substring(X)}if(ae!=F){t.nodeValue=ab}if(ae==j){return}ac=c.clone(t,S);ac.nodeValue=Y;return ac}if(ae==j){return}return c.clone(t,S)}function z(X,t){if(t!=j){return t==F?c.clone(X,E):X}X.parentNode.removeChild(X)}function T(){return c.create(\"body\",null,d()).outerText}return O}a.Range=b;b.prototype.toString=function(){return this.toStringIE()}})(tinymce.dom);(function(){function a(d){var b=this,h=d.dom,c=true,f=false;function e(i,j){var k,t=0,q,n,m,l,o,r,p=-1,s;k=i.duplicate();k.collapse(j);s=k.parentElement();if(s.ownerDocument!==d.dom.doc){return}while(s.contentEditable===\"false\"){s=s.parentNode}if(!s.hasChildNodes()){return{node:s,inside:1}}m=s.children;q=m.length-1;while(t<=q){r=Math.floor((t+q)/2);l=m[r];k.moveToElementText(l);p=k.compareEndPoints(j?\"StartToStart\":\"EndToEnd\",i);if(p>0){q=r-1}else{if(p<0){t=r+1}else{return{node:l}}}}if(p<0){if(!l){k.moveToElementText(s);k.collapse(true);l=s;n=true}else{k.collapse(false)}o=0;while(k.compareEndPoints(j?\"StartToStart\":\"StartToEnd\",i)!==0){if(k.move(\"character\",1)===0||s!=k.parentElement()){break}o++}}else{k.collapse(true);o=0;while(k.compareEndPoints(j?\"StartToStart\":\"StartToEnd\",i)!==0){if(k.move(\"character\",-1)===0||s!=k.parentElement()){break}o++}}return{node:l,position:p,offset:o,inside:n}}function g(){var i=d.getRng(),r=h.createRng(),l,k,p,q,m,j;l=i.item?i.item(0):i.parentElement();if(l.ownerDocument!=h.doc){return r}k=d.isCollapsed();if(i.item){r.setStart(l.parentNode,h.nodeIndex(l));r.setEnd(r.startContainer,r.startOffset+1);return r}function o(A){var u=e(i,A),s,y,z=0,x,v,t;s=u.node;y=u.offset;if(u.inside&&!s.hasChildNodes()){r[A?\"setStart\":\"setEnd\"](s,0);return}if(y===v){r[A?\"setStartBefore\":\"setEndAfter\"](s);return}if(u.position<0){x=u.inside?s.firstChild:s.nextSibling;if(!x){r[A?\"setStartAfter\":\"setEndAfter\"](s);return}if(!y){if(x.nodeType==3){r[A?\"setStart\":\"setEnd\"](x,0)}else{r[A?\"setStartBefore\":\"setEndBefore\"](x)}return}while(x){t=x.nodeValue;z+=t.length;if(z>=y){s=x;z-=y;z=t.length-z;break}x=x.nextSibling}}else{x=s.previousSibling;if(!x){return r[A?\"setStartBefore\":\"setEndBefore\"](s)}if(!y){if(s.nodeType==3){r[A?\"setStart\":\"setEnd\"](x,s.nodeValue.length)}else{r[A?\"setStartAfter\":\"setEndAfter\"](x)}return}while(x){z+=x.nodeValue.length;if(z>=y){s=x;z-=y;break}x=x.previousSibling}}r[A?\"setStart\":\"setEnd\"](s,z)}try{o(true);if(!k){o()}}catch(n){if(n.number==-2147024809){m=b.getBookmark(2);p=i.duplicate();p.collapse(true);l=p.parentElement();if(!k){p=i.duplicate();p.collapse(false);q=p.parentElement();q.innerHTML=q.innerHTML}l.innerHTML=l.innerHTML;b.moveToBookmark(m);i=d.getRng();o(true);if(!k){o()}}else{throw n}}return r}this.getBookmark=function(m){var j=d.getRng(),o,i,l={};function n(u){var t,p,s,r,q=[];t=u.parentNode;p=h.getRoot().parentNode;while(t!=p&&t.nodeType!==9){s=t.children;r=s.length;while(r--){if(u===s[r]){q.push(r);break}}u=t;t=t.parentNode}return q}function k(q){var p;p=e(j,q);if(p){return{position:p.position,offset:p.offset,indexes:n(p.node),inside:p.inside}}}if(m===2){if(!j.item){l.start=k(true);if(!d.isCollapsed()){l.end=k()}}else{l.start={ctrl:true,indexes:n(j.item(0))}}}return l};this.moveToBookmark=function(k){var j,i=h.doc.body;function m(o){var r,q,n,p;r=h.getRoot();for(q=o.length-1;q>=0;q--){p=r.children;n=o[q];if(n<=p.length-1){r=p[n]}}return r}function l(r){var n=k[r?\"start\":\"end\"],q,p,o;if(n){q=n.position>0;p=i.createTextRange();p.moveToElementText(m(n.indexes));offset=n.offset;if(offset!==o){p.collapse(n.inside||q);p.moveStart(\"character\",q?-offset:offset)}else{p.collapse(r)}j.setEndPoint(r?\"StartToStart\":\"EndToStart\",p);if(r){j.collapse(true)}}}if(k.start){if(k.start.ctrl){j=i.createControlRange();j.addElement(m(k.start.indexes));j.select()}else{j=i.createTextRange();l(true);l();j.select()}}};this.addRange=function(i){var n,l,k,p,v,q,t,s=d.dom.doc,m=s.body,r,u;function j(C){var y,B,x,A,z;x=h.create(\"a\");y=C?k:v;B=C?p:q;A=n.duplicate();if(y==s||y==s.documentElement){y=m;B=0}if(y.nodeType==3){y.parentNode.insertBefore(x,y);A.moveToElementText(x);A.moveStart(\"character\",B);h.remove(x);n.setEndPoint(C?\"StartToStart\":\"EndToEnd\",A)}else{z=y.childNodes;if(z.length){if(B>=z.length){h.insertAfter(x,z[z.length-1])}else{y.insertBefore(x,z[B])}A.moveToElementText(x)}else{if(y.canHaveHTML){y.innerHTML=\"<span>\\uFEFF</span>\";x=y.firstChild;A.moveToElementText(x);A.collapse(f)}}n.setEndPoint(C?\"StartToStart\":\"EndToEnd\",A);h.remove(x)}}k=i.startContainer;p=i.startOffset;v=i.endContainer;q=i.endOffset;n=m.createTextRange();if(k==v&&k.nodeType==1){if(p==q&&!k.hasChildNodes()){if(k.canHaveHTML){t=k.previousSibling;if(t&&!t.hasChildNodes()&&h.isBlock(t)){t.innerHTML=\"\\uFEFF\"}else{t=null}k.innerHTML=\"<span>\\uFEFF</span><span>\\uFEFF</span>\";n.moveToElementText(k.lastChild);n.select();h.doc.selection.clear();k.innerHTML=\"\";if(t){t.innerHTML=\"\"}return}else{p=h.nodeIndex(k);k=k.parentNode}}if(p==q-1){try{u=k.childNodes[p];l=m.createControlRange();l.addElement(u);l.select();r=d.getRng();if(r.item&&u===r.item(0)){return}}catch(o){}}}j(true);j();n.select()};this.getRangeAt=g}tinymce.dom.TridentSelection=a})();(function(){var n=/((?:\\((?:\\([^()]+\\)|[^()]+)+\\)|\\[(?:\\[[^\\[\\]]*\\]|['\"][^'\"]*['\"]|[^\\[\\]'\"]+)+\\]|\\\\.|[^ >+~,(\\[\\\\]+)+|[>+~])(\\s*,\\s*)?((?:.|\\r|\\n)*)/g,i=\"sizcache\",o=0,r=Object.prototype.toString,h=false,g=true,q=/\\\\/g,u=/\\r\\n/g,x=/\\W/;[0,0].sort(function(){g=false;return 0});var d=function(C,e,F,G){F=F||[];e=e||document;var I=e;if(e.nodeType!==1&&e.nodeType!==9){return[]}if(!C||typeof C!==\"string\"){return F}var z,K,N,y,J,M,L,E,B=true,A=d.isXML(e),D=[],H=C;do{n.exec(\"\");z=n.exec(H);if(z){H=z[3];D.push(z[1]);if(z[2]){y=z[3];break}}}while(z);if(D.length>1&&j.exec(C)){if(D.length===2&&k.relative[D[0]]){K=s(D[0]+D[1],e,G)}else{K=k.relative[D[0]]?[e]:d(D.shift(),e);while(D.length){C=D.shift();if(k.relative[C]){C+=D.shift()}K=s(C,K,G)}}}else{if(!G&&D.length>1&&e.nodeType===9&&!A&&k.match.ID.test(D[0])&&!k.match.ID.test(D[D.length-1])){J=d.find(D.shift(),e,A);e=J.expr?d.filter(J.expr,J.set)[0]:J.set[0]}if(e){J=G?{expr:D.pop(),set:l(G)}:d.find(D.pop(),D.length===1&&(D[0]===\"~\"||D[0]===\"+\")&&e.parentNode?e.parentNode:e,A);K=J.expr?d.filter(J.expr,J.set):J.set;if(D.length>0){N=l(K)}else{B=false}while(D.length){M=D.pop();L=M;if(!k.relative[M]){M=\"\"}else{L=D.pop()}if(L==null){L=e}k.relative[M](N,L,A)}}else{N=D=[]}}if(!N){N=K}if(!N){d.error(M||C)}if(r.call(N)===\"[object Array]\"){if(!B){F.push.apply(F,N)}else{if(e&&e.nodeType===1){for(E=0;N[E]!=null;E++){if(N[E]&&(N[E]===true||N[E].nodeType===1&&d.contains(e,N[E]))){F.push(K[E])}}}else{for(E=0;N[E]!=null;E++){if(N[E]&&N[E].nodeType===1){F.push(K[E])}}}}}else{l(N,F)}if(y){d(y,I,F,G);d.uniqueSort(F)}return F};d.uniqueSort=function(y){if(p){h=g;y.sort(p);if(h){for(var e=1;e<y.length;e++){if(y[e]===y[e-1]){y.splice(e--,1)}}}}return y};d.matches=function(e,y){return d(e,null,null,y)};d.matchesSelector=function(e,y){return d(y,null,null,[e]).length>0};d.find=function(E,e,F){var D,z,B,A,C,y;if(!E){return[]}for(z=0,B=k.order.length;z<B;z++){C=k.order[z];if((A=k.leftMatch[C].exec(E))){y=A[1];A.splice(1,1);if(y.substr(y.length-1)!==\"\\\\\"){A[1]=(A[1]||\"\").replace(q,\"\");D=k.find[C](A,e,F);if(D!=null){E=E.replace(k.match[C],\"\");break}}}}if(!D){D=typeof e.getElementsByTagName!==\"undefined\"?e.getElementsByTagName(\"*\"):[]}return{set:D,expr:E}};d.filter=function(I,H,L,B){var D,e,G,N,K,y,A,C,J,z=I,M=[],F=H,E=H&&H[0]&&d.isXML(H[0]);while(I&&H.length){for(G in k.filter){if((D=k.leftMatch[G].exec(I))!=null&&D[2]){y=k.filter[G];A=D[1];e=false;D.splice(1,1);if(A.substr(A.length-1)===\"\\\\\"){continue}if(F===M){M=[]}if(k.preFilter[G]){D=k.preFilter[G](D,F,L,M,B,E);if(!D){e=N=true}else{if(D===true){continue}}}if(D){for(C=0;(K=F[C])!=null;C++){if(K){N=y(K,D,C,F);J=B^N;if(L&&N!=null){if(J){e=true}else{F[C]=false}}else{if(J){M.push(K);e=true}}}}}if(N!==undefined){if(!L){F=M}I=I.replace(k.match[G],\"\");if(!e){return[]}break}}}if(I===z){if(e==null){d.error(I)}else{break}}z=I}return F};d.error=function(e){throw new Error(\"Syntax error, unrecognized expression: \"+e)};var b=d.getText=function(B){var z,A,e=B.nodeType,y=\"\";if(e){if(e===1||e===9||e===11){if(typeof B.textContent===\"string\"){return B.textContent}else{if(typeof B.innerText===\"string\"){return B.innerText.replace(u,\"\")}else{for(B=B.firstChild;B;B=B.nextSibling){y+=b(B)}}}}else{if(e===3||e===4){return B.nodeValue}}}else{for(z=0;(A=B[z]);z++){if(A.nodeType!==8){y+=b(A)}}}return y};var k=d.selectors={order:[\"ID\",\"NAME\",\"TAG\"],match:{ID:/#((?:[\\w\\u00c0-\\uFFFF\\-]|\\\\.)+)/,CLASS:/\\.((?:[\\w\\u00c0-\\uFFFF\\-]|\\\\.)+)/,NAME:/\\[name=['\"]*((?:[\\w\\u00c0-\\uFFFF\\-]|\\\\.)+)['\"]*\\]/,ATTR:/\\[\\s*((?:[\\w\\u00c0-\\uFFFF\\-]|\\\\.)+)\\s*(?:(\\S?=)\\s*(?:(['\"])(.*?)\\3|(#?(?:[\\w\\u00c0-\\uFFFF\\-]|\\\\.)*)|)|)\\s*\\]/,TAG:/^((?:[\\w\\u00c0-\\uFFFF\\*\\-]|\\\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\\(\\s*(even|odd|(?:[+\\-]?\\d+|(?:[+\\-]?\\d*)?n\\s*(?:[+\\-]\\s*\\d+)?))\\s*\\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\\((\\d*)\\))?(?=[^\\-]|$)/,PSEUDO:/:((?:[\\w\\u00c0-\\uFFFF\\-]|\\\\.)+)(?:\\((['\"]?)((?:\\([^\\)]+\\)|[^\\(\\)]*)+)\\2\\))?/},leftMatch:{},attrMap:{\"class\":\"className\",\"for\":\"htmlFor\"},attrHandle:{href:function(e){return e.getAttribute(\"href\")},type:function(e){return e.getAttribute(\"type\")}},relative:{\"+\":function(D,y){var A=typeof y===\"string\",C=A&&!x.test(y),E=A&&!C;if(C){y=y.toLowerCase()}for(var z=0,e=D.length,B;z<e;z++){if((B=D[z])){while((B=B.previousSibling)&&B.nodeType!==1){}D[z]=E||B&&B.nodeName.toLowerCase()===y?B||false:B===y}}if(E){d.filter(y,D,true)}},\">\":function(D,y){var C,B=typeof y===\"string\",z=0,e=D.length;if(B&&!x.test(y)){y=y.toLowerCase();for(;z<e;z++){C=D[z];if(C){var A=C.parentNode;D[z]=A.nodeName.toLowerCase()===y?A:false}}}else{for(;z<e;z++){C=D[z];if(C){D[z]=B?C.parentNode:C.parentNode===y}}if(B){d.filter(y,D,true)}}},\"\":function(A,y,C){var B,z=o++,e=t;if(typeof y===\"string\"&&!x.test(y)){y=y.toLowerCase();B=y;e=a}e(\"parentNode\",y,z,A,B,C)},\"~\":function(A,y,C){var B,z=o++,e=t;if(typeof y===\"string\"&&!x.test(y)){y=y.toLowerCase();B=y;e=a}e(\"previousSibling\",y,z,A,B,C)}},find:{ID:function(y,z,A){if(typeof z.getElementById!==\"undefined\"&&!A){var e=z.getElementById(y[1]);return e&&e.parentNode?[e]:[]}},NAME:function(z,C){if(typeof C.getElementsByName!==\"undefined\"){var y=[],B=C.getElementsByName(z[1]);for(var A=0,e=B.length;A<e;A++){if(B[A].getAttribute(\"name\")===z[1]){y.push(B[A])}}return y.length===0?null:y}},TAG:function(e,y){if(typeof y.getElementsByTagName!==\"undefined\"){return y.getElementsByTagName(e[1])}}},preFilter:{CLASS:function(A,y,z,e,D,E){A=\" \"+A[1].replace(q,\"\")+\" \";if(E){return A}for(var B=0,C;(C=y[B])!=null;B++){if(C){if(D^(C.className&&(\" \"+C.className+\" \").replace(/[\\t\\n\\r]/g,\" \").indexOf(A)>=0)){if(!z){e.push(C)}}else{if(z){y[B]=false}}}}return false},ID:function(e){return e[1].replace(q,\"\")},TAG:function(y,e){return y[1].replace(q,\"\").toLowerCase()},CHILD:function(e){if(e[1]===\"nth\"){if(!e[2]){d.error(e[0])}e[2]=e[2].replace(/^\\+|\\s*/g,\"\");var y=/(-?)(\\d*)(?:n([+\\-]?\\d*))?/.exec(e[2]===\"even\"&&\"2n\"||e[2]===\"odd\"&&\"2n+1\"||!/\\D/.test(e[2])&&\"0n+\"+e[2]||e[2]);e[2]=(y[1]+(y[2]||1))-0;e[3]=y[3]-0}else{if(e[2]){d.error(e[0])}}e[0]=o++;return e},ATTR:function(B,y,z,e,C,D){var A=B[1]=B[1].replace(q,\"\");if(!D&&k.attrMap[A]){B[1]=k.attrMap[A]}B[4]=(B[4]||B[5]||\"\").replace(q,\"\");if(B[2]===\"~=\"){B[4]=\" \"+B[4]+\" \"}return B},PSEUDO:function(B,y,z,e,C){if(B[1]===\"not\"){if((n.exec(B[3])||\"\").length>1||/^\\w/.test(B[3])){B[3]=d(B[3],null,null,y)}else{var A=d.filter(B[3],y,z,true^C);if(!z){e.push.apply(e,A)}return false}}else{if(k.match.POS.test(B[0])||k.match.CHILD.test(B[0])){return true}}return B},POS:function(e){e.unshift(true);return e}},filters:{enabled:function(e){return e.disabled===false&&e.type!==\"hidden\"},disabled:function(e){return e.disabled===true},checked:function(e){return e.checked===true},selected:function(e){if(e.parentNode){e.parentNode.selectedIndex}return e.selected===true},parent:function(e){return !!e.firstChild},empty:function(e){return !e.firstChild},has:function(z,y,e){return !!d(e[3],z).length},header:function(e){return(/h\\d/i).test(e.nodeName)},text:function(z){var e=z.getAttribute(\"type\"),y=z.type;return z.nodeName.toLowerCase()===\"input\"&&\"text\"===y&&(e===y||e===null)},radio:function(e){return e.nodeName.toLowerCase()===\"input\"&&\"radio\"===e.type},checkbox:function(e){return e.nodeName.toLowerCase()===\"input\"&&\"checkbox\"===e.type},file:function(e){return e.nodeName.toLowerCase()===\"input\"&&\"file\"===e.type},password:function(e){return e.nodeName.toLowerCase()===\"input\"&&\"password\"===e.type},submit:function(y){var e=y.nodeName.toLowerCase();return(e===\"input\"||e===\"button\")&&\"submit\"===y.type},image:function(e){return e.nodeName.toLowerCase()===\"input\"&&\"image\"===e.type},reset:function(y){var e=y.nodeName.toLowerCase();return(e===\"input\"||e===\"button\")&&\"reset\"===y.type},button:function(y){var e=y.nodeName.toLowerCase();return e===\"input\"&&\"button\"===y.type||e===\"button\"},input:function(e){return(/input|select|textarea|button/i).test(e.nodeName)},focus:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(y,e){return e===0},last:function(z,y,e,A){return y===A.length-1},even:function(y,e){return e%2===0},odd:function(y,e){return e%2===1},lt:function(z,y,e){return y<e[3]-0},gt:function(z,y,e){return y>e[3]-0},nth:function(z,y,e){return e[3]-0===y},eq:function(z,y,e){return e[3]-0===y}},filter:{PSEUDO:function(z,E,D,F){var e=E[1],y=k.filters[e];if(y){return y(z,D,E,F)}else{if(e===\"contains\"){return(z.textContent||z.innerText||b([z])||\"\").indexOf(E[3])>=0}else{if(e===\"not\"){var A=E[3];for(var C=0,B=A.length;C<B;C++){if(A[C]===z){return false}}return true}else{d.error(e)}}}},CHILD:function(z,B){var A,H,D,G,e,C,F,E=B[1],y=z;switch(E){case\"only\":case\"first\":while((y=y.previousSibling)){if(y.nodeType===1){return false}}if(E===\"first\"){return true}y=z;case\"last\":while((y=y.nextSibling)){if(y.nodeType===1){return false}}return true;case\"nth\":A=B[2];H=B[3];if(A===1&&H===0){return true}D=B[0];G=z.parentNode;if(G&&(G[i]!==D||!z.nodeIndex)){C=0;for(y=G.firstChild;y;y=y.nextSibling){if(y.nodeType===1){y.nodeIndex=++C}}G[i]=D}F=z.nodeIndex-H;if(A===0){return F===0}else{return(F%A===0&&F/A>=0)}}},ID:function(y,e){return y.nodeType===1&&y.getAttribute(\"id\")===e},TAG:function(y,e){return(e===\"*\"&&y.nodeType===1)||!!y.nodeName&&y.nodeName.toLowerCase()===e},CLASS:function(y,e){return(\" \"+(y.className||y.getAttribute(\"class\"))+\" \").indexOf(e)>-1},ATTR:function(C,A){var z=A[1],e=d.attr?d.attr(C,z):k.attrHandle[z]?k.attrHandle[z](C):C[z]!=null?C[z]:C.getAttribute(z),D=e+\"\",B=A[2],y=A[4];return e==null?B===\"!=\":!B&&d.attr?e!=null:B===\"=\"?D===y:B===\"*=\"?D.indexOf(y)>=0:B===\"~=\"?(\" \"+D+\" \").indexOf(y)>=0:!y?D&&e!==false:B===\"!=\"?D!==y:B===\"^=\"?D.indexOf(y)===0:B===\"$=\"?D.substr(D.length-y.length)===y:B===\"|=\"?D===y||D.substr(0,y.length+1)===y+\"-\":false},POS:function(B,y,z,C){var e=y[2],A=k.setFilters[e];if(A){return A(B,z,y,C)}}}};var j=k.match.POS,c=function(y,e){return\"\\\\\"+(e-0+1)};for(var f in k.match){k.match[f]=new RegExp(k.match[f].source+(/(?![^\\[]*\\])(?![^\\(]*\\))/.source));k.leftMatch[f]=new RegExp(/(^(?:.|\\r|\\n)*?)/.source+k.match[f].source.replace(/\\\\(\\d+)/g,c))}k.match.globalPOS=j;var l=function(y,e){y=Array.prototype.slice.call(y,0);if(e){e.push.apply(e,y);return e}return y};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(v){l=function(B,A){var z=0,y=A||[];if(r.call(B)===\"[object Array]\"){Array.prototype.push.apply(y,B)}else{if(typeof B.length===\"number\"){for(var e=B.length;z<e;z++){y.push(B[z])}}else{for(;B[z];z++){y.push(B[z])}}}return y}}var p,m;if(document.documentElement.compareDocumentPosition){p=function(y,e){if(y===e){h=true;return 0}if(!y.compareDocumentPosition||!e.compareDocumentPosition){return y.compareDocumentPosition?-1:1}return y.compareDocumentPosition(e)&4?-1:1}}else{p=function(F,E){if(F===E){h=true;return 0}else{if(F.sourceIndex&&E.sourceIndex){return F.sourceIndex-E.sourceIndex}}var C,y,z=[],e=[],B=F.parentNode,D=E.parentNode,G=B;if(B===D){return m(F,E)}else{if(!B){return -1}else{if(!D){return 1}}}while(G){z.unshift(G);G=G.parentNode}G=D;while(G){e.unshift(G);G=G.parentNode}C=z.length;y=e.length;for(var A=0;A<C&&A<y;A++){if(z[A]!==e[A]){return m(z[A],e[A])}}return A===C?m(F,e[A],-1):m(z[A],E,1)};m=function(y,e,z){if(y===e){return z}var A=y.nextSibling;while(A){if(A===e){return -1}A=A.nextSibling}return 1}}(function(){var y=document.createElement(\"div\"),z=\"script\"+(new Date()).getTime(),e=document.documentElement;y.innerHTML=\"<a name='\"+z+\"'/>\";e.insertBefore(y,e.firstChild);if(document.getElementById(z)){k.find.ID=function(B,C,D){if(typeof C.getElementById!==\"undefined\"&&!D){var A=C.getElementById(B[1]);return A?A.id===B[1]||typeof A.getAttributeNode!==\"undefined\"&&A.getAttributeNode(\"id\").nodeValue===B[1]?[A]:undefined:[]}};k.filter.ID=function(C,A){var B=typeof C.getAttributeNode!==\"undefined\"&&C.getAttributeNode(\"id\");return C.nodeType===1&&B&&B.nodeValue===A}}e.removeChild(y);e=y=null})();(function(){var e=document.createElement(\"div\");e.appendChild(document.createComment(\"\"));if(e.getElementsByTagName(\"*\").length>0){k.find.TAG=function(y,C){var B=C.getElementsByTagName(y[1]);if(y[1]===\"*\"){var A=[];for(var z=0;B[z];z++){if(B[z].nodeType===1){A.push(B[z])}}B=A}return B}}e.innerHTML=\"<a href='#'></a>\";if(e.firstChild&&typeof e.firstChild.getAttribute!==\"undefined\"&&e.firstChild.getAttribute(\"href\")!==\"#\"){k.attrHandle.href=function(y){return y.getAttribute(\"href\",2)}}e=null})();if(document.querySelectorAll){(function(){var e=d,A=document.createElement(\"div\"),z=\"__sizzle__\";A.innerHTML=\"<p class='TEST'></p>\";if(A.querySelectorAll&&A.querySelectorAll(\".TEST\").length===0){return}d=function(L,C,G,K){C=C||document;if(!K&&!d.isXML(C)){var J=/^(\\w+$)|^\\.([\\w\\-]+$)|^#([\\w\\-]+$)/.exec(L);if(J&&(C.nodeType===1||C.nodeType===9)){if(J[1]){return l(C.getElementsByTagName(L),G)}else{if(J[2]&&k.find.CLASS&&C.getElementsByClassName){return l(C.getElementsByClassName(J[2]),G)}}}if(C.nodeType===9){if(L===\"body\"&&C.body){return l([C.body],G)}else{if(J&&J[3]){var F=C.getElementById(J[3]);if(F&&F.parentNode){if(F.id===J[3]){return l([F],G)}}else{return l([],G)}}}try{return l(C.querySelectorAll(L),G)}catch(H){}}else{if(C.nodeType===1&&C.nodeName.toLowerCase()!==\"object\"){var D=C,E=C.getAttribute(\"id\"),B=E||z,N=C.parentNode,M=/^\\s*[+~]/.test(L);if(!E){C.setAttribute(\"id\",B)}else{B=B.replace(/'/g,\"\\\\$&\")}if(M&&N){C=C.parentNode}try{if(!M||N){return l(C.querySelectorAll(\"[id='\"+B+\"'] \"+L),G)}}catch(I){}finally{if(!E){D.removeAttribute(\"id\")}}}}}return e(L,C,G,K)};for(var y in e){d[y]=e[y]}A=null})()}(function(){var e=document.documentElement,z=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.msMatchesSelector;if(z){var B=!z.call(document.createElement(\"div\"),\"div\"),y=false;try{z.call(document.documentElement,\"[test!='']:sizzle\")}catch(A){y=true}d.matchesSelector=function(D,F){F=F.replace(/\\=\\s*([^'\"\\]]*)\\s*\\]/g,\"='$1']\");if(!d.isXML(D)){try{if(y||!k.match.PSEUDO.test(F)&&!/!=/.test(F)){var C=z.call(D,F);if(C||!B||D.document&&D.document.nodeType!==11){return C}}}catch(E){}}return d(F,null,null,[D]).length>0}}})();(function(){var e=document.createElement(\"div\");e.innerHTML=\"<div class='test e'></div><div class='test'></div>\";if(!e.getElementsByClassName||e.getElementsByClassName(\"e\").length===0){return}e.lastChild.className=\"e\";if(e.getElementsByClassName(\"e\").length===1){return}k.order.splice(1,0,\"CLASS\");k.find.CLASS=function(y,z,A){if(typeof z.getElementsByClassName!==\"undefined\"&&!A){return z.getElementsByClassName(y[1])}};e=null})();function a(y,D,C,G,E,F){for(var A=0,z=G.length;A<z;A++){var e=G[A];if(e){var B=false;e=e[y];while(e){if(e[i]===C){B=G[e.sizset];break}if(e.nodeType===1&&!F){e[i]=C;e.sizset=A}if(e.nodeName.toLowerCase()===D){B=e;break}e=e[y]}G[A]=B}}}function t(y,D,C,G,E,F){for(var A=0,z=G.length;A<z;A++){var e=G[A];if(e){var B=false;e=e[y];while(e){if(e[i]===C){B=G[e.sizset];break}if(e.nodeType===1){if(!F){e[i]=C;e.sizset=A}if(typeof D!==\"string\"){if(e===D){B=true;break}}else{if(d.filter(D,[e]).length>0){B=e;break}}}e=e[y]}G[A]=B}}}if(document.documentElement.contains){d.contains=function(y,e){return y!==e&&(y.contains?y.contains(e):true)}}else{if(document.documentElement.compareDocumentPosition){d.contains=function(y,e){return !!(y.compareDocumentPosition(e)&16)}}else{d.contains=function(){return false}}}d.isXML=function(e){var y=(e?e.ownerDocument||e:0).documentElement;return y?y.nodeName!==\"HTML\":false};var s=function(z,e,D){var C,E=[],B=\"\",F=e.nodeType?[e]:e;while((C=k.match.PSEUDO.exec(z))){B+=C[0];z=z.replace(k.match.PSEUDO,\"\")}z=k.relative[z]?z+\"*\":z;for(var A=0,y=F.length;A<y;A++){d(z,F[A],E,D)}return d.filter(B,E)};window.tinymce.dom.Sizzle=d})();(function(a){a.dom.Element=function(f,d){var b=this,e,c;b.settings=d=d||{};b.id=f;b.dom=e=d.dom||a.DOM;if(!a.isIE){c=e.get(b.id)}a.each((\"getPos,getRect,getParent,add,setStyle,getStyle,setStyles,setAttrib,setAttribs,getAttrib,addClass,removeClass,hasClass,getOuterHTML,setOuterHTML,remove,show,hide,isHidden,setHTML,get\").split(/,/),function(g){b[g]=function(){var h=[f],j;for(j=0;j<arguments.length;j++){h.push(arguments[j])}h=e[g].apply(e,h);b.update(g);return h}});a.extend(b,{on:function(i,h,g){return a.dom.Event.add(b.id,i,h,g)},getXY:function(){return{x:parseInt(b.getStyle(\"left\")),y:parseInt(b.getStyle(\"top\"))}},getSize:function(){var g=e.get(b.id);return{w:parseInt(b.getStyle(\"width\")||g.clientWidth),h:parseInt(b.getStyle(\"height\")||g.clientHeight)}},moveTo:function(g,h){b.setStyles({left:g,top:h})},moveBy:function(g,i){var h=b.getXY();b.moveTo(h.x+g,h.y+i)},resizeTo:function(g,i){b.setStyles({width:g,height:i})},resizeBy:function(g,j){var i=b.getSize();b.resizeTo(i.w+g,i.h+j)},update:function(h){var g;if(a.isIE6&&d.blocker){h=h||\"\";if(h.indexOf(\"get\")===0||h.indexOf(\"has\")===0||h.indexOf(\"is\")===0){return}if(h==\"remove\"){e.remove(b.blocker);return}if(!b.blocker){b.blocker=e.uniqueId();g=e.add(d.container||e.getRoot(),\"iframe\",{id:b.blocker,style:\"position:absolute;\",frameBorder:0,src:'javascript:\"\"'});e.setStyle(g,\"opacity\",0)}else{g=e.get(b.blocker)}e.setStyles(g,{left:b.getStyle(\"left\",1),top:b.getStyle(\"top\",1),width:b.getStyle(\"width\",1),height:b.getStyle(\"height\",1),display:b.getStyle(\"display\",1),zIndex:parseInt(b.getStyle(\"zIndex\",1)||0)-1})}}})}})(tinymce);(function(d){function f(g){return g.replace(/[\\n\\r]+/g,\"\")}var c=d.is,b=d.isIE,e=d.each,a=d.dom.TreeWalker;d.create(\"tinymce.dom.Selection\",{Selection:function(k,j,i,h){var g=this;g.dom=k;g.win=j;g.serializer=i;g.editor=h;e([\"onBeforeSetContent\",\"onBeforeGetContent\",\"onSetContent\",\"onGetContent\"],function(l){g[l]=new d.util.Dispatcher(g)});if(!g.win.getSelection){g.tridentSel=new d.dom.TridentSelection(g)}if(d.isIE&&!d.isIE11&&k.boxModel){this._fixIESelection()}d.addUnload(g.destroy,g)},setCursorLocation:function(i,j){var g=this;var h=g.dom.createRng();h.setStart(i,j);h.setEnd(i,j);g.setRng(h);g.collapse(false)},getContent:function(h){var g=this,i=g.getRng(),m=g.dom.create(\"body\"),k=g.getSel(),j,l,o;h=h||{};j=l=\"\";h.get=true;h.format=h.format||\"html\";h.forced_root_block=\"\";g.onBeforeGetContent.dispatch(g,h);if(h.format==\"text\"){return g.isCollapsed()?\"\":(i.text||(k.toString?k.toString():\"\"))}if(i.cloneContents){o=i.cloneContents();if(o){m.appendChild(o)}}else{if(c(i.item)||c(i.htmlText)){m.innerHTML=\"<br>\"+(i.item?i.item(0).outerHTML:i.htmlText);m.removeChild(m.firstChild)}else{m.innerHTML=i.toString()}}if(/^\\s/.test(m.innerHTML)){j=\" \"}if(/\\s+$/.test(m.innerHTML)){l=\" \"}h.getInner=true;h.content=g.isCollapsed()?\"\":j+g.serializer.serialize(m,h)+l;g.onGetContent.dispatch(g,h);return h.content},setContent:function(h,j){var o=this,g=o.getRng(),k,l=o.win.document,n,m;j=j||{format:\"html\"};j.set=true;h=j.content=h;if(!j.no_events){o.onBeforeSetContent.dispatch(o,j)}h=j.content;if(g.insertNode){h+='<span id=\"__caret\">_</span>';if(g.startContainer==l&&g.endContainer==l){l.body.innerHTML=h}else{g.deleteContents();if(l.body.childNodes.length===0){l.body.innerHTML=h}else{if(g.createContextualFragment){g.insertNode(g.createContextualFragment(h))}else{n=l.createDocumentFragment();m=l.createElement(\"div\");n.appendChild(m);m.outerHTML=h;g.insertNode(n)}}}k=o.dom.get(\"__caret\");g=l.createRange();g.setStartBefore(k);g.setEndBefore(k);o.setRng(g);o.dom.remove(\"__caret\");try{o.setRng(g)}catch(i){}}else{if(g.item){l.execCommand(\"Delete\",false,null);g=o.getRng()}if(/^\\s+/.test(h)){g.pasteHTML('<span id=\"__mce_tmp\">_</span>'+h);o.dom.remove(\"__mce_tmp\")}else{g.pasteHTML(h)}}if(!j.no_events){o.onSetContent.dispatch(o,j)}},getStart:function(){var i=this,h=i.getRng(),j,g,l,k;if(h.duplicate||h.item){if(h.item){return h.item(0)}l=h.duplicate();l.collapse(1);j=l.parentElement();if(j.ownerDocument!==i.dom.doc){j=i.dom.getRoot()}g=k=h.parentElement();while(k=k.parentNode){if(k==j){j=g;break}}return j}else{j=h.startContainer;if(j.nodeType==1&&j.hasChildNodes()){j=j.childNodes[Math.min(j.childNodes.length-1,h.startOffset)]}if(j&&j.nodeType==3){return j.parentNode}return j}},getEnd:function(){var h=this,g=h.getRng(),j,i;if(g.duplicate||g.item){if(g.item){return g.item(0)}g=g.duplicate();g.collapse(0);j=g.parentElement();if(j.ownerDocument!==h.dom.doc){j=h.dom.getRoot()}if(j&&j.nodeName==\"BODY\"){return j.lastChild||j}return j}else{j=g.endContainer;i=g.endOffset;if(j.nodeType==1&&j.hasChildNodes()){j=j.childNodes[i>0?i-1:i]}if(j&&j.nodeType==3){return j.parentNode}return j}},getBookmark:function(s,v){var y=this,n=y.dom,h,k,j,o,i,p,q,m=\"\\uFEFF\",x;function g(z,A){var t=0;e(n.select(z),function(C,B){if(C==A){t=B}});return t}function u(t){function z(E){var A,D,C,B=E?\"start\":\"end\";A=t[B+\"Container\"];D=t[B+\"Offset\"];if(A.nodeType==1&&A.nodeName==\"TR\"){C=A.childNodes;A=C[Math.min(E?D:D-1,C.length-1)];if(A){D=E?0:A.childNodes.length;t[\"set\"+(E?\"Start\":\"End\")](A,D)}}}z(true);z();return t}function l(){var z=y.getRng(true),t=n.getRoot(),A={};function B(E,J){var D=E[J?\"startContainer\":\"endContainer\"],I=E[J?\"startOffset\":\"endOffset\"],C=[],F,H,G=0;if(D.nodeType==3){if(v){for(F=D.previousSibling;F&&F.nodeType==3;F=F.previousSibling){I+=F.nodeValue.length}}C.push(I)}else{H=D.childNodes;if(I>=H.length&&H.length){G=1;I=Math.max(0,H.length-1)}C.push(y.dom.nodeIndex(H[I],v)+G)}for(;D&&D!=t;D=D.parentNode){C.push(y.dom.nodeIndex(D,v))}return C}A.start=B(z,true);if(!y.isCollapsed()){A.end=B(z)}return A}if(s==2){if(y.tridentSel){return y.tridentSel.getBookmark(s)}return l()}if(s){h=y.getRng();if(h.setStart){h={startContainer:h.startContainer,startOffset:h.startOffset,endContainer:h.endContainer,endOffset:h.endOffset}}return{rng:h}}h=y.getRng();j=n.uniqueId();o=tinyMCE.activeEditor.selection.isCollapsed();x=\"overflow:hidden;line-height:0px\";if(h.duplicate||h.item){if(!h.item){k=h.duplicate();try{h.collapse();h.pasteHTML('<span data-mce-type=\"bookmark\" id=\"'+j+'_start\" style=\"'+x+'\">'+m+\"</span>\");if(!o){k.collapse(false);h.moveToElementText(k.parentElement());if(h.compareEndPoints(\"StartToEnd\",k)===0){k.move(\"character\",-1)}k.pasteHTML('<span data-mce-type=\"bookmark\" id=\"'+j+'_end\" style=\"'+x+'\">'+m+\"</span>\")}}catch(r){return null}}else{p=h.item(0);i=p.nodeName;return{name:i,index:g(i,p)}}}else{p=y.getNode();i=p.nodeName;if(i==\"IMG\"){return{name:i,index:g(i,p)}}k=u(h.cloneRange());if(!o){k.collapse(false);k.insertNode(n.create(\"span\",{\"data-mce-type\":\"bookmark\",id:j+\"_end\",style:x},m))}h=u(h);h.collapse(true);h.insertNode(n.create(\"span\",{\"data-mce-type\":\"bookmark\",id:j+\"_start\",style:x},m))}y.moveToBookmark({id:j,keep:1});return{id:j}},moveToBookmark:function(q){var v=this,n=v.dom,l,j,g,i,u,k,x,r,s;function h(C){var t=q[C?\"start\":\"end\"],z,A,B,y;if(t){B=t[0];for(A=u,z=t.length-1;z>=1;z--){y=A.childNodes;if(t[z]>y.length-1){return}A=y[t[z]]}if(A.nodeType===3){B=Math.min(t[0],A.nodeValue.length)}if(A.nodeType===1){B=Math.min(t[0],A.childNodes.length)}if(C){g.setStart(A,B)}else{g.setEnd(A,B)}}return true}function m(D){var y=n.get(q.id+\"_\"+D),C,t,A,B,z=q.keep;if(y){C=y.parentNode;if(D==\"start\"){if(!z){t=n.nodeIndex(y)}else{C=y.firstChild;t=1}k=x=C;r=s=t}else{if(!z){t=n.nodeIndex(y)}else{C=y.firstChild;t=1}x=C;s=t}if(!z){B=y.previousSibling;A=y.nextSibling;e(d.grep(y.childNodes),function(E){if(E.nodeType==3){E.nodeValue=E.nodeValue.replace(/\\uFEFF/g,\"\")}});while(y=n.get(q.id+\"_\"+D)){n.remove(y,1)}if(B&&A&&B.nodeType==A.nodeType&&B.nodeType==3&&!d.isOpera){t=B.nodeValue.length;B.appendData(A.nodeValue);n.remove(A);if(D==\"start\"){k=x=B;r=s=t}else{x=B;s=t}}}}}function o(t){if(n.isBlock(t)&&!t.innerHTML&&!b){t.innerHTML='<br data-mce-bogus=\"1\" />'}return t}if(q){if(q.start){g=n.createRng();u=n.getRoot();if(v.tridentSel){return v.tridentSel.moveToBookmark(q)}if(h(true)&&h()){v.setRng(g)}}else{if(q.id){m(\"start\");m(\"end\");if(k){g=n.createRng();g.setStart(o(k),r);g.setEnd(o(x),s);v.setRng(g)}}else{if(q.name){v.select(n.select(q.name)[q.index])}else{if(q.rng){g=q.rng;if(g.startContainer){i=v.dom.createRng();try{i.setStart(g.startContainer,g.startOffset);i.setEnd(g.endContainer,g.endOffset)}catch(p){}g=i}v.setRng(g)}}}}}},select:function(l,k){var j=this,m=j.dom,h=m.createRng(),g;function i(n,p){var o=new a(n,n);do{if(n.nodeType==3&&d.trim(n.nodeValue).length!==0){if(p){h.setStart(n,0)}else{h.setEnd(n,n.nodeValue.length)}return}if(n.nodeName==\"BR\"){if(p){h.setStartBefore(n)}else{h.setEndBefore(n)}return}}while(n=(p?o.next():o.prev()))}if(l){g=m.nodeIndex(l);h.setStart(l.parentNode,g);h.setEnd(l.parentNode,g+1);if(k){i(l,1);i(l)}j.setRng(h)}return l},isCollapsed:function(){var g=this,i=g.getRng(),h=g.getSel();if(!i||i.item){return false}if(i.compareEndPoints){return i.compareEndPoints(\"StartToEnd\",i)===0}return !h||i.collapsed},collapse:function(g){var i=this,h=i.getRng(),j;if(h.item){j=h.item(0);h=i.win.document.body.createTextRange();h.moveToElementText(j)}h.collapse(!!g);i.setRng(h)},getSel:function(){var h=this,g=this.win;return g.getSelection?g.getSelection():g.document.selection},getRng:function(m){var h=this,j,g,l,k=h.win.document;if(m&&h.tridentSel){return h.tridentSel.getRangeAt(0)}try{if(j=h.getSel()){g=j.rangeCount>0?j.getRangeAt(0):(j.createRange?j.createRange():k.createRange())}}catch(i){}if(d.isIE&&!d.isIE11&&g&&g.setStart&&k.selection.createRange().item){l=k.selection.createRange().item(0);g=k.createRange();g.setStartBefore(l);g.setEndAfter(l)}if(!g){g=k.createRange?k.createRange():k.body.createTextRange()}if(g.setStart&&g.startContainer.nodeType===9&&g.collapsed){l=h.dom.getRoot();g.setStart(l,0);g.setEnd(l,0)}if(h.selectedRange&&h.explicitRange){if(g.compareBoundaryPoints(g.START_TO_START,h.selectedRange)===0&&g.compareBoundaryPoints(g.END_TO_END,h.selectedRange)===0){g=h.explicitRange}else{h.selectedRange=null;h.explicitRange=null}}return g},setRng:function(k,g){var j,i=this;if(!i.tridentSel){j=i.getSel();if(j){i.explicitRange=k;try{j.removeAllRanges()}catch(h){}j.addRange(k);if(g===false&&j.extend){j.collapse(k.endContainer,k.endOffset);j.extend(k.startContainer,k.startOffset)}i.selectedRange=j.rangeCount>0?j.getRangeAt(0):null}}else{if(k.cloneRange){try{i.tridentSel.addRange(k);return}catch(h){}}try{k.select()}catch(h){}}},setNode:function(h){var g=this;g.setContent(g.dom.getOuterHTML(h));return h},getNode:function(){var i=this,h=i.getRng(),j=i.getSel(),m,l=h.startContainer,g=h.endContainer;function k(q,o){var p=q;while(q&&q.nodeType===3&&q.length===0){q=o?q.nextSibling:q.previousSibling}return q||p}if(!h){return i.dom.getRoot()}if(h.setStart){m=h.commonAncestorContainer;if(!h.collapsed){if(h.startContainer==h.endContainer){if(h.endOffset-h.startOffset<2){if(h.startContainer.hasChildNodes()){m=h.startContainer.childNodes[h.startOffset]}}}if(l.nodeType===3&&g.nodeType===3){if(l.length===h.startOffset){l=k(l.nextSibling,true)}else{l=l.parentNode}if(h.endOffset===0){g=k(g.previousSibling,false)}else{g=g.parentNode}if(l&&l===g){return l}}}if(m&&m.nodeType==3){return m.parentNode}return m}return h.item?h.item(0):h.parentElement()},getSelectedBlocks:function(p,h){var o=this,k=o.dom,m,l,i,j=[];m=k.getParent(p||o.getStart(),k.isBlock);l=k.getParent(h||o.getEnd(),k.isBlock);if(m){j.push(m)}if(m&&l&&m!=l){i=m;var g=new a(m,k.getRoot());while((i=g.next())&&i!=l){if(k.isBlock(i)){j.push(i)}}}if(l&&m!=l){j.push(l)}return j},isForward:function(){var i=this.dom,g=this.getSel(),j,h;if(!g||g.anchorNode==null||g.focusNode==null){return true}j=i.createRng();j.setStart(g.anchorNode,g.anchorOffset);j.collapse(true);h=i.createRng();h.setStart(g.focusNode,g.focusOffset);h.collapse(true);return j.compareBoundaryPoints(j.START_TO_START,h)<=0},normalize:function(){var h=this,g,m,l,j,i;function k(p){var o,r,n,s=h.dom,u=s.getRoot(),q,t,v;function y(z,A){var B=new a(z,s.getParent(z.parentNode,s.isBlock)||u);while(z=B[A?\"prev\":\"next\"]()){if(z.nodeName===\"BR\"){return true}}}function x(B,z){var C,A;z=z||o;C=new a(z,s.getParent(z.parentNode,s.isBlock)||u);while(q=C[B?\"prev\":\"next\"]()){if(q.nodeType===3&&q.nodeValue.length>0){o=q;r=B?q.nodeValue.length:0;m=true;return}if(s.isBlock(q)||t[q.nodeName.toLowerCase()]){return}A=q}if(l&&A){o=A;m=true;r=0}}o=g[(p?\"start\":\"end\")+\"Container\"];r=g[(p?\"start\":\"end\")+\"Offset\"];t=s.schema.getNonEmptyElements();if(o.nodeType===9){o=s.getRoot();r=0}if(o===u){if(p){q=o.childNodes[r>0?r-1:0];if(q){v=q.nodeName.toLowerCase();if(t[q.nodeName]||q.nodeName==\"TABLE\"){return}}}if(o.hasChildNodes()){o=o.childNodes[Math.min(!p&&r>0?r-1:r,o.childNodes.length-1)];r=0;if(o.hasChildNodes()&&!/TABLE/.test(o.nodeName)){q=o;n=new a(o,u);do{if(q.nodeType===3&&q.nodeValue.length>0){r=p?0:q.nodeValue.length;o=q;m=true;break}if(t[q.nodeName.toLowerCase()]){r=s.nodeIndex(q);o=q.parentNode;if(q.nodeName==\"IMG\"&&!p){r++}m=true;break}}while(q=(p?n.next():n.prev()))}}}if(l){if(o.nodeType===3&&r===0){x(true)}if(o.nodeType===1){q=o.childNodes[r];if(q&&q.nodeName===\"BR\"&&!y(q)&&!y(q,true)){x(true,o.childNodes[r])}}}if(p&&!l&&o.nodeType===3&&r===o.nodeValue.length){x(false)}if(m){g[\"set\"+(p?\"Start\":\"End\")](o,r)}}if(d.isIE){return}g=h.getRng();l=g.collapsed;k(true);if(!l){k()}if(m){if(l){g.collapse(true)}h.setRng(g,h.isForward())}},selectorChanged:function(g,j){var h=this,i;if(!h.selectorChangedData){h.selectorChangedData={};i={};h.editor.onNodeChange.addToTop(function(l,k,o){var p=h.dom,m=p.getParents(o,null,p.getRoot()),n={};e(h.selectorChangedData,function(r,q){e(m,function(s){if(p.is(s,q)){if(!i[q]){e(r,function(t){t(true,{node:s,selector:q,parents:m})});i[q]=r}n[q]=r;return false}})});e(i,function(r,q){if(!n[q]){delete i[q];e(r,function(s){s(false,{node:o,selector:q,parents:m})})}})})}if(!h.selectorChangedData[g]){h.selectorChangedData[g]=[]}h.selectorChangedData[g].push(j);return h},scrollIntoView:function(k){var j,h,g=this,i=g.dom;h=i.getViewPort(g.editor.getWin());j=i.getPos(k).y;if(j<h.y||j+25>h.y+h.h){g.editor.getWin().scrollTo(0,j<h.y?j:j-h.h+25)}},destroy:function(h){var g=this;g.win=null;if(!h){d.removeUnload(g.destroy)}},_fixIESelection:function(){var h=this.dom,n=h.doc,i=n.body,k,o,g;function j(p,s){var q=i.createTextRange();try{q.moveToPoint(p,s)}catch(r){q=null}return q}function m(q){var p;if(q.button){p=j(q.x,q.y);if(p){if(p.compareEndPoints(\"StartToStart\",o)>0){p.setEndPoint(\"StartToStart\",o)}else{p.setEndPoint(\"EndToEnd\",o)}p.select()}}else{l()}}function l(){var p=n.selection.createRange();if(o&&!p.item&&p.compareEndPoints(\"StartToEnd\",p)===0){o.select()}h.unbind(n,\"mouseup\",l);h.unbind(n,\"mousemove\",m);o=k=0}n.documentElement.unselectable=true;h.bind(n,[\"mousedown\",\"contextmenu\"],function(p){if(p.target.nodeName===\"HTML\"){if(k){l()}g=n.documentElement;if(g.scrollHeight>g.clientHeight){return}k=1;o=j(p.x,p.y);if(o){h.bind(n,\"mouseup\",l);h.bind(n,\"mousemove\",m);h.win.focus();o.select()}}})}})})(tinymce);(function(a){a.dom.Serializer=function(e,i,f){var h,b,d=a.isIE,g=a.each,c;if(!e.apply_source_formatting){e.indent=false}i=i||a.DOM;f=f||new a.html.Schema(e);e.entity_encoding=e.entity_encoding||\"named\";e.remove_trailing_brs=\"remove_trailing_brs\" in e?e.remove_trailing_brs:true;h=new a.util.Dispatcher(self);b=new a.util.Dispatcher(self);c=new a.html.DomParser(e,f);c.addAttributeFilter(\"src,href,style\",function(k,j){var o=k.length,l,q,n=\"data-mce-\"+j,p=e.url_converter,r=e.url_converter_scope,m;while(o--){l=k[o];q=l.attributes.map[n];if(q!==m){l.attr(j,q.length>0?q:null);l.attr(n,null)}else{q=l.attributes.map[j];if(j===\"style\"){q=i.serializeStyle(i.parseStyle(q),l.name)}else{if(p){q=p.call(r,q,j,l.name)}}l.attr(j,q.length>0?q:null)}}});c.addAttributeFilter(\"class\",function(j,k){var l=j.length,m,n;while(l--){m=j[l];n=m.attr(\"class\").replace(/(?:^|\\s)mce(Item\\w+|Selected)(?!\\S)/g,\"\");m.attr(\"class\",n.length>0?n:null)}});c.addAttributeFilter(\"data-mce-type\",function(j,l,k){var m=j.length,n;while(m--){n=j[m];if(n.attributes.map[\"data-mce-type\"]===\"bookmark\"&&!k.cleanup){n.remove()}}});c.addAttributeFilter(\"data-mce-expando\",function(j,l,k){var m=j.length;while(m--){j[m].attr(l,null)}});c.addNodeFilter(\"noscript\",function(j){var k=j.length,l;while(k--){l=j[k].firstChild;if(l){l.value=a.html.Entities.decode(l.value)}}});c.addNodeFilter(\"script,style\",function(k,l){var m=k.length,n,o;function j(p){return p.replace(/(<!--\\[CDATA\\[|\\]\\]-->)/g,\"\\n\").replace(/^[\\r\\n]*|[\\r\\n]*$/g,\"\").replace(/^\\s*((<!--)?(\\s*\\/\\/)?\\s*<!\\[CDATA\\[|(<!--\\s*)?\\/\\*\\s*<!\\[CDATA\\[\\s*\\*\\/|(\\/\\/)?\\s*<!--|\\/\\*\\s*<!--\\s*\\*\\/)\\s*[\\r\\n]*/gi,\"\").replace(/\\s*(\\/\\*\\s*\\]\\]>\\s*\\*\\/(-->)?|\\s*\\/\\/\\s*\\]\\]>(-->)?|\\/\\/\\s*(-->)?|\\]\\]>|\\/\\*\\s*-->\\s*\\*\\/|\\s*-->\\s*)\\s*$/g,\"\")}while(m--){n=k[m];o=n.firstChild?n.firstChild.value:\"\";if(l===\"script\"){n.attr(\"type\",(n.attr(\"type\")||\"text/javascript\").replace(/^mce\\-/,\"\"));if(o.length>0){n.firstChild.value=\"// <![CDATA[\\n\"+j(o)+\"\\n// ]]>\"}}else{if(o.length>0){n.firstChild.value=\"<!--\\n\"+j(o)+\"\\n-->\"}}}});c.addNodeFilter(\"#comment\",function(j,k){var l=j.length,m;while(l--){m=j[l];if(m.value.indexOf(\"[CDATA[\")===0){m.name=\"#cdata\";m.type=4;m.value=m.value.replace(/^\\[CDATA\\[|\\]\\]$/g,\"\")}else{if(m.value.indexOf(\"mce:protected \")===0){m.name=\"#text\";m.type=3;m.raw=true;m.value=unescape(m.value).substr(14)}}}});c.addNodeFilter(\"xml:namespace,input\",function(j,k){var l=j.length,m;while(l--){m=j[l];if(m.type===7){m.remove()}else{if(m.type===1){if(k===\"input\"&&!(\"type\" in m.attributes.map)){m.attr(\"type\",\"text\")}}}}});if(e.fix_list_elements){c.addNodeFilter(\"ul,ol\",function(k,l){var m=k.length,n,j;while(m--){n=k[m];j=n.parent;if(j.name===\"ul\"||j.name===\"ol\"){if(n.prev&&n.prev.name===\"li\"){n.prev.append(n)}}}})}c.addAttributeFilter(\"data-mce-src,data-mce-href,data-mce-style\",function(j,k){var l=j.length;while(l--){j[l].attr(k,null)}});return{schema:f,addNodeFilter:c.addNodeFilter,addAttributeFilter:c.addAttributeFilter,onPreProcess:h,onPostProcess:b,serialize:function(o,m){var l,p,k,j,n;if(d&&i.select(\"script,style,select,map\").length>0){n=o.innerHTML;o=o.cloneNode(false);i.setHTML(o,n)}else{o=o.cloneNode(true)}l=o.ownerDocument.implementation;if(l.createHTMLDocument){p=l.createHTMLDocument(\"\");g(o.nodeName==\"BODY\"?o.childNodes:[o],function(q){p.body.appendChild(p.importNode(q,true))});if(o.nodeName!=\"BODY\"){o=p.body.firstChild}else{o=p.body}k=i.doc;i.doc=p}m=m||{};m.format=m.format||\"html\";if(!m.no_events){m.node=o;h.dispatch(self,m)}j=new a.html.Serializer(e,f);m.content=j.serialize(c.parse(a.trim(m.getInner?o.innerHTML:i.getOuterHTML(o)),m));if(!m.cleanup){m.content=m.content.replace(/\\uFEFF/g,\"\")}if(!m.no_events){b.dispatch(self,m)}if(k){i.doc=k}m.node=null;return m.content},addRules:function(j){f.addValidElements(j)},setRules:function(j){f.setValidElements(j)}}}})(tinymce);(function(a){a.dom.ScriptLoader=function(h){var c=0,k=1,i=2,l={},j=[],e={},d=[],g=0,f;function b(m,v){var x=this,q=a.DOM,s,o,r,n;function p(){q.remove(n);if(s){s.onreadystatechange=s.onload=s=null}v()}function u(){if(typeof(console)!==\"undefined\"&&console.log){console.log(\"Failed to load: \"+m)}}n=q.uniqueId();if(a.isIE6){o=new a.util.URI(m);r=location;if(o.host==r.hostname&&o.port==r.port&&(o.protocol+\":\")==r.protocol&&o.protocol.toLowerCase()!=\"file\"){a.util.XHR.send({url:a._addVer(o.getURI()),success:function(y){var t=q.create(\"script\",{type:\"text/javascript\"});t.text=y;document.getElementsByTagName(\"head\")[0].appendChild(t);q.remove(t);p()},error:u});return}}s=document.createElement(\"script\");s.id=n;s.type=\"text/javascript\";s.src=a._addVer(m);if(!a.isIE||a.isIE11){s.onload=p}s.onerror=u;if(!a.isOpera){s.onreadystatechange=function(){var t=s.readyState;if(t==\"complete\"||t==\"loaded\"){p()}}}(document.getElementsByTagName(\"head\")[0]||document.body).appendChild(s)}this.isDone=function(m){return l[m]==i};this.markDone=function(m){l[m]=i};this.add=this.load=function(m,q,n){var o,p=l[m];if(p==f){j.push(m);l[m]=c}if(q){if(!e[m]){e[m]=[]}e[m].push({func:q,scope:n||this})}};this.loadQueue=function(n,m){this.loadScripts(j,n,m)};this.loadScripts=function(m,q,p){var o;function n(r){a.each(e[r],function(s){s.func.call(s.scope)});e[r]=f}d.push({func:q,scope:p||this});o=function(){var r=a.grep(m);m.length=0;a.each(r,function(s){if(l[s]==i){n(s);return}if(l[s]!=k){l[s]=k;g++;b(s,function(){l[s]=i;g--;n(s);o()})}});if(!g){a.each(d,function(s){s.func.call(s.scope)});d.length=0}};o()}};a.ScriptLoader=new a.dom.ScriptLoader()})(tinymce);(function(a){a.dom.RangeUtils=function(c){var b=\"\\uFEFF\";this.walk=function(d,s){var i=d.startContainer,l=d.startOffset,t=d.endContainer,m=d.endOffset,j,g,o,h,r,q,e;e=c.select(\"td.mceSelected,th.mceSelected\");if(e.length>0){a.each(e,function(u){s([u])});return}function f(u){var v;v=u[0];if(v.nodeType===3&&v===i&&l>=v.nodeValue.length){u.splice(0,1)}v=u[u.length-1];if(m===0&&u.length>0&&v===t&&v.nodeType===3){u.splice(u.length-1,1)}return u}function p(x,v,u){var y=[];for(;x&&x!=u;x=x[v]){y.push(x)}return y}function n(v,u){do{if(v.parentNode==u){return v}v=v.parentNode}while(v)}function k(x,v,y){var u=y?\"nextSibling\":\"previousSibling\";for(h=x,r=h.parentNode;h&&h!=v;h=r){r=h.parentNode;q=p(h==x?h:h[u],u);if(q.length){if(!y){q.reverse()}s(f(q))}}}if(i.nodeType==1&&i.hasChildNodes()){i=i.childNodes[l]}if(t.nodeType==1&&t.hasChildNodes()){t=t.childNodes[Math.min(m-1,t.childNodes.length-1)]}if(i==t){return s(f([i]))}j=c.findCommonAncestor(i,t);for(h=i;h;h=h.parentNode){if(h===t){return k(i,j,true)}if(h===j){break}}for(h=t;h;h=h.parentNode){if(h===i){return k(t,j)}if(h===j){break}}g=n(i,j)||i;o=n(t,j)||t;k(i,g,true);q=p(g==i?g:g.nextSibling,\"nextSibling\",o==t?o.nextSibling:o);if(q.length){s(f(q))}k(t,o)};this.split=function(e){var h=e.startContainer,d=e.startOffset,i=e.endContainer,g=e.endOffset;function f(j,k){return j.splitText(k)}if(h==i&&h.nodeType==3){if(d>0&&d<h.nodeValue.length){i=f(h,d);h=i.previousSibling;if(g>d){g=g-d;h=i=f(i,g).previousSibling;g=i.nodeValue.length;d=0}else{g=0}}}else{if(h.nodeType==3&&d>0&&d<h.nodeValue.length){h=f(h,d);d=0}if(i.nodeType==3&&g>0&&g<i.nodeValue.length){i=f(i,g).previousSibling;g=i.nodeValue.length}}return{startContainer:h,startOffset:d,endContainer:i,endOffset:g}}};a.dom.RangeUtils.compareRanges=function(c,b){if(c&&b){if(c.item||c.duplicate){if(c.item&&b.item&&c.item(0)===b.item(0)){return true}if(c.isEqual&&b.isEqual&&b.isEqual(c)){return true}}else{return c.startContainer==b.startContainer&&c.startOffset==b.startOffset}}return false}})(tinymce);(function(b){var a=b.dom.Event,c=b.each;b.create(\"tinymce.ui.KeyboardNavigation\",{KeyboardNavigation:function(e,f){var q=this,n=e.root,m=e.items,o=e.enableUpDown,i=e.enableLeftRight||!e.enableUpDown,l=e.excludeFromTabOrder,k,h,p,d,g;f=f||b.DOM;k=function(r){g=r.target.id};h=function(r){f.setAttrib(r.target.id,\"tabindex\",\"-1\")};d=function(r){var s=f.get(g);f.setAttrib(s,\"tabindex\",\"0\");s.focus()};q.focus=function(){f.get(g).focus()};q.destroy=function(){c(m,function(s){var t=f.get(s.id);f.unbind(t,\"focus\",k);f.unbind(t,\"blur\",h)});var r=f.get(n);f.unbind(r,\"focus\",d);f.unbind(r,\"keydown\",p);m=f=n=q.focus=k=h=p=d=null;q.destroy=function(){}};q.moveFocus=function(v,s){var r=-1,u=q.controls,t;if(!g){return}c(m,function(y,x){if(y.id===g){r=x;return false}});r+=v;if(r<0){r=m.length-1}else{if(r>=m.length){r=0}}t=m[r];f.setAttrib(g,\"tabindex\",\"-1\");f.setAttrib(t.id,\"tabindex\",\"0\");f.get(t.id).focus();if(e.actOnFocus){e.onAction(t.id)}if(s){a.cancel(s)}};p=function(z){var v=37,u=39,y=38,A=40,r=27,t=14,s=13,x=32;switch(z.keyCode){case v:if(i){q.moveFocus(-1)}a.cancel(z);break;case u:if(i){q.moveFocus(1)}a.cancel(z);break;case y:if(o){q.moveFocus(-1)}a.cancel(z);break;case A:if(o){q.moveFocus(1)}a.cancel(z);break;case r:if(e.onCancel){e.onCancel();a.cancel(z)}break;case t:case s:case x:if(e.onAction){e.onAction(g);a.cancel(z)}break}};c(m,function(t,r){var s,u;if(!t.id){t.id=f.uniqueId(\"_mce_item_\")}u=f.get(t.id);if(l){f.bind(u,\"blur\",h);s=\"-1\"}else{s=(r===0?\"0\":\"-1\")}u.setAttribute(\"tabindex\",s);f.bind(u,\"focus\",k)});if(m[0]){g=m[0].id}f.setAttrib(n,\"tabindex\",\"-1\");var j=f.get(n);f.bind(j,\"focus\",d);f.bind(j,\"keydown\",p)}})})(tinymce);(function(c){var b=c.DOM,a=c.is;c.create(\"tinymce.ui.Control\",{Control:function(f,e,d){this.id=f;this.settings=e=e||{};this.rendered=false;this.onRender=new c.util.Dispatcher(this);this.classPrefix=\"\";this.scope=e.scope||this;this.disabled=0;this.active=0;this.editor=d},setAriaProperty:function(f,e){var d=b.get(this.id+\"_aria\")||b.get(this.id);if(d){b.setAttrib(d,\"aria-\"+f,!!e)}},focus:function(){b.get(this.id).focus()},setDisabled:function(d){if(d!=this.disabled){this.setAriaProperty(\"disabled\",d);this.setState(\"Disabled\",d);this.setState(\"Enabled\",!d);this.disabled=d}},isDisabled:function(){return this.disabled},setActive:function(d){if(d!=this.active){this.setState(\"Active\",d);this.active=d;this.setAriaProperty(\"pressed\",d)}},isActive:function(){return this.active},setState:function(f,d){var e=b.get(this.id);f=this.classPrefix+f;if(d){b.addClass(e,f)}else{b.removeClass(e,f)}},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(d){b.setHTML(d,this.renderHTML())},postRender:function(){var e=this,d;if(a(e.disabled)){d=e.disabled;e.disabled=-1;e.setDisabled(d)}if(a(e.active)){d=e.active;e.active=-1;e.setActive(d)}},remove:function(){b.remove(this.id);this.destroy()},destroy:function(){c.dom.Event.clear(this.id)}})})(tinymce);tinymce.create(\"tinymce.ui.Container:tinymce.ui.Control\",{Container:function(c,b,a){this.parent(c,b,a);this.controls=[];this.lookup={}},add:function(a){this.lookup[a.id]=a;this.controls.push(a);return a},get:function(a){return this.lookup[a]}});tinymce.create(\"tinymce.ui.Separator:tinymce.ui.Control\",{Separator:function(b,a){this.parent(b,a);this.classPrefix=\"mceSeparator\";this.setDisabled(true)},renderHTML:function(){return tinymce.DOM.createHTML(\"span\",{\"class\":this.classPrefix,role:\"separator\",\"aria-orientation\":\"vertical\",tabindex:\"-1\"})}});(function(d){var c=d.is,b=d.DOM,e=d.each,a=d.walk;d.create(\"tinymce.ui.MenuItem:tinymce.ui.Control\",{MenuItem:function(g,f){this.parent(g,f);this.classPrefix=\"mceMenuItem\"},setSelected:function(f){this.setState(\"Selected\",f);this.setAriaProperty(\"checked\",!!f);this.selected=f},isSelected:function(){return this.selected},postRender:function(){var f=this;f.parent();if(c(f.selected)){f.setSelected(f.selected)}}})})(tinymce);(function(d){var c=d.is,b=d.DOM,e=d.each,a=d.walk;d.create(\"tinymce.ui.Menu:tinymce.ui.MenuItem\",{Menu:function(h,g){var f=this;f.parent(h,g);f.items={};f.collapsed=false;f.menuCount=0;f.onAddItem=new d.util.Dispatcher(this)},expand:function(g){var f=this;if(g){a(f,function(h){if(h.expand){h.expand()}},\"items\",f)}f.collapsed=false},collapse:function(g){var f=this;if(g){a(f,function(h){if(h.collapse){h.collapse()}},\"items\",f)}f.collapsed=true},isCollapsed:function(){return this.collapsed},add:function(f){if(!f.settings){f=new d.ui.MenuItem(f.id||b.uniqueId(),f)}this.onAddItem.dispatch(this,f);return this.items[f.id]=f},addSeparator:function(){return this.add({separator:true})},addMenu:function(f){if(!f.collapse){f=this.createMenu(f)}this.menuCount++;return this.add(f)},hasMenus:function(){return this.menuCount!==0},remove:function(f){delete this.items[f.id]},removeAll:function(){var f=this;a(f,function(g){if(g.removeAll){g.removeAll()}else{g.remove()}g.destroy()},\"items\",f);f.items={}},createMenu:function(g){var f=new d.ui.Menu(g.id||b.uniqueId(),g);f.onAddItem.add(this.onAddItem.dispatch,this.onAddItem);return f}})})(tinymce);(function(e){var d=e.is,c=e.DOM,f=e.each,a=e.dom.Event,b=e.dom.Element;e.create(\"tinymce.ui.DropMenu:tinymce.ui.Menu\",{DropMenu:function(h,g){g=g||{};g.container=g.container||c.doc.body;g.offset_x=g.offset_x||0;g.offset_y=g.offset_y||0;g.vp_offset_x=g.vp_offset_x||0;g.vp_offset_y=g.vp_offset_y||0;if(d(g.icons)&&!g.icons){g[\"class\"]+=\" mceNoIcons\"}this.parent(h,g);this.onShowMenu=new e.util.Dispatcher(this);this.onHideMenu=new e.util.Dispatcher(this);this.classPrefix=\"mceMenu\"},createMenu:function(j){var h=this,i=h.settings,g;j.container=j.container||i.container;j.parent=h;j.constrain=j.constrain||i.constrain;j[\"class\"]=j[\"class\"]||i[\"class\"];j.vp_offset_x=j.vp_offset_x||i.vp_offset_x;j.vp_offset_y=j.vp_offset_y||i.vp_offset_y;j.keyboard_focus=i.keyboard_focus;g=new e.ui.DropMenu(j.id||c.uniqueId(),j);g.onAddItem.add(h.onAddItem.dispatch,h.onAddItem);return g},focus:function(){var g=this;if(g.keyboardNav){g.keyboardNav.focus()}},update:function(){var i=this,j=i.settings,g=c.get(\"menu_\"+i.id+\"_tbl\"),l=c.get(\"menu_\"+i.id+\"_co\"),h,k;h=j.max_width?Math.min(g.offsetWidth,j.max_width):g.offsetWidth;k=j.max_height?Math.min(g.offsetHeight,j.max_height):g.offsetHeight;if(!c.boxModel){i.element.setStyles({width:h+2,height:k+2})}else{i.element.setStyles({width:h,height:k})}if(j.max_width){c.setStyle(l,\"width\",h)}if(j.max_height){c.setStyle(l,\"height\",k);if(g.clientHeight<j.max_height){c.setStyle(l,\"overflow\",\"hidden\")}}},showMenu:function(p,n,r){var z=this,A=z.settings,o,g=c.getViewPort(),u,l,v,q,i=2,k,j,m=z.classPrefix;z.collapse(1);if(z.isMenuVisible){return}if(!z.rendered){o=c.add(z.settings.container,z.renderNode());f(z.items,function(h){h.postRender()});z.element=new b(\"menu_\"+z.id,{blocker:1,container:A.container})}else{o=c.get(\"menu_\"+z.id)}if(!e.isOpera){c.setStyles(o,{left:-65535,top:-65535})}c.show(o);z.update();p+=A.offset_x||0;n+=A.offset_y||0;g.w-=4;g.h-=4;if(A.constrain){u=o.clientWidth-i;l=o.clientHeight-i;v=g.x+g.w;q=g.y+g.h;if((p+A.vp_offset_x+u)>v){p=r?r-u:Math.max(0,(v-A.vp_offset_x)-u)}if((n+A.vp_offset_y+l)>q){n=Math.max(0,(q-A.vp_offset_y)-l)}}c.setStyles(o,{left:p,top:n});z.element.update();z.isMenuVisible=1;z.mouseClickFunc=a.add(o,\"click\",function(s){var h;s=s.target;if(s&&(s=c.getParent(s,\"tr\"))&&!c.hasClass(s,m+\"ItemSub\")){h=z.items[s.id];if(h.isDisabled()){return}k=z;while(k){if(k.hideMenu){k.hideMenu()}k=k.settings.parent}if(h.settings.onclick){h.settings.onclick(s)}return false}});if(z.hasMenus()){z.mouseOverFunc=a.add(o,\"mouseover\",function(x){var h,t,s;x=x.target;if(x&&(x=c.getParent(x,\"tr\"))){h=z.items[x.id];if(z.lastMenu){z.lastMenu.collapse(1)}if(h.isDisabled()){return}if(x&&c.hasClass(x,m+\"ItemSub\")){t=c.getRect(x);h.showMenu((t.x+t.w-i),t.y-i,t.x);z.lastMenu=h;c.addClass(c.get(h.id).firstChild,m+\"ItemActive\")}}})}a.add(o,\"keydown\",z._keyHandler,z);z.onShowMenu.dispatch(z);if(A.keyboard_focus){z._setupKeyboardNav()}},hideMenu:function(j){var g=this,i=c.get(\"menu_\"+g.id),h;if(!g.isMenuVisible){return}if(g.keyboardNav){g.keyboardNav.destroy()}a.remove(i,\"mouseover\",g.mouseOverFunc);a.remove(i,\"click\",g.mouseClickFunc);a.remove(i,\"keydown\",g._keyHandler);c.hide(i);g.isMenuVisible=0;if(!j){g.collapse(1)}if(g.element){g.element.hide()}if(h=c.get(g.id)){c.removeClass(h.firstChild,g.classPrefix+\"ItemActive\")}g.onHideMenu.dispatch(g)},add:function(i){var g=this,h;i=g.parent(i);if(g.isRendered&&(h=c.get(\"menu_\"+g.id))){g._add(c.select(\"tbody\",h)[0],i)}return i},collapse:function(g){this.parent(g);this.hideMenu(1)},remove:function(g){c.remove(g.id);this.destroy();return this.parent(g)},destroy:function(){var g=this,h=c.get(\"menu_\"+g.id);if(g.keyboardNav){g.keyboardNav.destroy()}a.remove(h,\"mouseover\",g.mouseOverFunc);a.remove(c.select(\"a\",h),\"focus\",g.mouseOverFunc);a.remove(h,\"click\",g.mouseClickFunc);a.remove(h,\"keydown\",g._keyHandler);if(g.element){g.element.remove()}c.remove(h)},renderNode:function(){var i=this,j=i.settings,l,h,k,g;g=c.create(\"div\",{role:\"listbox\",id:\"menu_\"+i.id,\"class\":j[\"class\"],style:\"position:absolute;left:0;top:0;z-index:200000;outline:0\"});if(i.settings.parent){c.setAttrib(g,\"aria-parent\",\"menu_\"+i.settings.parent.id)}k=c.add(g,\"div\",{role:\"presentation\",id:\"menu_\"+i.id+\"_co\",\"class\":i.classPrefix+(j[\"class\"]?\" \"+j[\"class\"]:\"\")});i.element=new b(\"menu_\"+i.id,{blocker:1,container:j.container});if(j.menu_line){c.add(k,\"span\",{\"class\":i.classPrefix+\"Line\"})}l=c.add(k,\"table\",{role:\"presentation\",id:\"menu_\"+i.id+\"_tbl\",border:0,cellPadding:0,cellSpacing:0});h=c.add(l,\"tbody\");f(i.items,function(m){i._add(h,m)});i.rendered=true;return g},_setupKeyboardNav:function(){var i,h,g=this;i=c.get(\"menu_\"+g.id);h=c.select(\"a[role=option]\",\"menu_\"+g.id);h.splice(0,0,i);g.keyboardNav=new e.ui.KeyboardNavigation({root:\"menu_\"+g.id,items:h,onCancel:function(){g.hideMenu()},enableUpDown:true});i.focus()},_keyHandler:function(g){var h=this,i;switch(g.keyCode){case 37:if(h.settings.parent){h.hideMenu();h.settings.parent.focus();a.cancel(g)}break;case 39:if(h.mouseOverFunc){h.mouseOverFunc(g)}break}},_add:function(j,h){var i,q=h.settings,p,l,k,m=this.classPrefix,g;if(q.separator){l=c.add(j,\"tr\",{id:h.id,\"class\":m+\"ItemSeparator\"});c.add(l,\"td\",{\"class\":m+\"ItemSeparator\"});if(i=l.previousSibling){c.addClass(i,\"mceLast\")}return}i=l=c.add(j,\"tr\",{id:h.id,\"class\":m+\"Item \"+m+\"ItemEnabled\"});i=k=c.add(i,q.titleItem?\"th\":\"td\");i=p=c.add(i,\"a\",{id:h.id+\"_aria\",role:q.titleItem?\"presentation\":\"option\",href:\"javascript:;\",onclick:\"return false;\",onmousedown:\"return false;\"});if(q.parent){c.setAttrib(p,\"aria-haspopup\",\"true\");c.setAttrib(p,\"aria-owns\",\"menu_\"+h.id)}c.addClass(k,q[\"class\"]);g=c.add(i,\"span\",{\"class\":\"mceIcon\"+(q.icon?\" mce_\"+q.icon:\"\")});if(q.icon_src){c.add(g,\"img\",{src:q.icon_src})}i=c.add(i,q.element||\"span\",{\"class\":\"mceText\",title:h.settings.title},h.settings.title);if(h.settings.style){if(typeof h.settings.style==\"function\"){h.settings.style=h.settings.style()}c.setAttrib(i,\"style\",h.settings.style)}if(j.childNodes.length==1){c.addClass(l,\"mceFirst\")}if((i=l.previousSibling)&&c.hasClass(i,m+\"ItemSeparator\")){c.addClass(l,\"mceFirst\")}if(h.collapse){c.addClass(l,m+\"ItemSub\")}if(i=l.previousSibling){c.removeClass(i,\"mceLast\")}c.addClass(l,\"mceLast\")}})})(tinymce);(function(b){var a=b.DOM;b.create(\"tinymce.ui.Button:tinymce.ui.Control\",{Button:function(e,d,c){this.parent(e,d,c);this.classPrefix=\"mceButton\"},renderHTML:function(){var f=this.classPrefix,e=this.settings,d,c;c=a.encode(e.label||\"\");d='<a role=\"button\" id=\"'+this.id+'\" href=\"javascript:;\" class=\"'+f+\" \"+f+\"Enabled \"+e[\"class\"]+(c?\" \"+f+\"Labeled\":\"\")+'\" onmousedown=\"return false;\" onclick=\"return false;\" aria-labelledby=\"'+this.id+'_voice\" title=\"'+a.encode(e.title)+'\">';if(e.image&&!(this.editor&&this.editor.forcedHighContrastMode)){d+='<span class=\"mceIcon '+e[\"class\"]+'\"><img class=\"mceIcon\" src=\"'+e.image+'\" alt=\"'+a.encode(e.title)+'\" /></span>'+(c?'<span class=\"'+f+'Label\">'+c+\"</span>\":\"\")}else{d+='<span class=\"mceIcon '+e[\"class\"]+'\"></span>'+(c?'<span class=\"'+f+'Label\">'+c+\"</span>\":\"\")}d+='<span class=\"mceVoiceLabel mceIconOnly\" style=\"display: none;\" id=\"'+this.id+'_voice\">'+e.title+\"</span>\";d+=\"</a>\";return d},postRender:function(){var d=this,e=d.settings,c;if(b.isIE&&d.editor){b.dom.Event.add(d.id,\"mousedown\",function(f){var g=d.editor.selection.getNode().nodeName;c=g===\"IMG\"?d.editor.selection.getBookmark():null})}b.dom.Event.add(d.id,\"click\",function(f){if(!d.isDisabled()){if(b.isIE&&d.editor&&c!==null){d.editor.selection.moveToBookmark(c)}return e.onclick.call(e.scope,f)}});b.dom.Event.add(d.id,\"keydown\",function(f){if(!d.isDisabled()&&f.keyCode==b.VK.SPACEBAR){b.dom.Event.cancel(f);return e.onclick.call(e.scope,f)}})}})})(tinymce);(function(e){var d=e.DOM,b=e.dom.Event,f=e.each,a=e.util.Dispatcher,c;e.create(\"tinymce.ui.ListBox:tinymce.ui.Control\",{ListBox:function(j,i,g){var h=this;h.parent(j,i,g);h.items=[];h.onChange=new a(h);h.onPostRender=new a(h);h.onAdd=new a(h);h.onRenderMenu=new e.util.Dispatcher(this);h.classPrefix=\"mceListBox\";h.marked={}},select:function(h){var g=this,j,i;g.marked={};if(h==c){return g.selectByIndex(-1)}if(h&&typeof(h)==\"function\"){i=h}else{i=function(k){return k==h}}if(h!=g.selectedValue){f(g.items,function(l,k){if(i(l.value)){j=1;g.selectByIndex(k);return false}});if(!j){g.selectByIndex(-1)}}},selectByIndex:function(g){var i=this,j,k,h;i.marked={};if(g!=i.selectedIndex){j=d.get(i.id+\"_text\");h=d.get(i.id+\"_voiceDesc\");k=i.items[g];if(k){i.selectedValue=k.value;i.selectedIndex=g;d.setHTML(j,d.encode(k.title));d.setHTML(h,i.settings.title+\" - \"+k.title);d.removeClass(j,\"mceTitle\");d.setAttrib(i.id,\"aria-valuenow\",k.title)}else{d.setHTML(j,d.encode(i.settings.title));d.setHTML(h,d.encode(i.settings.title));d.addClass(j,\"mceTitle\");i.selectedValue=i.selectedIndex=null;d.setAttrib(i.id,\"aria-valuenow\",i.settings.title)}j=0}},mark:function(g){this.marked[g]=true},add:function(j,g,i){var h=this;i=i||{};i=e.extend(i,{title:j,value:g});h.items.push(i);h.onAdd.dispatch(h,i)},getLength:function(){return this.items.length},renderHTML:function(){var j=\"\",g=this,i=g.settings,k=g.classPrefix;j='<span role=\"listbox\" aria-haspopup=\"true\" aria-labelledby=\"'+g.id+'_voiceDesc\" aria-describedby=\"'+g.id+'_voiceDesc\"><table role=\"presentation\" tabindex=\"0\" id=\"'+g.id+'\" cellpadding=\"0\" cellspacing=\"0\" class=\"'+k+\" \"+k+\"Enabled\"+(i[\"class\"]?(\" \"+i[\"class\"]):\"\")+'\"><tbody><tr>';j+=\"<td>\"+d.createHTML(\"span\",{id:g.id+\"_voiceDesc\",\"class\":\"voiceLabel\",style:\"display:none;\"},g.settings.title);j+=d.createHTML(\"a\",{id:g.id+\"_text\",tabindex:-1,href:\"javascript:;\",\"class\":\"mceText\",onclick:\"return false;\",onmousedown:\"return false;\"},d.encode(g.settings.title))+\"</td>\";j+=\"<td>\"+d.createHTML(\"a\",{id:g.id+\"_open\",tabindex:-1,href:\"javascript:;\",\"class\":\"mceOpen\",onclick:\"return false;\",onmousedown:\"return false;\"},'<span><span style=\"display:none;\" class=\"mceIconOnly\" aria-hidden=\"true\">\\u25BC</span></span>')+\"</td>\";j+=\"</tr></tbody></table></span>\";return j},showMenu:function(){var h=this,j,i=d.get(this.id),g;if(h.isDisabled()||h.items.length===0){return}if(h.menu&&h.menu.isMenuVisible){return h.hideMenu()}if(!h.isMenuRendered){h.renderMenu();h.isMenuRendered=true}j=d.getPos(i);g=h.menu;g.settings.offset_x=j.x;g.settings.offset_y=j.y;g.settings.keyboard_focus=!e.isOpera;f(h.items,function(k){if(g.items[k.id]){g.items[k.id].setSelected(0)}});f(h.items,function(k){if(g.items[k.id]&&h.marked[k.value]){g.items[k.id].setSelected(1)}if(k.value===h.selectedValue){g.items[k.id].setSelected(1)}});g.showMenu(0,i.clientHeight);b.add(d.doc,\"mousedown\",h.hideMenu,h);d.addClass(h.id,h.classPrefix+\"Selected\")},hideMenu:function(h){var g=this;if(g.menu&&g.menu.isMenuVisible){d.removeClass(g.id,g.classPrefix+\"Selected\");if(h&&h.type==\"mousedown\"&&(h.target.id==g.id+\"_text\"||h.target.id==g.id+\"_open\")){return}if(!h||!d.getParent(h.target,\".mceMenu\")){d.removeClass(g.id,g.classPrefix+\"Selected\");b.remove(d.doc,\"mousedown\",g.hideMenu,g);g.menu.hideMenu()}}},renderMenu:function(){var h=this,g;g=h.settings.control_manager.createDropMenu(h.id+\"_menu\",{menu_line:1,\"class\":h.classPrefix+\"Menu mceNoIcons\",max_width:250,max_height:150});g.onHideMenu.add(function(){h.hideMenu();h.focus()});g.add({title:h.settings.title,\"class\":\"mceMenuItemTitle\",onclick:function(){if(h.settings.onselect(\"\")!==false){h.select(\"\")}}});f(h.items,function(i){if(i.value===c){g.add({title:i.title,role:\"option\",\"class\":\"mceMenuItemTitle\",onclick:function(){if(h.settings.onselect(\"\")!==false){h.select(\"\")}}})}else{i.id=d.uniqueId();i.role=\"option\";i.onclick=function(){if(h.settings.onselect(i.value)!==false){h.select(i.value)}};g.add(i)}});h.onRenderMenu.dispatch(h,g);h.menu=g},postRender:function(){var g=this,h=g.classPrefix;b.add(g.id,\"click\",g.showMenu,g);b.add(g.id,\"keydown\",function(i){if(i.keyCode==32){g.showMenu(i);b.cancel(i)}});b.add(g.id,\"focus\",function(){if(!g._focused){g.keyDownHandler=b.add(g.id,\"keydown\",function(i){if(i.keyCode==40){g.showMenu();b.cancel(i)}});g.keyPressHandler=b.add(g.id,\"keypress\",function(j){var i;if(j.keyCode==13){i=g.selectedValue;g.selectedValue=null;b.cancel(j);g.settings.onselect(i)}})}g._focused=1});b.add(g.id,\"blur\",function(){b.remove(g.id,\"keydown\",g.keyDownHandler);b.remove(g.id,\"keypress\",g.keyPressHandler);g._focused=0});if(e.isIE6||!d.boxModel){b.add(g.id,\"mouseover\",function(){if(!d.hasClass(g.id,h+\"Disabled\")){d.addClass(g.id,h+\"Hover\")}});b.add(g.id,\"mouseout\",function(){if(!d.hasClass(g.id,h+\"Disabled\")){d.removeClass(g.id,h+\"Hover\")}})}g.onPostRender.dispatch(g,d.get(g.id))},destroy:function(){this.parent();b.clear(this.id+\"_text\");b.clear(this.id+\"_open\")}})})(tinymce);(function(e){var d=e.DOM,b=e.dom.Event,f=e.each,a=e.util.Dispatcher,c;e.create(\"tinymce.ui.NativeListBox:tinymce.ui.ListBox\",{NativeListBox:function(h,g){this.parent(h,g);this.classPrefix=\"mceNativeListBox\"},setDisabled:function(g){d.get(this.id).disabled=g;this.setAriaProperty(\"disabled\",g)},isDisabled:function(){return d.get(this.id).disabled},select:function(h){var g=this,j,i;if(h==c){return g.selectByIndex(-1)}if(h&&typeof(h)==\"function\"){i=h}else{i=function(k){return k==h}}if(h!=g.selectedValue){f(g.items,function(l,k){if(i(l.value)){j=1;g.selectByIndex(k);return false}});if(!j){g.selectByIndex(-1)}}},selectByIndex:function(g){d.get(this.id).selectedIndex=g+1;this.selectedValue=this.items[g]?this.items[g].value:null},add:function(k,h,g){var j,i=this;g=g||{};g.value=h;if(i.isRendered()){d.add(d.get(this.id),\"option\",g,k)}j={title:k,value:h,attribs:g};i.items.push(j);i.onAdd.dispatch(i,j)},getLength:function(){return this.items.length},renderHTML:function(){var i,g=this;i=d.createHTML(\"option\",{value:\"\"},\"-- \"+g.settings.title+\" --\");f(g.items,function(h){i+=d.createHTML(\"option\",{value:h.value},h.title)});i=d.createHTML(\"select\",{id:g.id,\"class\":\"mceNativeListBox\",\"aria-labelledby\":g.id+\"_aria\"},i);i+=d.createHTML(\"span\",{id:g.id+\"_aria\",style:\"display: none\"},g.settings.title);return i},postRender:function(){var h=this,i,j=true;h.rendered=true;function g(l){var k=h.items[l.target.selectedIndex-1];if(k&&(k=k.value)){h.onChange.dispatch(h,k);if(h.settings.onselect){h.settings.onselect(k)}}}b.add(h.id,\"change\",g);b.add(h.id,\"keydown\",function(q){var n,p=37,m=39,l=38,r=40,k=13,o=32;b.remove(h.id,\"change\",i);j=false;n=b.add(h.id,\"blur\",function(){if(j){return}j=true;b.add(h.id,\"change\",g);b.remove(h.id,\"blur\",n)});if(q.keyCode==k||q.keyCode==o){g(q);return b.cancel(q)}else{if(q.keyCode==r||q.keyCode==l){q.stopImmediatePropagation()}}});h.onPostRender.dispatch(h,d.get(h.id))}})})(tinymce);(function(c){var b=c.DOM,a=c.dom.Event,d=c.each;c.create(\"tinymce.ui.MenuButton:tinymce.ui.Button\",{MenuButton:function(g,f,e){this.parent(g,f,e);this.onRenderMenu=new c.util.Dispatcher(this);f.menu_container=f.menu_container||b.doc.body},showMenu:function(){var g=this,j,i,h=b.get(g.id),f;if(g.isDisabled()){return}if(!g.isMenuRendered){g.renderMenu();g.isMenuRendered=true}if(g.isMenuVisible){return g.hideMenu()}j=b.getPos(g.settings.menu_container);i=b.getPos(h);f=g.menu;f.settings.offset_x=i.x;f.settings.offset_y=i.y;f.settings.vp_offset_x=i.x;f.settings.vp_offset_y=i.y;f.settings.keyboard_focus=g._focused;f.showMenu(0,h.firstChild.clientHeight);a.add(b.doc,\"mousedown\",g.hideMenu,g);g.setState(\"Selected\",1);g.isMenuVisible=1},renderMenu:function(){var f=this,e;e=f.settings.control_manager.createDropMenu(f.id+\"_menu\",{menu_line:1,\"class\":this.classPrefix+\"Menu\",icons:f.settings.icons});e.onHideMenu.add(function(){f.hideMenu();f.focus()});f.onRenderMenu.dispatch(f,e);f.menu=e},hideMenu:function(g){var f=this;if(g&&g.type==\"mousedown\"&&b.getParent(g.target,function(h){return h.id===f.id||h.id===f.id+\"_open\"})){return}if(!g||!b.getParent(g.target,\".mceMenu\")){f.setState(\"Selected\",0);a.remove(b.doc,\"mousedown\",f.hideMenu,f);if(f.menu){f.menu.hideMenu()}}f.isMenuVisible=0},postRender:function(){var e=this,f=e.settings;a.add(e.id,\"click\",function(){if(!e.isDisabled()){if(f.onclick){f.onclick(e.value)}e.showMenu()}})}})})(tinymce);(function(c){var b=c.DOM,a=c.dom.Event,d=c.each;c.create(\"tinymce.ui.SplitButton:tinymce.ui.MenuButton\",{SplitButton:function(g,f,e){this.parent(g,f,e);this.classPrefix=\"mceSplitButton\"},renderHTML:function(){var i,f=this,g=f.settings,e;i=\"<tbody><tr>\";if(g.image){e=b.createHTML(\"img \",{src:g.image,role:\"presentation\",\"class\":\"mceAction \"+g[\"class\"]})}else{e=b.createHTML(\"span\",{\"class\":\"mceAction \"+g[\"class\"]},\"\")}e+=b.createHTML(\"span\",{\"class\":\"mceVoiceLabel mceIconOnly\",id:f.id+\"_voice\",style:\"display:none;\"},g.title);i+=\"<td >\"+b.createHTML(\"a\",{role:\"button\",id:f.id+\"_action\",tabindex:\"-1\",href:\"javascript:;\",\"class\":\"mceAction \"+g[\"class\"],onclick:\"return false;\",onmousedown:\"return false;\",title:g.title},e)+\"</td>\";e=b.createHTML(\"span\",{\"class\":\"mceOpen \"+g[\"class\"]},'<span style=\"display:none;\" class=\"mceIconOnly\" aria-hidden=\"true\">\\u25BC</span>');i+=\"<td >\"+b.createHTML(\"a\",{role:\"button\",id:f.id+\"_open\",tabindex:\"-1\",href:\"javascript:;\",\"class\":\"mceOpen \"+g[\"class\"],onclick:\"return false;\",onmousedown:\"return false;\",title:g.title},e)+\"</td>\";i+=\"</tr></tbody>\";i=b.createHTML(\"table\",{role:\"presentation\",\"class\":\"mceSplitButton mceSplitButtonEnabled \"+g[\"class\"],cellpadding:\"0\",cellspacing:\"0\",title:g.title},i);return b.createHTML(\"div\",{id:f.id,role:\"button\",tabindex:\"0\",\"aria-labelledby\":f.id+\"_voice\",\"aria-haspopup\":\"true\"},i)},postRender:function(){var e=this,g=e.settings,f;if(g.onclick){f=function(h){if(!e.isDisabled()){g.onclick(e.value);a.cancel(h)}};a.add(e.id+\"_action\",\"click\",f);a.add(e.id,[\"click\",\"keydown\"],function(h){var k=32,m=14,i=13,j=38,l=40;if((h.keyCode===32||h.keyCode===13||h.keyCode===14)&&!h.altKey&&!h.ctrlKey&&!h.metaKey){f();a.cancel(h)}else{if(h.type===\"click\"||h.keyCode===l){e.showMenu();a.cancel(h)}}})}a.add(e.id+\"_open\",\"click\",function(h){e.showMenu();a.cancel(h)});a.add([e.id,e.id+\"_open\"],\"focus\",function(){e._focused=1});a.add([e.id,e.id+\"_open\"],\"blur\",function(){e._focused=0});if(c.isIE6||!b.boxModel){a.add(e.id,\"mouseover\",function(){if(!b.hasClass(e.id,\"mceSplitButtonDisabled\")){b.addClass(e.id,\"mceSplitButtonHover\")}});a.add(e.id,\"mouseout\",function(){if(!b.hasClass(e.id,\"mceSplitButtonDisabled\")){b.removeClass(e.id,\"mceSplitButtonHover\")}})}},destroy:function(){this.parent();a.clear(this.id+\"_action\");a.clear(this.id+\"_open\");a.clear(this.id)}})})(tinymce);(function(d){var c=d.DOM,a=d.dom.Event,b=d.is,e=d.each;d.create(\"tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton\",{ColorSplitButton:function(i,h,f){var g=this;g.parent(i,h,f);g.settings=h=d.extend({colors:\"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF\",grid_width:8,default_color:\"#888888\"},g.settings);g.onShowMenu=new d.util.Dispatcher(g);g.onHideMenu=new d.util.Dispatcher(g);g.value=h.default_color},showMenu:function(){var f=this,g,j,i,h;if(f.isDisabled()){return}if(!f.isMenuRendered){f.renderMenu();f.isMenuRendered=true}if(f.isMenuVisible){return f.hideMenu()}i=c.get(f.id);c.show(f.id+\"_menu\");c.addClass(i,\"mceSplitButtonSelected\");h=c.getPos(i);c.setStyles(f.id+\"_menu\",{left:h.x,top:h.y+i.firstChild.clientHeight,zIndex:200000});i=0;a.add(c.doc,\"mousedown\",f.hideMenu,f);f.onShowMenu.dispatch(f);if(f._focused){f._keyHandler=a.add(f.id+\"_menu\",\"keydown\",function(k){if(k.keyCode==27){f.hideMenu()}});c.select(\"a\",f.id+\"_menu\")[0].focus()}f.keyboardNav=new d.ui.KeyboardNavigation({root:f.id+\"_menu\",items:c.select(\"a\",f.id+\"_menu\"),onCancel:function(){f.hideMenu();f.focus()}});f.keyboardNav.focus();f.isMenuVisible=1},hideMenu:function(g){var f=this;if(f.isMenuVisible){if(g&&g.type==\"mousedown\"&&c.getParent(g.target,function(h){return h.id===f.id+\"_open\"})){return}if(!g||!c.getParent(g.target,\".mceSplitButtonMenu\")){c.removeClass(f.id,\"mceSplitButtonSelected\");a.remove(c.doc,\"mousedown\",f.hideMenu,f);a.remove(f.id+\"_menu\",\"keydown\",f._keyHandler);c.hide(f.id+\"_menu\")}f.isMenuVisible=0;f.onHideMenu.dispatch();f.keyboardNav.destroy()}},renderMenu:function(){var p=this,h,k=0,q=p.settings,g,j,l,o,f;o=c.add(q.menu_container,\"div\",{role:\"listbox\",id:p.id+\"_menu\",\"class\":q.menu_class+\" \"+q[\"class\"],style:\"position:absolute;left:0;top:-1000px;\"});h=c.add(o,\"div\",{\"class\":q[\"class\"]+\" mceSplitButtonMenu\"});c.add(h,\"span\",{\"class\":\"mceMenuLine\"});g=c.add(h,\"table\",{role:\"presentation\",\"class\":\"mceColorSplitMenu\"});j=c.add(g,\"tbody\");k=0;e(b(q.colors,\"array\")?q.colors:q.colors.split(\",\"),function(m){m=m.replace(/^#/,\"\");if(!k--){l=c.add(j,\"tr\");k=q.grid_width-1}g=c.add(l,\"td\");var i={href:\"javascript:;\",style:{backgroundColor:\"#\"+m},title:p.editor.getLang(\"colors.\"+m,m),\"data-mce-color\":\"#\"+m};if(!d.isIE){i.role=\"option\"}g=c.add(g,\"a\",i);if(p.editor.forcedHighContrastMode){g=c.add(g,\"canvas\",{width:16,height:16,\"aria-hidden\":\"true\"});if(g.getContext&&(f=g.getContext(\"2d\"))){f.fillStyle=\"#\"+m;f.fillRect(0,0,16,16)}else{c.remove(g)}}});if(q.more_colors_func){g=c.add(j,\"tr\");g=c.add(g,\"td\",{colspan:q.grid_width,\"class\":\"mceMoreColors\"});g=c.add(g,\"a\",{role:\"option\",id:p.id+\"_more\",href:\"javascript:;\",onclick:\"return false;\",\"class\":\"mceMoreColors\"},q.more_colors_title);a.add(g,\"click\",function(i){q.more_colors_func.call(q.more_colors_scope||this);return a.cancel(i)})}c.addClass(h,\"mceColorSplitMenu\");a.add(p.id+\"_menu\",\"mousedown\",function(i){return a.cancel(i)});a.add(p.id+\"_menu\",\"click\",function(i){var m;i=c.getParent(i.target,\"a\",j);if(i&&i.nodeName.toLowerCase()==\"a\"&&(m=i.getAttribute(\"data-mce-color\"))){p.setColor(m)}return false});return o},setColor:function(f){this.displayColor(f);this.hideMenu();this.settings.onselect(f)},displayColor:function(g){var f=this;c.setStyle(f.id+\"_preview\",\"backgroundColor\",g);f.value=g},postRender:function(){var f=this,g=f.id;f.parent();c.add(g+\"_action\",\"div\",{id:g+\"_preview\",\"class\":\"mceColorPreview\"});c.setStyle(f.id+\"_preview\",\"backgroundColor\",f.value)},destroy:function(){var f=this;f.parent();a.clear(f.id+\"_menu\");a.clear(f.id+\"_more\");c.remove(f.id+\"_menu\");if(f.keyboardNav){f.keyboardNav.destroy()}}})})(tinymce);(function(b){var d=b.DOM,c=b.each,a=b.dom.Event;b.create(\"tinymce.ui.ToolbarGroup:tinymce.ui.Container\",{renderHTML:function(){var f=this,i=[],e=f.controls,j=b.each,g=f.settings;i.push('<div id=\"'+f.id+'\" role=\"group\" aria-labelledby=\"'+f.id+'_voice\">');i.push(\"<span role='application'>\");i.push('<span id=\"'+f.id+'_voice\" class=\"mceVoiceLabel\" style=\"display:none;\">'+d.encode(g.name)+\"</span>\");j(e,function(h){i.push(h.renderHTML())});i.push(\"</span>\");i.push(\"</div>\");return i.join(\"\")},focus:function(){var e=this;d.get(e.id).focus()},postRender:function(){var f=this,e=[];c(f.controls,function(g){c(g.controls,function(h){if(h.id){e.push(h)}})});f.keyNav=new b.ui.KeyboardNavigation({root:f.id,items:e,onCancel:function(){if(b.isWebKit){d.get(f.editor.id+\"_ifr\").focus()}f.editor.focus()},excludeFromTabOrder:!f.settings.tab_focus_toolbar})},destroy:function(){var e=this;e.parent();e.keyNav.destroy();a.clear(e.id)}})})(tinymce);(function(a){var c=a.DOM,b=a.each;a.create(\"tinymce.ui.Toolbar:tinymce.ui.Container\",{renderHTML:function(){var m=this,f=\"\",j,k,n=m.settings,e,d,g,l;l=m.controls;for(e=0;e<l.length;e++){k=l[e];d=l[e-1];g=l[e+1];if(e===0){j=\"mceToolbarStart\";if(k.Button){j+=\" mceToolbarStartButton\"}else{if(k.SplitButton){j+=\" mceToolbarStartSplitButton\"}else{if(k.ListBox){j+=\" mceToolbarStartListBox\"}}}f+=c.createHTML(\"td\",{\"class\":j},c.createHTML(\"span\",null,\"<!-- IE -->\"))}if(d&&k.ListBox){if(d.Button||d.SplitButton){f+=c.createHTML(\"td\",{\"class\":\"mceToolbarEnd\"},c.createHTML(\"span\",null,\"<!-- IE -->\"))}}if(c.stdMode){f+='<td style=\"position: relative\">'+k.renderHTML()+\"</td>\"}else{f+=\"<td>\"+k.renderHTML()+\"</td>\"}if(g&&k.ListBox){if(g.Button||g.SplitButton){f+=c.createHTML(\"td\",{\"class\":\"mceToolbarStart\"},c.createHTML(\"span\",null,\"<!-- IE -->\"))}}}j=\"mceToolbarEnd\";if(k.Button){j+=\" mceToolbarEndButton\"}else{if(k.SplitButton){j+=\" mceToolbarEndSplitButton\"}else{if(k.ListBox){j+=\" mceToolbarEndListBox\"}}}f+=c.createHTML(\"td\",{\"class\":j},c.createHTML(\"span\",null,\"<!-- IE -->\"));return c.createHTML(\"table\",{id:m.id,\"class\":\"mceToolbar\"+(n[\"class\"]?\" \"+n[\"class\"]:\"\"),cellpadding:\"0\",cellspacing:\"0\",align:m.settings.align||\"\",role:\"presentation\",tabindex:\"-1\"},\"<tbody><tr>\"+f+\"</tr></tbody>\")}})})(tinymce);(function(b){var a=b.util.Dispatcher,c=b.each;b.create(\"tinymce.AddOnManager\",{AddOnManager:function(){var d=this;d.items=[];d.urls={};d.lookup={};d.onAdd=new a(d)},get:function(d){if(this.lookup[d]){return this.lookup[d].instance}else{return undefined}},dependencies:function(e){var d;if(this.lookup[e]){d=this.lookup[e].dependencies}return d||[]},requireLangPack:function(e){var d=b.settings;if(d&&d.language&&d.language_load!==false){b.ScriptLoader.add(this.urls[e]+\"/langs/\"+d.language+\".js\")}},add:function(f,e,d){this.items.push(e);this.lookup[f]={instance:e,dependencies:d};this.onAdd.dispatch(this,f,e);return e},createUrl:function(d,e){if(typeof e===\"object\"){return e}else{return{prefix:d.prefix,resource:e,suffix:d.suffix}}},addComponents:function(f,d){var e=this.urls[f];b.each(d,function(g){b.ScriptLoader.add(e+\"/\"+g)})},load:function(j,f,d,h){var g=this,e=f;function i(){var k=g.dependencies(j);b.each(k,function(m){var l=g.createUrl(f,m);g.load(l.resource,l,undefined,undefined)});if(d){if(h){d.call(h)}else{d.call(b.ScriptLoader)}}}if(g.urls[j]){return}if(typeof f===\"object\"){e=f.prefix+f.resource+f.suffix}if(e.indexOf(\"/\")!==0&&e.indexOf(\"://\")==-1){e=b.baseURL+\"/\"+e}g.urls[j]=e.substring(0,e.lastIndexOf(\"/\"));if(g.lookup[j]){i()}else{b.ScriptLoader.add(e,i,h)}}});b.PluginManager=new b.AddOnManager();b.ThemeManager=new b.AddOnManager()}(tinymce));(function(j){var g=j.each,d=j.extend,k=j.DOM,i=j.dom.Event,f=j.ThemeManager,b=j.PluginManager,e=j.explode,h=j.util.Dispatcher,a,c=0;j.documentBaseURL=window.location.href.replace(/[\\?#].*$/,\"\").replace(/[\\/\\\\][^\\/]+$/,\"\");if(!/[\\/\\\\]$/.test(j.documentBaseURL)){j.documentBaseURL+=\"/\"}j.baseURL=new j.util.URI(j.documentBaseURL).toAbsolute(j.baseURL);j.baseURI=new j.util.URI(j.baseURL);j.onBeforeUnload=new h(j);i.add(window,\"beforeunload\",function(l){j.onBeforeUnload.dispatch(j,l)});j.onAddEditor=new h(j);j.onRemoveEditor=new h(j);j.EditorManager=d(j,{editors:[],i18n:{},activeEditor:null,init:function(x){var v=this,o,n=j.ScriptLoader,u,l=[],r;function q(t){var s=t.id;if(!s){s=t.name;if(s&&!k.get(s)){s=t.name}else{s=k.uniqueId()}t.setAttribute(\"id\",s)}return s}function m(z,A,t){var y=z[A];if(!y){return}if(j.is(y,\"string\")){t=y.replace(/\\.\\w+$/,\"\");t=t?j.resolve(t):0;y=j.resolve(y)}return y.apply(t||this,Array.prototype.slice.call(arguments,2))}function p(t,s){return s.constructor===RegExp?s.test(t.className):k.hasClass(t,s)}v.settings=x;i.bind(window,\"ready\",function(){var s,t;m(x,\"onpageload\");switch(x.mode){case\"exact\":s=x.elements||\"\";if(s.length>0){g(e(s),function(y){if(k.get(y)){r=new j.Editor(y,x);l.push(r);r.render(1)}else{g(document.forms,function(z){g(z.elements,function(A){if(A.name===y){y=\"mce_editor_\"+c++;k.setAttrib(A,\"id\",y);r=new j.Editor(y,x);l.push(r);r.render(1)}})})}})}break;case\"textareas\":case\"specific_textareas\":g(k.select(\"textarea\"),function(y){if(x.editor_deselector&&p(y,x.editor_deselector)){return}if(!x.editor_selector||p(y,x.editor_selector)){r=new j.Editor(q(y),x);l.push(r);r.render(1)}});break;default:if(x.types){g(x.types,function(y){g(k.select(y.selector),function(A){var z=new j.Editor(q(A),j.extend({},x,y));l.push(z);z.render(1)})})}else{if(x.selector){g(k.select(x.selector),function(z){var y=new j.Editor(q(z),x);l.push(y);y.render(1)})}}}if(x.oninit){s=t=0;g(l,function(y){t++;if(!y.initialized){y.onInit.add(function(){s++;if(s==t){m(x,\"oninit\")}})}else{s++}if(s==t){m(x,\"oninit\")}})}})},get:function(l){if(l===a){return this.editors}if(!this.editors.hasOwnProperty(l)){return a}return this.editors[l]},getInstanceById:function(l){return this.get(l)},add:function(m){var l=this,n=l.editors;n[m.id]=m;n.push(m);l._setActive(m);l.onAddEditor.dispatch(l,m);return m},remove:function(n){var m=this,l,o=m.editors;if(!o[n.id]){return null}delete o[n.id];for(l=0;l<o.length;l++){if(o[l]==n){o.splice(l,1);break}}if(m.activeEditor==n){m._setActive(o[0])}n.destroy();m.onRemoveEditor.dispatch(m,n);return n},execCommand:function(r,p,o){var q=this,n=q.get(o),l;function m(){n.destroy();l.detachEvent(\"onunload\",m);l=l.tinyMCE=l.tinymce=null}switch(r){case\"mceFocus\":n.focus();return true;case\"mceAddEditor\":case\"mceAddControl\":if(!q.get(o)){new j.Editor(o,q.settings).render()}return true;case\"mceAddFrameControl\":l=o.window;l.tinyMCE=tinyMCE;l.tinymce=j;j.DOM.doc=l.document;j.DOM.win=l;n=new j.Editor(o.element_id,o);n.render();if(j.isIE&&!j.isIE11){l.attachEvent(\"onunload\",m)}o.page_window=null;return true;case\"mceRemoveEditor\":case\"mceRemoveControl\":if(n){n.remove()}return true;case\"mceToggleEditor\":if(!n){q.execCommand(\"mceAddControl\",0,o);return true}if(n.isHidden()){n.show()}else{n.hide()}return true}if(q.activeEditor){return q.activeEditor.execCommand(r,p,o)}return false},execInstanceCommand:function(p,o,n,m){var l=this.get(p);if(l){return l.execCommand(o,n,m)}return false},triggerSave:function(){g(this.editors,function(l){l.save()})},addI18n:function(n,q){var l,m=this.i18n;if(!j.is(n,\"string\")){g(n,function(r,p){g(r,function(t,s){g(t,function(v,u){if(s===\"common\"){m[p+\".\"+u]=v}else{m[p+\".\"+s+\".\"+u]=v}})})})}else{g(q,function(r,p){m[n+\".\"+p]=r})}},_setActive:function(l){this.selectedInstance=this.activeEditor=l}})})(tinymce);(function(k){var l=k.DOM,j=k.dom.Event,f=k.extend,i=k.each,a=k.isGecko,b=k.isIE,e=k.isWebKit,d=k.is,h=k.ThemeManager,c=k.PluginManager,g=k.explode;k.create(\"tinymce.Editor\",{Editor:function(p,o){var m=this,n=true;m.settings=o=f({id:p,language:\"en\",theme:\"advanced\",skin:\"default\",delta_width:0,delta_height:0,popup_css:\"\",plugins:\"\",document_base_url:k.documentBaseURL,add_form_submit_trigger:n,submit_patch:n,add_unload_trigger:n,convert_urls:n,relative_urls:n,remove_script_host:n,table_inline_editing:false,object_resizing:n,accessibility_focus:n,doctype:k.isIE6?'<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\">':\"<!DOCTYPE>\",visual:n,font_size_style_values:\"xx-small,x-small,small,medium,large,x-large,xx-large\",font_size_legacy_values:\"xx-small,small,medium,large,x-large,xx-large,300%\",apply_source_formatting:n,directionality:\"ltr\",forced_root_block:\"p\",hidden_input:n,padd_empty_editor:n,render_ui:n,indentation:\"30px\",fix_table_elements:n,inline_styles:n,convert_fonts_to_spans:n,indent:\"simple\",indent_before:\"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist\",indent_after:\"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist\",validate:n,entity_encoding:\"named\",url_converter:m.convertURL,url_converter_scope:m,ie7_compat:n},o);m.id=m.editorId=p;m.isNotDirty=false;m.plugins={};m.documentBaseURI=new k.util.URI(o.document_base_url||k.documentBaseURL,{base_uri:tinyMCE.baseURI});m.baseURI=k.baseURI;m.contentCSS=[];m.contentStyles=[];m.setupEvents();m.execCommands={};m.queryStateCommands={};m.queryValueCommands={};m.execCallback(\"setup\",m)},render:function(o){var p=this,q=p.settings,r=p.id,m=k.ScriptLoader;if(!j.domLoaded){j.add(window,\"ready\",function(){p.render()});return}tinyMCE.settings=q;if(!p.getElement()){return}if(k.isIDevice&&!k.isIOS5){return}if(!/TEXTAREA|INPUT/i.test(p.getElement().nodeName)&&q.hidden_input&&l.getParent(r,\"form\")){l.insertAfter(l.create(\"input\",{type:\"hidden\",name:r}),r)}if(!q.content_editable){p.orgVisibility=p.getElement().style.visibility;p.getElement().style.visibility=\"hidden\"}if(k.WindowManager){p.windowManager=new k.WindowManager(p)}if(q.encoding==\"xml\"){p.onGetContent.add(function(s,t){if(t.save){t.content=l.encode(t.content)}})}if(q.add_form_submit_trigger){p.onSubmit.addToTop(function(){if(p.initialized){p.save();p.isNotDirty=1}})}if(q.add_unload_trigger){p._beforeUnload=tinyMCE.onBeforeUnload.add(function(){if(p.initialized&&!p.destroyed&&!p.isHidden()){p.save({format:\"raw\",no_events:true})}})}k.addUnload(p.destroy,p);if(q.submit_patch){p.onBeforeRenderUI.add(function(){var s=p.getElement().form;if(!s){return}if(s._mceOldSubmit){return}if(!s.submit.nodeType&&!s.submit.length){p.formElement=s;s._mceOldSubmit=s.submit;s.submit=function(){k.triggerSave();p.isNotDirty=1;return p.formElement._mceOldSubmit(p.formElement)}}s=null})}function n(){if(q.language&&q.language_load!==false){m.add(k.baseURL+\"/langs/\"+q.language+\".js\")}if(q.theme&&typeof q.theme!=\"function\"&&q.theme.charAt(0)!=\"-\"&&!h.urls[q.theme]){h.load(q.theme,\"themes/\"+q.theme+\"/editor_template\"+k.suffix+\".js\")}i(g(q.plugins),function(t){if(t&&!c.urls[t]){if(t.charAt(0)==\"-\"){t=t.substr(1,t.length);var s=c.dependencies(t);i(s,function(v){var u={prefix:\"plugins/\",resource:v,suffix:\"/editor_plugin\"+k.suffix+\".js\"};v=c.createUrl(u,v);c.load(v.resource,v)})}else{if(t==\"safari\"){return}c.load(t,{prefix:\"plugins/\",resource:t,suffix:\"/editor_plugin\"+k.suffix+\".js\"})}}});m.loadQueue(function(){if(!p.removed){p.init()}})}n()},init:function(){var q,G=this,H=G.settings,D,y,z,C=G.getElement(),p,m,E,v,B,F,x,r=[];k.add(G);H.aria_label=H.aria_label||l.getAttrib(C,\"aria-label\",G.getLang(\"aria.rich_text_area\"));if(H.theme){if(typeof H.theme!=\"function\"){H.theme=H.theme.replace(/-/,\"\");p=h.get(H.theme);G.theme=new p();if(G.theme.init){G.theme.init(G,h.urls[H.theme]||k.documentBaseURL.replace(/\\/$/,\"\"))}}else{G.theme=H.theme}}function A(s){var t=c.get(s),o=c.urls[s]||k.documentBaseURL.replace(/\\/$/,\"\"),n;if(t&&k.inArray(r,s)===-1){i(c.dependencies(s),function(u){A(u)});n=new t(G,o);G.plugins[s]=n;if(n.init){n.init(G,o);r.push(s)}}}i(g(H.plugins.replace(/\\-/g,\"\")),A);if(H.popup_css!==false){if(H.popup_css){H.popup_css=G.documentBaseURI.toAbsolute(H.popup_css)}else{H.popup_css=G.baseURI.toAbsolute(\"themes/\"+H.theme+\"/skins/\"+H.skin+\"/dialog.css\")}}if(H.popup_css_add){H.popup_css+=\",\"+G.documentBaseURI.toAbsolute(H.popup_css_add)}G.controlManager=new k.ControlManager(G);G.onBeforeRenderUI.dispatch(G,G.controlManager);if(H.render_ui&&G.theme){G.orgDisplay=C.style.display;if(typeof H.theme!=\"function\"){D=H.width||C.style.width||C.offsetWidth;y=H.height||C.style.height||C.offsetHeight;z=H.min_height||100;F=/^[0-9\\.]+(|px)$/i;if(F.test(\"\"+D)){D=Math.max(parseInt(D,10)+(p.deltaWidth||0),100)}if(F.test(\"\"+y)){y=Math.max(parseInt(y,10)+(p.deltaHeight||0),z)}p=G.theme.renderUI({targetNode:C,width:D,height:y,deltaWidth:H.delta_width,deltaHeight:H.delta_height});l.setStyles(p.sizeContainer||p.editorContainer,{width:D,height:y});y=(p.iframeHeight||y)+(typeof(y)==\"number\"?(p.deltaHeight||0):\"\");if(y<z){y=z}}else{p=H.theme(G,C);if(p.editorContainer.nodeType){p.editorContainer=p.editorContainer.id=p.editorContainer.id||G.id+\"_parent\"}if(p.iframeContainer.nodeType){p.iframeContainer=p.iframeContainer.id=p.iframeContainer.id||G.id+\"_iframecontainer\"}y=p.iframeHeight||C.offsetHeight;if(b){G.onInit.add(function(n){n.dom.bind(n.getBody(),\"beforedeactivate keydown keyup\",function(){n.bookmark=n.selection.getBookmark(1)})});G.onNodeChange.add(function(n){if(document.activeElement.id==n.id+\"_ifr\"){n.bookmark=n.selection.getBookmark(1)}})}}G.editorContainer=p.editorContainer}if(H.content_css){i(g(H.content_css),function(n){G.contentCSS.push(G.documentBaseURI.toAbsolute(n))})}if(H.content_style){G.contentStyles.push(H.content_style)}if(H.content_editable){C=q=p=null;return G.initContentBody()}if(document.domain&&location.hostname!=document.domain){k.relaxedDomain=document.domain}G.iframeHTML=H.doctype+'<html><head xmlns=\"http://www.w3.org/1999/xhtml\">';if(H.document_base_url!=k.documentBaseURL){G.iframeHTML+='<base href=\"'+G.documentBaseURI.getURI()+'\" />'}if(k.isIE8){if(H.ie7_compat){G.iframeHTML+='<meta http-equiv=\"X-UA-Compatible\" content=\"IE=7\" />'}else{G.iframeHTML+='<meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" />'}}G.iframeHTML+='<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />';for(x=0;x<G.contentCSS.length;x++){G.iframeHTML+='<link type=\"text/css\" rel=\"stylesheet\" href=\"'+G.contentCSS[x]+'\" />'}G.contentCSS=[];v=H.body_id||\"tinymce\";if(v.indexOf(\"=\")!=-1){v=G.getParam(\"body_id\",\"\",\"hash\");v=v[G.id]||v}B=H.body_class||\"\";if(B.indexOf(\"=\")!=-1){B=G.getParam(\"body_class\",\"\",\"hash\");B=B[G.id]||\"\"}G.iframeHTML+='</head><body id=\"'+v+'\" class=\"mceContentBody '+B+'\" onload=\"window.parent.tinyMCE.get(\\''+G.id+\"').onLoad.dispatch();\\\"><br></body></html>\";if(k.relaxedDomain&&(b||(k.isOpera&&parseFloat(opera.version())<11))){E='javascript:(function(){document.open();document.domain=\"'+document.domain+'\";var ed = window.parent.tinyMCE.get(\"'+G.id+'\");document.write(ed.iframeHTML);document.close();ed.initContentBody();})()'}q=l.add(p.iframeContainer,\"iframe\",{id:G.id+\"_ifr\",src:E||'javascript:\"\"',frameBorder:\"0\",allowTransparency:\"true\",title:H.aria_label,style:{width:\"100%\",height:y,display:\"block\"}});G.contentAreaContainer=p.iframeContainer;if(p.editorContainer){l.get(p.editorContainer).style.display=G.orgDisplay}C.style.visibility=G.orgVisibility;l.get(G.id).style.display=\"none\";l.setAttrib(G.id,\"aria-hidden\",true);if(!k.relaxedDomain||!E){G.initContentBody()}C=q=p=null},initContentBody:function(){var n=this,p=n.settings,q=l.get(n.id),r=n.getDoc(),o,m,s;if((!b||!k.relaxedDomain)&&!p.content_editable){r.open();r.write(n.iframeHTML);r.close();if(k.relaxedDomain){r.domain=k.relaxedDomain}}if(p.content_editable){l.addClass(q,\"mceContentBody\");n.contentDocument=r=p.content_document||document;n.contentWindow=p.content_window||window;n.bodyElement=q;p.content_document=p.content_window=null}m=n.getBody();m.disabled=true;if(!p.readonly){m.contentEditable=n.getParam(\"content_editable_state\",true)}m.disabled=false;n.schema=new k.html.Schema(p);n.dom=new k.dom.DOMUtils(r,{keep_values:true,url_converter:n.convertURL,url_converter_scope:n,hex_colors:p.force_hex_style_colors,class_filter:p.class_filter,update_styles:true,root_element:p.content_editable?n.id:null,schema:n.schema});n.parser=new k.html.DomParser(p,n.schema);n.parser.addAttributeFilter(\"src,href,style\",function(t,u){var v=t.length,y,A=n.dom,z,x;while(v--){y=t[v];z=y.attr(u);x=\"data-mce-\"+u;if(!y.attributes.map[x]){if(u===\"style\"){y.attr(x,A.serializeStyle(A.parseStyle(z),y.name))}else{y.attr(x,n.convertURL(z,u,y.name))}}}});n.parser.addNodeFilter(\"script\",function(t,u){var v=t.length,x;while(v--){x=t[v];x.attr(\"type\",\"mce-\"+(x.attr(\"type\")||\"text/javascript\"))}});n.parser.addNodeFilter(\"#cdata\",function(t,u){var v=t.length,x;while(v--){x=t[v];x.type=8;x.name=\"#comment\";x.value=\"[CDATA[\"+x.value+\"]]\"}});n.parser.addNodeFilter(\"p,h1,h2,h3,h4,h5,h6,div\",function(u,v){var x=u.length,y,t=n.schema.getNonEmptyElements();while(x--){y=u[x];if(y.isEmpty(t)){y.empty().append(new k.html.Node(\"br\",1)).shortEnded=true}}});n.serializer=new k.dom.Serializer(p,n.dom,n.schema);n.selection=new k.dom.Selection(n.dom,n.getWin(),n.serializer,n);n.formatter=new k.Formatter(n);n.undoManager=new k.UndoManager(n);n.forceBlocks=new k.ForceBlocks(n);n.enterKey=new k.EnterKey(n);n.editorCommands=new k.EditorCommands(n);n.onExecCommand.add(function(t,u){if(!/^(FontName|FontSize)$/.test(u)){n.nodeChanged()}});n.serializer.onPreProcess.add(function(t,u){return n.onPreProcess.dispatch(n,u,t)});n.serializer.onPostProcess.add(function(t,u){return n.onPostProcess.dispatch(n,u,t)});n.onPreInit.dispatch(n);if(!p.browser_spellcheck&&!p.gecko_spellcheck){r.body.spellcheck=false}if(!p.readonly){n.bindNativeEvents()}n.controlManager.onPostRender.dispatch(n,n.controlManager);n.onPostRender.dispatch(n);n.quirks=k.util.Quirks(n);if(p.directionality){m.dir=p.directionality}if(p.nowrap){m.style.whiteSpace=\"nowrap\"}if(p.protect){n.onBeforeSetContent.add(function(t,u){i(p.protect,function(v){u.content=u.content.replace(v,function(x){return\"<!--mce:protected \"+escape(x)+\"-->\"})})})}n.onSetContent.add(function(){n.addVisual(n.getBody())});if(p.padd_empty_editor){n.onPostProcess.add(function(t,u){u.content=u.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\\s|\\u00a0|)<\\/p>[\\r\\n]*|<br \\/>[\\r\\n]*)$/,\"\")})}n.load({initial:true,format:\"html\"});n.startContent=n.getContent({format:\"raw\"});n.initialized=true;n.onInit.dispatch(n);n.execCallback(\"setupcontent_callback\",n.id,m,r);n.execCallback(\"init_instance_callback\",n);n.focus(true);n.nodeChanged({initial:true});if(n.contentStyles.length>0){s=\"\";i(n.contentStyles,function(t){s+=t+\"\\r\\n\"});n.dom.addStyle(s)}i(n.contentCSS,function(t){n.dom.loadCSS(t)});if(p.auto_focus){setTimeout(function(){var t=k.get(p.auto_focus);t.selection.select(t.getBody(),1);t.selection.collapse(1);t.getBody().focus();t.getWin().focus()},100)}q=r=m=null},focus:function(p){var o,u=this,t=u.selection,q=u.settings.content_editable,n,r,s=u.getDoc(),m;if(!p){if(u.bookmark){t.moveToBookmark(u.bookmark);u.bookmark=null}n=t.getRng();if(n.item){r=n.item(0)}u._refreshContentEditable();if(!q){u.getWin().focus()}if(k.isGecko||q){m=u.getBody();if(m.setActive&&!k.isIE11){m.setActive()}else{m.focus()}if(q){t.normalize()}}if(r&&r.ownerDocument==s){n=s.body.createControlRange();n.addElement(r);n.select()}}if(k.activeEditor!=u){if((o=k.activeEditor)!=null){o.onDeactivate.dispatch(o,u)}u.onActivate.dispatch(u,o)}k._setActive(u)},execCallback:function(q){var m=this,p=m.settings[q],o;if(!p){return}if(m.callbackLookup&&(o=m.callbackLookup[q])){p=o.func;o=o.scope}if(d(p,\"string\")){o=p.replace(/\\.\\w+$/,\"\");o=o?k.resolve(o):0;p=k.resolve(p);m.callbackLookup=m.callbackLookup||{};m.callbackLookup[q]={func:p,scope:o}}return p.apply(o||m,Array.prototype.slice.call(arguments,1))},translate:function(m){var o=this.settings.language||\"en\",n=k.i18n;if(!m){return\"\"}return n[o+\".\"+m]||m.replace(/\\{\\#([^\\}]+)\\}/g,function(q,p){return n[o+\".\"+p]||\"{#\"+p+\"}\"})},getLang:function(o,m){return k.i18n[(this.settings.language||\"en\")+\".\"+o]||(d(m)?m:\"{#\"+o+\"}\")},getParam:function(t,q,m){var r=k.trim,p=d(this.settings[t])?this.settings[t]:q,s;if(m===\"hash\"){s={};if(d(p,\"string\")){i(p.indexOf(\"=\")>0?p.split(/[;,](?![^=;,]*(?:[;,]|$))/):p.split(\",\"),function(n){n=n.split(\"=\");if(n.length>1){s[r(n[0])]=r(n[1])}else{s[r(n[0])]=r(n)}})}else{s=p}return s}return p},nodeChanged:function(q){var m=this,n=m.selection,p;if(m.initialized){q=q||{};p=n.getStart()||m.getBody();p=b&&p.ownerDocument!=m.getDoc()?m.getBody():p;q.parents=[];m.dom.getParent(p,function(o){if(o.nodeName==\"BODY\"){return true}q.parents.push(o)});m.onNodeChange.dispatch(m,q?q.controlManager||m.controlManager:m.controlManager,p,n.isCollapsed(),q)}},addButton:function(n,o){var m=this;m.buttons=m.buttons||{};m.buttons[n]=o},addCommand:function(m,o,n){this.execCommands[m]={func:o,scope:n||this}},addQueryStateHandler:function(m,o,n){this.queryStateCommands[m]={func:o,scope:n||this}},addQueryValueHandler:function(m,o,n){this.queryValueCommands[m]={func:o,scope:n||this}},addShortcut:function(o,q,m,p){var n=this,r;if(n.settings.custom_shortcuts===false){return false}n.shortcuts=n.shortcuts||{};if(d(m,\"string\")){r=m;m=function(){n.execCommand(r,false,null)}}if(d(m,\"object\")){r=m;m=function(){n.execCommand(r[0],r[1],r[2])}}i(g(o),function(s){var t={func:m,scope:p||this,desc:n.translate(q),alt:false,ctrl:false,shift:false};i(g(s,\"+\"),function(u){switch(u){case\"alt\":case\"ctrl\":case\"shift\":t[u]=true;break;default:t.charCode=u.charCodeAt(0);t.keyCode=u.toUpperCase().charCodeAt(0)}});n.shortcuts[(t.ctrl?\"ctrl\":\"\")+\",\"+(t.alt?\"alt\":\"\")+\",\"+(t.shift?\"shift\":\"\")+\",\"+t.keyCode]=t});return true},execCommand:function(u,r,x,m){var p=this,q=0,v,n;if(!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(u)&&(!m||!m.skip_focus)){p.focus()}m=f({},m);p.onBeforeExecCommand.dispatch(p,u,r,x,m);if(m.terminate){return false}if(p.execCallback(\"execcommand_callback\",p.id,p.selection.getNode(),u,r,x)){p.onExecCommand.dispatch(p,u,r,x,m);return true}if(v=p.execCommands[u]){n=v.func.call(v.scope,r,x);if(n!==true){p.onExecCommand.dispatch(p,u,r,x,m);return n}}i(p.plugins,function(o){if(o.execCommand&&o.execCommand(u,r,x)){p.onExecCommand.dispatch(p,u,r,x,m);q=1;return false}});if(q){return true}if(p.theme&&p.theme.execCommand&&p.theme.execCommand(u,r,x)){p.onExecCommand.dispatch(p,u,r,x,m);return true}if(p.editorCommands.execCommand(u,r,x)){p.onExecCommand.dispatch(p,u,r,x,m);return true}p.getDoc().execCommand(u,r,x);p.onExecCommand.dispatch(p,u,r,x,m)},queryCommandState:function(q){var n=this,r,p;if(n._isHidden()){return}if(r=n.queryStateCommands[q]){p=r.func.call(r.scope);if(p!==true){return p}}r=n.editorCommands.queryCommandState(q);if(r!==-1){return r}try{return this.getDoc().queryCommandState(q)}catch(m){}},queryCommandValue:function(r){var n=this,q,p;if(n._isHidden()){return}if(q=n.queryValueCommands[r]){p=q.func.call(q.scope);if(p!==true){return p}}q=n.editorCommands.queryCommandValue(r);if(d(q)){return q}try{return this.getDoc().queryCommandValue(r)}catch(m){}},show:function(){var m=this;l.show(m.getContainer());l.hide(m.id);m.load()},hide:function(){var m=this,n=m.getDoc();if(b&&n){n.execCommand(\"SelectAll\")}m.save();l.hide(m.getContainer());l.setStyle(m.id,\"display\",m.orgDisplay)},isHidden:function(){return !l.isHidden(this.id)},setProgressState:function(m,n,p){this.onSetProgressState.dispatch(this,m,n,p);return m},load:function(q){var m=this,p=m.getElement(),n;if(p){q=q||{};q.load=true;n=m.setContent(d(p.value)?p.value:p.innerHTML,q);q.element=p;if(!q.no_events){m.onLoadContent.dispatch(m,q)}q.element=p=null;return n}},save:function(r){var m=this,q=m.getElement(),n,p;if(!q||!m.initialized){return}r=r||{};r.save=true;r.element=q;n=r.content=m.getContent(r);if(!r.no_events){m.onSaveContent.dispatch(m,r)}n=r.content;if(!/TEXTAREA|INPUT/i.test(q.nodeName)){q.innerHTML=n;if(p=l.getParent(m.id,\"form\")){i(p.elements,function(o){if(o.name==m.id){o.value=n;return false}})}}else{q.value=n}r.element=q=null;return n},setContent:function(r,p){var o=this,n,m=o.getBody(),q;p=p||{};p.format=p.format||\"html\";p.set=true;p.content=r;if(!p.no_events){o.onBeforeSetContent.dispatch(o,p)}r=p.content;if(!k.isIE&&(r.length===0||/^\\s+$/.test(r))){q=o.settings.forced_root_block;if(q){r=\"<\"+q+'><br data-mce-bogus=\"1\"></'+q+\">\"}else{r='<br data-mce-bogus=\"1\">'}m.innerHTML=r;o.selection.select(m,true);o.selection.collapse(true);return}if(p.format!==\"raw\"){r=new k.html.Serializer({},o.schema).serialize(o.parser.parse(r))}p.content=k.trim(r);o.dom.setHTML(m,p.content);if(!p.no_events){o.onSetContent.dispatch(o,p)}if(!o.settings.content_editable||document.activeElement===o.getBody()){o.selection.normalize()}return p.content},getContent:function(o){var n=this,p,m=n.getBody();o=o||{};o.format=o.format||\"html\";o.get=true;o.getInner=true;if(!o.no_events){n.onBeforeGetContent.dispatch(n,o)}if(o.format==\"raw\"){p=m.innerHTML}else{if(o.format==\"text\"){p=m.innerText||m.textContent}else{p=n.serializer.serialize(m,o)}}if(o.format!=\"text\"){o.content=k.trim(p)}else{o.content=p}if(!o.no_events){n.onGetContent.dispatch(n,o)}return o.content},isDirty:function(){var m=this;return k.trim(m.startContent)!=k.trim(m.getContent({format:\"raw\",no_events:1}))&&!m.isNotDirty},getContainer:function(){var m=this;if(!m.container){m.container=l.get(m.editorContainer||m.id+\"_parent\")}return m.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return l.get(this.settings.content_element||this.id)},getWin:function(){var m=this,n;if(!m.contentWindow){n=l.get(m.id+\"_ifr\");if(n){m.contentWindow=n.contentWindow}}return m.contentWindow},getDoc:function(){var m=this,n;if(!m.contentDocument){n=m.getWin();if(n){m.contentDocument=n.document}}return m.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(o,n,q){var m=this,p=m.settings;if(p.urlconverter_callback){return m.execCallback(\"urlconverter_callback\",o,q,true,n)}if(!p.convert_urls||(q&&q.nodeName==\"LINK\")||o.indexOf(\"file:\")===0){return o}if(p.relative_urls){return m.documentBaseURI.toRelative(o)}o=m.documentBaseURI.toAbsolute(o,p.remove_script_host);return o},addVisual:function(q){var n=this,o=n.settings,p=n.dom,m;q=q||n.getBody();if(!d(n.hasVisual)){n.hasVisual=o.visual}i(p.select(\"table,a\",q),function(s){var r;switch(s.nodeName){case\"TABLE\":m=o.visual_table_class||\"mceItemTable\";r=p.getAttrib(s,\"border\");if(!r||r==\"0\"){if(n.hasVisual){p.addClass(s,m)}else{p.removeClass(s,m)}}return;case\"A\":if(!p.getAttrib(s,\"href\",false)){r=p.getAttrib(s,\"name\")||s.id;m=\"mceItemAnchor\";if(r){if(n.hasVisual){p.addClass(s,m)}else{p.removeClass(s,m)}}}return}});n.onVisualAid.dispatch(n,q,n.hasVisual)},remove:function(){var m=this,o=m.getContainer(),n=m.getDoc();if(!m.removed){m.removed=1;if(b&&n){n.execCommand(\"SelectAll\")}m.save();l.setStyle(m.id,\"display\",m.orgDisplay);if(!m.settings.content_editable){j.unbind(m.getWin());j.unbind(m.getDoc())}j.unbind(m.getBody());j.clear(o);m.execCallback(\"remove_instance_callback\",m);m.onRemove.dispatch(m);m.onExecCommand.listeners=[];k.remove(m);l.remove(o)}},destroy:function(n){var m=this;if(m.destroyed){return}if(a){j.unbind(m.getDoc());j.unbind(m.getWin());j.unbind(m.getBody())}if(!n){k.removeUnload(m.destroy);tinyMCE.onBeforeUnload.remove(m._beforeUnload);if(m.theme&&m.theme.destroy){m.theme.destroy()}m.controlManager.destroy();m.selection.destroy();m.dom.destroy()}if(m.formElement){m.formElement.submit=m.formElement._mceOldSubmit;m.formElement._mceOldSubmit=null}m.contentAreaContainer=m.formElement=m.container=m.settings.content_element=m.bodyElement=m.contentDocument=m.contentWindow=null;if(m.selection){m.selection=m.selection.win=m.selection.dom=m.selection.dom.doc=null}m.destroyed=1},_refreshContentEditable:function(){var n=this,m,o;if(n._isHidden()){m=n.getBody();o=m.parentNode;o.removeChild(m);o.appendChild(m);m.focus()}},_isHidden:function(){var m;if(!a){return 0}m=this.selection.getSel();return(!m||!m.rangeCount||m.rangeCount===0)}})})(tinymce);(function(a){var b=a.each;a.Editor.prototype.setupEvents=function(){var c=this,d=c.settings;b([\"onPreInit\",\"onBeforeRenderUI\",\"onPostRender\",\"onLoad\",\"onInit\",\"onRemove\",\"onActivate\",\"onDeactivate\",\"onClick\",\"onEvent\",\"onMouseUp\",\"onMouseDown\",\"onDblClick\",\"onKeyDown\",\"onKeyUp\",\"onKeyPress\",\"onContextMenu\",\"onSubmit\",\"onReset\",\"onPaste\",\"onPreProcess\",\"onPostProcess\",\"onBeforeSetContent\",\"onBeforeGetContent\",\"onSetContent\",\"onGetContent\",\"onLoadContent\",\"onSaveContent\",\"onNodeChange\",\"onChange\",\"onBeforeExecCommand\",\"onExecCommand\",\"onUndo\",\"onRedo\",\"onVisualAid\",\"onSetProgressState\",\"onSetAttrib\"],function(e){c[e]=new a.util.Dispatcher(c)});if(d.cleanup_callback){c.onBeforeSetContent.add(function(e,f){f.content=e.execCallback(\"cleanup_callback\",\"insert_to_editor\",f.content,f)});c.onPreProcess.add(function(e,f){if(f.set){e.execCallback(\"cleanup_callback\",\"insert_to_editor_dom\",f.node,f)}if(f.get){e.execCallback(\"cleanup_callback\",\"get_from_editor_dom\",f.node,f)}});c.onPostProcess.add(function(e,f){if(f.set){f.content=e.execCallback(\"cleanup_callback\",\"insert_to_editor\",f.content,f)}if(f.get){f.content=e.execCallback(\"cleanup_callback\",\"get_from_editor\",f.content,f)}})}if(d.save_callback){c.onGetContent.add(function(e,f){if(f.save){f.content=e.execCallback(\"save_callback\",e.id,f.content,e.getBody())}})}if(d.handle_event_callback){c.onEvent.add(function(f,g,h){if(c.execCallback(\"handle_event_callback\",g,f,h)===false){g.preventDefault();g.stopPropagation()}})}if(d.handle_node_change_callback){c.onNodeChange.add(function(f,e,g){f.execCallback(\"handle_node_change_callback\",f.id,g,-1,-1,true,f.selection.isCollapsed())})}if(d.save_callback){c.onSaveContent.add(function(e,g){var f=e.execCallback(\"save_callback\",e.id,g.content,e.getBody());if(f){g.content=f}})}if(d.onchange_callback){c.onChange.add(function(f,e){f.execCallback(\"onchange_callback\",f,e)})}};a.Editor.prototype.bindNativeEvents=function(){var l=this,f,d=l.settings,e=l.dom,h;h={mouseup:\"onMouseUp\",mousedown:\"onMouseDown\",click:\"onClick\",keyup:\"onKeyUp\",keydown:\"onKeyDown\",keypress:\"onKeyPress\",submit:\"onSubmit\",reset:\"onReset\",contextmenu:\"onContextMenu\",dblclick:\"onDblClick\",paste:\"onPaste\"};function c(i,m){var n=i.type;if(l.removed){return}if(l.onEvent.dispatch(l,i,m)!==false){l[h[i.fakeType||i.type]].dispatch(l,i,m)}}function j(i){l.focus(true)}function k(i,m){if(m.keyCode!=65||!a.VK.metaKeyPressed(m)){l.selection.normalize()}l.nodeChanged()}b(h,function(m,n){var i=d.content_editable?l.getBody():l.getDoc();switch(n){case\"contextmenu\":e.bind(i,n,c);break;case\"paste\":e.bind(l.getBody(),n,c);break;case\"submit\":case\"reset\":e.bind(l.getElement().form||a.DOM.getParent(l.id,\"form\"),n,c);break;default:e.bind(i,n,c)}});e.bind(d.content_editable?l.getBody():(a.isGecko?l.getDoc():l.getWin()),\"focus\",function(i){l.focus(true)});if(d.content_editable&&a.isOpera){e.bind(l.getBody(),\"click\",j);e.bind(l.getBody(),\"keydown\",j)}l.onMouseUp.add(k);l.onKeyUp.add(function(i,n){var m=n.keyCode;if((m>=33&&m<=36)||(m>=37&&m<=40)||m==13||m==45||m==46||m==8||(a.isMac&&(m==91||m==93))||n.ctrlKey){k(i,n)}});l.onReset.add(function(){l.setContent(l.startContent,{format:\"raw\"})});function g(m,i){if(m.altKey||m.ctrlKey||m.metaKey){b(l.shortcuts,function(n){var o=a.isMac?m.metaKey:m.ctrlKey;if(n.ctrl!=o||n.alt!=m.altKey||n.shift!=m.shiftKey){return}if(m.keyCode==n.keyCode||(m.charCode&&m.charCode==n.charCode)){m.preventDefault();if(i){n.func.call(n.scope)}return true}})}}l.onKeyUp.add(function(i,m){g(m)});l.onKeyPress.add(function(i,m){g(m)});l.onKeyDown.add(function(i,m){g(m,true)});if(a.isOpera){l.onClick.add(function(i,m){m.preventDefault()})}}})(tinymce);(function(d){var e=d.each,b,a=true,c=false;d.EditorCommands=function(n){var m=n.dom,p=n.selection,j={state:{},exec:{},value:{}},k=n.settings,q=n.formatter,o;function r(z,y,x){var v;z=z.toLowerCase();if(v=j.exec[z]){v(z,y,x);return a}return c}function l(x){var v;x=x.toLowerCase();if(v=j.state[x]){return v(x)}return -1}function h(x){var v;x=x.toLowerCase();if(v=j.value[x]){return v(x)}return c}function u(v,x){x=x||\"exec\";e(v,function(z,y){e(y.toLowerCase().split(\",\"),function(A){j[x][A]=z})})}d.extend(this,{execCommand:r,queryCommandState:l,queryCommandValue:h,addCommands:u});function f(y,x,v){if(x===b){x=c}if(v===b){v=null}return n.getDoc().execCommand(y,x,v)}function t(v){return q.match(v)}function s(v,x){q.toggle(v,x?{value:x}:b)}function i(v){o=p.getBookmark(v)}function g(){p.moveToBookmark(o)}u({\"mceResetDesignMode,mceBeginUndoLevel\":function(){},\"mceEndUndoLevel,mceAddUndoLevel\":function(){n.undoManager.add()},\"Cut,Copy,Paste\":function(z){var y=n.getDoc(),v;try{f(z)}catch(x){v=a}if(v||!y.queryCommandSupported(z)){if(d.isGecko){n.windowManager.confirm(n.getLang(\"clipboard_msg\"),function(A){if(A){open(\"http://www.mozilla.org/editor/midasdemo/securityprefs.html\",\"_blank\")}})}else{n.windowManager.alert(n.getLang(\"clipboard_no_support\"))}}},unlink:function(v){if(p.isCollapsed()){p.select(p.getNode())}f(v);p.collapse(c)},\"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull\":function(v){var x=v.substring(7);e(\"left,center,right,full\".split(\",\"),function(y){if(x!=y){q.remove(\"align\"+y)}});s(\"align\"+x);r(\"mceRepaint\")},\"InsertUnorderedList,InsertOrderedList\":function(y){var v,x;f(y);v=m.getParent(p.getNode(),\"ol,ul\");if(v){x=v.parentNode;if(/^(H[1-6]|P|ADDRESS|PRE)$/.test(x.nodeName)){i();m.split(x,v);g()}}},\"Bold,Italic,Underline,Strikethrough,Superscript,Subscript\":function(v){s(v)},\"ForeColor,HiliteColor,FontName\":function(y,x,v){s(y,v)},FontSize:function(z,y,x){var v,A;if(x>=1&&x<=7){A=d.explode(k.font_size_style_values);v=d.explode(k.font_size_classes);if(v){x=v[x-1]||x}else{x=A[x-1]||x}}s(z,x)},RemoveFormat:function(v){q.remove(v)},mceBlockQuote:function(v){s(\"blockquote\")},FormatBlock:function(y,x,v){return s(v||\"p\")},mceCleanup:function(){var v=p.getBookmark();n.setContent(n.getContent({cleanup:a}),{cleanup:a});p.moveToBookmark(v)},mceRemoveNode:function(z,y,x){var v=x||p.getNode();if(v!=n.getBody()){i();n.dom.remove(v,a);g()}},mceSelectNodeDepth:function(z,y,x){var v=0;m.getParent(p.getNode(),function(A){if(A.nodeType==1&&v++==x){p.select(A);return c}},n.getBody())},mceSelectNode:function(y,x,v){p.select(v)},mceInsertContent:function(B,I,K){var y,J,E,z,F,G,D,C,L,x,A,M,v,H;y=n.parser;J=new d.html.Serializer({},n.schema);v='<span id=\"mce_marker\" data-mce-type=\"bookmark\">\\uFEFF</span>';G={content:K,format:\"html\"};p.onBeforeSetContent.dispatch(p,G);K=G.content;if(K.indexOf(\"{$caret}\")==-1){K+=\"{$caret}\"}K=K.replace(/\\{\\$caret\\}/,v);if(!p.isCollapsed()){n.getDoc().execCommand(\"Delete\",false,null)}E=p.getNode();G={context:E.nodeName.toLowerCase()};F=y.parse(K,G);A=F.lastChild;if(A.attr(\"id\")==\"mce_marker\"){D=A;for(A=A.prev;A;A=A.walk(true)){if(A.type==3||!m.isBlock(A.name)){A.parent.insert(D,A,A.name===\"br\");break}}}if(!G.invalid){K=J.serialize(F);A=E.firstChild;M=E.lastChild;if(!A||(A===M&&A.nodeName===\"BR\")){m.setHTML(E,K)}else{p.setContent(K)}}else{p.setContent(v);E=p.getNode();z=n.getBody();if(E.nodeType==9){E=A=z}else{A=E}while(A!==z){E=A;A=A.parentNode}K=E==z?z.innerHTML:m.getOuterHTML(E);K=J.serialize(y.parse(K.replace(/<span (id=\"mce_marker\"|id=mce_marker).+?<\\/span>/i,function(){return J.serialize(F)})));if(E==z){m.setHTML(z,K)}else{m.setOuterHTML(E,K)}}D=m.get(\"mce_marker\");C=m.getRect(D);L=m.getViewPort(n.getWin());if((C.y+C.h>L.y+L.h||C.y<L.y)||(C.x>L.x+L.w||C.x<L.x)){H=d.isIE?n.getDoc().documentElement:n.getBody();H.scrollLeft=C.x;H.scrollTop=C.y-L.h+25}x=m.createRng();A=D.previousSibling;if(A&&A.nodeType==3){x.setStart(A,A.nodeValue.length)}else{x.setStartBefore(D);x.setEndBefore(D)}m.remove(D);p.setRng(x);p.onSetContent.dispatch(p,G);n.addVisual()},mceInsertRawHTML:function(y,x,v){p.setContent(\"tiny_mce_marker\");n.setContent(n.getContent().replace(/tiny_mce_marker/g,function(){return v}))},mceToggleFormat:function(y,x,v){s(v)},mceSetContent:function(y,x,v){n.setContent(v)},\"Indent,Outdent\":function(z){var x,v,y;x=k.indentation;v=/[a-z%]+$/i.exec(x);x=parseInt(x);if(!l(\"InsertUnorderedList\")&&!l(\"InsertOrderedList\")){if(!k.forced_root_block&&!m.getParent(p.getNode(),m.isBlock)){q.apply(\"div\")}e(p.getSelectedBlocks(),function(A){if(z==\"outdent\"){y=Math.max(0,parseInt(A.style.paddingLeft||0)-x);m.setStyle(A,\"paddingLeft\",y?y+v:\"\")}else{m.setStyle(A,\"paddingLeft\",(parseInt(A.style.paddingLeft||0)+x)+v)}})}else{f(z)}},mceRepaint:function(){var x;if(d.isGecko){try{i(a);if(p.getSel()){p.getSel().selectAllChildren(n.getBody())}p.collapse(a);g()}catch(v){}}},mceToggleFormat:function(y,x,v){q.toggle(v)},InsertHorizontalRule:function(){n.execCommand(\"mceInsertContent\",false,\"<hr />\")},mceToggleVisualAid:function(){n.hasVisual=!n.hasVisual;n.addVisual()},mceReplaceContent:function(y,x,v){n.execCommand(\"mceInsertContent\",false,v.replace(/\\{\\$selection\\}/g,p.getContent({format:\"text\"})))},mceInsertLink:function(z,y,x){var v;if(typeof(x)==\"string\"){x={href:x}}v=m.getParent(p.getNode(),\"a\");x.href=x.href.replace(\" \",\"%20\");if(!v||!x.href){q.remove(\"link\")}if(x.href){q.apply(\"link\",x,v)}},selectAll:function(){var x=m.getRoot(),v=m.createRng();if(p.getRng().setStart){v.setStart(x,0);v.setEnd(x,x.childNodes.length);p.setRng(v)}else{f(\"SelectAll\")}}});u({\"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull\":function(z){var x=\"align\"+z.substring(7);var v=p.isCollapsed()?[m.getParent(p.getNode(),m.isBlock)]:p.getSelectedBlocks();var y=d.map(v,function(A){return !!q.matchNode(A,x)});return d.inArray(y,a)!==-1},\"Bold,Italic,Underline,Strikethrough,Superscript,Subscript\":function(v){return t(v)},mceBlockQuote:function(){return t(\"blockquote\")},Outdent:function(){var v;if(k.inline_styles){if((v=m.getParent(p.getStart(),m.isBlock))&&parseInt(v.style.paddingLeft)>0){return a}if((v=m.getParent(p.getEnd(),m.isBlock))&&parseInt(v.style.paddingLeft)>0){return a}}return l(\"InsertUnorderedList\")||l(\"InsertOrderedList\")||(!k.inline_styles&&!!m.getParent(p.getNode(),\"BLOCKQUOTE\"))},\"InsertUnorderedList,InsertOrderedList\":function(x){var v=m.getParent(p.getNode(),\"ul,ol\");return v&&(x===\"insertunorderedlist\"&&v.tagName===\"UL\"||x===\"insertorderedlist\"&&v.tagName===\"OL\")}},\"state\");u({\"FontSize,FontName\":function(y){var x=0,v;if(v=m.getParent(p.getNode(),\"span\")){if(y==\"fontsize\"){x=v.style.fontSize}else{x=v.style.fontFamily.replace(/, /g,\",\").replace(/[\\'\\\"]/g,\"\").toLowerCase()}}return x}},\"value\");u({Undo:function(){n.undoManager.undo()},Redo:function(){n.undoManager.redo()}})}})(tinymce);(function(b){var a=b.util.Dispatcher;b.UndoManager=function(h){var l,i=0,e=[],g,k,j,f;function c(){return b.trim(h.getContent({format:\"raw\",no_events:1}).replace(/<span[^>]+data-mce-bogus[^>]+>[\\u200B\\uFEFF]+<\\/span>/g,\"\"))}function d(){l.typing=false;l.add()}onBeforeAdd=new a(l);k=new a(l);j=new a(l);f=new a(l);k.add(function(m,n){if(m.hasUndo()){return h.onChange.dispatch(h,n,m)}});j.add(function(m,n){return h.onUndo.dispatch(h,n,m)});f.add(function(m,n){return h.onRedo.dispatch(h,n,m)});h.onInit.add(function(){l.add()});h.onBeforeExecCommand.add(function(m,p,o,q,n){if(p!=\"Undo\"&&p!=\"Redo\"&&p!=\"mceRepaint\"&&(!n||!n.skip_undo)){l.beforeChange()}});h.onExecCommand.add(function(m,p,o,q,n){if(p!=\"Undo\"&&p!=\"Redo\"&&p!=\"mceRepaint\"&&(!n||!n.skip_undo)){l.add()}});h.onSaveContent.add(d);h.dom.bind(h.dom.getRoot(),\"dragend\",d);h.dom.bind(h.getBody(),\"focusout\",function(m){if(!h.removed&&l.typing){d()}});h.onKeyUp.add(function(m,o){var n=o.keyCode;if((n>=33&&n<=36)||(n>=37&&n<=40)||n==45||n==13||o.ctrlKey){d()}});h.onKeyDown.add(function(m,o){var n=o.keyCode;if((n>=33&&n<=36)||(n>=37&&n<=40)||n==45){if(l.typing){d()}return}if((n<16||n>20)&&n!=224&&n!=91&&!l.typing){l.beforeChange();l.typing=true;l.add()}});h.onMouseDown.add(function(m,n){if(l.typing){d()}});h.addShortcut(\"ctrl+z\",\"undo_desc\",\"Undo\");h.addShortcut(\"ctrl+y\",\"redo_desc\",\"Redo\");l={data:e,typing:false,onBeforeAdd:onBeforeAdd,onAdd:k,onUndo:j,onRedo:f,beforeChange:function(){g=h.selection.getBookmark(2,true)},add:function(p){var m,n=h.settings,o;p=p||{};p.content=c();l.onBeforeAdd.dispatch(l,p);o=e[i];if(o&&o.content==p.content){return null}if(e[i]){e[i].beforeBookmark=g}if(n.custom_undo_redo_levels){if(e.length>n.custom_undo_redo_levels){for(m=0;m<e.length-1;m++){e[m]=e[m+1]}e.length--;i=e.length}}p.bookmark=h.selection.getBookmark(2,true);if(i<e.length-1){e.length=i+1}e.push(p);i=e.length-1;l.onAdd.dispatch(l,p);h.isNotDirty=0;return p},undo:function(){var n,m;if(l.typing){l.add();l.typing=false}if(i>0){n=e[--i];h.setContent(n.content,{format:\"raw\"});h.selection.moveToBookmark(n.beforeBookmark);l.onUndo.dispatch(l,n)}return n},redo:function(){var m;if(i<e.length-1){m=e[++i];h.setContent(m.content,{format:\"raw\"});h.selection.moveToBookmark(m.bookmark);l.onRedo.dispatch(l,m)}return m},clear:function(){e=[];i=0;l.typing=false},hasUndo:function(){return i>0||this.typing},hasRedo:function(){return i<e.length-1&&!this.typing}};return l}})(tinymce);tinymce.ForceBlocks=function(c){var b=c.settings,e=c.dom,a=c.selection,d=c.schema.getBlockElements();function f(){var j=a.getStart(),h=c.getBody(),g,k,o,s,q,i,l,m=-16777215,p,r;if(!j||j.nodeType!==1||!b.forced_root_block){return}while(j&&j!=h){if(d[j.nodeName]){return}j=j.parentNode}g=a.getRng();if(g.setStart){k=g.startContainer;o=g.startOffset;s=g.endContainer;q=g.endOffset}else{if(g.item){j=g.item(0);g=c.getDoc().body.createTextRange();g.moveToElementText(j)}r=g.parentElement().ownerDocument===c.getDoc();tmpRng=g.duplicate();tmpRng.collapse(true);o=tmpRng.move(\"character\",m)*-1;if(!tmpRng.collapsed){tmpRng=g.duplicate();tmpRng.collapse(false);q=(tmpRng.move(\"character\",m)*-1)-o}}j=h.firstChild;while(j){if(j.nodeType===3||(j.nodeType==1&&!d[j.nodeName])){if(j.nodeType===3&&j.nodeValue.length==0){l=j;j=j.nextSibling;e.remove(l);continue}if(!i){i=e.create(b.forced_root_block);j.parentNode.insertBefore(i,j);p=true}l=j;j=j.nextSibling;i.appendChild(l)}else{i=null;j=j.nextSibling}}if(p){if(g.setStart){g.setStart(k,o);g.setEnd(s,q);a.setRng(g)}else{if(r){try{g=c.getDoc().body.createTextRange();g.moveToElementText(h);g.collapse(true);g.moveStart(\"character\",o);if(q>0){g.moveEnd(\"character\",q)}g.select()}catch(n){}}}c.nodeChanged()}}if(b.forced_root_block){c.onKeyUp.add(f);c.onNodeChange.add(f)}};(function(c){var b=c.DOM,a=c.dom.Event,d=c.each,e=c.extend;c.create(\"tinymce.ControlManager\",{ControlManager:function(f,j){var h=this,g;j=j||{};h.editor=f;h.controls={};h.onAdd=new c.util.Dispatcher(h);h.onPostRender=new c.util.Dispatcher(h);h.prefix=j.prefix||f.id+\"_\";h._cls={};h.onPostRender.add(function(){d(h.controls,function(i){i.postRender()})})},get:function(f){return this.controls[this.prefix+f]||this.controls[f]},setActive:function(h,f){var g=null;if(g=this.get(h)){g.setActive(f)}return g},setDisabled:function(h,f){var g=null;if(g=this.get(h)){g.setDisabled(f)}return g},add:function(g){var f=this;if(g){f.controls[g.id]=g;f.onAdd.dispatch(g,f)}return g},createControl:function(j){var o,k,g,h=this,m=h.editor,n,f;if(!h.controlFactories){h.controlFactories=[];d(m.plugins,function(i){if(i.createControl){h.controlFactories.push(i)}})}n=h.controlFactories;for(k=0,g=n.length;k<g;k++){o=n[k].createControl(j,h);if(o){return h.add(o)}}if(j===\"|\"||j===\"separator\"){return h.createSeparator()}if(m.buttons&&(o=m.buttons[j])){return h.createButton(j,o)}return h.add(o)},createDropMenu:function(f,n,h){var m=this,i=m.editor,j,g,k,l;n=e({\"class\":\"mceDropDown\",constrain:i.settings.constrain_menus},n);n[\"class\"]=n[\"class\"]+\" \"+i.getParam(\"skin\")+\"Skin\";if(k=i.getParam(\"skin_variant\")){n[\"class\"]+=\" \"+i.getParam(\"skin\")+\"Skin\"+k.substring(0,1).toUpperCase()+k.substring(1)}n[\"class\"]+=i.settings.directionality==\"rtl\"?\" mceRtl\":\"\";f=m.prefix+f;l=h||m._cls.dropmenu||c.ui.DropMenu;j=m.controls[f]=new l(f,n);j.onAddItem.add(function(r,q){var p=q.settings;p.title=i.getLang(p.title,p.title);if(!p.onclick){p.onclick=function(o){if(p.cmd){i.execCommand(p.cmd,p.ui||false,p.value)}}}});i.onRemove.add(function(){j.destroy()});if(c.isIE){j.onShowMenu.add(function(){i.focus();g=i.selection.getBookmark(1)});j.onHideMenu.add(function(){if(g){i.selection.moveToBookmark(g);g=0}})}return m.add(j)},createListBox:function(f,n,h){var l=this,j=l.editor,i,k,m;if(l.get(f)){return null}n.title=j.translate(n.title);n.scope=n.scope||j;if(!n.onselect){n.onselect=function(o){j.execCommand(n.cmd,n.ui||false,o||n.value)}}n=e({title:n.title,\"class\":\"mce_\"+f,scope:n.scope,control_manager:l},n);f=l.prefix+f;function g(o){return o.settings.use_accessible_selects&&!c.isGecko}if(j.settings.use_native_selects||g(j)){k=new c.ui.NativeListBox(f,n)}else{m=h||l._cls.listbox||c.ui.ListBox;k=new m(f,n,j)}l.controls[f]=k;if(c.isWebKit){k.onPostRender.add(function(p,o){a.add(o,\"mousedown\",function(){j.bookmark=j.selection.getBookmark(1)});a.add(o,\"focus\",function(){j.selection.moveToBookmark(j.bookmark);j.bookmark=null})})}if(k.hideMenu){j.onMouseDown.add(k.hideMenu,k)}return l.add(k)},createButton:function(m,i,l){var h=this,g=h.editor,j,k,f;if(h.get(m)){return null}i.title=g.translate(i.title);i.label=g.translate(i.label);i.scope=i.scope||g;if(!i.onclick&&!i.menu_button){i.onclick=function(){g.execCommand(i.cmd,i.ui||false,i.value)}}i=e({title:i.title,\"class\":\"mce_\"+m,unavailable_prefix:g.getLang(\"unavailable\",\"\"),scope:i.scope,control_manager:h},i);m=h.prefix+m;if(i.menu_button){f=l||h._cls.menubutton||c.ui.MenuButton;k=new f(m,i,g);g.onMouseDown.add(k.hideMenu,k)}else{f=h._cls.button||c.ui.Button;k=new f(m,i,g)}return h.add(k)},createMenuButton:function(h,f,g){f=f||{};f.menu_button=1;return this.createButton(h,f,g)},createSplitButton:function(m,i,l){var h=this,g=h.editor,j,k,f;if(h.get(m)){return null}i.title=g.translate(i.title);i.scope=i.scope||g;if(!i.onclick){i.onclick=function(n){g.execCommand(i.cmd,i.ui||false,n||i.value)}}if(!i.onselect){i.onselect=function(n){g.execCommand(i.cmd,i.ui||false,n||i.value)}}i=e({title:i.title,\"class\":\"mce_\"+m,scope:i.scope,control_manager:h},i);m=h.prefix+m;f=l||h._cls.splitbutton||c.ui.SplitButton;k=h.add(new f(m,i,g));g.onMouseDown.add(k.hideMenu,k);return k},createColorSplitButton:function(f,n,h){var l=this,j=l.editor,i,k,m,g;if(l.get(f)){return null}n.title=j.translate(n.title);n.scope=n.scope||j;if(!n.onclick){n.onclick=function(o){if(c.isIE){g=j.selection.getBookmark(1)}j.execCommand(n.cmd,n.ui||false,o||n.value)}}if(!n.onselect){n.onselect=function(o){j.execCommand(n.cmd,n.ui||false,o||n.value)}}n=e({title:n.title,\"class\":\"mce_\"+f,menu_class:j.getParam(\"skin\")+\"Skin\",scope:n.scope,more_colors_title:j.getLang(\"more_colors\")},n);f=l.prefix+f;m=h||l._cls.colorsplitbutton||c.ui.ColorSplitButton;k=new m(f,n,j);j.onMouseDown.add(k.hideMenu,k);j.onRemove.add(function(){k.destroy()});if(c.isIE){k.onShowMenu.add(function(){j.focus();g=j.selection.getBookmark(1)});k.onHideMenu.add(function(){if(g){j.selection.moveToBookmark(g);g=0}})}return l.add(k)},createToolbar:function(k,h,j){var i,g=this,f;k=g.prefix+k;f=j||g._cls.toolbar||c.ui.Toolbar;i=new f(k,h,g.editor);if(g.get(k)){return null}return g.add(i)},createToolbarGroup:function(k,h,j){var i,g=this,f;k=g.prefix+k;f=j||this._cls.toolbarGroup||c.ui.ToolbarGroup;i=new f(k,h,g.editor);if(g.get(k)){return null}return g.add(i)},createSeparator:function(g){var f=g||this._cls.separator||c.ui.Separator;return new f()},setControlType:function(g,f){return this._cls[g.toLowerCase()]=f},destroy:function(){d(this.controls,function(f){f.destroy()});this.controls=null}})})(tinymce);(function(d){var a=d.util.Dispatcher,e=d.each,c=d.isIE,b=d.isOpera;d.create(\"tinymce.WindowManager\",{WindowManager:function(f){var g=this;g.editor=f;g.onOpen=new a(g);g.onClose=new a(g);g.params={};g.features={}},open:function(z,h){var v=this,k=\"\",n,m,i=v.editor.settings.dialog_type==\"modal\",q,o,j,g=d.DOM.getViewPort(),r;z=z||{};h=h||{};o=b?g.w:screen.width;j=b?g.h:screen.height;z.name=z.name||\"mc_\"+new Date().getTime();z.width=parseInt(z.width||320);z.height=parseInt(z.height||240);z.resizable=true;z.left=z.left||parseInt(o/2)-(z.width/2);z.top=z.top||parseInt(j/2)-(z.height/2);h.inline=false;h.mce_width=z.width;h.mce_height=z.height;h.mce_auto_focus=z.auto_focus;if(i){if(c){z.center=true;z.help=false;z.dialogWidth=z.width+\"px\";z.dialogHeight=z.height+\"px\";z.scroll=z.scrollbars||false}}e(z,function(p,f){if(d.is(p,\"boolean\")){p=p?\"yes\":\"no\"}if(!/^(name|url)$/.test(f)){if(c&&i){k+=(k?\";\":\"\")+f+\":\"+p}else{k+=(k?\",\":\"\")+f+\"=\"+p}}});v.features=z;v.params=h;v.onOpen.dispatch(v,z,h);r=z.url||z.file;r=d._addVer(r);try{if(c&&i){q=1;window.showModalDialog(r,window,k)}else{q=window.open(r,z.name,k)}}catch(l){}if(!q){alert(v.editor.getLang(\"popup_blocked\"))}},close:function(f){f.close();this.onClose.dispatch(this)},createInstance:function(i,h,g,m,l,k){var j=d.resolve(i);return new j(h,g,m,l,k)},confirm:function(h,f,i,g){g=g||window;f.call(i||this,g.confirm(this._decode(this.editor.getLang(h,h))))},alert:function(h,f,j,g){var i=this;g=g||window;g.alert(i._decode(i.editor.getLang(h,h)));if(f){f.call(j||i)}},resizeBy:function(f,g,h){h.resizeBy(f,g)},_decode:function(f){return d.DOM.decode(f).replace(/\\\\n/g,\"\\n\")}})}(tinymce));(function(a){a.Formatter=function(aa){var Q={},T=a.each,c=aa.dom,r=aa.selection,t=a.dom.TreeWalker,N=new a.dom.RangeUtils(c),d=aa.schema.isValidChild,A=a.isArray,H=c.isBlock,m=aa.settings.forced_root_block,s=c.nodeIndex,G=\"\\uFEFF\",e=/^(src|href|style)$/,X=false,C=true,P,D,x=c.getContentEditable;function I(ab){if(ab.nodeType){ab=ab.nodeName}return !!aa.schema.getTextBlockElements()[ab.toLowerCase()]}function n(ac,ab){return c.getParents(ac,ab,c.getRoot())}function b(ab){return ab.nodeType===1&&ab.id===\"_mce_caret\"}function j(){l({alignleft:[{selector:\"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li\",styles:{textAlign:\"left\"},defaultBlock:\"div\"},{selector:\"img,table\",collapsed:false,styles:{\"float\":\"left\"}}],aligncenter:[{selector:\"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li\",styles:{textAlign:\"center\"},defaultBlock:\"div\"},{selector:\"img\",collapsed:false,styles:{display:\"block\",marginLeft:\"auto\",marginRight:\"auto\"}},{selector:\"table\",collapsed:false,styles:{marginLeft:\"auto\",marginRight:\"auto\"}}],alignright:[{selector:\"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li\",styles:{textAlign:\"right\"},defaultBlock:\"div\"},{selector:\"img,table\",collapsed:false,styles:{\"float\":\"right\"}}],alignfull:[{selector:\"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li\",styles:{textAlign:\"justify\"},defaultBlock:\"div\"}],bold:[{inline:\"strong\",remove:\"all\"},{inline:\"span\",styles:{fontWeight:\"bold\"}},{inline:\"b\",remove:\"all\"}],italic:[{inline:\"em\",remove:\"all\"},{inline:\"span\",styles:{fontStyle:\"italic\"}},{inline:\"i\",remove:\"all\"}],underline:[{inline:\"span\",styles:{textDecoration:\"underline\"},exact:true},{inline:\"u\",remove:\"all\"}],strikethrough:[{inline:\"span\",styles:{textDecoration:\"line-through\"},exact:true},{inline:\"strike\",remove:\"all\"}],forecolor:{inline:\"span\",styles:{color:\"%value\"},wrap_links:false},hilitecolor:{inline:\"span\",styles:{backgroundColor:\"%value\"},wrap_links:false},fontname:{inline:\"span\",styles:{fontFamily:\"%value\"}},fontsize:{inline:\"span\",styles:{fontSize:\"%value\"}},fontsize_class:{inline:\"span\",attributes:{\"class\":\"%value\"}},blockquote:{block:\"blockquote\",wrapper:1,remove:\"all\"},subscript:{inline:\"sub\"},superscript:{inline:\"sup\"},link:{inline:\"a\",selector:\"a\",remove:\"all\",split:true,deep:true,onmatch:function(ab){return true},onformat:function(ad,ab,ac){T(ac,function(af,ae){c.setAttrib(ad,ae,af)})}},removeformat:[{selector:\"b,strong,em,i,font,u,strike\",remove:\"all\",split:true,expand:false,block_expand:true,deep:true},{selector:\"span\",attributes:[\"style\",\"class\"],remove:\"empty\",split:true,expand:false,deep:true},{selector:\"*\",attributes:[\"style\",\"class\"],split:false,expand:false,deep:true}]});T(\"p h1 h2 h3 h4 h5 h6 div address pre div code dt dd samp\".split(/\\s/),function(ab){l(ab,{block:ab,remove:\"all\"})});l(aa.settings.formats)}function W(){aa.addShortcut(\"ctrl+b\",\"bold_desc\",\"Bold\");aa.addShortcut(\"ctrl+i\",\"italic_desc\",\"Italic\");aa.addShortcut(\"ctrl+u\",\"underline_desc\",\"Underline\");for(var ab=1;ab<=6;ab++){aa.addShortcut(\"ctrl+\"+ab,\"\",[\"FormatBlock\",false,\"h\"+ab])}aa.addShortcut(\"ctrl+7\",\"\",[\"FormatBlock\",false,\"p\"]);aa.addShortcut(\"ctrl+8\",\"\",[\"FormatBlock\",false,\"div\"]);aa.addShortcut(\"ctrl+9\",\"\",[\"FormatBlock\",false,\"address\"])}function V(ab){return ab?Q[ab]:Q}function l(ab,ac){if(ab){if(typeof(ab)!==\"string\"){T(ab,function(ae,ad){l(ad,ae)})}else{ac=ac.length?ac:[ac];T(ac,function(ad){if(ad.deep===D){ad.deep=!ad.selector}if(ad.split===D){ad.split=!ad.selector||ad.inline}if(ad.remove===D&&ad.selector&&!ad.inline){ad.remove=\"none\"}if(ad.selector&&ad.inline){ad.mixed=true;ad.block_expand=true}if(typeof(ad.classes)===\"string\"){ad.classes=ad.classes.split(/\\s+/)}});Q[ab]=ac}}}var i=function(ac){var ab;aa.dom.getParent(ac,function(ad){ab=aa.dom.getStyle(ad,\"text-decoration\");return ab&&ab!==\"none\"});return ab};var L=function(ab){var ac;if(ab.nodeType===1&&ab.parentNode&&ab.parentNode.nodeType===1){ac=i(ab.parentNode);if(aa.dom.getStyle(ab,\"color\")&&ac){aa.dom.setStyle(ab,\"text-decoration\",ac)}else{if(aa.dom.getStyle(ab,\"textdecoration\")===ac){aa.dom.setStyle(ab,\"text-decoration\",null)}}}};function Y(ae,al,ag){var ah=V(ae),am=ah[0],ak,ac,aj,ai=r.isCollapsed();function ab(aq,ap){ap=ap||am;if(aq){if(ap.onformat){ap.onformat(aq,ap,al,ag)}T(ap.styles,function(at,ar){c.setStyle(aq,ar,q(at,al))});T(ap.attributes,function(at,ar){c.setAttrib(aq,ar,q(at,al))});T(ap.classes,function(ar){ar=q(ar,al);if(!c.hasClass(aq,ar)){c.addClass(aq,ar)}})}}function af(){function ar(ay,aw){var ax=new t(aw);for(ag=ax.current();ag;ag=ax.prev()){if(ag.childNodes.length>1||ag==ay||ag.tagName==\"BR\"){return ag}}}var aq=aa.selection.getRng();var av=aq.startContainer;var ap=aq.endContainer;if(av!=ap&&aq.endOffset===0){var au=ar(av,ap);var at=au.nodeType==3?au.length:au.childNodes.length;aq.setEnd(au,at)}return aq}function ad(at,ay,aw,av,aq){var ap=[],ar=-1,ax,aA=-1,au=-1,az;T(at.childNodes,function(aC,aB){if(aC.nodeName===\"UL\"||aC.nodeName===\"OL\"){ar=aB;ax=aC;return false}});T(at.childNodes,function(aC,aB){if(aC.nodeName===\"SPAN\"&&c.getAttrib(aC,\"data-mce-type\")==\"bookmark\"){if(aC.id==ay.id+\"_start\"){aA=aB}else{if(aC.id==ay.id+\"_end\"){au=aB}}}});if(ar<=0||(aA<ar&&au>ar)){T(a.grep(at.childNodes),aq);return 0}else{az=c.clone(aw,X);T(a.grep(at.childNodes),function(aC,aB){if((aA<ar&&aB<ar)||(aA>ar&&aB>ar)){ap.push(aC);aC.parentNode.removeChild(aC)}});if(aA<ar){at.insertBefore(az,ax)}else{if(aA>ar){at.insertBefore(az,ax.nextSibling)}}av.push(az);T(ap,function(aB){az.appendChild(aB)});return az}}function an(aq,at,aw){var ap=[],av,ar,au=true;av=am.inline||am.block;ar=c.create(av);ab(ar);N.walk(aq,function(ax){var ay;function az(aA){var aF,aD,aB,aC,aE;aE=au;aF=aA.nodeName.toLowerCase();aD=aA.parentNode.nodeName.toLowerCase();if(aA.nodeType===1&&x(aA)){aE=au;au=x(aA)===\"true\";aC=true}if(g(aF,\"br\")){ay=0;if(am.block){c.remove(aA)}return}if(am.wrapper&&y(aA,ae,al)){ay=0;return}if(au&&!aC&&am.block&&!am.wrapper&&I(aF)){aA=c.rename(aA,av);ab(aA);ap.push(aA);ay=0;return}if(am.selector){T(ah,function(aG){if(\"collapsed\" in aG&&aG.collapsed!==ai){return}if(c.is(aA,aG.selector)&&!b(aA)){ab(aA,aG);aB=true}});if(!am.inline||aB){ay=0;return}}if(au&&!aC&&d(av,aF)&&d(aD,av)&&!(!aw&&aA.nodeType===3&&aA.nodeValue.length===1&&aA.nodeValue.charCodeAt(0)===65279)&&!b(aA)&&(!am.inline||!H(aA))){if(!ay){ay=c.clone(ar,X);aA.parentNode.insertBefore(ay,aA);ap.push(ay)}ay.appendChild(aA)}else{if(aF==\"li\"&&at){ay=ad(aA,at,ar,ap,az)}else{ay=0;T(a.grep(aA.childNodes),az);if(aC){au=aE}ay=0}}}T(ax,az)});if(am.wrap_links===false){T(ap,function(ax){function ay(aC){var aB,aA,az;if(aC.nodeName===\"A\"){aA=c.clone(ar,X);ap.push(aA);az=a.grep(aC.childNodes);for(aB=0;aB<az.length;aB++){aA.appendChild(az[aB])}aC.appendChild(aA)}T(a.grep(aC.childNodes),ay)}ay(ax)})}T(ap,function(az){var ax;function aA(aC){var aB=0;T(aC.childNodes,function(aD){if(!f(aD)&&!K(aD)){aB++}});return aB}function ay(aB){var aD,aC;T(aB.childNodes,function(aE){if(aE.nodeType==1&&!K(aE)&&!b(aE)){aD=aE;return X}});if(aD&&h(aD,am)){aC=c.clone(aD,X);ab(aC);c.replace(aC,aB,C);c.remove(aD,1)}return aC||aB}ax=aA(az);if((ap.length>1||!H(az))&&ax===0){c.remove(az,1);return}if(am.inline||am.wrapper){if(!am.exact&&ax===1){az=ay(az)}T(ah,function(aB){T(c.select(aB.inline,az),function(aD){var aC;if(aB.wrap_links===false){aC=aD.parentNode;do{if(aC.nodeName===\"A\"){return}}while(aC=aC.parentNode)}Z(aB,al,aD,aB.exact?aD:null)})});if(y(az.parentNode,ae,al)){c.remove(az,1);az=0;return C}if(am.merge_with_parents){c.getParent(az.parentNode,function(aB){if(y(aB,ae,al)){c.remove(az,1);az=0;return C}})}if(az&&am.merge_siblings!==false){az=u(E(az),az);az=u(az,E(az,C))}}})}if(am){if(ag){if(ag.nodeType){ac=c.createRng();ac.setStartBefore(ag);ac.setEndAfter(ag);an(p(ac,ah),null,true)}else{an(ag,null,true)}}else{if(!ai||!am.inline||c.select(\"td.mceSelected,th.mceSelected\").length){var ao=aa.selection.getNode();if(!m&&ah[0].defaultBlock&&!c.getParent(ao,c.isBlock)){Y(ah[0].defaultBlock)}aa.selection.setRng(af());ak=r.getBookmark();an(p(r.getRng(C),ah),ak);if(am.styles&&(am.styles.color||am.styles.textDecoration)){a.walk(ao,L,\"childNodes\");L(ao)}r.moveToBookmark(ak);R(r.getRng(C));aa.nodeChanged()}else{U(\"apply\",ae,al)}}}}function B(ad,am,af){var ag=V(ad),ao=ag[0],ak,aj,ac,al=true;function ae(av){var au,at,ar,aq,ax,aw;if(av.nodeType===3){return}if(av.nodeType===1&&x(av)){ax=al;al=x(av)===\"true\";aw=true}au=a.grep(av.childNodes);if(al&&!aw){for(at=0,ar=ag.length;at<ar;at++){if(Z(ag[at],am,av,av)){break}}}if(ao.deep){if(au.length){for(at=0,ar=au.length;at<ar;at++){ae(au[at])}if(aw){al=ax}}}}function ah(aq){var ar;T(n(aq.parentNode).reverse(),function(at){var au;if(!ar&&at.id!=\"_start\"&&at.id!=\"_end\"){au=y(at,ad,am);if(au&&au.split!==false){ar=at}}});return ar}function ab(au,aq,aw,az){var aA,ay,ax,at,av,ar;if(au){ar=au.parentNode;for(aA=aq.parentNode;aA&&aA!=ar;aA=aA.parentNode){ay=c.clone(aA,X);for(av=0;av<ag.length;av++){if(Z(ag[av],am,ay,ay)){ay=0;break}}if(ay){if(ax){ay.appendChild(ax)}if(!at){at=ay}ax=ay}}if(az&&(!ao.mixed||!H(au))){aq=c.split(au,aq)}if(ax){aw.parentNode.insertBefore(ax,aw);at.appendChild(aw)}}return aq}function an(aq){return ab(ah(aq),aq,aq,true)}function ai(at){var ar=c.get(at?\"_start\":\"_end\"),aq=ar[at?\"firstChild\":\"lastChild\"];if(K(aq)){aq=aq[at?\"firstChild\":\"lastChild\"]}c.remove(ar,true);return aq}function ap(aq){var at,au,ar;aq=p(aq,ag,C);if(ao.split){at=M(aq,C);au=M(aq);if(at!=au){if(/^(TR|TD)$/.test(at.nodeName)&&at.firstChild){at=(at.nodeName==\"TD\"?at.firstChild:at.firstChild.firstChild)||at}at=S(at,\"span\",{id:\"_start\",\"data-mce-type\":\"bookmark\"});au=S(au,\"span\",{id:\"_end\",\"data-mce-type\":\"bookmark\"});an(at);an(au);at=ai(C);au=ai()}else{at=au=an(at)}aq.startContainer=at.parentNode;aq.startOffset=s(at);aq.endContainer=au.parentNode;aq.endOffset=s(au)+1}N.walk(aq,function(av){T(av,function(aw){ae(aw);if(aw.nodeType===1&&aa.dom.getStyle(aw,\"text-decoration\")===\"underline\"&&aw.parentNode&&i(aw.parentNode)===\"underline\"){Z({deep:false,exact:true,inline:\"span\",styles:{textDecoration:\"underline\"}},null,aw)}})})}if(af){if(af.nodeType){ac=c.createRng();ac.setStartBefore(af);ac.setEndAfter(af);ap(ac)}else{ap(af)}return}if(!r.isCollapsed()||!ao.inline||c.select(\"td.mceSelected,th.mceSelected\").length){ak=r.getBookmark();ap(r.getRng(C));r.moveToBookmark(ak);if(ao.inline&&k(ad,am,r.getStart())){R(r.getRng(true))}aa.nodeChanged()}else{U(\"remove\",ad,am)}}function F(ac,ae,ad){var ab=V(ac);if(k(ac,ae,ad)&&(!(\"toggle\" in ab[0])||ab[0].toggle)){B(ac,ae,ad)}else{Y(ac,ae,ad)}}function y(ac,ab,ah,af){var ad=V(ab),ai,ag,ae;function aj(an,ap,aq){var am,ao,ak=ap[aq],al;if(ap.onmatch){return ap.onmatch(an,ap,aq)}if(ak){if(ak.length===D){for(am in ak){if(ak.hasOwnProperty(am)){if(aq===\"attributes\"){ao=c.getAttrib(an,am)}else{ao=O(an,am)}if(af&&!ao&&!ap.exact){return}if((!af||ap.exact)&&!g(ao,q(ak[am],ah))){return}}}}else{for(al=0;al<ak.length;al++){if(aq===\"attributes\"?c.getAttrib(an,ak[al]):O(an,ak[al])){return ap}}}}return ap}if(ad&&ac){for(ag=0;ag<ad.length;ag++){ai=ad[ag];if(h(ac,ai)&&aj(ac,ai,\"attributes\")&&aj(ac,ai,\"styles\")){if(ae=ai.classes){for(ag=0;ag<ae.length;ag++){if(!c.hasClass(ac,ae[ag])){return}}}return ai}}}}function k(ad,af,ae){var ac;function ab(ag){ag=c.getParent(ag,function(ah){return !!y(ah,ad,af,true)});return y(ag,ad,af)}if(ae){return ab(ae)}ae=r.getNode();if(ab(ae)){return C}ac=r.getStart();if(ac!=ae){if(ab(ac)){return C}}return X}function v(ai,ah){var af,ag=[],ae={},ad,ac,ab;af=r.getStart();c.getParent(af,function(al){var ak,aj;for(ak=0;ak<ai.length;ak++){aj=ai[ak];if(!ae[aj]&&y(al,aj,ah)){ae[aj]=true;ag.push(aj)}}},c.getRoot());return ag}function z(af){var ah=V(af),ae,ad,ag,ac,ab;if(ah){ae=r.getStart();ad=n(ae);for(ac=ah.length-1;ac>=0;ac--){ab=ah[ac].selector;if(!ab){return C}for(ag=ad.length-1;ag>=0;ag--){if(c.is(ad[ag],ab)){return C}}}}return X}function J(ab,ae,ac){var ad;if(!P){P={};ad={};aa.onNodeChange.addToTop(function(ag,af,ai){var ah=n(ai),aj={};T(P,function(ak,al){T(ah,function(am){if(y(am,al,{},ak.similar)){if(!ad[al]){T(ak,function(an){an(true,{node:am,format:al,parents:ah})});ad[al]=ak}aj[al]=ak;return false}})});T(ad,function(ak,al){if(!aj[al]){delete ad[al];T(ak,function(am){am(false,{node:ai,format:al,parents:ah})})}})})}T(ab.split(\",\"),function(af){if(!P[af]){P[af]=[];P[af].similar=ac}P[af].push(ae)});return this}a.extend(this,{get:V,register:l,apply:Y,remove:B,toggle:F,match:k,matchAll:v,matchNode:y,canApply:z,formatChanged:J});j();W();function h(ab,ac){if(g(ab,ac.inline)){return C}if(g(ab,ac.block)){return C}if(ac.selector){return c.is(ab,ac.selector)}}function g(ac,ab){ac=ac||\"\";ab=ab||\"\";ac=\"\"+(ac.nodeName||ac);ab=\"\"+(ab.nodeName||ab);return ac.toLowerCase()==ab.toLowerCase()}function O(ac,ab){var ad=c.getStyle(ac,ab);if(ab==\"color\"||ab==\"backgroundColor\"){ad=c.toHex(ad)}if(ab==\"fontWeight\"&&ad==700){ad=\"bold\"}return\"\"+ad}function q(ab,ac){if(typeof(ab)!=\"string\"){ab=ab(ac)}else{if(ac){ab=ab.replace(/%(\\w+)/g,function(ae,ad){return ac[ad]||ae})}}return ab}function f(ab){return ab&&ab.nodeType===3&&/^([\\t \\r\\n]+|)$/.test(ab.nodeValue)}function S(ad,ac,ab){var ae=c.create(ac,ab);ad.parentNode.insertBefore(ae,ad);ae.appendChild(ad);return ae}function p(ab,am,ae){var ap,an,ah,al,ad=ab.startContainer,ai=ab.startOffset,ar=ab.endContainer,ak=ab.endOffset;function ao(aA){var au,ax,az,aw,av,at;au=ax=aA?ad:ar;av=aA?\"previousSibling\":\"nextSibling\";at=c.getRoot();function ay(aB){return aB.nodeName==\"BR\"&&aB.getAttribute(\"data-mce-bogus\")&&!aB.nextSibling}if(au.nodeType==3&&!f(au)){if(aA?ai>0:ak<au.nodeValue.length){return au}}for(;;){if(!am[0].block_expand&&H(ax)){return ax}for(aw=ax[av];aw;aw=aw[av]){if(!K(aw)&&!f(aw)&&!ay(aw)){return ax}}if(ax.parentNode==at){au=ax;break}ax=ax.parentNode}return au}function ag(at,au){if(au===D){au=at.nodeType===3?at.length:at.childNodes.length}while(at&&at.hasChildNodes()){at=at.childNodes[au];if(at){au=at.nodeType===3?at.length:at.childNodes.length}}return{node:at,offset:au}}if(ad.nodeType==1&&ad.hasChildNodes()){an=ad.childNodes.length-1;ad=ad.childNodes[ai>an?an:ai];if(ad.nodeType==3){ai=0}}if(ar.nodeType==1&&ar.hasChildNodes()){an=ar.childNodes.length-1;ar=ar.childNodes[ak>an?an:ak-1];if(ar.nodeType==3){ak=ar.nodeValue.length}}function aq(au){var at=au;while(at){if(at.nodeType===1&&x(at)){return x(at)===\"false\"?at:au}at=at.parentNode}return au}function aj(au,ay,aA){var ax,av,az,at;function aw(aC,aE){var aF,aB,aD=aC.nodeValue;if(typeof(aE)==\"undefined\"){aE=aA?aD.length:0}if(aA){aF=aD.lastIndexOf(\" \",aE);aB=aD.lastIndexOf(\"\\u00a0\",aE);aF=aF>aB?aF:aB;if(aF!==-1&&!ae){aF++}}else{aF=aD.indexOf(\" \",aE);aB=aD.indexOf(\"\\u00a0\",aE);aF=aF!==-1&&(aB===-1||aF<aB)?aF:aB}return aF}if(au.nodeType===3){az=aw(au,ay);if(az!==-1){return{container:au,offset:az}}at=au}ax=new t(au,c.getParent(au,H)||aa.getBody());while(av=ax[aA?\"prev\":\"next\"]()){if(av.nodeType===3){at=av;az=aw(av);if(az!==-1){return{container:av,offset:az}}}else{if(H(av)){break}}}if(at){if(aA){ay=0}else{ay=at.length}return{container:at,offset:ay}}}function af(au,at){var av,aw,ay,ax;if(au.nodeType==3&&au.nodeValue.length===0&&au[at]){au=au[at]}av=n(au);for(aw=0;aw<av.length;aw++){for(ay=0;ay<am.length;ay++){ax=am[ay];if(\"collapsed\" in ax&&ax.collapsed!==ab.collapsed){continue}if(c.is(av[aw],ax.selector)){return av[aw]}}}return au}function ac(au,at,aw){var av;if(!am[0].wrapper){av=c.getParent(au,am[0].block)}if(!av){av=c.getParent(au.nodeType==3?au.parentNode:au,I)}if(av&&am[0].wrapper){av=n(av,\"ul,ol\").reverse()[0]||av}if(!av){av=au;while(av[at]&&!H(av[at])){av=av[at];if(g(av,\"br\")){break}}}return av||au}ad=aq(ad);ar=aq(ar);if(K(ad.parentNode)||K(ad)){ad=K(ad)?ad:ad.parentNode;ad=ad.nextSibling||ad;if(ad.nodeType==3){ai=0}}if(K(ar.parentNode)||K(ar)){ar=K(ar)?ar:ar.parentNode;ar=ar.previousSibling||ar;if(ar.nodeType==3){ak=ar.length}}if(am[0].inline){if(ab.collapsed){al=aj(ad,ai,true);if(al){ad=al.container;ai=al.offset}al=aj(ar,ak);if(al){ar=al.container;ak=al.offset}}ah=ag(ar,ak);if(ah.node){while(ah.node&&ah.offset===0&&ah.node.previousSibling){ah=ag(ah.node.previousSibling)}if(ah.node&&ah.offset>0&&ah.node.nodeType===3&&ah.node.nodeValue.charAt(ah.offset-1)===\" \"){if(ah.offset>1){ar=ah.node;ar.splitText(ah.offset-1)}}}}if(am[0].inline||am[0].block_expand){if(!am[0].inline||(ad.nodeType!=3||ai===0)){ad=ao(true)}if(!am[0].inline||(ar.nodeType!=3||ak===ar.nodeValue.length)){ar=ao()}}if(am[0].selector&&am[0].expand!==X&&!am[0].inline){ad=af(ad,\"previousSibling\");ar=af(ar,\"nextSibling\")}if(am[0].block||am[0].selector){ad=ac(ad,\"previousSibling\");ar=ac(ar,\"nextSibling\");if(am[0].block){if(!H(ad)){ad=ao(true)}if(!H(ar)){ar=ao()}}}if(ad.nodeType==1){ai=s(ad);ad=ad.parentNode}if(ar.nodeType==1){ak=s(ar)+1;ar=ar.parentNode}return{startContainer:ad,startOffset:ai,endContainer:ar,endOffset:ak}}function Z(ah,ag,ae,ab){var ad,ac,af;if(!h(ae,ah)){return X}if(ah.remove!=\"all\"){T(ah.styles,function(aj,ai){aj=q(aj,ag);if(typeof(ai)===\"number\"){ai=aj;ab=0}if(!ab||g(O(ab,ai),aj)){c.setStyle(ae,ai,\"\")}af=1});if(af&&c.getAttrib(ae,\"style\")==\"\"){ae.removeAttribute(\"style\");ae.removeAttribute(\"data-mce-style\")}T(ah.attributes,function(ak,ai){var aj;ak=q(ak,ag);if(typeof(ai)===\"number\"){ai=ak;ab=0}if(!ab||g(c.getAttrib(ab,ai),ak)){if(ai==\"class\"){ak=c.getAttrib(ae,ai);if(ak){aj=\"\";T(ak.split(/\\s+/),function(al){if(/mce\\w+/.test(al)){aj+=(aj?\" \":\"\")+al}});if(aj){c.setAttrib(ae,ai,aj);return}}}if(ai==\"class\"){ae.removeAttribute(\"className\")}if(e.test(ai)){ae.removeAttribute(\"data-mce-\"+ai)}ae.removeAttribute(ai)}});T(ah.classes,function(ai){ai=q(ai,ag);if(!ab||c.hasClass(ab,ai)){c.removeClass(ae,ai)}});ac=c.getAttribs(ae);for(ad=0;ad<ac.length;ad++){if(ac[ad].nodeName.indexOf(\"_\")!==0){return X}}}if(ah.remove!=\"none\"){o(ae,ah);return C}}function o(ad,ae){var ab=ad.parentNode,ac;function af(ah,ag,ai){ah=E(ah,ag,ai);return !ah||(ah.nodeName==\"BR\"||H(ah))}if(ae.block){if(!m){if(H(ad)&&!H(ab)){if(!af(ad,X)&&!af(ad.firstChild,C,1)){ad.insertBefore(c.create(\"br\"),ad.firstChild)}if(!af(ad,C)&&!af(ad.lastChild,X,1)){ad.appendChild(c.create(\"br\"))}}}else{if(ab==c.getRoot()){if(!ae.list_block||!g(ad,ae.list_block)){T(a.grep(ad.childNodes),function(ag){if(d(m,ag.nodeName.toLowerCase())){if(!ac){ac=S(ag,m)}else{ac.appendChild(ag)}}else{ac=0}})}}}}if(ae.selector&&ae.inline&&!g(ae.inline,ad)){return}c.remove(ad,1)}function E(ac,ab,ad){if(ac){ab=ab?\"nextSibling\":\"previousSibling\";for(ac=ad?ac:ac[ab];ac;ac=ac[ab]){if(ac.nodeType==1||!f(ac)){return ac}}}}function K(ab){return ab&&ab.nodeType==1&&ab.getAttribute(\"data-mce-type\")==\"bookmark\"}function u(af,ae){var ab,ad,ac;function ah(ak,aj){if(ak.nodeName!=aj.nodeName){return X}function ai(am){var an={};T(c.getAttribs(am),function(ao){var ap=ao.nodeName.toLowerCase();if(ap.indexOf(\"_\")!==0&&ap!==\"style\"){an[ap]=c.getAttrib(am,ap)}});return an}function al(ap,ao){var an,am;for(am in ap){if(ap.hasOwnProperty(am)){an=ao[am];if(an===D){return X}if(ap[am]!=an){return X}delete ao[am]}}for(am in ao){if(ao.hasOwnProperty(am)){return X}}return C}if(!al(ai(ak),ai(aj))){return X}if(!al(c.parseStyle(c.getAttrib(ak,\"style\")),c.parseStyle(c.getAttrib(aj,\"style\")))){return X}return C}function ag(aj,ai){for(ad=aj;ad;ad=ad[ai]){if(ad.nodeType==3&&ad.nodeValue.length!==0){return aj}if(ad.nodeType==1&&!K(ad)){return ad}}return aj}if(af&&ae){af=ag(af,\"previousSibling\");ae=ag(ae,\"nextSibling\");if(ah(af,ae)){for(ad=af.nextSibling;ad&&ad!=ae;){ac=ad;ad=ad.nextSibling;af.appendChild(ac)}c.remove(ae);T(a.grep(ae.childNodes),function(ai){af.appendChild(ai)});return af}}return ae}function M(ac,ag){var ab,af,ad,ae;ab=ac[ag?\"startContainer\":\"endContainer\"];af=ac[ag?\"startOffset\":\"endOffset\"];if(ab.nodeType==1){ad=ab.childNodes.length-1;if(!ag&&af){af--}ab=ab.childNodes[af>ad?ad:af]}if(ab.nodeType===3&&ag&&af>=ab.nodeValue.length){ab=new t(ab,aa.getBody()).next()||ab}if(ab.nodeType===3&&!ag&&af===0){ab=new t(ab,aa.getBody()).prev()||ab}return ab}function U(ak,ab,ai){var al=\"_mce_caret\",ac=aa.settings.caret_debug;function ad(ap){var ao=c.create(\"span\",{id:al,\"data-mce-bogus\":true,style:ac?\"color:red\":\"\"});if(ap){ao.appendChild(aa.getDoc().createTextNode(G))}return ao}function aj(ap,ao){while(ap){if((ap.nodeType===3&&ap.nodeValue!==G)||ap.childNodes.length>1){return false}if(ao&&ap.nodeType===1){ao.push(ap)}ap=ap.firstChild}return true}function ag(ao){while(ao){if(ao.id===al){return ao}ao=ao.parentNode}}function af(ao){var ap;if(ao){ap=new t(ao,ao);for(ao=ap.current();ao;ao=ap.next()){if(ao.nodeType===3){return ao}}}}function ae(aq,ap){var ar,ao;if(!aq){aq=ag(r.getStart());if(!aq){while(aq=c.get(al)){ae(aq,false)}}}else{ao=r.getRng(true);if(aj(aq)){if(ap!==false){ao.setStartBefore(aq);ao.setEndBefore(aq)}c.remove(aq)}else{ar=af(aq);if(ar.nodeValue.charAt(0)===G){ar=ar.deleteData(0,1)}c.remove(aq,1)}r.setRng(ao)}}function ah(){var aq,ao,av,au,ar,ap,at;aq=r.getRng(true);au=aq.startOffset;ap=aq.startContainer;at=ap.nodeValue;ao=ag(r.getStart());if(ao){av=af(ao)}if(at&&au>0&&au<at.length&&/\\w/.test(at.charAt(au))&&/\\w/.test(at.charAt(au-1))){ar=r.getBookmark();aq.collapse(true);aq=p(aq,V(ab));aq=N.split(aq);Y(ab,ai,aq);r.moveToBookmark(ar)}else{if(!ao||av.nodeValue!==G){ao=ad(true);av=ao.firstChild;aq.insertNode(ao);au=1;Y(ab,ai,ao)}else{Y(ab,ai,ao)}r.setCursorLocation(av,au)}}function am(){var ao=r.getRng(true),ap,at,aw,av,aq,az,ay=[],au,ax;ap=ao.startContainer;at=ao.startOffset;aq=ap;if(ap.nodeType==3){if(at!=ap.nodeValue.length||ap.nodeValue===G){av=true}aq=aq.parentNode}while(aq){if(y(aq,ab,ai)){az=aq;break}if(aq.nextSibling){av=true}ay.push(aq);aq=aq.parentNode}if(!az){return}if(av){aw=r.getBookmark();ao.collapse(true);ao=p(ao,V(ab),true);ao=N.split(ao);B(ab,ai,ao);r.moveToBookmark(aw)}else{ax=ad();aq=ax;for(au=ay.length-1;au>=0;au--){aq.appendChild(c.clone(ay[au],false));aq=aq.firstChild}aq.appendChild(c.doc.createTextNode(G));aq=aq.firstChild;var ar=c.getParent(az,I);if(ar&&c.isEmpty(ar)){az.parentNode.replaceChild(ax,az)}else{c.insertAfter(ax,az)}r.setCursorLocation(aq,1);if(c.isEmpty(az)){c.remove(az)}}}function an(){var ap,ao,aq;ao=ag(r.getStart());if(ao&&!c.isEmpty(ao)){a.walk(ao,function(ar){if(ar.nodeType==1&&ar.id!==al&&!c.isEmpty(ar)){c.setAttrib(ar,\"data-mce-bogus\",null)}},\"childNodes\")}}if(!self._hasCaretEvents){aa.onBeforeGetContent.addToTop(function(){var ao=[],ap;if(aj(ag(r.getStart()),ao)){ap=ao.length;while(ap--){c.setAttrib(ao[ap],\"data-mce-bogus\",\"1\")}}});a.each(\"onMouseUp onKeyUp\".split(\" \"),function(ao){aa[ao].addToTop(function(){ae();an()})});aa.onKeyDown.addToTop(function(ao,aq){var ap=aq.keyCode;if(ap==8||ap==37||ap==39){ae(ag(r.getStart()))}an()});r.onSetContent.add(an);self._hasCaretEvents=true}if(ak==\"apply\"){ah()}else{am()}}function R(ac){var ab=ac.startContainer,ai=ac.startOffset,ae,ah,ag,ad,af;if(ab.nodeType==3&&ai>=ab.nodeValue.length){ai=s(ab);ab=ab.parentNode;ae=true}if(ab.nodeType==1){ad=ab.childNodes;ab=ad[Math.min(ai,ad.length-1)];ah=new t(ab,c.getParent(ab,c.isBlock));if(ai>ad.length-1||ae){ah.next()}for(ag=ah.current();ag;ag=ah.next()){if(ag.nodeType==3&&!f(ag)){af=c.create(\"a\",null,G);ag.parentNode.insertBefore(af,ag);ac.setStart(ag,0);r.setRng(ac);c.remove(af);return}}}}}})(tinymce);tinymce.onAddEditor.add(function(e,a){var d,h,g,c=a.settings;function b(j,i){e.each(i,function(l,k){if(l){g.setStyle(j,k,l)}});g.rename(j,\"span\")}function f(i,j){g=i.dom;if(c.convert_fonts_to_spans){e.each(g.select(\"font,u,strike\",j.node),function(k){d[k.nodeName.toLowerCase()](a.dom,k)})}}if(c.inline_styles){h=e.explode(c.font_size_legacy_values);d={font:function(j,i){b(i,{backgroundColor:i.style.backgroundColor,color:i.color,fontFamily:i.face,fontSize:h[parseInt(i.size,10)-1]})},u:function(j,i){b(i,{textDecoration:\"underline\"})},strike:function(j,i){b(i,{textDecoration:\"line-through\"})}};a.onPreProcess.add(f);a.onSetContent.add(f);a.onInit.add(function(){a.selection.onSetContent.add(f)})}});(function(b){var a=b.dom.TreeWalker;b.EnterKey=function(f){var i=f.dom,e=f.selection,d=f.settings,h=f.undoManager,c=f.schema.getNonEmptyElements();function g(B){var v=e.getRng(true),G,j,A,u,p,M,C,o,k,n,t,J,x,D;function E(N){return N&&i.isBlock(N)&&!/^(TD|TH|CAPTION|FORM)$/.test(N.nodeName)&&!/^(fixed|absolute)/i.test(N.style.position)&&i.getContentEditable(N)!==\"true\"}function F(O){var N;if(b.isIE&&!b.isIE11&&i.isBlock(O)){N=e.getRng();O.appendChild(i.create(\"span\",null,\"\\u00a0\"));e.select(O);O.lastChild.outerHTML=\"\";e.setRng(N)}}function z(P){var O=P,Q=[],N;while(O=O.firstChild){if(i.isBlock(O)){return}if(O.nodeType==1&&!c[O.nodeName.toLowerCase()]){Q.push(O)}}N=Q.length;while(N--){O=Q[N];if(!O.hasChildNodes()||(O.firstChild==O.lastChild&&O.firstChild.nodeValue===\"\")){i.remove(O)}else{if(O.nodeName==\"A\"&&(O.innerText||O.textContent)===\" \"){i.remove(O)}}}}function m(O){var T,R,N,U,S,Q=O,P;N=i.createRng();if(O.hasChildNodes()){T=new a(O,O);while(R=T.current()){if(R.nodeType==3){N.setStart(R,0);N.setEnd(R,0);break}if(c[R.nodeName.toLowerCase()]){N.setStartBefore(R);N.setEndBefore(R);break}Q=R;R=T.next()}if(!R){N.setStart(Q,0);N.setEnd(Q,0)}}else{if(O.nodeName==\"BR\"){if(O.nextSibling&&i.isBlock(O.nextSibling)){if(!M||M<9){P=i.create(\"br\");O.parentNode.insertBefore(P,O)}N.setStartBefore(O);N.setEndBefore(O)}else{N.setStartAfter(O);N.setEndAfter(O)}}else{N.setStart(O,0);N.setEnd(O,0)}}e.setRng(N);i.remove(P);S=i.getViewPort(f.getWin());U=i.getPos(O).y;if(U<S.y||U+25>S.y+S.h){f.getWin().scrollTo(0,U<S.y?U:U-S.h+25)}}function r(O){var P=A,R,Q,N;R=O||t==\"TABLE\"?i.create(O||x):p.cloneNode(false);N=R;if(d.keep_styles!==false){do{if(/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(P.nodeName)){if(P.id==\"_mce_caret\"){continue}Q=P.cloneNode(false);i.setAttrib(Q,\"id\",\"\");if(R.hasChildNodes()){Q.appendChild(R.firstChild);R.appendChild(Q)}else{N=Q;R.appendChild(Q)}}}while(P=P.parentNode)}if(!b.isIE||b.isIE11){N.innerHTML='<br data-mce-bogus=\"1\">'}return R}function q(Q){var P,O,N;if(A.nodeType==3&&(Q?u>0:u<A.nodeValue.length)){return false}if(A.parentNode==p&&D&&!Q){return true}if(Q&&A.nodeType==1&&A==p.firstChild){return true}if(A.nodeName===\"TABLE\"||(A.previousSibling&&A.previousSibling.nodeName==\"TABLE\")){return(D&&!Q)||(!D&&Q)}P=new a(A,p);if(A.nodeType==3){if(Q&&u==0){P.prev()}else{if(!Q&&u==A.nodeValue.length){P.next()}}}while(O=P.current()){if(O.nodeType===1){if(!O.getAttribute(\"data-mce-bogus\")){N=O.nodeName.toLowerCase();if(c[N]&&N!==\"br\"){return false}}}else{if(O.nodeType===3&&!/^[ \\t\\r\\n]*$/.test(O.nodeValue)){return false}}if(Q){P.prev()}else{P.next()}}return true}function l(N,T){var U,S,P,R,Q,O=x||\"P\";S=i.getParent(N,i.isBlock);if(!S||!E(S)){S=S||j;if(!S.hasChildNodes()){U=i.create(O);S.appendChild(U);v.setStart(U,0);v.setEnd(U,0);return U}R=N;while(R.parentNode!=S){R=R.parentNode}while(R&&!i.isBlock(R)){P=R;R=R.previousSibling}if(P){U=i.create(O);P.parentNode.insertBefore(U,P);R=P;while(R&&!i.isBlock(R)){Q=R.nextSibling;U.appendChild(R);R=Q}v.setStart(N,T);v.setEnd(N,T)}}return N}function H(){function N(P){var O=n[P?\"firstChild\":\"lastChild\"];while(O){if(O.nodeType==1){break}O=O[P?\"nextSibling\":\"previousSibling\"]}return O===p}o=x?r(x):i.create(\"BR\");if(N(true)&&N()){i.replace(o,n)}else{if(N(true)){n.parentNode.insertBefore(o,n)}else{if(N()){i.insertAfter(o,n);F(o)}else{G=v.cloneRange();G.setStartAfter(p);G.setEndAfter(n);k=G.extractContents();i.insertAfter(k,n);i.insertAfter(o,n)}}}i.remove(p);m(o);h.add()}function y(){var O=new a(A,p),N;while(N=O.next()){if(c[N.nodeName.toLowerCase()]||N.length>0){return true}}}function L(){var P,O,N;if(A&&A.nodeType==3&&u>=A.nodeValue.length){if((!b.isIE||b.isIE11)&&!y()){P=i.create(\"br\");v.insertNode(P);v.setStartAfter(P);v.setEndAfter(P);O=true}}P=i.create(\"br\");v.insertNode(P);if((b.isIE&&!b.isIE11)&&t==\"PRE\"&&(!M||M<8)){P.parentNode.insertBefore(i.doc.createTextNode(\"\\r\"),P)}N=i.create(\"span\",{},\"&nbsp;\");P.parentNode.insertBefore(N,P);e.scrollIntoView(N);i.remove(N);if(!O){v.setStartAfter(P);v.setEndAfter(P)}else{v.setStartBefore(P);v.setEndBefore(P)}e.setRng(v);h.add()}function s(N){do{if(N.nodeType===3){N.nodeValue=N.nodeValue.replace(/^[\\r\\n]+/,\"\")}N=N.firstChild}while(N)}function K(P){var N=i.getRoot(),O,Q;O=P;while(O!==N&&i.getContentEditable(O)!==\"false\"){if(i.getContentEditable(O)===\"true\"){Q=O}O=O.parentNode}return O!==N?Q:N}function I(O){var N;if(!b.isIE||b.isIE11){O.normalize();N=O.lastChild;if(!N||(/^(left|right)$/gi.test(i.getStyle(N,\"float\",true)))){i.add(O,\"br\")}}}if(!v.collapsed){f.execCommand(\"Delete\");return}if(B.isDefaultPrevented()){return}A=v.startContainer;u=v.startOffset;x=(d.force_p_newlines?\"p\":\"\")||d.forced_root_block;x=x?x.toUpperCase():\"\";M=i.doc.documentMode;C=B.shiftKey;if(A.nodeType==1&&A.hasChildNodes()){D=u>A.childNodes.length-1;A=A.childNodes[Math.min(u,A.childNodes.length-1)]||A;if(D&&A.nodeType==3){u=A.nodeValue.length}else{u=0}}j=K(A);if(!j){return}h.beforeChange();if(!i.isBlock(j)&&j!=i.getRoot()){if(!x||C){L()}return}if((x&&!C)||(!x&&C)){A=l(A,u)}p=i.getParent(A,i.isBlock);n=p?i.getParent(p.parentNode,i.isBlock):null;t=p?p.nodeName.toUpperCase():\"\";J=n?n.nodeName.toUpperCase():\"\";if(J==\"LI\"&&!B.ctrlKey){p=n;t=J}if(t==\"LI\"){if(!x&&C){L();return}if(i.isEmpty(p)){if(/^(UL|OL|LI)$/.test(n.parentNode.nodeName)){return false}H();return}}if(t==\"PRE\"&&d.br_in_pre!==false){if(!C){L();return}}else{if((!x&&!C&&t!=\"LI\")||(x&&C)){L();return}}x=x||\"P\";if(q()){if(/^(H[1-6]|PRE)$/.test(t)&&J!=\"HGROUP\"){o=r(x)}else{o=r()}if(d.end_container_on_empty_block&&E(n)&&i.isEmpty(p)){o=i.split(n,p)}else{i.insertAfter(o,p)}m(o)}else{if(q(true)){o=p.parentNode.insertBefore(r(),p);F(o)}else{G=v.cloneRange();G.setEndAfter(p);k=G.extractContents();s(k);o=k.firstChild;i.insertAfter(k,p);z(o);I(p);m(o)}}i.setAttrib(o,\"id\",\"\");h.add()}f.onKeyDown.add(function(k,j){if(j.keyCode==13){if(g(j)!==false){j.preventDefault()}}})}})(tinymce);"}
],
[
{"endColumn":0,"endLine":69,"scriptId":"129","startColumn":0,"startLine":0,"url":"http://assets.tumblr.com/assets/scripts/posting.js?_v=fc9cd0152bce07d4092d69a3c7ced9fc"},{"scriptSource":"var Markdown;if(typeof exports===\"object\"&&typeof require===\"function\"){Markdown=exports}else{Markdown={}}(function(){function c(e){return e}function d(e){return false}function b(){}b.prototype={chain:function(g,f){var e=this[g];if(!e){throw new Error(\"unknown hook \"+g)}if(e===c){this[g]=f}else{this[g]=function(h){return f(e(h))}}},set:function(f,e){if(!this[f]){throw new Error(\"unknown hook \"+f)}this[f]=e},addNoop:function(e){this[e]=c},addFalse:function(e){this[e]=d}};Markdown.HookCollection=b;function a(){}a.prototype={set:function(e,f){this[\"s_\"+e]=f},get:function(e){return this[\"s_\"+e]}};Markdown.Converter=function(){var j=this.hooks=new b();j.addNoop(\"plainLinkText\");j.addNoop(\"preConversion\");j.addNoop(\"postConversion\");var w;var n;var e;var z;this.makeHtml=function(P){if(w){throw new Error(\"Recursive call to converter.makeHtml\")}w=new a();n=new a();e=[];z=0;P=j.preConversion(P);P=P.replace(/~/g,\"~T\");P=P.replace(/\\$/g,\"~D\");P=P.replace(/\\r\\n/g,\"\\n\");P=P.replace(/\\r/g,\"\\n\");P=\"\\n\\n\"+P+\"\\n\\n\";P=J(P);P=P.replace(/^[ \\t]+$/mg,\"\");P=o(P);P=m(P);P=f(P);P=M(P);P=P.replace(/~D/g,\"$$\");P=P.replace(/~T/g,\"~\");P=j.postConversion(P);e=n=w=null;return P};function m(P){P=P.replace(/^[ ]{0,3}\\[(.+)\\]:[ \\t]*\\n?[ \\t]*<?(\\S+?)>?(?=\\s|$)[ \\t]*\\n?[ \\t]*((\\n*)[\"(](.+?)[\")][ \\t]*)?(?:\\n+)/gm,function(S,U,T,R,Q,V){U=U.toLowerCase();w.set(U,C(T));if(Q){return R}else{if(V){n.set(U,V.replace(/\"/g,\"&quot;\"))}}return\"\"});return P}function o(R){var Q=\"p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del\";var P=\"p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math\";R=R.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\\b[^\\r]*?\\n<\\/\\2>[ \\t]*(?=\\n+))/gm,O);R=R.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math)\\b[^\\r]*?.*<\\/\\2>[ \\t]*(?=\\n+)\\n)/gm,O);R=R.replace(/\\n[ ]{0,3}((<(hr)\\b([^<>])*?\\/?>)[ \\t]*(?=\\n{2,}))/g,O);R=R.replace(/\\n\\n[ ]{0,3}(<!(--(?:|(?:[^>\\-]|-[^>])(?:[^\\-]|-[^\\-])*)--)>[ \\t]*(?=\\n{2,}))/g,O);R=R.replace(/(?:\\n\\n)([ ]{0,3}(?:<([?%])[^\\r]*?\\2>)[ \\t]*(?=\\n{2,}))/g,O);return R}function O(P,Q){var R=Q;R=R.replace(/^\\n+/,\"\");R=R.replace(/\\n+$/g,\"\");R=\"\\n\\n~K\"+(e.push(R)-1)+\"K\\n\\n\";return R}function f(R,Q){R=i(R);var P=\"<hr />\\n\";R=R.replace(/^[ ]{0,2}([ ]?\\*[ ]?){3,}[ \\t]*$/gm,P);R=R.replace(/^[ ]{0,2}([ ]?-[ ]?){3,}[ \\t]*$/gm,P);R=R.replace(/^[ ]{0,2}([ ]?_[ ]?){3,}[ \\t]*$/gm,P);R=L(R);R=q(R);R=g(R);R=o(R);R=I(R,Q);return R}function k(P){P=r(P);P=v(P);P=H(P);P=D(P);P=E(P);P=K(P);P=P.replace(/~P/g,\"://\");P=C(P);P=x(P);P=P.replace(/ {2,}\\n/g,\" <br>\\n\");return P}function v(Q){var P=/(<[a-z\\/!$](\"[^\"]*\"|'[^']*'|[^'\">])*>|<!(--(?:|(?:[^>\\-]|-[^>])(?:[^\\-]|-[^\\-])*)--)>)/gi;Q=Q.replace(P,function(S){var R=S.replace(/(.)<\\/?code>(?=.)/g,\"$1`\");R=y(R,S.charAt(1)==\"!\"?\"\\\\`*_/\":\"\\\\`*_\");return R});return Q}function E(P){P=P.replace(/(\\[((?:\\[[^\\]]*\\]|[^\\[\\]])*)\\][ ]?(?:\\n[ ]*)?\\[(.*?)\\])()()()()/g,h);P=P.replace(/(\\[((?:\\[[^\\]]*\\]|[^\\[\\]])*)\\]\\([ \\t]*()<?((?:\\([^)]*\\)|[^()\\s])*?)>?[ \\t]*((['\"])(.*?)\\6[ \\t]*)?\\))/g,h);P=P.replace(/(\\[([^\\[\\]]+)\\])()()()()()/g,h);return P}function h(V,ab,aa,Z,Y,X,U,T){if(T===undefined){T=\"\"}var S=ab;var Q=aa.replace(/:\\/\\//g,\"~P\");var R=Z.toLowerCase();var P=Y;var W=T;if(P===\"\"){if(R===\"\"){R=Q.toLowerCase().replace(/ ?\\n/g,\" \")}P=\"#\"+R;if(w.get(R)!==undefined){P=w.get(R);if(n.get(R)!==undefined){W=n.get(R)}}else{if(S.search(/\\(\\s*\\)$/m)>-1){P=\"\"}else{return S}}}P=A(P);P=y(P,\"*_\");var ac='<a href=\"'+P+'\"';if(W!==\"\"){W=G(W);W=y(W,\"*_\");ac+=' title=\"'+W+'\"'}ac+=\">\"+Q+\"</a>\";return ac}function D(P){P=P.replace(/(!\\[(.*?)\\][ ]?(?:\\n[ ]*)?\\[(.*?)\\])()()()()/g,F);P=P.replace(/(!\\[(.*?)\\]\\s?\\([ \\t]*()<?(\\S+?)>?[ \\t]*((['\"])(.*?)\\6[ \\t]*)?\\))/g,F);return P}function G(P){return P.replace(/>/g,\"&gt;\").replace(/</g,\"&lt;\").replace(/\"/g,\"&quot;\")}function F(V,ab,aa,Z,Y,X,U,T){var S=ab;var R=aa;var Q=Z.toLowerCase();var P=Y;var W=T;if(!W){W=\"\"}if(P===\"\"){if(Q===\"\"){Q=R.toLowerCase().replace(/ ?\\n/g,\" \")}P=\"#\"+Q;if(w.get(Q)!==undefined){P=w.get(Q);if(n.get(Q)!==undefined){W=n.get(Q)}}else{return S}}R=y(G(R),\"*_[]()\");P=y(P,\"*_\");var ac='<img src=\"'+P+'\" alt=\"'+R+'\"';W=G(W);W=y(W,\"*_\");ac+=' title=\"'+W+'\"';ac+=\" />\";return ac}function i(P){P=P.replace(/^(.+)[ \\t]*\\n=+[ \\t]*\\n+/gm,function(Q,R){return\"<h1>\"+k(R)+\"</h1>\\n\\n\"});P=P.replace(/^(.+)[ \\t]*\\n-+[ \\t]*\\n+/gm,function(R,Q){return\"<h2>\"+k(Q)+\"</h2>\\n\\n\"});P=P.replace(/^(\\#{1,6})[ \\t]*(.+?)[ \\t]*\\#*\\n+/gm,function(Q,T,S){var R=T.length;return\"<h\"+R+\">\"+k(S)+\"</h\"+R+\">\\n\\n\"});return P}function L(Q){Q+=\"~0\";var P=/^(([ ]{0,3}([*+\\-]|\\d+[.])[ \\t]+)[^\\r]+?(~0|\\n{2,}(?=\\S)(?![ \\t]*(?:[*+\\-]|\\d+[.])[ \\t]+)))/gm;if(z){Q=Q.replace(P,function(S,V,U){var W=V;var T=(U.search(/[*+\\-]/g)>-1)?\"ul\":\"ol\";var R=l(W,T);R=R.replace(/\\s+$/,\"\");R=\"<\"+T+\">\"+R+\"</\"+T+\">\\n\";return R})}else{P=/(\\n\\n|^\\n?)(([ ]{0,3}([*+\\-]|\\d+[.])[ \\t]+)[^\\r]+?(~0|\\n{2,}(?=\\S)(?![ \\t]*(?:[*+\\-]|\\d+[.])[ \\t]+)))/g;Q=Q.replace(P,function(T,X,V,S){var W=X;var Y=V;var U=(S.search(/[*+\\-]/g)>-1)?\"ul\":\"ol\";var R=l(Y,U);R=W+\"<\"+U+\">\\n\"+R+\"</\"+U+\">\\n\";return R})}Q=Q.replace(/~0/,\"\");return Q}var p={ol:\"\\\\d+[.]\",ul:\"[*+-]\"};function l(R,Q){z++;R=R.replace(/\\n{2,}$/,\"\\n\");R+=\"~0\";var P=p[Q];var S=new RegExp(\"(^[ \\\\t]*)(\"+P+\")[ \\\\t]+([^\\\\r]+?(\\\\n+))(?=(~0|\\\\1(\"+P+\")[ \\\\t]+))\",\"gm\");var T=false;R=R.replace(S,function(V,X,W,U){var aa=U;var ab=X;var Z=/\\n\\n$/.test(aa);var Y=Z||aa.search(/\\n{2,}/)>-1;if(Y||T){aa=f(t(aa),true)}else{aa=L(t(aa));aa=aa.replace(/\\n$/,\"\");aa=k(aa)}T=Z;return\"<li>\"+aa+\"</li>\\n\"});R=R.replace(/~0/g,\"\");z--;return R}function q(P){P+=\"~0\";P=P.replace(/(?:\\n\\n|^)((?:(?:[ ]{4}|\\t).*\\n+)+)(\\n*[ ]{0,3}[^ \\t\\n]|(?=~0))/g,function(Q,S,R){var T=S;var U=R;T=B(t(T));T=J(T);T=T.replace(/^\\n+/g,\"\");T=T.replace(/\\n+$/g,\"\");T=\"<pre><code>\"+T+\"\\n</code></pre>\";return\"\\n\\n\"+T+\"\\n\\n\"+U});P=P.replace(/~0/,\"\");return P}function N(P){P=P.replace(/(^\\n+|\\n+$)/g,\"\");return\"\\n\\n~K\"+(e.push(P)-1)+\"K\\n\\n\"}function r(P){P=P.replace(/(^|[^\\\\])(`+)([^\\r]*?[^`])\\2(?!`)/gm,function(S,U,T,R,Q){var V=R;V=V.replace(/^([ \\t]*)/g,\"\");V=V.replace(/[ \\t]*$/g,\"\");V=B(V);V=V.replace(/:\\/\\//g,\"~P\");return U+\"<code>\"+V+\"</code>\"});return P}function B(P){P=P.replace(/&/g,\"&amp;\");P=P.replace(/</g,\"&lt;\");P=P.replace(/>/g,\"&gt;\");P=y(P,\"*_{}[]\\\\\",false);return P}function x(P){P=P.replace(/([\\W_]|^)(\\*\\*|__)(?=\\S)([^\\r]*?\\S[\\*_]*)\\2([\\W_]|$)/g,\"$1<strong>$3</strong>$4\");P=P.replace(/([\\W_]|^)(\\*|_)(?=\\S)([^\\r\\*_]*?\\S)\\2([\\W_]|$)/g,\"$1<em>$3</em>$4\");return P}function g(P){P=P.replace(/((^[ \\t]*>[ \\t]?.+\\n(.+\\n)*\\n*)+)/gm,function(Q,R){var S=R;S=S.replace(/^[ \\t]*>[ \\t]?/gm,\"~0\");S=S.replace(/~0/g,\"\");S=S.replace(/^[ \\t]+$/gm,\"\");S=f(S);S=S.replace(/(^|\\n)/g,\"$1  \");S=S.replace(/(\\s*<pre>[^\\r]+?<\\/pre>)/gm,function(T,U){var V=U;V=V.replace(/^ {2}/mg,\"~0\");V=V.replace(/~0/g,\"\");return V});return N(\"<blockquote>\\n\"+S+\"\\n</blockquote>\")});return P}function I(W,P){W=W.replace(/^\\n+/g,\"\");W=W.replace(/\\n+$/g,\"\");var X=W.split(/\\n{2,}/g);var U=[];var Q=/~K(\\d+)K/;var R=X.length;for(var S=0;S<R;S++){var T=X[S];if(Q.test(T)){U.push(T)}else{if(/\\S/.test(T)){T=k(T);T=T.replace(/^([ \\t]*)/g,\"<p>\");T+=\"</p>\";U.push(T)}}}if(!P){R=U.length;for(S=0;S<R;S++){var V=true;while(V){V=false;U[S]=U[S].replace(/~K(\\d+)K/g,function(Y,Z){V=true;return e[Z]})}}}return U.join(\"\\n\\n\")}function C(P){P=P.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\\w+);)/g,\"&amp;\");P=P.replace(/<(?![a-z\\/?\\$!])/gi,\"&lt;\");return P}function H(P){P=P.replace(/\\\\(\\\\)/g,s);P=P.replace(/\\\\([`*_{}\\[\\]()>#+-.!])/g,s);return P}function K(Q){Q=Q.replace(/(^|\\s)(https?|ftp)(:\\/\\/[\\-A-Z0-9+&@#\\/%?=~_|\\[\\]\\(\\)!:,\\.;]*[\\-A-Z0-9+&@#\\/%=~_|\\[\\]])($|\\W)/gi,\"$1<$2$3>$4\");var P=function(S,R){return'<a href=\"'+R+'\">'+j.plainLinkText(R)+\"</a>\"};Q=Q.replace(/<((https?|ftp):[^'\">\\s]+)>/gi,P);return Q}function M(P){P=P.replace(/~E(\\d+)E/g,function(Q,S){var R=parseInt(S,10);return String.fromCharCode(R)});return P}function t(P){P=P.replace(/^(\\t|[ ]{1,4})/gm,\"~0\");P=P.replace(/~0/g,\"\");return P}function J(S){if(!/\\t/.test(S)){return S}var R=[\"    \",\"   \",\"  \",\" \"],Q=0,P;return S.replace(/[\\n\\t]/g,function(T,U){if(T===\"\\n\"){Q=U+1;return T}P=(U-Q)%4;Q=U+1;return R[P]})}var u=/(?:[\"'*()\\[\\]:]|~D)/g;function A(Q){if(!Q){return\"\"}var P=Q.length;return Q.replace(u,function(R,S){if(R==\"~D\"){return\"%24\"}if(R==\":\"){if(S==P-1||/[0-9\\/]/.test(Q.charAt(S+1))){return\":\"}}return\"%\"+R.charCodeAt(0).toString(16)})}function y(T,Q,R){var P=\"([\"+Q.replace(/([\\[\\]\\\\])/g,\"\\\\$1\")+\"])\";if(R){P=\"\\\\\\\\\"+P}var S=new RegExp(P,\"g\");T=T.replace(S,s);return T}function s(P,R){var Q=R.charCodeAt(0);return\"~E\"+Q+\"E\"}}})();\n/*!\n* MediaElement.js\n* HTML5 <video> and <audio> shim and player\n* http://mediaelementjs.com/\n*\n* Creates a JavaScript object that mimics HTML5 MediaElement API\n* for browsers that don't understand HTML5 or can't play the provided codec\n* Can play MP4 (H.264), Ogg, WebM, FLV, WMV, WMA, ACC, and MP3\n*\n* Copyright 2010, John Dyer (http://johndyer.me)\n* Dual licensed under the MIT or GPL Version 2 licenses.\n*\n*/\nvar mejs=mejs||{};mejs.version=\"2.1.3\";mejs.meIndex=0;mejs.plugins={silverlight:[{version:[3,0],types:[\"video/mp4\",\"video/m4v\",\"video/mov\",\"video/wmv\",\"audio/wma\",\"audio/m4a\",\"audio/mp3\",\"audio/wav\",\"audio/mpeg\"]}],flash:[{version:[9,0,124],types:[\"video/mp4\",\"video/m4v\",\"video/mov\",\"video/flv\",\"video/x-flv\",\"audio/flv\",\"audio/x-flv\",\"audio/mp3\",\"audio/m4a\",\"audio/mpeg\"]}]};mejs.Utility={encodeUrl:function(a){return encodeURIComponent(a)},escapeHTML:function(a){return a.split(\"&\").join(\"&amp;\").split(\"<\").join(\"&lt;\").split('\"').join(\"&quot;\")},absolutizeUrl:function(a){var b=document.createElement(\"div\");b.innerHTML='<a href=\"'+this.escapeHTML(a)+'\">x</a>';return b.firstChild.href},getScriptPath:function(b){var f=0,e,g=\"\",d=\"\",c,a=document.getElementsByTagName(\"script\");for(;f<a.length;f++){c=a[f].src;for(e=0;e<b.length;e++){d=b[e];if(c.indexOf(d)>-1){g=c.substring(0,c.indexOf(d));break}}if(g!==\"\"){break}}return g},secondsToTimeCode:function(c,d){c=Math.round(c);var a,b=Math.floor(c/60);if(b>=60){a=Math.floor(b/60);b=b%60}a=a===undefined?\"00\":(a>=10)?a:\"0\"+a;b=(b>=10)?b:\"0\"+b;c=Math.floor(c%60);c=(c>=10)?c:\"0\"+c;return((a>0||d===true)?a+\":\":\"\")+b+\":\"+c}};mejs.PluginDetector={hasPluginVersion:function(c,a){var b=this.plugins[c];a[1]=a[1]||0;a[2]=a[2]||0;return(b[0]>a[0]||(b[0]==a[0]&&b[1]>a[1])||(b[0]==a[0]&&b[1]==a[1]&&b[2]>=a[2]))?true:false},nav:window.navigator,ua:window.navigator.userAgent.toLowerCase(),plugins:[],addPlugin:function(d,c,e,a,b){this.plugins[d]=this.detectPlugin(c,e,a,b)},detectPlugin:function(g,b,c,k){var h=[0,0,0],j,d,a;if(typeof(this.nav.plugins)!=\"undefined\"&&typeof this.nav.plugins[g]==\"object\"){j=this.nav.plugins[g].description;if(j&&!(typeof this.nav.mimeTypes!=\"undefined\"&&this.nav.mimeTypes[b]&&!this.nav.mimeTypes[b].enabledPlugin)){h=j.replace(g,\"\").replace(/^\\s+/,\"\").replace(/\\sr/gi,\".\").split(\".\");for(d=0;d<h.length;d++){h[d]=parseInt(h[d].match(/\\d+/),10)}}}else{if(typeof(window.ActiveXObject)!=\"undefined\"){try{a=new ActiveXObject(c);if(a){h=k(a)}}catch(f){}}}return h}};mejs.PluginDetector.addPlugin(\"flash\",\"Shockwave Flash\",\"application/x-shockwave-flash\",\"ShockwaveFlash.ShockwaveFlash\",function(b){var a=[],c=b.GetVariable(\"$version\");if(c){c=c.split(\" \")[1].split(\",\");a=[parseInt(c[0],10),parseInt(c[1],10),parseInt(c[2],10)]}return a});mejs.PluginDetector.addPlugin(\"silverlight\",\"Silverlight Plug-In\",\"application/x-silverlight-2\",\"AgControl.AgControl\",function(b){var a=[0,0,0,0],c=function(f,d,e,g){while(f.isVersionSupported(d[0]+\".\"+d[1]+\".\"+d[2]+\".\"+d[3])){d[e]+=g}d[e]-=g};c(b,a,0,1);c(b,a,1,1);c(b,a,2,10000);c(b,a,2,1000);c(b,a,2,100);c(b,a,2,10);c(b,a,2,1);c(b,a,3,1);return a});if(mejs.PluginDetector.ua.match(/android 2\\.[12]/)!==null){HTMLMediaElement.canPlayType=function(a){return(a.match(/video\\/(mp4|m4v)/gi)!==null)?\"probably\":\"\"}}mejs.MediaFeatures={init:function(){var e=mejs.PluginDetector.nav,c=mejs.PluginDetector.ua.toLowerCase(),b,a,d=[\"source\",\"track\",\"audio\",\"video\"];this.isiPad=(c.match(/ipad/i)!==null);this.isiPhone=(c.match(/iphone/i)!==null);this.isAndroid=(c.match(/android/i)!==null);this.isIE=(e.appName.toLowerCase().indexOf(\"microsoft\")!=-1);this.isChrome=(c.match(/chrome/gi)!==null);for(b=0;b<d.length;b++){a=document.createElement(d[b])}this.hasNativeFullScreen=(typeof a.webkitEnterFullScreen!==\"undefined\");if(this.isChrome){this.hasNativeFullScreen=false}}};mejs.MediaFeatures.init();mejs.HtmlMediaElement={pluginType:\"native\",isFullScreen:false,setCurrentTime:function(a){this.currentTime=a},setMuted:function(a){this.muted=a},setVolume:function(a){this.volume=a},stop:function(){this.pause()},setSrc:function(a){if(typeof a==\"string\"){this.src=a}else{var b,c;for(b=0;b<a.length;b++){c=a[b];if(this.canPlayType(c.type)){this.src=c.src}}}},setVideoSize:function(b,a){this.width=b;this.height=a}};mejs.PluginMediaElement=function(b,c,a){this.id=b;this.pluginType=c;this.src=a;this.events={}};mejs.PluginMediaElement.prototype={pluginElement:null,pluginType:\"\",isFullScreen:false,playbackRate:-1,defaultPlaybackRate:-1,seekable:[],played:[],paused:true,ended:false,seeking:false,duration:0,error:null,muted:false,volume:1,currentTime:0,play:function(){if(this.pluginApi!=null){this.pluginApi.playMedia();this.paused=false}},load:function(){if(this.pluginApi!=null){this.pluginApi.loadMedia();this.paused=false}},pause:function(){if(this.pluginApi!=null){this.pluginApi.pauseMedia();this.paused=true}},stop:function(){if(this.pluginApi!=null){this.pluginApi.stopMedia();this.paused=true}},canPlayType:function(e){var d,c,a,b=mejs.plugins[this.pluginType];for(d=0;d<b.length;d++){a=b[d];if(mejs.PluginDetector.hasPluginVersion(this.pluginType,a.version)){for(c=0;c<a.types.length;c++){if(e==a.types[c]){return true}}}}return false},setSrc:function(a){if(typeof a==\"string\"){this.pluginApi.setSrc(mejs.Utility.absolutizeUrl(a));this.src=mejs.Utility.absolutizeUrl(a)}else{var b,c;for(b=0;b<a.length;b++){c=a[b];if(this.canPlayType(c.type)){this.pluginApi.setSrc(mejs.Utility.absolutizeUrl(c.src));this.src=mejs.Utility.absolutizeUrl(a)}}}},setCurrentTime:function(a){if(this.pluginApi!=null){this.pluginApi.setCurrentTime(a);this.currentTime=a}},setVolume:function(a){if(this.pluginApi!=null){this.pluginApi.setVolume(a);this.volume=a}},setMuted:function(a){if(this.pluginApi!=null){this.pluginApi.setMuted(a);this.muted=a}},setVideoSize:function(b,a){if(this.pluginElement.style){this.pluginElement.style.width=b+\"px\";this.pluginElement.style.height=a+\"px\"}if(this.pluginApi!=null){this.pluginApi.setVideoSize(b,a)}},setFullscreen:function(a){if(this.pluginApi!=null){this.pluginApi.setFullscreen(a)}},addEventListener:function(b,c,a){this.events[b]=this.events[b]||[];this.events[b].push(c)},removeEventListener:function(a,c){if(!a){this.events={};return true}var b=this.events[a];if(!b){return true}if(!c){this.events[a]=[];return true}for(i=0;i<b.length;i++){if(b[i]===c){this.events[a].splice(i,1);return true}}return false},dispatchEvent:function(a){var c,b,d=this.events[a];if(d){b=Array.prototype.slice.call(arguments,1);for(c=0;c<d.length;c++){d[c].apply(null,b)}}}};mejs.MediaPluginBridge={pluginMediaElements:{},htmlMediaElements:{},registerPluginElement:function(c,a,b){this.pluginMediaElements[c]=a;this.htmlMediaElements[c]=b},initPlugin:function(c){var a=this.pluginMediaElements[c],b=this.htmlMediaElements[c];switch(a.pluginType){case\"flash\":a.pluginElement=a.pluginApi=document.getElementById(c);break;case\"silverlight\":a.pluginElement=document.getElementById(a.id);a.pluginApi=a.pluginElement.Content.MediaElementJS;break}if(a.pluginApi!=null&&a.success){a.success(a,b)}},fireEvent:function(h,c,b){var g,f,a,d=this.pluginMediaElements[h];d.ended=false;d.paused=true;g={type:c,target:d};for(f in b){d[f]=b[f];g[f]=b[f]}a=b.bufferedTime||0;g.target.buffered=g.buffered={start:function(e){return 0},end:function(e){return a},length:1};d.dispatchEvent(g.type,g)}};mejs.MediaElementDefaults={mode:\"auto\",plugins:[\"flash\",\"silverlight\"],enablePluginDebug:false,type:\"\",pluginPath:mejs.Utility.getScriptPath([\"mediaelement.js\",\"mediaelement.min.js\",\"mediaelement-and-player.js\",\"mediaelement-and-player.min.js\"]),flashName:\"flashmediaelement.swf\",enablePluginSmoothing:false,silverlightName:\"silverlightmediaelement.xap\",defaultVideoWidth:480,defaultVideoHeight:270,pluginWidth:-1,pluginHeight:-1,timerRate:250,success:function(){},error:function(){}};mejs.MediaElement=function(a,b){return mejs.HtmlMediaElementShim.create(a,b)};mejs.HtmlMediaElementShim={create:function(f,e){var m=mejs.MediaElementDefaults,j=(typeof(f)==\"string\")?document.getElementById(f):f,a=(j.tagName.toLowerCase()==\"video\"),b=(typeof(j.canPlayType)!=\"undefined\"),c={method:\"\",url:\"\"},k=j.getAttribute(\"poster\"),g=j.getAttribute(\"autoplay\"),h=j.getAttribute(\"preload\"),l=j.getAttribute(\"controls\"),d;for(d in e){m[d]=e[d]}k=(typeof k==\"undefined\"||k===null)?\"\":k;h=(typeof h==\"undefined\"||h===null||h===\"false\")?\"none\":h;g=!(typeof g==\"undefined\"||g===null||g===\"false\");l=!(typeof l==\"undefined\"||l===null||l===\"false\");c=this.determinePlayback(j,m,a,b);if(c.method==\"native\"){return this.updateNative(j,m,g,h,c)}else{if(c.method!==\"\"){return this.createPlugin(j,m,a,c.method,(c.url!==null)?mejs.Utility.absolutizeUrl(c.url):\"\",k,g,h,l)}else{this.createErrorMessage(j,m,(c.url!==null)?mejs.Utility.absolutizeUrl(c.url):\"\",k)}}},determinePlayback:function(r,u,b,c){var t=[],h,g,f,e,d,p,s={method:\"\",url:\"\"},a=r.getAttribute(\"src\"),m,o,q;if(typeof(u.type)!=\"undefined\"&&u.type!==\"\"){t.push({type:u.type,url:null})}else{if(a!=\"undefined\"&&a!==null){p=this.checkType(a,r.getAttribute(\"type\"),b);t.push({type:p,url:a})}else{for(h=0;h<r.childNodes.length;h++){d=r.childNodes[h];if(d.nodeType==1&&d.tagName.toLowerCase()==\"source\"){a=d.getAttribute(\"src\");p=this.checkType(a,d.getAttribute(\"type\"),b);t.push({type:p,url:a})}}}}if(c&&(u.mode===\"auto\"||u.mode===\"native\")){for(h=0;h<t.length;h++){if(r.canPlayType(t[h].type).replace(/no/,\"\")!==\"\"||r.canPlayType(t[h].type.replace(/mp3/,\"mpeg\")).replace(/no/,\"\")!==\"\"){s.method=\"native\";s.url=t[h].url;return s}}}if(u.mode===\"auto\"||u.mode===\"shim\"){for(h=0;h<t.length;h++){p=t[h].type;for(g=0;g<u.plugins.length;g++){m=u.plugins[g];o=mejs.plugins[m];for(f=0;f<o.length;f++){q=o[f];if(mejs.PluginDetector.hasPluginVersion(m,q.version)){for(e=0;e<q.types.length;e++){if(p==q.types[e]){s.method=m;s.url=t[h].url;return s}}}}}}}if(s.method===\"\"){s.url=t[0].url}return s},checkType:function(a,c,d){var b;if(a&&!c){b=a.substring(a.lastIndexOf(\".\")+1);return((d)?\"video\":\"audio\")+\"/\"+b}else{if(c&&~c.indexOf(\";\")){return c.substr(0,c.indexOf(\";\"))}else{return c}}},createErrorMessage:function(c,b,f,g){var a=document.createElement(\"div\");a.className=\"me-cannotplay\";try{a.style.width=c.width+\"px\";a.style.height=c.height+\"px\"}catch(d){}a.innerHTML=(g!==\"\")?'<a href=\"'+f+'\"><img src=\"'+g+'\" /></a>':'<a href=\"'+f+'\"><span>Download File</span></a>';c.parentNode.insertBefore(a,c);c.style.display=\"none\";b.error(c)},createPlugin:function(l,r,b,f,j,n,g,m,o){var d=1,p=1,e=\"me_\"+f+\"_\"+(mejs.meIndex++),q=new mejs.PluginMediaElement(e,f,j),c=document.createElement(\"div\"),k,h,a;h=l.parentNode;while(h!==null&&h.tagName.toLowerCase()!=\"body\"){if(h.parentNode.tagName.toLowerCase()==\"p\"){h.parentNode.parentNode.insertBefore(h,h.parentNode);break}h=h.parentNode}if(b){d=(r.videoWidth>0)?r.videoWidth:(l.getAttribute(\"width\")!==null)?l.getAttribute(\"width\"):r.defaultVideoWidth;p=(r.videoHeight>0)?r.videoHeight:(l.getAttribute(\"height\")!==null)?l.getAttribute(\"height\"):r.defaultVideoHeight}else{if(r.enablePluginDebug){d=320;p=240}}q.success=r.success;mejs.MediaPluginBridge.registerPluginElement(e,q,l);c.className=\"me-plugin\";l.parentNode.insertBefore(c,l);a=[\"id=\"+e,\"isvideo=\"+((b)?\"true\":\"false\"),\"autoplay=\"+((g)?\"true\":\"false\"),\"preload=\"+m,\"width=\"+d,\"timerrate=\"+r.timerRate,\"height=\"+p];if(j!==null){if(f==\"flash\"){a.push(\"file=\"+mejs.Utility.encodeUrl(j))}else{a.push(\"file=\"+j)}}if(r.enablePluginDebug){a.push(\"debug=true\")}if(r.enablePluginSmoothing){a.push(\"smoothing=true\")}if(o){a.push(\"controls=true\")}switch(f){case\"silverlight\":c.innerHTML='<object data=\"data:application/x-silverlight-2,\" type=\"application/x-silverlight-2\" id=\"'+e+'\" name=\"'+e+'\" width=\"'+d+'\" height=\"'+p+'\"><param name=\"initParams\" value=\"'+a.join(\",\")+'\" /><param name=\"windowless\" value=\"true\" /><param name=\"background\" value=\"black\" /><param name=\"minRuntimeVersion\" value=\"3.0.0.0\" /><param name=\"autoUpgrade\" value=\"true\" /><param name=\"source\" value=\"'+r.pluginPath+r.silverlightName+'\" /></object>';break;case\"flash\":if(mejs.MediaFeatures.isIE){k=document.createElement(\"div\");c.appendChild(k);k.outerHTML='<object classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\" codebase=\"http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab\" id=\"'+e+'\" width=\"'+d+'\" height=\"'+p+'\"><param name=\"movie\" value=\"'+r.pluginPath+r.flashName+\"?x=\"+(new Date())+'\" /><param name=\"flashvars\" value=\"'+a.join(\"&amp;\")+'\" /><param name=\"quality\" value=\"high\" /><param name=\"bgcolor\" value=\"#000000\" /><param name=\"wmode\" value=\"transparent\" /><param name=\"allowScriptAccess\" value=\"always\" /><param name=\"allowFullScreen\" value=\"true\" /></object>'}else{c.innerHTML='<embed id=\"'+e+'\" name=\"'+e+'\" play=\"true\" loop=\"false\" quality=\"high\" bgcolor=\"#000000\" wmode=\"transparent\" allowScriptAccess=\"always\" allowFullScreen=\"true\" type=\"application/x-shockwave-flash\" pluginspage=\"http://www.macromedia.com/go/getflashplayer\" src=\"'+r.pluginPath+r.flashName+'\" flashvars=\"'+a.join(\"&\")+'\" width=\"'+d+'\" height=\"'+p+'\"></embed>'}break}l.style.display=\"none\";return q},updateNative:function(e,c,f,b,d){for(var a in mejs.HtmlMediaElement){e[a]=mejs.HtmlMediaElement[a]}if(mejs.MediaFeatures.isChrome){if(b===\"none\"&&!f){e.src=\"\";e.load();e.canceledPreload=true;e.addEventListener(\"play\",function(){if(e.canceledPreload){e.src=d.url;e.load();e.play();e.canceledPreload=false}},false)}else{if(f){e.load();e.play()}}}c.success(e,e);return e}};window.mejs=mejs;window.MediaElement=mejs.MediaElement;\n/*!\nVideo.js - HTML5 Video Player\nVersion 3.2.0\n\nLGPL v3 LICENSE INFO\nThis file is part of Video.js. Copyright 2011 Zencoder, Inc.\n\nVideo.js is free software: you can redistribute it and/or modify\nit under the terms of the GNU Lesser General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nVideo.js is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU Lesser General Public License for more details.\n\nYou should have received a copy of the GNU Lesser General Public License\nalong with Video.js.  If not, see <http://www.gnu.org/licenses/>.\n*/\n(function(window,undefined){var document=window.document;document.createElement(\"video\");document.createElement(\"audio\");var VideoJS=function(id,addOptions,ready){var tag;if(typeof id==\"string\"){if(id.indexOf(\"#\")===0){id=id.slice(1)}if(_V_.players[id]){return _V_.players[id]}else{tag=_V_.el(id)}}else{tag=id}if(!tag||!tag.nodeName){throw new TypeError(\"The element or ID supplied is not valid. (VideoJS)\")}return tag.player||new _V_.Player(tag,addOptions,ready)},_V_=VideoJS,CDN_VERSION=\"3.2\";VideoJS.players={};VideoJS.options={techOrder:[\"html5\",\"flash\"],html5:{},flash:{swf:\"http://vjs.zencdn.net/c/video-js.swf\"},width:\"auto\",height:\"auto\",defaultVolume:0,components:{posterImage:{},textTrackDisplay:{},loadingSpinner:{},bigPlayButton:{},controlBar:{}}};if(CDN_VERSION!=\"GENERATED_CDN_VSN\"){_V_.options.flash.swf=\"http://vjs.zencdn.net/\"+CDN_VERSION+\"/video-js.swf\"}_V_.merge=function(obj1,obj2,safe){if(!obj2){obj2={}}for(var attrname in obj2){if(obj2.hasOwnProperty(attrname)&&(!safe||!obj1.hasOwnProperty(attrname))){obj1[attrname]=obj2[attrname]}}return obj1};_V_.extend=function(obj){this.merge(this,obj,true)};_V_.extend({tech:{},controlSets:{},isIE:function(){return !+\"\\v1\"},isFF:function(){return !!_V_.ua.match(\"Firefox\")},isIPad:function(){return navigator.userAgent.match(/iPad/i)!==null},isIPhone:function(){return navigator.userAgent.match(/iPhone/i)!==null},isIOS:function(){return VideoJS.isIPhone()||VideoJS.isIPad()},iOSVersion:function(){var match=navigator.userAgent.match(/OS (\\d+)_/i);if(match&&match[1]){return match[1]}},isAndroid:function(){return navigator.userAgent.match(/Android.*AppleWebKit/i)!==null},androidVersion:function(){var match=navigator.userAgent.match(/Android (\\d+)\\./i);if(match&&match[1]){return match[1]}},testVid:document.createElement(\"video\"),ua:navigator.userAgent,support:{},each:function(arr,fn){if(!arr||arr.length===0){return}for(var i=0,j=arr.length;i<j;i++){fn.call(this,arr[i],i)}},eachProp:function(obj,fn){if(!obj){return}for(var name in obj){if(obj.hasOwnProperty(name)){fn.call(this,name,obj[name])}}},el:function(id){return document.getElementById(id)},createElement:function(tagName,attributes){var el=document.createElement(tagName),attrname;for(attrname in attributes){if(attributes.hasOwnProperty(attrname)){if(attrname.indexOf(\"-\")!==-1){el.setAttribute(attrname,attributes[attrname])}else{el[attrname]=attributes[attrname]}}}return el},insertFirst:function(node,parent){if(parent.firstChild){parent.insertBefore(node,parent.firstChild)}else{parent.appendChild(node)}},addClass:function(element,classToAdd){if((\" \"+element.className+\" \").indexOf(\" \"+classToAdd+\" \")==-1){element.className=element.className===\"\"?classToAdd:element.className+\" \"+classToAdd}},removeClass:function(element,classToRemove){if(element.className.indexOf(classToRemove)==-1){return}var classNames=element.className.split(\" \");classNames.splice(classNames.indexOf(classToRemove),1);element.className=classNames.join(\" \")},remove:function(item,array){if(!array){return}var i=array.indexOf(item);if(i!=-1){return array.splice(i,1)}},blockTextSelection:function(){document.body.focus();document.onselectstart=function(){return false}},unblockTextSelection:function(){document.onselectstart=function(){return true}},formatTime:function(seconds,guide){guide=guide||seconds;var s=Math.floor(seconds%60),m=Math.floor(seconds/60%60),h=Math.floor(seconds/3600),gm=Math.floor(guide/60%60),gh=Math.floor(guide/3600);h=(h>0||gh>0)?h+\":\":\"\";m=(((h||gm>=10)&&m<10)?\"0\"+m:m)+\":\";s=(s<10)?\"0\"+s:s;return h+m+s},uc:function(string){return string.charAt(0).toUpperCase()+string.slice(1)},getRelativePosition:function(x,relativeElement){return Math.max(0,Math.min(1,(x-_V_.findPosX(relativeElement))/relativeElement.offsetWidth))},getComputedStyleValue:function(element,style){return window.getComputedStyle(element,null).getPropertyValue(style)},trim:function(string){return string.toString().replace(/^\\s+/,\"\").replace(/\\s+$/,\"\")},round:function(num,dec){if(!dec){dec=0}return Math.round(num*Math.pow(10,dec))/Math.pow(10,dec)},isEmpty:function(object){for(var prop in object){return false}return true},createTimeRange:function(start,end){return{length:1,start:function(){return start},end:function(){return end}}},cache:{},guid:1,expando:\"vdata\"+(new Date).getTime(),getData:function(elem){var id=elem[_V_.expando];if(!id){id=elem[_V_.expando]=_V_.guid++;_V_.cache[id]={}}return _V_.cache[id]},removeData:function(elem){var id=elem[_V_.expando];if(!id){return}delete _V_.cache[id];try{delete elem[_V_.expando]}catch(e){if(elem.removeAttribute){elem.removeAttribute(_V_.expando)}else{elem[_V_.expando]=null}}},proxy:function(context,fn,uid){if(!fn.guid){fn.guid=_V_.guid++}var ret=function(){return fn.apply(context,arguments)};ret.guid=(uid)?uid+\"_\"+fn.guid:fn.guid;return ret},get:function(url,onSuccess,onError){var local=(url.indexOf(\"file:\")==0||(window.location.href.indexOf(\"file:\")==0&&url.indexOf(\"http:\")==-1));if(typeof XMLHttpRequest==\"undefined\"){XMLHttpRequest=function(){try{return new ActiveXObject(\"Msxml2.XMLHTTP.6.0\")}catch(e){}try{return new ActiveXObject(\"Msxml2.XMLHTTP.3.0\")}catch(f){}try{return new ActiveXObject(\"Msxml2.XMLHTTP\")}catch(g){}throw new Error(\"This browser does not support XMLHttpRequest.\")}}var request=new XMLHttpRequest();try{request.open(\"GET\",url)}catch(e){_V_.log(\"VideoJS XMLHttpRequest (open)\",e);return false}request.onreadystatechange=_V_.proxy(this,function(){if(request.readyState==4){if(request.status==200||local&&request.status==0){onSuccess(request.responseText)}else{if(onError){onError()}}}});try{request.send()}catch(e){_V_.log(\"VideoJS XMLHttpRequest (send)\",e);if(onError){onError(e)}}},setLocalStorage:function(key,value){var localStorage=window.localStorage||false;if(!localStorage){return}try{localStorage[key]=value}catch(e){if(e.code==22||e.code==1014){_V_.log(\"LocalStorage Full (VideoJS)\",e)}else{_V_.log(\"LocalStorage Error (VideoJS)\",e)}}},getAbsoluteURL:function(url){if(!url.match(/^https?:\\/\\//)){url=_V_.createElement(\"div\",{innerHTML:'<a href=\"'+url+'\">x</a>'}).firstChild.href}return url}});_V_.log=function(){_V_.log.history=_V_.log.history||[];_V_.log.history.push(arguments);if(window.console){arguments.callee=arguments.callee.caller;var newarr=[].slice.call(arguments);(typeof console.log===\"object\"?_V_.log.apply.call(console.log,console,newarr):console.log.apply(console,newarr))}};(function(b){function c(){}for(var d=\"assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,timeStamp,profile,profileEnd,time,timeEnd,trace,warn\".split(\",\"),a;a=d.pop();){b[a]=b[a]||c}})((function(){try{console.log();return window.console}catch(err){return window.console={}}})());if(\"getBoundingClientRect\" in document.documentElement){_V_.findPosX=function(el){var box;try{box=el.getBoundingClientRect()}catch(e){}if(!box){return 0}var docEl=document.documentElement,body=document.body,clientLeft=docEl.clientLeft||body.clientLeft||0,scrollLeft=window.pageXOffset||body.scrollLeft,left=box.left+scrollLeft-clientLeft;return left}}else{_V_.findPosX=function(el){var curleft=el.offsetLeft;while(el=obj.offsetParent){if(el.className.indexOf(\"video-js\")==-1){}else{}curleft+=el.offsetLeft}return curleft}}(function(){var initializing=false,fnTest=/xyz/.test(function(){xyz})?/\\b_super\\b/:/.*/;_V_.Class=function(){};_V_.Class.extend=function(prop){var _super=this.prototype;initializing=true;var prototype=new this();initializing=false;for(var name in prop){prototype[name]=typeof prop[name]==\"function\"&&typeof _super[name]==\"function\"&&fnTest.test(prop[name])?(function(name,fn){return function(){var tmp=this._super;this._super=_super[name];var ret=fn.apply(this,arguments);this._super=tmp;return ret}})(name,prop[name]):prop[name]}function Class(){if(!initializing&&this.init){return this.init.apply(this,arguments)}else{if(!initializing){return arguments.callee.prototype.init()}}}Class.prototype=prototype;Class.constructor=Class;Class.extend=arguments.callee;return Class}})();_V_.Component=_V_.Class.extend({init:function(player,options){this.player=player;options=this.options=_V_.merge(this.options||{},options);if(options.el){this.el=options.el}else{this.el=this.createElement()}this.initComponents()},destroy:function(){},createElement:function(type,attrs){return _V_.createElement(type||\"div\",attrs)},buildCSSClass:function(){return\"\"},initComponents:function(){var options=this.options;if(options&&options.components){this.eachProp(options.components,function(name,opts){var tempAdd=this.proxy(function(){this[name]=this.addComponent(name,opts)});if(opts.loadEvent){this.one(opts.loadEvent,tempAdd)}else{tempAdd()}})}},addComponent:function(name,options){var component,componentClass;if(typeof name==\"string\"){options=options||{};componentClass=options.componentClass||_V_.uc(name);component=new _V_[componentClass](this.player||this,options)}else{component=name}this.el.appendChild(component.el);return component},removeComponent:function(component){this.el.removeChild(component.el)},show:function(){this.el.style.display=\"block\"},hide:function(){this.el.style.display=\"none\"},fadeIn:function(){this.removeClass(\"vjs-fade-out\");this.addClass(\"vjs-fade-in\")},fadeOut:function(){this.removeClass(\"vjs-fade-in\");this.addClass(\"vjs-fade-out\")},lockShowing:function(){var style=this.el.style;style.display=\"block\";style.opacity=1;style.visiblity=\"visible\"},unlockShowing:function(){var style=this.el.style;style.display=\"\";style.opacity=\"\";style.visiblity=\"\"},addClass:function(classToAdd){_V_.addClass(this.el,classToAdd)},removeClass:function(classToRemove){_V_.removeClass(this.el,classToRemove)},addEvent:function(type,fn,uid){return _V_.addEvent(this.el,type,_V_.proxy(this,fn))},removeEvent:function(type,fn){return _V_.removeEvent(this.el,type,fn)},triggerEvent:function(type,e){return _V_.triggerEvent(this.el,type,e)},one:function(type,fn){_V_.one(this.el,type,_V_.proxy(this,fn))},ready:function(fn){if(!fn){return this}if(this.isReady){fn.call(this)}else{if(this.readyQueue===undefined){this.readyQueue=[]}this.readyQueue.push(fn)}return this},triggerReady:function(){this.isReady=true;if(this.readyQueue&&this.readyQueue.length>0){this.each(this.readyQueue,function(fn){fn.call(this)});this.readyQueue=[];this.triggerEvent(\"ready\")}},each:function(arr,fn){_V_.each.call(this,arr,fn)},eachProp:function(obj,fn){_V_.eachProp.call(this,obj,fn)},extend:function(obj){_V_.merge(this,obj)},proxy:function(fn,uid){return _V_.proxy(this,fn,uid)}});_V_.Control=_V_.Component.extend({buildCSSClass:function(){return\"vjs-control \"+this._super()}});_V_.ControlBar=_V_.Component.extend({options:{loadEvent:\"play\",components:{playToggle:{},fullscreenToggle:{},currentTimeDisplay:{},timeDivider:{},durationDisplay:{},remainingTimeDisplay:{},progressControl:{},volumeControl:{},muteToggle:{}}},init:function(player,options){this._super(player,options);player.addEvent(\"play\",this.proxy(function(){this.fadeIn();this.player.addEvent(\"mouseover\",this.proxy(this.fadeIn));this.player.addEvent(\"mouseout\",this.proxy(this.fadeOut))}))},createElement:function(){return _V_.createElement(\"div\",{className:\"vjs-controls\"})},fadeIn:function(){this._super();this.player.triggerEvent(\"controlsvisible\")},fadeOut:function(){this._super();this.player.triggerEvent(\"controlshidden\")},lockShowing:function(){this.el.style.opacity=\"1\"}});_V_.Button=_V_.Control.extend({init:function(player,options){this._super(player,options);this.addEvent(\"click\",this.onClick);this.addEvent(\"focus\",this.onFocus);this.addEvent(\"blur\",this.onBlur)},createElement:function(type,attrs){attrs=_V_.merge({className:this.buildCSSClass(),innerHTML:'<div><span class=\"vjs-control-text\">'+(this.buttonText||\"Need Text\")+\"</span></div>\",role:\"button\",tabIndex:0},attrs);return this._super(type,attrs)},onClick:function(){},onFocus:function(){_V_.addEvent(document,\"keyup\",_V_.proxy(this,this.onKeyPress))},onKeyPress:function(event){if(event.which==32||event.which==13){event.preventDefault();this.onClick()}},onBlur:function(){_V_.removeEvent(document,\"keyup\",_V_.proxy(this,this.onKeyPress))}});_V_.PlayButton=_V_.Button.extend({buttonText:\"Play\",buildCSSClass:function(){return\"vjs-play-button \"+this._super()},onClick:function(){this.player.play()}});_V_.PauseButton=_V_.Button.extend({buttonText:\"Pause\",buildCSSClass:function(){return\"vjs-pause-button \"+this._super()},onClick:function(){this.player.pause()}});_V_.PlayToggle=_V_.Button.extend({buttonText:\"Play\",init:function(player,options){this._super(player,options);player.addEvent(\"play\",_V_.proxy(this,this.onPlay));player.addEvent(\"pause\",_V_.proxy(this,this.onPause))},buildCSSClass:function(){return\"vjs-play-control \"+this._super()},onClick:function(){if(this.player.paused()){this.player.play()}else{this.player.pause()}},onPlay:function(){_V_.removeClass(this.el,\"vjs-paused\");_V_.addClass(this.el,\"vjs-playing\")},onPause:function(){_V_.removeClass(this.el,\"vjs-playing\");_V_.addClass(this.el,\"vjs-paused\")}});_V_.FullscreenToggle=_V_.Button.extend({buttonText:\"Fullscreen\",buildCSSClass:function(){return\"vjs-fullscreen-control \"+this._super()},onClick:function(){if(!this.player.isFullScreen){this.player.requestFullScreen()}else{this.player.cancelFullScreen()}}});_V_.BigPlayButton=_V_.Button.extend({init:function(player,options){this._super(player,options);player.addEvent(\"play\",_V_.proxy(this,this.hide));player.addEvent(\"ended\",_V_.proxy(this,this.show))},createElement:function(){return this._super(\"div\",{className:\"vjs-big-play-button\",innerHTML:\"<span></span>\"})},onClick:function(){if(this.player.currentTime()){this.player.currentTime(0)}this.player.play()}});_V_.LoadingSpinner=_V_.Component.extend({init:function(player,options){this._super(player,options);player.addEvent(\"canplay\",_V_.proxy(this,this.hide));player.addEvent(\"canplaythrough\",_V_.proxy(this,this.hide));player.addEvent(\"playing\",_V_.proxy(this,this.hide));player.addEvent(\"seeking\",_V_.proxy(this,this.show));player.addEvent(\"error\",_V_.proxy(this,this.show));player.addEvent(\"waiting\",_V_.proxy(this,this.show))},createElement:function(){var classNameSpinner,innerHtmlSpinner;if(typeof this.player.el.style.WebkitBorderRadius==\"string\"||typeof this.player.el.style.MozBorderRadius==\"string\"||typeof this.player.el.style.KhtmlBorderRadius==\"string\"||typeof this.player.el.style.borderRadius==\"string\"){classNameSpinner=\"vjs-loading-spinner\";innerHtmlSpinner=\"<div class='ball1'></div><div class='ball2'></div><div class='ball3'></div><div class='ball4'></div><div class='ball5'></div><div class='ball6'></div><div class='ball7'></div><div class='ball8'></div>\"}else{classNameSpinner=\"vjs-loading-spinner-fallback\";innerHtmlSpinner=\"\"}return this._super(\"div\",{className:classNameSpinner,innerHTML:innerHtmlSpinner})}});_V_.CurrentTimeDisplay=_V_.Component.extend({init:function(player,options){this._super(player,options);player.addEvent(\"timeupdate\",_V_.proxy(this,this.updateContent))},createElement:function(){var el=this._super(\"div\",{className:\"vjs-current-time vjs-time-controls vjs-control\"});this.content=_V_.createElement(\"div\",{className:\"vjs-current-time-display\",innerHTML:\"0:00\"});el.appendChild(_V_.createElement(\"div\").appendChild(this.content));return el},updateContent:function(){var time=(this.player.scrubbing)?this.player.values.currentTime:this.player.currentTime();this.content.innerHTML=_V_.formatTime(time,this.player.duration())}});_V_.DurationDisplay=_V_.Component.extend({init:function(player,options){this._super(player,options);player.addEvent(\"timeupdate\",_V_.proxy(this,this.updateContent))},createElement:function(){var el=this._super(\"div\",{className:\"vjs-duration vjs-time-controls vjs-control\"});this.content=_V_.createElement(\"div\",{className:\"vjs-duration-display\",innerHTML:\"0:00\"});el.appendChild(_V_.createElement(\"div\").appendChild(this.content));return el},updateContent:function(){if(this.player.duration()){this.content.innerHTML=_V_.formatTime(this.player.duration())}}});_V_.TimeDivider=_V_.Component.extend({createElement:function(){return this._super(\"div\",{className:\"vjs-time-divider\",innerHTML:\"<div><span>/</span></div>\"})}});_V_.RemainingTimeDisplay=_V_.Component.extend({init:function(player,options){this._super(player,options);player.addEvent(\"timeupdate\",_V_.proxy(this,this.updateContent))},createElement:function(){var el=this._super(\"div\",{className:\"vjs-remaining-time vjs-time-controls vjs-control\"});this.content=_V_.createElement(\"div\",{className:\"vjs-remaining-time-display\",innerHTML:\"-0:00\"});el.appendChild(_V_.createElement(\"div\").appendChild(this.content));return el},updateContent:function(){if(this.player.duration()){this.content.innerHTML=\"-\"+_V_.formatTime(this.player.remainingTime())}}});_V_.Slider=_V_.Component.extend({init:function(player,options){this._super(player,options);player.addEvent(this.playerEvent,_V_.proxy(this,this.update));this.addEvent(\"mousedown\",this.onMouseDown);this.addEvent(\"focus\",this.onFocus);this.addEvent(\"blur\",this.onBlur);this.player.addEvent(\"controlsvisible\",this.proxy(this.update));this.update()},createElement:function(type,attrs){attrs=_V_.merge({role:\"slider\",\"aria-valuenow\":0,\"aria-valuemin\":0,\"aria-valuemax\":100,tabIndex:0},attrs);return this._super(type,attrs)},onMouseDown:function(event){event.preventDefault();_V_.blockTextSelection();_V_.addEvent(document,\"mousemove\",_V_.proxy(this,this.onMouseMove));_V_.addEvent(document,\"mouseup\",_V_.proxy(this,this.onMouseUp));this.onMouseMove(event)},onMouseUp:function(event){_V_.unblockTextSelection();_V_.removeEvent(document,\"mousemove\",this.onMouseMove,false);_V_.removeEvent(document,\"mouseup\",this.onMouseUp,false);this.update()},update:function(){var barProgress,progress=this.getPercent();handle=this.handle,bar=this.bar;if(isNaN(progress)){progress=0}barProgress=progress;if(handle){var box=this.el,boxWidth=box.offsetWidth,handleWidth=handle.el.offsetWidth,handlePercent=(handleWidth)?handleWidth/boxWidth:0,boxAdjustedPercent=1-handlePercent;adjustedProgress=progress*boxAdjustedPercent,barProgress=adjustedProgress+(handlePercent/2);handle.el.style.left=_V_.round(adjustedProgress*100,2)+\"%\"}bar.el.style.width=_V_.round(barProgress*100,2)+\"%\"},calculateDistance:function(event){var box=this.el,boxX=_V_.findPosX(box),boxW=box.offsetWidth,handle=this.handle;if(handle){var handleW=handle.el.offsetWidth;boxX=boxX+(handleW/2);boxW=boxW-handleW}return Math.max(0,Math.min(1,(event.pageX-boxX)/boxW))},onFocus:function(event){_V_.addEvent(document,\"keyup\",_V_.proxy(this,this.onKeyPress))},onKeyPress:function(event){if(event.which==37){event.preventDefault();this.stepBack()}else{if(event.which==39){event.preventDefault();this.stepForward()}}},onBlur:function(event){_V_.removeEvent(document,\"keyup\",_V_.proxy(this,this.onKeyPress))}});_V_.ProgressControl=_V_.Component.extend({options:{components:{seekBar:{}}},createElement:function(){return this._super(\"div\",{className:\"vjs-progress-control vjs-control\"})}});_V_.SeekBar=_V_.Slider.extend({options:{components:{loadProgressBar:{},bar:{componentClass:\"PlayProgressBar\"},handle:{componentClass:\"SeekHandle\"}}},playerEvent:\"timeupdate\",init:function(player,options){this._super(player,options)},createElement:function(){return this._super(\"div\",{className:\"vjs-progress-holder\"})},getPercent:function(){return this.player.currentTime()/this.player.duration()},onMouseDown:function(event){this._super(event);this.player.scrubbing=true;this.videoWasPlaying=!this.player.paused();this.player.pause()},onMouseMove:function(event){var newTime=this.calculateDistance(event)*this.player.duration();if(newTime==this.player.duration()){newTime=newTime-0.1}this.player.currentTime(newTime)},onMouseUp:function(event){this._super(event);this.player.scrubbing=false;if(this.videoWasPlaying){this.player.play()}},stepForward:function(){this.player.currentTime(this.player.currentTime()+1)},stepBack:function(){this.player.currentTime(this.player.currentTime()-1)}});_V_.LoadProgressBar=_V_.Component.extend({init:function(player,options){this._super(player,options);player.addEvent(\"progress\",_V_.proxy(this,this.update))},createElement:function(){return this._super(\"div\",{className:\"vjs-load-progress\",innerHTML:'<span class=\"vjs-control-text\">Loaded: 0%</span>'})},update:function(){if(this.el.style){this.el.style.width=_V_.round(this.player.bufferedPercent()*100,2)+\"%\"}}});_V_.PlayProgressBar=_V_.Component.extend({createElement:function(){return this._super(\"div\",{className:\"vjs-play-progress\",innerHTML:'<span class=\"vjs-control-text\">Progress: 0%</span>'})}});_V_.SeekHandle=_V_.Component.extend({createElement:function(){return this._super(\"div\",{className:\"vjs-seek-handle\",innerHTML:'<span class=\"vjs-control-text\">00:00</span>'})}});_V_.VolumeControl=_V_.Component.extend({options:{components:{volumeBar:{}}},createElement:function(){return this._super(\"div\",{className:\"vjs-volume-control vjs-control\"})}});_V_.VolumeBar=_V_.Slider.extend({options:{components:{bar:{componentClass:\"VolumeLevel\"},handle:{componentClass:\"VolumeHandle\"}}},playerEvent:\"volumechange\",createElement:function(){return this._super(\"div\",{className:\"vjs-volume-bar\"})},onMouseMove:function(event){this.player.volume(this.calculateDistance(event))},getPercent:function(){return this.player.volume()},stepForward:function(){this.player.volume(this.player.volume()+0.1)},stepBack:function(){this.player.volume(this.player.volume()-0.1)}});_V_.VolumeLevel=_V_.Component.extend({createElement:function(){return this._super(\"div\",{className:\"vjs-volume-level\",innerHTML:'<span class=\"vjs-control-text\"></span>'})}});_V_.VolumeHandle=_V_.Component.extend({createElement:function(){return this._super(\"div\",{className:\"vjs-volume-handle\",innerHTML:'<span class=\"vjs-control-text\"></span>'})}});_V_.MuteToggle=_V_.Button.extend({init:function(player,options){this._super(player,options);player.addEvent(\"volumechange\",_V_.proxy(this,this.update))},createElement:function(){return this._super(\"div\",{className:\"vjs-mute-control vjs-control\",innerHTML:'<div><span class=\"vjs-control-text\">Mute</span></div>'})},onClick:function(event){this.player.muted(this.player.muted()?false:true)},update:function(event){var vol=this.player.volume(),level=3;if(vol==0||this.player.muted()){level=0}else{if(vol<0.33){level=1}else{if(vol<0.67){level=2}}}_V_.each.call(this,[0,1,2,3],function(i){_V_.removeClass(this.el,\"vjs-vol-\"+i)});_V_.addClass(this.el,\"vjs-vol-\"+level)}});_V_.PosterImage=_V_.Button.extend({init:function(player,options){this._super(player,options);if(!this.player.options.poster){this.hide()}player.addEvent(\"play\",_V_.proxy(this,this.hide))},createElement:function(){return _V_.createElement(\"img\",{className:\"vjs-poster\",src:this.player.options.poster,tabIndex:-1})},onClick:function(){this.player.play()}});_V_.Menu=_V_.Component.extend({init:function(player,options){this._super(player,options)},addItem:function(component){this.addComponent(component);component.addEvent(\"click\",this.proxy(function(){this.unlockShowing()}))},createElement:function(){return this._super(\"ul\",{className:\"vjs-menu\"})}});_V_.MenuItem=_V_.Button.extend({init:function(player,options){this._super(player,options);if(options.selected){this.addClass(\"vjs-selected\")}},createElement:function(type,attrs){return this._super(\"li\",_V_.merge({className:\"vjs-menu-item\",innerHTML:this.options.label},attrs))},onClick:function(){this.selected(true)},selected:function(selected){if(selected){this.addClass(\"vjs-selected\")}else{this.removeClass(\"vjs-selected\")}}});if(!Array.prototype.indexOf){Array.prototype.indexOf=function(searchElement){if(this===void 0||this===null){throw new TypeError()}var t=Object(this);var len=t.length>>>0;if(len===0){return -1}var n=0;if(arguments.length>0){n=Number(arguments[1]);if(n!==n){n=0}else{if(n!==0&&n!==(1/0)&&n!==-(1/0)){n=(n>0||-1)*Math.floor(Math.abs(n))}}}if(n>=len){return -1}var k=n>=0?n:Math.max(len-Math.abs(n),0);for(;k<len;k++){if(k in t&&t[k]===searchElement){return k}}return -1}}_V_.extend({addEvent:function(elem,type,fn){var data=_V_.getData(elem),handlers;if(data&&!data.handler){data.handler=function(event){event=_V_.fixEvent(event);var handlers=_V_.getData(elem).events[event.type];if(handlers){var handlersCopy=[];_V_.each(handlers,function(handler,i){handlersCopy[i]=handler});for(var i=0,l=handlersCopy.length;i<l;i++){handlersCopy[i].call(elem,event)}}}}if(!data.events){data.events={}}handlers=data.events[type];if(!handlers){handlers=data.events[type]=[];if(document.addEventListener){elem.addEventListener(type,data.handler,false)}else{if(document.attachEvent){elem.attachEvent(\"on\"+type,data.handler)}}}if(!fn.guid){fn.guid=_V_.guid++}handlers.push(fn)},removeEvent:function(elem,type,fn){var data=_V_.getData(elem),handlers;if(!data.events){return}if(!type){for(type in data.events){_V_.cleanUpEvents(elem,type)}return}handlers=data.events[type];if(!handlers){return}if(fn&&fn.guid){for(var i=0;i<handlers.length;i++){if(handlers[i].guid===fn.guid){handlers.splice(i--,1)}}}_V_.cleanUpEvents(elem,type)},cleanUpEvents:function(elem,type){var data=_V_.getData(elem);if(data.events[type].length===0){delete data.events[type];if(document.removeEventListener){elem.removeEventListener(type,data.handler,false)}else{if(document.detachEvent){elem.detachEvent(\"on\"+type,data.handler)}}}if(_V_.isEmpty(data.events)){delete data.events;delete data.handler}if(_V_.isEmpty(data)){_V_.removeData(elem)}},fixEvent:function(event){if(event[_V_.expando]){return event}var originalEvent=event;event=new _V_.Event(originalEvent);for(var i=_V_.Event.props.length,prop;i;){prop=_V_.Event.props[--i];event[prop]=originalEvent[prop]}if(!event.target){event.target=event.srcElement||document}if(event.target.nodeType===3){event.target=event.target.parentNode}if(!event.relatedTarget&&event.fromElement){event.relatedTarget=event.fromElement===event.target?event.toElement:event.fromElement}if(event.pageX==null&&event.clientX!=null){var eventDocument=event.target.ownerDocument||document,doc=eventDocument.documentElement,body=eventDocument.body;event.pageX=event.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0);event.pageY=event.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)}if(event.which==null&&(event.charCode!=null||event.keyCode!=null)){event.which=event.charCode!=null?event.charCode:event.keyCode}if(!event.metaKey&&event.ctrlKey){event.metaKey=event.ctrlKey}if(!event.which&&event.button!==undefined){event.which=(event.button&1?1:(event.button&2?3:(event.button&4?2:0)))}return event},triggerEvent:function(elem,event){var data=_V_.getData(elem),parent=elem.parentNode||elem.ownerDocument,type=event.type||event,handler;if(data){handler=data.handler}event=typeof event===\"object\"?event[_V_.expando]?event:new _V_.Event(type,event):new _V_.Event(type);event.type=type;if(handler){handler.call(elem,event)}event.result=undefined;event.target=elem},one:function(elem,type,fn){_V_.addEvent(elem,type,function(){_V_.removeEvent(elem,type,arguments.callee);fn.apply(this,arguments)})}});_V_.Event=function(src,props){if(src&&src.type){this.originalEvent=src;this.type=src.type;this.isDefaultPrevented=(src.defaultPrevented||src.returnValue===false||src.getPreventDefault&&src.getPreventDefault())?returnTrue:returnFalse}else{this.type=src}if(props){_V_.merge(this,props)}this.timeStamp=(new Date).getTime();this[_V_.expando]=true};_V_.Event.prototype={preventDefault:function(){this.isDefaultPrevented=returnTrue;var e=this.originalEvent;if(!e){return}if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}},stopPropagation:function(){this.isPropagationStopped=returnTrue;var e=this.originalEvent;if(!e){return}if(e.stopPropagation){e.stopPropagation()}e.cancelBubble=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=returnTrue;this.stopPropagation()},isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse};_V_.Event.props=\"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which\".split(\" \");function returnTrue(){return true}function returnFalse(){return false}var JSON;if(!JSON){JSON={}}(function(){var cx=/[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g;if(typeof JSON.parse!==\"function\"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value===\"object\"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return\"\\\\u\"+(\"0000\"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\\],:{}\\s]*$/.test(text.replace(/\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g,\"@\").replace(/\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g,\"]\").replace(/(?:^|:|,)(?:\\s*\\[)+/g,\"\"))){j=eval(\"(\"+text+\")\");return typeof reviver===\"function\"?walk({\"\":j},\"\"):j}throw new SyntaxError(\"JSON.parse\")}}}());_V_.Player=_V_.Component.extend({init:function(tag,addOptions,ready){this.tag=tag;var el=this.el=_V_.createElement(\"div\"),options=this.options={},width=options.width=tag.getAttribute(\"width\"),height=options.height=tag.getAttribute(\"height\"),initWidth=width||300,initHeight=height||150;tag.player=el.player=this;this.ready(ready);tag.parentNode.insertBefore(el,tag);el.appendChild(tag);el.id=this.id=tag.id;el.className=tag.className;tag.id+=\"_html5_api\";tag.className=\"vjs-tech\";_V_.players[el.id]=this;el.setAttribute(\"width\",initWidth);el.setAttribute(\"height\",initHeight);el.style.width=initWidth+\"px\";el.style.height=initHeight+\"px\";tag.removeAttribute(\"width\");tag.removeAttribute(\"height\");_V_.merge(options,_V_.options);_V_.merge(options,this.getVideoTagSettings());_V_.merge(options,addOptions);tag.removeAttribute(\"controls\");tag.removeAttribute(\"poster\");if(tag.hasChildNodes()){for(var i=0,j=tag.childNodes;i<j.length;i++){if(j[i].nodeName==\"SOURCE\"||j[i].nodeName==\"TRACK\"){tag.removeChild(j[i])}}}this.values={};this.addClass(\"vjs-paused\");this.addEvent(\"ended\",this.onEnded);this.addEvent(\"play\",this.onPlay);this.addEvent(\"pause\",this.onPause);this.addEvent(\"progress\",this.onProgress);this.addEvent(\"error\",this.onError);if(options.controls){this.ready(function(){this.initComponents()})}this.textTracks=[];if(options.tracks&&options.tracks.length>0){this.addTextTracks(options.tracks)}if(!options.sources||options.sources.length==0){for(var i=0,j=options.techOrder;i<j.length;i++){var techName=j[i],tech=_V_[techName];if(tech.isSupported()){this.loadTech(techName);break}}}else{this.src(options.sources)}},values:{},destroy:function(){this.stopTrackingProgress();this.stopTrackingCurrentTime();_V_.players[this.id]=null;delete _V_.players[this.id];this.tech.destroy();this.el.parentNode.removeChild(this.el)},createElement:function(type,options){},getVideoTagSettings:function(){var options={sources:[],tracks:[]};options.src=this.tag.getAttribute(\"src\");options.controls=this.tag.getAttribute(\"controls\")!==null;options.poster=this.tag.getAttribute(\"poster\");options.preload=this.tag.getAttribute(\"preload\");options.autoplay=this.tag.getAttribute(\"autoplay\")!==null;options.loop=this.tag.getAttribute(\"loop\")!==null;options.muted=this.tag.getAttribute(\"muted\")!==null;if(this.tag.hasChildNodes()){for(var c,i=0,j=this.tag.childNodes;i<j.length;i++){c=j[i];if(c.nodeName==\"SOURCE\"){options.sources.push({src:c.getAttribute(\"src\"),type:c.getAttribute(\"type\"),media:c.getAttribute(\"media\"),title:c.getAttribute(\"title\")})}if(c.nodeName==\"TRACK\"){options.tracks.push({src:c.getAttribute(\"src\"),kind:c.getAttribute(\"kind\"),srclang:c.getAttribute(\"srclang\"),label:c.getAttribute(\"label\"),\"default\":c.getAttribute(\"default\")!==null,title:c.getAttribute(\"title\")})}}}return options},loadTech:function(techName,source){if(this.tech){this.unloadTech()}else{if(techName!=\"html5\"&&this.tag){this.el.removeChild(this.tag);this.tag=false}}this.techName=techName;this.isReady=false;var techReady=function(){this.player.triggerReady();if(!this.support.progressEvent){this.player.manualProgressOn()}if(!this.support.timeupdateEvent){this.player.manualTimeUpdatesOn()}};var techOptions=_V_.merge({source:source,parentEl:this.el},this.options[techName]);if(source){if(source.src==this.values.src&&this.values.currentTime>0){techOptions.startTime=this.values.currentTime}this.values.src=source.src}this.tech=new _V_[techName](this,techOptions);this.tech.ready(techReady)},unloadTech:function(){this.tech.destroy();if(this.manualProgress){this.manualProgressOff()}if(this.manualTimeUpdates){this.manualTimeUpdatesOff()}this.tech=false},manualProgressOn:function(){this.manualProgress=true;this.trackProgress();this.tech.addEvent(\"progress\",function(){this.removeEvent(\"progress\",arguments.callee);this.support.progressEvent=true;this.player.manualProgressOff()})},manualProgressOff:function(){this.manualProgress=false;this.stopTrackingProgress()},trackProgress:function(){this.progressInterval=setInterval(_V_.proxy(this,function(){if(this.values.bufferEnd<this.buffered().end(0)){this.triggerEvent(\"progress\")}else{if(this.bufferedPercent()==1){this.stopTrackingProgress();this.triggerEvent(\"progress\")}}}),500)},stopTrackingProgress:function(){clearInterval(this.progressInterval)},manualTimeUpdatesOn:function(){this.manualTimeUpdates=true;this.addEvent(\"play\",this.trackCurrentTime);this.addEvent(\"pause\",this.stopTrackingCurrentTime);this.tech.addEvent(\"timeupdate\",function(){this.removeEvent(\"timeupdate\",arguments.callee);this.support.timeupdateEvent=true;this.player.manualTimeUpdatesOff()})},manualTimeUpdatesOff:function(){this.manualTimeUpdates=false;this.stopTrackingCurrentTime();this.removeEvent(\"play\",this.trackCurrentTime);this.removeEvent(\"pause\",this.stopTrackingCurrentTime)},trackCurrentTime:function(){if(this.currentTimeInterval){this.stopTrackingCurrentTime()}this.currentTimeInterval=setInterval(_V_.proxy(this,function(){this.triggerEvent(\"timeupdate\")}),250)},stopTrackingCurrentTime:function(){clearInterval(this.currentTimeInterval)},onEnded:function(){if(this.options.loop){this.currentTime(0);this.play()}else{this.pause();this.currentTime(0);this.pause()}},onPlay:function(){_V_.removeClass(this.el,\"vjs-paused\");_V_.addClass(this.el,\"vjs-playing\")},onPause:function(){_V_.removeClass(this.el,\"vjs-playing\");_V_.addClass(this.el,\"vjs-paused\")},onProgress:function(){if(this.bufferedPercent()==1){this.triggerEvent(\"loadedalldata\")}},onError:function(e){_V_.log(\"Video Error\",e)},techCall:function(method,arg){if(!this.tech.isReady){this.tech.ready(function(){this[method](arg)})}else{try{this.tech[method](arg)}catch(e){_V_.log(e)}}},techGet:function(method){if(this.tech.isReady){try{return this.tech[method]()}catch(e){if(this.tech[method]===undefined){_V_.log(\"Video.js: \"+method+\" method not defined for \"+this.techName+\" playback technology.\",e)}else{if(e.name==\"TypeError\"){_V_.log(\"Video.js: \"+method+\" unavailable on \"+this.techName+\" playback technology element.\",e);this.tech.isReady=false}else{_V_.log(e)}}}}return},play:function(){this.techCall(\"play\");return this},pause:function(){this.techCall(\"pause\");return this},paused:function(){return(this.techGet(\"paused\")===false)?false:true},currentTime:function(seconds){if(seconds!==undefined){this.values.lastSetCurrentTime=seconds;this.techCall(\"setCurrentTime\",seconds);if(this.manualTimeUpdates){this.triggerEvent(\"timeupdate\")}return this}return this.values.currentTime=(this.techGet(\"currentTime\")||0)},duration:function(){return parseFloat(this.techGet(\"duration\"))},remainingTime:function(){return this.duration()-this.currentTime()},buffered:function(){var buffered=this.techGet(\"buffered\"),start=0,end=this.values.bufferEnd=this.values.bufferEnd||0,timeRange;if(buffered&&buffered.length>0&&buffered.end(0)!==end){end=buffered.end(0);this.values.bufferEnd=end}return _V_.createTimeRange(start,end)},bufferedPercent:function(){return(this.duration())?this.buffered().end(0)/this.duration():0},volume:function(percentAsDecimal){var vol;if(percentAsDecimal!==undefined){vol=Math.max(0,Math.min(1,parseFloat(percentAsDecimal)));this.values.volume=vol;this.techCall(\"setVolume\",vol);_V_.setLocalStorage(\"volume\",vol);return this}vol=parseFloat(this.techGet(\"volume\"));return(isNaN(vol))?1:vol},muted:function(muted){if(muted!==undefined){this.techCall(\"setMuted\",muted);return this}return this.techGet(\"muted\")||false},width:function(width,skipListeners){if(width!==undefined){this.el.width=width;this.el.style.width=width+\"px\";if(!skipListeners){this.triggerEvent(\"resize\")}return this}return parseInt(this.el.getAttribute(\"width\"))},height:function(height){if(height!==undefined){this.el.height=height;this.el.style.height=height+\"px\";this.triggerEvent(\"resize\");return this}return parseInt(this.el.getAttribute(\"height\"))},size:function(width,height){return this.width(width,true).height(height)},supportsFullScreen:function(){return this.techGet(\"supportsFullScreen\")||false},requestFullScreen:function(){var requestFullScreen=_V_.support.requestFullScreen;this.isFullScreen=true;if(requestFullScreen){_V_.addEvent(document,requestFullScreen.eventName,this.proxy(function(){this.isFullScreen=document[requestFullScreen.isFullScreen];if(this.isFullScreen==false){_V_.removeEvent(document,requestFullScreen.eventName,arguments.callee)}this.triggerEvent(\"fullscreenchange\")}));if(this.tech.support.fullscreenResize===false&&this.options.flash.iFrameMode!=true){this.pause();this.unloadTech();_V_.addEvent(document,requestFullScreen.eventName,this.proxy(function(){_V_.removeEvent(document,requestFullScreen.eventName,arguments.callee);this.loadTech(this.techName,{src:this.values.src})}));this.el[requestFullScreen.requestFn]()}else{this.el[requestFullScreen.requestFn]()}}else{if(this.tech.supportsFullScreen()){this.triggerEvent(\"fullscreenchange\");this.techCall(\"enterFullScreen\")}else{this.triggerEvent(\"fullscreenchange\");this.enterFullWindow()}}return this},cancelFullScreen:function(){var requestFullScreen=_V_.support.requestFullScreen;this.isFullScreen=false;if(requestFullScreen){if(this.tech.support.fullscreenResize===false&&this.options.flash.iFrameMode!=true){this.pause();this.unloadTech();_V_.addEvent(document,requestFullScreen.eventName,this.proxy(function(){_V_.removeEvent(document,requestFullScreen.eventName,arguments.callee);this.loadTech(this.techName,{src:this.values.src})}));document[requestFullScreen.cancelFn]()}else{document[requestFullScreen.cancelFn]()}}else{if(this.tech.supportsFullScreen()){this.techCall(\"exitFullScreen\");this.triggerEvent(\"fullscreenchange\")}else{this.exitFullWindow();this.triggerEvent(\"fullscreenchange\")}}return this},enterFullWindow:function(){this.isFullWindow=true;this.docOrigOverflow=document.documentElement.style.overflow;_V_.addEvent(document,\"keydown\",_V_.proxy(this,this.fullWindowOnEscKey));document.documentElement.style.overflow=\"hidden\";_V_.addClass(document.body,\"vjs-full-window\");_V_.addClass(this.el,\"vjs-fullscreen\");this.triggerEvent(\"enterFullWindow\")},fullWindowOnEscKey:function(event){if(event.keyCode==27){if(this.isFullScreen==true){this.cancelFullScreen()}else{this.exitFullWindow()}}},exitFullWindow:function(){this.isFullWindow=false;_V_.removeEvent(document,\"keydown\",this.fullWindowOnEscKey);document.documentElement.style.overflow=this.docOrigOverflow;_V_.removeClass(document.body,\"vjs-full-window\");_V_.removeClass(this.el,\"vjs-fullscreen\");this.triggerEvent(\"exitFullWindow\")},selectSource:function(sources){for(var i=0,j=this.options.techOrder;i<j.length;i++){var techName=j[i],tech=_V_[techName];if(tech.isSupported()){for(var a=0,b=sources;a<b.length;a++){var source=b[a];if(tech.canPlaySource.call(this,source)){return{source:source,tech:techName}}}}}return false},src:function(source){if(source instanceof Array){var sourceTech=this.selectSource(source),source,techName;if(sourceTech){source=sourceTech.source;techName=sourceTech.tech;if(techName==this.techName){this.src(source)}else{this.loadTech(techName,source)}}else{_V_.log(\"No compatible source and playback technology were found.\")}}else{if(source instanceof Object){if(_V_[this.techName].canPlaySource(source)){this.src(source.src)}else{this.src([source])}}else{this.values.src=source;if(!this.isReady){this.ready(function(){this.src(source)})}else{this.techCall(\"src\",source);if(this.options.preload==\"auto\"){this.load()}if(this.options.autoplay){this.play()}}}}return this},load:function(){this.techCall(\"load\");return this},currentSrc:function(){return this.techGet(\"currentSrc\")||this.values.src||\"\"},preload:function(value){if(value!==undefined){this.techCall(\"setPreload\",value);this.options.preload=value;return this}return this.techGet(\"preload\")},autoplay:function(value){if(value!==undefined){this.techCall(\"setAutoplay\",value);this.options.autoplay=value;return this}return this.techGet(\"autoplay\",value)},loop:function(value){if(value!==undefined){this.techCall(\"setLoop\",value);this.options.loop=value;return this}return this.techGet(\"loop\")},controls:function(){return this.options.controls},poster:function(){return this.techGet(\"poster\")},error:function(){return this.techGet(\"error\")},ended:function(){return this.techGet(\"ended\")}});(function(){var requestFn,cancelFn,eventName,isFullScreen,playerProto=_V_.Player.prototype;if(document.cancelFullscreen!==undefined){requestFn=\"requestFullscreen\";cancelFn=\"exitFullscreen\";eventName=\"fullscreenchange\";isFullScreen=\"fullScreen\"}else{_V_.each([\"moz\",\"webkit\"],function(prefix){if((prefix!=\"moz\"||document.mozFullScreenEnabled)&&document[prefix+\"CancelFullScreen\"]!==undefined){requestFn=prefix+\"RequestFullScreen\";cancelFn=prefix+\"CancelFullScreen\";eventName=prefix+\"fullscreenchange\";if(prefix==\"webkit\"){isFullScreen=prefix+\"IsFullScreen\"}else{isFullScreen=prefix+\"FullScreen\"}}})}if(requestFn){_V_.support.requestFullScreen={requestFn:requestFn,cancelFn:cancelFn,eventName:eventName,isFullScreen:isFullScreen}}})();_V_.PlaybackTech=_V_.Component.extend({init:function(player,options){},onClick:function(){if(this.player.options.controls){_V_.PlayToggle.prototype.onClick.call(this)}}});_V_.apiMethods=\"play,pause,paused,currentTime,setCurrentTime,duration,buffered,volume,setVolume,muted,setMuted,width,height,supportsFullScreen,enterFullScreen,src,load,currentSrc,preload,setPreload,autoplay,setAutoplay,loop,setLoop,error,networkState,readyState,seeking,initialTime,startOffsetTime,played,seekable,ended,videoTracks,audioTracks,videoWidth,videoHeight,textTracks,defaultPlaybackRate,playbackRate,mediaGroup,controller,controls,defaultMuted\".split(\",\");_V_.each(_V_.apiMethods,function(methodName){_V_.PlaybackTech.prototype[methodName]=function(){throw new Error(\"The '\"+methodName+\"' method is not available on the playback technology's API\")}});_V_.html5=_V_.PlaybackTech.extend({init:function(player,options,ready){this.player=player;this.el=this.createElement();this.ready(ready);this.addEvent(\"click\",this.proxy(this.onClick));var source=options.source;if(source&&this.el.currentSrc==source.src){player.triggerEvent(\"loadstart\")}else{if(source){this.el.src=source.src}}player.ready(function(){if(this.options.autoplay&&this.paused()){this.tag.poster=null;this.play()}});this.setupTriggers();this.triggerReady()},destroy:function(){this.player.tag=false;this.removeTriggers();this.el.parentNode.removeChild(this.el)},createElement:function(){var html5=_V_.html5,player=this.player,el=player.tag,newEl;if(!el||this.support.movingElementInDOM===false){if(el){player.el.removeChild(el)}newEl=_V_.createElement(\"video\",{id:el.id||player.el.id+\"_html5_api\",className:el.className||\"vjs-tech\"});el=newEl;_V_.insertFirst(el,player.el)}_V_.each([\"autoplay\",\"preload\",\"loop\",\"muted\"],function(attr){if(player.options[attr]!==null){el[attr]=player.options[attr]}},this);return el},setupTriggers:function(){_V_.each.call(this,_V_.html5.events,function(type){_V_.addEvent(this.el,type,_V_.proxy(this.player,this.eventHandler))})},removeTriggers:function(){_V_.each.call(this,_V_.html5.events,function(type){_V_.removeEvent(this.el,type,_V_.proxy(this.player,this.eventHandler))})},eventHandler:function(e){e.stopPropagation();this.triggerEvent(e)},play:function(){this.el.play()},pause:function(){this.el.pause()},paused:function(){return this.el.paused},currentTime:function(){return this.el.currentTime},setCurrentTime:function(seconds){try{this.el.currentTime=seconds}catch(e){_V_.log(e,\"Video isn't ready. (VideoJS)\")}},duration:function(){return this.el.duration||0},buffered:function(){return this.el.buffered},volume:function(){return this.el.volume},setVolume:function(percentAsDecimal){this.el.volume=percentAsDecimal},muted:function(){return this.el.muted},setMuted:function(muted){this.el.muted=muted},width:function(){return this.el.offsetWidth},height:function(){return this.el.offsetHeight},supportsFullScreen:function(){if(typeof this.el.webkitEnterFullScreen==\"function\"){if(!navigator.userAgent.match(\"Chrome\")&&!navigator.userAgent.match(\"Mac OS X 10.5\")){return true}}return false},enterFullScreen:function(){try{this.el.webkitEnterFullScreen()}catch(e){if(e.code==11){_V_.log(\"VideoJS: Video not ready.\")}}},src:function(src){this.el.src=src},load:function(){this.el.load()},currentSrc:function(){return this.el.currentSrc},preload:function(){return this.el.preload},setPreload:function(val){this.el.preload=val},autoplay:function(){return this.el.autoplay},setAutoplay:function(val){this.el.autoplay=val},loop:function(){return this.el.loop},setLoop:function(val){this.el.loop=val},error:function(){return this.el.error},seeking:function(){return this.el.seeking},ended:function(){return this.el.ended},controls:function(){return this.player.options.controls},defaultMuted:function(){return this.el.defaultMuted}});_V_.html5.isSupported=function(){return !!document.createElement(\"video\").canPlayType};_V_.html5.canPlaySource=function(srcObj){return !!document.createElement(\"video\").canPlayType(srcObj.type)};_V_.html5.events=\"loadstart,suspend,abort,error,emptied,stalled,loadedmetadata,loadeddata,canplay,canplaythrough,playing,waiting,seeking,seeked,ended,durationchange,timeupdate,progress,play,pause,ratechange,volumechange\".split(\",\");_V_.html5.prototype.support={fullscreen:(typeof _V_.testVid.webkitEnterFullScreen!==undefined)?(!_V_.ua.match(\"Chrome\")&&!_V_.ua.match(\"Mac OS X 10.5\")?true:false):false,movingElementInDOM:!_V_.isIOS()};if(_V_.isAndroid()){if(_V_.androidVersion()<3){document.createElement(\"video\").constructor.prototype.canPlayType=function(type){return(type&&type.toLowerCase().indexOf(\"video/mp4\")!=-1)?\"maybe\":\"\"}}}_V_.flash=_V_.PlaybackTech.extend({init:function(player,options){this.player=player;var source=options.source,parentEl=options.parentEl,placeHolder=this.el=_V_.createElement(\"div\",{id:parentEl.id+\"_temp_flash\"}),objId=player.el.id+\"_flash_api\",playerOptions=player.options,flashVars=_V_.merge({readyFunction:\"_V_.flash.onReady\",eventProxyFunction:\"_V_.flash.onEvent\",errorEventProxyFunction:\"_V_.flash.onError\",autoplay:playerOptions.autoplay,preload:playerOptions.preload,loop:playerOptions.loop,muted:playerOptions.muted},options.flashVars),params=_V_.merge({wmode:\"opaque\",bgcolor:\"#000000\"},options.params),attributes=_V_.merge({id:objId,name:objId,\"class\":\"vjs-tech\"},options.attributes);if(source){flashVars.src=encodeURIComponent(_V_.getAbsoluteURL(source.src))}_V_.insertFirst(placeHolder,parentEl);if(options.startTime){this.ready(function(){this.load();this.play();this.currentTime(options.startTime)})}if(options.iFrameMode==true&&!_V_.isFF){var iFrm=_V_.createElement(\"iframe\",{id:objId+\"_iframe\",name:objId+\"_iframe\",className:\"vjs-tech\",scrolling:\"no\",marginWidth:0,marginHeight:0,frameBorder:0});flashVars.readyFunction=\"ready\";flashVars.eventProxyFunction=\"events\";flashVars.errorEventProxyFunction=\"errors\";_V_.addEvent(iFrm,\"load\",_V_.proxy(this,function(){var iDoc,objTag,swfLoc,iWin=iFrm.contentWindow,varString=\"\";iDoc=iFrm.contentDocument?iFrm.contentDocument:iFrm.contentWindow.document;iDoc.write(_V_.flash.getEmbedCode(options.swf,flashVars,params,attributes));iWin.player=this.player;iWin.ready=_V_.proxy(this.player,function(currSwf){var el=iDoc.getElementById(currSwf),player=this,tech=player.tech;tech.el=el;_V_.addEvent(el,\"click\",tech.proxy(tech.onClick));_V_.flash.checkReady(tech)});iWin.events=_V_.proxy(this.player,function(swfID,eventName,other){var player=this;if(player&&player.techName==\"flash\"){player.triggerEvent(eventName)}});iWin.errors=_V_.proxy(this.player,function(swfID,eventName){_V_.log(\"Flash Error\",eventName)})}));placeHolder.parentNode.replaceChild(iFrm,placeHolder)}else{_V_.flash.embed(options.swf,placeHolder,flashVars,params,attributes)}},destroy:function(){this.el.parentNode.removeChild(this.el)},play:function(){this.el.vjs_play()},pause:function(){this.el.vjs_pause()},src:function(src){src=_V_.getAbsoluteURL(src);this.el.vjs_src(src);if(this.player.autoplay()){var tech=this;setTimeout(function(){tech.play()},0)}},load:function(){this.el.vjs_load()},poster:function(){this.el.vjs_getProperty(\"poster\")},buffered:function(){return _V_.createTimeRange(0,this.el.vjs_getProperty(\"buffered\"))},supportsFullScreen:function(){return false},enterFullScreen:function(){return false}});(function(){var api=_V_.flash.prototype,readWrite=\"preload,currentTime,defaultPlaybackRate,playbackRate,autoplay,loop,mediaGroup,controller,controls,volume,muted,defaultMuted\".split(\",\"),readOnly=\"error,currentSrc,networkState,readyState,seeking,initialTime,duration,startOffsetTime,paused,played,seekable,ended,videoTracks,audioTracks,videoWidth,videoHeight,textTracks\".split(\",\"),callOnly=\"load,play,pause\".split(\",\");createSetter=function(attr){var attrUpper=attr.charAt(0).toUpperCase()+attr.slice(1);api[\"set\"+attrUpper]=function(val){return this.el.vjs_setProperty(attr,val)}},createGetter=function(attr){api[attr]=function(){return this.el.vjs_getProperty(attr)}};_V_.each(readWrite,function(attr){createGetter(attr);createSetter(attr)});_V_.each(readOnly,function(attr){createGetter(attr)})})();_V_.flash.isSupported=function(){return _V_.flash.version()[0]>=10};_V_.flash.canPlaySource=function(srcObj){if(srcObj.type in _V_.flash.prototype.support.formats){return\"maybe\"}};_V_.flash.prototype.support={formats:{\"video/flv\":\"FLV\",\"video/x-flv\":\"FLV\",\"video/mp4\":\"MP4\",\"video/m4v\":\"MP4\"},progressEvent:false,timeupdateEvent:false,fullscreenResize:false,parentResize:!(_V_.ua.match(\"Firefox\"))};_V_.flash.onReady=function(currSwf){var el=_V_.el(currSwf);var player=el.player||el.parentNode.player,tech=player.tech;el.player=player;tech.el=el;tech.addEvent(\"click\",tech.onClick);_V_.flash.checkReady(tech)};_V_.flash.checkReady=function(tech){if(tech.el.vjs_getProperty){tech.triggerReady()}else{setTimeout(function(){_V_.flash.checkReady(tech)},50)}};_V_.flash.onEvent=function(swfID,eventName){var player=_V_.el(swfID).player;player.triggerEvent(eventName)};_V_.flash.onError=function(swfID,err){var player=_V_.el(swfID).player;player.triggerEvent(\"error\");_V_.log(\"Flash Error\",err,swfID)};_V_.flash.version=function(){var version=\"0,0,0\";try{version=new ActiveXObject(\"ShockwaveFlash.ShockwaveFlash\").GetVariable(\"$version\").replace(/\\D+/g,\",\").match(/^,?(.+),?$/)[1]}catch(e){try{if(navigator.mimeTypes[\"application/x-shockwave-flash\"].enabledPlugin){version=(navigator.plugins[\"Shockwave Flash 2.0\"]||navigator.plugins[\"Shockwave Flash\"]).description.replace(/\\D+/g,\",\").match(/^,?(.+),?$/)[1]}}catch(e){}}return version.split(\",\")};_V_.flash.embed=function(swf,placeHolder,flashVars,params,attributes){var code=_V_.flash.getEmbedCode(swf,flashVars,params,attributes),obj=_V_.createElement(\"div\",{innerHTML:code}).childNodes[0],par=placeHolder.parentNode;placeHolder.parentNode.replaceChild(obj,placeHolder);if(_V_.isIE()){var newObj=par.childNodes[0];setTimeout(function(){newObj.style.display=\"block\"},1000)}return obj};_V_.flash.getEmbedCode=function(swf,flashVars,params,attributes){var objTag='<object type=\"application/x-shockwave-flash\"',flashVarsString=\"\",paramsString=\"\";attrsString=\"\";if(flashVars){_V_.eachProp(flashVars,function(key,val){flashVarsString+=(key+\"=\"+val+\"&amp;\")})}params=_V_.merge({movie:swf,flashvars:flashVarsString,allowScriptAccess:\"always\",allowNetworking:\"all\"},params);_V_.eachProp(params,function(key,val){paramsString+='<param name=\"'+key+'\" value=\"'+val+'\" />'});attributes=_V_.merge({data:swf,width:\"100%\",height:\"100%\"},attributes);_V_.eachProp(attributes,function(key,val){attrsString+=(key+'=\"'+val+'\" ')});return objTag+attrsString+\">\"+paramsString+\"</object>\"};_V_.merge(_V_.Player.prototype,{addTextTracks:function(trackObjects){var tracks=this.textTracks=(this.textTracks)?this.textTracks:[],i=0,j=trackObjects.length,track,Kind;for(;i<j;i++){Kind=_V_.uc(trackObjects[i].kind||\"subtitles\");track=new _V_[Kind+\"Track\"](this,trackObjects[i]);tracks.push(track);if(track[\"default\"]){this.ready(_V_.proxy(track,track.show))}}return this},showTextTrack:function(id,disableSameKind){var tracks=this.textTracks,i=0,j=tracks.length,track,showTrack,kind;for(;i<j;i++){track=tracks[i];if(track.id===id){track.show();showTrack=track}else{if(disableSameKind&&track.kind==disableSameKind&&track.mode>0){track.disable()}}}kind=(showTrack)?showTrack.kind:((disableSameKind)?disableSameKind:false);if(kind){this.triggerEvent(kind+\"trackchange\")}return this}});_V_.Track=_V_.Component.extend({init:function(player,options){this._super(player,options);_V_.merge(this,{id:options.id||(\"vjs_\"+options.kind+\"_\"+options.language+\"_\"+_V_.guid++),src:options.src,\"default\":options[\"default\"],title:options.title,language:options.srclang,label:options.label,cues:[],activeCues:[],readyState:0,mode:0})},createElement:function(){return this._super(\"div\",{className:\"vjs-\"+this.kind+\" vjs-text-track\"})},show:function(){this.activate();this.mode=2;this._super()},hide:function(){this.activate();this.mode=1;this._super()},disable:function(){if(this.mode==2){this.hide()}this.deactivate();this.mode=0},activate:function(){if(this.readyState==0){this.load()}if(this.mode==0){this.player.addEvent(\"timeupdate\",this.proxy(this.update,this.id));this.player.addEvent(\"ended\",this.proxy(this.reset,this.id));if(this.kind==\"captions\"||this.kind==\"subtitles\"){this.player.textTrackDisplay.addComponent(this)}}},deactivate:function(){this.player.removeEvent(\"timeupdate\",this.proxy(this.update,this.id));this.player.removeEvent(\"ended\",this.proxy(this.reset,this.id));this.reset();this.player.textTrackDisplay.removeComponent(this)},load:function(){if(this.readyState==0){this.readyState=1;_V_.get(this.src,this.proxy(this.parseCues),this.proxy(this.onError))}},onError:function(err){this.error=err;this.readyState=3;this.triggerEvent(\"error\")},parseCues:function(srcContent){var cue,time,text,lines=srcContent.split(\"\\n\"),line=\"\",id;for(var i=1,j=lines.length;i<j;i++){line=_V_.trim(lines[i]);if(line){if(line.indexOf(\"-->\")==-1){id=line;line=_V_.trim(lines[++i])}else{id=this.cues.length}cue={id:id,index:this.cues.length};time=line.split(\" --> \");cue.startTime=this.parseCueTime(time[0]);cue.endTime=this.parseCueTime(time[1]);text=[];while(lines[++i]&&(line=_V_.trim(lines[i]))){text.push(line)}cue.text=text.join(\"<br/>\");this.cues.push(cue)}}this.readyState=2;this.triggerEvent(\"loaded\")},parseCueTime:function(timeText){var parts=timeText.split(\":\"),time=0,hours,minutes,other,seconds,ms,flags;if(parts.length==3){hours=parts[0];minutes=parts[1];other=parts[2]}else{hours=0;minutes=parts[0];other=parts[1]}other=other.split(/\\s+/);seconds=other.splice(0,1)[0];seconds=seconds.split(/\\.|,/);ms=parseFloat(seconds[1]);seconds=seconds[0];time+=parseFloat(hours)*3600;time+=parseFloat(minutes)*60;time+=parseFloat(seconds);if(ms){time+=ms/1000}return time},update:function(){if(this.cues.length>0){var time=this.player.currentTime();if(this.prevChange===undefined||time<this.prevChange||this.nextChange<=time){var cues=this.cues,newNextChange=this.player.duration(),newPrevChange=0,reverse=false,newCues=[],firstActiveIndex,lastActiveIndex,html=\"\",cue,i,j;if(time>=this.nextChange||this.nextChange===undefined){i=(this.firstActiveIndex!==undefined)?this.firstActiveIndex:0}else{reverse=true;i=(this.lastActiveIndex!==undefined)?this.lastActiveIndex:cues.length-1}while(true){cue=cues[i];if(cue.endTime<=time){newPrevChange=Math.max(newPrevChange,cue.endTime);if(cue.active){cue.active=false}}else{if(time<cue.startTime){newNextChange=Math.min(newNextChange,cue.startTime);if(cue.active){cue.active=false}if(!reverse){break}}else{if(reverse){newCues.splice(0,0,cue);if(lastActiveIndex===undefined){lastActiveIndex=i}firstActiveIndex=i}else{newCues.push(cue);if(firstActiveIndex===undefined){firstActiveIndex=i}lastActiveIndex=i}newNextChange=Math.min(newNextChange,cue.endTime);newPrevChange=Math.max(newPrevChange,cue.startTime);cue.active=true}}if(reverse){if(i===0){break}else{i--}}else{if(i===cues.length-1){break}else{i++}}}this.activeCues=newCues;this.nextChange=newNextChange;this.prevChange=newPrevChange;this.firstActiveIndex=firstActiveIndex;this.lastActiveIndex=lastActiveIndex;this.updateDisplay();this.triggerEvent(\"cuechange\")}}},updateDisplay:function(){var cues=this.activeCues,html=\"\",i=0,j=cues.length;for(;i<j;i++){html+=\"<span class='vjs-tt-cue'>\"+cues[i].text+\"</span>\"}this.el.innerHTML=html},reset:function(){this.nextChange=0;this.prevChange=this.player.duration();this.firstActiveIndex=0;this.lastActiveIndex=0}});_V_.CaptionsTrack=_V_.Track.extend({kind:\"captions\"});_V_.SubtitlesTrack=_V_.Track.extend({kind:\"subtitles\"});_V_.ChaptersTrack=_V_.Track.extend({kind:\"chapters\"});_V_.TextTrackDisplay=_V_.Component.extend({createElement:function(){return this._super(\"div\",{className:\"vjs-text-track-display\"})}});_V_.TextTrackMenuItem=_V_.MenuItem.extend({init:function(player,options){var track=this.track=options.track;options.label=track.label;options.selected=track[\"default\"];this._super(player,options);this.player.addEvent(track.kind+\"trackchange\",_V_.proxy(this,this.update))},onClick:function(){this._super();this.player.showTextTrack(this.track.id,this.track.kind)},update:function(){if(this.track.mode==2){this.selected(true)}else{this.selected(false)}}});_V_.OffTextTrackMenuItem=_V_.TextTrackMenuItem.extend({init:function(player,options){options.track={kind:options.kind,player:player,label:\"Off\"};this._super(player,options)},onClick:function(){this._super();this.player.showTextTrack(this.track.id,this.track.kind)},update:function(){var tracks=this.player.textTracks,i=0,j=tracks.length,track,off=true;for(;i<j;i++){track=tracks[i];if(track.kind==this.track.kind&&track.mode==2){off=false}}if(off){this.selected(true)}else{this.selected(false)}}});_V_.TextTrackButton=_V_.Button.extend({init:function(player,options){this._super(player,options);this.menu=this.createMenu();if(this.items.length===0){this.hide()}},createMenu:function(){var menu=new _V_.Menu(this.player);menu.el.appendChild(_V_.createElement(\"li\",{className:\"vjs-menu-title\",innerHTML:_V_.uc(this.kind)}));menu.addItem(new _V_.OffTextTrackMenuItem(this.player,{kind:this.kind}));this.items=this.createItems();this.each(this.items,function(item){menu.addItem(item)});this.addComponent(menu);return menu},createItems:function(){var items=[];this.each(this.player.textTracks,function(track){if(track.kind===this.kind){items.push(new _V_.TextTrackMenuItem(this.player,{track:track}))}});return items},buildCSSClass:function(){return this.className+\" vjs-menu-button \"+this._super()},onFocus:function(){this.menu.lockShowing();_V_.one(this.menu.el.childNodes[this.menu.el.childNodes.length-1],\"blur\",this.proxy(function(){this.menu.unlockShowing()}))},onBlur:function(){},onClick:function(){this.one(\"mouseout\",this.proxy(function(){this.menu.unlockShowing();this.el.blur()}))}});_V_.CaptionsButton=_V_.TextTrackButton.extend({kind:\"captions\",buttonText:\"Captions\",className:\"vjs-captions-button\"});_V_.SubtitlesButton=_V_.TextTrackButton.extend({kind:\"subtitles\",buttonText:\"Subtitles\",className:\"vjs-subtitles-button\"});_V_.ChaptersButton=_V_.TextTrackButton.extend({kind:\"chapters\",buttonText:\"Chapters\",className:\"vjs-chapters-button\",createItems:function(chaptersTrack){var items=[];this.each(this.player.textTracks,function(track){if(track.kind===this.kind){items.push(new _V_.TextTrackMenuItem(this.player,{track:track}))}});return items},createMenu:function(){var tracks=this.player.textTracks,i=0,j=tracks.length,track,chaptersTrack,items=this.items=[];for(;i<j;i++){track=tracks[i];if(track.kind==this.kind&&track[\"default\"]){if(track.readyState<2){this.chaptersTrack=track;track.addEvent(\"loaded\",this.proxy(this.createMenu));return}else{chaptersTrack=track;break}}}var menu=this.menu=new _V_.Menu(this.player);menu.el.appendChild(_V_.createElement(\"li\",{className:\"vjs-menu-title\",innerHTML:_V_.uc(this.kind)}));if(chaptersTrack){var cues=chaptersTrack.cues,i=0,j=cues.length,cue,mi;for(;i<j;i++){cue=cues[i];mi=new _V_.ChaptersTrackMenuItem(this.player,{track:chaptersTrack,cue:cue});items.push(mi);menu.addComponent(mi)}}this.addComponent(menu);if(this.items.length>0){this.show()}return menu}});_V_.ChaptersTrackMenuItem=_V_.MenuItem.extend({init:function(player,options){var track=this.track=options.track,cue=this.cue=options.cue,currentTime=player.currentTime();options.label=cue.text;options.selected=(cue.startTime<=currentTime&&currentTime<cue.endTime);this._super(player,options);track.addEvent(\"cuechange\",_V_.proxy(this,this.update))},onClick:function(){this._super();this.player.currentTime(this.cue.startTime);this.update(this.cue.startTime)},update:function(time){var cue=this.cue,currentTime=this.player.currentTime();if(cue.startTime<=currentTime&&currentTime<cue.endTime){this.selected(true)}else{this.selected(false)}}});_V_.merge(_V_.ControlBar.prototype.options.components,{subtitlesButton:{},captionsButton:{},chaptersButton:{}});_V_.autoSetup=function(){var options,vid,player,vids=document.getElementsByTagName(\"video\");if(vids&&vids.length>0){for(var i=0,j=vids.length;i<j;i++){vid=vids[i];if(vid&&vid.getAttribute){if(vid.player===undefined){options=vid.getAttribute(\"data-setup\");if(options!==null){options=JSON.parse(options||\"{}\");player=_V_(vid,options)}}}else{_V_.autoSetupTimeout(1);break}}}else{if(!_V_.windowLoaded){_V_.autoSetupTimeout(1)}}};_V_.autoSetupTimeout=function(wait){setTimeout(_V_.autoSetup,wait)};_V_.addEvent(window,\"load\",function(){_V_.windowLoaded=true});_V_.autoSetup();window.VideoJS=window._V_=VideoJS})(window);\nvar l10n_str=l10n_str?l10n_str:{};(typeof Tumblr!==\"undefined\")||(Tumblr={});Tumblr.Editor={};(function(b){var e=function(v,s){s=s||{};var u=s.focus||false;var i=s.type||false;var y=s.layout||\"bold,italic,strikethrough,separator,bullist,numlist,separator,blockquote,separator,image,link,unlink,separator,pagebreak,separator,code\";var h=s.custom_css||\"http://assets.tumblr.com/stylesheets/compressed/custom_tinymce.css\";var z=s.theme||\"advanced\";var x=s.skin||\"default\";var g=s.immediate||false;var w=s.plugins||\"safari,pagebreak\";var A=s.resize||false;var B=s.min_height||100;var p=s.min_width||500;var m=s.max_width||500;var k=s.placeholder||false;if((!i||i===\"rich\"||i===\"tinymce\")&&tinyMCE){var o=function(){if(window.location.host==\"www.tumblr.com\"){document.domain=\"tumblr.com\"}tinyMCE.init({setup:C,mode:\"exact\",language:language_for_tinymce?language_for_tinymce:\"en\",elements:v,convert_newlines_to_brs:false,theme:z,skin:x,remove_trailing_nbsp:true,theme_advanced_layout_manager:\"SimpleLayout\",theme_advanced_buttons2:\"\",theme_advanced_buttons3:\"\",theme_advanced_toolbar_location:\"top\",theme_advanced_resizing:A,theme_advanced_resizing_min_width:p,theme_advanced_resizing_max_width:m,theme_advanced_resizing_use_cookie:false,theme_advanced_path:false,content_css:h,plugins:w,autoresize_min_height:B,autoresize_max_height:750,object_resizing:false,pagebreak_separator:\"[[MORE]]\",convert_urls:false,process_html:true,cleanup_on_startup:true,inline_styles:false,gecko_spellcheck:true,valid_elements:\"-a[class|href|id|name|rel|title|target],-big[class|id|title],-blockquote[class|id|title],br,-code[class|id|title],div[align<center?justify?left?right|class|id|title],-em/i[class|id|title],-h1[align<center?justify?left?right|class|id|title],-h2[align<center?justify?left?right|class|id|title],-h3[align<center?justify?left?right|class|id|title],-h4[align<center?justify?left?right|class|id|title],-h5[align<center?justify?left?right|class|id|title],-h6[align<center?justify?left?right|class|id|title],hr[size|noshade],iframe[align<bottom?left?middle?right?top|class|frameborder|height|id|marginheight|marginwidth|name|scrolling<auto?no?yes|src|title|width],img[align<bottom?left?middle?right?top|alt|border|class|height|id|name|src|title|width],-ins[class|id|title],-li[class|id|title|type],object[align<bottom?left?middle?right?top|archive|border|class|classid|codebase|codetype|data|declare|height|hspace|id|name|title|type|width],-ol[class|id|start|title|type],p[align<center?justify?left?right|class|id|title],param[id|name|type|value|valuetype<DATA?OBJECT?REF],-pre/listing/plaintext/xmp[align|class|id|title|width],script[charset|defer|language|src|type],-small[class|id|onclick|ondblclick|title],span[align<center?justify?left?right|class|id|title],-strike/del/s[class|id|title],-strong/b[class|id|title],-sub[class|id|title],-sup[class|id|title],-u[class|id|title],-ul[class|id|title|type]\",theme_advanced_buttons1:(y),formats:{strikethrough:{inline:\"strike\"}},width:\"100%\",paste_preprocess:function(D,E){if(E.content.indexOf(\"data:image\")!==-1){E.content=\"\"}}});function C(F){var E=false;var D;F.onRemove.add(function(G){if(D){D.off(\"click.image_upload\")}});F.onInit.add(function(G){G.addShortcut(\"ctrl+k\",\"Insert link\",\"mceLink\");if(u){if(u===\"focus_end\"){setTimeout(function(){G.focus();G.selection.select(G.getBody(),true);G.selection.collapse(false);G.execCommand(\"mceFocus\",false,\"\")},200)}else{setTimeout(function(){G.focus()},200)}}if(k){var I=G.getContent();if(I===\"\"){G.setContent(k);G.selection.select(G.dom.select(\"p\")[0]);G.selection.collapse(false);E=true}}if(G.plugins.image_upload){var H=jQuery(\"a.mce_image_upload\").parent(\"td\");var J=jQuery(\"a.mce_image\").parent(\"td\").hide();D=jQuery(\"a.mce_image\").on(\"click.image_upload\",function(K){K.preventDefault();K.stopPropagation();return false});G.onKeyDown.add(function(K,L){if(L.altKey){H.hide();J.show()}});G.onKeyUp.add(function(K,L){if(!jQuery(\"body\").hasClass(\"popover_open\")){H.show();J.hide()}})}if(G.plugins.autoresize){G.onChange.add(function(L,K){var M=L.settings.resize_events_blackout;L.settings.resize_events_blackout=true;if(!M){L.execCommand(\"mceAutoResize\")}clearTimeout(L.settings.resize_events_blackout_timeout);L.settings.resize_events_blackout_timeout=setTimeout(function(){L.settings.resize_events_blackout=false},100)});tinymce.dom.Event.add(G.getWin(),\"resize\",function(){if(!G.settings.resize_events_blackout&&this.innerHeight){G.plugins.autoresize.autoresize_min_height=this.innerHeight;d(\"tinymce.resize\",document)}else{d(\"tinymce.autoresize\",document)}})}tinymce.dom.Event.add(G.getBody(),\"focus\",function(K){G.execCommand(\"mceAutoResize\");d(\"tinymce.focus\",document);return false});tinymce.dom.Event.add(G.getBody(),\"dragenter\",function(K){return tinymce.dom.Event.cancel(K)});tinymce.dom.Event.add(G.getBody().parentNode,\"drop\",function(K){tinymce.dom.Event.cancel(K);tinymce.dom.Event.stop(K)});d(\"tinymce.init\",document,G)});F.onMouseDown.add(function(G,H){if(!E){return}G.setContent(\"\")});F.onSetContent.add(function(G,H){G.save()});F.onPaste.add(function(G,H){setTimeout(function(){G.save();G.execCommand(\"mceAutoResize\")},100)});F.onKeyDown.add(function(G,H){if(H.keyCode===27){d(\"tinymce.keydown_esc\",document);return false}})}};if(g){o()}else{if(window.addEventListener){window.addEventListener(\"load\",o,false)}else{if(window.attachEvent){window.attachEvent(\"onload\",o)}}}if(document.getElementById(v+\"_is_rich_text\")){document.getElementById(v+\"_is_rich_text\").value=1}}else{if(document.getElementById(v+\"_manual_toolbar\")){var r=document.getElementById(v+\"_manual_toolbar\");r.parentNode.removeChild(r)}var q=document.createElement(\"div\");q.id=v+\"_manual_toolbar\";q.className=\"manual_toolbar\";var l=window.__||function(C){return C};var n='<div class=\"editor_controls\">';n+='<div class=\"editor_note\">'+(i==\"markdown\"?'<a href=\"http://daringfireball.net/projects/markdown/syntax\" tabindex=\"-1\" target=\"_blank\">'+(l10n_str.markdown||l(\"markdown\"))+\"</a>\":(l10n_str.html_enabled||l(\"HTML enabled\")))+\"</div>\";n+='<div class=\"editor_buttons\">';n+='<span class=\"editor_button bold\" onclick=\"'+(i==\"markdown\"?\"Tumblr.Editor.insertTag('\"+v+\"', '**', '**');\":\"Tumblr.Editor.insertTag('\"+v+\"', '<b>', '</b>');\")+' return false;\"></span>';n+='<span class=\"editor_button italic\" onclick=\"'+(i==\"markdown\"?\"Tumblr.Editor.insertTag('\"+v+\"', '_', '_');\":\"Tumblr.Editor.insertTag('\"+v+\"', '<i>', '</i>');\")+' return false;\"></span>';n+=((i==\"markdown\")?\"\":'<span class=\"editor_button strikethrough\" onclick=\"Tumblr.Editor.insertTag(\\''+v+\"', '<strike>', '</strike>'); return false;\\\"></span>\");n+='<span class=\"editor_button link\" onclick=\"'+(i==\"markdown\"?\"Tumblr.Editor.insertTag('\"+v+\"', '[', '](' + prompt((l10n_str.enter_the_url || __('Enter the URL:')), 'http://') + ')');\":\"Tumblr.Editor.insertTag('\"+v+\"', '<a href=&quot;' + prompt((l10n_str.enter_the_url || __('Enter the URL:')), 'http://') + '&quot;>', '</a>');\")+' return false;\"></span>';n+='<span class=\"editor_button photo\"></span>';n+=\"</div>\";n+=\"</div>\";q.innerHTML=n;document.getElementById(v).parentNode.insertBefore(q,document.getElementById(v));document.getElementById(v).style.height=(parseInt(document.getElementById(v).style.height,10)-30)+\"px\";var f=document.getElementById(v);var j=f.value.lastIndexOf(\"</p>\");j=j==-1?f.value.length:j;if(typeof f.selectionStart==\"number\"){f.selectionStart=f.selectionEnd=j}else{if(typeof f.createTextRange!=\"undefined\"){f.focus();var t=f.createTextRange();t.collapse(false);t.select()}}f.scrollTop=99999}};function d(g,i,h){if(document.createEvent){var f=document.createEvent(\"Events\");f.initEvent(g,true,true);f.data=h;i.dispatchEvent(f)}else{if(document.createEventObject){document.documentElement[g]++}else{}}}function c(i,m,f){var k=document.getElementById(i);if(!f){f=\"\"}if(document.selection){k.focus();sel=document.selection.createRange();sel.text=m+sel.text+f;k.focus()}else{if(k.selectionStart||k.selectionStart==\"0\"){var h=k.selectionStart;var g=k.selectionEnd;var l=g;var j=k.scrollTop;k.value=k.value.substring(0,h)+m+k.value.substring(h,g)+f+k.value.substring(g,k.value.length);l+=m.length+f.length;k.focus();k.selectionStart=l;k.selectionEnd=l;k.scrollTop=j}else{k.value+=m;k.value+=f;k.focus()}}d(\"input\",k)}Backbone&&Backbone.Events&&(function a(f,g){_.each([\"tinymce.autoresize\",\"tinymce.blur\",\"tinymce.change\",\"tinymce.focus\",\"tinymce.keydown_esc\",\"tinymce.keyup\",\"tinymce.image_upload.click\",\"tinymce.init\",\"tinymce.resize\"],function(h){f.addEventListener(h,function(i){g.trigger(h,i)},false)})})(document,_.extend(b,Backbone.Events));b.render=e;b.insertTag=c})(Tumblr.Editor);\n(typeof Tumblr!==\"undefined\")||(Tumblr={});Tumblr.$={capitalize:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},camelize:function(a){return a.replace(/-+(.)?/g,function(b,c){return c?c.toUpperCase():\"\"})},truncate:function(c,b,a){b=b||100;a=a||\"\";return(c.length>b)?c.slice(0,b-a.length)+a:c},format_file_size:function(a){if(typeof a!==\"number\"){return\"\"}if(a>=1000000000){return(a/1000000000).toFixed(2)+\" GB\"}if(a>=1000000){return(a/1000000).toFixed(2)+\" MB\"}return(a/1000).toFixed(2)+\" KB\"},strip_scripts:function(a){return a.replace(new RegExp(\"<script[^>]*>([\\\\S\\\\s]*?)<\\/script\\\\s*>\",\"img\"),\"\")},strip_tags:function(a){return a.replace(/<\\w+(\\s+(\"[^\"]*\"|'[^']*'|[^>])+)?>|<\\/\\w+>/gi,\"\")},is_url:function(a){return !!(a.match(/(http|https):\\/\\//i)||a.match(/www\\./i)||a.match(/[a-zA-Z0-9]+(\\.arpa|\\.root|\\.aero|\\.biz|\\.cat|\\.com|\\.coop|\\.edu|\\.gov|\\.info|\\.int|\\.jobs|\\.mil|\\.mobi|\\.museum|\\.name|\\.net|\\.org|\\.pro|\\.travel|TLD|\\.ac|\\.ad|\\.ae|\\.af|\\.ag|\\.ai|\\.al|\\.am|\\.an|\\.ao|\\.aq|\\.ar|\\.as|\\.at|\\.au|\\.aw|\\.ax|\\.az|\\.ba|\\.bb|\\.bd|\\.be|\\.bf|\\.bg|\\.bh|\\.bi|\\.bj|\\.bm|\\.bn|\\.bo|\\.br|\\.bs|\\.bt|\\.bv|\\.bw|\\.by|\\.bz|\\.ca|\\.cc|\\.cd|\\.cf|\\.cg|\\.ch|\\.ci|\\.ck|\\.cl|\\.cm|\\.cn|\\.co|\\.cr|\\.cu|\\.cv|\\.cx|\\.cy|\\.cz|\\.de|\\.dj|\\.dk|\\.dm|\\.do|\\.dz|\\.ec|\\.ee|\\.eg|\\.er|\\.es|\\.et|\\.eu|\\.fi|\\.fj|\\.fk|\\.fm|\\.fo|\\.fr|\\.ga|\\.gb|\\.gd|\\.ge|\\.gf|\\.gg|\\.gh|\\.gi|\\.gl|\\.gm|\\.gn|\\.gp|\\.gq|\\.gr|\\.gs|\\.gt|\\.gu|\\.gw|\\.gy|\\.hk|\\.hm|\\.hn|\\.hr|\\.ht|\\.hu|\\.id|\\.ie|\\.il|\\.im|\\.in|\\.io|\\.iq|\\.ir|\\.is|\\.it|\\.je|\\.jm|\\.jo|\\.jp|\\.ke|\\.kg|\\.kh|\\.ki|\\.km|\\.kn|\\.kr|\\.kw|\\.ky|\\.kz|\\.la|\\.lb|\\.lc|\\.li|\\.lk|\\.lr|\\.ls|\\.lt|\\.lu|\\.lv|\\.ly|\\.ma|\\.mc|\\.md|\\.mg|\\.mh|\\.mk|\\.ml|\\.mm|\\.mn|\\.mo|\\.mp|\\.mq|\\.mr|\\.ms|\\.mt|\\.mu|\\.mv|\\.mw|\\.mx|\\.my|\\.mz|\\.na|\\.nc|\\.ne|\\.nf|\\.ng|\\.ni|\\.nl|\\.no|\\.np|\\.nr|\\.nu|\\.nz|\\.om|\\.pa|\\.pe|\\.pf|\\.pg|\\.ph|\\.pk|\\.pl|\\.pm|\\.pn|\\.pr|\\.ps|\\.pt|\\.pw|\\.py|\\.qa|\\.re|\\.ro|\\.ru|\\.rw|\\.sa|\\.sb|\\.sc|\\.sd|\\.se|\\.sg|\\.sh|\\.si|\\.sj|\\.sk|\\.sl|\\.sm|\\.sn|\\.so|\\.sr|\\.st|\\.su|\\.sv|\\.sy|\\.sz|\\.tc|\\.td|\\.tf|\\.tg|\\.th|\\.tj|\\.tk|\\.tl|\\.tm|\\.tn|\\.to|\\.tp|\\.tr|\\.tt|\\.tv|\\.tw|\\.tz|\\.ua|\\.ug|\\.uk|\\.um|\\.us|\\.uy|\\.uz|\\.va|\\.vc|\\.ve|\\.vg|\\.vi|\\.vn|\\.vu|\\.wf|\\.ws|\\.ye|\\.yt|\\.yu|\\.za|\\.zm|\\.zw)/i))},hasLocalStorage:function(){try{return\"localStorage\" in window&&window.localStorage!==null}catch(a){return false}},transEndEvent:function(){var a;var b=document.createElement(\"fakeelement\");var c={transition:\"transitionEnd\",OTransition:\"oTransitionEnd\",MSTransition:\"msTransitionEnd\",MozTransition:\"transitionend\",WebkitTransition:\"webkitTransitionEnd\"};for(a in c){if(b.style[a]!==undefined){return c[a]}}return false},isEventSupported:function(a,d){var b={select:\"input\",change:\"input\",submit:\"form\",reset:\"form\",error:\"img\",load:\"img\",abort:\"img\"};d=d||document.createElement(b[a]||\"div\");a=\"on\"+a;var c=(a in d);if(!c){if(!d.setAttribute){d=document.createElement(\"div\")}if(d.setAttribute&&d.removeAttribute){d.setAttribute(a,\"\");c=typeof d[a]==\"function\";if(typeof d[a]!=\"undefined\"){d[a]=undef}d.removeAttribute(a)}}d=null;return c},hexdec:function(e,c,b){var f=parseInt(e,16);if(!c){return f}if(!b){b=1}var d=\"\";while(d.length<2*(b-1)){d+=\"00\"}var a=parseInt(\"80\"+d,16);if(f&a){return f-parseInt(\"100\"+d,16)}else{return f}},sum:function(a){return _.reduce(a,function(b,c){return b+c},0)}};\n(typeof Tumblr!==\"undefined\")||(Tumblr={});Tumblr.Fx=function(b,d,c){if(!(this instanceof Tumblr.Fx)){return new Tumblr.Fx(b,d,c)}var a=this;this.el=b;this.prop=d;this.from=c.from;this.to=c.to;this.duration=c.duration;this.callback=c.callback;this.animDiff=this.to-this.from;this.prefix=Tumblr.Fx.prefix();this.cssTransition=c.cssTransition&&this.prefix;this.cssEasing=c.cssEasing||\"linear\";if(this.cssTransition){this.transitionEndEvent=Tumblr.Fx.whichTransitionEvent();this.events={__end:this.__cssTransitionEnd.bind(this)}}this.easing=Tumblr.Fx.easing[c.easing]||function(f,g,e,i,h){return e+i*f};if(!c.delay){this.start()}else{if(typeof c.delay===\"number\"){setTimeout(function(){a.start()},c.delay)}else{}}};Tumblr.Fx.prototype={_isColor:function(b){var a=/(#[a-f|A-F|0-9]|rgb)/;return typeof b===\"string\"&&a.test(b)},_setStyle:function(b){var a;if(this.cssTransition){this.el.style.cssText=this.prefix+\"transition: \"+this.prop+\" \"+this.duration+\"ms \"+this.cssEasing}a=(this.prop===\"opacity\")?\"\":\"px\";this.el.style[Tumblr.$.camelize(this.prop)]=b+a},_tween:function(){this.now=new Date();this.elapsed=this.now-this.startTime;if(this.elapsed>=this.duration){this._animationEnd(true)}else{this.percentage=(this.elapsed/this.duration);this.val=this.easing(this.percentage,this.elapsed,this.from,this.animDiff,this.duration);this._setStyle(this.val)}},_animationEnd:function(a){this.ended=true;clearInterval(this.timer);if(a&&!this.cssTransition){this._setStyle(this.to)}if(this.callback&&typeof this.callback===\"function\"){this.callback.call(this)}},__cssTransitionEnd:function(a){if(a.propertyName===this.prop){this.el.removeEventListener(this.transitionEndEvent,this.events.__end,false);this._animationEnd(true)}},start:function(){var a=this;this.startTime=new Date();if(this.cssTransition){this._setStyle(this.to);this.el.addEventListener(this.transitionEndEvent,this.events.__end,false)}else{this.timer=setInterval(function(){a._tween.call(a)},3)}},stop:function(a){this._animationEnd(a)}};Tumblr.Fx.propSupport=(function(){return function(d){var c=document.createElement(\"fakeelement\");var b=[\"Webkit\",\"Moz\",\"O\",\"MS\",\"Khtml\"];var a=b.length;if(d in c.style){return true}d=d.replace(/^[a-z]/,function(e){return e.toUpperCase()});while(a--){if(b[a]+d in c.style){return true}}return false}})();Tumblr.Fx.prefix=(function(){var a;return function(){if(a===undefined){var e=document.createElement(\"fakeelement\");var d=[\"Webkit\",\"Moz\",\"O\",\"MS\",\"Khtml\"];var b=d.length;var c;while(b--){c=d[b];e.style.cssText=\"-\"+c.toLowerCase()+\"-transition:opacity;\";if(typeof e.style[c+\"Transition\"]!=\"undefined\"){a=\"-\"+c.toLowerCase()+\"-\";return a}}a=false;return a}return a}})();Tumblr.Fx.whichTransitionEvent=(function(){var a;return function(){if(a===undefined){var b;var c=document.createElement(\"fakeelement\");var d={transition:\"transitionend\",OTransition:\"oTransitionEnd\",MSTransition:\"msTransitionEnd\",MozTransition:\"transitionend\",WebkitTransition:\"webkitTransitionEnd\"};for(b in d){if(c.style[b]!==undefined){a=d[b];return a}}a=false;return a}return a}})();Tumblr.Fx.easing={linear:function(e,f,a,h,g){return a+h*e},easeInQuad:function(e,f,a,h,g){return h*(f/=g)*f+a},easeOutQuad:function(e,f,a,h,g){return -h*(f/=g)*(f-2)+a},easeInOutQuad:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f+a}return -h/2*((--f)*(f-2)-1)+a},easeInCubic:function(e,f,a,h,g){return h*(f/=g)*f*f+a},easeOutCubic:function(e,f,a,h,g){return h*((f=f/g-1)*f*f+1)+a},easeInOutCubic:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f*f+a}return h/2*((f-=2)*f*f+2)+a},easeInQuart:function(e,f,a,h,g){return h*(f/=g)*f*f*f+a},easeOutQuart:function(e,f,a,h,g){return -h*((f=f/g-1)*f*f*f-1)+a},easeInOutQuart:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f*f*f+a}return -h/2*((f-=2)*f*f*f-2)+a},easeInQuint:function(e,f,a,h,g){return h*(f/=g)*f*f*f*f+a},easeOutQuint:function(e,f,a,h,g){return h*((f=f/g-1)*f*f*f*f+1)+a},easeInOutQuint:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f*f*f*f+a}return h/2*((f-=2)*f*f*f*f+2)+a},easeInSine:function(e,f,a,h,g){return -h*Math.cos(f/g*(Math.PI/2))+h+a},easeOutSine:function(e,f,a,h,g){return h*Math.sin(f/g*(Math.PI/2))+a},easeInOutSine:function(e,f,a,h,g){return -h/2*(Math.cos(Math.PI*f/g)-1)+a},easeInExpo:function(e,f,a,h,g){return(f===0)?a:h*Math.pow(2,10*(f/g-1))+a},easeOutExpo:function(e,f,a,h,g){return(f==g)?a+h:h*(-Math.pow(2,-10*f/g)+1)+a},easeInOutExpo:function(e,f,a,h,g){if(f===0){return a}if(f===g){return a+h}if((f/=g/2)<1){return h/2*Math.pow(2,10*(f-1))+a}return h/2*(-Math.pow(2,-10*--f)+2)+a},easeInCirc:function(e,f,a,h,g){return -h*(Math.sqrt(1-(f/=g)*f)-1)+a},easeOutCirc:function(e,f,a,h,g){return h*Math.sqrt(1-(f=f/g-1)*f)+a},easeInOutCirc:function(e,f,a,h,g){if((f/=g/2)<1){return -h/2*(Math.sqrt(1-f*f)-1)+a}return h/2*(Math.sqrt(1-(f-=2)*f)+1)+a},easeInElastic:function(f,h,e,l,k){var i=1.70158;var j=0;var g=l;if(h===0){return e}if((h/=k)==1){return e+l}if(!j){j=k*0.3}if(g<Math.abs(l)){g=l;i=j/4}else{i=j/(2*Math.PI)*Math.asin(l/g)}return -(g*Math.pow(2,10*(h-=1))*Math.sin((h*k-i)*(2*Math.PI)/j))+e},easeOutElastic:function(f,h,e,l,k){var i=1.70158;var j=0;var g=l;if(h===0){return e}if((h/=k)==1){return e+l}if(!j){j=k*0.3}if(g<Math.abs(l)){g=l;i=j/4}else{i=j/(2*Math.PI)*Math.asin(l/g)}return g*Math.pow(2,-10*h)*Math.sin((h*k-i)*(2*Math.PI)/j)+l+e},easeInOutElastic:function(f,h,e,l,k){var i=1.70158;var j=0;var g=l;if(h===0){return e}if((h/=k/2)==2){return e+l}if(!j){j=k*(0.3*1.5)}if(g<Math.abs(l)){g=l;i=j/4}else{i=j/(2*Math.PI)*Math.asin(l/g)}if(h<1){return -0.5*(g*Math.pow(2,10*(h-=1))*Math.sin((h*k-i)*(2*Math.PI)/j))+e}return g*Math.pow(2,-10*(h-=1))*Math.sin((h*k-i)*(2*Math.PI)/j)*0.5+l+e},easeInBack:function(e,f,a,i,h,g){if(g===undefined){g=1.70158}return i*(f/=h)*f*((g+1)*f-g)+a},easeOutBack:function(e,f,a,i,h,g){if(g===undefined){g=1.70158}return i*((f=f/h-1)*f*((g+1)*f+g)+1)+a},easeInOutBack:function(e,f,a,i,h,g){if(g===undefined){g=1.70158}if((f/=h/2)<1){return i/2*(f*f*(((g*=(1.525))+1)*f-g))+a}return i/2*((f-=2)*f*(((g*=(1.525))+1)*f+g)+2)+a},easeInBounce:function(e,f,a,h,g){return h-Tumblr.Fx.easing.easeOutBounce(e,g-f,0,h,g)+a},easeOutBounce:function(e,f,a,h,g){if((f/=g)<(1/2.75)){return h*(7.5625*f*f)+a}else{if(f<(2/2.75)){return h*(7.5625*(f-=(1.5/2.75))*f+0.75)+a}else{if(f<(2.5/2.75)){return h*(7.5625*(f-=(2.25/2.75))*f+0.9375)+a}else{return h*(7.5625*(f-=(2.625/2.75))*f+0.984375)+a}}}},easeInOutBounce:function(e,f,a,h,g){if(f<g/2){return Tumblr.Fx.easing.easeInBounce(e,f*2,0,h,g)*0.5+a}return Tumblr.Fx.easing.easeOutBounce(e,f*2-g,0,h,g)*0.5+h*0.5+a}};\nif(this.JpegMeta){throw Error(\"Library included multiple times\")}var JpegMeta={};JpegMeta.parseNum=function parseNum(a,f,g,d){var c;var b;var e=(a===\">\");if(g===undefined){g=0}if(d===undefined){d=f.length-g}for(e?c=g:c=g+d-1;e?c<g+d:c>=g;e?c++:c--){b<<=8;b+=f.charCodeAt(c)}return b};JpegMeta.parseSnum=function parseSnum(a,f,g,d){var c;var b;var h;var e=(a===\">\");if(g===undefined){g=0}if(d===undefined){d=f.length-g}for(e?c=g:c=g+d-1;e?c<g+d:c>=g;e?c++:c--){if(h===undefined){h=(f.charCodeAt(c)&128)===128}b<<=8;b+=h?~f.charCodeAt(c)&255:f.charCodeAt(c)}if(h){b+=1;b*=-1}return b};JpegMeta.Rational=function Rational(a,b){this.num=a;this.den=b||1;return this};JpegMeta.Rational.prototype.toString=function toString(){if(this.num===0){return\"\"+this.num}if(this.den===1){return\"\"+this.num}if(this.num===1){return this.num+\" / \"+this.den}return this.num/this.den};JpegMeta.Rational.prototype.asFloat=function asFloat(){return this.num/this.den};JpegMeta.MetaGroup=function MetaGroup(b,a){this.fieldName=b;this.description=a;this.metaProps={};return this};JpegMeta.MetaGroup.prototype._addProperty=function _addProperty(d,a,c){var b=new JpegMeta.MetaProp(d,a,c);this[b.fieldName]=b;this.metaProps[b.fieldName]=b};JpegMeta.MetaGroup.prototype.toString=function toString(){return\"[MetaGroup \"+this.description+\"]\"};JpegMeta.MetaProp=function MetaProp(c,a,b){this.fieldName=c;this.description=a;this.value=b;return this};JpegMeta.MetaProp.prototype.toString=function toString(){return\"\"+this.value};this.JpegMeta.JpegFile=function JpegFile(l,a){var j=this._SOS;this.metaGroups={};this._binary_data=l;this.filename=a;var k=0;var f=0;var c;var h;var b;var g;var d;var e;var i;if(this._binary_data.slice(0,2)!==this._SOI_MARKER){throw new Error(\"Doesn't look like a JPEG file. First two bytes are \"+this._binary_data.charCodeAt(0)+\",\"+this._binary_data.charCodeAt(1)+\".\")}k+=2;while(k<this._binary_data.length){c=this._binary_data.charCodeAt(k++);h=this._binary_data.charCodeAt(k++);f=k;if(c!=this._DELIM){break}if(h===j){break}d=JpegMeta.parseNum(\">\",this._binary_data,k,2);k+=d;while(k<this._binary_data.length){c=this._binary_data.charCodeAt(k++);if(c==this._DELIM){b=this._binary_data.charCodeAt(k++);if(b!==0){k-=2;break}}}g=k-f;if(this._markers[h]){e=this._markers[h][0];i=this._markers[h][1]}else{e=\"UNKN\";i=undefined}if(i){this[i](h,f+2)}}if(this.general===undefined){throw Error(\"Invalid JPEG file.\")}return this};this.JpegMeta.JpegFile.prototype.toString=function(){return\"[JpegFile \"+this.filename+\" \"+this.general.type+\" \"+this.general.pixelWidth+\"x\"+this.general.pixelHeight+\" Depth: \"+this.general.depth+\"]\"};this.JpegMeta.JpegFile.prototype._SOI_MARKER=\"\\xff\\xd8\";this.JpegMeta.JpegFile.prototype._DELIM=255;this.JpegMeta.JpegFile.prototype._EOI=217;this.JpegMeta.JpegFile.prototype._SOS=218;this.JpegMeta.JpegFile.prototype._sofHandler=function _sofHandler(b,a){if(this.general!==undefined){throw Error(\"Unexpected multiple-frame image\")}this._addMetaGroup(\"general\",\"General\");this.general._addProperty(\"depth\",\"Depth\",JpegMeta.parseNum(\">\",this._binary_data,a,1));this.general._addProperty(\"pixelHeight\",\"Pixel Height\",JpegMeta.parseNum(\">\",this._binary_data,a+1,2));this.general._addProperty(\"pixelWidth\",\"Pixel Width\",JpegMeta.parseNum(\">\",this._binary_data,a+3,2));this.general._addProperty(\"type\",\"Type\",this._markers[b][2])};this.JpegMeta.JpegFile.prototype._JFIF_IDENT=\"JFIF\\x00\";this.JpegMeta.JpegFile.prototype._JFXX_IDENT=\"JFXX\\x00\";this.JpegMeta.JpegFile.prototype._EXIF_IDENT=\"Exif\\x00\";this.JpegMeta.JpegFile.prototype._types={1:[\"BYTE\",1],2:[\"ASCII\",1],3:[\"SHORT\",2],4:[\"LONG\",4],5:[\"RATIONAL\",8],6:[\"SBYTE\",1],7:[\"UNDEFINED\",1],8:[\"SSHORT\",2],9:[\"SLONG\",4],10:[\"SRATIONAL\",8],11:[\"FLOAT\",4],12:[\"DOUBLE\",8]};this.JpegMeta.JpegFile.prototype._tifftags={256:[\"Image width\",\"ImageWidth\"],257:[\"Image height\",\"ImageLength\"],258:[\"Number of bits per component\",\"BitsPerSample\"],259:[\"Compression scheme\",\"Compression\",{1:\"uncompressed\",6:\"JPEG compression\"}],262:[\"Pixel composition\",\"PhotmetricInerpretation\",{2:\"RGB\",6:\"YCbCr\"}],274:[\"Orientation of image\",\"Orientation\",{1:\"Normal\",2:\"Reverse?\",3:\"Upside-down\",4:\"Upside-down Reverse\",5:\"90 degree CW\",6:\"90 degree CW reverse\",7:\"90 degree CCW\",8:\"90 degree CCW reverse\"}],277:[\"Number of components\",\"SamplesPerPixel\"],284:[\"Image data arrangement\",\"PlanarConfiguration\",{1:\"chunky format\",2:\"planar format\"}],530:[\"Subsampling ratio of Y to C\",\"YCbCrSubSampling\"],531:[\"Y and C positioning\",\"YCbCrPositioning\",{1:\"centered\",2:\"co-sited\"}],282:[\"X Resolution\",\"XResolution\"],283:[\"Y Resolution\",\"YResolution\"],296:[\"Resolution Unit\",\"ResolutionUnit\",{2:\"inches\",3:\"centimeters\"}],273:[\"Image data location\",\"StripOffsets\"],278:[\"Number of rows per strip\",\"RowsPerStrip\"],279:[\"Bytes per compressed strip\",\"StripByteCounts\"],513:[\"Offset to JPEG SOI\",\"JPEGInterchangeFormat\"],514:[\"Bytes of JPEG Data\",\"JPEGInterchangeFormatLength\"],301:[\"Transfer function\",\"TransferFunction\"],318:[\"White point chromaticity\",\"WhitePoint\"],319:[\"Chromaticities of primaries\",\"PrimaryChromaticities\"],529:[\"Color space transformation matrix coefficients\",\"YCbCrCoefficients\"],532:[\"Pair of black and white reference values\",\"ReferenceBlackWhite\"],306:[\"Date and time\",\"DateTime\"],270:[\"Image title\",\"ImageDescription\"],271:[\"Make\",\"Make\"],272:[\"Model\",\"Model\"],305:[\"Software\",\"Software\"],315:[\"Person who created the image\",\"Artist\"],316:[\"Host Computer\",\"HostComputer\"],33432:[\"Copyright holder\",\"Copyright\"],34665:[\"Exif tag\",\"ExifIfdPointer\"],34853:[\"GPS tag\",\"GPSInfoIfdPointer\"]};this.JpegMeta.JpegFile.prototype._exiftags={36864:[\"Exif Version\",\"ExifVersion\"],40960:[\"FlashPix Version\",\"FlashpixVersion\"],40961:[\"Color Space\",\"ColorSpace\"],37121:[\"Meaning of each component\",\"ComponentsConfiguration\"],37122:[\"Compressed Bits Per Pixel\",\"CompressedBitsPerPixel\"],40962:[\"Pixel X Dimension\",\"PixelXDimension\"],40963:[\"Pixel Y Dimension\",\"PixelYDimension\"],37500:[\"Manufacturer notes\",\"MakerNote\"],37510:[\"User comments\",\"UserComment\"],40964:[\"Related audio file\",\"RelatedSoundFile\"],36867:[\"Date Time Original\",\"DateTimeOriginal\"],36868:[\"Date Time Digitized\",\"DateTimeDigitized\"],37520:[\"DateTime subseconds\",\"SubSecTime\"],37521:[\"DateTimeOriginal subseconds\",\"SubSecTimeOriginal\"],37522:[\"DateTimeDigitized subseconds\",\"SubSecTimeDigitized\"],33434:[\"Exposure time\",\"ExposureTime\"],33437:[\"FNumber\",\"FNumber\"],34850:[\"Exposure program\",\"ExposureProgram\"],34852:[\"Spectral sensitivity\",\"SpectralSensitivity\"],34855:[\"ISO Speed Ratings\",\"ISOSpeedRatings\"],34856:[\"Optoelectric coefficient\",\"OECF\"],37377:[\"Shutter Speed\",\"ShutterSpeedValue\"],37378:[\"Aperture Value\",\"ApertureValue\"],37379:[\"Brightness\",\"BrightnessValue\"],37380:[\"Exposure Bias Value\",\"ExposureBiasValue\"],37381:[\"Max Aperture Value\",\"MaxApertureValue\"],37382:[\"Subject Distance\",\"SubjectDistance\"],37383:[\"Metering Mode\",\"MeteringMode\"],37384:[\"Light Source\",\"LightSource\"],37385:[\"Flash\",\"Flash\"],37386:[\"Focal Length\",\"FocalLength\"],37396:[\"Subject Area\",\"SubjectArea\"],41483:[\"Flash Energy\",\"FlashEnergy\"],41484:[\"Spatial Frequency Response\",\"SpatialFrequencyResponse\"],41486:[\"Focal Plane X Resolution\",\"FocalPlaneXResolution\"],41487:[\"Focal Plane Y Resolution\",\"FocalPlaneYResolution\"],41488:[\"Focal Plane Resolution Unit\",\"FocalPlaneResolutionUnit\"],41492:[\"Subject Location\",\"SubjectLocation\"],41493:[\"Exposure Index\",\"ExposureIndex\"],41495:[\"Sensing Method\",\"SensingMethod\"],41728:[\"File Source\",\"FileSource\"],41729:[\"Scene Type\",\"SceneType\"],41730:[\"CFA Pattern\",\"CFAPattern\"],41985:[\"Custom Rendered\",\"CustomRendered\"],41986:[\"Exposure Mode\",\"Exposure Mode\"],41987:[\"White Balance\",\"WhiteBalance\"],41988:[\"Digital Zoom Ratio\",\"DigitalZoomRatio\"],41990:[\"Scene Capture Type\",\"SceneCaptureType\"],41991:[\"Gain Control\",\"GainControl\"],41992:[\"Contrast\",\"Contrast\"],41993:[\"Saturation\",\"Saturation\"],41994:[\"Sharpness\",\"Sharpness\"],41995:[\"Device settings description\",\"DeviceSettingDescription\"],41996:[\"Subject distance range\",\"SubjectDistanceRange\"],42016:[\"Unique image ID\",\"ImageUniqueID\"],40965:[\"Interoperability tag\",\"InteroperabilityIFDPointer\"]};this.JpegMeta.JpegFile.prototype._gpstags={0:[\"GPS tag version\",\"GPSVersionID\"],1:[\"North or South Latitude\",\"GPSLatitudeRef\"],2:[\"Latitude\",\"GPSLatitude\"],3:[\"East or West Longitude\",\"GPSLongitudeRef\"],4:[\"Longitude\",\"GPSLongitude\"],5:[\"Altitude reference\",\"GPSAltitudeRef\"],6:[\"Altitude\",\"GPSAltitude\"],7:[\"GPS time (atomic clock)\",\"GPSTimeStamp\"],8:[\"GPS satellites usedd for measurement\",\"GPSSatellites\"],9:[\"GPS receiver status\",\"GPSStatus\"],10:[\"GPS mesaurement mode\",\"GPSMeasureMode\"],11:[\"Measurement precision\",\"GPSDOP\"],12:[\"Speed unit\",\"GPSSpeedRef\"],13:[\"Speed of GPS receiver\",\"GPSSpeed\"],14:[\"Reference for direction of movement\",\"GPSTrackRef\"],15:[\"Direction of movement\",\"GPSTrack\"],16:[\"Reference for direction of image\",\"GPSImgDirectionRef\"],17:[\"Direction of image\",\"GPSImgDirection\"],18:[\"Geodetic survey data used\",\"GPSMapDatum\"],19:[\"Reference for latitude of destination\",\"GPSDestLatitudeRef\"],20:[\"Latitude of destination\",\"GPSDestLatitude\"],21:[\"Reference for longitude of destination\",\"GPSDestLongitudeRef\"],22:[\"Longitude of destination\",\"GPSDestLongitude\"],23:[\"Reference for bearing of destination\",\"GPSDestBearingRef\"],24:[\"Bearing of destination\",\"GPSDestBearing\"],25:[\"Reference for distance to destination\",\"GPSDestDistanceRef\"],26:[\"Distance to destination\",\"GPSDestDistance\"],27:[\"Name of GPS processing method\",\"GPSProcessingMethod\"],28:[\"Name of GPS area\",\"GPSAreaInformation\"],29:[\"GPS Date\",\"GPSDateStamp\"],30:[\"GPS differential correction\",\"GPSDifferential\"]};this.JpegMeta.JpegFile.prototype._markers={192:[\"SOF0\",\"_sofHandler\",\"Baseline DCT\"],193:[\"SOF1\",\"_sofHandler\",\"Extended sequential DCT\"],194:[\"SOF2\",\"_sofHandler\",\"Progressive DCT\"],195:[\"SOF3\",\"_sofHandler\",\"Lossless (sequential)\"],197:[\"SOF5\",\"_sofHandler\",\"Differential sequential DCT\"],198:[\"SOF6\",\"_sofHandler\",\"Differential progressive DCT\"],199:[\"SOF7\",\"_sofHandler\",\"Differential lossless (sequential)\"],200:[\"JPG\",null,\"Reserved for JPEG extensions\"],201:[\"SOF9\",\"_sofHandler\",\"Extended sequential DCT\"],202:[\"SOF10\",\"_sofHandler\",\"Progressive DCT\"],203:[\"SOF11\",\"_sofHandler\",\"Lossless (sequential)\"],205:[\"SOF13\",\"_sofHandler\",\"Differential sequential DCT\"],206:[\"SOF14\",\"_sofHandler\",\"Differential progressive DCT\"],207:[\"SOF15\",\"_sofHandler\",\"Differential lossless (sequential)\"],196:[\"DHT\",null,\"Define Huffman table(s)\"],204:[\"DAC\",null,\"Define arithmetic coding conditioning(s)\"],208:[\"RST0\",null,\"Restart with modulo 8 count “0”\"],209:[\"RST1\",null,\"Restart with modulo 8 count “1”\"],210:[\"RST2\",null,\"Restart with modulo 8 count “2”\"],211:[\"RST3\",null,\"Restart with modulo 8 count “3”\"],212:[\"RST4\",null,\"Restart with modulo 8 count “4”\"],213:[\"RST5\",null,\"Restart with modulo 8 count “5”\"],214:[\"RST6\",null,\"Restart with modulo 8 count “6”\"],215:[\"RST7\",null,\"Restart with modulo 8 count “7”\"],216:[\"SOI\",null,\"Start of image\"],217:[\"EOI\",null,\"End of image\"],218:[\"SOS\",null,\"Start of scan\"],219:[\"DQT\",null,\"Define quantization table(s)\"],220:[\"DNL\",null,\"Define number of lines\"],221:[\"DRI\",null,\"Define restart interval\"],222:[\"DHP\",null,\"Define hierarchical progression\"],223:[\"EXP\",null,\"Expand reference component(s)\"],224:[\"APP0\",\"_app0Handler\",\"Reserved for application segments\"],225:[\"APP1\",\"_app1Handler\"],226:[\"APP2\",null],227:[\"APP3\",null],228:[\"APP4\",null],229:[\"APP5\",null],230:[\"APP6\",null],231:[\"APP7\",null],232:[\"APP8\",null],233:[\"APP9\",null],234:[\"APP10\",null],235:[\"APP11\",null],236:[\"APP12\",null],237:[\"APP13\",null],238:[\"APP14\",null],239:[\"APP15\",null],240:[\"JPG0\",null],241:[\"JPG1\",null],242:[\"JPG2\",null],243:[\"JPG3\",null],244:[\"JPG4\",null],245:[\"JPG5\",null],246:[\"JPG6\",null],247:[\"JPG7\",null],248:[\"JPG8\",null],249:[\"JPG9\",null],250:[\"JPG10\",null],251:[\"JPG11\",null],252:[\"JPG12\",null],253:[\"JPG13\",null],254:[\"COM\",null],1:[\"JPG13\",null]};this.JpegMeta.JpegFile.prototype._addMetaGroup=function _addMetaGroup(a,b){var c=new JpegMeta.MetaGroup(a,b);this[c.fieldName]=c;this.metaGroups[c.fieldName]=c;return c};this.JpegMeta.JpegFile.prototype._parseIfd=function _parseIfd(w,r,f,p,o,x,t){var s=JpegMeta.parseNum(w,r,f+p,2);var v,u;var b;var g;var c,e,n;var d;var m;var q;var a;var k;var h;var l;l=this._addMetaGroup(x,t);for(v=0;v<s;v++){b=f+p+2+(v*12);g=JpegMeta.parseNum(w,r,b,2);e=JpegMeta.parseNum(w,r,b+2,2);d=JpegMeta.parseNum(w,r,b+4,4);m=JpegMeta.parseNum(w,r,b+8,4);if(this._types[e]===undefined){continue}c=this._types[e][0];n=this._types[e][1];if(n*d<=4){m=b+8}else{m=f+m}if(c==\"UNDEFINED\"){q=r.slice(m,m+d)}else{if(c==\"ASCII\"){q=r.slice(m,m+d);q=q.split(\"\\x00\")[0]}else{q=[];for(u=0;u<d;u++,m+=n){if(c==\"BYTE\"||c==\"SHORT\"||c==\"LONG\"){q.push(JpegMeta.parseNum(w,r,m,n))}if(c==\"SBYTE\"||c==\"SSHORT\"||c==\"SLONG\"){q.push(JpegMeta.parseSnum(w,r,m,n))}if(c==\"RATIONAL\"){k=JpegMeta.parseNum(w,r,m,4);h=JpegMeta.parseNum(w,r,m+4,4);q.push(new JpegMeta.Rational(k,h))}if(c==\"SRATIONAL\"){k=JpegMeta.parseSnum(w,r,m,4);h=JpegMeta.parseSnum(w,r,m+4,4);q.push(new JpegMeta.Rational(k,h))}q.push()}if(d===1){q=q[0]}}}if(o[g]){l._addProperty(o[g][1],o[g][0],q)}}};this.JpegMeta.JpegFile.prototype._jfifHandler=function _jfifHandler(b,a){if(this.jfif!==undefined){throw Error(\"Multiple JFIF segments found\")}this._addMetaGroup(\"jfif\",\"JFIF\");this.jfif._addProperty(\"version_major\",\"Version Major\",this._binary_data.charCodeAt(a+5));this.jfif._addProperty(\"version_minor\",\"Version Minor\",this._binary_data.charCodeAt(a+6));this.jfif._addProperty(\"version\",\"JFIF Version\",this.jfif.version_major.value+\".\"+this.jfif.version_minor.value);this.jfif._addProperty(\"units\",\"Density Unit\",this._binary_data.charCodeAt(a+7));this.jfif._addProperty(\"Xdensity\",\"X density\",JpegMeta.parseNum(\">\",this._binary_data,a+8,2));this.jfif._addProperty(\"Ydensity\",\"Y Density\",JpegMeta.parseNum(\">\",this._binary_data,a+10,2));this.jfif._addProperty(\"Xthumbnail\",\"X Thumbnail\",JpegMeta.parseNum(\">\",this._binary_data,a+12,1));this.jfif._addProperty(\"Ythumbnail\",\"Y Thumbnail\",JpegMeta.parseNum(\">\",this._binary_data,a+13,1))};this.JpegMeta.JpegFile.prototype._app0Handler=function app0Handler(c,b){var a=this._binary_data.slice(b,b+5);if(a==this._JFIF_IDENT){this._jfifHandler(c,b)}else{if(a==this._JFXX_IDENT){}else{}}};this.JpegMeta.JpegFile.prototype._app1Handler=function _app1Handler(c,b){var a=this._binary_data.slice(b,b+5);if(a==this._EXIF_IDENT){this._exifHandler(c,b+6)}else{}};JpegMeta.JpegFile.prototype._exifHandler=function _exifHandler(d,k){if(this.exif!==undefined){throw new Error(\"Multiple JFIF segments found\")}var g;var f;var c;var h,i,e;var b=this._binary_data.slice(k,k+2);if(b===\"II\"){g=\"<\"}else{if(b===\"MM\"){g=\">\"}else{throw new Error(\"Malformed TIFF meta-data. Unknown endianess: \"+b)}}f=JpegMeta.parseNum(g,this._binary_data,k+2,2);if(f!==42){throw new Error(\"Malformed TIFF meta-data. Bad magic: \"+f)}c=JpegMeta.parseNum(g,this._binary_data,k+4,4);this._parseIfd(g,this._binary_data,k,c,this._tifftags,\"tiff\",\"TIFF\");if(this.tiff.ExifIfdPointer){this._parseIfd(g,this._binary_data,k,this.tiff.ExifIfdPointer.value,this._exiftags,\"exif\",\"Exif\")}if(this.tiff.GPSInfoIfdPointer){this._parseIfd(g,this._binary_data,k,this.tiff.GPSInfoIfdPointer.value,this._gpstags,\"gps\",\"GPS\");if(this.gps.GPSLatitude){var j;j=this.gps.GPSLatitude.value[0].asFloat()+(1/60)*this.gps.GPSLatitude.value[1].asFloat()+(1/3600)*this.gps.GPSLatitude.value[2].asFloat();if(this.gps.GPSLatitudeRef.value===\"S\"){j=-j}this.gps._addProperty(\"latitude\",\"Dec. Latitude\",j)}if(this.gps.GPSLongitude){var a;a=this.gps.GPSLongitude.value[0].asFloat()+(1/60)*this.gps.GPSLongitude.value[1].asFloat()+(1/3600)*this.gps.GPSLongitude.value[2].asFloat();if(this.gps.GPSLongitudeRef.value===\"W\"){a=-a}this.gps._addProperty(\"longitude\",\"Dec. Longitude\",a)}}};\n(typeof Tumblr!==\"undefined\")||(Tumblr={});\n(function(c,a){var b=function(d,f){if(!(this instanceof b)){return new b(d,f)}f=f||{};this.$container=c(d);if(this.$container.is(\".popover\")){this.$popover=this.$container;this.$container=this.$popover.parent()}else{this.$popover=this.$container.find(\".popover\")}this.token=f.token||e();this.animate=f.animate||false;this.on_hide=f.on_hide||function(){};this.on_show=f.on_show||function(){};this.direction=f.direction||\"auto\";this.insertPlexiAt=c(f.insertAt)||this.container;this.plexiSelector='.plexi[data-token=\"'+this.token+'\"]';this.events={click:c.proxy(this.__plexiClick,this)};function e(){var g=function(){return(((1+Math.random())*65536)|0).toString(16).substring(1)};return(g()+g()+\"-\"+g()+\"-\"+g()+\"-\"+g()+\"-\"+g()+g()+g())}b.register(this);return this};b.prototype={__plexiClick:function(d){d.preventDefault();this.hide()},show:function(){this.position();if(c(this.plexiSelector).length===0){this.plexi=new Tumblr.Plexi({token:this.token});this.plexi.create(this.insertPlexiAt)}else{this.plexi=Tumblr.Plexi.findByToken(this.token)}this.visible=true;this.plexi.show();this.$popover.show();this.plexi.$instance.on(\"click\",this.events.click);this.on_show.apply(this,[this]);return this},position:function(){this.$container.show();this.$popover.show();var g=c(window);var d={top:g.scrollTop(),left:g.scrollLeft()};this.$popover.removeClass(\"south\");d.right=d.left+g.width();d.bottom=d.top+g.height();var e=this.$popover.offset();e.right=e.left+this.$popover.outerWidth();e.bottom=e.top+this.$popover.outerHeight();var f=(this.direction===\"south\")||(this.direction===\"auto\"&&d.bottom<e.bottom);if(f){this.$popover.addClass(\"south\")}},hide:function(){this.plexi.hide();this.$popover.hide();this.visible=false;this.$container.removeClass(\"active\");this.plexi.$instance.off(\"click\",this.events.click);this.on_hide.apply(this,[this]);return this}};b.instances=[];b.register=function(d){this.instances.push(d)};b.hideAll=function(){for(var d=0;d<this.instances.length;d++){this.instances[d].hide()}};b.visible=function(){for(var d=0;d<this.instances.length;d++){if(this.instances[d].visible){return true}}return false};a.MultiPopover=b})(jQuery,Tumblr);\n(function(c,b){var a=function(e,d){if(!(this instanceof a)){return new a(e,d)}this.el=(typeof e===\"string\")?c(e).get(0):e;this.$el=c(e);this.options=d;this.metadata=this.$el.data(\"plugin-options\");this.config=c.extend({},a.defaults,this.options,this.metadata);this.$el.each(c.proxy(function(f,i){var h=c(i);if(c.inArray(i.tagName.toLowerCase(),this.config.editableFields)===-1){if(this.config.contentEditable){h.attr(\"contenteditable\",\"true\")}if(this.config.makeInput){var g=c(\"<input/>\",{type:\"text\",\"class\":i.className,value:h.text()});if(i.id&&i.id!==\"\"){g.attr(\"id\",i.id)}if(h.data(\"name\")){g.attr(\"name\",h.data(\"name\"))}h.replaceWith(g);this.bind_events(g)}}},this));this.bind_events(this.$el);a.register(this);return this};a.prototype={bind_events:function(d){d.on(\"focus.inplacedit\",c.proxy(function(f){this.edit_input(c(f.currentTarget))},this));d.on(\"blur.inplacedit\",c.proxy(function(f){this.set_text(c(f.currentTarget))},this));d.on(\"keypress.inplacedit\",c.proxy(function(f){this.capture_text(f)},this))},edit_input:function(d){d.addClass(\"editing\")},set_text:function(d){d.removeClass(\"editing\")},capture_text:function(d){if(d.keyCode===13){d.preventDefault();c(d.currentTarget).blur()}},destroy:function(){this.$el.off(\".inplacedit\");a.instances.splice(_.indexOf(this),1);return this}};a.instances=[];a.defaults={editableFields:[\"input\",\"textfield\"],contentEditable:false,makeInput:true};a.register=function(d){this.instances.push(d)};c.fn.inplaceedit=function(d){return this.each(function(){new a(this,d)})};b.InplaceEdit=a})(jQuery,Tumblr);\n(function(b,a){Tumblr.PostForms={initialize:function(k){this.form_key=b(\"#tumblr_form_key\").attr(\"content\");this.safe_edit=parseInt(b(\"#tumblr_safe_edit\").val(),10)?true:false;this.model=null;this.view=null;this.mode=k.mode;var e=b(document);var c,d;var j=location.search.substring(1).split(\"&\");_.each(j,function(o){o=o.split(\"=\");var m=o[0];var n=decodeURIComponent(o[1]);if(m==\"redirect_to\"&&!(/^\\s*javascript/).test(n)){var l;n=decodeURIComponent(n.replace(/\\+/g,\" \"));if((l=n.indexOf(\"#\"))>0){n=n.substr(0,l)}this.redirect_to=n}else{if(m==\"source\"&&(/^[\\w_]+$/i).test(n)){this.source=n}}},this);e.on(\"click\",\"#post_buttons a\",_.bind(function(o){if(o.metaKey){return}var n=b(o.currentTarget);n.on(\"click\",f);setTimeout(function(){n.off(\"click\",f)},1000);c=this.parse_url_params(o.currentTarget.href);var l=b(o.currentTarget);o.preventDefault();var m=l.data(\"post-type\");var p=l.data(\"post-endpoint\")||m;this.create({type:m,endpoint:p,attach_to:\"#new_post\",previous_content_selector:\"#post_buttons\",mode:this.mode},c)},this));e.on(\"click\",\"a.edit_post\",_.bind(function(q){if(q.metaKey){return}var p=b(q.currentTarget);p.on(\"click\",f);setTimeout(function(){p.off(\"click\",f)},1000);q.preventDefault();var n=b(q.currentTarget);var o=n.data(\"post-type\");var s=n.data(\"post-endpoint\")||o;var l=n.data(\"channel-id\");var m=n.data(\"post-id\");var r=n.parents(\"li\");this.edit({type:o,edit:true,channel_id:l,post_id:m,endpoint:s,attach_to:r,previous_content_selector:p.parents(\".post_wrapper\"),adjust_offset:true})},this));e.on(\"click\",\"a.delete_button[data-post-id]\",_.bind(function(o){o.preventDefault();var n=window.confirm(__(\"Delete this post?\"));if(n===false){return}var m=b(o.currentTarget).attr(\"data-post-id\");var l=b(o.currentTarget).attr(\"data-channel-id\");this.delete_post(m,l)},this));e.on(\"click\",\"a.reblog_button\",_.bind(function(n){if(n.metaKey){return}var l=b(n.currentTarget);l.on(\"click\",f);setTimeout(function(){l.off(\"click\",f)},1000);n.preventDefault();var t=b(n.currentTarget);var p=t.data(\"post-type\");var s=t.data(\"post-endpoint\")||p;var o=t.data(\"channel-id\");var r=t.data(\"reblog-id\");var q=t.data(\"reblog-key\");var m=t.parents(\"li\");this.edit({type:p,channel_id:o,reblog_id:r,endpoint:s,detached:true,reblog:true,animate_from:m,reblog_key:q,previous_content_selector:null})},this));function f(){return false}if(location.pathname.indexOf(\"/new/\")!==-1){this.load_spinner();var h=/\\/new\\/([a-z]*)/g;var g=h.exec(window.location.pathname);if(g!==null){g=encodeURIComponent(g[1]);c=this.parse_url_params(location.search);g=Tumblr.PostForms.endpoints_to_types[g]?g:\"text\";this.create({type:Tumblr.PostForms.endpoints_to_types[g],endpoint:g,attach_to:\"#new_post\",previous_content_selector:\"#post_buttons\"},c)}}if(location.pathname.indexOf(\"/reblog/\")!==-1){this.load_spinner();c={};d=location.pathname.split(\"/\");if(d.length>3){$attach_to=b(\"#posts\");$type=\"\";$reblog_as=false;if(d[4]){var i=d[4];$reblog_as=true;$type=Tumblr.PostForms.endpoints_to_types[i]||Tumblr.PostForms.endpoints_to_types.text}c={type:$type,reblog_id:d[2],detached:true,reblog:true,reblog_as:$reblog_as,attach_to:$attach_to,reblog_key:d[3],previous_content_selector:null};this.edit(c)}}if(location.pathname.indexOf(\"/edit/\")!==-1){this.load_spinner();c={};d=location.pathname.split(\"/\");if(d.length>2){$attach_to=b(\"#posts\");c={type:\"\",edit:true,detached:true,post_id:d[2],attach_to:$attach_to}}this.edit(c)}},xhr_request:function(c,f,d){f=_.extend(f,{form_key:Tumblr.PostForms.form_key});var e=b.ajax({data:JSON.stringify(f),type:\"POST\",url:c});e.done(_.bind(function(g){if(d[200]){d[200].call(this,g)}},this));e.fail(_.bind(function(i,g,h){if(d[i.status]){d[i.status].call(this,i.status)}},this))},load_spinner:function(){var c={lines:16,length:11,width:4,radius:17,color:\"#fff\",speed:0.9,trail:34,shadow:false,hwaccel:false,className:\"waiting_spinner\",zIndex:2000000000,top:\"50\",left:\"auto\"};var d=new Spinner(c).spin();b('.plexi[data-token=\"body-plexi\"]').append(d.el)},hide_spinner:function(){b('.plexi[data-token=\"body-plexi\"]').empty()},parse_url_params:function(d){var e,c,f;e={post:{}};c=d.split(\"?\");c=c[1]||c[0];c=c.split(\"&\");c.forEach(function(g){g=g.split(\"=\");if(g[0]==\"tags\"||g[0]==\"post[tags]\"){f=_.escape(decodeURIComponent(g[1]));b.extend(e.post,{tags:f})}if(g[0]==\"caption\"){f=_.escape(decodeURIComponent(g[1]));b.extend(e.post,{two:f})}if(g[0]==\"post[state]\"){f=parseInt(encodeURIComponent(g[1]),10);if(f==1||f==2){b.extend(e.post,{state:f})}}if(g[0]==\"state\"){mappings={draft:1,queue:2};f=encodeURIComponent(g[1]);if(mappings[f]){b.extend(e.post,{state:mappings[f]})}}if(g[0]==\"src\"||g[0]==\"post[src]\"){f=decodeURIComponent(g[1]);b.extend(e.post,{source_url:f,photos:[{external_url:f,filename:\"\",id:\"o1\",url:f}]})}});return e},editor_defaults:{immediate:true,skin:\"bluth\",custom_css:\"/assets/styles/custom_tinymce_bluth.css\",layout:\"bold,italic,strikethrough,link,unlink,numlist,bullist,image,blockquote,code\",plugins:\"autoresize,safari,pagebreak,ajax_forms,tumblr_popovers,mention\",resize:true,min_width:498,max_width:498,focus:false},endpoints_to_types:{text:\"regular\",photo:\"photo\",quote:\"quote\",link:\"link\",chat:\"conversation\",audio:\"audio\",video:\"video\"},create:function(c,d){this.config=b.extend({type:\"regular\",endpoint:\"text\",attach_to:\"#new_post\",detached:false},c||{});if(this.view){this.view.destroy(true)}this.model=(_.isFunction(Tumblr.PostForms[Tumblr.$.capitalize(this.config.type)+\"Model\"]))?new Tumblr.PostForms[Tumblr.$.capitalize(this.config.type)+\"Model\"]():new Tumblr.PostForms.Post();this.model.set(_.extend(this.model.attributes,d));this.view=new Tumblr.PostForms[Tumblr.$.capitalize(this.config.type)]({attach_to:this.config.attach_to,model:this.model,autosave:false,post_type:this.config.type,post_endpoint:this.config.endpoint,previous_content_selector:this.config.previous_content_selector,mode:this.config.mode,detached:this.config.detached});if(c.detached){this.config=b.extend(this.config,{attach_to:\"body\",previous_content_selector:null,adjust_offset:false,animate_from:this.config.animate_from})}this.view.show_post_form(this.config.type);this.model.on(\"post:form:hide\",function(){this.model.off();this.model=null;this.config=null;_.each(this.view,function(g,e,f){f[e]=null});this.view=null},this)},edit:function(c){this.config=b.extend({},c||{});var e={post_id:this.config.post_id,channel_id:this.config.channel_id,reblog_id:this.config.reblog_id,reblog_key:this.config.reblog_key,post_type:this.config.reblog_as?this.config.type:false};this.model_params={channel_id:this.config.channel_id,post_id:this.config.post_id,edit:this.config.edit,detached:this.config.detached,reblog:this.config.reblog,reblog_id:this.config.reblog_id,reblog_key:this.config.reblog_key,safe_edit:this.safe_edit,source:this.source};if(this.view){if(!this.config.reblog_as){this.view.destroy(true)}else{this.view.destroy()}}if(this.model){this.model=null}var d={attach_to:this.config.attach_to,autosave:false,post_type:this.config.type,post_endpoint:this.config.endpoint,previous_content_selector:this.config.previous_content_selector,adjust_offset:this.config.adjust_offset,reblog_as:this.config.reblog_as,initial_height:this.config.initial_height,page_root:this.config.page_root,current_tumblelog:this.config.current_tumblelog};if(c.detached){d=b.extend(d,{attach_to:\"body\",previous_content_selector:null,adjust_offset:false,animate_from:this.config.animate_from})}this.xhr_request(\"/svc/post/fetch\",e,{200:_.bind(this.success,this,d),401:_.bind(this.unauthorized,this),403:_.bind(this.unauthorized,this)})},delete_post:function(e,d){var f={post_id:e,channel_id:d};var c=b('li.post[data-post-id=\"'+e+'\"]');this.xhr_request(\"/svc/post/delete\",f,{200:function(g){c.fadeOut(500,function(){c.remove()})},401:_.bind(this.unauthorized,this),403:_.bind(this.unauthorized,this),500:_.bind(this.unauthorized,this)})},success:function(c,d){this.model=(_.isFunction(Tumblr.PostForms[Tumblr.$.capitalize(d.post.type)+\"Model\"]))?new Tumblr.PostForms[Tumblr.$.capitalize(d.post.type)+\"Model\"](this.model_params):new Tumblr.PostForms.Post(this.model_params);this.model.set(_.extend(this.model.attributes,d,{silent:true}));c=b.extend(c,{post_type:d.post.type,model:this.model});this.view=new Tumblr.PostForms[Tumblr.$.capitalize(d.post.type)](c);this.view.show_post_form(d.post.type);if(this.model.get(\"edit\")&&!this.model.get(\"detached\")){this.view.scroll_fence=_.debounce(_.bind(function(l){if(this.scrolling_back_up){return false}var k=this.$parent_el.offset().top;var i=this.$parent_el.outerHeight();var j=k+i;var f=b(window).scrollTop();var m=b(window).height();var g=f+m;var h;if(k>g){this.scrolling_back_up=true;h=k-7;b(\"html, body\").stop(true).animate({scrollTop:h},500,\"easeOutQuad\",_.bind(function(){this.scrolling_back_up=false},this))}else{if(j<f){this.scrolling_back_up=true;h=k-7;if(i>0.5*m){h=j-0.5*m}b(\"html, body\").stop(true).animate({scrollTop:h},500,\"easeOutQuad\",_.bind(function(){this.scrolling_back_up=false},this))}}},this.view),75);b(window).on(\"scroll\",this.view.scroll_fence)}},unauthorized:function(){b(\".plexi\").remove();if(!!(window.history&&history.pushState)){window.history.replaceState({},\"Tumblr\",\"/dashboard\")}else{window.location.href=\"/dashboard\"}},change_reblog_type:function(e,c,g,f,d){this.edit({attach_to:g,type:e,channel_id:this.model.get(\"channel_id\"),reblog_id:this.model.get(\"reblog_id\"),reblog_as:true,endpoint:e,detached:false,reblog:true,reblog_key:this.model.get(\"reblog_key\"),safe_edit:this.safe_edit,previous_content_selector:null,adjust_offset:false,initial_height:f,page_root:c,current_tumblelog:d})}}})(jQuery,Tumblr);\n(function(b,a){Tumblr.PostForms.Post=Backbone.Model.extend({urlRoot:\"/svc/post/update\",max_upload_size:10485760,upload_pattern:/./,upload_url:\"/svc/post/upload_text_image\",defaults:{form_key:b(\"#tumblr_form_key\").attr(\"content\")},add_protocol:function(c,d){if(!/^([^\\/]+):\\/\\//i.test(c)){if(!d){d=\"http\"}c=d+\"://\"+c}return c},get_protocol:function(c){if(!c){return false}var d=c.match(/^([^\\/]+):\\/\\//i);if(d){return d[1]}return false},undup_protocol:function(c){var d=c.match(/^((?:[^\\/]+:\\/\\/)+)([^\\/]+:\\/\\/.*)/i);if(d){return d[2]}return c},validate:function(c){if(c.errors){return c.errors}},validate_upload:function(c,d){if(!c.size){return}if(c.size>this.max_upload_size){return{size:__(d.errorSize)}}else{if(c.type&&!this.upload_pattern.test(c.type)){return{type:__(d.errorType)}}}},random_upload_id:function(){return Math.floor(Math.random()*100000)},init_uploader:function(d,c){this.uploader_inititalized=true;this.jqXHR=null;c=b.extend({error_msg:{errorSize:\"File is too big.\",errorType:\"Filetype is not allowed.\"},upload_url:this.upload_url,dropZone:b(document),pasteZone:null,singleFileUploads:true,limitConcurrentUploads:1,validate:true,custom_validation:null},c||{});d.fileupload({singleFileUploads:c.singleFileUploads,limitConcurrentUploads:c.limitConcurrentUploads,dataType:\"json\",url:c.upload_url,dropZone:c.dropZone,pasteZone:c.pasteZone,formData:_.bind(function(e){var f=b(e).serializeArray();var g=Tumblr.PostForms.form_key||this.defaults.form_key;f.push({name:\"form_key\",value:g});f.push({name:\"upload_id\",value:this.upload_id});return f},this),drop:_.bind(function(g,f){if(c.drop){c.drop.apply(this,arguments)}},this),change:_.bind(function(g,f){if(c.change){c.change.apply(this,arguments)}this.trigger(\"change:upload_file_seppuku\",d)},this),add:_.bind(function(h,f){var i;if(c.validate){if(c.custom_validation&&_.isFunction(c.custom_validation)){i=c.custom_validation.call(this,f.files[0])}else{i=this.validate_upload(f.files[0],c.error_msg)}}if(c.validate&&i){this.trigger(\"change:upload_file_error\",i,f,d);return}else{var g=this.random_upload_id();this.upload_id=g;f.files[0].upload_id=g;this.trigger(\"change:upload_files_added\",f,d);this.jqXHR=f.submit()}},this),always:_.bind(function(g,f){this.trigger(\"change:upload_always\",f.files,f.dataType,d)},this),send:_.bind(function(g,f){this.trigger(\"change:send_file\",f.files,f.dataType,d)},this),done:_.bind(function(g,f){setTimeout(_.bind(function(){if(f.result.errors){this.trigger(\"change:upload_failed\",f.result.errors,d)}else{if(!f.result.response){this.trigger(\"change:upload_failed\",l10n_str.ajax_error,d)}else{this.trigger(\"change:upload_complete\",f.result,d)}}},this),100)},this),progress:_.bind(function(h,g){var f=parseInt(g.loaded/g.total*100,10);this.trigger(\"change:upload_progress\",f,d)},this),fail:_.bind(function(g,f){if(f.errorThrown!==\"abort\"){this.trigger(\"change:upload_failed\",l10n_str.ajax_error,d)}},this)})},enable_uploader:function(c){c.fileupload(\"enable\")},disable_uploader:function(c){c.fileupload(\"disable\")},destroy_uploader:function(c){this.uploader_inititalized=false;c.fileupload(\"destroy\")},cancel_upload:function(){if(this.jqXHR){this.jqXHR.abort()}}})})(jQuery,Tumblr);\n(function(b,a){Tumblr.PostForms.RegularModel=Tumblr.PostForms.Post.extend({max_upload_size:10485760,upload_pattern:/^(?:image\\/bmp|image\\/cis\\-cod|image\\/gif|image\\/ief|image\\/jpeg|image\\/jpeg|image\\/jpeg|image\\/pipeg|image\\/png|image\\/svg\\+xml|image\\/tiff|image\\/x\\-cmu\\-raster|image\\/x\\-cmx|image\\/x\\-icon|image\\/x\\-portable\\-anymap|image\\/x\\-portable\\-bitmap|image\\/x\\-portable\\-graymap|image\\/x\\-portable\\-pixmap|image\\/x\\-rgb|image\\/x\\-xbitmap|image\\/x\\-xpixmap|image\\/x\\-xwindowdump)$/i,upload_url:\"/svc/post/upload_text_image\",validate:function(c){if(!b.trim(c[\"post[one]\"])&&!b.trim(c[\"post[two]\"])){return{error:__(\"Post cannot be empty\")}}if(c.errors){return c.errors}}})})(jQuery,Tumblr);\n(function(b,a){Tumblr.PostForms.QuoteModel=Tumblr.PostForms.Post.extend({validate:function(c){if(!b.trim(c[\"post[one]\"])){return{error:__(\"Post cannot be empty\")}}if(c.errors){return c.errors}}})})(jQuery,Tumblr);\n(function(b,a){Tumblr.PostForms.LinkModel=Tumblr.PostForms.Post.extend({max_upload_size:10485760,thumbnail_upload_pattern:/^(?:image\\/bmp|image\\/cis\\-cod|image\\/gif|image\\/ief|image\\/jpeg|image\\/jpeg|image\\/jpeg|image\\/pipeg|image\\/png|image\\/svg\\+xml|image\\/tiff|image\\/x\\-cmu\\-raster|image\\/x\\-cmx|image\\/x\\-icon|image\\/x\\-portable\\-anymap|image\\/x\\-portable\\-bitmap|image\\/x\\-portable\\-graymap|image\\/x\\-portable\\-pixmap|image\\/x\\-rgb|image\\/x\\-xbitmap|image\\/x\\-xpixmap|image\\/x\\-xwindowdump)$/i,upload_url:\"/svc/post/upload_link_image\",fetch_og_meta:function(e,d,c){var f=b.ajax({url:\"/svc/post/fetch_og\",type:\"POST\",data:{form_key:Tumblr.PostForms.form_key,url:e}});f.always(_.bind(function(g){this.trigger(\"change:link_of_meta\",g)},this));if(typeof d===\"function\"){f.done(_.bind(function(g){d.call(this,b.parseJSON(g),e)},this))}if(typeof c===\"function\"){f.fail(_.bind(function(g){c.call(this,b.parseJSON(g),e)},this))}return f},allowed_protocol:function(c){c=b.trim(c);if(c.match(/^magnet:/i)){return false}protocol=this.get_protocol(c);return _.indexOf([\"http\",\"https\"],protocol)>=0},validate:function(c){if(!b.trim(c[\"post[two]\"])){return{error:__(\"Post cannot be empty\")}}if(!this.allowed_protocol(c[\"post[two]\"])){return{error:__(\"Invalid URL\")}}if(Tumblr.use_link_opengraph&&this.is_suspicious_title(c[\"post[two]\"],c[\"post[one]\"])){return{error:__(\"Post cannot contain URL in title\")}}if(c.errors){return c.errors}},validate_thumbnail:function(c,d){if(!c.size){return}if(c.size>this.max_upload_size){return{size:__(\"File is too big. Max 10MB.\")}}else{if(!this.thumbnail_upload_pattern.test(c.type)){return{type:__(\"Only image files are allowed.\")}}}},is_suspicious_title:function(d,f){if(!(f&&d)){return false}f=b.trim(f);var e=d.replace(/(https?:\\/\\/)?([^\\/]+)(.*)/,\"$2\");if(!e){return false}var c;clean_domain=function(g){return g.split(\".\").slice(-2).join(\".\").toLowerCase()};if((c=f.match(/https?:\\/\\/([^\\/]+)/i))&&c.length>1){if(clean_domain(c[1])!==clean_domain(e)){return true}}if((c=b.trim(f).match(/\\s/g))&&c.length>0){return false}tld=function(g){return g.split(\".\").slice(-1).join(\".\").toLowerCase()};if((c=f.match(/([^\\/\\s]+\\.[^\\/\\s\\?]{2,})/i))&&c.length>1&&tld(c[1]).match(/(com|net|org|edu|gov|mil)/)){if(clean_domain(c[1])!==clean_domain(e)){return true}}return false}})})(jQuery,Tumblr);\n(function(b,a){Tumblr.PostForms.ConversationModel=Tumblr.PostForms.Post.extend({validate:function(c){if(!b.trim(c[\"post[two]\"])){return{error:__(\"Post cannot be empty\")}}if(c.errors){return c.errors}}})})(jQuery,Tumblr);\n(function(b,a){Tumblr.PostForms.AudioModel=Tumblr.PostForms.Post.extend({services:[\"soundcloud\",\"spotify\"],max_upload_size:10485760,upload_pattern:b.browser.mozilla?/^audio\\/(?:.*)$/i:/^(?:audio\\/mp3|audio\\/mpeg)$/i,artwork_upload_pattern:/^(?:image\\/bmp|image\\/cis\\-cod|image\\/gif|image\\/ief|image\\/jpeg|image\\/jpeg|image\\/jpeg|image\\/pipeg|image\\/png|image\\/svg\\+xml|image\\/tiff|image\\/x\\-cmu\\-raster|image\\/x\\-cmx|image\\/x\\-icon|image\\/x\\-portable\\-anymap|image\\/x\\-portable\\-bitmap|image\\/x\\-portable\\-graymap|image\\/x\\-portable\\-pixmap|image\\/x\\-rgb|image\\/x\\-xbitmap|image\\/x\\-xpixmap|image\\/x\\-xwindowdump)$/i,upload_url:\"/svc/post/upload_audio\",search:function(c){var d=0;_.each(this.services,_.bind(function(e){var f=b.ajax({url:\"/search_audio?q=\"+encodeURIComponent(c),type:\"POST\",data:{audio_search_provider:e}});f.done(_.bind(function(g){this.trigger(\"change:audio_search\",this.normalize_results(e,g))},this));f.fail(_.bind(function(g){this.trigger(\"change:audio_search_failed\",e)},this))},this))},normalize_results:function(c,g){var f;var e=5;var h={};switch(c){case\"soundcloud\":f=g.splice(0,e);for(var d=0;d<f.length;d++){f[d].artwork_url=(f[d].artwork_url&&f[d].artwork_url!=\"null\"?f[d].artwork_url:\"\");f[d].stream_url=f[d].stream_url+\"?client_id=3cQaPshpEeLqMsNFAUw1Q\";if(f[d].kind===\"playlist\"&&f[d].tracks&&f[d].tracks.length){f[d].stream_url=f[d].tracks[0].stream_url+\"?client_id=3cQaPshpEeLqMsNFAUw1Q\"}}break;case\"spotify\":f=g.tracks.splice(0,e);break}for(d=0;d<f.length;d++){f[d].type=c}h.items=f;h.type=c;return h},validate:function(c){if(!c[\"post[three]\"]&&!c.preuploaded_url&&!c.pre_upload){return{error:__(\"Please choose an audio source before continuing.\")}}if(c.pre_upload&&c.preuploaded_url&&!c.confirm_tos){return{error:__(\"You must agree that you have permission to share this file.\")}}if(c.errors){return c.errors}},validate_artwork:function(c,d){if(!c.size){return}if(c.size>this.max_upload_size){return{size:__(\"File is too big. Max 10MB.\")}}else{if(!this.artwork_upload_pattern.test(c.type)){return{type:__(\"Only image files are allowed.\")}}}},get_soundcloud_data:function(c,f){var e={form_key:Tumblr.PostForms.form_key,soundcloud_url:c};var d=b.ajax({url:\"/svc/post/get_soundcloud_data\",type:\"POST\",data:JSON.stringify(e)});d.done(_.bind(function(h){if(h&&_.isFunction(f)){var g={};g.provider=\"soundcloud\";g.href=c;g.artwork=h.artwork_url;g.title=h.title;g.stream=h.stream_url+\"?client_id=3cQaPshpEeLqMsNFAUw1Q\";if(!_.isUndefined(h.kind)){g.kind=h.kind}f.call(this,g)}},this))},get_bandcamp_data:function(c,f){var e={form_key:Tumblr.PostForms.form_key,bandcamp_url:c};var d=b.ajax({url:\"/svc/post/get_bandcamp_data\",type:\"POST\",data:JSON.stringify(e)});d.done(_.bind(function(h){if(!h||h.error){return false}if(h&&_.isFunction(f)){var g={};g.provider=\"bandcamp\";g.href=h.url;g.artwork=h.art_350px;g.title=h.title;g.artist=h.artist;g.album=h.album_title;g.stream=h.stream_url;g.type=h.type;g.id=h.id;f.call(this,g)}},this))},get_spotify_data:function(c,f){var e={form_key:Tumblr.PostForms.form_key,spotify_url:c};var d=b.ajax({url:\"/svc/post/get_spotify_data\",type:\"POST\",data:JSON.stringify(e)});d.done(_.bind(function(h){if(!h||h.error){return false}if(h&&_.isFunction(f)){var g={};g.href=h.url;g.provider=\"spotify\";g.artwork=h.image||\"\";g.title=h.title||\"\";g.artist=h.artist||\"\";g.album=h.album||\"\";g.year=h.year||\"\";g.track=h.track||\"\";f.call(this,g)}},this))}})})(jQuery,Tumblr);\n(function(b,a){Tumblr.PostForms.VideoModel=Tumblr.PostForms.Post.extend({max_upload_size:104857600,upload_pattern:/^video\\/(?:.*)$/i,upload_url:\"/svc/post/upload_video\",validate:function(c){if(c.keep_video){return}else{if(c.pre_upload){if(!c.preuploaded_url){return{error:__(\"Please choose a video source before continuing.\")}}if(!c.confirm_tos){return{error:__(\"You must agree that you have permission to share this file.\")}}}else{if(!c[\"post[one]\"]){return{error:__(\"Please choose a video source before continuing.\")}}else{if(!c.valid_embed_code){return{error:__(\"Sorry, we don't recognize that video service. Please use their embed code instead.\")}}}}}if(c.errors){return c.errors}},get_video_data:function(c,f){var e={form_key:Tumblr.PostForms.form_key,embed_url:c};var d=b.ajax({url:\"/svc/post/get_video_data\",type:\"POST\",data:JSON.stringify(e)});d.done(_.bind(function(h){if(h&&_.isFunction(f)){var g=b.extend({orig_embed_code:c},h);f.call(this,g)}},this));return d}})})(jQuery,Tumblr);\n(function(b,a){Tumblr.PostForms.PhotoModel=Tumblr.PostForms.Post.extend({upload_url:\"/svc/post/upload_photo\",upload_pattern:/^image\\/(gif|jpe?g|png)$/,max_number_of_files:10})})(jQuery,Tumblr);\n(function(b,a){Tumblr.PostForms.BaseView=Backbone.View.extend({init:true,active:false,empty:true,className:\"post_form_wrapper\",editor_id:\"post_two\",events:{\"submit form#post_form\":\"submit\",\"input form#post_form\":\"change\",\"change form#post_form\":\"change\",\"click button.close\":\"hide_post_form\",\"click #create_post .options\":\"show_post_options\",\"click .cog\":\"show_advanced_options\",\"mouseover #tumblelog_select li:first-child .option\":\"tumblelog_menu_nipple\",\"mouseout #tumblelog_select li:first-child .option\":\"tumblelog_menu_nipple\",\"click #tumblelog_select .txt:not(.edit)\":\"show_tumblelog_choice\",\"click .reblog_select\":\"show_reblog_types\",\"click #tumblelog_select .option\":\"select_tumblelog\",\"click #reblog_select .option\":\"select_reblog_type\",\"click #post_options .option\":\"select_post_option\",\"click #preview\":\"preview_on_blog\",\"click .publish_on\":\"show_publish_on\",\"change .advanced_post_options input\":\"advanced_options_update\",\"keydown .advanced_post_options input\":\"advanced_options_update\",\"blur .advanced_post_options .option:last-child input\":\"blur_advanced_options\",\"change #post_slug\":\"sluggify\",\"change #post_source_url\":\"source_url\",\"change #allow_answers\":\"allow_answers\"},tinymce_add_events:function(){throw\"Deprecated\"},tinymce_remove_events:function(){throw\"Deprecated\"},initialize:function(c){this.options=c||{};this.$parent_el=b(this.options.attach_to);this.base_template=b(\"#base_template\").html();this.initialHeight=this.options.initial_height||this.$parent_el.outerHeight();this.detached=this.options.detached;this.post_type=this.options.post_type;this.post_endpoint=this.options.post_endpoint||this.post_type;this.preview_endpoint=\"post/preview\";this.post_class=(this.detached)?\"detached\":\"inline\";this.previous_content_selector=this.options.previous_content_selector;this.page_root=(b(\"body\").data(\"page-root\"))||\"\";this.new_root=(b(\"body\").data(\"new-root\"))||\"\";if(this.model.get(\"detached\")){this.$el.addClass(\"detached\")}this.edit=this.options.edit;this.is_ie9=b(\"html\").hasClass(\"ie9\");this.queue=b(\"body\").hasClass(\"dashboard_post_queue\");this.model.on(\"change:upload_files_added\",this.change,this);b(window).on(\"beforeunload.\"+this.cid,_.bind(this.before_unload,this));this.render();var d={lines:13,length:6,width:2,radius:6,color:\"rgba(0,0,0,.5)\",speed:0.9,trail:34,shadow:false,hwaccel:false,className:\"spinner\",zIndex:2000000000,top:\"0\",left:\"0\"};this.spinner=new Spinner(d);this.disable_global();if(this.model.get(\"detached\")){new Tumblr.VideoThumbnails({el:this.$el})}},disable_global:function(){b(\"#search_field\").removeClass(\"active\")},cache_selectors:function(){this.$loader=this.$(\".post_loader\");this.$previous_content=b(this.previous_content_selector);this.$body=b(\"body\");this.$post_form=this.$(\"#post_form\");this.$post_content=this.$(\"#post_content\");this.$post_content_type=this.$(\"#post_content .post_type\");this.$preview=this.$(\"#preview\");this.$post_state=this.$(\"#post_state\");this.$main_content=this.$(\".main_content\");this.$additional_options_panel=this.$(\".additional_options_panel\");this.$additional_options=this.$(\".additional_options\");this.$allow_answers=this.$(\"#allow_answers\");this.$current_tumblelog=this.$(\"#tumblelog_choices .selected\");this.$publish_on=this.$(\"#post_publish_on\");this.$submit_btn=this.$(\"#create_post button[type=submit]\");this.$preview_btn=this.$(\"#preview .chrome\");this.$draft_status=this.$(\"#post_draft_status\");this.$draft_status_option=this.$(\".option.draft_message\");this.$original_avatar=b(\"#post_controls_avatar\");this.$original_sub_avatar=b(\"#post_controls_sub_avatar\");this.$post=this.$el.closest(\".post\");if(this.model.get(\"detached\")){this.$avatar=this.$el.find(\".post_avatar .post_avatar_link\").addClass(\"use_blog_avatar\");this.$sub_avatar=this.$el.find(\".post_avatar .post_sub_avatar\").addClass(\"use_sub_avatar\")}else{this.$avatar=this.$parent_el.find(\".post_avatar .post_avatar_link\").first().addClass(\"use_blog_avatar\");this.$sub_avatar=this.$parent_el.find(\".post_avatar .post_sub_avatar\").first().addClass(\"use_sub_avatar\")}if(this.options.reblog_as){this.$avatar=b(\".post_form_wrapper.detached a.post_avatar_link\");this.$sub_avatar=b(\".post_form_wrapper.detached a.post_sub_avatar\")}this.$blog_avatar=b(\"<span/>\").addClass(\"post_avatar_link blog_avatar\");this.$new_blog_avatar=b(\"<span/>\").addClass(\"post_avatar_link blog_avatar new\");if(this.$avatar.is(\".flat\")){this.$avatar.append(this.$blog_avatar,this.$new_blog_avatar);this.$blog_avatar.css(\"background-image\",this._url_css_wrap(this.$avatar.data(\"avatarUrl\")));this.$new_blog_avatar.css(\"background-image\",\"none\")}else{this.$avatar.css(\"background-image\",\"none\").empty().append(this.$blog_avatar,this.$new_blog_avatar);if(this.model.get(\"edit\")){this.$blog_avatar.css(\"background-image\",this._url_css_wrap(this.$avatar.data(\"avatarUrl\")));this.$new_blog_avatar.css(\"background-image\",this._url_css_wrap(this.$avatar.data(\"avatarUrl\")));if(!this.$parent_el.hasClass(\"same_user_as_last\")&&this.$avatar.data(\"useSubAvatar\")){this.$sub_avatar.addClass(\"instant show_sub_avatar\")}}else{this.$blog_avatar.css(\"background-image\",this._url_css_wrap(this.$original_avatar.data(\"avatarUrl\")));this.$new_blog_avatar.css(\"background-image\",this._url_css_wrap(this.$original_avatar.data(\"avatarUrl\")))}}this.editor_type=this.$(\"#post_editor_type\").val();if(!this.$current_tumblelog.length){this.$current_tumblelog=this.$(\"#tumblelog_choices .option\").first().addClass(\"selected\")}if(this.$previous_content.length){this.previous_content=this.$previous_content.get(0)}},destroy:function(c){this.undelegateEvents();Tumblr.Editor.off(null,null,this);b(document).off(\".\"+this.cid);b(window).off(\".\"+this.cid);if(this.tag_editor){this.tag_editor.destroy()}if(this.post_plexi){this.post_plexi.destroy()}if(this.publish_on_inplaceedit){this.publish_on_inplaceedit.destroy()}if(this.post_form){this.post_form.off(\".\"+this.cid)}if(c){if(this.rich_editor){this.rich_editor.remove()}this.remove()}},reset:function(){if(this.view){this.view.destroy()}if(this.sharing){this.sharing.destroy()}},template_helpers:{detached:\"\",edit:\"\",reblog:\"\",post_tumblelog:\"\",external_url:\"\",safe_edit:\"\",one:\"\",two:\"\",thumbnail:\"\",webcam:\"\",embed_code_safe:\"\",Title:\"\",Artist:\"\",Album:\"\",upload_artwork:\"\",artwork:\"\",is_published:function(c,d){return((c&&parseInt(c.state,10)===0)&&!d)},is_new_or_published:function(c){return(_.isEmpty(c)||parseInt(c.state,10)===0)},is_password_published:function(d,c){return(d&&parseInt(d.state,10)===0&&c&&c.password_protected)},allow_answers:function(c,d){return(_.isEmpty(c)||parseInt(c.state,10)===1||parseInt(c.state,10)===2||(c.allow_answers&&!d))},allow_photo_replies:function(c,d){return(_.isEmpty(c)||parseInt(c.state,10)===1||parseInt(c.state,10)===2||(c.allow_photo_replies&&!d))},allow_share:function(c,d){return(_.isEmpty(c)||parseInt(c.state,10)===1||parseInt(c.state,10)===2||parseInt(c.state,10)===3||c.state==\"on.2\"||d)},reblog_post_types:function(f,g){var d=\"\";for(var e=0,c=f.length;e<c;e++){d+='<li><div class=\"option';if(f[e]===g){d+=\" selected\"}d+='\" data-option-value=\"';if(f[e]===\"regular\"){d+=\"text\"}else{if(f[e]===\"conversation\"){d+=\"chat\"}else{d+=f[e]}}d+='\">';if(f[e]===\"regular\"){d+=__(\"Text\")}else{if(f[e]===\"conversation\"){d+=__(\"Chat\")}else{d+=__(Tumblr.$.capitalize(f[e]))}}d+=\"</div></li>\"}return d},is_draft:function(c){return(c&&parseInt(c.state,10)===1)},draft_message:function(c){if(c&&!_.isEmpty(c)){if(!c.draft_status||c.draft_status===\"draft\"){return\"\"}else{return c.draft_status}}else{return\"\"}},get_value:function(c){if(typeof c!=\"undefined\"&&c!==null&&c!==false){return c}return\"\"}},render:function(){if(parseInt(this.model.get(\"post\").state,10)===2&&this.model.get(\"post\").publish_on){this.model.get(\"post\").state=\"on.2\"}var g=_.extend(_.clone(this.template_helpers),this.model.toJSON());var e=_.template(this.base_template);this.$el.append(e(g));this.$parent_el.append(this.$el);this.cache_selectors();switch(this.options.mode){case\"drafts\":this.set_post_option(\"1\");break;case\"post_queue\":this.set_post_option(\"2\");break}this.$post_form.attr(\"data-post-type\",this.post_type);this.$main_content.addClass(this.post_type+\"_form\");if(!this.model.get(\"edit\")&&!this.model.get(\"reblog\")){this.disable_submit()}else{this.enable_submit()}Tumblr.Editor.on(\"tinymce.change\",this.change,this);Tumblr.Editor.on(\"tinymce.init\",function(i){this.rich_editor=i.data},this);this.tag_editor=new Tumblr.TagEditor({el:\".tag_editor\"});this.post_plexi=new Tumblr.Plexi({token:\"post-plexi\"});this.post_plexi.create(this.$post_form.get(0));this.draft=(this.$post_state.val()===\"1\")?true:false;var c=b(\".advanced_post_options input:not([disabled])\");b.each(c,function(){var i=b(this);if(i!==null&&i!==undefined&&i.val()!=\"\"){i.data(\"original-value\",i.val())}});this.advanced_options_update(null);if(this.model.attributes.post){var f=(this.model.attributes.post.is_private===1)?\"private\":(this.model.attributes.post.state||0);this.set_post_option(f)}if(!this.model.get(\"edit\")||(this.model.attributes.post&&(parseInt(this.model.attributes.post.state,10)===1||parseInt(this.model.attributes.post.state,10)===2||parseInt(this.model.attributes.post.state,10)===3||this.model.attributes.post.state==\"on.2\"))){this.render_new()}if(this.model.get(\"detached\")){this._position_detached()}if(this.options.current_tumblelog){this.set_tumblelog(this.options.current_tumblelog,true)}if(this.model.get(\"edit\")&&!this.$parent_el.hasClass(\"same_user_as_last\")||this.options.reblog_as){this.set_blog_avatar(false,true);this.set_avatar_link(false,\"_new\")}else{this.set_blog_avatar();this.set_avatar_link(false,\"_new\")}if(window.history.replaceState){if(this.model.get(\"reblog\")){var h={regular:\"text\",conversation:\"chat\"};var d=(this.options.reblog_as)?this.options.post_type:\"\";d=h[d]||d;window.history.replaceState({post_id:this.model.attributes.post_id},\"Reblog\",\"/reblog/\"+this.model.attributes.reblog_id+\"/\"+this.model.attributes.reblog_key+(d?\"/\"+d:\"\"))}else{if(this.model.get(\"edit\")){window.history.replaceState({post_id:this.model.attributes.post_id},\"Edit\",\"/edit/\"+this.model.attributes.post_id)}else{window.history.replaceState({},\"New\",this.new_root+\"/new/\"+this.post_endpoint)}}}return this},render_new:function(){Tumblr.PlaceHolders.init({els:this.$(\"#post_date\"),clear_on_submit:true});Tumblr.ShareOptions.destroy_all();this.sharing=new Tumblr.ShareOptions({el:this.el,base_view:this,editor_type:this.editor_type});if(this.model.get(\"post\").type&&(parseInt(this.model.get(\"post\").state,10)===1||parseInt(this.model.get(\"post\").state,10)===2||parseInt(this.model.get(\"post\").state,10)===3||this.model.get(\"post\").state==\"on.2\")){this.sharing.set_sharing(_.extend(this.$current_tumblelog.data(),{facebookOn:this.model.get(\"post\").send_to_fbog,twitterOn:this.model.get(\"post\").send_to_twitter}))}else{this.sharing.set_sharing(this.$current_tumblelog.data())}if(this.model.get(\"post\").custom_tweet){this.sharing.custom_tweet=true}this.publish_on_inplaceedit=new Tumblr.InplaceEdit(this.$publish_on);return this},_position_detached:function(){this.show_scrollverlay();this._vertical_center_box(this.body_scrollverlay.instance,this.$el,true);var c=_.bind(this._position_detached_resize,this);this.scrollverlay_resize=function(d){this.model.trigger(\"scrollverlay:resize\",d)}.bind(this);b(window).on(\"resize.\"+this.cid,this.scrollverlay_resize);Tumblr.Editor.on(\"tinymce.autoresize\",this.scrollverlay_resize,this);Tumblr.Editor.on(\"tinymce.resize\",this.scrollverlay_resize,this);this.model.on(\"scrollverlay:resize\",this._position_detached_resize,this)},_vertical_center_box:function(e,f,c){if(c){b(e).empty()}var d=b(\"<div/>\").addClass(\"v_center_outer\").appendTo(e);var g=b(\"<div/>\").addClass(\"v_center_inner\").appendTo(d);b(f).addClass(\"v_center_el\").appendTo(g)},_position_detached_resize:function(d){var c=b(this.body_scrollverlay.instance);var f=this.$el.outerHeight(true)-c.height();if(f>0){if(d&&d.type===\"tinymce.resize\"){c.scrollTop(f)}else{if(f>0&&c.scrollTop()<40){c.scrollTop(Math.min(0.5*f,40))}}}},remove_blog:function(e){var c=this.$(\"#tumblelog_select .option\").filter(\"[data-option-value=\"+e+\"]\");c.parent(\"li\").remove();var d=this.$(\"#tumblelog_select .option\").first().data(\"option-value\");if(!this.options.current_tumblelog){this.options.current_tumblelog=d}},validate:function(c,d){if(c){this.autosave()}this.validate_question();if(this.post_type!==\"photo\"){if(!this.model.validate(this.serialize(this.$post_form))){this.enable_submit()}else{this.disable_submit()}}if(d){this.empty=false;this.model.trigger(\"change:form_change\")}},validate_question:function(){if(this.post_type!==\"quote\"&&this.post_type!==\"conversation\"){if(this.ends_with_question()){this.$additional_options_panel.slideDown(250)}else{this.$additional_options_panel.slideUp(250);this.$allow_answers.prop(\"checked\",false)}}},change:function(c){return this.validate((this.draft&&this.options.autosave),true)},is_open:function(){return(this.active&&this.$parent_el.hasClass(\"editing\"))},before_unload:function(){if(this.is_open()){return __(\"You have an unsaved post.\")}},enable_submit:function(){if(!this.is_ie9){this.$submit_btn.prop(\"disabled\",false)}else{this.$submit_btn.prop(\"disabled\",false).removeClass(\"ui_disabled\")}this.$preview_btn.removeClass(\"ui_disabled\");this.$preview.removeClass(\"disabled\")},disable_submit:function(){if(!this.is_ie9){this.$submit_btn.prop(\"disabled\",true)}else{this.$submit_btn.prop(\"disabled\",false).addClass(\"ui_disabled\")}this.$preview_btn.addClass(\"ui_disabled\");this.$preview.addClass(\"disabled\")},submit:function(h){if(this.$post_form.find('[name=\"preview_post\"]').val()){return}h.preventDefault();if(this.$submit_btn.hasClass(\"ui_disabled\")){h.stopPropagation();return false}this.active=false;this.disable_submit();if(this.draft&&this.init){this.$post_state.val(\"0\");this.init=false}if(this.sharing){if(!this.sharing.custom_tweet){this.sharing.$custom_tweet.remove()}}var c=this.page_root.split(\"/\");var g=c[1];var f=(g.toLowerCase()===\"blog\"?c[2]:b('input[name=\"t\"]').val());var d=this.serialize(this.$post_form);this.delay_loader=setTimeout(_.bind(function(){this.show_loader()},this),150);this.model.unset(\"post\");this.model.unset(\"post_tumblelog\");this.model.unset(\"user\");this.model.on(\"invalid\",function(j,i,e){if(_.isFunction(e.error)){e.error.call(this,i)}},this);this.model.save(d,{success:_.bind(function(i,e){if(e.user){Tumblr.video_seconds_remaining=e.user.video_seconds_remaining}setTimeout(_.bind(function(){clearTimeout(this.delay_loader);if(e.context_page===\"queue\"){window.location=this.page_root;return}var l=(e.post&&e.post.is_edit)&&(e.context_page!==e.post_context_page)&&(!this.model.get(\"detached\"));if(e.post_dashboard_html&&this.$previous_content.length){var n=b(b.trim(e.post_dashboard_html));var j=n.filter(\"script\");var k=n.find(\".post_wrapper\");var m=[\".post_content\",\".post_tags\",\".post_footer_links\",\".notes_outer_container\",\".permalink\",\".post_source\"];var o=\".post_info\";b.each(m,b.proxy(function(q,p){var r=this.$previous_content.find(p);if(r.length){r.replaceWith(k.find(p))}else{this.$previous_content.children(o).after(k.children(p))}o=p},this));k.after(j);this.$previous_content.find(\"iframe.spotify_player\").css(\"opacity\",0).addClass(\"iframe_reload_and_fade_in\");if(Tumblr.AudioPlayer){_.delay(function(){Tumblr.AudioPlayer.replace_placeholders(this.$previous_content,true)}.bind(this),750)}}this.hide_post_form(null,_.bind(function(){if(_.isFunction(this.destroy_preview)){this.destroy_preview()}this.hide_loader();this.render_view=new Tumblr.PostForms.RenderPost({model:this.model});var q=this.new_root;var p=true;if(this.new_root===\"\"){if(window.location.pathname.indexOf(\"/tagged/\")!==-1){p=false}else{q=\"/dashboard\"}}var r=\"before\";if(window.location.pathname.indexOf(\"/drafts\")!==-1){r=\"after\";q+=\"/drafts\"}if(!e.post.is_edit&&(b(\"#new_post\").length>0)&&p&&!e.post.is_reblog){this.render_view.load_more_posts(this.model.get(\"detached\")?this.options.animate_from:0,q,r)}if(l){this.$parent_el.slideUp(200,function(){b(this).remove()});if(b(\"#posts .post\").not(\".new_post\").length<=1){window.location=this.page_root;return}}if(!e.created_post||e.post.is_reblog||g.toLowerCase()===\"tagged\"||f.toLowerCase()!==e.post_tumblelog.name_or_id.toLowerCase()||l){_.delay(function(t){if(typeof Tumblr.Toaster===\"object\"&&typeof Tumblr.ToastKit===\"object\"){var s=Tumblr.ToastKit.notification_center_convert(t,{url:e.post_tumblelog.post_url,tumblelog:{name:e.post_tumblelog.name_or_id,url:e.post_tumblelog.url,avatar:e.post_tumblelog.avatar}});Tumblr.Toaster.add_toast(s)}},250,e.message)}},this));if(e.context_tumblelog){b.each(e.context_tumblelog.counts,function(q,s){var r=b(\"#dashboard_controls_open_blog .dashboard_\"+q);r.find(\".count\").text(s);var p=(r.attr(\"class\")||\"\").match(/(?:\\s|^)count_\\d+/gi);if(p){r.removeClass(p.join(\"\"))}r.addClass(\"count_\"+s)})}},this),250)},this),error:_.bind(function(e,i){if(!(_.isString(i)||_.isArray(i))){i=\"Something went wrong.\"}clearTimeout(this.delay_loader);this.hide_loader();this.display_errors(i);this.enable_submit()},this)})},autosave:function(){var c=this.serialize(this.$post_form);this.model.save(c,{success:_.bind(function(d){this.model.set({post_id:d.attributes.post.id},{silent:true})},this),error:_.bind(function(d,e){},this)})},blur_advanced_options:function(c){Tumblr.MultiPopover.hideAll()},handle_keydown:function(c){if(c.keyCode===27){if(this.active){if(Tumblr.MultiPopover.visible()){c.preventDefault();c.stopPropagation();Tumblr.MultiPopover.hideAll()}else{this.hide_post_form(c)}}}if(c.keyCode===9){if(!this.in_view(this.in_focus())){c.preventDefault();this.$main_content.find('input[type=\"text\"], textarea').first().focus()}}},in_focus:function(){return b(document.activeElement)},in_view:function(c){return(this.$post_form.has(c).length)?true:false},tinymce_esc:function(c){if(!_.isUndefined(Tumblr.Mention)&&(Tumblr.Mention.is_active===true)){return}Tumblr.Editor.off(\"keydown_esc\",null,this);this.hide_post_form(c)},show_messages:function(d,f){var g=this.$(\".\"+d);var c=g.get(0);if(!c){return}g.empty();if(typeof f===\"string\"){f=[f]}_.each(f,function(i){var h=b(\"<li/>\",{text:i});g.append(h)});g.show();var e=new Tumblr.Fx(c,\"opacity\",{from:0,to:1,duration:250})},hide_messages:function(c,d){var e=this.$(\".\"+c);if(!e.length){return}e.empty().hide()},display_errors:function(c){this.show_messages(\"errors\",c)},hide_errors:function(){this.hide_messages(\"errors\")},show_info:function(c){this.show_messages(\"info\",c)},hide_info:function(){this.hide_messages(\"info\")},advanced_options_update:function(f){if(f&&f.keyCode===13){f.preventDefault();Tumblr.MultiPopover.hideAll()}var d=0;var c=b(\".advanced_post_options input:not([disabled])\");var g=b(\".cog .badge\");b.each(c,function(){var e=b(this);if(e.val()!==\"\"&&(e.val()!==e.data(\"original-value\"))){if(e.is(\":checkbox\")){if(!e.prop(\"checked\")){return}}++d}});if(d>0){g.attr(\"data-count\",d);g.addClass(\"active\").html(\"<span>\"+d+\"</span>\")}else{g.removeClass(\"active\").html(\"\")}},serialize:function(e,f){var d={};var c=e.serializeArray();b.each(c,function(){if(d[this.name]!==undefined){if(!d[this.name].push){d[this.name]=[d[this.name]]}d[this.name].push(this.value||\"\")}else{d[this.name]=this.value||\"\"}});return(f)?JSON.stringify(d):d},enable_keys:function(){b(document).on(\"keydown.\"+this.cid,_.bind(this.handle_keydown,this));Tumblr.Editor.on(\"tinymce.keydown_esc\",this.tinymce_esc,this)},show_post_form:function(c){Tumblr.KeyCommands.suspend();if(this.queue){this.$parent_el.parent().addClass(\"editing\")}this.active=true;this.$parent_el.addClass(\"editing\");this.show_plexi();this.render_view();Tumblr.PostForms.hide_spinner();if(this.sharing){this.sharing.set_type(c);this.sharing.change(null)}if(this.model.get(\"detached\")){this.model.trigger(\"post:form:animation:start\");this.$post_form.show().addClass(\"active\");setTimeout(_.bind(function(){this.$el.addClass(\"active\");this.enable_keys();if(this.scrollverlay_resize){this.scrollverlay_resize()}if(tinyMCE){if(this.rich_editor&&this.rich_editor.plugins.autoresize){this.rich_editor.plugins.autoresize.autoresize_max_max_height=this.rich_editor.plugins.autoresize.autoresize_max_height;this._tinymce_smart_max_height=_.bind(function(){var d=this.rich_editor;var e=b(window).height()-this.$el.height()+b(d.getContentAreaContainer()).height()-150;d.plugins.autoresize.autoresize_max_height=Math.max(d.plugins.autoresize.autoresize_min_height,Math.min(e,d.plugins.autoresize.autoresize_max_max_height))},this);b(window).on(\"resize.\"+this.cid,this._tinymce_smart_max_height);this._tinymce_smart_max_height()}tinymce.execCommand(\"mceAutoResize\")}},this),250)}else{this._fade_out_content(this.$previous_content,_.bind(function(){this.$previous_content.addClass(\"hide\");this._animate_in_post_form(_.bind(this.enable_keys,this))},this))}this.$(\"label.optional\").each(function(e,f){var d=b(f);var g=b(\"#\"+d.attr(\"for\"));if(g.val()&&!g.hasClass(\"placeholder\")){g.removeClass(\"optional\");d.hide()}});this.model.trigger(\"post:form:show\")},hide_post_form:function(f,g){if(f){f.preventDefault();if(!this.empty){var d=window.confirm(__(\"Cancel editing this post? All changes will be lost.\"));if(d===false){return}}}if(Tumblr.PostForms.redirect_to){window.location.assign(Tumblr.PostForms.redirect_to);return}if(this.scroll_fence){b(window).off(\"scroll\",this.scroll_fence)}this._animate_out_post_form(_.bind(function(){setTimeout(_.bind(function(){this.get_plexi().hide()},this),200);if(this.previous_content){this._fade_in_content(this.$previous_content,_.bind(c,this));this.$previous_content.find(\".iframe_reload_and_fade_in\").each(function(e,h){b(h).one(\"load\",function(i){b(this).removeClass(\"iframe_reload_and_fade_in\").animate({opacity:1})}).attr(\"src\",b(h).attr(\"src\"))})}else{c.apply(this)}},this));if(typeof g===\"function\"){setTimeout(_.bind(function(){g.call(this)},this),450)}function c(){this.$body.removeClass(\"editing\");this.$parent_el.removeClass(\"editing\");this.reset();this.active=false;this.destroy(true);this.model.trigger(\"post:form:hide\");_.isFunction(window.getSelection)&&window.getSelection().removeAllRanges()}Tumblr.KeyCommands.resume();if(this.queue){this.$parent_el.parent().removeClass(\"editing\")}if(window.history.replaceState){if(!this.page_root){this.page_root=(b(\"body\").data(\"page-root\"))||\"\"}window.history.replaceState({},\"Tumblr\",this.page_root)}},_animate_out_post_form:function(g){var d=b.Deferred();var c=this.$el.outerHeight();this.$post_form.removeClass(\"active\");this.$parent_el.removeClass(\"active\");if(this.options.reblog_as){this.model.set({detached:true},{silent:true});this.setElement(\".post_form_wrapper.detached\")}this.set_blog_avatar(this.$avatar);this.set_avatar_link(this.$avatar);if(this.model.get(\"edit\")&&this.$parent_el.hasClass(\"same_user_as_last\")){this.$sub_avatar.removeClass(\"show_sub_avatar\")}if(this.options.adjust_offset){b(\"html, body\").animate({scrollTop:this.$parent_el.offset().top-20},250)}var f=_.bind(function(){this.$previous_content.removeClass(\"hide\");this.$el.hide();this.$el.css({height:\"auto\"});if(this.$avatar.is(\".flat\")){this.$avatar.removeClass(\"use_blog_avatar animating\");this.$blog_avatar.remove();this.$new_blog_avatar.remove()}else{this.$avatar.css(\"background-image\",\"url(\"+this.$avatar.data(\"avatarUrl\")+\")\");this.$avatar.removeClass(\"use_blog_avatar animating\").empty()}this.$sub_avatar.removeClass(\"use_sub_avatar\");d.resolve();this.model.trigger(\"post:form:animation:hide\");if(typeof g===\"function\"){g.call(this)}},this);if(this.model.get(\"detached\")){this.hide_scrollverlay();f();return d.promise()}var e=new Tumblr.Fx(this.el,\"height\",{from:c,to:this.initialHeight,delay:200,duration:350,easing:\"easeInQuint\",callback:f});return d.promise()},_animate_in_post_form:function(e){this.model.trigger(\"post:form:animation:start\");this.$post_form.show().removeClass(\"active\");var c=(this.options.reblog_as)?this.$el:this.$post_form;if(this.options.reblog_as){c.css({height:this.initialHeight+\"px\",overflow:\"hidden\"});b(\".post_form_wrapper div.dummy\").remove();setTimeout(_.bind(function(){d.apply(this)},this),200)}else{d.apply(this)}function d(){var f=this.$post_form.addClass(\"measure_styles\").outerHeight();this.$post_form.removeClass(\"measure_styles\");if(!this.options.reblog_as){c.css({height:this.initialHeight+\"px\",overflow:\"hidden\"})}if(this.options.adjust_offset){b(\"html, body\").animate({scrollTop:this.$parent_el.offset().top-20},250)}if(tinyMCE){if(this.rich_editor&&this.rich_editor.plugins.autoresize){this.rich_editor.plugins.autoresize.autoresize_max_max_height=this.rich_editor.plugins.autoresize.autoresize_max_height;this._tinymce_smart_max_height=_.bind(function(){var h=this.rich_editor;var i=b(window).height()-this.$el.height()+b(h.getContentAreaContainer()).height()-150;h.plugins.autoresize.autoresize_max_height=Math.max(h.plugins.autoresize.autoresize_min_height,Math.min(i,h.plugins.autoresize.autoresize_max_max_height))},this);b(window).on(\"resize.\"+this.cid,this._tinymce_smart_max_height)}tinymce.execCommand(\"mceAutoResize\")}this.$parent_el.addClass(\"editing\");var g=new Tumblr.Fx(c.get(0),\"height\",{from:this.initialHeight,to:f,duration:350,easing:(this.initialHeight<f)?\"easeOutBack\":\"easeInSine\",callback:_.bind(function(){this.$previous_content.addClass(\"hide\");c.css({height:\"auto\",overflow:\"visible\"});this.$post_form.addClass(\"active\");this.$parent_el.addClass(\"active\");this.model.trigger(\"post:form:animation:done\");if(tinyMCE){if(this._tinymce_smart_max_height){this._tinymce_smart_max_height()}tinymce.execCommand(\"mceAutoResize\")}if(typeof e===\"function\"){e.call(this)}},this)})}},_fade_in_content:function(d,f){var e=d.get(0);if(e){var c=new Tumblr.Fx(e,\"opacity\",{from:0,to:1,delay:15,duration:450,easing:\"linear\",cssTransition:true,cssEasing:\"ease\",callback:_.bind(function(){if(typeof f===\"function\"){f.call(this)}},this)})}},_fade_out_content:function(c,f){var e=c.get(0);if(e){var d=new Tumblr.Fx(e,\"opacity\",{from:1,to:0,duration:350,easing:\"linear\",cssTransition:true,cssEasing:\"ease\",callback:_.bind(function(){if(typeof f===\"function\"){f.call(this)}},this)})}else{if(typeof f===\"function\"){f.call(this)}}},show_loader:function(){this.$loader.show();this.$(\"button.close\").hide();setTimeout(_.bind(function(){this.$loader.addClass(\"active\")},this),10);this.spinner.spin(this.$(\".loader\").get(0))},hide_loader:function(){this.$(\"button.close\").show();this.$loader.removeClass(\"active\");this.spinner.stop();this.$loader.hide()},show_tumblelog_choice:function(g){g.preventDefault();var c=b(g.target);var d=b(\"#tumblelog_choices\");var f=d.get(0);var h=b(\".nipple\",d);this.adjust_nipple(c,h);if(this.tumblelog_popover){this.tumblelog_popover.show()}else{this.tumblelog_popover=new Tumblr.MultiPopover(f,{token:\"post-plexi\",direction:\"north\",on_show:b.proxy(this.on_show_popover,this),on_hide:b.proxy(this.on_hide_popover,this)}).show()}},show_reblog_types:function(g){g.preventDefault();var c=b(g.target);var d=b(\"#reblog_select\");var f=d.get(0);if(this.reblog_popover){this.reblog_popover.show()}else{this.reblog_popover=new Tumblr.MultiPopover(f,{token:\"post-plexi\",direction:\"north\",on_show:b.proxy(this.on_show_popover,this),on_hide:b.proxy(this.on_hide_popover,this)}).show()}},adjust_nipple:function(d,e){var c=d;var g=e;var f=c.outerWidth();g.css({left:f+11+\"px\"})},show_advanced_options:function(c){this.$advanced_post_options=this.$(\".advanced_post_options\");if(this.advanced_popover){this.advanced_popover.show()}else{this.advanced_popover=new Tumblr.MultiPopover(this.$advanced_post_options.get(0),{token:\"post-plexi\",direction:\"north\",on_show:b.proxy(this.on_show_popover,this),on_hide:b.proxy(function(){this.$advanced_post_options.removeClass(\"active\");this.on_hide_popover.apply(this,arguments)},this)}).show()}},show_post_options:function(d){var c=b(d.currentTarget);this.$popover=this.$(\"#post_options\");this.$post_button=c.parents(\".split\");this.$popover.addClass(\"active\");this.$post_button.addClass(\"active\");this.post_options=new Tumblr.MultiPopover(this.$popover.get(0),{token:\"post-plexi\",direction:\"auto\",on_show:b.proxy(this.on_show_popover,this),on_hide:b.proxy(function(){this.hide_post_options.apply(this,arguments);this.on_hide_popover.apply(this,arguments)},this)}).show()},hide_post_options:function(d){var c=this.$(\"#post_options .option.selected\").data(\"option-value\");if(c===\"on.2\"){if(this.$publish_on.val()===\"\"){this.set_post_option(this.$(\"#post_options .queue .option\"))}}else{this.$publish_on.val(\"\")}this.$post_button.removeClass(\"active\");this.$popover.removeClass(\"active\")},allow_answers:function(){if(!this.$allow_answers.prop(\"checked\")){this.model.unset(\"allow_answers\")}},tumblelog_menu_nipple:function(d){var c=this.$(\"#tumblelog_choices .nipple\");if(d.type===\"mouseover\"){c.addClass(\"hover\")}else{c.removeClass(\"hover\")}},select_tumblelog:function(c){c.preventDefault();return this.set_tumblelog(b(c.currentTarget))},set_tumblelog:function(d,g){var c=this.$(\"#tumblelog_select .option\");var f=this.$current_tumblelog=_.isObject(d)?d:c.filter(\"[data-option-value=\"+d+\"]\");var i=this.$(\"#channel_id\");var h=f.attr(\"data-option-value\");var e=this.$(\"#tumblelog_select .txt\");this.sharing.set_sharing(f.data());c.removeClass(\"selected\");f.addClass(\"selected\");i.val(h);e.text(f.data(\"channel-name\")||f.text());if(!g){this.set_blog_avatar(f);this.set_avatar_link(f,\"_new\")}if(f.data(\"isPasswordProtected\")){this.$post_form.addClass(\"is_password_protected\")}else{this.$post_form.removeClass(\"is_password_protected\")}if(this.tumblelog_popover){this.tumblelog_popover.hide()}},select_reblog_type:function(j){j.preventDefault();var g=b(j.currentTarget);var h=g.hasClass(\"selected\");if(!this.empty&&!h){var f=window.confirm(__(\"Are you sure you want to change post type? All changes will be lost.\"));if(f===false){return}}var c=this.$(\"#reblog_select .option\");var i=g.data(\"option-value\");var d=this.$(\"#reblog_as .reblog_select\");d.attr(\"data-type\",i);c.removeClass(\"selected\");g.addClass(\"selected\");this.reblog_popover.hide();if(!h){this._fade_out_content(this.$post_form,_.bind(function(){var l=b(\".post_form_wrapper_inner\");var k=l.height();l.empty().append(b('<div class=\"dummy\"/>').height(k));if(this.destroy_preview){this.destroy_preview()}var e=this.$current_tumblelog.attr(\"data-option-value\");Tumblr.PostForms.change_reblog_type(i,this.page_root,l,k,e)},this))}},set_blog_avatar:function(g,c){g=g||this.$current_tumblelog;var f=g.data(\"useChannelAvatar\");var e=g.data(\"useSubAvatar\");var h=this._get_background(this.$new_blog_avatar);var d=f?g.data(\"avatarUrl\"):g.data(\"userAvatarUrl\");if(!c&&h!=d){this.$avatar.addClass(\"instant\").removeClass(\"animating\")}else{this.$avatar.addClass(\"instant\").addClass(\"animating\")}this.$blog_avatar.css(\"background-image\",this.$new_blog_avatar.css(\"background-image\"));this.$new_blog_avatar.css(\"background-image\",this._url_css_wrap(d));if(!c&&h!=d){this.$avatar.removeClass(\"instant\").addClass(\"animating\")}else{this.$avatar.removeClass(\"instant\")}if(c){this.$sub_avatar.addClass(\"instant\")}else{this.$sub_avatar.removeClass(\"instant\")}if(e){this.$sub_avatar.addClass(\"show_sub_avatar\")}else{this.$sub_avatar.removeClass(\"show_sub_avatar\")}},set_avatar_link:function(d,e){if(!this.$avatar.is(\"a\")){return}d=d||this.$current_tumblelog;var c=typeof d===\"string\"?d:d.data(\"blogUrl\");this.$avatar.attr({href:c,target:e||\"\"})},_get_background:function(d){var c=d.css(\"background-image\");return c.replace(\"url(\",\"\").replace(\")\",\"\").replace(/\\\"/gi,\"\")},_url_css_wrap:function(c){if(!c){return\"none\"}return\"url('\"+encodeURI(c)+\"')\"},select_post_option:function(c){return this.set_post_option(c.currentTarget)},set_post_option:function(f){var c=this.$(\"#post_options .option\");var g=_.isObject(f)?b(f):c.filter('[data-option-value~=\"'+f+'\"]');var i=this.$(\"#post_state\");var h=g.attr(\"data-option-value\");var d=g.data(\"button-text\");var e=this.$(\"#create_post .txt\");if(h===undefined){return}c.removeClass(\"selected\");g.addClass(\"selected\");i.val(h);this.init=false;if(h!=\"1\"){this.draft=false;this.$draft_status_option.addClass(\"hidden\");this.$draft_status.prop(\"disabled\",true)}else{this.draft=true;this.$draft_status_option.removeClass(\"hidden\");this.$draft_status.prop(\"disabled\",false)}if(h!==\"on.2\"){this.hide_publish_on();if(this.post_options){this.post_options.hide()}setTimeout(function(){e.text(d)},100)}else{e.text(d)}if(this.sharing){if(h===\"private\"){this.sharing.clear_all()}else{this.sharing.set_sharing(this.$current_tumblelog.data())}}this.advanced_options_update(null)},preview_on_blog:function(f){if(this.$preview.hasClass(\"disabled\")){return false}this.$post_form.attr({method:\"post\",target:\"_blank\",action:this.$current_tumblelog.data(\"blogUrl\")+this.preview_endpoint});var d={};d.form_key=Tumblr.PostForms.form_key;d.preview_post=true;if(this.post){d.edit_post_id=this.post.id}var c=b();b.each(d,function(e,g){c=b(\"<input/>\").attr({name:e,value:g,type:\"hidden\"}).add(c)});c.appendTo(this.$post_form);this.$post_form.submit();this.$post_form.attr({method:\"\",target:\"\",action:\"\"});c.remove();Tumblr.MultiPopover.hideAll()},show_plexi:function(){if(Tumblr.Plexi.findByToken(\"body-plexi\")){this.body_plexi=Tumblr.Plexi.findByToken(\"body-plexi\")}if(!this.body_plexi){this.body_plexi=new Tumblr.Plexi({token:\"body-plexi\"});this.body_plexi.create(document.body,{insertAt:\"top\",cssClass:\"color\"})}this.body_plexi.show()},get_plexi:function(){return Tumblr.Plexi.findByToken(\"body-plexi\")},show_scrollverlay:function(){if(Tumblr.Plexi.findByToken(\"body-scrollverlay\")){this.body_scrollverlay=Tumblr.Plexi.findByToken(\"body-scrollverlay\")}if(!this.body_scrollverlay){this.body_scrollverlay=new Tumblr.Plexi({token:\"body-scrollverlay\"});this.body_scrollverlay.create(document.body,{insertAt:\"top\",cssClass:\"scrollverlay\"})}this.body_scrollverlay.show();b(\"body\").addClass(\"scrollverlay_active\")},hide_scrollverlay:function(){if(Tumblr.Plexi.findByToken(\"body-scrollverlay\")){Tumblr.Plexi.findByToken(\"body-scrollverlay\").hide();b(window).off(\"resize.\"+this.cid);Tumblr.Editor.off(\"autoresize\",null,this);Tumblr.Editor.off(\"resize\",null,this)}b(\"body\").removeClass(\"scrollverlay_active\")},scrollverlay_content_width:function(){if(!this.body_scrollverlay){return 0}return b(this.body_scrollverlay.instance).children().outerWidth()||0},scrollverlay_content_height:function(){if(!this.body_scrollverlay){return 0}return b(this.body_scrollverlay.instance).children().outerHeight()||0},relay_scroll_events:function(h,g,e){var d=b(h);var f=b(g);var c=function(i){f.scrollTop(d.scrollTop());f.scrollLeft(d.scrollLeft())};d.on(\"scroll.\"+this.cid,c).data(\"scrollrelay\",c);if(e){d.scrollTop(f.scrollTop());d.scrollLeft(f.scrollLeft())}},disable_relay_scroll_events:function(f,e){var d=b(f);var c=d.data(\"scrollrelay\");d.off(\"scroll\",c)},on_show_popover:function(d){if(this.body_scrollverlay){var e=d.$popover.height()+d.$popover.position().top+d.$container.position().top-this.$el.height()+10;var c=parseInt(this.$el.css(\"border-top-width\"),10);if(e>c){this.$el.css(\"border-bottom-width\",e)}this.plexi_stretcher=b(\"<div/>\").css({width:this.scrollverlay_content_width(),height:this.scrollverlay_content_height()});b(d.plexi.instance).addClass(\"scrollverlay layered\").empty().append(this.plexi_stretcher);this.relay_scroll_events(d.plexi.instance,this.body_scrollverlay.instance,true)}},on_hide_popover:function(d){if(this.body_scrollverlay){var c=parseInt(this.$el.css(\"border-top-width\"),10);this.$el.css(\"border-bottom-width\",c);b(d.plexi.instance).removeClass(\"scrollverlay layered\").empty();delete this.plexi_stretcher;this.disable_relay_scroll_events(d.plexi.instance,this.body_scrollverlay.instance)}},hide_publish_on:function(){if(!this.$inline_edit||!this.$inline_edit.hasClass(\"set\")){return}this.$inline_edit.removeClass(\"set\");var c=this.$inline_edit_wrapper.get(0);this.$inline_edit_wrapper.removeClass(\"editing\");var d=new Tumblr.Fx(c,\"margin-top\",{from:0,to:this.inline_edit_original,duration:100,cssTransition:true,cssEasing:\"ease\"})},show_publish_on:function(f){this.$inline_edit=b(f.currentTarget);if(this.$inline_edit.hasClass(\"set\")){return}this.$inline_edit.addClass(\"set\");this.$inline_edit_wrapper=b(\".inline_edit\",this.$inline_edit);var c=this.$inline_edit_wrapper.get(0);this.$inline_edit_wrapper.addClass(\"editing\");this.inline_edit_original=parseInt(this.$inline_edit_wrapper.css(\"margin-top\"),10);if(this.$publish_on.val()===\"\"){this.$publish_on.val(this.$publish_on.data(\"original-value\"))}var d=new Tumblr.Fx(c,\"margin-top\",{from:this.inline_edit_original,to:0,duration:250,cssTransition:true,cssEasing:\"cubic-bezier(0.445, 0.050, 0.550, 0.950)\"})},sluggify:function(d){var c=b(d.currentTarget);var f=c.val().toLowerCase().replace(/[^\\-a-z0-9]/g,\"-\").replace(/--+/g,\"-\").replace(/^-+|-+$/g,\"\");c.val(f)},source_url:function(f){var d=b(f.currentTarget);var g=d.val();var c=this.model.undup_protocol(d.val());d.val(this.model.add_protocol(c))},ends_with_question:function(){if(b(\"#post_one\").val()&&this.ends_with(Tumblr.$.strip_tags(b(\"#post_one\").val()).replace(/[^a-z0-9\\?]/ig,\"\"),\"?\")){return true}if(b(\"#post_two\").val()&&this.ends_with(Tumblr.$.strip_tags(b(\"#post_two\").val()).replace(/[^a-z0-9\\?]/ig,\"\"),\"?\")){return true}if(b(\"#post_three\").val()&&this.ends_with(Tumblr.$.strip_tags(b(\"#post_three\").val()).replace(/[^a-z0-9\\?]/ig,\"\"),\"?\")){return true}if(tinyMCE){if(tinyMCE.get(\"post_one\")&&tinyMCE.get(\"post_one\").getContent()&&this.ends_with(Tumblr.$.strip_tags(tinyMCE.get(\"post_one\").getContent()).replace(/[^a-z0-9\\?]/ig,\"\"),\"?\")){return true}if(tinyMCE.get(\"post_two\")&&tinyMCE.get(\"post_two\").getContent()&&this.ends_with(Tumblr.$.strip_tags(tinyMCE.get(\"post_two\").getContent()).replace(/[^a-z0-9\\?]/ig,\"\"),\"?\")){return true}if(tinyMCE.get(\"post_three\")&&tinyMCE.get(\"post_three\").getContent()&&this.ends_with(Tumblr.$.strip_tags(tinyMCE.get(\"post_three\").getContent()).replace(/[^a-z0-9\\?]/ig,\"\"),\"?\")){return true}}return false},ends_with:function(d,c){return d.indexOf(c,d.length-c.length)!==-1}})})(jQuery,Tumblr);\n(function(b,a){Tumblr.PostForms.Regular=Tumblr.PostForms.BaseView.extend({events:function(){return _.defaults({\"click .editor_button.photo\":\"__image_upload\",\"click .file_upload_overlay .cancel\":\"dismiss_file_upload_overlay\"},Tumblr.PostForms.BaseView.prototype.events)},initialize:function(c){this.options=c||{};this.constructor.__super__.initialize.call(this,this.options);this.$sub_template=b.trim(b(\"#regular_subtemplate\").html());this.$upload_list_template=b.trim(b(\"#upload_list_subtemplate\").html());this.model.on(\"change:upload_progress\",this.upload_progress,this);this.model.on(\"change:upload_complete\",this.upload_complete,this);this.model.on(\"change:upload_file_error\",this.file_errors,this);this.model.on(\"change:upload_failed\",this.upload_failed,this);this.model.on(\"change:send_file\",this.display_file_list,this);this.$post_form.on(\"click\",\"#file_list .cancel\",_.bind(this.dismiss_upload,this))},render_view:function(d){var c=_.template(this.$sub_template);this.$post_content_type.html(c(_.extend(_.clone(this.template_helpers),this.model.toJSON())));this.editor();this.$regular_image_upload=b(\"#regular_image_upload\");this.$file_upload_overlay=this.$(\".file_upload_overlay\");this.post_form=this.$post_form;this.$shim=b(\".textarea_shim\");this.last_enter=this.post_form.get(0);this.model.init_uploader(this.$regular_image_upload);this.post_form_events={dragenter:_.bind(this.__drag_enter,this),dragleave:_.bind(this.__drag_leave,this),dragover:_.bind(this.__drag_over,this),drop:_.bind(this.__drop,this)};Tumblr.PlaceHolders.init({els:this.$(\"#post_one\"),clear_on_submit:true});if(tinymce&&this.editor_type===\"rich\"){Tumblr.Editor.on(\"tinymce.image_upload.click\",this.__image_upload,this);b.each(this.post_form_events,b.proxy(function(e,f){this.post_form.on(e+\".\"+this.cid,f)},this))}else{this.$(\"#post_two\").autoexpand().resizeanchor()}if(typeof d===\"function\"){d()}return this},__drag_enter:function(c){c.preventDefault();this.$shim.addClass(\"active\");this.last_enter=c.target},__drag_leave:function(c){c.preventDefault();if(c.target===this.last_enter||!this.last_enter){this.$shim.removeClass(\"active\")}},__drop:function(c){this.$shim.removeClass(\"active\")},__drag_over:function(c){c.preventDefault();c.stopPropagation()},__image_upload:function(c){if(c){c.preventDefault()}if(this.is_ie9){this.$file_upload_overlay.addClass(\"active\").removeClass(\"offscreen\")}else{b(\"#regular_image_upload\").trigger(\"click\")}},file_errors:function(c){this.display_errors(c)},upload_complete:function(e){var g=e.response[0].url;var c=this.editor_type;var f=this.editor_id;if((c===\"rich\"||c===\"tinymce\")&&tinyMCE&&(ed=tinyMCE.get(\"post_two\"))){var d=new Image();b(d).one(\"load\",_.bind(function(h){b(d).off();ed.execCommand(\"mceInsertContent\",false,'<img src=\"'+g+'\" />');ed.execCommand(\"mceInsertContent\",false,\"<p>\");setTimeout(function(){ed.execCommand(\"mceAutoResize\")},100);this.destroy_upload()},this)).one(\"error\",function(h){b(d).off()});d.src=g}else{if(c===\"markdown\"){Tumblr.Editor.insertTag(f,\"![](\"+g+\")\");this.destroy_upload()}else{Tumblr.Editor.insertTag(f,'<img src=\"'+g+'\">');this.destroy_upload()}}},upload_failed:function(c){setTimeout(_.bind(function(){this.destroy_upload();this.display_errors({error:c})},this),1000)},dismiss_upload:function(c){if(c){c.preventDefault()}this.model.cancel_upload();this.destroy_upload()},dismiss_file_upload_overlay:function(c){if(c){c.preventDefault()}this.$file_upload_overlay.addClass(\"offscreen\").removeClass(\"active\")},destroy_upload:function(){b(\".upload_container\").remove()},display_file_list:function(f,c){this.dismiss_file_upload_overlay();this.hide_errors();var d={name:f[0].name,prettySize:Tumblr.$.format_file_size(f[0].size),className:c};var e=_.template(this.$upload_list_template);this.$main_content.after(e(_.extend(_.clone(this.template_helpers),d)));b(\".upload_container\").addClass(\"bottom\");this.$progress_bar=b(\".upload_container .progress_bar\");this.$processing=b(\".upload_container .processing\")},upload_progress:function(c){this.$progress_bar.css({width:c+\"%\"});if(c>99){this.$processing.addClass(\"active\")}},editor:function(){var c=b.extend({},Tumblr.PostForms.editor_defaults,{layout:\"bold,italic,strikethrough,link,unlink,numlist,bullist,pagebreak,image,image_upload,blockquote,code\",plugins:\"autoresize,safari,pagebreak,ajax_forms,image_upload,tumblr_popovers,mention,paste\",focus:(this.model.get(\"edit\")||this.model.get(\"reblog\"))?\"focus_end\":true,type:this.editor_type});Tumblr.Editor.render(this.editor_id,c)}})})(jQuery,Tumblr);\n(function(b,a){Tumblr.PostForms.Note=Tumblr.PostForms.BaseView.extend({events:function(){return _.defaults({\"click .editor_button.photo\":\"__image_upload\",\"click .file_upload_overlay .cancel\":\"dismiss_file_upload_overlay\"},Tumblr.PostForms.BaseView.prototype.events)},initialize:function(c){this.options=c||{};this.post=this.model.get(\"post\");this.editor_id=this.post.is_reblog?\"post_three\":\"post_two\";this.constructor.__super__.initialize.call(this,this.options);this.$original_sub_template=b.trim(b(\"#note_original_subtemplate\").html());this.$reblog_sub_template=b.trim(b(\"#note_reblog_subtemplate\").html());this.$upload_list_template=b.trim(b(\"#upload_list_subtemplate\").html());this.model.on(\"change:upload_progress\",this.upload_progress,this);this.model.on(\"change:upload_complete\",this.upload_complete,this);this.model.on(\"change:upload_file_error\",this.file_errors,this);this.model.on(\"change:upload_failed\",this.upload_failed,this);this.model.on(\"change:send_file\",this.display_file_list,this);this.$post_form.on(\"click\",\"#file_list .cancel\",_.bind(this.dismiss_upload,this))},render_view:function(d){if(this.post.is_reblog){var c=_.template(this.$reblog_sub_template)}else{var c=_.template(this.$original_sub_template)}this.$post_content_type.html(c(_.extend(_.clone(this.template_helpers),this.model.toJSON())));this.editor();this.$regular_image_upload=b(\"#regular_image_upload\");this.$file_upload_overlay=this.$(\".file_upload_overlay\");this.post_form=this.$post_form;this.$shim=b(\".textarea_shim\");this.last_enter=this.post_form.get(0);this.model.init_uploader(this.$regular_image_upload);this.post_form_events={dragenter:_.bind(this.__drag_enter,this),dragleave:_.bind(this.__drag_leave,this),dragover:_.bind(this.__drag_over,this),drop:_.bind(this.__drop,this)};Tumblr.PlaceHolders.init({els:this.$(\"#post_one\"),clear_on_submit:true});if(tinymce&&this.editor_type===\"rich\"){Tumblr.Editor.on(\"tinymce.image_upload.click\",this.__image_upload,this);b.each(this.post_form_events,b.proxy(function(e,f){this.post_form.on(e+\".\"+this.cid,f)},this))}else{this.$(\"#\"+this.editor_id).autoexpand().resizeanchor()}if(typeof d===\"function\"){d()}if(this.post.is_reblog&&b(\"#note_reblog_post_two\")){b(\"#note_reblog_post_two\").html(this.post.safe_two)}return this},__drag_enter:function(c){c.preventDefault();this.$shim.addClass(\"active\");this.last_enter=c.target},__drag_leave:function(c){c.preventDefault();if(c.target===this.last_enter||!this.last_enter){this.$shim.removeClass(\"active\")}},__drop:function(c){this.$shim.removeClass(\"active\")},__drag_over:function(c){c.preventDefault();c.stopPropagation()},__image_upload:function(c){if(c){c.preventDefault()}if(this.is_ie9){this.$file_upload_overlay.addClass(\"active\").removeClass(\"offscreen\")}else{b(\"#regular_image_upload\").trigger(\"click\")}},file_errors:function(c){this.display_errors(c)},upload_complete:function(e){var g=e.response[0].url;var c=this.editor_type;var f=this.editor_id;if((c===\"rich\"||c===\"tinymce\")&&tinyMCE&&(ed=tinyMCE.get(f))){var d=new Image();b(d).on(\"load\",_.bind(function(h){ed.execCommand(\"mceInsertContent\",false,'<img src=\"'+g+'\" />');ed.execCommand(\"mceInsertContent\",false,\"<p>\");setTimeout(function(){ed.execCommand(\"mceAutoResize\")},100);this.destroy_upload()},this));d.src=g}else{if(c===\"markdown\"){Tumblr.Editor.insertTag(f,\"![](\"+g+\")\");this.destroy_upload()}else{Tumblr.Editor.insertTag(f,'<img src=\"'+g+'\">');this.destroy_upload()}}},upload_failed:function(c){setTimeout(_.bind(function(){this.destroy_upload();this.display_errors({error:c})},this),1000)},dismiss_upload:function(c){if(c){c.preventDefault()}this.model.cancel_upload();this.destroy_upload()},dismiss_file_upload_overlay:function(c){if(c){c.preventDefault()}this.$file_upload_overlay.addClass(\"offscreen\").removeClass(\"active\")},destroy_upload:function(){b(\".upload_container\").remove()},display_file_list:function(f,c){this.dismiss_file_upload_overlay();this.hide_errors();var d={name:f[0].name,prettySize:Tumblr.$.format_file_size(f[0].size),className:c};var e=_.template(this.$upload_list_template);this.$main_content.after(e(_.extend(_.clone(this.template_helpers),d)));b(\".upload_container\").addClass(\"bottom\");this.$progress_bar=b(\".upload_container .progress_bar\");this.$processing=b(\".upload_container .processing\")},upload_progress:function(c){this.$progress_bar.css({width:c+\"%\"});if(c>99){this.$processing.addClass(\"active\")}},editor:function(){var c=b.extend({},Tumblr.PostForms.editor_defaults,{layout:\"bold,italic,strikethrough,link,unlink,numlist,bullist,pagebreak,image,image_upload,blockquote,code\",plugins:\"autoresize,safari,pagebreak,ajax_forms,image_upload,tumblr_popovers,mention\",focus:(this.model.get(\"edit\")||this.model.get(\"reblog\"))?\"focus_end\":true,type:this.editor_type});Tumblr.Editor.render(this.editor_id,c)}})})(jQuery,Tumblr);\n(function(b,a){Tumblr.PostForms.Quote=Tumblr.PostForms.BaseView.extend({events:function(){return _.defaults({\"click .label\":\"placeholder\",\"click .optional\":\"placeholder\",\"focus #post_two\":\"editor_focus\"},Tumblr.PostForms.BaseView.prototype.events)},render_view:function(f){var d=b(\"#quote_subtemplate\").html();var e=_.template(d);this.$post_content_type.html(e(_.extend(_.clone(this.template_helpers),this.model.toJSON())));this.editor();Tumblr.Editor.on(\"tinymce.focus\",this.editor_focus,this);var c=this.$(\"#post_one\");c.autoexpand().resizeanchor();Tumblr.PlaceHolders.init({els:c,clear_on_submit:true});if(this.editor_type!==\"rich\"){this.$(\"#post_two\").autoexpand().resizeanchor()}if(typeof f===\"function\"){f()}return this},editor:function(){var c=b.extend({},Tumblr.PostForms.editor_defaults,{type:this.editor_type,min_height:70,focus:(this.model.get(\"edit\")||this.model.get(\"reblog\"))?\"focus_end\":true});Tumblr.Editor.render(this.editor_id,c)},editor_focus:function(c){this.placeholder(null,this.$(\".inset_label .label\"))},placeholder:function(d,c){if(d){d.preventDefault();c=b(d.currentTarget);if(c.is(\"label.optional\")){c=c.prevAll(\".label\")}if(this.editor_type!==\"rich\"){this.$(\"#post_two\").focus()}}c.fadeOut(250);c.nextAll(\".optional\").fadeOut(250);if(tinyMCE&&this.editor_type===\"rich\"){this.$(\"#post_two_ifr\").animate({\"min-height\":100},200);tinymce.execCommand(\"mceFocus\",false,c.data(\"for\"))}}})})(jQuery,Tumblr);\n(function(b,a){Tumblr.PostForms.Link=Tumblr.PostForms.BaseView.extend({editor_id:\"post_three\",events:function(){return _.defaults({\"click .label\":\"placeholder\",'click .optional[for=\"post_three\"]':\"placeholder\",\"change #post_two\":\"change_url\",\"paste #post_two\":\"update_url\",\"keyup #post_two\":\"update_url\",\"keyup #post_one\":\"update_title\",\"focus #post_three\":\"editor_focus\"},Tumblr.PostForms.BaseView.prototype.events)},initialize:function(c){this.options=c||{};this.constructor.__super__.initialize.call(this,this.options);this.$link_preview_template=b(\"#link_preview_subtemplate\").html()},render_view:function(f){var c=b(\"#link_subtemplate\").html();var d=_.template(c);this.$post_content_type.html(d(_.extend(_.clone(this.template_helpers),this.model.toJSON())));this.editor();if(Tumblr.use_link_opengraph){var e=_.template(this.$link_preview_template);this.$main_content.before(e(_.extend(_.clone(this.template_helpers),this.model.toJSON())));this.cache_selectors_view();this.$post_form.on(\"mousedown\",\".reset\",_.bind(this.reset,this));this.$preview_thumbnail.on(\"load\",_.bind(this.thumbnail_alignment,this));this.$post_form.on(\"click\",\".link_thumbnail_container .cancel\",_.bind(this.remove_thumbnail,this));if(this.model.get(\"reblog\")){this.$preview_thumbnail_container.addClass(\"no_replace no_upload\")}if(this.model.get(\"edit\")||this.model.get(\"reblog\")){this.update_preview(this.current_fields());this.$post_form.find(\".reset\").remove()}}else{this.cache_selectors_view()}Tumblr.PlaceHolders.init({els:b(\"#post_one, #post_two\"),clear_on_submit:true});if(this.editor_type!==\"rich\"){this.$(\"#post_three\").autoexpand().resizeanchor()}Tumblr.Editor.on(\"tinymce.focus\",this.editor_focus,this);if(typeof f===\"function\"){f()}return this},cache_selectors_view:function(){this.$preview_container=this.$(\".link_button_container\");this.$preview=this.$(\".link_button\");this.$preview_thumbnail_container=this.$preview.children(\".link_thumbnail_container\");this.$preview_thumbnail=this.$preview.find(\".link_thumbnail\");this.$preview_thumbnail_upload=this.$preview.find(\".upload_thumbnail\");this.$preview_text_container=this.$preview.children(\".link_text_container\");this.$preview_text=this.$preview.find(\".link_text\");this.$preview_title=this.$preview.find(\".link_title\");this.$preview_source=this.$preview.find(\".link_source\");this.$post_one=this.$(\"#post_one\");this.$post_two=this.$(\"#post_two\");this.$post_three=this.$(\"#post_three\");this.$post_source_url=this.$(\"#post_source_url\");this.$remove_thumbnail=this.$('input[name=\"remove_thumbnail\"]');this.$thumbnail_pre_upload=this.$('input[name=\"thumbnail_pre_upload\"]');this.$upload_thumbnail=this.$('input[name=\"thumbnail\"]')},change_url:function(g){var c=\"\";var d=b(g.currentTarget);var f=b.trim(d.val());if(f){if(f.match(/^magnet:/i)){c=f}else{c=this.model.undup_protocol(this.model.add_protocol(f))}}d.val(c);if(!Tumblr.use_link_opengraph){return}this.update_url(g,100)},update_url:function(d,c){if(Tumblr.use_link_opengraph){if(this.$post_two.val()){this.$post_form.addClass(\"can_reset\")}else{this.$post_form.removeClass(\"can_reset\")}}if(!Tumblr.use_link_opengraph){return}if(this.model.get(\"reblog\")){return}if(this.model.get(\"edit\")&&d&&d.type===\"keyup\"){return}if(this.$post_two.val()===this.previous_url){return}else{this.previous_url=this.$post_two.val()}clearTimeout(this.fetch_timeout);this.fetch_timeout=_.delay(_.bind(this.url_update_fetch,this),c||450)},update_title:function(c){if(!Tumblr.use_link_opengraph){return}if(this.model.get(\"reblog\")){return}return this.update_preview({title:this.$post_one.val()})},url_update_fetch:function(){clearTimeout(this.fetch_timeout);var c=this.$post_two.val();if(c&&this.model.allowed_protocol(c)){this.$post_form.addClass(\"show_preview\");this.$preview_container.addClass(\"loading\");this.model.fetch_og_meta(c,_.bind(this.use_og_meta,this),_.bind(this.use_og_meta,this))}else{if(!b.trim(c)){this.$post_form.removeClass(\"show_preview\");this.$preview_container.removeClass(\"loading\");var d=this.compare_fields(this.current_fields(),b.extend({title:\"\",description:\"\",caption:\"\",source:\"\",image:\"\",url:\"\"},this.previous_og_meta));if(!d.title){this.$post_one.val(\"\")}if(!d.description){switch(this.editor_type){case\"rich\":var e=b(\"#ace_source_editor\");if(e.length){}else{this.rich_editor.execCommand(\"mceSetContent\",false,this.remove_og_blockquote(this.rich_editor.getContent()))}break;default:case\"markdown\":this.$post_three.val(this.remove_og_blockquote(this.$post_three.val()));break}}}}},use_og_meta:function(e,c){var f={title:\"\",description:\"\",source:\"\",image:\"\",url:c};if(e&&e.response){f=b.extend(f,e.response)}if(!f.title&&!f.description){f.description=f.url}this.$post_form.addClass(\"show_preview\");this.$preview_container.removeClass(\"loading\");var d=this.compare_fields(this.current_fields(),b.extend({title:\"\",description:\"\",source:\"\",image:\"\",url:\"\"},this.previous_og_meta),true);if(!d.title){this.$post_one.val(f.title)}if(!d.description||!this.model.get(\"edit\")){this.add_blockquote_description(f.description,true)}if(!d.image||f.image){this.$preview_thumbnail.attr(\"src\",f.image);this.$upload_thumbnail.val(f.image);this.$thumbnail_pre_upload.val(\"1\");this.$remove_thumbnail.val(\"\")}this.update_preview(this.current_fields());this.previous_og_meta=f},current_fields:function(){var c={title:this.$post_one.val(),caption:this.$post_three.val(),source:this.$post_source_url.val(),image:this.$upload_thumbnail.val(),url:this.$post_two.val()};if(this.editor_type===\"rich\"&&this.rich_editor){c.caption=this.rich_editor.getContent()}c.description=this.get_og_blockquote(c.caption);return c},compare_fields:function(d,c,f){var e={};b.each(d,function(g,h){if(f&&!c[g]){e[g]=false}if(typeof c[g]===\"undefined\"){e[g]=true}e[g]=d[g]!==c[g]});b.each(c,function(g,h){if(typeof d[g]===\"undefined\"){e[g]=true}e[g]=d[g]!==c[g];if(f&&!d[g]){e[g]=false}});return e},update_preview:function(c){if(!c){this.$post_form.removeClass(\"show_preview\");return false}if(c.url){this.$preview_container.find(\"a.link_title, a.link_source, a.link_thumbnail_click\").attr(\"href\",c.url)}else{c.url=this.$post_two.val()}if(c.url){this.$post_form.addClass(\"show_preview\")}else{this.$post_form.removeClass(\"show_preview\");return false}if(c.title){this.$preview_title.text(c.title);if(this.model.allowed_protocol(c.url)){this.$preview_source.text(c.url.replace(/([^\\/]+:\\/\\/)?([^\\/\\?]+).*/i,\"$2\"))}else{this.$preview_source.text(c.url)}}else{if(typeof c.title!==\"undefined\"){this.$preview_title.text(c.url);this.$preview_source.text(\"\")}}if(this.$preview_title.text().length>100||this.$preview_text.height()>110){this.$preview.addClass(\"small\")}else{this.$preview.removeClass(\"small\")}if(c.image){this.$preview_thumbnail.attr(\"src\",c.image);this.$preview_thumbnail_container.addClass(\"has_image\")}else{if(typeof c.image!==\"undefined\"){this.$preview_thumbnail_container.removeClass(\"has_image\")}}return true},add_blockquote_description:function(h,e){var d=document.activeElement;var g=h?'<blockquote class=\"link_og_blockquote\">'+h+\"</blockquote>\":\"\";var j=this.$post_three.val()||\"<p></p>\";var c=this.get_og_blockquote(j);switch(this.editor_type){case\"rich\":j=this.rich_editor.getContent()||\"<p></p>\";c=this.get_og_blockquote(j);if(!(e||!b.trim(c)||!b.trim(b(j).text()))){return false}var i=b(\"#ace_source_editor\");if(i.length){}else{this.rich_editor.focus();this.rich_editor.selection.select(this.rich_editor.getBody(),true);this.rich_editor.selection.collapse(true);this.rich_editor.execCommand(\"mceSetContent\",false,g+this.remove_og_blockquote(j));this.rich_editor.selection.select(this.rich_editor.getBody(),true);this.rich_editor.selection.collapse(false);this.rich_editor.execCommand(\"mceFocus\",false,\"\")}break;default:case\"markdown\":if(!(e||!b.trim(c)||!b.trim(b(j).text()))){return false}this.$post_three.val(g+\"\\n\"+this.remove_og_blockquote(j));var f=this.$post_three.val().match(/<\\/p>\\s*$/i)?this.$post_three.val().lastIndexOf(\"</p>\"):-1;this.focus_cursor_position(this.$post_three,f);break}if(d&&d!==this.$post_two.get(0)){d.focus()}return true},focus_cursor_position:function(e,f){var d=b(e);d.focus();if(typeof f===\"undefined\"){f=-1}if(f<0){f=d.val().length+f+1}e=d.get(0);if(e.setSelectionRange){e.focus();e.setSelectionRange(f,f);return true}else{if(e.createRange){var c=e.createRange();c.setStart(\"character\",f);c.setEnd(\"character\",f);c.select();return true}else{return false}}},get_og_blockquote:function(e){var c=/(<blockquote class=\"link_og_blockquote\"(?:\\s[^>]*)?>((?:\\n|.)*)<\\/\\s*blockquote\\s*>)/i;var d=e.match(c);if(d&&d.length){return d[0].replace(c,\"$2\")}else{return\"\"}},remove_og_blockquote:function(d){var c=/(<blockquote class=\"link_og_blockquote\"(?:\\s[^>]*)?>((?:\\n|.)*)<\\/\\s*blockquote\\s*>)/i;return d.replace(c,\"\")},thumbnail_alignment:function(j){var i=this.$preview_thumbnail.get(0).naturalWidth;var d=this.$preview_thumbnail.get(0).naturalHeight;var h=i/d;var f=this.$preview_thumbnail_container.width();var c=this.$preview_thumbnail_container.height();var g=f/c;if(i/d<f/c){c/=h}else{f*=h}this.$preview_thumbnail.css({width:f,height:c,\"margin-left\":0.5*(this.$preview_thumbnail_container.width()-f),\"margin-top\":0.5*(this.$preview_thumbnail_container.height()-c)})},remove_thumbnail:function(c){if(c){c.preventDefault()}this.$preview_thumbnail_container.removeClass(\"has_image\");this.$upload_thumbnail.val(\"\");this.$thumbnail_pre_upload.val(\"\");this.$remove_thumbnail.val(\"1\")},reset:function(c){this.$post_one.val(\"\");this.$post_two.val(\"\");this.$post_source_url.val(\"\");this.$post_three.val(\"\");if(this.editor_type===\"rich\"){this.rich_editor.execCommand(\"mceSetContent\",false,\"\")}this.remove_thumbnail();this.update_preview(false);this.$post_form.removeClass(\"can_reset\")},editor:function(d){var c=b.extend({},Tumblr.PostForms.editor_defaults,{type:this.editor_type,focus:(this.model.get(\"edit\")||this.model.get(\"reblog\"))?\"focus_end\":true});Tumblr.Editor.render(this.editor_id,c)},editor_focus:function(c){this.placeholder(null,this.$(\".inset_label .label\"))},placeholder:function(d,c){if(d){d.preventDefault();c=b(d.currentTarget);if(c.is(\"label.optional\")){c=c.prevAll(\".label\")}if(this.editor_type!==\"rich\"){this.$(\"#post_three\").focus()}}c.fadeOut(250);c.nextAll(\".optional\").fadeOut(250);if(tinyMCE&&this.editor_type===\"rich\"){tinymce.execCommand(\"mceFocus\",false,c.data(\"for\"))}}})})(jQuery,Tumblr);\n(function(b,a){Tumblr.PostForms.Conversation=Tumblr.PostForms.BaseView.extend({events:function(){return _.defaults({\"input #post_two\":\"editor_focus\"},Tumblr.PostForms.BaseView.prototype.events)},render_view:function(){var c=_.template(b(\"#chat_subtemplate\").html());this.$post_content_type.html(c(_.extend(_.clone(this.template_helpers),this.model.toJSON())));Tumblr.PlaceHolders.init({els:\"#post_one\",clear_on_submit:true});this.$post_two=this.$(\"#post_two\");this.$post_two.autoexpand().resizeanchor();return this},editor_focus:function(c){if(this.$(\"#post_two\").val().length>0){this.placeholder(null,this.$(\".inset_label .label\"))}},placeholder:function(d,c){if(d){d.preventDefault();c=b(d.currentTarget);if(c.is(\"label.optional\")){c=c.prevAll(\".label\")}}c.hide();c.nextAll(\".optional\").hide()}})})(jQuery,Tumblr);\n(function(b,a){Tumblr.PostForms.LightTableImage=Backbone.Model.extend({initialize:function(c){this.file=c;this.reader=new FileReader();if(this.reader.readAsBinaryString){this.reader.onload=this.on_load_binary.bind(this);this.reader.readAsBinaryString(this.file)}else{this.read_data_url()}this.rotation=0},read_data_url:function(){this.reader.onload=this.on_load_data_url.bind(this);this.data_url=this.reader.readAsDataURL(this.file)},on_load_binary:function(c){this.binary=c.target.result;this.read_data_url();this.process_binary()},process_binary:function(){if(this.file.type==\"image/jpg\"||this.file.type==\"image/jpeg\"){try{this.jpeg=new JpegMeta.JpegFile(this.binary,this.file.name);switch(this.jpeg.tiff.Orientation.value){case 8:this.rotation=270;break;case 6:this.rotation=90;break;case 3:this.rotation=180;break;default:this.rotation=0;break}}catch(c){}}},on_load_data_url:function(c){this.data_url=c.target.result;this.img=new Image();this.img.onload=this.on_img_load.bind(this);this.img.src=this.data_url;this.trigger(\"data_url_ready\",this)},on_img_load:function(){this.original_ratio=this.img.width/this.img.height;if(this.rotation==90||this.rotation==270){this.width=this.img.height;this.height=this.img.width}else{this.width=this.img.width;this.height=this.img.height}this.ratio=this.width/this.height;this.trigger(\"image_ready\",this)},resize:function(g){var d=this.img;var c=g/this.ratio;var e=document.createElement(\"canvas\");e.width=g;e.height=c;var f=e.getContext(\"2d\");if(this.rotation){if(this.rotation==90||this.rotation==270){var h=g;g=c;c=h}f.save();if(this.rotation==180){f.translate(g/2,c/2)}else{f.translate(c/2,g/2)}f.rotate(this.rotation*Math.PI/180);f.drawImage(d,-(g/2),-(c/2),g,c);f.restore()}else{f.drawImage(d,0,0,g,c)}return e.toDataURL(this.file.type)}})})(jQuery,Tumblr);\n(function(b,a){Tumblr.PostForms.Photo=Tumblr.PostForms.BaseView.extend({events:function(){return _.defaults({\"click .help\":\"on_click_drop_zone\",\"dragenter .drop_target\":\"enable_drop_zone\",\"dragleave .drop_target\":\"disable_drop_zone\",\"click .label\":\"placeholder\",\"click .optional\":\"placeholder\",\"mouseenter .item\":\"on_mouseenter\",\"mouseleave .item\":\"on_mouseleave\",\"click .linkthrough\":\"on_click_linkthrough\",\"keydown .linkthrough .text_field\":\"on_keydown_linkthrough\",\"click .caption .icon\":\"on_click_caption\",\"click .x\":\"on_click_x\",\"click .photo_form .caption_popover .dismiss\":\"on_click_caption_dismiss\",\"keyup .photo_form .caption_popover textarea\":\"on_keyup_caption\",\"focus #post_two\":\"editor_focus\",\"click .url_button\":\"on_click_url_button\",\"keydown .external_url\":\"on_keydown_external_url\"},Tumblr.PostForms.BaseView.prototype.events)},layouts:{\"1\":[1],\"2\":[11,2],\"3\":[12,21,3],\"4\":[121,13,22,31],\"5\":[122,212,23,32],\"6\":[123,132,213,222,33],\"7\":[1222,133,223,232,322],\"8\":[1223,1232,1322,2222,233,323,332],\"9\":[1233,1323,2223,2232,2322,3222,333],\"10\":[1333,2233,2323,2332,3223,3232,3322]},max_per_row:3,initialize:function(c){this.options=c||{};this.constructor.__super__.initialize.call(this,this.options);this.$sub_template=b.trim(b(\"#photo_subtemplate\").html());this.photos=[];this.files=[];this.original_photos_length=0;this.$lighttable_template=b.trim(b(\"#photo_grid_subtemplate\").html());this.$upload_list_template=b.trim(b(\"#upload_photo_list_subtemplate\").html());this.model.on(\"change:upload_complete\",this.upload_complete,this);this.model.on(\"change:upload_file_error\",this.file_errors,this);this.model.on(\"change:upload_failed\",this.upload_failed,this);this.model.on(\"change:upload_files_added\",this.files_added,this);var d={lines:11,length:4,width:2,radius:5,color:\"#b2bdc7\",speed:0.9,trail:34,shadow:false,hwaccel:false,className:\"spinner\",zIndex:2000000000,top:\"0\",left:\"0\"};this.photo_spinner=new Spinner(d)},destroy:function(c){if(this.webcam){this.webcam.destroy();this.webcam=null}this.constructor.__super__.destroy.call(this,c)},hide_post_form:function(c,d){if(this.model.uploader_inititalized){this.model.destroy_uploader(this.$(\"#photo_file_input\"))}this.constructor.__super__.hide_post_form.call(this,c,d)},upload_complete:function(c){_.each(c.response,function(f){for(var h=0,e;e=this.photos[h];h++){if(f.error){this.display_errors([__(\"Error uploading image\")]);this.abort();var d=f.original_filename;if(e.filename==d){this.files=_.reject(this.files,function(i){return encodeURIComponent(i.name)==d});this.photos=_.reject(this.photos,function(i){return encodeURIComponent(i.filename)==d});this.image_loaders=_.reject(this.image_loaders,function(i){return i.file.name==d});this.original_photos_length=this.photos.length-this.files.length;if(this.photos.length>0){this.determine_layout();this.render_cells()}else{var g=this.$(\".item img\").filter(\"[data-filename='\"+(e.filename)+\"']\");g.closest(\".item\").remove();this.$(\".photo_field\").removeClass(\"small\");this.$(\".url_container\").show();this.$(\".help .default_text\").show();this.$(\".help .additional_text\").hide();this.disable_submit()}}}else{if(f.upload_id&&(f.upload_id==e.upload_id)&&!e.temp_url){e.temp_url=f.url;break}else{if(f.original_filename==e.filename&&!e.temp_url){e.temp_url=f.url;break}}}}}.bind(this))},upload_failed:function(c,d){this.display_errors(c);this.photos=_.reject(this.photos,function(e){return(e.filename&&!e.temp_url)});if(this.photos.length>0){this.determine_layout();this.render_cells()}else{this.disable_submit()}},file_errors:function(d,c){this.display_errors(d)},render_view:function(){var c=this;var d=_.template(this.$sub_template);this.lighttable_template=(_.template(this.$lighttable_template));this.$post_content_type.html(d(_.extend(_.clone(this.template_helpers),this.model.toJSON())));this.post=this.model.get(\"post\");if(this.post){if(this.post.photos){this.original_photos_length=this.post.photos.length;this.photos=this.post.photos;if(this.photos.length){this.layout=this.photos.length>1?this.post.photoset_layout.toString():\"1\";this.render_cells();this.enable_submit()}}if(this.post.two||this.post.tags){this.$(\"#photo_caption\").show();this.$(\".tag_editor\").show()}}if(_.isEmpty(this.post)||!this.post.is_reblog){this.model.init_uploader(this.$(\"#photo_file_input\"),{singleFileUploads:true,limitConcurrentUploads:10,error_msg:{errorSize:\"File is too big. Max 10MB.\",errorType:\"Only image files are allowed.\"},drop:_.bind(this.on_add_files,this),change:_.bind(this.on_add_files,this)});if(Tumblr.Webcam){this.webcam=new Tumblr.Webcam({el:\"#webcam_container\",template:\"#photo_grid_subtemplate\",btn:\".url_container .webcam_button\",on_show:function(){b(\".photo_field\").hide()},on_hide:function(){c.cancel_webcam();c.$(\".photo_field\").show().removeClass(\"small\");c.$(\".url_container\").show()},on_snap:function(f,g,e,h){c.load_raw_photo(f,g,e,h)},on_retake:function(){c.cancel_webcam()}})}}this.editor();if(this.editor_type!==\"rich\"){this.$(\"#post_two\").autoexpand().resizeanchor()}Tumblr.Editor.on(\"tinymce.focus\",this.editor_focus,this);return this},on_add_files:function(d,c){var f=this.model.max_number_of_files-this.photos.length;if(c.files.length>=f){c.files=c.files.slice(0,f);this.show_info(__(\"You can only upload up to 10 photos. Please remove some if you want to add more\"));setTimeout(_.bind(this.hide_info,this),10000);return}},editor:function(d){var c=b.extend({},Tumblr.PostForms.editor_defaults,{type:this.editor_type,focus:(this.model.get(\"edit\")||this.model.get(\"reblog\"))?\"focus_end\":true});Tumblr.Editor.render(this.editor_id,c)},editor_focus:function(c){this.placeholder(null,this.$(\".inset_label .label\"))},enable_drop_zone:function(c){b(c.currentTarget).closest(\".drop_zone\").addClass(\"droppable\")},disable_drop_zone:function(c){b(c.currentTarget).closest(\".drop_zone\").removeClass(\"droppable\")},placeholder:function(d,c){if(d){d.preventDefault();c=b(d.currentTarget);if(c.is(\"label.optional\")){c=c.prevAll(\".label\")}if(this.editor_type!==\"rich\"){this.$(\"#post_two\").focus()}}c.fadeOut(250);c.nextAll(\".optional\").fadeOut(250);if(tinyMCE&&this.editor_type===\"rich\"){tinymce.execCommand(\"mceFocus\",false,c.data(\"for\"))}},files_added:function(c,d){this.process_files(c.files)},process_files:function(g){if(this.files.length==this.model.max_number_of_files){this.show_info(__(\"You can only upload up to 10 photos. Please remove some if you want to add more\"));setTimeout(_.bind(this.hide_info,this),5000);return}this.photo_spinner.spin(this.$(\".photo_spinner\").get(0));this.$(\".url_container\").hide();this.$(\".help_text\").hide();this.hide_errors();this.files=this.files.concat(g);var d=this.$(\".photos\");var j;this.cells=[];this.image_loaders=this.image_loaders||[];for(var e=0,h;h=g[e];e++){if(e==this.model.max_number_of_files){break}if(!h.type.match(\"image.*\")){continue}var c=new Tumblr.PostForms.LightTableImage(h);this.image_loaders.push(c);c.on(\"image_ready\",function(f){if(this.photos.length<this.model.max_number_of_files){var k=-1;var m=this.photos.map(function(i){return i.id});for(var l=1;l<=this.model.max_number_of_files;l++){if(b.inArray(\"o\"+l,m)===-1){k=l;break}}this.photos.push({id:(\"o\"+k),filename:f.file.name,type:f.file.type,url:(f.file.type==\"image/gif\"?f.data_url:f.resize(500)),width:f.width,height:f.height,upload_id:f.file.upload_id})}if(this.photos.length>=this.files.length+this.original_photos_length){this.enable_submit();this.determine_layout();this.render_cells()}}.bind(this))}},determine_layout:function(){if(!this.layout||this.layout===\"1\"){this.layout=this.layouts[this.photos.length][0].toString()}else{var c=this.photos.length-this.$(\".item\").length;if(c===1){this.layout=this.layout+\"1\"}else{if(c===0){this.layout=_.reduce(this.$(\".row\"),function(d,e){return d+this.$(e).children().not(\".shim\",\".placeholder\").length},\"\",this)}else{this.layout=this.layouts[this.photos.length][0].toString()}}}return this.layout},determine_width:function(d,e){var c;if(d.type==\"image/gif\"&&d.width>=150){c=e}else{if(d.width<=e){c=d.width}else{c=e}}return c},render_cells:function(m){this.$(\".row\").remove();this.photo_spinner.stop();this.$(\"#photo_caption\").show();this.$(\".tag_editor\").show();if(!m){var n=\"\";var p=this.layout;var l,h,g,e;for(l=0,g=0;l<p.length;l++){e=Number(p[l]);n+='<div class=\"row clearfix\">';var d=e==1?3:1;var o=e-1;var f=o*10;var c=(500-f)/e;for(h=0;h<e;h++,g++){n+=this.lighttable_template(_.extend(_.clone(this.template_helpers),{width:this.photos.length==1?this.determine_width(this.photos[g],c):c,controls:_.isEmpty(this.post)||!this.post.is_reblog,individual_captions:this.photos.length>1,linkthrough:this.photos.length==1,link_url:this.post&&this.post.link_url,data_url:this.photos[g].url,filename:encodeURIComponent(this.photos[g].filename||this.photos[g].id),caption:this.photos[g].caption}))}n+=\"</div>\"}this.$(\".photos .item\").remove();this.$(\".photos\").append(n)}if(this.photos.length>1){this.initialize_lighttable()}else{setTimeout(this.show_photos.bind(this),200);if(this.lighttable){this.destroy_lighttable()}}if(this.post&&this.post.is_reblog){if(this.lighttable){this.destroy_lighttable()}this.$(\".photo_field\").hide();return}if(this.photos.length==this.model.max_number_of_files||m){this.$(\".photo_field\").hide()}else{this.$(\".photo_field\").show().addClass(\"small\");this.$(\".url_container\").hide();this.$(\".help .default_text\").hide();this.$(\".help .additional_text\").show();this.$(\".help_text\").show()}},initialize_lighttable:function(){if(this.lighttable){this.destroy_lighttable()}this.lighttable=new Tumblr.LightTableView({el:this.$(\".photos\"),scrollable:true,max_per_row:this.max_per_row,on_initialize:this.show_photos.bind(this),callback:this.on_sort.bind(this)})},destroy_lighttable:function(){this.lighttable.undelegateEvents();this.lighttable.disable_drag();this.lighttable=null},show_photos:function(c){this.$(\".photos\").removeClass(\"collapsed\");setTimeout(function(){this.$(\"img.thumb\").css(\"opacity\",1)}.bind(this),300)},on_sort:function(c){this.determine_layout();var d=this.$(\".item img\");this.photos.sort(function(g,f){var e=g.filename?encodeURI(g.filename):g.id;var k=f.filename?encodeURI(f.filename):f.id;var j=d.filter(\"[data-filename='\"+e+\"']\");var i=d.filter(\"[data-filename='\"+k+\"']\");var l=d.index(j);var h=d.index(i);return l-h})},on_mouseenter:function(c){this.$(c.currentTarget).find(\".controls\").show()},on_mouseleave:function(c){if(this.control_visible){return}this.$(c.currentTarget).find(\".controls\").fadeOut(125)},on_click_linkthrough:function(i){var f=b(i.currentTarget).closest(\".linkthrough\");var d=f.closest(\".item\");var h=f.find(\".popover\");var c=f.closest(\".controls\");var g=f.find(\".text_field\");this.control_visible=true;this.linkthrough_popover=new Tumblr.MultiPopover(h.get(0),{token:\"post-plexi\",direction:\"north\",on_show:b.proxy(function(){d.attr(\"draggable\",false);this.on_show_popover.apply(this,arguments)},this),on_hide:b.proxy(function(){d.attr(\"draggable\",true);this.control_visible=false;this.on_hide_popover.apply(this,arguments)},this)}).show();h.addClass(\"active\")},on_keydown_linkthrough:function(f){if(f&&f.keyCode===13){f.preventDefault();f.stopPropagation();this.linkthrough_popover.hide()}var g=this.$(f.currentTarget);var d=g.val();var c=g.closest(\".linkthrough\");if(d){c.addClass(\"edited\")}else{c.removeClass(\"edited\")}},on_click_caption:function(h){var f=b(h.currentTarget).closest(\".caption\");var d=f.closest(\".item\");var g=f.find(\".popover\");var c=f.closest(\".controls\");var i=f.find(\"textarea\");this.control_visible=true;this.caption_popover=new Tumblr.MultiPopover(g.get(0),{token:\"post-plexi\",direction:\"north\",on_show:b.proxy(function(){d.attr(\"draggable\",false);i.focus();this.on_show_popover.apply(this,arguments)},this),on_hide:b.proxy(function(){d.attr(\"draggable\",true);this.control_visible=false;this.on_hide_popover.apply(this,arguments)},this)}).show();g.addClass(\"active\")},on_click_caption_dismiss:function(){this.caption_popover.hide()},on_click_x:function(g){var f=this.$(g.currentTarget).closest(\".item\").find(\"img\").data(\"filename\");this.files=_.reject(this.files,function(e){return encodeURIComponent(e.name)==f});this.photos=_.reject(this.photos,function(e){return encodeURIComponent(e.filename)==f||e.id==f});this.image_loaders=_.reject(this.image_loaders,function(e){return e.file.name==f});this.original_photos_length=this.photos.length-this.files.length;var d=this.$(g.currentTarget).closest(\".item\");var c=d.closest(\".row\");d.remove();if(!c.children().length){c.remove()}if(this.photos.length>0){this.determine_layout();this.render_cells()}else{this.$(\".photo_field\").removeClass(\"small\");this.$(\".url_container\").show();this.$(\".help .default_text\").show();this.$(\".help .additional_text\").hide();this.disable_submit()}},on_keyup_caption:_.throttle(function(h){if(h&&h.keyCode===13){h.preventDefault();this.caption_popover.hide()}var k=b(h.currentTarget);var f=k.val();var j=k.closest(\".caption\");var g=k.attr(\"maxlength\")||200;var i=k.closest(\".caption_popover\").find(\".length\");var d=g-f.length;i.addClass(\"active\").text(d);var c=k.closest(\".item\").find(\"img\").data(\"filename\");_.each(this.photos,function(e){if(e.id==c){e.caption=f}});if(f){j.addClass(\"edited\")}else{j.removeClass(\"edited\")}},50),on_click_drop_zone:function(c){this.$(\"#photo_file_input\").trigger(\"click\");c.stopPropagation()},on_click_url_button:function(f){var c=b(f.currentTarget).closest(\".url_container\");var d=c.find(\".popover\");var g=c.find(\".text_field\");this.url_popover=new Tumblr.MultiPopover(d.get(0),{token:\"post-plexi\",direction:\"south\",on_show:b.proxy(function(){g.focus();this.on_show_popover.apply(this,arguments)},this),on_hide:b.proxy(function(){if(g.val()){this.on_hide_popover.apply(this,arguments);this.load_external_url(g.val());g.val(\"\")}},this)}).show();d.addClass(\"active\")},on_keydown_external_url:function(c){if(!c){return}if(c.keyCode===13||c.keyCode===9){c.preventDefault();c.stopPropagation();this.url_popover.hide()}},load_raw_photo:function(e,d,c,f){this.photos.push({id:(\"o\"+(this.photos.length+1)),filename:\"\",url:e,photo_raw:e.split(\"base64,\")[1],width:d,height:c,is_selfie_gif:f,is_selfie:true});this.original_photos_length++;this.enable_submit();this.determine_layout();this.render_cells(true)},load_external_url:function(d){if(!d){return}var c=document.createElement(\"img\");var e=b(c);e.one(\"load\",_.bind(function(f){this.photos.push({id:(\"o\"+(this.photos.length+1)),filename:\"\",url:d,external_url:d,width:c.width,height:c.height});this.original_photos_length++;this.enable_submit();this.determine_layout();this.render_cells();e.off()},this)).one(\"error\",_.bind(function(f){this.display_errors([__(\"Error loading image from url\")]);e.off()},this));c.src=d},upload_completed:function(){var d=_.filter(this.photos,function(e){return e.filename});var c=_.every(d,function(e){return e.temp_url});return c},make_photo_inputs:function(c){this.$('[data-input=\"submit-meta\"]').remove();b(\"<input>\").attr({\"data-input\":\"submit-meta\",type:\"hidden\",name:\"post[photoset_layout]\",value:this.layout}).appendTo(this.$post_form);b(\"<input>\").attr({\"data-input\":\"submit-meta\",type:\"hidden\",name:\"post[photoset_order]\",value:_.pluck(this.photos,\"id\").join(\",\")}).appendTo(this.$post_form);_.each(this.photos,function(e,d){var f=e.id||\"o\"+(d+1);b(\"<input>\").attr({\"data-input\":\"submit-meta\",type:\"hidden\",name:\"images[\"+f+\"]\",value:(e.external_url)?e.external_url:e.temp_url}).appendTo(this.$post_form);if(e.external_url){b(\"<input>\").attr({\"data-input\":\"submit-meta\",type:\"hidden\",name:\"photo_src[]\",value:e.external_url}).appendTo(this.$post_form)}else{if(e.photo_raw){b(\"<input>\").attr({\"data-input\":\"submit-meta\",type:\"hidden\",name:\"photo_raw[]\",value:e.photo_raw}).appendTo(this.$post_form);b(\"<input>\").attr({\"data-input\":\"submit-meta\",type:\"hidden\",name:\"is_selfie\",value:e.is_selfie}).appendTo(this.$post_form);b(\"<input>\").attr({\"data-input\":\"submit-meta\",type:\"hidden\",name:\"is_selfie_gif\",value:e.is_selfie_gif}).appendTo(this.$post_form)}}},this);_.each(this.$(\".photos textarea\"),_.bind(function(d,e){d.name=\"caption[\"+this.photos[e].id+\"]\"},this))},submit:function(d){this.disable_submit();this.hide_errors();var c=this.$post_form.find('[name=\"preview_post\"]').val();if(!c){d.preventDefault()}if(this.upload_completed()){this.enable_submit();this.make_photo_inputs(c);this.constructor.__super__.submit.call(this,d)}else{if(c){d.preventDefault();return}this.show_loader();clearInterval(this.submit_loop);this.submit_loop=setInterval(function(){if(!this.upload_completed()){return false}this.enable_submit();this.make_photo_inputs(c);this.constructor.__super__.submit.call(this,d);clearInterval(this.submit_loop)}.bind(this),30)}},abort:function(){this.hide_loader();clearInterval(this.submit_loop)},cancel_webcam:function(){this.photos=[];this.original_photos_length=0;this.disable_submit()},preview_on_blog:function(d){if(!this.upload_completed()){this.show_loader();Tumblr.MultiPopover.hideAll();var c=setInterval(function(){if(!this.upload_completed()){return false}this.hide_loader();this.constructor.__super__.preview_on_blog.call(this,d);clearInterval(c)}.bind(this),30);return false}this.constructor.__super__.preview_on_blog.call(this,d)}})})(jQuery,Tumblr);\n(function(b,a){Tumblr.LightTableView=Tumblr.SortableView.extend({events:function(){var c=_.isFunction(Tumblr.SortableView.prototype.events)?Tumblr.SortableView.prototype.events.call(this):Tumblr.SortableView.prototype.events;return _.extend({dragover:\"on_dragover\",\"dragleave .drop\":\"on_dragleave\",drop:\"on_drop\"},c)},initialize:function(d){this.options=d||{};Tumblr.SortableView.prototype.initialize.apply(this,arguments);this.max_per_row=this.options.max_per_row||3;this.$shim=b('<div class=\"item shim\" style=\"width:0;\"></div>');this.animation_duration=600;var e=this.$(\"img.thumb\");var c=setInterval(function(){var f=_.every(e,function(g){return g.complete&&g.clientHeight});if(f){this.equalize();clearInterval(c);if(this.options.on_initialize){this.options.on_initialize(this)}}}.bind(this),30)},disable_drag:function(){this.items.attr(\"draggable\",false)},on_dragstart:function(i){b(this.options.el).addClass(\"dragging\");this.$(this.options.items).attr(\"draggable\",false);Tumblr.SortableView.prototype.on_dragstart.apply(this,arguments);this.$(\".placeholder\").remove();this.placeholder=this.$(this.dragged).clone().addClass(\"placeholder\").removeClass(\"sortable-dragging\").attr(\"draggable\",false).get(0);this.dropped=false;i.originalEvent.dataTransfer.dropEffect=\"move\";var h=this.$(i.currentTarget).parent(\".row\");this.origin_row=h;var c=h.find(this.options.items).length;var d=c-1;var f=d*10;var g=(500-f)/c;this.$(i.currentTarget).find(\".controls\").hide();this.placeholder.style.width=g+\"px\";this.placeholder.style.height=this.dragged.clientHeight+\"px\";this.drag_x=i.originalEvent.offsetX;this.drag_y=i.originalEvent.offsetY;this.$(\".drop\").show();window.setTimeout(function(){this.$(i.currentTarget).after(this.placeholder);this.$(this.placeholder).addClass(\"active\");this.$(this.dragged).css({\"z-index\":\"1000\",position:\"absolute\",visibility:\"hidden\"});this.$el.append(this.dragged)}.bind(this),0)},on_dragenter:function(d){_.each(this.$(\".row\"),function(e){if(!this.$(e).children().length){this.$(e).remove()}},this);var c=d.currentTarget;this.last_droppable=c},on_dragover:function(g){if(g.currentTarget==this.el||!this.dragged){return false}this.reset_marker();var d=this.$(g.currentTarget);var h=d.parent(\".row\");var l=g.originalEvent.pageX-d.offset().left;var i=g.originalEvent.pageY-d.offset().top;var j=g.currentTarget.getBoundingClientRect();var f=this.$(g.currentTarget).position();var k=\"\";var c=\"\";if(i<j.height/5){k=\"top\";this.$(\".horizontal_marker\").css({top:f.top-5+\"px\"}).show()}else{if(i>(j.height-j.height/5)){k=\"bottom\";this.$(\".horizontal_marker\").css({top:f.top+j.height+5+\"px\"}).show()}else{if(l<j.width/2&&(h.children().not(\".placeholder\").not(\".shim\").length<this.options.max_per_row)){c=\"left\";this.$(\".vertical_marker\").css({top:f.top,left:f.left-5+\"px\",height:j.height+6}).show()}else{if(l>(j.width-j.width/2)&&(h.children().not(\".placeholder\").not(\".shim\").length<this.max_per_row)){c=\"right\";this.$(\".vertical_marker\").css({top:f.top,left:f.left+j.width+5+\"px\",height:j.height+6}).show()}}}}if(c){if(!d.hasClass(c)){d.addClass(c)}}else{if(k){if(!d.hasClass(k)){h.addClass(k)}}else{this.drop_allowed=false;return}}this.drop_allowed=true;g.preventDefault()},on_dragleave:function(c){if(this.real_dragleave(c)){this.reset_marker();this.last_droppable=null}},real_dragleave:function(d){var c=d.currentTarget.getBoundingClientRect();return(d.originalEvent.x>c.left+c.width||d.originalEvent.x<c.left||d.originalEvent.y>c.top+c.height||d.originalEvent.y<c.top)},on_drop:function(g){if(!this.drop_allowed){return}if(g.originalEvent.dataTransfer.files.length){return}if(!this.last_droppable||this.last_droppable==this.dragged){return}this.$(\".drop\").hide();if(g.currentTarget==this.placeholder){this.$shim.css({height:this.placeholder.clientHeight})}var d=this.insert_shim();if(d===false){return}this.reset_marker();if((this.$(g.currentTarget).is(this.options.items))){this.position_dragged_in_drop_spot(g.originalEvent.offsetX,g.originalEvent.offsetY,true)}else{var j=g.originalEvent.offsetX-this.$el.offset().left;var h=g.originalEvent.offsetY-this.$el.offset().top;this.position_dragged_in_drop_spot(j,h,false)}var k=this.$shim.parent().children().not(\".shim\").not(\".placeholder\").add(this.dragged);var f=this.dimensions(k);var l;if(this.$shim.parent().is(this.$(this.placeholder).parent())){l=f}else{var c=this.$(this.placeholder).parent().children().not(\".shim\").not(\".placeholder\").not(this.dragged);l=c.length?this.dimensions(c):{width:this.$(this.placeholder).width(),height:this.$(this.placeholder).height()}}var i=this.destination_coordinates(f,l);this.update_layout(l,f,i);window.setTimeout(this.after_update.bind(this),this.animation_duration);this.dropped=true;g.stopPropagation()},on_dragend:function(c){b(this.options.el).removeClass(\"dragging\");if(!this.dropped){this.reset_marker();this.revert()}this.$(this.options.items).attr(\"draggable\",true)},revert:function(){this.$(\".drop\").hide();this.$(this.placeholder).detach().css({});this.origin_row.append(b(this.dragged).css({position:\"relative\",visibility:\"visible\",top:0,left:0,\"z-index\":\"auto\"}));this.dragged=null},equalize:function(){_.each(this.$(\".row\"),function(h){for(var e=0,g;g=h.childNodes[e];++e){if(g.nodeType==3){h.removeChild(g)}}var c=this.$(h).find(this.options.items);if(!c.length||c.length==1){return}var j=c.find(\"img\");var f=_.map(j,function(k){if(k.clientHeight===0){console.error(\"photo with 0 height\")}return k.clientHeight});var d=_.min(f);c.css({height:d+\"px\"})}.bind(this))},vertically_center_images:function(){_.each(this.$(\".row\"),function(d){var c=this.$(d).find(this.options.items);var e=c.find(\"img\");_.each(e,function(g){var f=this.$(g).height();if(f>c.height()){var h=(f-c.height())/2;this.$(g).css({top:-h+\"px\"})}else{this.$(g).css({top:0})}}.bind(this))}.bind(this))},min_ratio:function(c){var d=_.map(c,function(e){return e.clientHeight/e.clientWidth});min_ratio=_.min(d);return min_ratio},reset_marker:function(){this.$(\".row\").removeClass(\"top bottom\");this.$(this.options.items).removeClass(\"right left\");this.$(\".horizontal_marker\").css({top:0}).hide();this.$(\".vertical_marker\").css({top:0,left:0}).hide()},insert_shim:function(){var d=this.$(this.last_droppable).parent(\".row\");var c=d.clone().empty().get(0);if(this.$(this.last_droppable).hasClass(\"right\")){this.$(this.last_droppable).after(this.$shim[0]);this.$el.append(this.dragged)}else{if(this.$(this.last_droppable).hasClass(\"left\")){this.$(this.last_droppable).before(this.$shim[0]);this.$el.append(this.dragged)}else{if(d.hasClass(\"top\")){d.before(c);c.appendChild(this.$shim[0]);this.$el.append(this.dragged)}else{if(d.hasClass(\"bottom\")){d.after(c);c.appendChild(this.$shim[0]);this.$el.append(this.dragged)}else{return false}}}}},position_dragged_in_drop_spot:function(e,h,d){var g,f;if(d){var c=this.$(this.last_droppable).position()||{left:0,top:0};g=e+c.left-this.drag_x;f=h+c.top-this.drag_y}else{g=e-this.drag_x;f=h-this.drag_y}this.$(this.dragged).removeClass(\"item\").css({top:f+\"px\",left:g+\"px\",position:\"absolute\"})},dimensions:function(c){var d={};var e=(c.length-1)*10;d.width=(500-e)/c.length;d.min_ratio=this.min_ratio(c.find(\"img\"));d.height=d.width*d.min_ratio;return d},destination_coordinates:function(c,d){var e=this.$shim.parent().children().index(this.$shim);var g=this.destination_offset(c,d);var f={};f.left=((e)*c.width)+(e*10)-g.left;f.top=this.$shim.position().top+g.top;return f},destination_offset:function(c,d){var e=this.$shim.parent().children().index(this.$shim);var f=this.$(this.placeholder).parent().children().index(this.$(this.placeholder));var g={};g.left=0;if(this.$shim.parent().is(this.$(this.placeholder).parent())&&f<e){g.left=c.width}g.top=0;if(this.$(\".row\").index(this.$(this.placeholder).parent())<this.$(\".row\").index(this.$shim.parent())){if(!this.$(this.placeholder).siblings().length){g.top=-d.height}else{g.top=(d.height/d.width*d.width)-this.$(this.dragged).height()}}if(g.top==-Infinity){}return g},update_layout:function(d,c,e){this.$(this.placeholder).siblings(this.options.items).not(\".shim\").css({width:d.width+\"px\",height:d.height+\"px\"});this.$(this.placeholder).removeClass(\"active\").css({height:0,width:0});this.$shim.parent().children(this.options.items).not(\".placeholder\").css({width:c.width,height:c.height});window.setTimeout(function(){this.$(this.dragged).addClass(\"item\").css({width:c.width+\"px\",height:c.height+\"px\",top:e.top+\"px\",left:e.left+\"px\",visibility:\"visible\"})}.bind(this),0)},after_update:function(){if(!this.$shim.is(\":visible\")){this.dragged=null;return}var c=this.$(this.placeholder).parent(\".row\");this.$(this.dragged).removeClass(\"sortable-dragging\");this.$shim.replaceWith(b(this.dragged).css({position:\"relative\",top:0,left:0,\"z-index\":\"auto\"}));this.$shim.css({height:0,width:0});this.$(this.placeholder).detach().css({});if(!c.children().length){c.remove()}this.$(this.options.items).attr(\"draggable\",true);this.callback(this);this.dragged=null}})})(jQuery,Tumblr);\n(function(b,a){Tumblr.PostForms.Audio=Tumblr.PostForms.BaseView.extend({last_term:\"\",spotify_pattern:/(open\\.spotify\\.com|spotify)[\\/|:](track|album|artist|playlist|user)[\\/|:](.*)?([\\d\\w]{22})$/,soundcloud_pattern:/(http|https):\\/\\/soundcloud\\.com\\/[^\\/]+\\/(sets\\/)?[^\\/]+\\/?$/,bandcamp_pattern:/(http|https):\\/\\/(?:([^\\/]+\\.)\\.bandcamp\\.com|[^\\/]+\\.[^\\/]+)\\/(track|album)\\/[^\\/]+$/,mp3_pattern:/(.mp3)$/i,events:function(){return _.defaults({\"click .label\":\"placeholder\",\"click .optional\":\"placeholder\",\"click .audio_tabs a\":\"tab_switcher\",\"keyup #audio_search_field\":\"audio_search\",\"keydown #audio_search_field\":\"keydown\",\"keydown #post_three\":\"keydown\",\"click #audio_search_results li\":\"search_result_click\",\"keyup #post_three\":\"external_url_keyup\",\"paste #post_three\":\"external_url_paste\"},Tumblr.PostForms.BaseView.prototype.events)},initialize:function(c){this.options=c||{};this.constructor.__super__.initialize.call(this,this.options);this.$sub_template=b.trim(b(\"#audio_subtemplate\").html());this.$spotify_template=b.trim(b(\"#audio_spotify_subtemplate\").html());this.$soundcloud_template=b.trim(b(\"#audio_soundcloud_subtemplate\").html());this.$spotify_preview_template=b.trim(b(\"#audio_spotify_preview_subtemplate\").html());this.$soundcloud_track_preview_template=b.trim(b(\"#audio_soundcloud_track_preview_subtemplate\").html());this.$soundcloud_playlist_preview_template=b.trim(b(\"#audio_soundcloud_playlist_preview_subtemplate\").html());this.$bandcamp_preview_template=b.trim(b(\"#audio_bandcamp_preview_subtemplate\").html());this.$upload_list_template=b.trim(b(\"#upload_list_subtemplate\").html());this.$upload_preview_template=b.trim(b(\"#audio_upload_preview_subtemplate\").html());this.$preview_player_template=b.trim(b(\"#audio_preview_player_subtemplate\").html());this.$upload_tos_template=b.trim(b(\"#upload_tos_subtemplate\").html());this.model.on(\"change:audio_search\",this.render_search_results,this);this.model.on(\"change:audio_search_failed\",this.render_server_error,this);this.model.on(\"change:upload_progress\",this.upload_progress,this);this.model.on(\"change:upload_complete\",this.upload_complete,this);this.model.on(\"change:upload_file_error\",this.file_errors,this);this.model.on(\"change:upload_failed\",this.upload_failed,this);this.model.on(\"change:send_file\",this.display_file_list,this);this.$post_form.on(\"click\",\".dismiss_preview\",_.bind(function(d){d.preventDefault();d.stopPropagation();this.dismiss_preview();return false},this));this.$post_form.on(\"click\",\".preview_player\",_.bind(function(f){f.preventDefault();f.stopPropagation();var d=b(f.currentTarget);this.preview_track(d.data(\"stream\"));return false},this));this.$post_form.on(\"click\",\"#file_list .cancel\",_.bind(this.dismiss_upload,this));this.$post_form.on(\"click\",\"#audio_album_art .cancel\",_.bind(this.replace_artwork,this))},destroy:function(c){this.constructor.__super__.destroy.call(this,c);this.destroy_preview()},render_view:function(e){var d=_.template(this.$sub_template);this.$post_content_type.html(d(_.extend(_.clone(this.template_helpers),this.model.toJSON())));this.editor();var c=_.template(this.$upload_tos_template);this.$main_content.after(c({}));this.cache_selectors_view();this.$tos_container=b(\"#upload_tos\").hide();if(!this.model.get(\"reblog\")){this.model.init_uploader(this.$audio_file_input,{error_msg:{errorSize:\"File is too big. Max 10MB.\",errorType:\"Only audio files are allowed.\"}})}Tumblr.PlaceHolders.init({clear_on_submit:true});Tumblr.Editor.on(\"tinymce.focus\",this.editor_focus,this);this.post=this.model.get(\"post\");if(this.model.get(\"edit\")||this.model.get(\"reblog\")){this.model.on(\"post:form:animation:start\",function(){this.render_external_url();if(this.post.is_reblog){this.$audio_preview_container.addClass(\"reblog\");this.$(\".dismiss_preview\").remove()}if(this.audio_player){_.delay(function(){this.audio_player.truncate_text()}.bind(this),100)}},this)}if(typeof e===\"function\"){e()}return this},render_external_url:function(){var e=this.model.get(\"post\");var f={};if(e&&!_.isEmpty(e)){this.$tag_editor.show();this.$audio_description.show();if(!e.three){f={href:\"\",stream:e.audio_url,provider:\"upload\",artwork:e.audio_artwork,Title:e.id3_tags.Title,Artist:e.id3_tags.Artist,Album:e.id3_tags.Album};this.render_preview(f);this.switch_tab(this.$audio_upload_tab);this.$audio_upload.hide();if(this.model.get(\"edit\")||this.model.get(\"reblog\")){this.enable_submit();b(\"#upload_arwork\").val(\"\");b(\"#pre_upload\").val(\"1\")}}else{var c=e.three.match(this.spotify_pattern);var d=e.three.match(this.soundcloud_pattern);var h=e.three.match(this.bandcamp_pattern);var g=false;if(c){g=\"spotify\"}else{if(d){g=\"soundcloud\"}else{if(h){g=\"bandcamp\"}}}if(g){f={href:e.three,provider:g,artwork:\"\"};if(!c){f.artwork=e.audio_artwork;f.stream=e.audio_url;f.Title=e.id3_tags.Title;f.Artist=e.id3_tags.Artist;f.Album=e.id3_tags.Album}if(h&&e.bandcamp){f.id=e.bandcamp.id;f.type=e.bandcamp.type}this.render_preview(f)}else{this.switch_tab(this.$external_audio_tab);f.artwork=e.audio_artwork;f.href=e.audio_url;f.stream=e.audio_url;f.Title=e.id3_tags.Title;f.Artist=e.id3_tags.Artist;f.Album=e.id3_tags.Album;this.render_preview(f);this.$audio_options.hide()}}}},cache_selectors_view:function(){this.$tabs=this.$(\".audio_tabs\");this.$tab_selectors=this.$tabs.find(\"a\");this.$audio_options=this.$(\".audio_option\");this.$audio_search=this.$(\"#audio_search\");this.$audio_upload=this.$(\"#audio_upload\");this.$audio_upload_tab=this.$(\"#tab_audio_upload\");this.$external_audio_tab=this.$(\"#tab_audio_external\");this.$audio_search_field=this.$(\"#audio_search_field\");this.$audio_search_results=this.$(\"#audio_search_results\");this.$audio_results_spotify=this.$(\"#audio_search_results_spotify\");this.$audio_results_soundcloud=this.$(\"#audio_search_results_soundcloud\");this.$audio_search_error=this.$(\"#audio_search_error\");this.$audio_no_results=this.$(\"#audio_search_no_results\");this.$audio_preview_container=this.$(\".audio_preview_container\");this.$search_loader=this.$(\"#audio_search .search_loader\");this.$post_three=this.$(\"#post_three\");this.$tag_editor=b(\".tag_editor\");this.$audio_description=this.$(\"#audio_description\");this.$file_list=this.$(\"#file_list\");this.$audio_file_input=this.$(\"#audio_file_input\");this.$file_upload=this.$(\".file_upload\");this.$preview=b(\"#preview\");this.$upload_tos=b(\"#upload_tos\");this.$confirm_tos=b(\"#confirm_tos\")},editor:function(){var c=b.extend({},Tumblr.PostForms.editor_defaults,{type:this.editor_type,focus:(this.model.get(\"edit\")||this.model.get(\"reblog\"))?\"focus_end\":true});Tumblr.Editor.render(this.editor_id,c);if(this.editor_type!==\"rich\"){this.$(\"#post_two\").autoexpand().resizeanchor()}},editor_focus:function(c){this.placeholder(null,this.$(\".inset_label .label\"))},placeholder:function(d,c){if(d){d.preventDefault();c=b(d.currentTarget);if(c.is(\"label.optional\")){c=c.prevAll(\".label\")}if(this.editor_type!==\"rich\"){this.$(\"#post_two\").focus()}}c.fadeOut(250);c.nextAll(\".optional\").fadeOut(250);if(tinyMCE&&this.editor_type===\"rich\"){tinymce.execCommand(\"mceFocus\",false,c.data(\"for\"))}},keydown:function(c){if(c.keyCode===13){c.preventDefault()}},audio_search:_.debounce(function(d){this.$audio_search_error.hide();var c=this.$audio_search_field.val();if(this.spotify_pattern.test(c)||this.soundcloud_pattern.test(c)||this.bandcamp_pattern.test(c)){this.set_external(c);return}if(c!==this.last_value){this.last_value=c;if(c.length>2){this.$search_loader.show();this.model.search(c)}else{this.$audio_search_results.hide();this.$search_loader.fadeOut(this.fade_duration)}}},400),external_url_keyup:_.debounce(function(c){this.external_url(b(c.currentTarget).val())},400),external_url_paste:function(c){this.external_url(b(c.currentTarget).val())},external_url:function(c){this.$audio_description.show();this.$tag_editor.show();if(this.spotify_pattern.test(c)||this.soundcloud_pattern.test(c)||this.bandcamp_pattern.test(c)||this.mp3_pattern.test(c)){this.set_external(c);return}},set_external:function(h){var g={};var c=h.match(this.spotify_pattern);var d=h.match(this.soundcloud_pattern);var i=h.match(this.bandcamp_pattern);var e=false;if(c){if(Tumblr.use_spotify_metadata){this.model.get_spotify_data(h,_.bind(this.render_preview,this))}else{g.provider=\"spotify\";var f=c[0].split(/[\\/|:]/);f[0]=\"spotify\";g.href=f.join(\":\");e=true}}else{if(d){this.model.get_soundcloud_data(h,_.bind(this.render_preview,this))}else{if(i){this.model.get_bandcamp_data(h,_.bind(this.render_preview,this))}else{e=true;g.stream=g.href=h}}}this.$(\"#tab_audio_external\").trigger(\"click\");this.$audio_search_field.val(\"\");this.$post_three.val(h);if(e){this.render_preview(g)}},search_result_click:function(g){g.preventDefault();var d;var c=b(g.currentTarget);var f=c.data();this.render_preview(f)},render_preview:function(f){var e;var d=f.href;var g=f.provider;this.destroy_preview();f.reblog=this.post&&this.post.is_reblog;if(g===\"spotify\"){if(f.title){f.Title=f.title}if(f.artist){f.Artist=f.artist}if(f.album){f.Album=f.album}f.Track=f.track||\"\";f.Year=f.year||\"\";f.artwork=f.artwork||\"\"}else{if(g===\"soundcloud\"){if(f.title){f.Title=f.title}if(!_.isUndefined(this.post.kind)){f.kind=this.post.kind}}else{if(g===\"bandcamp\"){if(f.title){f.Title=f.title}if(f.artist){f.Artist=f.artist}if(f.album){f.Album=f.album}}}}var c=false;if(g===\"spotify\"){e=_.template(this.$spotify_preview_template)}else{if(g===\"soundcloud\"){if(f.kind===\"playlist\"){e=_.template(this.$soundcloud_playlist_preview_template)}else{e=_.template(this.$soundcloud_track_preview_template)}}else{if(g===\"bandcamp\"){e=_.template(this.$bandcamp_preview_template)}else{if(Tumblr.AudioPlayer){e=_.template(this.$preview_player_template);c=true}else{e=_.template(this.$upload_preview_template)}}}}this.$main_content.before(e(_.extend(_.clone(this.template_helpers),f)));this.$post_three.blur();this.$main_content.addClass(\"audio_preview\");this.$audio_options.hide();this.$tabs.hide();this.$audio_description.show();this.$tag_editor.show();this.$preview_player=b(\".preview_player\");this.$audio_preview_container=this.$(\".audio_preview_container\");this.$audio_preview=b(\"#audio_preview_track\");this.$id3_editors=b(\"#audio_id3_editor .inplace_edit\");this.$preuploaded_url=b(\"#preuploaded_url\");this.$artwork=b(\"#artwork\");this.$artwork_field=b(\"#upload_artwork\");this.$audio_album_art=b(\"#audio_album_art\");this.$upload_artwork=b(\"#upload_artwork\");this.$remove_artwork=b(\"#remove_artwork\");this.$pre_upload=b(\"#pre_upload\");this.$artwork_pre_upload=b(\"#artwork_pre_upload\");this.$preview_player_container=this.$audio_preview_container.find(\".audio_preview_player_container\");if(c&&Tumblr.AudioPlayer){this.$preview_player_container.children(\".audio_player_container\").remove();this.audio_player=new Tumblr.AudioPlayer({prepend_to:this.$preview_player_container,extra_classes:f.extraClasses,post_id:\"audio_preview\",service:g,tracks:[{stream_url:f.stream,cover:f.artwork,track:f.Title||\"\",artist:f.Artist||\"\",album:f.Album||\"\"}],preview:!this.model.get(\"reblog\")});if(!this.model.get(\"reblog\")){this.audio_player.$container.addClass(\"has_art\")}if(this.audio_player.flash_error){this.$audio_preview_container.addClass(\"no_player\")}if(this.audio_player.$container.hasClass(\"has_visualizer\")){this.$audio_preview_container.addClass(\"has_visualizer\")}}if(g===\"upload\"){this.$id3_editors.inplaceedit();this.$post_three.val(\"\");this.$pre_upload.val(\"1\");if(d){this.$preuploaded_url.val(d);this.$pre_upload.val(\"1\")}this.model.init_uploader(b(\"#art_upload_input\"),{drop:function(h){h.stopPropagation()},upload_url:\"/svc/post/upload_album_art\",dropZone:b(\"#upload_art\"),custom_validation:this.model.validate_artwork})}else{if(g!==\"spotify\"){this.model.init_uploader(b(\"#art_upload_input\"),{upload_url:\"/svc/post/upload_album_art\",dropZone:b(\"#upload_art\"),custom_validation:this.model.validate_artwork})}this.enable_submit();this.$post_three.val(d);this.$preuploaded_url.val(\"\");this.$pre_upload.val(\"\")}},destroy_preview:function(){b(\".audio_preview_container\").remove();this.disable_submit()},destroy_upload:function(){b(\".upload_container\").remove();this.$main_content.removeClass(\"audio_upload\")},render_search_results:function(e){var d;this.$search_loader.fadeOut(this.fade_duration);this.$audio_search_results.show();this.$audio_search_error.hide();if(e.type===\"spotify\"){d=_.template(this.$spotify_template);this.$audio_results_spotify.html(d(_.extend(_.clone(this.template_helpers),e)))}else{if(e.type==\"soundcloud\"){d=_.template(this.$soundcloud_template);this.$audio_results_soundcloud.html(d(_.extend(_.clone(this.template_helpers),e)))}else{}}var c=this.$audio_search_results.find(\"li\");if(c.length){this.$audio_no_results.hide()}else{this.$audio_no_results.show()}},render_server_error:function(c){this.$(\"#audio_search_results_\"+c).empty();var d=this.$audio_search_results.find(\"li\");if(!d.length){this.$audio_search_results.show();this.$audio_search_error.show();this.$search_loader.fadeOut(this.fade_duration)}else{this.$audio_search_error.hide()}},animate_results:function(c){c.first().fadeIn(350,function(){b(this).show()});if(c.length>0){this.animate_timer=setTimeout(_.bind(function(){this.animate_results(c.slice(1))},this),50)}else{clearTimeout(this.animate_timer)}},dismiss_preview:function(){this.destroy_preview();this.$main_content.removeClass(\"audio_preview\");this.$audio_options.filter(\".active\").show();this.$tabs.show();this.$post_three.val(\"\");this.$preuploaded_url.val(\"\");this.$file_upload.show();if(this.media_element){this.media_element.pause()}this.model.enable_uploader(this.$audio_file_input)},preview_track:function(c){if(!_.isFunction(MediaElement)){return}if(this.media_element){this.media_element.pause()}if(this.$preview_player.hasClass(\"play\")){this.$audio_preview.get(0).src=c;if(!this.media_element){this.media_element=new MediaElement(\"audio_preview_track\",{pluginPath:\"/javascript/mediaelement/\",success:function(d){d.play()},error:function(){}})}else{this.media_element.setSrc(this.$audio_preview.get(0).src);this.media_element.play()}this.$preview_player.removeClass(\"play\").addClass(\"stop\")}else{this.$preview_player.removeClass(\"stop\").addClass(\"play\")}},display_file_list:function(f,c,h){var g=(h.selector===\"#art_upload_input\")?true:false;this.$(\"#tab_audio_upload\").trigger(\"click\");this.hide_errors();var d={name:f[0].name,prettySize:Tumblr.$.format_file_size(f[0].size),className:c};var e=_.template(this.$upload_list_template);this.$main_content.before(e(_.extend(_.clone(this.template_helpers),d)));this.initiate_upload(g);this.$progress_bar=b(\".upload_container .progress_bar\");this.$processing=b(\".upload_container .processing\")},file_errors:function(d,c){this.$(\"#tab_audio_upload\").trigger(\"click\");this.display_errors(d)},initiate_upload:function(c){if(c){this.$(\"#upload_artwork\").val(\"\")}else{this.$(\"#pre_upload\").val(\"1\");this.$upload_tos.show();this.$tos_container.show();this.$main_content.addClass(\"audio_upload\")}this.$tabs.hide();this.$audio_description.show();this.$tag_editor.show();this.$file_list.show();this.$file_upload.hide();this.hide_errors()},upload_progress:function(c){this.$progress_bar.css({width:c+\"%\"});if(c>99){this.$processing.addClass(\"active\")}},upload_complete:function(c,d){if(d.selector===\"#art_upload_input\"){this.artwork_upload_complete(c)}else{this.audio_upload_complete(c)}this.destroy_upload()},audio_upload_complete:function(d){var c=b.extend({provider:\"upload\",stream:d.response[0].url,href:d.response[0].url,artwork:d.response[0].album_art_url,upload_artwork:\"1\"},d.response[0].id3);this.render_preview(c)},artwork_upload_complete:function(e){var d=e.response[0].url;this.$artwork.show();if(this.$artwork.find(\"img\").length){this.$artwork.find(\"img\").attr(\"src\",d)}else{var c=b(\"<img/>\",{src:d});this.$artwork.append(c)}this.$artwork_field.val(d);this.$remove_artwork.val(\"\");this.$artwork_pre_upload.val(\"1\");this.$audio_album_art.removeClass(\"empty\")},upload_failed:function(c){this.display_errors({error:c});this.$file_upload.show();this.$tabs.show();this.$audio_description.hide();this.$tag_editor.hide();this.$tos_container.hide();this.destroy_upload()},dismiss_upload:function(c){if(c){c.preventDefault()}this.model.cancel_upload();this.destroy_upload();this.$file_upload.show();this.$tabs.show()},replace_artwork:function(d){if(d){d.preventDefault()}var c=b(d.currentTarget);this.$artwork.hide();this.$audio_album_art.addClass(\"empty\");this.$upload_artwork.val(\"\");this.$artwork_pre_upload.val(\"\");this.$remove_artwork.val(\"1\")},tab_switcher:function(d){d.preventDefault();var c=b(d.currentTarget);this.switch_tab(c)},switch_tab:function(c){this.$tab_selectors.removeClass(\"active\");c.addClass(\"active\");this.$audio_options.removeClass(\"active\").hide();var d=this.$(c.attr(\"href\"));d.addClass(\"active\").show();if(c.attr(\"id\")!==\"tab_audio_upload\"){this.$upload_tos.hide();this.$post_form.removeClass(\"no_preview\")}else{this.$post_form.addClass(\"no_preview\")}this.hide_errors()}})})(jQuery,Tumblr);\n(function(b,a){Tumblr.PostForms.Video=Tumblr.PostForms.BaseView.extend({last_term:\"\",recognized_patterns:[],events:function(){return _.defaults({\"click .label\":\"placeholder\",\"click .optional\":\"placeholder\",\"keyup #post_one\":\"type_embed_code\",\"paste #post_one\":\"paste_embed_code\",\"focus #post_two\":\"editor_focus\"},Tumblr.PostForms.BaseView.prototype.events)},find_tags:function(f,c,h){if(!c){c=\"iframe\"}if(!h){h=\"src\"}var g=new RegExp(\"<(?:\"+c+\")(\\\\s[^>]*)?>\",\"mig\");var e=new RegExp(\".*\\\\s(?:\"+h+\")\\\\s*=\\\\s*(\\\"([^\\\"]*)\\\"|'([^']*)').*\",\"i\");var d=f.match(g);if(!d){return[]}b.each(d,function(k,j){d[k]={tag:j,prop:e.test(j)?j.replace(e,\"$2$3\"):false}});return d},match_service:function(e){var d;var c=false;b.each(this.recognized_patterns,function(f,g){d=g.exp.exec(e);if(d){c={orig_embed_code:e,url:d[1],video_id:d[2],service:g.service}}});return c},initialize:function(c){this.options=c||{};this.constructor.__super__.initialize.call(this,this.options);this.$sub_template=b.trim(b(\"#video_subtemplate\").html());this.$upload_list_template=b.trim(b(\"#video_upload_list_subtemplate\").html());this.$upload_tos_template=b.trim(b(\"#upload_tos_subtemplate\").html());b.each(Tumblr.video_regexes,b.proxy(function(f,d){this.recognized_patterns.push({exp:new RegExp(\"(?:^|\\\\s+|.*['\\\"=])((?:https?://)?(?:[^/]+\\\\.)?\"+f+\")\",\"i\"),service:d})},this));this.parse_embed_field=_.debounce(function(f){var d=this.parse_embed_code(b(f.currentTarget).val());this.$valid_embed_code.val(d?\"1\":\"\");this.change();return d},750);this.model.on(\"change:upload_progress\",this.upload_progress,this);this.model.on(\"change:upload_complete\",this.upload_complete,this);this.model.on(\"change:upload_failed\",this.file_errors,this);this.model.on(\"change:upload_file_error\",this.file_errors,this);this.model.on(\"change:send_file\",this.display_file_list,this);this.model.on(\"change:upload_file_seppuku\",this.refresh_upload_selector,this);this.$post_form.on(\"click\",\".dismiss_preview\",_.bind(function(d){d.preventDefault();this.dismiss_preview()},this));this.$post_form.on(\"click\",\"#file_list .cancel\",_.bind(this.dismiss_upload,this));this.model.on(\"post:form:animation:hide\",b.proxy(function(d){this.destroy_preview()},this))},render_view:function(e){var d=_.template(this.$sub_template);this.$post_content_type.html(d(_.extend(_.clone(this.template_helpers),this.model.toJSON())));this.editor();this.cache_selectors_view();this.messages=this.$video_preview_container.find(\".message\").data();this.post=this.model.get(\"post\");if(b.browser.safari&&(!/chrome/.test(navigator.userAgent.toLowerCase()))){this.$video_file_input.attr(\"accept\",\"\")}if(b.browser.webkit&&(/chrome/.test(navigator.userAgent.toLowerCase()))){this.$video_file_input.attr(\"accept\",\".mp4,.mov,.wmv,video/*\")}else{if(b.browser.mozilla){this.$video_file_input.attr(\"accept\",\"video/*\")}else{this.$video_file_input.attr(\"accept\",\"\")}}var c=_.template(this.$upload_tos_template);this.$main_content.after(c({}));this.$tos_container=b(\"#upload_tos\").hide();this.$confirm_tos=b(\"#confirm_tos\");if(typeof Tumblr.video_seconds_remaining===\"number\"){this.$video_upload.find(\".video_time_remaining\").text(_V_.formatTime(Tumblr.video_seconds_remaining))}this.$post_one.autoexpand({minHeight:120}).resizeanchor();if(_.isEmpty(this.post)){this.hide_editors()}if(this.model.get(\"reblog\")||(this.model.get(\"edit\")&&!this.post.is_direct_video&&!this.post.is_reblog)){}else{this.$(\".autofocus\").focus();this.model.init_uploader(this.$video_file_input,{error_msg:{errorSize:\"File is too big. Max 100MB.\",errorType:\"Only video files are allowed.\",errorTime:\"Video is too long. Must be 5 minutes or less.\"}})}Tumblr.Editor.on(\"tinymce.focus\",this.editor_focus,this);Tumblr.PlaceHolders.init({clear_on_submit:true});this.$pre_upload.val(\"\");if(this.model.get(\"edit\")||this.model.get(\"reblog\")){if(this.post.is_direct_video){this.model.on(\"post:form:animation:start\",function(){this.render_preview(b.extend({},this.post.video,{width:this.post.video.dimensions_dashboard.width,height:this.post.video.dimensions_dashboard.height,embed_code_safe:this.post.video.embed_code}));if(this.post.is_reblog){this.$video_preview_container.addClass(\"reblog\");this.$(\".dismiss_preview\").remove()}},this)}else{this.model.on(\"post:form:animation:start\",function(){if(!this.post.video_embed.service&&this.post.video_safe_iframe){this.post.video_embed.embed_code=this.post.video_safe_iframe}this.$valid_embed_code.val(\"1\");this.render_preview(this.post.video_embed);if(this.post.is_reblog){this.$video_preview_container.addClass(\"reblog\");this.$(\".dismiss_preview\").remove()}},this)}}if(typeof e===\"function\"){e()}return this},cache_selectors_view:function(){this.$video_options_container=this.$(\"#video_options_container\");this.$video_options=this.$(\".video_option\");this.$video_upload=this.$(\"#video_upload\");this.$video_embed=this.$(\"#video_embed\");this.$post_one=this.$(\"#post_one\");this.$main_content=b(\".main_content\");this.$video_caption=this.$(\"#video_caption\");this.$tag_editor=b(\".tag_editor\");this.$file_list=this.$(\"#file_list\");this.$video_file_input=this.$(\"#video_file_input\");this.$file_upload=this.$(\".file_upload\");this.$video_upload_container=this.$(\".upload_container\");this.$pre_upload=this.$(\"#pre_upload\");this.$valid_embed_code=this.$(\"#valid_embed_code\");this.$preuploaded_url=b(\"#preuploaded_url\");this.$preuploaded_ch=b(\"#preuploaded_ch\");this.$video_preview_container=this.$(\"#video_preview_container\");this.$video_preview=this.$(\"#video_preview\");this.$video_preview_loading=b(\"#video_preview_loading\");this.$post_button=b('#post_content button[type=\"submit\"]');this.$preview=b(\"#preview\");this.$input_caption=this.$post_one},refresh_upload_selector:function(c){this.$video_file_input=this.$(\"#video_file_input\")},editor:function(){var c=b.extend({},Tumblr.PostForms.editor_defaults,{type:this.editor_type,focus:(this.model.get(\"edit\")||this.model.get(\"reblog\"))?\"focus_end\":true});Tumblr.Editor.render(this.editor_id,c);if(this.editor_type!==\"rich\"){this.$(\"#post_two\").autoexpand().resizeanchor()}},editor_focus:function(c){this.placeholder(null,this.$(\".inset_label .label\"))},placeholder:function(d,c){if(d){d.preventDefault();c=b(d.currentTarget);if(c.is(\"label.optional\")){c=c.prevAll(\".label\")}if(this.editor_type!==\"rich\"){this.$(\"#post_two\").focus()}}c.fadeOut(250);c.nextAll(\".optional\").fadeOut(250);if(tinyMCE&&this.editor_type===\"rich\"){tinymce.execCommand(\"mceFocus\",false,c.data(\"for\"))}},type_embed_code:function(c){switch(c.keyCode){case 17:case 18:case 27:case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 91:case 93:return false;default:break}return this.parse_embed_field(c)},paste_embed_code:function(c){return this.parse_embed_field(c)},parse_embed_code:function(d){var f,c,e=false;if(!e&&b.trim(d).match(/^https?:\\/\\/[^\\/\\.]+\\.[^\\/]+/i)){e=this.match_service(d)}if(!e&&(f=this.find_tags(d,\"iframe|embed|script\",\"src\")).length){e=this.match_service(f[0].prop)}if(!e&&(c=this.find_tags(d,\"object\",\"data\")).length){e=this.match_service(c[0].prop)}if(!e){e=this.match_service(d)}if(!e){b.each(_.union(f,c),function(h,g){if(g.prop){e={orig_embed_code:d,url:\"\",service:\"\"};return false}});if(e){this.$video_preview_container.addClass(\"unavailable\").find(\".message\").text(this.messages.unavailable);this.$video_options_container.addClass(\"no_upload\");this.show_editors();return true}}if(!e){return false}if(this.xhr){this.xhr.abort()}this.$video_preview_container.addClass(\"loading\");this.xhr=this.model.get_video_data(d,_.bind(this.accept_embed_code,this));this.$video_options_container.hide();this.show_editors();return true},accept_embed_code:function(c){if(!(c&&c.service)){this.$video_preview_container.removeClass(\"loading\");this.$video_options_container.show();return false}this.render_preview(c);this.$valid_embed_code.val(c?\"1\":\"\");this.change();return true},render_preview:function(e){e=b.extend({width:\"500\",height:\"281\",orig_embed_code:\"\",url:\"\",service:\"\"},e);this.$input_caption.blur();this.destroy_preview();var c=b(\"#video_preview_subtemplate\");if(!c){return false}var d=_.template(b.trim(c.html()));this.$video_preview=b(d(_.extend(_.clone(this.template_helpers),e)));this.$video_preview_container.prepend(this.$video_preview);this.$video_preview_container.addClass(\"player\");this.$video_options_container.hide();this.show_editors(true);return true},show_editors:function(c){this.$video_caption.show();this.$tag_editor.show();if(c){this.$post_one.focus()}},hide_editors:function(){this.$video_caption.hide();this.$tag_editor.hide()},destroy_local_player:function(){if(this.preview_player){this.preview_player.destroy();delete this.preview_player}if(this.$local_preview){this.$local_preview.remove();delete this.$local_preview}},destroy_preview:function(){this.destroy_local_player();this.$video_preview_container.removeClass(\"player\");this.$video_preview.remove();this.$video_preview=b()},destroy_upload:function(){this.$video_upload_container.remove();this.$main_content.removeClass(\"video_upload\");this.$video_upload_container=this.$file_list=b();this.$progress_bar=this.$processing=b()},dismiss_preview:function(){this.$(\"#keep_video\").val(\"\");this.$post_one.val(\"\");this.$valid_embed_code.val(\"\");this.destroy_preview();this.$video_preview_container.removeClass(\"player loading loaded failed unavailable\");this.$video_options_container.removeClass(\"no_upload\").show();if(_.isEmpty(this.post)){this.hide_editors()}this.$preuploaded_url.val(\"\");this.$pre_upload.val(\"\");this.$tos_container.hide();this.$confirm_tos.prop(\"checked\",\"\");this.change();this.$input_caption.focus()},display_file_list:function(f,c){this.local_file=f[0];this.$pre_upload.val(\"1\");this.$confirm_tos.prop(\"checked\",\"\");this.hide_errors();var d={name:f[0].name,prettySize:Tumblr.$.format_file_size(f[0].size),className:c};this.$video_upload_container.remove();var e=_.template(this.$upload_list_template);this.$video_upload_container=b(e(_.extend(_.clone(this.template_helpers),d)));this.$file_list=this.$video_upload_container.find(\"#file_list\");this.$progress_bar=this.$video_upload_container.find(\".progress_bar\");this.$processing=this.$video_upload_container.find(\".processing\");this.$main_content.before(this.$video_upload_container);this.initiate_upload()},file_errors:function(c){this.$video_upload_container.addClass(\"error\");this.$processing.removeClass(\"active\");this.display_errors(c)},initiate_upload:function(){this.destroy_preview();this.$main_content.addClass(\"video_upload\");this.$video_options_container.hide();this.show_editors(true);this.$file_list.show();this.$tos_container.show();this.hide_errors()},upload_progress:function(c){this.$progress_bar.css({width:c+\"%\"});if(c>99){this.$processing.addClass(\"active\")}},upload_complete:function(c){this.$processing.removeClass(\"active\");this.display_title=this.local_file.name;if(!c.errors||!c.errors.length){this.$video_upload_container.addClass(\"success\");this.$preuploaded_url.val(c.response[0].key);this.$preuploaded_ch.val(c.response[0].ch);if(c.response[0].duration){this.display_title+=\" (\"+_V_.formatTime(c.response[0].duration)+\")\"}}else{this.$file_list.addClass(\"error\");this.file_errors(c.errors);this.cancel_upload();return false}this.change();this.destroy_upload();if(!(window.FileReader&&window.URL&&window.URL.createObjectURL)){this.$video_preview_container.addClass(\"unavailable\").find(\".message\").text(this.display_title||this.messages.unavailable)}else{c.width=c.response[0].width||500;c.height=c.response[0].height||281;c.height=Math.round(500/c.width*c.height);c.width=500;this.render_preview({service:\"local\",embed_code:\"\",width:c.width,height:c.height});this.$local_preview=b(\"<video/>\",{id:\"video_local_preview\",\"class\":\"video-js vjs-default-skin\",controls:true,\"data-setup\":\"{}\"});b(\"#watch_video_post_preview\").append(this.$local_preview);this.preview_player=new Tumblr.VideoPlayer({file:this.local_file,video_id:\"video_local_preview\",auto_height:false,on_file_load:_.bind(function(f,d){this.$local_preview=d.$el;this.$local_preview.attr({width:\"\",height:\"\"}).css({width:\"\",height:\"\"});this.$local_preview.addClass(\"retro_video_preview\");d.$tag.after('<div class=\"retro_fuzz\"></div>');b(\"#video_preview_post_preview\").hide();b(\"#watch_video_post_preview\").show()},this),on_error:_.bind(function(f,d){this.$video_preview_container.removeClass(\"player\").addClass(\"unavailable\").find(\".message\").text(this.display_title||this.messages.unavailable);this.destroy_preview()},this)})}},dismiss_upload:function(c){this.cancel_upload(c);this.$post_one.val(\"\");this.hide_errors()},cancel_upload:function(c){if(c){c.preventDefault()}this.model.cancel_upload();this.destroy_upload();this.hide_editors();this.$file_upload.show();this.$tos_container.hide();this.$video_options_container.show()}})})(jQuery,Tumblr);\n(function(b,a){Tumblr.PostForms.RenderPost=Backbone.View.extend({load_more_posts:function(e,f,j){var g=(typeof j==\"undefined\")?\"before\":j;var c=b(\"#new_post_buttons\").next().find(\".post\");var k=c.length?c.data(\"post-id\"):0;var i=\"/svc/post\"+f+\"/\"+j+\"/\"+k;var h=b(\"body\").scrollTop();var d=b(\"#container\").height();this.render_posts(i,b(\"#new_post, #flash_notifications\").last().parent(\"li\"),function(o,m){if(typeof e===\"number\"){b(\"html, body\").animate({scrollTop:e},250)}else{if(typeof e===\"object\"){var r=e.offset();b(\"html, body\").animate({scrollTop:r.top},250)}else{if(e){var n=b(\"#container\").height();var l=n-d;var q=h+l;b(\"html, body\").animate({scrollTop:q},0)}}}Tumblr.Events.trigger(\"posts:load\");if(window._gaq!==undefined){try{_gaq.push([\"_trackPageview\",f])}catch(p){}}try{if(window._qevents&&window.__qc){__qc.qpixelsent=[];_qevents.push({qacct:\"p-19UtqE8ngoZbM\"})}}catch(p){}},function(l){l.find('[name=\"redirect_to\"]').val(f);l.find(\".post_controls a.post_control\").each(function(n,m){b(m).attr(\"href\",b(m).attr(\"href\").replace(/([\\?\\&]redirect_to=)([^?&]+)/i,\"$1\"+encodeURIComponent(f)))})});return this},render_posts:function(c,e,f,d){b.ajax({url:c,type:\"get\",success:function(h){var g=b(b.trim(h));if(typeof d===\"function\"){d.apply(this,[g])}g.insertAfter(e);if(g.filter(\".post, .post_container\").length){b(\".no_posts_found\").remove()}if(Tumblr.AudioPlayer){_.delay(function(){Tumblr.AudioPlayer.replace_placeholders(g,true)}.bind(this),750)}if(typeof f===\"function\"){return f.apply(this,[h,g])}b(\"html, body\").animate({scrollTop:0},250)},error:function(){window.location.reload()}});return this},render:function(){var f=b(\"#new_post\").parent(\"li\").nextAll(\"li .post\").first();var c=f.length?f.data(\"id\"):0;var d=this.page_root||window.location.pathname.split(\"?\")[0].replace(/\\/$/,\"\");var e=\"/svc/post\"+d+\"/before/\"+c;b.ajax({url:e,type:\"get\",success:function(h){var g=b(h);g.find('[name=\"redirect_to\"]').val(d);g.find(\".post_controls a.post_control\").each(function(k,j){b(j).attr(\"href\",b(j).attr(\"href\").replace(/([\\?\\&]redirect_to=)([^?&]+)/i,\"$1\"+encodeURIComponent(d)))});b(\"#new_post, #flash_notifications\").last().parent(\"li\").after(g);b(\"html, body\").animate({scrollTop:0},250);if(window._gaq!==undefined){try{_gaq.push([\"_trackPageview\",d])}catch(i){}}if(window._qevents){try{_qevents.push({event:\"ajax\",qacct:\"p-19UtqE8ngoZbM\"})}catch(i){}}},error:function(){window.location.reload()}});return this}})})(jQuery,Tumblr);\n(function(c,b){var a=Backbone.View.extend({events:{focus:\"focus\",click:\"focus\",\"keypress .editor\":\"keypress\",\"keydown .editor\":\"keydown\",\"keyup .editor\":\"keyup\",\"click .tag\":\"remove_tag\",\"click #tag_suggest a\":\"__click_popover_tags\",\"mouseenter #tag_suggest a\":\"__mouseenter_popover_tags\",\"mouseleave #tag_suggest a\":\"__mouseleave_popover_tags\"},initialize:function(d){this.options=d||{};this.$editor_wrapper=this.$(\".editor_wrapper\");this.$editor=this.$(\".editor\");this.$post_tags=this.$(\".post_tags\");this.endpoint=this.options.endpoint||\"/svc/tag_suggest/\";this.store=Tumblr.USER_TAGS||[];this.threshold=2;this.limit=5;this.visible=false;this.cache={};this.popover=this.$(\"#tag_suggest\");this.form_key=c(\"#tumblr_form_key\").attr(\"content\");this.keyevents={bind_key_down:_.bind(this.document_keydown,this)};this.outside_events={click:_.bind(this.__outside_click_focus,this),focus:_.bind(this.__outside_click_focus,this)};c(document).on(\"click\",this.outside_events.click);c(document).on(\"focus\",this.outside_events.focus);document.addEventListener(\"tinymce.focus\",this.outside_events.focus,this);this.render()},__outside_click_focus:function(f){var d=c(f.currentTarget);if(!d.is(\"#tag_suggest a\")&&this.$editor.val()){this.update(this.$editor.val())}this.hide_popover()},__click_popover_tags:function(f){var d=c(f.currentTarget);var g=d.text();this.update(g);this.popover.hide();f.stopPropagation();f.preventDefault();this.focus()},__mouseenter_popover_tags:function(f){if(this.focused_item){this.focused_item.blur()}var d=c(f.currentTarget);d.focus()},__mouseleave_popover_tags:function(f){var d=c(f.currentTarget);d.blur()},_escapeRegExp:function(d){return d.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|\\~\\`\\!\\@\\#]/g,\"\\\\$&\")},hide_popover:function(){if(this.popover){this.popover.hide();this.visible=false}this.unbind_key_nav()},show_popover:function(){if(this.popover){this.popover.show();this.visible=true}this.bind_key_nav()},destroy:function(){this.undelegateEvents();c(document).off(\"click\",this.outside_events.click);c(document).off(\"focus\",this.outside_events.focus);document.removeEventListener(\"tinymce.focus\",this.outside_events.focus,this)},next:function(){this.$editor.blur();this.currentIndex++;this.set_active(\"next\")},previous:function(){this.$editor.blur();this.currentIndex--;this.set_active(\"previous\")},set_active:function(f){var d=c(\"#tag_suggest a\");var e=d.filter(\":focus\");if(e.length){this.currentIndex=(f===\"next\")?d.index(e)+1:d.index(e)-1}if(this.currentIndex>=0&&this.currentIndex<d.length){this.focused_item=d.get(this.currentIndex);this.focused_item.focus()}else{if(f===\"next\"){this.focused_item=d.get(0);this.focused_item.focus()}else{this.currentIndex=-1;this.$editor.focus()}}},bind_key_nav:function(){c(document).off(\"keydown\",this.keyevents.bind_key_down);c(document).on(\"keydown\",this.keyevents.bind_key_down)},unbind_key_nav:function(){c(document).off(\"keydown\",this.keyevents.bind_key_down)},render:function(){var e=[];var f=this.$post_tags.val();var d;if(typeof f!==\"string\"){f=\"\"}e=_.map(f.split(\",\"),function(g){return c.trim(g)});_.each(e,_.bind(function(g){this.update(g)},this))},focus:function(){this.currentIndex=-1;this.$editor.focus()},keypress:function(f){var d=f.charCode?f.charCode:f.keyCode;if(d===44){f.preventDefault();f.stopPropagation();this.update(this.$editor.val())}},keydown:function(g){if(!g){g=window.event}var f=g.which||g.keyCode;if(f===8&&!this.$editor.val()){var d=this.$(\".tag\");if(d.length&&d[d.length-1]){d.last().remove();this.update_form()}}else{if(f===13){g.preventDefault();g.stopPropagation();this.update(this.$editor.val())}else{if(f===27&&this.$editor.val()){g.preventDefault();g.stopPropagation();this.update(this.$editor.val())}else{if(f===9&&this.$editor.val()&&c(\"#tag_suggest a\").filter(\":visible\")){g.preventDefault();g.stopPropagation();this.next()}}}}this.$editor.attr(\"size\",this.$editor.val().length||5)},document_keydown:function(d){switch(d.keyCode){case 27:d.preventDefault();d.stopPropagation();d.originalEvent.stopImmediatePropagation();this.hide_popover();return;case 38:d.preventDefault();this.previous();break;case 40:d.preventDefault();this.next();break;default:break}},keyup:_.throttle(function(d){this.lookup()},50),prepare_search_data:function(){return{q:this.search_query_raw,form_key:this.form_key}},get_store:function(d){if(this.store_cache){this.results=this.store_cache;d.call(this);return}if(this.store_xhr){this.store_xhr.abort()}this.store_xhr=c.ajax({url:\"/svc/tags/featured\",dataType:\"json\"});this.store_xhr.done(_.bind(function(e){this.results=e;this.store_cache=e;if(typeof d===\"function\"){d.call(this)}},this))},get_search_results:function(d){d=d||function(){};if(this.cache[this.search_query]){this.results=this.cache[this.search_query];d.call(this);return}this.search_in_progress=true;this.results={tags:{}};this.store_xhr=c.ajax({url:this.endpoint,data:this.prepare_search_data(),dataType:\"json\",type:\"GET\"});this.store_xhr.success(_.bind(function(e){this.results=e;this.add_to_cache(this.search_query,e)},this));this.store_xhr.error(_.bind(function(e){},this));this.store_xhr.complete(_.bind(function(e){this.search_in_progress=false;d.call(this)},this))},lookup:function(){var f=c.trim(this.$editor.val());var g=f.length;var e;var d;var h;if(g>=this.threshold&&!this.init&&f!==this.init_value){this.search_query=_.escape(f);this.search_query_raw=f;if(!Tumblr.use_search_endpoint){this.get_store(_.bind(function(){e=this.filter(this.store,f);d=this.filter(this.results,f);this.suggest(e,d)},this))}else{this.get_search_results(_.bind(function(){e=this.filter(this.store,f);var i=_.compact(_.map(this.results.tags,function(k,j){if(_.indexOf(e,k.tag)===-1){return k}},this));this.suggest(e,i)},this))}}else{this.suggest([])}this.init=false;this.init_value=\"\"},add_to_cache:function(d,e){this.cache[d]=e;if(_.size(this.cache)>this.cache_size){delete this.cache[this.queries[0]];this.queries.shift()}},inject_search_substring:function(d,f){if(!this.search_query){return}var e=new RegExp(this._escapeRegExp(this.search_query),\"gi\"),g=this.decorate_search_substring;if(!e){return}_.each(d,function(j,h){if(f===\"user_tag\"){d[h]=j.replace(e,g)}if(f===\"suggestion\"){d[h].hilite_tag=j.tag.replace(e,g)}});return d},decorate_search_substring:function(d){return\"<u>\"+d+\"</u>\"},suggest:function(d,h){if(d.length||(h&&h.length)){this.show_popover();var f=_.template(c(\"#tag_suggest_subtemplate\").html());if(!Tumblr.use_search_endpoint){this.$(\"#tag_suggest .popover_inner\").html(f(_.extend({user_tags:d.sort(),suggested_tags:h},this.template_helpers)))}else{var e=this.inject_search_substring(d,\"user_tag\");var g=this.inject_search_substring(h,\"suggestion\");this.$(\"#tag_suggest .popover_inner\").html(f(_.extend({user_tags:e.sort().slice(0,this.limit),suggested_tags:g.slice(0,this.limit)},this.template_helpers)))}}else{this.hide_popover()}},remove_tag:function(d){c(d.currentTarget).remove();this.update_form()},update:function(d){d=d.replace(/[\",#]/g,\"\").replace(/</g,\"&lt;\");d=Tumblr.$.truncate(c.trim(d),140);if(d.replace(/,/g,\"\")){this.$editor.val(\"\");var g=false;var e=this.$(\".tag\");if(e.length){_.each(e,function(h){if(d===c(h).text()){g=true}})}if(!g){var f=c(\"<span/>\",{\"class\":\"tag\",text:d});this.$editor_wrapper.before(f);this.update_form();if(!_.contains(Tumblr.USER_TAGS,d)){Tumblr.USER_TAGS.push(d)}}}},update_form:function(){var d=[];_.each(this.$(\".tag\"),function(e){d.push(c(e).text())});this.$post_tags.val(d.join(\",\"))},escapeRegex:function(d){return d.replace(/[\\-\\[\\]{}()*+?.,\\\\\\^$|#\\s]/g,\"\\\\$&\")},filter:function(f,e){var d=new RegExp(this.escapeRegex(e),\"i\");return c.grep(f,function(g){return d.test(g.tag||g)})}});b.TagEditor=a})(jQuery,Tumblr);\n(function(c,a){var b=Backbone.View.extend({custom_tweet:false,services:[\"facebook\",\"twitter\"],init:true,events:{\"keyup #custom_tweet\":\"tweet_length\",\"click #custom_tweet\":\"tweet_length\",\"keyup .main_content input\":\"change\",\"keyup .main_content textarea\":\"change\",\"blur .main_content input\":\"change\",\"blur .main_content textarea\":\"change\",\"change .main_content textarea\":\"change\",\"change .main_content input\":\"change\",\"change .share_btns label\":\"toggle_share\",\"mouseenter .share_btns .twitter\":\"mouseenter\",\"mouseleave .share_btns .twitter\":\"mouseleave\",\"click #tweet_popover .dismiss\":\"dismiss_tweet\"},initialize:function(d){this.options=d||{};this.states={};this.$custom_tweet=this.$(\"#custom_tweet\");this.$tweet_length=this.$(\"#tweet_popover .length\");this.$tweet_popover=this.$(\"#tweet_popover\");this.$twitter_label=this.$(\".twitter\");this.$facebook_label=this.$(\".facebook\");this.$twitter_cb=this.$('.twitter input[type=\"checkbox\"]');this.$facebook_cb=this.$('.facebook input[type=\"checkbox\"]');this.post_type=this.options.post_type||\"regular\";this.post_markdown=(this.options.editor_type===\"markdown\")?true:false;Tumblr.Editor.on(\"tinymce.change\",this.change,this);b.register(this)},cache_form_elements:function(){this.$post_one=this.$(\"#post_one\");this.$post_two=this.$(\"#post_two\");this.$post_three=this.$(\"#post_three\")},change:function(d){if(this.custom_tweet){return}this.$custom_tweet.val(this.tweet_summary())},destroy:function(){this.undelegateEvents();this.states={};Tumblr.Editor.off(\"tinymce.change\",null,this);b.instances.splice(_.indexOf(this),1)},mouseenter:function(f){f.preventDefault();var d=c(f.currentTarget);if(!d.hasClass(\"checked\")||(Tumblr.MultiPopover.visible())){return}this.display_popover()},mouseleave:function(){clearTimeout(this.appear_delay);if(this.popover&&!Tumblr.MultiPopover.visible()){if(!this.popover.visible){this.popover.hide()}}},display_popover:function(){this.appear_delay=setTimeout(_.bind(function(){if(!this.popover){this.popover=new Tumblr.MultiPopover(this.$tweet_popover.get(0),{token:\"post-plexi\",on_show:_.bind(function(){this.$twitter_label.addClass(\"active\")},this),on_hide:_.bind(function(){this.$twitter_label.removeClass(\"active\")},this)}).show()}else{this.popover.show()}},this),200)},dismiss_tweet:function(){this.popover.hide();clearTimeout(this.appear_delay)},toggle_share:function(h){var d=c(h.currentTarget);var g=d.parent(\"li\");g.toggleClass(\"checked\");var f=g.data(\"share\");if(!g.hasClass(\"checked\")){this.states[f]=\"off\";if(this.popover){this.popover.hide()}}else{if(g.hasClass(\"twitter\")){this.display_popover()}this.states[f]=\"on\"}},set_caret:function(g){var f=c(g);var h=0;var d=f.val().indexOf(\"[URL]\")-1;if(d<h){f.val(\"  \"+f.val());d=1}if(g.setSelectionRange){g.focus();g.setSelectionRange(h,d)}else{if(g.createRange){var e=g.createRange();e.setStart(\"character\",h);e.setEnd(\"character\",d);e.select()}else{f.focus()}}},strip_html:function(h){if(!h){return h}try{var f=document.implementation.createHTMLDocument(\"\");f.body.innerHTML=Tumblr.$.strip_scripts(h);var g=f.body.textContent||f.body.innerText;return this.normalize_space(c.trim(g))}catch(d){return this.normalize_space(c.trim(Tumblr.$.strip_scripts(Tumblr.$.strip_tags(h))))}},normalize_space:function(d){return c.trim(d).replace(\"\\u00A0\",\" \").replace(/\\s\\s+/,\" \")},parse_url:function(e,f){var g=[\"source\",\"scheme\",\"authority\",\"userInfo\",\"user\",\"pass\",\"host\",\"port\",\"relative\",\"path\",\"directory\",\"file\",\"query\",\"fragment\"];var d=g.indexOf(f);if(d<0){return false}return(/^(?:([^:\\/?#]+):)?(?:\\/\\/()(?:(?:()(?:([^:@]*):?([^:@]*))?@)?([^:\\/?#]*)(?::(\\d*))?))?()(?:(()(?:(?:[^?#\\/]*\\/)*)()(?:[^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/).exec(e)[d]||\"\"},tweet_summary:function(){this.process(this.post_type);var e=\"\";var f=\" [URL]\";var g=140-30;var d=\"\";switch(this.post_type){case\"regular\":case\"conversation\":d=(this.post_one&&this.post_two)?this.post_one+\" - \"+this.post_two:(this.post_one?this.post_one:this.post_two);break;case\"photo\":case\"video\":case\"audio\":d=this.post_two;break;case\"note\":d=this.post_one;break;case\"link\":if(this.post_one&&this.post_three){d=this.post_one+\" - \"+this.post_three}else{if(this.post_one){d=this.post_one}else{if(this.post_three){d=this.post_three}else{d=this.parse_url(this.post_two,\"host\")}}}break;case\"quote\":var h=Tumblr.$.truncate(this.post_one,g-5,\"\\u2026\");d=\"\\u201c\"+h+\"\\u201d\";if(h==this.post_one&&this.post_two&&d.length<(g-5)){d+=\" - \"+this.post_two}break;default:break}if(!d){f=c.trim(f);d=\"\"}return e+Tumblr.$.truncate(d,g,\"\\u2026\")+f},tweet_length:function(j){if(this.init){this.set_caret(j.target)}switch(j.keyCode){case 17:case 18:case 27:case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 91:case 93:return false;default:break}var i=this.$custom_tweet.scrollTop();this.init=false;this.custom_tweet=true;var g=this.$custom_tweet.val();var h=g.match(/\\[URL\\]/ig);var f=(h)?(h.length*24):0;var d=140-g.length-f;if(d<1){if(h){if(g.match(/ \\[URL\\]$/)){g=g.replace(/ \\[URL\\]$/,\"\");g=Tumblr.$.truncate(g,140-f,\"\\u2026\");g+=\" [URL]\"}else{g=Tumblr.$.truncate(g,140-f,\"\\u2026\")}}else{g=Tumblr.$.truncate(g,140,\"\\u2026\")}d=0}this.$custom_tweet.val(g);this.$tweet_length.text(d);this.$tweet_length.addClass(\"active\");if(h&&d===0&&this.$custom_tweet.setSelectionRange){this.$custom_tweet.setSelectionRange(g.indexOf(\"[URL]\")-1,g.indexOf(\"[URL]\")-1)}this.$custom_tweet.scrollTop(i)},process:function(d){if(!d){return}this.cache_form_elements();switch(d){case\"conversation\":this.post_one=this.strip_html(this.$post_one.val());this.post_two=this.strip_html(this.$post_two.val());this.post_three=\"\";break;case\"quote\":this.post_one=this.process_quote(this.process_html(this.$post_one.val()),[\"\\u201c\",\"\\u201d\"],true,true);this.post_two=this.strip_html(this.process_html(this.$post_two.val()),[\"\\u2014\"],true,false);this.post_three=\"\";break;case\"regular\":case\"photo\":this.post_one=this.strip_html(this.$post_one.val());this.post_two=this.strip_html(this.process_html(this.$post_two.val()));this.post_three=\"\";break;case\"link\":this.post_one=this.strip_html(this.$post_one.val());this.post_two=this.strip_html(this.$post_two.val());this.post_three=this.strip_html(this.process_html(this.$post_three.val()));break;case\"audio\":this.post_one=this.strip_html(this.$post_one.val());this.post_two=this.strip_html(this.process_html(this.$post_two.val()));this.post_three=this.strip_html(this.$post_three.val());break;case\"video\":this.post_one=this.strip_html(this.$post_one.val());this.post_two=this.strip_html(this.process_html(this.$post_two.val()));this.post_three=\"\";break;default:break}},process_html:function(g){g=c.trim(g);if(this.post_markdown){try{var d=new Markdown.Converter();g=d.makeHtml(g)}catch(f){}}return g},process_quote:function(g,f,e,d){g=c.trim(g);if(e){while(g&&f.indexOf(g.substring(0,1))!==-1){g=g.substring(1)}}if(d){while(g&&f.indexOf(g.substring(g.length-1,g.length))!==-1){g=g.substring(0,g.length-1)}}return c.trim(g)},set_sharing:function(d){_.each(this.services,_.bind(function(e){if(d[e]){if(d[e+\"On\"]||this.states[e]===\"on\"){this.set_share(e,true)}else{this.clear_share(e)}}else{this.clear_share(e,true)}},this))},set_share:function(g,d){var f=this.$(\".\"+g).show();var e=this.$(\".\"+g+\" input\");if(d){if(this.states[g]!==\"off\"){f.addClass(\"checked\");e.prop(\"checked\",true)}}else{f.removeClass(\"checked\");e.prop(\"checked\",false)}},clear_share:function(g,e){var f=this.$(\".\"+g).removeClass(\"checked\").show();var d=this.$(\".\"+g+\" input\").prop(\"checked\",false);if(e){f.hide()}},clear_all:function(){_.each(this.services,_.bind(function(d){this.clear_share(d,true)},this))},set_type:function(d){this.post_type=d}});b.instances=[];b.register=function(d){this.instances.push(d)};b.destroy_all=function(){while(this.instances.length){this.instances[0].destroy()}};a.ShareOptions=b})(jQuery,Tumblr);\n\n(function(b){var a=a||function(c){return c};Tumblr.VideoPlayer=Backbone.View.extend({initialize:function(){this.config={controls:true,autoplay:false,techOrder:[\"html5\"],auto_height:true};this.playcount=0;if(b.isPlainObject(arguments[0])){this.config=b.extend(this.config,arguments[0]);this.video_id=this.config.video_id}else{if(typeof arguments[0]===\"string\"){this.video_id=arguments[0];if(arguments.length>1){this.config=b.extend(this.config,arguments[1])}}}this.video_player=_V_(this.video_id,this.config);this.el=this.video_player.el;this.tag=this.video_player.tag;this.$el=b(this.el);this.$tag=b(this.tag);this.$el.addClass(\"tumblr_video_player video-js\");this.vjs_controls();this.add_events();if(this.config.file){this.load_file(this.config.file);delete this.config.file}if(this.config.src){this.load_src(this.config.src)}return this},destroy:function(){this.video_player.destroy()},vjs_controls:function(){this.$video_controls=b(\"<div/>\").addClass(\"tvp_controls\").insertAfter(this.$tag);this.$video_controls.append(this.$el.find(\".vjs-big-play-button\"),this.$el.find(\".vjs-controls\").addClass(\"tvp_controls_inner\"),b('<div class=\"tvp_video_error\"><div class=\"tvp_video_error_message\">'+a(\"Video failed to load.\")+\"</div></div>\"));this.controls={big_play:this.$video_controls.find(\".vjs-big-play-button\"),container:this.$video_controls.find(\".vjs-controls\"),playpause:this.$video_controls.find(\".vjs-play-control\"),fullscreen:this.$video_controls.find(\".vjs-fullscreen-control\"),time_controls:this.$video_controls.find(\".vjs-time-controls\"),current_time:this.$video_controls.find(\".vjs-current-time\"),current_time_display:this.$video_controls.find(\".vjs-current-time-display\"),remaining_time:this.$video_controls.find(\".vjs-remaining-time\"),remaining_time_display:this.$video_controls.find(\".vjs-remaining-time-display\"),load_progress:this.$video_controls.find(\".vjs-load-progress\"),play_progress:this.$video_controls.find(\".vjs-play-progress\"),seek_handle:this.$video_controls.find(\".vjs-seek-handle\"),progress_control:this.$video_controls.find(\".vjs-progress-control\"),progress_holder:this.$video_controls.find(\".vjs-progress-holder\"),error:this.$video_controls.find(\".tvp_video_error\")};this.controls.big_play.hide();this.controls.play=b(\"<div/>\").addClass(\"tvp_play_button\").html('<span class=\"vjs-control-text\">'+a(\"Play\")+\"</span>\");this.controls.pause=b(\"<div/>\").addClass(\"tvp_pause_button\").html('<span class=\"vjs-control-text\">'+a(\"Pause\")+\"</span>\");this.controls.playpause.empty().append(this.controls.play,this.controls.pause);this.controls.progress_control.addClass(\"tvp_progress\");this.controls.progress_holder.addClass(\"tvp_progress_holder\");this.controls.load_progress.addClass(\"tvp_load_progress\");this.controls.play_progress.addClass(\"tvp_play_progress\");this.controls.seek_handle.addClass(\"tvp_seek_handle\");this.controls.current_time.addClass(\"tvp_current_time\");this.controls.remaining_time.addClass(\"tvp_remaining_time\");this.controls.time_display=b(\"<div/>\").addClass(\"tvp_time_display\").append(this.controls.time_controls);this.controls.seek_thumbs=b(\"<b/>\");this.controls.seek_time=b(\"<i/>\").text(_V_.formatTime(0));this.controls.seek_thumbs_container=b(\"<div/>\").addClass(\"tvp_seek_thumbs no_thumbs\").append(this.controls.seek_thumbs,this.controls.seek_time);this.controls.stretchy_middle=b(\"<div/>\").addClass(\"tvp_stretchy_middle\").prependTo(this.controls.container).append(this.controls.seek_thumbs_container,this.controls.progress_control,this.controls.time_display);this.controls.time_hud=b(\"<div/>\").addClass(\"tvp_time_hud\");this.controls.big_play.addClass(\"tvp_big_play_button\").append(this.controls.time_hud);this.set_duration();this.controls.fullscreen.addClass(\"tvp_fullscreen_button\").find(\".vjs-control-text\").text(a(\"Fullscreen\"));this.$video_controls.find(\".vjs-time-divider\").remove();this.$el.find(\".vjs-control\").addClass(\"tvp_control\");this.spinner=new Spinner({lines:13,length:6,width:3,radius:10,color:\"#fff\",speed:0.9,trail:34,shadow:false,hwaccel:false,className:\"tvp_spinner_object spinner\",zIndex:2000000000,top:\"50\",left:\"auto\"}).spin();this.$spinner=this.$el.find(\".vjs-loading-spinner\").addClass(\"tvp_spinner\").attr(\"tabindex\",0).empty().append(this.spinner.el);return this},load_file:function(d){if(!FileReader){return false}this.show_spinner();var c=new FileReader();c.onload=_.bind(function(f){this.video_player.src(f.target.result);if(typeof this.config.on_file_load===\"function\"){this.config.on_file_load.apply(this,[f,this])}},this);c.readAsDataURL(d);return this},load_src:function(c){this.video_player.src(c);if(typeof this.config.on_file_load===\"function\"){this.config.on_file_load.apply(this,[null,this])}return this},get_inline_style:function(d,g){var c,f,e=new RegExp(\"(?:^|[\\\\s;])\"+g+\"[^:;]*:\\\\s*([^;]*)(?:;|$)\");if(!(c=b(d).attr(\"style\"))){return\"\"}return(f=c.match(e))?f[1]:\"\"},calculate_video_height:function(d){var c;var e={};e.height=this.get_inline_style(this.$tag,\"height\");e[\"min-height\"]=this.get_inline_style(this.$tag,\"min-height\");e[\"max-height\"]=this.get_inline_style(this.$tag,\"max-height\");this.$tag.css({height:\"auto\",\"min-height\":\"0px\",\"max-height\":\"none\"});if(d){this.$tag.css(\"width\",d)}c=this.$tag.height();this.$tag.css({height:e.height,\"min-height\":e[\"min-height\"],\"max-height\":e[\"max-height\"]});return c},set_auto_height:function(d){var c=this.calculate_video_height(d);this.$el.height(c)},toggle_play:function(){return this.video_player.paused()?this.play():this.pause()},play:function(){this.video_player.play();this.playcount++},pause:function(){this.video_player.pause()},stop:function(){this.seek(0);this.video_player.pause();this.ended()},playing:function(c){if(!this.has_video_src()){return false}this.$el.removeClass(\"paused\").addClass(\"init playing\");this.video_player.bigPlayButton.show()},has_video_src:function(d){if(!this.video_player.currentSrc()){this.video_player.pause();this.video_player.bigPlayButton.show();if(d){try{d.preventDefault();d.stopPropagation()}catch(c){}}return false}return true},paused:function(c){this.$el.addClass(\"paused\")},ended:function(){this.$el.removeClass(\"init playing paused\")},seek:function(c){video_player.currentTime(c)},toggle_fullscreen:function(){return this.enter_fullscreen()},enter_fullscreen:function(){console.log(\"enter fullscreen\")},exit_fullscreen:function(){console.log(\"exit fullscreen\")},set_duration:function(c){c=(typeof c===\"number\"?c:this.video_player.duration());this.controls.time_hud.text(_V_.formatTime(c))},show_spinner:function(c){if(c&&!this.has_video_src()){return false}this.$el.addClass(\"show_spinner\")},hide_spinner:function(){this.controls.big_play.show();this.$el.removeClass(\"show_spinner\")},load_start:function(c){this.$el.removeClass(\"init playing paused has_error\");this.show_spinner(true)},waiting:function(c){this.show_spinner(true)},meta_ready:function(c){if(this.config.auto_height){this.set_auto_height()}},show_error:function(c){this.$el.addClass(\"has_error\");if(typeof this.config.on_error===\"function\"){this.config.on_error.apply(this,[c,this])}},get_playback_percent:function(){var d=this.video_player.currentTime(),c=this.video_player.duration();return c?d/c:0},seek_begin:function(){this.$el.addClass(\"scrubbing\")},seek_end:function(c){this.$el.removeClass(\"scrubbing\")},add_events:function(){this.$video_controls.click(_.bind(function(c){if(!this.$video_controls.is(c.target)){return false}this.toggle_play();return false},this));this.controls.remaining_time.click(_.bind(function(c){this.$el.removeClass(\"show_remaining_time\");return false},this));this.controls.current_time.click(_.bind(function(c){this.$el.addClass(\"show_remaining_time\");return false},this));this.controls.progress_control.on({mouseover:_.bind(function(c){this.$el.addClass(\"show_thumbnails\")},this),mouseout:_.bind(function(c){this.$el.removeClass(\"show_thumbnails\")},this),mousemove:_.bind(function(c){var d=this.calculate_distance(c);this.controls.seek_thumbs_container.css(\"left\",d*this.controls.progress_holder.width());this.controls.seek_time.text(_V_.formatTime(d*this.video_player.duration(),2))},this)});this.bind_videojs_events({play:this.playing,pause:this.paused,ended:this.ended,durationchange:function(c){return this.set_duration()},loadstart:this.load_start,waiting:this.waiting,loadedmetadata:this.meta_ready,canplay:this.hide_spinner,canplaythrough:this.hide_spinner,error:this.show_error});return this},bind_videojs_events:function(e,d){if(typeof e===\"string\"){var c=e;e={};e[c]=d}b.each(e,_.bind(function(f,g){this.video_player.addEvent(f,_.bind(g,this))},this))},get_seek_bar:function(){return this.video_player.controlBar.progressControl.seekBar},calculate_distance:function(i,g){var c=this.get_seek_bar();if(g){return c.calculateDistance(i)}var d=c.el,f=_V_.findPosX(d),h=d.offsetWidth;return Math.max(0,Math.min(1,(event.pageX-f)/h))}})})(jQuery);\n(typeof Tumblr!==\"undefined\")||(Tumblr={});(function(c,a){var b=Backbone.View.extend({events:{\"click .snap_btn .photo_btn\":\"onSnapPhotoClick\",\"click .snap_btn .gif_btn\":\"onSnapGifClick\",\"click .retake_btn\":\"onRetakeClick\",\"click .flash_toggle\":\"onFlashToggleClick\",\"click .x\":\"onCloseClick\"},initialize:function(e){navigator.getMedia=(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia);var d=c.browser;if(d.mozilla&&Math.floor(d.version)>=20){navigator.getMedia=navigator.mozGetUserMedia}window.URL=(window.URL||window.webkitURL||window.mozURL||window.msURL);this.btn=c(e.btn);this.template=(e.template)?c(e.template).html():null;this.on_show=e.on_show||function(){};this.on_hide=e.on_hide||function(){};this.on_snap=e.on_snap||function(){};this.on_retake=e.on_retake||function(){};this.is_disabled=(navigator.getMedia)?false:true;this.is_running=false;this.is_mirrored=true;this.is_flash_on=true;this.is_gif_on=false;this.is_flash_disabled=false;this.is_countdown_disabled=false;this.stream_timeout=null;this.stream=null;this.timer=null;this.timer_delay=3;this.stream_delay=60;this.gif_frame_count=4;this.gif_queue=[];this.gif_worker_url=\"\";this.video=document.createElement(\"video\");this.photo=null;this.flash=c('<div id=\"webcam_flash\"></div>');this.arrow=c('<div id=\"webcam_arrow\"></div>');if(!this.btn){return}(this.is_disabled)?this.btn.remove():this.btn.on(\"click\",c.proxy(this.onWebcamClick,this));this.setup()},setup:function(){this.video.controls=false;if(this.is_mirrored){this.video.className=\"mirrored\"}},show:function(){if(this.is_disabled){return}var e,d=false;if(this.stream_timeout){clearTimeout(this.stream_timeout);this.stream_timeout=null}if(this.is_running){c(this.video).show();if(this.stream){this.showControl(\".snap_btn\");return}}else{this.$el.show().append(c(this.video).show());this.on_show();d=true}this.is_running=true;c(\"body\").append(this.arrow.show());this.$el.addClass(\"loading\");c(window).on(\"keydown.webcam\",c.proxy(this.onKeyDown,this));c(window).on(\"keyup.webcam\",c.proxy(this.onKeyUp,this));navigator.getMedia({video:true},c.proxy(function(g){if(d){if(this.template){if(this.usingHandlebarTemplates){var f=Handlebars.compile(this.template)}else{var f=_.template(this.template)}this.$el.append(f({webcam:true,controls:true,linkthrough:true,width:500}))}this.is_running=true}this.$el.removeClass(\"loading\");this.arrow.fadeOut(200,c.proxy(function(){this.arrow.remove()},this));this.showControl(\".snap_btn\");this.stream=g;this.video.src=window.URL.createObjectURL(this.stream);this.video.play()},this),c.proxy(function(f){this.destroy();return},this))},snap:function(){var e=this,j=this.$el.find(\".countdown\"),f,g,d,i;f=document.createElement(\"canvas\");f.width=(this.is_gif_on)?this.$el.width():this.video.clientWidth;f.height=(this.is_gif_on)?this.$el.height():this.video.clientHeight;if(this.is_flash_on&&!this.is_flash_disabled){c(\"body\").append(this.flash.stop(true,true).show());setTimeout(k,250)}else{k();j.addClass(\"pulse\");setTimeout(function(){j.removeClass(\"pulse\")},500)}function k(){if(e.is_flash_on&&!e.is_flash_disabled){e.flash.fadeOut(500,c.proxy(function(){c(e).remove()},e))}g=f.getContext(\"2d\");d=f.width;i=f.height;if(e.is_mirrored){g.translate(f.width,0);g.scale(-1,1)}g.drawImage(e.video,0,0,d,i);if(e.is_gif_on){e.gifSnap(f)}else{e.preview(f)}}},gifSnap:function(d){this.gif_queue.push(d);if(this.gif_queue.length<this.gif_frame_count){setTimeout(c.proxy(this.snap,this),1000)}else{this.showControl(\".processing\");if(this.gif_worker_url){this.createGif();return}c.ajax({url:this.$el.data(\"gifworker\"),success:c.proxy(function(g){var f;try{f=new Blob([g])}catch(h){window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder;f=new BlobBuilder();f.append(g);f=f.getBlob()}this.gif_worker_url=window.URL.createObjectURL(f);this.createGif()},this)})}},createGif:function(){var e=new GIF({workerScript:this.gif_worker_url,workers:3,quality:1});for(var f=0,d=this.gif_queue.length;f<d;f++){e.addFrame(this.gif_queue[f],{delay:200})}e.on(\"finished\",c.proxy(this.onGifFinished,this));e.render()},preview:function(f){var g,d,e;this.photo=f;c(this.video).hide().before(f);this.stream_timeout=setTimeout(c.proxy(this.onStreamTimeout,this),this.stream_delay*1000);this.$el.find(\".countdown\").removeClass(\"pulse\");this.showControl(\".retake_btn\");g=(this.is_gif_on)?f.src:f.toDataURL(\"image/jpeg\");d=c(f).width();e=c(f).height();this.on_snap(g,d,e,this.is_gif_on)},retake:function(){if(!this.is_gif_on){var d=this.photo.getContext(\"2d\");d.clearRect(0,0,this.photo.width,this.photo.height)}this.is_gif_on=false;c(this.photo).remove();this.show();this.on_retake()},destroy:function(){this.$el.removeClass(\"loading\").hide().html(\"\");if(this.timer){clearInterval(this.timer)}if(this.stream_timeout){clearTimeout(this.stream_timeout)}if(this.stream){this.onStreamTimeout()}this.is_running=false;this.is_gif_on=false;this.arrow.remove();this.$el.find(\".countdown\").removeClass(\"gif\");c(window).off(\"keydown.webcam\");c(window).off(\"keyup.webcam\");this.on_hide()},countdown:function(f,h){var d=this.$el.find(\".countdown\").removeClass(\"full\").addClass(\"half\"),g=f*0.5,e=1;d.find(\".loader\").css({\"-webkit-animation-duration\":g+\"s\",\"-moz-animation-duration\":g+\"s\",\"-ms-animation-duration\":g+\"s\",\"-o-animation-duration\":g+\"s\",\"animation-duration\":g+\"s\"});this.showControl(\".countdown\");this.timer=setInterval(c.proxy(function(){if(e>1){clearInterval(this.timer);if(h){h()}}else{d.removeClass(\"half\").addClass(\"full\");e++}},this),g*1000)},showControl:function(d){this.$el.find(\".control_btn\").removeClass(\"animate\").hide();if(d){this.$el.find(d).show().addClass(\"animate\")}},onGifFinished:function(f){var e=new Image(),d=new FileReader();e.className=\"preview\";c(d).on(\"load\",c.proxy(function(g){e.src=g.target.result;this.preview(e);c(d).off()},this));this.gif_queue=[];d.readAsDataURL(f)},onWebcamClick:function(d){d.preventDefault();this.show()},onSnapGifClick:function(g){g.preventDefault();var f=this.$el.find(\".countdown\"),d=this.gif_frame_count;if(this.is_flash_on&&!this.is_flash_disabled){d+=(this.gif_frame_count-1)*0.25}this.is_gif_on=true;f.addClass(\"gif\");this.countdown(d,c.proxy(function(){f.removeClass(\"gif\")}));setTimeout(c.proxy(this.snap,this),1000)},onSnapPhotoClick:function(d){d.preventDefault();if(this.is_countdown_disabled){this.snap();return}this.countdown(this.timer_delay,c.proxy(this.snap,this))},onStreamTimeout:function(){if(this.stream){this.stream.stop();this.stream=null}this.video.src=\"\";this.stream_timeout=null},onKeyDown:function(d){switch(d.keyCode){case 17:case 18:this.is_countdown_disabled=true;break;case 16:this.is_flash_disabled=true;break}},onKeyUp:function(d){this.is_flash_disabled=false;this.is_countdown_disabled=false},onFlashToggleClick:function(d){d.preventDefault();c(d.currentTarget).toggleClass(\"off\");this.is_flash_on=!c(d.currentTarget).hasClass(\"off\")},onRetakeClick:function(d){d.preventDefault();c(d.currentTarget).hide();this.retake()},onCloseClick:function(d){d.preventDefault();this.destroy()}});a.Webcam=b})(jQuery,Tumblr);\n"}
],
[
{"endColumn":8,"endLine":4692,"scriptId":"130","startColumn":16,"startLine":4659,"url":"http://www.tumblr.com/dashboard"},{"scriptSource":"\n                        Tumblr.auto_paginate = true;\n            Tumblr.enable_dashboard_key_commands = true;\n            Tumblr.animate_scroll = true;\n\n            Tumblr.KeyCommands = new Tumblr.KeyCommandsConstructor();\n\n                        \n                new Tumblr.SearchPopover({\n                    'promo'     : false,\n                    'base_blog_search_url'  : \"/search/\",\n                    'blog_search_label'     : 'More results for \\x22%1$s\\x22'                });\n\n            \n            \n            start_processing_image_queue();\n            var default_search_text = 'Search Tumblr';\n                                                new Tumblr.Elevator;\n                                var next_page = document.getElementById('next_page_link') ? document.getElementById('next_page_link').href : false;\n                Tumblr.AutoPaginator.start();\n            \n\n                        (function($){\n                $('#logo .tooltip_container').on({\n                    mouseenter: function(e) {\n                        $(e.currentTarget).addClass('hover');\n                    },\n                    mouseleave: function(e) {\n                        $(e.currentTarget).removeClass('hover');\n                    }\n                });\n            })(jQuery)\n\n        "}
],
[
{"endColumn":0,"endLine":4782,"scriptId":"131","startColumn":8,"startLine":4702,"url":"http://www.tumblr.com/dashboard"},{"scriptSource":"\n\n    var toast_translations = {\n        // Like\n        \"%1$s liked your post\": '%1$s liked your post',\n        \"%1$s liked your photo\": '%1$s liked your photo',\n        \"%1$s liked your photoset\": '%1$s liked your photoset',\n        \"%1$s liked your panorama\": '%1$s liked your panorama',\n        \"%1$s liked your quote\": '%1$s liked your quote',\n        \"%1$s liked your link\": '%1$s liked your link',\n        \"%1$s liked your chat\": '%1$s liked your chat',\n        \"%1$s liked your video\": '%1$s liked your video',\n        \"%1$s liked your audio post\": '%1$s liked your audio post',\n        // Reblog\n        \"%1$s reblogged your post\": '%1$s reblogged your post',\n        \"%1$s reblogged your photo\": '%1$s reblogged your photo',\n        \"%1$s reblogged your photoset\": '%1$s reblogged your photoset',\n        \"%1$s reblogged your panorama\": '%1$s reblogged your panorama',\n        \"%1$s reblogged your quote\": '%1$s reblogged your quote',\n        \"%1$s reblogged your link\": '%1$s reblogged your link',\n        \"%1$s reblogged your chat\": '%1$s reblogged your chat',\n        \"%1$s reblogged your video\": '%1$s reblogged your video',\n        \"%1$s reblogged your audio post\": '%1$s reblogged your audio post',\n        // Reblog with diff\n        \"%1$s reblogged your post and added:\": '%1$s reblogged your post and added:',\n        \"%1$s reblogged your photo and added:\": '%1$s reblogged your photo and added:',\n        \"%1$s reblogged your photoset and added:\": '%1$s reblogged your photoset and added:',\n        \"%1$s reblogged your panorama and added:\": '%1$s reblogged your panorama and added:',\n        \"%1$s reblogged your quote and added:\": '%1$s reblogged your quote and added:',\n        \"%1$s reblogged your link and added:\": '%1$s reblogged your link and added:',\n        \"%1$s reblogged your chat and added:\": '%1$s reblogged your chat and added:',\n        \"%1$s reblogged your video and added:\": '%1$s reblogged your video and added:',\n        \"%1$s reblogged your audio post and added:\": '%1$s reblogged your audio post and added:',\n        // Answer\n        \"%1$s answered your question\": '%1$s answered your question',\n        // Reply or photo reply\n        \"%1$s replied to your post\": '%1$s replied to your post',\n        \"%1$s replied to your photo\": '%1$s replied to your photo',\n        \"%1$s replied to your photoset\": '%1$s replied to your photoset',\n        \"%1$s replied to your panorama\": '%1$s replied to your panorama',\n        \"%1$s replied to your quote\": '%1$s replied to your quote',\n        \"%1$s replied to your link\": '%1$s replied to your link',\n        \"%1$s replied to your chat\": '%1$s replied to your chat',\n        \"%1$s replied to your video\": '%1$s replied to your video',\n        \"%1$s replied to your audio post\": '%1$s replied to your audio post',\n        // Follow\n        \"%1$s started following %2$s\": '%1$s started following %2$s',\n        \"%1$s started following you\": '%1$s started following you',\n        // Ask\n        \"Sent to %1$s\": 'Sent to %1$s',\n        // User mention\n        \"%1$s mentioned %2$s in a post\": '%1$s mentioned %2$s in a post',\n        \"%1$s mentioned %2$s in a photo\": '%1$s mentioned %2$s in a photo',\n        \"%1$s mentioned %2$s in a photoset\": '%1$s mentioned %2$s in a photoset',\n        \"%1$s mentioned %2$s in a panorama\": '%1$s mentioned %2$s in a panorama',\n        \"%1$s mentioned %2$s in a quote\": '%1$s mentioned %2$s in a quote',\n        \"%1$s mentioned %2$s in a link\": '%1$s mentioned %2$s in a link',\n        \"%1$s mentioned %2$s in a chat\": '%1$s mentioned %2$s in a chat',\n        \"%1$s mentioned %2$s in a video\": '%1$s mentioned %2$s in a video',\n        \"%1$s mentioned %2$s in an audio post\": '%1$s mentioned %2$s in an audio post'\n    };\n\n    Tumblr.Toaster = new Tumblr.Toaster({ el: '#toaster' });\n    Tumblr.ToastKit.add_translations(toast_translations);\n\n        \n        if ((typeof Tumblr.Toaster === 'object') && (jQuery('#toaster').length === 1)) {\n\n            // Thoth polling\n            Tumblr.Thoth = new Tumblr.Thoth({\n                start_timestamp: '1384691237',\n                primary_tumblelog: 'ghostmonth',\n                check_posts: true,\n                check_inbox: true,\n                toast_mode: 1,\n                token: '45ef45f28555b7ecf52b8812e35ba802'            });\n\n        }\n\n    \n"}
],
[
{"endColumn":8,"endLine":4788,"scriptId":"132","startColumn":20,"startLine":4784,"url":"http://www.tumblr.com/dashboard"},{"scriptSource":"\n            new Tumblr.TumblelogPopover({\n                selector: \"#posts, #tumblr_radar, #recommended_tumblelogs\"\n            });\n        "}
],
[
{"endColumn":0,"endLine":4,"isContentScript":true,"scriptId":"133","startColumn":0,"startLine":0,"url":"chrome-extension://cgcfflfodgfcjgncckhjcmbibfebgfdo/jquery-1.10.1.min.js"},{"scriptSource":"/*! jQuery v1.10.1 | (c) 2005, 2013 jQuery Foundation, Inc. | jquery.org/license*/\n(function(e,t){var n,r,i=typeof t,o=e.location,a=e.document,s=a.documentElement,l=e.jQuery,u=e.$,c={},p=[],f=\"1.10.1\",d=p.concat,h=p.push,g=p.slice,m=p.indexOf,y=c.toString,v=c.hasOwnProperty,b=f.trim,x=function(e,t){return new x.fn.init(e,t,r)},w=/[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)/.source,T=/\\S+/g,C=/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g,N=/^(?:\\s*(<[\\w\\W]+>)[^>]*|#([\\w-]*))$/,k=/^<(\\w+)\\s*\\/?>(?:<\\/\\1>|)$/,E=/^[\\],:{}\\s]*$/,S=/(?:^|:|,)(?:\\s*\\[)+/g,A=/\\\\(?:[\"\\\\\\/bfnrt]|u[\\da-fA-F]{4})/g,j=/\"[^\"\\\\\\r\\n]*\"|true|false|null|-?(?:\\d+\\.|)\\d+(?:[eE][+-]?\\d+|)/g,D=/^-ms-/,L=/-([\\da-z])/gi,H=function(e,t){return t.toUpperCase()},q=function(e){(a.addEventListener||\"load\"===e.type||\"complete\"===a.readyState)&&(_(),x.ready())},_=function(){a.addEventListener?(a.removeEventListener(\"DOMContentLoaded\",q,!1),e.removeEventListener(\"load\",q,!1)):(a.detachEvent(\"onreadystatechange\",q),e.detachEvent(\"onload\",q))};x.fn=x.prototype={jquery:f,constructor:x,init:function(e,n,r){var i,o;if(!e)return this;if(\"string\"==typeof e){if(i=\"<\"===e.charAt(0)&&\">\"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:N.exec(e),!i||!i[1]&&n)return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e);if(i[1]){if(n=n instanceof x?n[0]:n,x.merge(this,x.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:a,!0)),k.test(i[1])&&x.isPlainObject(n))for(i in n)x.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}if(o=a.getElementById(i[2]),o&&o.parentNode){if(o.id!==i[2])return r.find(e);this.length=1,this[0]=o}return this.context=a,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):x.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),x.makeArray(e,this))},selector:\"\",length:0,toArray:function(){return g.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=x.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return x.each(this,e,t)},ready:function(e){return x.ready.promise().done(e),this},slice:function(){return this.pushStack(g.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(x.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:h,sort:[].sort,splice:[].splice},x.fn.init.prototype=x.fn,x.extend=x.fn.extend=function(){var e,n,r,i,o,a,s=arguments[0]||{},l=1,u=arguments.length,c=!1;for(\"boolean\"==typeof s&&(c=s,s=arguments[1]||{},l=2),\"object\"==typeof s||x.isFunction(s)||(s={}),u===l&&(s=this,--l);u>l;l++)if(null!=(o=arguments[l]))for(i in o)e=s[i],r=o[i],s!==r&&(c&&r&&(x.isPlainObject(r)||(n=x.isArray(r)))?(n?(n=!1,a=e&&x.isArray(e)?e:[]):a=e&&x.isPlainObject(e)?e:{},s[i]=x.extend(c,a,r)):r!==t&&(s[i]=r));return s},x.extend({expando:\"jQuery\"+(f+Math.random()).replace(/\\D/g,\"\"),noConflict:function(t){return e.$===x&&(e.$=u),t&&e.jQuery===x&&(e.jQuery=l),x},isReady:!1,readyWait:1,holdReady:function(e){e?x.readyWait++:x.ready(!0)},ready:function(e){if(e===!0?!--x.readyWait:!x.isReady){if(!a.body)return setTimeout(x.ready);x.isReady=!0,e!==!0&&--x.readyWait>0||(n.resolveWith(a,[x]),x.fn.trigger&&x(a).trigger(\"ready\").off(\"ready\"))}},isFunction:function(e){return\"function\"===x.type(e)},isArray:Array.isArray||function(e){return\"array\"===x.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+\"\":\"object\"==typeof e||\"function\"==typeof e?c[y.call(e)]||\"object\":typeof e},isPlainObject:function(e){var n;if(!e||\"object\"!==x.type(e)||e.nodeType||x.isWindow(e))return!1;try{if(e.constructor&&!v.call(e,\"constructor\")&&!v.call(e.constructor.prototype,\"isPrototypeOf\"))return!1}catch(r){return!1}if(x.support.ownLast)for(n in e)return v.call(e,n);for(n in e);return n===t||v.call(e,n)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||\"string\"!=typeof e)return null;\"boolean\"==typeof t&&(n=t,t=!1),t=t||a;var r=k.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=x.buildFragment([e],t,i),i&&x(i).remove(),x.merge([],r.childNodes))},parseJSON:function(n){return e.JSON&&e.JSON.parse?e.JSON.parse(n):null===n?n:\"string\"==typeof n&&(n=x.trim(n),n&&E.test(n.replace(A,\"@\").replace(j,\"]\").replace(S,\"\")))?Function(\"return \"+n)():(x.error(\"Invalid JSON: \"+n),t)},parseXML:function(n){var r,i;if(!n||\"string\"!=typeof n)return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,\"text/xml\")):(r=new ActiveXObject(\"Microsoft.XMLDOM\"),r.async=\"false\",r.loadXML(n))}catch(o){r=t}return r&&r.documentElement&&!r.getElementsByTagName(\"parsererror\").length||x.error(\"Invalid XML: \"+n),r},noop:function(){},globalEval:function(t){t&&x.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(D,\"ms-\").replace(L,H)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,o=e.length,a=M(e);if(n){if(a){for(;o>i;i++)if(r=t.apply(e[i],n),r===!1)break}else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(a){for(;o>i;i++)if(r=t.call(e[i],i,e[i]),r===!1)break}else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:b&&!b.call(\"\\ufeff\\u00a0\")?function(e){return null==e?\"\":b.call(e)}:function(e){return null==e?\"\":(e+\"\").replace(C,\"\")},makeArray:function(e,t){var n=t||[];return null!=e&&(M(Object(e))?x.merge(n,\"string\"==typeof e?[e]:e):h.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(m)return m.call(t,e,n);for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,o=0;if(\"number\"==typeof r)for(;r>o;o++)e[i++]=n[o];else while(n[o]!==t)e[i++]=n[o++];return e.length=i,e},grep:function(e,t,n){var r,i=[],o=0,a=e.length;for(n=!!n;a>o;o++)r=!!t(e[o],o),n!==r&&i.push(e[o]);return i},map:function(e,t,n){var r,i=0,o=e.length,a=M(e),s=[];if(a)for(;o>i;i++)r=t(e[i],i,n),null!=r&&(s[s.length]=r);else for(i in e)r=t(e[i],i,n),null!=r&&(s[s.length]=r);return d.apply([],s)},guid:1,proxy:function(e,n){var r,i,o;return\"string\"==typeof n&&(o=e[n],n=e,e=o),x.isFunction(e)?(r=g.call(arguments,2),i=function(){return e.apply(n||this,r.concat(g.call(arguments)))},i.guid=e.guid=e.guid||x.guid++,i):t},access:function(e,n,r,i,o,a,s){var l=0,u=e.length,c=null==r;if(\"object\"===x.type(r)){o=!0;for(l in r)x.access(e,n,l,r[l],!0,a,s)}else if(i!==t&&(o=!0,x.isFunction(i)||(s=!0),c&&(s?(n.call(e,i),n=null):(c=n,n=function(e,t,n){return c.call(x(e),n)})),n))for(;u>l;l++)n(e[l],r,s?i:i.call(e[l],l,n(e[l],r)));return o?e:c?n.call(e):u?n(e[0],r):a},now:function(){return(new Date).getTime()},swap:function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i}}),x.ready.promise=function(t){if(!n)if(n=x.Deferred(),\"complete\"===a.readyState)setTimeout(x.ready);else if(a.addEventListener)a.addEventListener(\"DOMContentLoaded\",q,!1),e.addEventListener(\"load\",q,!1);else{a.attachEvent(\"onreadystatechange\",q),e.attachEvent(\"onload\",q);var r=!1;try{r=null==e.frameElement&&a.documentElement}catch(i){}r&&r.doScroll&&function o(){if(!x.isReady){try{r.doScroll(\"left\")}catch(e){return setTimeout(o,50)}_(),x.ready()}}()}return n.promise(t)},x.each(\"Boolean Number String Function Array Date RegExp Object Error\".split(\" \"),function(e,t){c[\"[object \"+t+\"]\"]=t.toLowerCase()});function M(e){var t=e.length,n=x.type(e);return x.isWindow(e)?!1:1===e.nodeType&&t?!0:\"array\"===n||\"function\"!==n&&(0===t||\"number\"==typeof t&&t>0&&t-1 in e)}r=x(a),function(e,t){var n,r,i,o,a,s,l,u,c,p,f,d,h,g,m,y,v,b=\"sizzle\"+-new Date,w=e.document,T=0,C=0,N=lt(),k=lt(),E=lt(),S=!1,A=function(){return 0},j=typeof t,D=1<<31,L={}.hasOwnProperty,H=[],q=H.pop,_=H.push,M=H.push,O=H.slice,F=H.indexOf||function(e){var t=0,n=this.length;for(;n>t;t++)if(this[t]===e)return t;return-1},B=\"checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped\",P=\"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",R=\"(?:\\\\\\\\.|[\\\\w-]|[^\\\\x00-\\\\xa0])+\",W=R.replace(\"w\",\"w#\"),$=\"\\\\[\"+P+\"*(\"+R+\")\"+P+\"*(?:([*^$|!~]?=)\"+P+\"*(?:(['\\\"])((?:\\\\\\\\.|[^\\\\\\\\])*?)\\\\3|(\"+W+\")|)|)\"+P+\"*\\\\]\",I=\":(\"+R+\")(?:\\\\(((['\\\"])((?:\\\\\\\\.|[^\\\\\\\\])*?)\\\\3|((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|\"+$.replace(3,8)+\")*)|.*)\\\\)|)\",z=RegExp(\"^\"+P+\"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\"+P+\"+$\",\"g\"),X=RegExp(\"^\"+P+\"*,\"+P+\"*\"),U=RegExp(\"^\"+P+\"*([>+~]|\"+P+\")\"+P+\"*\"),V=RegExp(P+\"*[+~]\"),Y=RegExp(\"=\"+P+\"*([^\\\\]'\\\"]*)\"+P+\"*\\\\]\",\"g\"),J=RegExp(I),G=RegExp(\"^\"+W+\"$\"),Q={ID:RegExp(\"^#(\"+R+\")\"),CLASS:RegExp(\"^\\\\.(\"+R+\")\"),TAG:RegExp(\"^(\"+R.replace(\"w\",\"w*\")+\")\"),ATTR:RegExp(\"^\"+$),PSEUDO:RegExp(\"^\"+I),CHILD:RegExp(\"^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(\"+P+\"*(even|odd|(([+-]|)(\\\\d*)n|)\"+P+\"*(?:([+-]|)\"+P+\"*(\\\\d+)|))\"+P+\"*\\\\)|)\",\"i\"),bool:RegExp(\"^(?:\"+B+\")$\",\"i\"),needsContext:RegExp(\"^\"+P+\"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(\"+P+\"*((?:-\\\\d)?\\\\d*)\"+P+\"*\\\\)|)(?=[^-]|$)\",\"i\")},K=/^[^{]+\\{\\s*\\[native \\w/,Z=/^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/,et=/^(?:input|select|textarea|button)$/i,tt=/^h\\d$/i,nt=/'|\\\\/g,rt=RegExp(\"\\\\\\\\([\\\\da-f]{1,6}\"+P+\"?|(\"+P+\")|.)\",\"ig\"),it=function(e,t,n){var r=\"0x\"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(55296|r>>10,56320|1023&r)};try{M.apply(H=O.call(w.childNodes),w.childNodes),H[w.childNodes.length].nodeType}catch(ot){M={apply:H.length?function(e,t){_.apply(e,O.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function at(e,t,n,i){var o,a,s,l,u,c,d,m,y,x;if((t?t.ownerDocument||t:w)!==f&&p(t),t=t||f,n=n||[],!e||\"string\"!=typeof e)return n;if(1!==(l=t.nodeType)&&9!==l)return[];if(h&&!i){if(o=Z.exec(e))if(s=o[1]){if(9===l){if(a=t.getElementById(s),!a||!a.parentNode)return n;if(a.id===s)return n.push(a),n}else if(t.ownerDocument&&(a=t.ownerDocument.getElementById(s))&&v(t,a)&&a.id===s)return n.push(a),n}else{if(o[2])return M.apply(n,t.getElementsByTagName(e)),n;if((s=o[3])&&r.getElementsByClassName&&t.getElementsByClassName)return M.apply(n,t.getElementsByClassName(s)),n}if(r.qsa&&(!g||!g.test(e))){if(m=d=b,y=t,x=9===l&&e,1===l&&\"object\"!==t.nodeName.toLowerCase()){c=bt(e),(d=t.getAttribute(\"id\"))?m=d.replace(nt,\"\\\\$&\"):t.setAttribute(\"id\",m),m=\"[id='\"+m+\"'] \",u=c.length;while(u--)c[u]=m+xt(c[u]);y=V.test(e)&&t.parentNode||t,x=c.join(\",\")}if(x)try{return M.apply(n,y.querySelectorAll(x)),n}catch(T){}finally{d||t.removeAttribute(\"id\")}}}return At(e.replace(z,\"$1\"),t,n,i)}function st(e){return K.test(e+\"\")}function lt(){var e=[];function t(n,r){return e.push(n+=\" \")>o.cacheLength&&delete t[e.shift()],t[n]=r}return t}function ut(e){return e[b]=!0,e}function ct(e){var t=f.createElement(\"div\");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function pt(e,t,n){e=e.split(\"|\");var r,i=e.length,a=n?null:t;while(i--)(r=o.attrHandle[e[i]])&&r!==t||(o.attrHandle[e[i]]=a)}function ft(e,t){var n=e.getAttributeNode(t);return n&&n.specified?n.value:e[t]===!0?t.toLowerCase():null}function dt(e,t){return e.getAttribute(t,\"type\"===t.toLowerCase()?1:2)}function ht(e){return\"input\"===e.nodeName.toLowerCase()?e.defaultValue:t}function gt(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||D)-(~e.sourceIndex||D);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function mt(e){return function(t){var n=t.nodeName.toLowerCase();return\"input\"===n&&t.type===e}}function yt(e){return function(t){var n=t.nodeName.toLowerCase();return(\"input\"===n||\"button\"===n)&&t.type===e}}function vt(e){return ut(function(t){return t=+t,ut(function(n,r){var i,o=e([],n.length,t),a=o.length;while(a--)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}s=at.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?\"HTML\"!==t.nodeName:!1},r=at.support={},p=at.setDocument=function(e){var n=e?e.ownerDocument||e:w,i=n.parentWindow;return n!==f&&9===n.nodeType&&n.documentElement?(f=n,d=n.documentElement,h=!s(n),i&&i.frameElement&&i.attachEvent(\"onbeforeunload\",function(){p()}),r.attributes=ct(function(e){return e.innerHTML=\"<a href='#'></a>\",pt(\"type|href|height|width\",dt,\"#\"===e.firstChild.getAttribute(\"href\")),pt(B,ft,null==e.getAttribute(\"disabled\")),e.className=\"i\",!e.getAttribute(\"className\")}),r.input=ct(function(e){return e.innerHTML=\"<input>\",e.firstChild.setAttribute(\"value\",\"\"),\"\"===e.firstChild.getAttribute(\"value\")}),pt(\"value\",ht,r.attributes&&r.input),r.getElementsByTagName=ct(function(e){return e.appendChild(n.createComment(\"\")),!e.getElementsByTagName(\"*\").length}),r.getElementsByClassName=ct(function(e){return e.innerHTML=\"<div class='a'></div><div class='a i'></div>\",e.firstChild.className=\"i\",2===e.getElementsByClassName(\"i\").length}),r.getById=ct(function(e){return d.appendChild(e).id=b,!n.getElementsByName||!n.getElementsByName(b).length}),r.getById?(o.find.ID=function(e,t){if(typeof t.getElementById!==j&&h){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},o.filter.ID=function(e){var t=e.replace(rt,it);return function(e){return e.getAttribute(\"id\")===t}}):(delete o.find.ID,o.filter.ID=function(e){var t=e.replace(rt,it);return function(e){var n=typeof e.getAttributeNode!==j&&e.getAttributeNode(\"id\");return n&&n.value===t}}),o.find.TAG=r.getElementsByTagName?function(e,n){return typeof n.getElementsByTagName!==j?n.getElementsByTagName(e):t}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if(\"*\"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},o.find.CLASS=r.getElementsByClassName&&function(e,n){return typeof n.getElementsByClassName!==j&&h?n.getElementsByClassName(e):t},m=[],g=[],(r.qsa=st(n.querySelectorAll))&&(ct(function(e){e.innerHTML=\"<select><option selected=''></option></select>\",e.querySelectorAll(\"[selected]\").length||g.push(\"\\\\[\"+P+\"*(?:value|\"+B+\")\"),e.querySelectorAll(\":checked\").length||g.push(\":checked\")}),ct(function(e){var t=n.createElement(\"input\");t.setAttribute(\"type\",\"hidden\"),e.appendChild(t).setAttribute(\"t\",\"\"),e.querySelectorAll(\"[t^='']\").length&&g.push(\"[*^$]=\"+P+\"*(?:''|\\\"\\\")\"),e.querySelectorAll(\":enabled\").length||g.push(\":enabled\",\":disabled\"),e.querySelectorAll(\"*,:x\"),g.push(\",.*:\")})),(r.matchesSelector=st(y=d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector))&&ct(function(e){r.disconnectedMatch=y.call(e,\"div\"),y.call(e,\"[s!='']:x\"),m.push(\"!=\",I)}),g=g.length&&RegExp(g.join(\"|\")),m=m.length&&RegExp(m.join(\"|\")),v=st(d.contains)||d.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},r.sortDetached=ct(function(e){return 1&e.compareDocumentPosition(n.createElement(\"div\"))}),A=d.compareDocumentPosition?function(e,t){if(e===t)return S=!0,0;var i=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t);return i?1&i||!r.sortDetached&&t.compareDocumentPosition(e)===i?e===n||v(w,e)?-1:t===n||v(w,t)?1:c?F.call(c,e)-F.call(c,t):0:4&i?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var r,i=0,o=e.parentNode,a=t.parentNode,s=[e],l=[t];if(e===t)return S=!0,0;if(!o||!a)return e===n?-1:t===n?1:o?-1:a?1:c?F.call(c,e)-F.call(c,t):0;if(o===a)return gt(e,t);r=e;while(r=r.parentNode)s.unshift(r);r=t;while(r=r.parentNode)l.unshift(r);while(s[i]===l[i])i++;return i?gt(s[i],l[i]):s[i]===w?-1:l[i]===w?1:0},n):f},at.matches=function(e,t){return at(e,null,null,t)},at.matchesSelector=function(e,t){if((e.ownerDocument||e)!==f&&p(e),t=t.replace(Y,\"='$1']\"),!(!r.matchesSelector||!h||m&&m.test(t)||g&&g.test(t)))try{var n=y.call(e,t);if(n||r.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(i){}return at(t,f,null,[e]).length>0},at.contains=function(e,t){return(e.ownerDocument||e)!==f&&p(e),v(e,t)},at.attr=function(e,n){(e.ownerDocument||e)!==f&&p(e);var i=o.attrHandle[n.toLowerCase()],a=i&&L.call(o.attrHandle,n.toLowerCase())?i(e,n,!h):t;return a===t?r.attributes||!h?e.getAttribute(n):(a=e.getAttributeNode(n))&&a.specified?a.value:null:a},at.error=function(e){throw Error(\"Syntax error, unrecognized expression: \"+e)},at.uniqueSort=function(e){var t,n=[],i=0,o=0;if(S=!r.detectDuplicates,c=!r.sortStable&&e.slice(0),e.sort(A),S){while(t=e[o++])t===e[o]&&(i=n.push(o));while(i--)e.splice(n[i],1)}return e},a=at.getText=function(e){var t,n=\"\",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if(\"string\"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=a(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=a(t);return n},o=at.selectors={cacheLength:50,createPseudo:ut,match:Q,attrHandle:{},find:{},relative:{\">\":{dir:\"parentNode\",first:!0},\" \":{dir:\"parentNode\"},\"+\":{dir:\"previousSibling\",first:!0},\"~\":{dir:\"previousSibling\"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(rt,it),e[3]=(e[4]||e[5]||\"\").replace(rt,it),\"~=\"===e[2]&&(e[3]=\" \"+e[3]+\" \"),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),\"nth\"===e[1].slice(0,3)?(e[3]||at.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(\"even\"===e[3]||\"odd\"===e[3])),e[5]=+(e[7]+e[8]||\"odd\"===e[3])):e[3]&&at.error(e[0]),e},PSEUDO:function(e){var n,r=!e[5]&&e[2];return Q.CHILD.test(e[0])?null:(e[3]&&e[4]!==t?e[2]=e[4]:r&&J.test(r)&&(n=bt(r,!0))&&(n=r.indexOf(\")\",r.length-n)-r.length)&&(e[0]=e[0].slice(0,n),e[2]=r.slice(0,n)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(rt,it).toLowerCase();return\"*\"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=N[e+\" \"];return t||(t=RegExp(\"(^|\"+P+\")\"+e+\"(\"+P+\"|$)\"))&&N(e,function(e){return t.test(\"string\"==typeof e.className&&e.className||typeof e.getAttribute!==j&&e.getAttribute(\"class\")||\"\")})},ATTR:function(e,t,n){return function(r){var i=at.attr(r,e);return null==i?\"!=\"===t:t?(i+=\"\",\"=\"===t?i===n:\"!=\"===t?i!==n:\"^=\"===t?n&&0===i.indexOf(n):\"*=\"===t?n&&i.indexOf(n)>-1:\"$=\"===t?n&&i.slice(-n.length)===n:\"~=\"===t?(\" \"+i+\" \").indexOf(n)>-1:\"|=\"===t?i===n||i.slice(0,n.length+1)===n+\"-\":!1):!0}},CHILD:function(e,t,n,r,i){var o=\"nth\"!==e.slice(0,3),a=\"last\"!==e.slice(-4),s=\"of-type\"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,l){var u,c,p,f,d,h,g=o!==a?\"nextSibling\":\"previousSibling\",m=t.parentNode,y=s&&t.nodeName.toLowerCase(),v=!l&&!s;if(m){if(o){while(g){p=t;while(p=p[g])if(s?p.nodeName.toLowerCase()===y:1===p.nodeType)return!1;h=g=\"only\"===e&&!h&&\"nextSibling\"}return!0}if(h=[a?m.firstChild:m.lastChild],a&&v){c=m[b]||(m[b]={}),u=c[e]||[],d=u[0]===T&&u[1],f=u[0]===T&&u[2],p=d&&m.childNodes[d];while(p=++d&&p&&p[g]||(f=d=0)||h.pop())if(1===p.nodeType&&++f&&p===t){c[e]=[T,d,f];break}}else if(v&&(u=(t[b]||(t[b]={}))[e])&&u[0]===T)f=u[1];else while(p=++d&&p&&p[g]||(f=d=0)||h.pop())if((s?p.nodeName.toLowerCase()===y:1===p.nodeType)&&++f&&(v&&((p[b]||(p[b]={}))[e]=[T,f]),p===t))break;return f-=i,f===r||0===f%r&&f/r>=0}}},PSEUDO:function(e,t){var n,r=o.pseudos[e]||o.setFilters[e.toLowerCase()]||at.error(\"unsupported pseudo: \"+e);return r[b]?r(t):r.length>1?(n=[e,e,\"\",t],o.setFilters.hasOwnProperty(e.toLowerCase())?ut(function(e,n){var i,o=r(e,t),a=o.length;while(a--)i=F.call(e,o[a]),e[i]=!(n[i]=o[a])}):function(e){return r(e,0,n)}):r}},pseudos:{not:ut(function(e){var t=[],n=[],r=l(e.replace(z,\"$1\"));return r[b]?ut(function(e,t,n,i){var o,a=r(e,null,i,[]),s=e.length;while(s--)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),!n.pop()}}),has:ut(function(e){return function(t){return at(e,t).length>0}}),contains:ut(function(e){return function(t){return(t.textContent||t.innerText||a(t)).indexOf(e)>-1}}),lang:ut(function(e){return G.test(e||\"\")||at.error(\"unsupported lang: \"+e),e=e.replace(rt,it).toLowerCase(),function(t){var n;do if(n=h?t.lang:t.getAttribute(\"xml:lang\")||t.getAttribute(\"lang\"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+\"-\");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===d},focus:function(e){return e===f.activeElement&&(!f.hasFocus||f.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return\"input\"===t&&!!e.checked||\"option\"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>\"@\"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!o.pseudos.empty(e)},header:function(e){return tt.test(e.nodeName)},input:function(e){return et.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return\"input\"===t&&\"button\"===e.type||\"button\"===t},text:function(e){var t;return\"input\"===e.nodeName.toLowerCase()&&\"text\"===e.type&&(null==(t=e.getAttribute(\"type\"))||t.toLowerCase()===e.type)},first:vt(function(){return[0]}),last:vt(function(e,t){return[t-1]}),eq:vt(function(e,t,n){return[0>n?n+t:n]}),even:vt(function(e,t){var n=0;for(;t>n;n+=2)e.push(n);return e}),odd:vt(function(e,t){var n=1;for(;t>n;n+=2)e.push(n);return e}),lt:vt(function(e,t,n){var r=0>n?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:vt(function(e,t,n){var r=0>n?n+t:n;for(;t>++r;)e.push(r);return e})}};for(n in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})o.pseudos[n]=mt(n);for(n in{submit:!0,reset:!0})o.pseudos[n]=yt(n);function bt(e,t){var n,r,i,a,s,l,u,c=k[e+\" \"];if(c)return t?0:c.slice(0);s=e,l=[],u=o.preFilter;while(s){(!n||(r=X.exec(s)))&&(r&&(s=s.slice(r[0].length)||s),l.push(i=[])),n=!1,(r=U.exec(s))&&(n=r.shift(),i.push({value:n,type:r[0].replace(z,\" \")}),s=s.slice(n.length));for(a in o.filter)!(r=Q[a].exec(s))||u[a]&&!(r=u[a](r))||(n=r.shift(),i.push({value:n,type:a,matches:r}),s=s.slice(n.length));if(!n)break}return t?s.length:s?at.error(e):k(e,l).slice(0)}function xt(e){var t=0,n=e.length,r=\"\";for(;n>t;t++)r+=e[t].value;return r}function wt(e,t,n){var r=t.dir,o=n&&\"parentNode\"===r,a=C++;return t.first?function(t,n,i){while(t=t[r])if(1===t.nodeType||o)return e(t,n,i)}:function(t,n,s){var l,u,c,p=T+\" \"+a;if(s){while(t=t[r])if((1===t.nodeType||o)&&e(t,n,s))return!0}else while(t=t[r])if(1===t.nodeType||o)if(c=t[b]||(t[b]={}),(u=c[r])&&u[0]===p){if((l=u[1])===!0||l===i)return l===!0}else if(u=c[r]=[p],u[1]=e(t,n,s)||i,u[1]===!0)return!0}}function Tt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function Ct(e,t,n,r,i){var o,a=[],s=0,l=e.length,u=null!=t;for(;l>s;s++)(o=e[s])&&(!n||n(o,r,i))&&(a.push(o),u&&t.push(s));return a}function Nt(e,t,n,r,i,o){return r&&!r[b]&&(r=Nt(r)),i&&!i[b]&&(i=Nt(i,o)),ut(function(o,a,s,l){var u,c,p,f=[],d=[],h=a.length,g=o||St(t||\"*\",s.nodeType?[s]:s,[]),m=!e||!o&&t?g:Ct(g,f,e,s,l),y=n?i||(o?e:h||r)?[]:a:m;if(n&&n(m,y,s,l),r){u=Ct(y,d),r(u,[],s,l),c=u.length;while(c--)(p=u[c])&&(y[d[c]]=!(m[d[c]]=p))}if(o){if(i||e){if(i){u=[],c=y.length;while(c--)(p=y[c])&&u.push(m[c]=p);i(null,y=[],u,l)}c=y.length;while(c--)(p=y[c])&&(u=i?F.call(o,p):f[c])>-1&&(o[u]=!(a[u]=p))}}else y=Ct(y===a?y.splice(h,y.length):y),i?i(null,a,y,l):M.apply(a,y)})}function kt(e){var t,n,r,i=e.length,a=o.relative[e[0].type],s=a||o.relative[\" \"],l=a?1:0,c=wt(function(e){return e===t},s,!0),p=wt(function(e){return F.call(t,e)>-1},s,!0),f=[function(e,n,r){return!a&&(r||n!==u)||((t=n).nodeType?c(e,n,r):p(e,n,r))}];for(;i>l;l++)if(n=o.relative[e[l].type])f=[wt(Tt(f),n)];else{if(n=o.filter[e[l].type].apply(null,e[l].matches),n[b]){for(r=++l;i>r;r++)if(o.relative[e[r].type])break;return Nt(l>1&&Tt(f),l>1&&xt(e.slice(0,l-1).concat({value:\" \"===e[l-2].type?\"*\":\"\"})).replace(z,\"$1\"),n,r>l&&kt(e.slice(l,r)),i>r&&kt(e=e.slice(r)),i>r&&xt(e))}f.push(n)}return Tt(f)}function Et(e,t){var n=0,r=t.length>0,a=e.length>0,s=function(s,l,c,p,d){var h,g,m,y=[],v=0,b=\"0\",x=s&&[],w=null!=d,C=u,N=s||a&&o.find.TAG(\"*\",d&&l.parentNode||l),k=T+=null==C?1:Math.random()||.1;for(w&&(u=l!==f&&l,i=n);null!=(h=N[b]);b++){if(a&&h){g=0;while(m=e[g++])if(m(h,l,c)){p.push(h);break}w&&(T=k,i=++n)}r&&((h=!m&&h)&&v--,s&&x.push(h))}if(v+=b,r&&b!==v){g=0;while(m=t[g++])m(x,y,l,c);if(s){if(v>0)while(b--)x[b]||y[b]||(y[b]=q.call(p));y=Ct(y)}M.apply(p,y),w&&!s&&y.length>0&&v+t.length>1&&at.uniqueSort(p)}return w&&(T=k,u=C),x};return r?ut(s):s}l=at.compile=function(e,t){var n,r=[],i=[],o=E[e+\" \"];if(!o){t||(t=bt(e)),n=t.length;while(n--)o=kt(t[n]),o[b]?r.push(o):i.push(o);o=E(e,Et(i,r))}return o};function St(e,t,n){var r=0,i=t.length;for(;i>r;r++)at(e,t[r],n);return n}function At(e,t,n,i){var a,s,u,c,p,f=bt(e);if(!i&&1===f.length){if(s=f[0]=f[0].slice(0),s.length>2&&\"ID\"===(u=s[0]).type&&r.getById&&9===t.nodeType&&h&&o.relative[s[1].type]){if(t=(o.find.ID(u.matches[0].replace(rt,it),t)||[])[0],!t)return n;e=e.slice(s.shift().value.length)}a=Q.needsContext.test(e)?0:s.length;while(a--){if(u=s[a],o.relative[c=u.type])break;if((p=o.find[c])&&(i=p(u.matches[0].replace(rt,it),V.test(s[0].type)&&t.parentNode||t))){if(s.splice(a,1),e=i.length&&xt(s),!e)return M.apply(n,i),n;break}}}return l(e,f)(i,t,!h,n,V.test(e)),n}o.pseudos.nth=o.pseudos.eq;function jt(){}jt.prototype=o.filters=o.pseudos,o.setFilters=new jt,r.sortStable=b.split(\"\").sort(A).join(\"\")===b,p(),[0,0].sort(A),r.detectDuplicates=S,x.find=at,x.expr=at.selectors,x.expr[\":\"]=x.expr.pseudos,x.unique=at.uniqueSort,x.text=at.getText,x.isXMLDoc=at.isXML,x.contains=at.contains}(e);var O={};function F(e){var t=O[e]={};return x.each(e.match(T)||[],function(e,n){t[n]=!0}),t}x.Callbacks=function(e){e=\"string\"==typeof e?O[e]||F(e):x.extend({},e);var n,r,i,o,a,s,l=[],u=!e.once&&[],c=function(t){for(r=e.memory&&t,i=!0,a=s||0,s=0,o=l.length,n=!0;l&&o>a;a++)if(l[a].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}n=!1,l&&(u?u.length&&c(u.shift()):r?l=[]:p.disable())},p={add:function(){if(l){var t=l.length;(function i(t){x.each(t,function(t,n){var r=x.type(n);\"function\"===r?e.unique&&p.has(n)||l.push(n):n&&n.length&&\"string\"!==r&&i(n)})})(arguments),n?o=l.length:r&&(s=t,c(r))}return this},remove:function(){return l&&x.each(arguments,function(e,t){var r;while((r=x.inArray(t,l,r))>-1)l.splice(r,1),n&&(o>=r&&o--,a>=r&&a--)}),this},has:function(e){return e?x.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],o=0,this},disable:function(){return l=u=r=t,this},disabled:function(){return!l},lock:function(){return u=t,r||p.disable(),this},locked:function(){return!u},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!l||i&&!u||(n?u.push(t):c(t)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!i}};return p},x.extend({Deferred:function(e){var t=[[\"resolve\",\"done\",x.Callbacks(\"once memory\"),\"resolved\"],[\"reject\",\"fail\",x.Callbacks(\"once memory\"),\"rejected\"],[\"notify\",\"progress\",x.Callbacks(\"memory\")]],n=\"pending\",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return x.Deferred(function(n){x.each(t,function(t,o){var a=o[0],s=x.isFunction(e[t])&&e[t];i[o[1]](function(){var e=s&&s.apply(this,arguments);e&&x.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a+\"With\"](this===r?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?x.extend(e,r):r}},i={};return r.pipe=r.then,x.each(t,function(e,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+\"With\"](this===i?r:this,arguments),this},i[o[0]+\"With\"]=a.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=g.call(arguments),r=n.length,i=1!==r||e&&x.isFunction(e.promise)?r:0,o=1===i?e:x.Deferred(),a=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?g.call(arguments):r,n===s?o.notifyWith(t,n):--i||o.resolveWith(t,n)}},s,l,u;if(r>1)for(s=Array(r),l=Array(r),u=Array(r);r>t;t++)n[t]&&x.isFunction(n[t].promise)?n[t].promise().done(a(t,u,n)).fail(o.reject).progress(a(t,l,s)):--i;return i||o.resolveWith(u,n),o.promise()}}),x.support=function(t){var n,r,o,s,l,u,c,p,f,d=a.createElement(\"div\");if(d.setAttribute(\"className\",\"t\"),d.innerHTML=\"  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>\",n=d.getElementsByTagName(\"*\")||[],r=d.getElementsByTagName(\"a\")[0],!r||!r.style||!n.length)return t;s=a.createElement(\"select\"),u=s.appendChild(a.createElement(\"option\")),o=d.getElementsByTagName(\"input\")[0],r.style.cssText=\"top:1px;float:left;opacity:.5\",t.getSetAttribute=\"t\"!==d.className,t.leadingWhitespace=3===d.firstChild.nodeType,t.tbody=!d.getElementsByTagName(\"tbody\").length,t.htmlSerialize=!!d.getElementsByTagName(\"link\").length,t.style=/top/.test(r.getAttribute(\"style\")),t.hrefNormalized=\"/a\"===r.getAttribute(\"href\"),t.opacity=/^0.5/.test(r.style.opacity),t.cssFloat=!!r.style.cssFloat,t.checkOn=!!o.value,t.optSelected=u.selected,t.enctype=!!a.createElement(\"form\").enctype,t.html5Clone=\"<:nav></:nav>\"!==a.createElement(\"nav\").cloneNode(!0).outerHTML,t.inlineBlockNeedsLayout=!1,t.shrinkWrapBlocks=!1,t.pixelPosition=!1,t.deleteExpando=!0,t.noCloneEvent=!0,t.reliableMarginRight=!0,t.boxSizingReliable=!0,o.checked=!0,t.noCloneChecked=o.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!u.disabled;try{delete d.test}catch(h){t.deleteExpando=!1}o=a.createElement(\"input\"),o.setAttribute(\"value\",\"\"),t.input=\"\"===o.getAttribute(\"value\"),o.value=\"t\",o.setAttribute(\"type\",\"radio\"),t.radioValue=\"t\"===o.value,o.setAttribute(\"checked\",\"t\"),o.setAttribute(\"name\",\"t\"),l=a.createDocumentFragment(),l.appendChild(o),t.appendChecked=o.checked,t.checkClone=l.cloneNode(!0).cloneNode(!0).lastChild.checked,d.attachEvent&&(d.attachEvent(\"onclick\",function(){t.noCloneEvent=!1}),d.cloneNode(!0).click());for(f in{submit:!0,change:!0,focusin:!0})d.setAttribute(c=\"on\"+f,\"t\"),t[f+\"Bubbles\"]=c in e||d.attributes[c].expando===!1;d.style.backgroundClip=\"content-box\",d.cloneNode(!0).style.backgroundClip=\"\",t.clearCloneStyle=\"content-box\"===d.style.backgroundClip;for(f in x(t))break;return t.ownLast=\"0\"!==f,x(function(){var n,r,o,s=\"padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;\",l=a.getElementsByTagName(\"body\")[0];l&&(n=a.createElement(\"div\"),n.style.cssText=\"border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px\",l.appendChild(n).appendChild(d),d.innerHTML=\"<table><tr><td></td><td>t</td></tr></table>\",o=d.getElementsByTagName(\"td\"),o[0].style.cssText=\"padding:0;margin:0;border:0;display:none\",p=0===o[0].offsetHeight,o[0].style.display=\"\",o[1].style.display=\"none\",t.reliableHiddenOffsets=p&&0===o[0].offsetHeight,d.innerHTML=\"\",d.style.cssText=\"box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;\",x.swap(l,null!=l.style.zoom?{zoom:1}:{},function(){t.boxSizing=4===d.offsetWidth}),e.getComputedStyle&&(t.pixelPosition=\"1%\"!==(e.getComputedStyle(d,null)||{}).top,t.boxSizingReliable=\"4px\"===(e.getComputedStyle(d,null)||{width:\"4px\"}).width,r=d.appendChild(a.createElement(\"div\")),r.style.cssText=d.style.cssText=s,r.style.marginRight=r.style.width=\"0\",d.style.width=\"1px\",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),typeof d.style.zoom!==i&&(d.innerHTML=\"\",d.style.cssText=s+\"width:1px;padding:1px;display:inline;zoom:1\",t.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display=\"block\",d.innerHTML=\"<div></div>\",d.firstChild.style.width=\"5px\",t.shrinkWrapBlocks=3!==d.offsetWidth,t.inlineBlockNeedsLayout&&(l.style.zoom=1)),l.removeChild(n),n=d=o=r=null)\n}),n=s=l=u=r=o=null,t}({});var B=/(?:\\{[\\s\\S]*\\}|\\[[\\s\\S]*\\])$/,P=/([A-Z])/g;function R(e,n,r,i){if(x.acceptData(e)){var o,a,s=x.expando,l=e.nodeType,u=l?x.cache:e,c=l?e[s]:e[s]&&s;if(c&&u[c]&&(i||u[c].data)||r!==t||\"string\"!=typeof n)return c||(c=l?e[s]=p.pop()||x.guid++:s),u[c]||(u[c]=l?{}:{toJSON:x.noop}),(\"object\"==typeof n||\"function\"==typeof n)&&(i?u[c]=x.extend(u[c],n):u[c].data=x.extend(u[c].data,n)),a=u[c],i||(a.data||(a.data={}),a=a.data),r!==t&&(a[x.camelCase(n)]=r),\"string\"==typeof n?(o=a[n],null==o&&(o=a[x.camelCase(n)])):o=a,o}}function W(e,t,n){if(x.acceptData(e)){var r,i,o=e.nodeType,a=o?x.cache:e,s=o?e[x.expando]:x.expando;if(a[s]){if(t&&(r=n?a[s]:a[s].data)){x.isArray(t)?t=t.concat(x.map(t,x.camelCase)):t in r?t=[t]:(t=x.camelCase(t),t=t in r?[t]:t.split(\" \")),i=t.length;while(i--)delete r[t[i]];if(n?!I(r):!x.isEmptyObject(r))return}(n||(delete a[s].data,I(a[s])))&&(o?x.cleanData([e],!0):x.support.deleteExpando||a!=a.window?delete a[s]:a[s]=null)}}}x.extend({cache:{},noData:{applet:!0,embed:!0,object:\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\"},hasData:function(e){return e=e.nodeType?x.cache[e[x.expando]]:e[x.expando],!!e&&!I(e)},data:function(e,t,n){return R(e,t,n)},removeData:function(e,t){return W(e,t)},_data:function(e,t,n){return R(e,t,n,!0)},_removeData:function(e,t){return W(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&x.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute(\"classid\")===t}}),x.fn.extend({data:function(e,n){var r,i,o=null,a=0,s=this[0];if(e===t){if(this.length&&(o=x.data(s),1===s.nodeType&&!x._data(s,\"parsedAttrs\"))){for(r=s.attributes;r.length>a;a++)i=r[a].name,0===i.indexOf(\"data-\")&&(i=x.camelCase(i.slice(5)),$(s,i,o[i]));x._data(s,\"parsedAttrs\",!0)}return o}return\"object\"==typeof e?this.each(function(){x.data(this,e)}):arguments.length>1?this.each(function(){x.data(this,e,n)}):s?$(s,e,x.data(s,e)):null},removeData:function(e){return this.each(function(){x.removeData(this,e)})}});function $(e,n,r){if(r===t&&1===e.nodeType){var i=\"data-\"+n.replace(P,\"-$1\").toLowerCase();if(r=e.getAttribute(i),\"string\"==typeof r){try{r=\"true\"===r?!0:\"false\"===r?!1:\"null\"===r?null:+r+\"\"===r?+r:B.test(r)?x.parseJSON(r):r}catch(o){}x.data(e,n,r)}else r=t}return r}function I(e){var t;for(t in e)if((\"data\"!==t||!x.isEmptyObject(e[t]))&&\"toJSON\"!==t)return!1;return!0}x.extend({queue:function(e,n,r){var i;return e?(n=(n||\"fx\")+\"queue\",i=x._data(e,n),r&&(!i||x.isArray(r)?i=x._data(e,n,x.makeArray(r)):i.push(r)),i||[]):t},dequeue:function(e,t){t=t||\"fx\";var n=x.queue(e,t),r=n.length,i=n.shift(),o=x._queueHooks(e,t),a=function(){x.dequeue(e,t)};\"inprogress\"===i&&(i=n.shift(),r--),i&&(\"fx\"===t&&n.unshift(\"inprogress\"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+\"queueHooks\";return x._data(e,n)||x._data(e,n,{empty:x.Callbacks(\"once memory\").add(function(){x._removeData(e,t+\"queue\"),x._removeData(e,n)})})}}),x.fn.extend({queue:function(e,n){var r=2;return\"string\"!=typeof e&&(n=e,e=\"fx\",r--),r>arguments.length?x.queue(this[0],e):n===t?this:this.each(function(){var t=x.queue(this,e,n);x._queueHooks(this,e),\"fx\"===e&&\"inprogress\"!==t[0]&&x.dequeue(this,e)})},dequeue:function(e){return this.each(function(){x.dequeue(this,e)})},delay:function(e,t){return e=x.fx?x.fx.speeds[e]||e:e,t=t||\"fx\",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||\"fx\",[])},promise:function(e,n){var r,i=1,o=x.Deferred(),a=this,s=this.length,l=function(){--i||o.resolveWith(a,[a])};\"string\"!=typeof e&&(n=e,e=t),e=e||\"fx\";while(s--)r=x._data(a[s],e+\"queueHooks\"),r&&r.empty&&(i++,r.empty.add(l));return l(),o.promise(n)}});var z,X,U=/[\\t\\r\\n\\f]/g,V=/\\r/g,Y=/^(?:input|select|textarea|button|object)$/i,J=/^(?:a|area)$/i,G=/^(?:checked|selected)$/i,Q=x.support.getSetAttribute,K=x.support.input;x.fn.extend({attr:function(e,t){return x.access(this,x.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){x.removeAttr(this,e)})},prop:function(e,t){return x.access(this,x.prop,e,t,arguments.length>1)},removeProp:function(e){return e=x.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,o,a=0,s=this.length,l=\"string\"==typeof e&&e;if(x.isFunction(e))return this.each(function(t){x(this).addClass(e.call(this,t,this.className))});if(l)for(t=(e||\"\").match(T)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(\" \"+n.className+\" \").replace(U,\" \"):\" \")){o=0;while(i=t[o++])0>r.indexOf(\" \"+i+\" \")&&(r+=i+\" \");n.className=x.trim(r)}return this},removeClass:function(e){var t,n,r,i,o,a=0,s=this.length,l=0===arguments.length||\"string\"==typeof e&&e;if(x.isFunction(e))return this.each(function(t){x(this).removeClass(e.call(this,t,this.className))});if(l)for(t=(e||\"\").match(T)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(\" \"+n.className+\" \").replace(U,\" \"):\"\")){o=0;while(i=t[o++])while(r.indexOf(\" \"+i+\" \")>=0)r=r.replace(\" \"+i+\" \",\" \");n.className=e?x.trim(r):\"\"}return this},toggleClass:function(e,t){var n=typeof e,r=\"boolean\"==typeof t;return x.isFunction(e)?this.each(function(n){x(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(\"string\"===n){var o,a=0,s=x(this),l=t,u=e.match(T)||[];while(o=u[a++])l=r?l:!s.hasClass(o),s[l?\"addClass\":\"removeClass\"](o)}else(n===i||\"boolean\"===n)&&(this.className&&x._data(this,\"__className__\",this.className),this.className=this.className||e===!1?\"\":x._data(this,\"__className__\")||\"\")})},hasClass:function(e){var t=\" \"+e+\" \",n=0,r=this.length;for(;r>n;n++)if(1===this[n].nodeType&&(\" \"+this[n].className+\" \").replace(U,\" \").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,o=this[0];{if(arguments.length)return i=x.isFunction(e),this.each(function(n){var o;1===this.nodeType&&(o=i?e.call(this,n,x(this).val()):e,null==o?o=\"\":\"number\"==typeof o?o+=\"\":x.isArray(o)&&(o=x.map(o,function(e){return null==e?\"\":e+\"\"})),r=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()],r&&\"set\"in r&&r.set(this,o,\"value\")!==t||(this.value=o))});if(o)return r=x.valHooks[o.type]||x.valHooks[o.nodeName.toLowerCase()],r&&\"get\"in r&&(n=r.get(o,\"value\"))!==t?n:(n=o.value,\"string\"==typeof n?n.replace(V,\"\"):null==n?\"\":n)}}}),x.extend({valHooks:{option:{get:function(e){var t=x.find.attr(e,\"value\");return null!=t?t:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,o=\"select-one\"===e.type||0>i,a=o?null:[],s=o?i+1:r.length,l=0>i?s:o?i:0;for(;s>l;l++)if(n=r[l],!(!n.selected&&l!==i||(x.support.optDisabled?n.disabled:null!==n.getAttribute(\"disabled\"))||n.parentNode.disabled&&x.nodeName(n.parentNode,\"optgroup\"))){if(t=x(n).val(),o)return t;a.push(t)}return a},set:function(e,t){var n,r,i=e.options,o=x.makeArray(t),a=i.length;while(a--)r=i[a],(r.selected=x.inArray(x(r).val(),o)>=0)&&(n=!0);return n||(e.selectedIndex=-1),o}}},attr:function(e,n,r){var o,a,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return typeof e.getAttribute===i?x.prop(e,n,r):(1===s&&x.isXMLDoc(e)||(n=n.toLowerCase(),o=x.attrHooks[n]||(x.expr.match.bool.test(n)?X:z)),r===t?o&&\"get\"in o&&null!==(a=o.get(e,n))?a:(a=x.find.attr(e,n),null==a?t:a):null!==r?o&&\"set\"in o&&(a=o.set(e,r,n))!==t?a:(e.setAttribute(n,r+\"\"),r):(x.removeAttr(e,n),t))},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(T);if(o&&1===e.nodeType)while(n=o[i++])r=x.propFix[n]||n,x.expr.match.bool.test(n)?K&&Q||!G.test(n)?e[r]=!1:e[x.camelCase(\"default-\"+n)]=e[r]=!1:x.attr(e,n,\"\"),e.removeAttribute(Q?n:r)},attrHooks:{type:{set:function(e,t){if(!x.support.radioValue&&\"radio\"===t&&x.nodeName(e,\"input\")){var n=e.value;return e.setAttribute(\"type\",t),n&&(e.value=n),t}}}},propFix:{\"for\":\"htmlFor\",\"class\":\"className\"},prop:function(e,n,r){var i,o,a,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return a=1!==s||!x.isXMLDoc(e),a&&(n=x.propFix[n]||n,o=x.propHooks[n]),r!==t?o&&\"set\"in o&&(i=o.set(e,r,n))!==t?i:e[n]=r:o&&\"get\"in o&&null!==(i=o.get(e,n))?i:e[n]},propHooks:{tabIndex:{get:function(e){var t=x.find.attr(e,\"tabindex\");return t?parseInt(t,10):Y.test(e.nodeName)||J.test(e.nodeName)&&e.href?0:-1}}}}),X={set:function(e,t,n){return t===!1?x.removeAttr(e,n):K&&Q||!G.test(n)?e.setAttribute(!Q&&x.propFix[n]||n,n):e[x.camelCase(\"default-\"+n)]=e[n]=!0,n}},x.each(x.expr.match.bool.source.match(/\\w+/g),function(e,n){var r=x.expr.attrHandle[n]||x.find.attr;x.expr.attrHandle[n]=K&&Q||!G.test(n)?function(e,n,i){var o=x.expr.attrHandle[n],a=i?t:(x.expr.attrHandle[n]=t)!=r(e,n,i)?n.toLowerCase():null;return x.expr.attrHandle[n]=o,a}:function(e,n,r){return r?t:e[x.camelCase(\"default-\"+n)]?n.toLowerCase():null}}),K&&Q||(x.attrHooks.value={set:function(e,n,r){return x.nodeName(e,\"input\")?(e.defaultValue=n,t):z&&z.set(e,n,r)}}),Q||(z={set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(r)),i.value=n+=\"\",\"value\"===r||n===e.getAttribute(r)?n:t}},x.expr.attrHandle.id=x.expr.attrHandle.name=x.expr.attrHandle.coords=function(e,n,r){var i;return r?t:(i=e.getAttributeNode(n))&&\"\"!==i.value?i.value:null},x.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&&r.specified?r.value:t},set:z.set},x.attrHooks.contenteditable={set:function(e,t,n){z.set(e,\"\"===t?!1:t,n)}},x.each([\"width\",\"height\"],function(e,n){x.attrHooks[n]={set:function(e,r){return\"\"===r?(e.setAttribute(n,\"auto\"),r):t}}})),x.support.hrefNormalized||x.each([\"href\",\"src\"],function(e,t){x.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),x.support.style||(x.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+\"\"}}),x.support.optSelected||(x.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),x.each([\"tabIndex\",\"readOnly\",\"maxLength\",\"cellSpacing\",\"cellPadding\",\"rowSpan\",\"colSpan\",\"useMap\",\"frameBorder\",\"contentEditable\"],function(){x.propFix[this.toLowerCase()]=this}),x.support.enctype||(x.propFix.enctype=\"encoding\"),x.each([\"radio\",\"checkbox\"],function(){x.valHooks[this]={set:function(e,n){return x.isArray(n)?e.checked=x.inArray(x(e).val(),n)>=0:t}},x.support.checkOn||(x.valHooks[this].get=function(e){return null===e.getAttribute(\"value\")?\"on\":e.value})});var Z=/^(?:input|select|textarea)$/i,et=/^key/,tt=/^(?:mouse|contextmenu)|click/,nt=/^(?:focusinfocus|focusoutblur)$/,rt=/^([^.]*)(?:\\.(.+)|)$/;function it(){return!0}function ot(){return!1}function at(){try{return a.activeElement}catch(e){}}x.event={global:{},add:function(e,n,r,o,a){var s,l,u,c,p,f,d,h,g,m,y,v=x._data(e);if(v){r.handler&&(c=r,r=c.handler,a=c.selector),r.guid||(r.guid=x.guid++),(l=v.events)||(l=v.events={}),(f=v.handle)||(f=v.handle=function(e){return typeof x===i||e&&x.event.triggered===e.type?t:x.event.dispatch.apply(f.elem,arguments)},f.elem=e),n=(n||\"\").match(T)||[\"\"],u=n.length;while(u--)s=rt.exec(n[u])||[],g=y=s[1],m=(s[2]||\"\").split(\".\").sort(),g&&(p=x.event.special[g]||{},g=(a?p.delegateType:p.bindType)||g,p=x.event.special[g]||{},d=x.extend({type:g,origType:y,data:o,handler:r,guid:r.guid,selector:a,needsContext:a&&x.expr.match.needsContext.test(a),namespace:m.join(\".\")},c),(h=l[g])||(h=l[g]=[],h.delegateCount=0,p.setup&&p.setup.call(e,o,m,f)!==!1||(e.addEventListener?e.addEventListener(g,f,!1):e.attachEvent&&e.attachEvent(\"on\"+g,f))),p.add&&(p.add.call(e,d),d.handler.guid||(d.handler.guid=r.guid)),a?h.splice(h.delegateCount++,0,d):h.push(d),x.event.global[g]=!0);e=null}},remove:function(e,t,n,r,i){var o,a,s,l,u,c,p,f,d,h,g,m=x.hasData(e)&&x._data(e);if(m&&(c=m.events)){t=(t||\"\").match(T)||[\"\"],u=t.length;while(u--)if(s=rt.exec(t[u])||[],d=g=s[1],h=(s[2]||\"\").split(\".\").sort(),d){p=x.event.special[d]||{},d=(r?p.delegateType:p.bindType)||d,f=c[d]||[],s=s[2]&&RegExp(\"(^|\\\\.)\"+h.join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"),l=o=f.length;while(o--)a=f[o],!i&&g!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||r&&r!==a.selector&&(\"**\"!==r||!a.selector)||(f.splice(o,1),a.selector&&f.delegateCount--,p.remove&&p.remove.call(e,a));l&&!f.length&&(p.teardown&&p.teardown.call(e,h,m.handle)!==!1||x.removeEvent(e,d,m.handle),delete c[d])}else for(d in c)x.event.remove(e,d+t[u],n,r,!0);x.isEmptyObject(c)&&(delete m.handle,x._removeData(e,\"events\"))}},trigger:function(n,r,i,o){var s,l,u,c,p,f,d,h=[i||a],g=v.call(n,\"type\")?n.type:n,m=v.call(n,\"namespace\")?n.namespace.split(\".\"):[];if(u=f=i=i||a,3!==i.nodeType&&8!==i.nodeType&&!nt.test(g+x.event.triggered)&&(g.indexOf(\".\")>=0&&(m=g.split(\".\"),g=m.shift(),m.sort()),l=0>g.indexOf(\":\")&&\"on\"+g,n=n[x.expando]?n:new x.Event(g,\"object\"==typeof n&&n),n.isTrigger=o?2:3,n.namespace=m.join(\".\"),n.namespace_re=n.namespace?RegExp(\"(^|\\\\.)\"+m.join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"):null,n.result=t,n.target||(n.target=i),r=null==r?[n]:x.makeArray(r,[n]),p=x.event.special[g]||{},o||!p.trigger||p.trigger.apply(i,r)!==!1)){if(!o&&!p.noBubble&&!x.isWindow(i)){for(c=p.delegateType||g,nt.test(c+g)||(u=u.parentNode);u;u=u.parentNode)h.push(u),f=u;f===(i.ownerDocument||a)&&h.push(f.defaultView||f.parentWindow||e)}d=0;while((u=h[d++])&&!n.isPropagationStopped())n.type=d>1?c:p.bindType||g,s=(x._data(u,\"events\")||{})[n.type]&&x._data(u,\"handle\"),s&&s.apply(u,r),s=l&&u[l],s&&x.acceptData(u)&&s.apply&&s.apply(u,r)===!1&&n.preventDefault();if(n.type=g,!o&&!n.isDefaultPrevented()&&(!p._default||p._default.apply(h.pop(),r)===!1)&&x.acceptData(i)&&l&&i[g]&&!x.isWindow(i)){f=i[l],f&&(i[l]=null),x.event.triggered=g;try{i[g]()}catch(y){}x.event.triggered=t,f&&(i[l]=f)}return n.result}},dispatch:function(e){e=x.event.fix(e);var n,r,i,o,a,s=[],l=g.call(arguments),u=(x._data(this,\"events\")||{})[e.type]||[],c=x.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){s=x.event.handlers.call(this,e,u),n=0;while((o=s[n++])&&!e.isPropagationStopped()){e.currentTarget=o.elem,a=0;while((i=o.handlers[a++])&&!e.isImmediatePropagationStopped())(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,r=((x.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,l),r!==t&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,n){var r,i,o,a,s=[],l=n.delegateCount,u=e.target;if(l&&u.nodeType&&(!e.button||\"click\"!==e.type))for(;u!=this;u=u.parentNode||this)if(1===u.nodeType&&(u.disabled!==!0||\"click\"!==e.type)){for(o=[],a=0;l>a;a++)i=n[a],r=i.selector+\" \",o[r]===t&&(o[r]=i.needsContext?x(r,this).index(u)>=0:x.find(r,this,null,[u]).length),o[r]&&o.push(i);o.length&&s.push({elem:u,handlers:o})}return n.length>l&&s.push({elem:this,handlers:n.slice(l)}),s},fix:function(e){if(e[x.expando])return e;var t,n,r,i=e.type,o=e,s=this.fixHooks[i];s||(this.fixHooks[i]=s=tt.test(i)?this.mouseHooks:et.test(i)?this.keyHooks:{}),r=s.props?this.props.concat(s.props):this.props,e=new x.Event(o),t=r.length;while(t--)n=r[t],e[n]=o[n];return e.target||(e.target=o.srcElement||a),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,o):e},props:\"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which\".split(\" \"),fixHooks:{},keyHooks:{props:\"char charCode key keyCode\".split(\" \"),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:\"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement\".split(\" \"),filter:function(e,n){var r,i,o,s=n.button,l=n.fromElement;return null==e.pageX&&null!=n.clientX&&(i=e.target.ownerDocument||a,o=i.documentElement,r=i.body,e.pageX=n.clientX+(o&&o.scrollLeft||r&&r.scrollLeft||0)-(o&&o.clientLeft||r&&r.clientLeft||0),e.pageY=n.clientY+(o&&o.scrollTop||r&&r.scrollTop||0)-(o&&o.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&l&&(e.relatedTarget=l===e.target?n.toElement:l),e.which||s===t||(e.which=1&s?1:2&s?3:4&s?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==at()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:\"focusin\"},blur:{trigger:function(){return this===at()&&this.blur?(this.blur(),!1):t},delegateType:\"focusout\"},click:{trigger:function(){return x.nodeName(this,\"input\")&&\"checkbox\"===this.type&&this.click?(this.click(),!1):t},_default:function(e){return x.nodeName(e.target,\"a\")}},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=x.extend(new x.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?x.event.trigger(i,null,t):x.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},x.removeEvent=a.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r=\"on\"+t;e.detachEvent&&(typeof e[r]===i&&(e[r]=null),e.detachEvent(r,n))},x.Event=function(e,n){return this instanceof x.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?it:ot):this.type=e,n&&x.extend(this,n),this.timeStamp=e&&e.timeStamp||x.now(),this[x.expando]=!0,t):new x.Event(e,n)},x.Event.prototype={isDefaultPrevented:ot,isPropagationStopped:ot,isImmediatePropagationStopped:ot,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=it,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=it,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=it,this.stopPropagation()}},x.each({mouseenter:\"mouseover\",mouseleave:\"mouseout\"},function(e,t){x.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return(!i||i!==r&&!x.contains(r,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),x.support.submitBubbles||(x.event.special.submit={setup:function(){return x.nodeName(this,\"form\")?!1:(x.event.add(this,\"click._submit keypress._submit\",function(e){var n=e.target,r=x.nodeName(n,\"input\")||x.nodeName(n,\"button\")?n.form:t;r&&!x._data(r,\"submitBubbles\")&&(x.event.add(r,\"submit._submit\",function(e){e._submit_bubble=!0}),x._data(r,\"submitBubbles\",!0))}),t)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&x.event.simulate(\"submit\",this.parentNode,e,!0))},teardown:function(){return x.nodeName(this,\"form\")?!1:(x.event.remove(this,\"._submit\"),t)}}),x.support.changeBubbles||(x.event.special.change={setup:function(){return Z.test(this.nodeName)?((\"checkbox\"===this.type||\"radio\"===this.type)&&(x.event.add(this,\"propertychange._change\",function(e){\"checked\"===e.originalEvent.propertyName&&(this._just_changed=!0)}),x.event.add(this,\"click._change\",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),x.event.simulate(\"change\",this,e,!0)})),!1):(x.event.add(this,\"beforeactivate._change\",function(e){var t=e.target;Z.test(t.nodeName)&&!x._data(t,\"changeBubbles\")&&(x.event.add(t,\"change._change\",function(e){!this.parentNode||e.isSimulated||e.isTrigger||x.event.simulate(\"change\",this.parentNode,e,!0)}),x._data(t,\"changeBubbles\",!0))}),t)},handle:function(e){var n=e.target;return this!==n||e.isSimulated||e.isTrigger||\"radio\"!==n.type&&\"checkbox\"!==n.type?e.handleObj.handler.apply(this,arguments):t},teardown:function(){return x.event.remove(this,\"._change\"),!Z.test(this.nodeName)}}),x.support.focusinBubbles||x.each({focus:\"focusin\",blur:\"focusout\"},function(e,t){var n=0,r=function(e){x.event.simulate(t,e.target,x.event.fix(e),!0)};x.event.special[t]={setup:function(){0===n++&&a.addEventListener(e,r,!0)},teardown:function(){0===--n&&a.removeEventListener(e,r,!0)}}}),x.fn.extend({on:function(e,n,r,i,o){var a,s;if(\"object\"==typeof e){\"string\"!=typeof n&&(r=r||n,n=t);for(a in e)this.on(a,n,r,e[a],o);return this}if(null==r&&null==i?(i=n,r=n=t):null==i&&(\"string\"==typeof n?(i=r,r=t):(i=r,r=n,n=t)),i===!1)i=ot;else if(!i)return this;return 1===o&&(s=i,i=function(e){return x().off(e),s.apply(this,arguments)},i.guid=s.guid||(s.guid=x.guid++)),this.each(function(){x.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,x(e.delegateTarget).off(i.namespace?i.origType+\".\"+i.namespace:i.origType,i.selector,i.handler),this;if(\"object\"==typeof e){for(o in e)this.off(o,n,e[o]);return this}return(n===!1||\"function\"==typeof n)&&(r=n,n=t),r===!1&&(r=ot),this.each(function(){x.event.remove(this,e,r,n)})},trigger:function(e,t){return this.each(function(){x.event.trigger(e,t,this)})},triggerHandler:function(e,n){var r=this[0];return r?x.event.trigger(e,n,r,!0):t}});var st=/^.[^:#\\[\\.,]*$/,lt=/^(?:parents|prev(?:Until|All))/,ut=x.expr.match.needsContext,ct={children:!0,contents:!0,next:!0,prev:!0};x.fn.extend({find:function(e){var t,n=[],r=this,i=r.length;if(\"string\"!=typeof e)return this.pushStack(x(e).filter(function(){for(t=0;i>t;t++)if(x.contains(r[t],this))return!0}));for(t=0;i>t;t++)x.find(e,r[t],n);return n=this.pushStack(i>1?x.unique(n):n),n.selector=this.selector?this.selector+\" \"+e:e,n},has:function(e){var t,n=x(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++)if(x.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ft(this,e||[],!0))},filter:function(e){return this.pushStack(ft(this,e||[],!1))},is:function(e){return!!ft(this,\"string\"==typeof e&&ut.test(e)?x(e):e||[],!1).length},closest:function(e,t){var n,r=0,i=this.length,o=[],a=ut.test(e)||\"string\"!=typeof e?x(e,t||this.context):0;for(;i>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(11>n.nodeType&&(a?a.index(n)>-1:1===n.nodeType&&x.find.matchesSelector(n,e))){n=o.push(n);break}return this.pushStack(o.length>1?x.unique(o):o)},index:function(e){return e?\"string\"==typeof e?x.inArray(this[0],x(e)):x.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n=\"string\"==typeof e?x(e,t):x.makeArray(e&&e.nodeType?[e]:e),r=x.merge(this.get(),n);return this.pushStack(x.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}});function pt(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}x.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return x.dir(e,\"parentNode\")},parentsUntil:function(e,t,n){return x.dir(e,\"parentNode\",n)},next:function(e){return pt(e,\"nextSibling\")},prev:function(e){return pt(e,\"previousSibling\")},nextAll:function(e){return x.dir(e,\"nextSibling\")},prevAll:function(e){return x.dir(e,\"previousSibling\")},nextUntil:function(e,t,n){return x.dir(e,\"nextSibling\",n)},prevUntil:function(e,t,n){return x.dir(e,\"previousSibling\",n)},siblings:function(e){return x.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return x.sibling(e.firstChild)},contents:function(e){return x.nodeName(e,\"iframe\")?e.contentDocument||e.contentWindow.document:x.merge([],e.childNodes)}},function(e,t){x.fn[e]=function(n,r){var i=x.map(this,t,n);return\"Until\"!==e.slice(-5)&&(r=n),r&&\"string\"==typeof r&&(i=x.filter(r,i)),this.length>1&&(ct[e]||(i=x.unique(i)),lt.test(e)&&(i=i.reverse())),this.pushStack(i)}}),x.extend({filter:function(e,t,n){var r=t[0];return n&&(e=\":not(\"+e+\")\"),1===t.length&&1===r.nodeType?x.find.matchesSelector(r,e)?[r]:[]:x.find.matches(e,x.grep(t,function(e){return 1===e.nodeType}))},dir:function(e,n,r){var i=[],o=e[n];while(o&&9!==o.nodeType&&(r===t||1!==o.nodeType||!x(o).is(r)))1===o.nodeType&&i.push(o),o=o[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});function ft(e,t,n){if(x.isFunction(t))return x.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return x.grep(e,function(e){return e===t!==n});if(\"string\"==typeof t){if(st.test(t))return x.filter(t,e,n);t=x.filter(t,e)}return x.grep(e,function(e){return x.inArray(e,t)>=0!==n})}function dt(e){var t=ht.split(\"|\"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}var ht=\"abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video\",gt=/ jQuery\\d+=\"(?:null|\\d+)\"/g,mt=RegExp(\"<(?:\"+ht+\")[\\\\s/>]\",\"i\"),yt=/^\\s+/,vt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>/gi,bt=/<([\\w:]+)/,xt=/<tbody/i,wt=/<|&#?\\w+;/,Tt=/<(?:script|style|link)/i,Ct=/^(?:checkbox|radio)$/i,Nt=/checked\\s*(?:[^=]|=\\s*.checked.)/i,kt=/^$|\\/(?:java|ecma)script/i,Et=/^true\\/(.*)/,St=/^\\s*<!(?:\\[CDATA\\[|--)|(?:\\]\\]|--)>\\s*$/g,At={option:[1,\"<select multiple='multiple'>\",\"</select>\"],legend:[1,\"<fieldset>\",\"</fieldset>\"],area:[1,\"<map>\",\"</map>\"],param:[1,\"<object>\",\"</object>\"],thead:[1,\"<table>\",\"</table>\"],tr:[2,\"<table><tbody>\",\"</tbody></table>\"],col:[2,\"<table><tbody></tbody><colgroup>\",\"</colgroup></table>\"],td:[3,\"<table><tbody><tr>\",\"</tr></tbody></table>\"],_default:x.support.htmlSerialize?[0,\"\",\"\"]:[1,\"X<div>\",\"</div>\"]},jt=dt(a),Dt=jt.appendChild(a.createElement(\"div\"));At.optgroup=At.option,At.tbody=At.tfoot=At.colgroup=At.caption=At.thead,At.th=At.td,x.fn.extend({text:function(e){return x.access(this,function(e){return e===t?x.text(this):this.empty().append((this[0]&&this[0].ownerDocument||a).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Lt(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Lt(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var n,r=e?x.filter(e,this):this,i=0;for(;null!=(n=r[i]);i++)t||1!==n.nodeType||x.cleanData(Ft(n)),n.parentNode&&(t&&x.contains(n.ownerDocument,n)&&_t(Ft(n,\"script\")),n.parentNode.removeChild(n));return this},empty:function(){var e,t=0;for(;null!=(e=this[t]);t++){1===e.nodeType&&x.cleanData(Ft(e,!1));while(e.firstChild)e.removeChild(e.firstChild);e.options&&x.nodeName(e,\"select\")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return x.clone(this,e,t)})},html:function(e){return x.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(gt,\"\"):t;if(!(\"string\"!=typeof e||Tt.test(e)||!x.support.htmlSerialize&&mt.test(e)||!x.support.leadingWhitespace&&yt.test(e)||At[(bt.exec(e)||[\"\",\"\"])[1].toLowerCase()])){e=e.replace(vt,\"<$1></$2>\");try{for(;i>r;r++)n=this[r]||{},1===n.nodeType&&(x.cleanData(Ft(n,!1)),n.innerHTML=e);n=0}catch(o){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=x.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;return this.domManip(arguments,function(n){var r=e[t++],i=e[t++];i&&(r&&r.parentNode!==i&&(r=this.nextSibling),x(this).remove(),i.insertBefore(n,r))},!0),t?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t,n){e=d.apply([],e);var r,i,o,a,s,l,u=0,c=this.length,p=this,f=c-1,h=e[0],g=x.isFunction(h);if(g||!(1>=c||\"string\"!=typeof h||x.support.checkClone)&&Nt.test(h))return this.each(function(r){var i=p.eq(r);g&&(e[0]=h.call(this,r,i.html())),i.domManip(e,t,n)});if(c&&(l=x.buildFragment(e,this[0].ownerDocument,!1,!n&&this),r=l.firstChild,1===l.childNodes.length&&(l=r),r)){for(a=x.map(Ft(l,\"script\"),Ht),o=a.length;c>u;u++)i=l,u!==f&&(i=x.clone(i,!0,!0),o&&x.merge(a,Ft(i,\"script\"))),t.call(this[u],i,u);if(o)for(s=a[a.length-1].ownerDocument,x.map(a,qt),u=0;o>u;u++)i=a[u],kt.test(i.type||\"\")&&!x._data(i,\"globalEval\")&&x.contains(s,i)&&(i.src?x._evalUrl(i.src):x.globalEval((i.text||i.textContent||i.innerHTML||\"\").replace(St,\"\")));l=r=null}return this}});function Lt(e,t){return x.nodeName(e,\"table\")&&x.nodeName(1===t.nodeType?t:t.firstChild,\"tr\")?e.getElementsByTagName(\"tbody\")[0]||e.appendChild(e.ownerDocument.createElement(\"tbody\")):e}function Ht(e){return e.type=(null!==x.find.attr(e,\"type\"))+\"/\"+e.type,e}function qt(e){var t=Et.exec(e.type);return t?e.type=t[1]:e.removeAttribute(\"type\"),e}function _t(e,t){var n,r=0;for(;null!=(n=e[r]);r++)x._data(n,\"globalEval\",!t||x._data(t[r],\"globalEval\"))}function Mt(e,t){if(1===t.nodeType&&x.hasData(e)){var n,r,i,o=x._data(e),a=x._data(t,o),s=o.events;if(s){delete a.handle,a.events={};for(n in s)for(r=0,i=s[n].length;i>r;r++)x.event.add(t,n,s[n][r])}a.data&&(a.data=x.extend({},a.data))}}function Ot(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!x.support.noCloneEvent&&t[x.expando]){i=x._data(t);for(r in i.events)x.removeEvent(t,r,i.handle);t.removeAttribute(x.expando)}\"script\"===n&&t.text!==e.text?(Ht(t).text=e.text,qt(t)):\"object\"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),x.support.html5Clone&&e.innerHTML&&!x.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):\"input\"===n&&Ct.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):\"option\"===n?t.defaultSelected=t.selected=e.defaultSelected:(\"input\"===n||\"textarea\"===n)&&(t.defaultValue=e.defaultValue)}}x.each({appendTo:\"append\",prependTo:\"prepend\",insertBefore:\"before\",insertAfter:\"after\",replaceAll:\"replaceWith\"},function(e,t){x.fn[e]=function(e){var n,r=0,i=[],o=x(e),a=o.length-1;for(;a>=r;r++)n=r===a?this:this.clone(!0),x(o[r])[t](n),h.apply(i,n.get());return this.pushStack(i)}});function Ft(e,n){var r,o,a=0,s=typeof e.getElementsByTagName!==i?e.getElementsByTagName(n||\"*\"):typeof e.querySelectorAll!==i?e.querySelectorAll(n||\"*\"):t;if(!s)for(s=[],r=e.childNodes||e;null!=(o=r[a]);a++)!n||x.nodeName(o,n)?s.push(o):x.merge(s,Ft(o,n));return n===t||n&&x.nodeName(e,n)?x.merge([e],s):s}function Bt(e){Ct.test(e.type)&&(e.defaultChecked=e.checked)}x.extend({clone:function(e,t,n){var r,i,o,a,s,l=x.contains(e.ownerDocument,e);if(x.support.html5Clone||x.isXMLDoc(e)||!mt.test(\"<\"+e.nodeName+\">\")?o=e.cloneNode(!0):(Dt.innerHTML=e.outerHTML,Dt.removeChild(o=Dt.firstChild)),!(x.support.noCloneEvent&&x.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||x.isXMLDoc(e)))for(r=Ft(o),s=Ft(e),a=0;null!=(i=s[a]);++a)r[a]&&Ot(i,r[a]);if(t)if(n)for(s=s||Ft(e),r=r||Ft(o),a=0;null!=(i=s[a]);a++)Mt(i,r[a]);else Mt(e,o);return r=Ft(o,\"script\"),r.length>0&&_t(r,!l&&Ft(e,\"script\")),r=s=i=null,o},buildFragment:function(e,t,n,r){var i,o,a,s,l,u,c,p=e.length,f=dt(t),d=[],h=0;for(;p>h;h++)if(o=e[h],o||0===o)if(\"object\"===x.type(o))x.merge(d,o.nodeType?[o]:o);else if(wt.test(o)){s=s||f.appendChild(t.createElement(\"div\")),l=(bt.exec(o)||[\"\",\"\"])[1].toLowerCase(),c=At[l]||At._default,s.innerHTML=c[1]+o.replace(vt,\"<$1></$2>\")+c[2],i=c[0];while(i--)s=s.lastChild;if(!x.support.leadingWhitespace&&yt.test(o)&&d.push(t.createTextNode(yt.exec(o)[0])),!x.support.tbody){o=\"table\"!==l||xt.test(o)?\"<table>\"!==c[1]||xt.test(o)?0:s:s.firstChild,i=o&&o.childNodes.length;while(i--)x.nodeName(u=o.childNodes[i],\"tbody\")&&!u.childNodes.length&&o.removeChild(u)}x.merge(d,s.childNodes),s.textContent=\"\";while(s.firstChild)s.removeChild(s.firstChild);s=f.lastChild}else d.push(t.createTextNode(o));s&&f.removeChild(s),x.support.appendChecked||x.grep(Ft(d,\"input\"),Bt),h=0;while(o=d[h++])if((!r||-1===x.inArray(o,r))&&(a=x.contains(o.ownerDocument,o),s=Ft(f.appendChild(o),\"script\"),a&&_t(s),n)){i=0;while(o=s[i++])kt.test(o.type||\"\")&&n.push(o)}return s=null,f},cleanData:function(e,t){var n,r,o,a,s=0,l=x.expando,u=x.cache,c=x.support.deleteExpando,f=x.event.special;for(;null!=(n=e[s]);s++)if((t||x.acceptData(n))&&(o=n[l],a=o&&u[o])){if(a.events)for(r in a.events)f[r]?x.event.remove(n,r):x.removeEvent(n,r,a.handle);\nu[o]&&(delete u[o],c?delete n[l]:typeof n.removeAttribute!==i?n.removeAttribute(l):n[l]=null,p.push(o))}},_evalUrl:function(e){return x.ajax({url:e,type:\"GET\",dataType:\"script\",async:!1,global:!1,\"throws\":!0})}}),x.fn.extend({wrapAll:function(e){if(x.isFunction(e))return this.each(function(t){x(this).wrapAll(e.call(this,t))});if(this[0]){var t=x(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&1===e.firstChild.nodeType)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return x.isFunction(e)?this.each(function(t){x(this).wrapInner(e.call(this,t))}):this.each(function(){var t=x(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=x.isFunction(e);return this.each(function(n){x(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){x.nodeName(this,\"body\")||x(this).replaceWith(this.childNodes)}).end()}});var Pt,Rt,Wt,$t=/alpha\\([^)]*\\)/i,It=/opacity\\s*=\\s*([^)]*)/,zt=/^(top|right|bottom|left)$/,Xt=/^(none|table(?!-c[ea]).+)/,Ut=/^margin/,Vt=RegExp(\"^(\"+w+\")(.*)$\",\"i\"),Yt=RegExp(\"^(\"+w+\")(?!px)[a-z%]+$\",\"i\"),Jt=RegExp(\"^([+-])=(\"+w+\")\",\"i\"),Gt={BODY:\"block\"},Qt={position:\"absolute\",visibility:\"hidden\",display:\"block\"},Kt={letterSpacing:0,fontWeight:400},Zt=[\"Top\",\"Right\",\"Bottom\",\"Left\"],en=[\"Webkit\",\"O\",\"Moz\",\"ms\"];function tn(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=en.length;while(i--)if(t=en[i]+n,t in e)return t;return r}function nn(e,t){return e=t||e,\"none\"===x.css(e,\"display\")||!x.contains(e.ownerDocument,e)}function rn(e,t){var n,r,i,o=[],a=0,s=e.length;for(;s>a;a++)r=e[a],r.style&&(o[a]=x._data(r,\"olddisplay\"),n=r.style.display,t?(o[a]||\"none\"!==n||(r.style.display=\"\"),\"\"===r.style.display&&nn(r)&&(o[a]=x._data(r,\"olddisplay\",ln(r.nodeName)))):o[a]||(i=nn(r),(n&&\"none\"!==n||!i)&&x._data(r,\"olddisplay\",i?n:x.css(r,\"display\"))));for(a=0;s>a;a++)r=e[a],r.style&&(t&&\"none\"!==r.style.display&&\"\"!==r.style.display||(r.style.display=t?o[a]||\"\":\"none\"));return e}x.fn.extend({css:function(e,n){return x.access(this,function(e,n,r){var i,o,a={},s=0;if(x.isArray(n)){for(o=Rt(e),i=n.length;i>s;s++)a[n[s]]=x.css(e,n[s],!1,o);return a}return r!==t?x.style(e,n,r):x.css(e,n)},e,n,arguments.length>1)},show:function(){return rn(this,!0)},hide:function(){return rn(this)},toggle:function(e){var t=\"boolean\"==typeof e;return this.each(function(){(t?e:nn(this))?x(this).show():x(this).hide()})}}),x.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Wt(e,\"opacity\");return\"\"===n?\"1\":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{\"float\":x.support.cssFloat?\"cssFloat\":\"styleFloat\"},style:function(e,n,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,a,s,l=x.camelCase(n),u=e.style;if(n=x.cssProps[l]||(x.cssProps[l]=tn(u,l)),s=x.cssHooks[n]||x.cssHooks[l],r===t)return s&&\"get\"in s&&(o=s.get(e,!1,i))!==t?o:u[n];if(a=typeof r,\"string\"===a&&(o=Jt.exec(r))&&(r=(o[1]+1)*o[2]+parseFloat(x.css(e,n)),a=\"number\"),!(null==r||\"number\"===a&&isNaN(r)||(\"number\"!==a||x.cssNumber[l]||(r+=\"px\"),x.support.clearCloneStyle||\"\"!==r||0!==n.indexOf(\"background\")||(u[n]=\"inherit\"),s&&\"set\"in s&&(r=s.set(e,r,i))===t)))try{u[n]=r}catch(c){}}},css:function(e,n,r,i){var o,a,s,l=x.camelCase(n);return n=x.cssProps[l]||(x.cssProps[l]=tn(e.style,l)),s=x.cssHooks[n]||x.cssHooks[l],s&&\"get\"in s&&(a=s.get(e,!0,r)),a===t&&(a=Wt(e,n,i)),\"normal\"===a&&n in Kt&&(a=Kt[n]),\"\"===r||r?(o=parseFloat(a),r===!0||x.isNumeric(o)?o||0:a):a}}),e.getComputedStyle?(Rt=function(t){return e.getComputedStyle(t,null)},Wt=function(e,n,r){var i,o,a,s=r||Rt(e),l=s?s.getPropertyValue(n)||s[n]:t,u=e.style;return s&&(\"\"!==l||x.contains(e.ownerDocument,e)||(l=x.style(e,n)),Yt.test(l)&&Ut.test(n)&&(i=u.width,o=u.minWidth,a=u.maxWidth,u.minWidth=u.maxWidth=u.width=l,l=s.width,u.width=i,u.minWidth=o,u.maxWidth=a)),l}):a.documentElement.currentStyle&&(Rt=function(e){return e.currentStyle},Wt=function(e,n,r){var i,o,a,s=r||Rt(e),l=s?s[n]:t,u=e.style;return null==l&&u&&u[n]&&(l=u[n]),Yt.test(l)&&!zt.test(n)&&(i=u.left,o=e.runtimeStyle,a=o&&o.left,a&&(o.left=e.currentStyle.left),u.left=\"fontSize\"===n?\"1em\":l,l=u.pixelLeft+\"px\",u.left=i,a&&(o.left=a)),\"\"===l?\"auto\":l});function on(e,t,n){var r=Vt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||\"px\"):t}function an(e,t,n,r,i){var o=n===(r?\"border\":\"content\")?4:\"width\"===t?1:0,a=0;for(;4>o;o+=2)\"margin\"===n&&(a+=x.css(e,n+Zt[o],!0,i)),r?(\"content\"===n&&(a-=x.css(e,\"padding\"+Zt[o],!0,i)),\"margin\"!==n&&(a-=x.css(e,\"border\"+Zt[o]+\"Width\",!0,i))):(a+=x.css(e,\"padding\"+Zt[o],!0,i),\"padding\"!==n&&(a+=x.css(e,\"border\"+Zt[o]+\"Width\",!0,i)));return a}function sn(e,t,n){var r=!0,i=\"width\"===t?e.offsetWidth:e.offsetHeight,o=Rt(e),a=x.support.boxSizing&&\"border-box\"===x.css(e,\"boxSizing\",!1,o);if(0>=i||null==i){if(i=Wt(e,t,o),(0>i||null==i)&&(i=e.style[t]),Yt.test(i))return i;r=a&&(x.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+an(e,t,n||(a?\"border\":\"content\"),r,o)+\"px\"}function ln(e){var t=a,n=Gt[e];return n||(n=un(e,t),\"none\"!==n&&n||(Pt=(Pt||x(\"<iframe frameborder='0' width='0' height='0'/>\").css(\"cssText\",\"display:block !important\")).appendTo(t.documentElement),t=(Pt[0].contentWindow||Pt[0].contentDocument).document,t.write(\"<!doctype html><html><body>\"),t.close(),n=un(e,t),Pt.detach()),Gt[e]=n),n}function un(e,t){var n=x(t.createElement(e)).appendTo(t.body),r=x.css(n[0],\"display\");return n.remove(),r}x.each([\"height\",\"width\"],function(e,n){x.cssHooks[n]={get:function(e,r,i){return r?0===e.offsetWidth&&Xt.test(x.css(e,\"display\"))?x.swap(e,Qt,function(){return sn(e,n,i)}):sn(e,n,i):t},set:function(e,t,r){var i=r&&Rt(e);return on(e,t,r?an(e,n,r,x.support.boxSizing&&\"border-box\"===x.css(e,\"boxSizing\",!1,i),i):0)}}}),x.support.opacity||(x.cssHooks.opacity={get:function(e,t){return It.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||\"\")?.01*parseFloat(RegExp.$1)+\"\":t?\"1\":\"\"},set:function(e,t){var n=e.style,r=e.currentStyle,i=x.isNumeric(t)?\"alpha(opacity=\"+100*t+\")\":\"\",o=r&&r.filter||n.filter||\"\";n.zoom=1,(t>=1||\"\"===t)&&\"\"===x.trim(o.replace($t,\"\"))&&n.removeAttribute&&(n.removeAttribute(\"filter\"),\"\"===t||r&&!r.filter)||(n.filter=$t.test(o)?o.replace($t,i):o+\" \"+i)}}),x(function(){x.support.reliableMarginRight||(x.cssHooks.marginRight={get:function(e,n){return n?x.swap(e,{display:\"inline-block\"},Wt,[e,\"marginRight\"]):t}}),!x.support.pixelPosition&&x.fn.position&&x.each([\"top\",\"left\"],function(e,n){x.cssHooks[n]={get:function(e,r){return r?(r=Wt(e,n),Yt.test(r)?x(e).position()[n]+\"px\":r):t}}})}),x.expr&&x.expr.filters&&(x.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight||!x.support.reliableHiddenOffsets&&\"none\"===(e.style&&e.style.display||x.css(e,\"display\"))},x.expr.filters.visible=function(e){return!x.expr.filters.hidden(e)}),x.each({margin:\"\",padding:\"\",border:\"Width\"},function(e,t){x.cssHooks[e+t]={expand:function(n){var r=0,i={},o=\"string\"==typeof n?n.split(\" \"):[n];for(;4>r;r++)i[e+Zt[r]+t]=o[r]||o[r-2]||o[0];return i}},Ut.test(e)||(x.cssHooks[e+t].set=on)});var cn=/%20/g,pn=/\\[\\]$/,fn=/\\r?\\n/g,dn=/^(?:submit|button|image|reset|file)$/i,hn=/^(?:input|select|textarea|keygen)/i;x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=x.prop(this,\"elements\");return e?x.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!x(this).is(\":disabled\")&&hn.test(this.nodeName)&&!dn.test(e)&&(this.checked||!Ct.test(e))}).map(function(e,t){var n=x(this).val();return null==n?null:x.isArray(n)?x.map(n,function(e){return{name:t.name,value:e.replace(fn,\"\\r\\n\")}}):{name:t.name,value:n.replace(fn,\"\\r\\n\")}}).get()}}),x.param=function(e,n){var r,i=[],o=function(e,t){t=x.isFunction(t)?t():null==t?\"\":t,i[i.length]=encodeURIComponent(e)+\"=\"+encodeURIComponent(t)};if(n===t&&(n=x.ajaxSettings&&x.ajaxSettings.traditional),x.isArray(e)||e.jquery&&!x.isPlainObject(e))x.each(e,function(){o(this.name,this.value)});else for(r in e)gn(r,e[r],n,o);return i.join(\"&\").replace(cn,\"+\")};function gn(e,t,n,r){var i;if(x.isArray(t))x.each(t,function(t,i){n||pn.test(e)?r(e,i):gn(e+\"[\"+(\"object\"==typeof i?t:\"\")+\"]\",i,n,r)});else if(n||\"object\"!==x.type(t))r(e,t);else for(i in t)gn(e+\"[\"+i+\"]\",t[i],n,r)}x.each(\"blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu\".split(\" \"),function(e,t){x.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),x.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,\"**\"):this.off(t,e||\"**\",n)}});var mn,yn,vn=x.now(),bn=/\\?/,xn=/#.*$/,wn=/([?&])_=[^&]*/,Tn=/^(.*?):[ \\t]*([^\\r\\n]*)\\r?$/gm,Cn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Nn=/^(?:GET|HEAD)$/,kn=/^\\/\\//,En=/^([\\w.+-]+:)(?:\\/\\/([^\\/?#:]*)(?::(\\d+)|)|)/,Sn=x.fn.load,An={},jn={},Dn=\"*/\".concat(\"*\");try{yn=o.href}catch(Ln){yn=a.createElement(\"a\"),yn.href=\"\",yn=yn.href}mn=En.exec(yn.toLowerCase())||[];function Hn(e){return function(t,n){\"string\"!=typeof t&&(n=t,t=\"*\");var r,i=0,o=t.toLowerCase().match(T)||[];if(x.isFunction(n))while(r=o[i++])\"+\"===r[0]?(r=r.slice(1)||\"*\",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function qn(e,n,r,i){var o={},a=e===jn;function s(l){var u;return o[l]=!0,x.each(e[l]||[],function(e,l){var c=l(n,r,i);return\"string\"!=typeof c||a||o[c]?a?!(u=c):t:(n.dataTypes.unshift(c),s(c),!1)}),u}return s(n.dataTypes[0])||!o[\"*\"]&&s(\"*\")}function _n(e,n){var r,i,o=x.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((o[i]?e:r||(r={}))[i]=n[i]);return r&&x.extend(!0,e,r),e}x.fn.load=function(e,n,r){if(\"string\"!=typeof e&&Sn)return Sn.apply(this,arguments);var i,o,a,s=this,l=e.indexOf(\" \");return l>=0&&(i=e.slice(l,e.length),e=e.slice(0,l)),x.isFunction(n)?(r=n,n=t):n&&\"object\"==typeof n&&(a=\"POST\"),s.length>0&&x.ajax({url:e,type:a,dataType:\"html\",data:n}).done(function(e){o=arguments,s.html(i?x(\"<div>\").append(x.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){s.each(r,o||[e.responseText,t,e])}),this},x.each([\"ajaxStart\",\"ajaxStop\",\"ajaxComplete\",\"ajaxError\",\"ajaxSuccess\",\"ajaxSend\"],function(e,t){x.fn[t]=function(e){return this.on(t,e)}}),x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:yn,type:\"GET\",isLocal:Cn.test(mn[1]),global:!0,processData:!0,async:!0,contentType:\"application/x-www-form-urlencoded; charset=UTF-8\",accepts:{\"*\":Dn,text:\"text/plain\",html:\"text/html\",xml:\"application/xml, text/xml\",json:\"application/json, text/javascript\"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:\"responseXML\",text:\"responseText\",json:\"responseJSON\"},converters:{\"* text\":String,\"text html\":!0,\"text json\":x.parseJSON,\"text xml\":x.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?_n(_n(e,x.ajaxSettings),t):_n(x.ajaxSettings,e)},ajaxPrefilter:Hn(An),ajaxTransport:Hn(jn),ajax:function(e,n){\"object\"==typeof e&&(n=e,e=t),n=n||{};var r,i,o,a,s,l,u,c,p=x.ajaxSetup({},n),f=p.context||p,d=p.context&&(f.nodeType||f.jquery)?x(f):x.event,h=x.Deferred(),g=x.Callbacks(\"once memory\"),m=p.statusCode||{},y={},v={},b=0,w=\"canceled\",C={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!c){c={};while(t=Tn.exec(a))c[t[1].toLowerCase()]=t[2]}t=c[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=v[n]=v[n]||e,y[e]=t),this},overrideMimeType:function(e){return b||(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)m[t]=[m[t],e[t]];else C.always(e[C.status]);return this},abort:function(e){var t=e||w;return u&&u.abort(t),k(0,t),this}};if(h.promise(C).complete=g.add,C.success=C.done,C.error=C.fail,p.url=((e||p.url||yn)+\"\").replace(xn,\"\").replace(kn,mn[1]+\"//\"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=x.trim(p.dataType||\"*\").toLowerCase().match(T)||[\"\"],null==p.crossDomain&&(r=En.exec(p.url.toLowerCase()),p.crossDomain=!(!r||r[1]===mn[1]&&r[2]===mn[2]&&(r[3]||(\"http:\"===r[1]?\"80\":\"443\"))===(mn[3]||(\"http:\"===mn[1]?\"80\":\"443\")))),p.data&&p.processData&&\"string\"!=typeof p.data&&(p.data=x.param(p.data,p.traditional)),qn(An,p,n,C),2===b)return C;l=p.global,l&&0===x.active++&&x.event.trigger(\"ajaxStart\"),p.type=p.type.toUpperCase(),p.hasContent=!Nn.test(p.type),o=p.url,p.hasContent||(p.data&&(o=p.url+=(bn.test(o)?\"&\":\"?\")+p.data,delete p.data),p.cache===!1&&(p.url=wn.test(o)?o.replace(wn,\"$1_=\"+vn++):o+(bn.test(o)?\"&\":\"?\")+\"_=\"+vn++)),p.ifModified&&(x.lastModified[o]&&C.setRequestHeader(\"If-Modified-Since\",x.lastModified[o]),x.etag[o]&&C.setRequestHeader(\"If-None-Match\",x.etag[o])),(p.data&&p.hasContent&&p.contentType!==!1||n.contentType)&&C.setRequestHeader(\"Content-Type\",p.contentType),C.setRequestHeader(\"Accept\",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+(\"*\"!==p.dataTypes[0]?\", \"+Dn+\"; q=0.01\":\"\"):p.accepts[\"*\"]);for(i in p.headers)C.setRequestHeader(i,p.headers[i]);if(p.beforeSend&&(p.beforeSend.call(f,C,p)===!1||2===b))return C.abort();w=\"abort\";for(i in{success:1,error:1,complete:1})C[i](p[i]);if(u=qn(jn,p,n,C)){C.readyState=1,l&&d.trigger(\"ajaxSend\",[C,p]),p.async&&p.timeout>0&&(s=setTimeout(function(){C.abort(\"timeout\")},p.timeout));try{b=1,u.send(y,k)}catch(N){if(!(2>b))throw N;k(-1,N)}}else k(-1,\"No Transport\");function k(e,n,r,i){var c,y,v,w,T,N=n;2!==b&&(b=2,s&&clearTimeout(s),u=t,a=i||\"\",C.readyState=e>0?4:0,c=e>=200&&300>e||304===e,r&&(w=Mn(p,C,r)),w=On(p,w,C,c),c?(p.ifModified&&(T=C.getResponseHeader(\"Last-Modified\"),T&&(x.lastModified[o]=T),T=C.getResponseHeader(\"etag\"),T&&(x.etag[o]=T)),204===e||\"HEAD\"===p.type?N=\"nocontent\":304===e?N=\"notmodified\":(N=w.state,y=w.data,v=w.error,c=!v)):(v=N,(e||!N)&&(N=\"error\",0>e&&(e=0))),C.status=e,C.statusText=(n||N)+\"\",c?h.resolveWith(f,[y,N,C]):h.rejectWith(f,[C,N,v]),C.statusCode(m),m=t,l&&d.trigger(c?\"ajaxSuccess\":\"ajaxError\",[C,p,c?y:v]),g.fireWith(f,[C,N]),l&&(d.trigger(\"ajaxComplete\",[C,p]),--x.active||x.event.trigger(\"ajaxStop\")))}return C},getJSON:function(e,t,n){return x.get(e,t,n,\"json\")},getScript:function(e,n){return x.get(e,t,n,\"script\")}}),x.each([\"get\",\"post\"],function(e,n){x[n]=function(e,r,i,o){return x.isFunction(r)&&(o=o||i,i=r,r=t),x.ajax({url:e,type:n,dataType:o,data:r,success:i})}});function Mn(e,n,r){var i,o,a,s,l=e.contents,u=e.dataTypes;while(\"*\"===u[0])u.shift(),o===t&&(o=e.mimeType||n.getResponseHeader(\"Content-Type\"));if(o)for(s in l)if(l[s]&&l[s].test(o)){u.unshift(s);break}if(u[0]in r)a=u[0];else{for(s in r){if(!u[0]||e.converters[s+\" \"+u[0]]){a=s;break}i||(i=s)}a=a||i}return a?(a!==u[0]&&u.unshift(a),r[a]):t}function On(e,t,n,r){var i,o,a,s,l,u={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)u[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=c.shift())if(\"*\"===o)o=l;else if(\"*\"!==l&&l!==o){if(a=u[l+\" \"+o]||u[\"* \"+o],!a)for(i in u)if(s=i.split(\" \"),s[1]===o&&(a=u[l+\" \"+s[0]]||u[\"* \"+s[0]])){a===!0?a=u[i]:u[i]!==!0&&(o=s[0],c.unshift(s[1]));break}if(a!==!0)if(a&&e[\"throws\"])t=a(t);else try{t=a(t)}catch(p){return{state:\"parsererror\",error:a?p:\"No conversion from \"+l+\" to \"+o}}}return{state:\"success\",data:t}}x.ajaxSetup({accepts:{script:\"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript\"},contents:{script:/(?:java|ecma)script/},converters:{\"text script\":function(e){return x.globalEval(e),e}}}),x.ajaxPrefilter(\"script\",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type=\"GET\",e.global=!1)}),x.ajaxTransport(\"script\",function(e){if(e.crossDomain){var n,r=a.head||x(\"head\")[0]||a.documentElement;return{send:function(t,i){n=a.createElement(\"script\"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||i(200,\"success\"))},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var Fn=[],Bn=/(=)\\?(?=&|$)|\\?\\?/;x.ajaxSetup({jsonp:\"callback\",jsonpCallback:function(){var e=Fn.pop()||x.expando+\"_\"+vn++;return this[e]=!0,e}}),x.ajaxPrefilter(\"json jsonp\",function(n,r,i){var o,a,s,l=n.jsonp!==!1&&(Bn.test(n.url)?\"url\":\"string\"==typeof n.data&&!(n.contentType||\"\").indexOf(\"application/x-www-form-urlencoded\")&&Bn.test(n.data)&&\"data\");return l||\"jsonp\"===n.dataTypes[0]?(o=n.jsonpCallback=x.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,l?n[l]=n[l].replace(Bn,\"$1\"+o):n.jsonp!==!1&&(n.url+=(bn.test(n.url)?\"&\":\"?\")+n.jsonp+\"=\"+o),n.converters[\"script json\"]=function(){return s||x.error(o+\" was not called\"),s[0]},n.dataTypes[0]=\"json\",a=e[o],e[o]=function(){s=arguments},i.always(function(){e[o]=a,n[o]&&(n.jsonpCallback=r.jsonpCallback,Fn.push(o)),s&&x.isFunction(a)&&a(s[0]),s=a=t}),\"script\"):t});var Pn,Rn,Wn=0,$n=e.ActiveXObject&&function(){var e;for(e in Pn)Pn[e](t,!0)};function In(){try{return new e.XMLHttpRequest}catch(t){}}function zn(){try{return new e.ActiveXObject(\"Microsoft.XMLHTTP\")}catch(t){}}x.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&In()||zn()}:In,Rn=x.ajaxSettings.xhr(),x.support.cors=!!Rn&&\"withCredentials\"in Rn,Rn=x.support.ajax=!!Rn,Rn&&x.ajaxTransport(function(n){if(!n.crossDomain||x.support.cors){var r;return{send:function(i,o){var a,s,l=n.xhr();if(n.username?l.open(n.type,n.url,n.async,n.username,n.password):l.open(n.type,n.url,n.async),n.xhrFields)for(s in n.xhrFields)l[s]=n.xhrFields[s];n.mimeType&&l.overrideMimeType&&l.overrideMimeType(n.mimeType),n.crossDomain||i[\"X-Requested-With\"]||(i[\"X-Requested-With\"]=\"XMLHttpRequest\");try{for(s in i)l.setRequestHeader(s,i[s])}catch(u){}l.send(n.hasContent&&n.data||null),r=function(e,i){var s,u,c,p;try{if(r&&(i||4===l.readyState))if(r=t,a&&(l.onreadystatechange=x.noop,$n&&delete Pn[a]),i)4!==l.readyState&&l.abort();else{p={},s=l.status,u=l.getAllResponseHeaders(),\"string\"==typeof l.responseText&&(p.text=l.responseText);try{c=l.statusText}catch(f){c=\"\"}s||!n.isLocal||n.crossDomain?1223===s&&(s=204):s=p.text?200:404}}catch(d){i||o(-1,d)}p&&o(s,c,p,u)},n.async?4===l.readyState?setTimeout(r):(a=++Wn,$n&&(Pn||(Pn={},x(e).unload($n)),Pn[a]=r),l.onreadystatechange=r):r()},abort:function(){r&&r(t,!0)}}}});var Xn,Un,Vn=/^(?:toggle|show|hide)$/,Yn=RegExp(\"^(?:([+-])=|)(\"+w+\")([a-z%]*)$\",\"i\"),Jn=/queueHooks$/,Gn=[nr],Qn={\"*\":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=Yn.exec(t),o=i&&i[3]||(x.cssNumber[e]?\"\":\"px\"),a=(x.cssNumber[e]||\"px\"!==o&&+r)&&Yn.exec(x.css(n.elem,e)),s=1,l=20;if(a&&a[3]!==o){o=o||a[3],i=i||[],a=+r||1;do s=s||\".5\",a/=s,x.style(n.elem,e,a+o);while(s!==(s=n.cur()/r)&&1!==s&&--l)}return i&&(a=n.start=+a||+r||0,n.unit=o,n.end=i[1]?a+(i[1]+1)*i[2]:+i[2]),n}]};function Kn(){return setTimeout(function(){Xn=t}),Xn=x.now()}function Zn(e,t,n){var r,i=(Qn[t]||[]).concat(Qn[\"*\"]),o=0,a=i.length;for(;a>o;o++)if(r=i[o].call(n,t,e))return r}function er(e,t,n){var r,i,o=0,a=Gn.length,s=x.Deferred().always(function(){delete l.elem}),l=function(){if(i)return!1;var t=Xn||Kn(),n=Math.max(0,u.startTime+u.duration-t),r=n/u.duration||0,o=1-r,a=0,l=u.tweens.length;for(;l>a;a++)u.tweens[a].run(o);return s.notifyWith(e,[u,o,n]),1>o&&l?n:(s.resolveWith(e,[u]),!1)},u=s.promise({elem:e,props:x.extend({},t),opts:x.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Xn||Kn(),duration:n.duration,tweens:[],createTween:function(t,n){var r=x.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(r),r},stop:function(t){var n=0,r=t?u.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)u.tweens[n].run(1);return t?s.resolveWith(e,[u,t]):s.rejectWith(e,[u,t]),this}}),c=u.props;for(tr(c,u.opts.specialEasing);a>o;o++)if(r=Gn[o].call(u,e,c,u.opts))return r;return x.map(c,Zn,u),x.isFunction(u.opts.start)&&u.opts.start.call(e,u),x.fx.timer(x.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function tr(e,t){var n,r,i,o,a;for(n in e)if(r=x.camelCase(n),i=t[r],o=e[n],x.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),a=x.cssHooks[r],a&&\"expand\"in a){o=a.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}x.Animation=x.extend(er,{tweener:function(e,t){x.isFunction(e)?(t=e,e=[\"*\"]):e=e.split(\" \");var n,r=0,i=e.length;for(;i>r;r++)n=e[r],Qn[n]=Qn[n]||[],Qn[n].unshift(t)},prefilter:function(e,t){t?Gn.unshift(e):Gn.push(e)}});function nr(e,t,n){var r,i,o,a,s,l,u=this,c={},p=e.style,f=e.nodeType&&nn(e),d=x._data(e,\"fxshow\");n.queue||(s=x._queueHooks(e,\"fx\"),null==s.unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,u.always(function(){u.always(function(){s.unqueued--,x.queue(e,\"fx\").length||s.empty.fire()})})),1===e.nodeType&&(\"height\"in t||\"width\"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],\"inline\"===x.css(e,\"display\")&&\"none\"===x.css(e,\"float\")&&(x.support.inlineBlockNeedsLayout&&\"inline\"!==ln(e.nodeName)?p.zoom=1:p.display=\"inline-block\")),n.overflow&&(p.overflow=\"hidden\",x.support.shrinkWrapBlocks||u.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],Vn.exec(i)){if(delete t[r],o=o||\"toggle\"===i,i===(f?\"hide\":\"show\"))continue;c[r]=d&&d[r]||x.style(e,r)}if(!x.isEmptyObject(c)){d?\"hidden\"in d&&(f=d.hidden):d=x._data(e,\"fxshow\",{}),o&&(d.hidden=!f),f?x(e).show():u.done(function(){x(e).hide()}),u.done(function(){var t;x._removeData(e,\"fxshow\");for(t in c)x.style(e,t,c[t])});for(r in c)a=Zn(f?d[r]:0,r,u),r in d||(d[r]=a.start,f&&(a.end=a.start,a.start=\"width\"===r||\"height\"===r?1:0))}}function rr(e,t,n,r,i){return new rr.prototype.init(e,t,n,r,i)}x.Tween=rr,rr.prototype={constructor:rr,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||\"swing\",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(x.cssNumber[n]?\"\":\"px\")},cur:function(){var e=rr.propHooks[this.prop];return e&&e.get?e.get(this):rr.propHooks._default.get(this)},run:function(e){var t,n=rr.propHooks[this.prop];return this.pos=t=this.options.duration?x.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):rr.propHooks._default.set(this),this}},rr.prototype.init.prototype=rr.prototype,rr.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=x.css(e.elem,e.prop,\"\"),t&&\"auto\"!==t?t:0):e.elem[e.prop]},set:function(e){x.fx.step[e.prop]?x.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[x.cssProps[e.prop]]||x.cssHooks[e.prop])?x.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},rr.propHooks.scrollTop=rr.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},x.each([\"toggle\",\"show\",\"hide\"],function(e,t){var n=x.fn[t];x.fn[t]=function(e,r,i){return null==e||\"boolean\"==typeof e?n.apply(this,arguments):this.animate(ir(t,!0),e,r,i)}}),x.fn.extend({fadeTo:function(e,t,n,r){return this.filter(nn).css(\"opacity\",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=x.isEmptyObject(e),o=x.speed(t,n,r),a=function(){var t=er(this,x.extend({},e),o);(i||x._data(this,\"finish\"))&&t.stop(!0)};return a.finish=a,i||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return\"string\"!=typeof e&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||\"fx\",[]),this.each(function(){var t=!0,n=null!=e&&e+\"queueHooks\",o=x.timers,a=x._data(this);if(n)a[n]&&a[n].stop&&i(a[n]);else for(n in a)a[n]&&a[n].stop&&Jn.test(n)&&i(a[n]);for(n=o.length;n--;)o[n].elem!==this||null!=e&&o[n].queue!==e||(o[n].anim.stop(r),t=!1,o.splice(n,1));(t||!r)&&x.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||\"fx\"),this.each(function(){var t,n=x._data(this),r=n[e+\"queue\"],i=n[e+\"queueHooks\"],o=x.timers,a=r?r.length:0;for(n.finish=!0,x.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}});function ir(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=Zt[i],r[\"margin\"+n]=r[\"padding\"+n]=e;return t&&(r.opacity=r.width=e),r}x.each({slideDown:ir(\"show\"),slideUp:ir(\"hide\"),slideToggle:ir(\"toggle\"),fadeIn:{opacity:\"show\"},fadeOut:{opacity:\"hide\"},fadeToggle:{opacity:\"toggle\"}},function(e,t){x.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),x.speed=function(e,t,n){var r=e&&\"object\"==typeof e?x.extend({},e):{complete:n||!n&&t||x.isFunction(e)&&e,duration:e,easing:n&&t||t&&!x.isFunction(t)&&t};return r.duration=x.fx.off?0:\"number\"==typeof r.duration?r.duration:r.duration in x.fx.speeds?x.fx.speeds[r.duration]:x.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue=\"fx\"),r.old=r.complete,r.complete=function(){x.isFunction(r.old)&&r.old.call(this),r.queue&&x.dequeue(this,r.queue)},r},x.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},x.timers=[],x.fx=rr.prototype.init,x.fx.tick=function(){var e,n=x.timers,r=0;for(Xn=x.now();n.length>r;r++)e=n[r],e()||n[r]!==e||n.splice(r--,1);n.length||x.fx.stop(),Xn=t},x.fx.timer=function(e){e()&&x.timers.push(e)&&x.fx.start()},x.fx.interval=13,x.fx.start=function(){Un||(Un=setInterval(x.fx.tick,x.fx.interval))},x.fx.stop=function(){clearInterval(Un),Un=null},x.fx.speeds={slow:600,fast:200,_default:400},x.fx.step={},x.expr&&x.expr.filters&&(x.expr.filters.animated=function(e){return x.grep(x.timers,function(t){return e===t.elem}).length}),x.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){x.offset.setOffset(this,e,t)});var n,r,o={top:0,left:0},a=this[0],s=a&&a.ownerDocument;if(s)return n=s.documentElement,x.contains(n,a)?(typeof a.getBoundingClientRect!==i&&(o=a.getBoundingClientRect()),r=or(s),{top:o.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:o.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):o},x.offset={setOffset:function(e,t,n){var r=x.css(e,\"position\");\"static\"===r&&(e.style.position=\"relative\");var i=x(e),o=i.offset(),a=x.css(e,\"top\"),s=x.css(e,\"left\"),l=(\"absolute\"===r||\"fixed\"===r)&&x.inArray(\"auto\",[a,s])>-1,u={},c={},p,f;l?(c=i.position(),p=c.top,f=c.left):(p=parseFloat(a)||0,f=parseFloat(s)||0),x.isFunction(t)&&(t=t.call(e,n,o)),null!=t.top&&(u.top=t.top-o.top+p),null!=t.left&&(u.left=t.left-o.left+f),\"using\"in t?t.using.call(e,u):i.css(u)}},x.fn.extend({position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return\"fixed\"===x.css(r,\"position\")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),x.nodeName(e[0],\"html\")||(n=e.offset()),n.top+=x.css(e[0],\"borderTopWidth\",!0),n.left+=x.css(e[0],\"borderLeftWidth\",!0)),{top:t.top-n.top-x.css(r,\"marginTop\",!0),left:t.left-n.left-x.css(r,\"marginLeft\",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||s;while(e&&!x.nodeName(e,\"html\")&&\"static\"===x.css(e,\"position\"))e=e.offsetParent;return e||s})}}),x.each({scrollLeft:\"pageXOffset\",scrollTop:\"pageYOffset\"},function(e,n){var r=/Y/.test(n);x.fn[e]=function(i){return x.access(this,function(e,i,o){var a=or(e);return o===t?a?n in a?a[n]:a.document.documentElement[i]:e[i]:(a?a.scrollTo(r?x(a).scrollLeft():o,r?o:x(a).scrollTop()):e[i]=o,t)},e,i,arguments.length,null)}});function or(e){return x.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}x.each({Height:\"height\",Width:\"width\"},function(e,n){x.each({padding:\"inner\"+e,content:n,\"\":\"outer\"+e},function(r,i){x.fn[i]=function(i,o){var a=arguments.length&&(r||\"boolean\"!=typeof i),s=r||(i===!0||o===!0?\"margin\":\"border\");return x.access(this,function(n,r,i){var o;return x.isWindow(n)?n.document.documentElement[\"client\"+e]:9===n.nodeType?(o=n.documentElement,Math.max(n.body[\"scroll\"+e],o[\"scroll\"+e],n.body[\"offset\"+e],o[\"offset\"+e],o[\"client\"+e])):i===t?x.css(n,r,s):x.style(n,r,i,s)},n,a?i:t,a,null)}})}),x.fn.size=function(){return this.length},x.fn.andSelf=x.fn.addBack,\"object\"==typeof module&&module&&\"object\"==typeof module.exports?module.exports=x:(e.jQuery=e.$=x,\"function\"==typeof define&&define.amd&&define(\"jquery\",[],function(){return x}))})(window);\n"}
],
[
{"endColumn":472,"endLine":37,"isContentScript":true,"scriptId":"134","startColumn":0,"startLine":0,"url":"chrome-extension://cgcfflfodgfcjgncckhjcmbibfebgfdo/jquery.jeditable.mini.js"},{"scriptSource":"\n(function($){$.fn.editable=function(target,options){if('disable'==target){$(this).data('disabled.editable',true);return;}\nif('enable'==target){$(this).data('disabled.editable',false);return;}\nif('destroy'==target){$(this).unbind($(this).data('event.editable')).removeData('disabled.editable').removeData('event.editable');return;}\nvar settings=$.extend({},$.fn.editable.defaults,{target:target},options);var plugin=$.editable.types[settings.type].plugin||function(){};var submit=$.editable.types[settings.type].submit||function(){};var buttons=$.editable.types[settings.type].buttons||$.editable.types['defaults'].buttons;var content=$.editable.types[settings.type].content||$.editable.types['defaults'].content;var element=$.editable.types[settings.type].element||$.editable.types['defaults'].element;var reset=$.editable.types[settings.type].reset||$.editable.types['defaults'].reset;var callback=settings.callback||function(){};var onedit=settings.onedit||function(){};var onsubmit=settings.onsubmit||function(){};var onreset=settings.onreset||function(){};var onerror=settings.onerror||reset;if(settings.tooltip){$(this).attr('title',settings.tooltip);}\nsettings.autowidth='auto'==settings.width;settings.autoheight='auto'==settings.height;return this.each(function(){var self=this;var savedwidth=$(self).width();var savedheight=$(self).height();$(this).data('event.editable',settings.event);if(!$.trim($(this).html())){$(this).html(settings.placeholder);}\n$(this).bind(settings.event,function(e){if(true===$(this).data('disabled.editable')){return;}\nif(self.editing){return;}\nif(false===onedit.apply(this,[settings,self])){return;}\ne.preventDefault();e.stopPropagation();if(settings.tooltip){$(self).removeAttr('title');}\nif(0==$(self).width()){settings.width=savedwidth;settings.height=savedheight;}else{if(settings.width!='none'){settings.width=settings.autowidth?$(self).width():settings.width;}\nif(settings.height!='none'){settings.height=settings.autoheight?$(self).height():settings.height;}}\nif($(this).html().toLowerCase().replace(/(;|\")/g,'')==settings.placeholder.toLowerCase().replace(/(;|\")/g,'')){$(this).html('');}\nself.editing=true;self.revert=$(self).html();$(self).html('');var form=$('<form />');if(settings.cssclass){if('inherit'==settings.cssclass){form.attr('class',$(self).attr('class'));}else{form.attr('class',settings.cssclass);}}\nif(settings.style){if('inherit'==settings.style){form.attr('style',$(self).attr('style'));form.css('display',$(self).css('display'));}else{form.attr('style',settings.style);}}\nvar input=element.apply(form,[settings,self]);var input_content;if(settings.loadurl){var t=setTimeout(function(){input.disabled=true;content.apply(form,[settings.loadtext,settings,self]);},100);var loaddata={};loaddata[settings.id]=self.id;if($.isFunction(settings.loaddata)){$.extend(loaddata,settings.loaddata.apply(self,[self.revert,settings]));}else{$.extend(loaddata,settings.loaddata);}\n$.ajax({type:settings.loadtype,url:settings.loadurl,data:loaddata,async:false,success:function(result){window.clearTimeout(t);input_content=result;input.disabled=false;}});}else if(settings.data){input_content=settings.data;if($.isFunction(settings.data)){input_content=settings.data.apply(self,[self.revert,settings]);}}else{input_content=self.revert;}\ncontent.apply(form,[input_content,settings,self]);input.attr('name',settings.name);buttons.apply(form,[settings,self]);$(self).append(form);plugin.apply(form,[settings,self]);$(':input:visible:enabled:first',form).focus();if(settings.select){input.select();}\ninput.keydown(function(e){if(e.keyCode==27){e.preventDefault();reset.apply(form,[settings,self]);}});var t;if('cancel'==settings.onblur){input.blur(function(e){t=setTimeout(function(){reset.apply(form,[settings,self]);},500);});}else if('submit'==settings.onblur){input.blur(function(e){t=setTimeout(function(){form.submit();},200);});}else if($.isFunction(settings.onblur)){input.blur(function(e){settings.onblur.apply(self,[input.val(),settings]);});}else{input.blur(function(e){});}\nform.submit(function(e){if(t){clearTimeout(t);}\ne.preventDefault();if(false!==onsubmit.apply(form,[settings,self])){if(false!==submit.apply(form,[settings,self])){if($.isFunction(settings.target)){var str=settings.target.apply(self,[input.val(),settings]);$(self).html(str);self.editing=false;callback.apply(self,[self.innerHTML,settings]);if(!$.trim($(self).html())){$(self).html(settings.placeholder);}}else{var submitdata={};submitdata[settings.name]=input.val();submitdata[settings.id]=self.id;if($.isFunction(settings.submitdata)){$.extend(submitdata,settings.submitdata.apply(self,[self.revert,settings]));}else{$.extend(submitdata,settings.submitdata);}\nif('PUT'==settings.method){submitdata['_method']='put';}\n$(self).html(settings.indicator);var ajaxoptions={type:'POST',data:submitdata,dataType:'html',url:settings.target,success:function(result,status){if(ajaxoptions.dataType=='html'){$(self).html(result);}\nself.editing=false;callback.apply(self,[result,settings]);if(!$.trim($(self).html())){$(self).html(settings.placeholder);}},error:function(xhr,status,error){onerror.apply(form,[settings,self,xhr]);}};$.extend(ajaxoptions,settings.ajaxoptions);$.ajax(ajaxoptions);}}}\n$(self).attr('title',settings.tooltip);return false;});});this.reset=function(form){if(this.editing){if(false!==onreset.apply(form,[settings,self])){$(self).html(self.revert);self.editing=false;if(!$.trim($(self).html())){$(self).html(settings.placeholder);}\nif(settings.tooltip){$(self).attr('title',settings.tooltip);}}}};});};$.editable={types:{defaults:{element:function(settings,original){var input=$('<input type=\"hidden\"></input>');$(this).append(input);return(input);},content:function(string,settings,original){$(':input:first',this).val(string);},reset:function(settings,original){original.reset(this);},buttons:function(settings,original){var form=this;if(settings.submit){if(settings.submit.match(/>$/)){var submit=$(settings.submit).click(function(){if(submit.attr(\"type\")!=\"submit\"){form.submit();}});}else{var submit=$('<button type=\"submit\" />');submit.html(settings.submit);}\n$(this).append(submit);}\nif(settings.cancel){if(settings.cancel.match(/>$/)){var cancel=$(settings.cancel);}else{var cancel=$('<button type=\"cancel\" />');cancel.html(settings.cancel);}\n$(this).append(cancel);$(cancel).click(function(event){if($.isFunction($.editable.types[settings.type].reset)){var reset=$.editable.types[settings.type].reset;}else{var reset=$.editable.types['defaults'].reset;}\nreset.apply(form,[settings,original]);return false;});}}},text:{element:function(settings,original){var input=$('<input />');if(settings.width!='none'){input.width(settings.width);}\nif(settings.height!='none'){input.height(settings.height);}\ninput.attr('autocomplete','off');$(this).append(input);return(input);}},textarea:{element:function(settings,original){var textarea=$('<textarea />');if(settings.rows){textarea.attr('rows',settings.rows);}else if(settings.height!=\"none\"){textarea.height(settings.height);}\nif(settings.cols){textarea.attr('cols',settings.cols);}else if(settings.width!=\"none\"){textarea.width(settings.width);}\n$(this).append(textarea);return(textarea);}},select:{element:function(settings,original){var select=$('<select />');$(this).append(select);return(select);},content:function(data,settings,original){if(String==data.constructor){eval('var json = '+data);}else{var json=data;}\nfor(var key in json){if(!json.hasOwnProperty(key)){continue;}\nif('selected'==key){continue;}\nvar option=$('<option />').val(key).append(json[key]);$('select',this).append(option);}\n$('select',this).children().each(function(){if($(this).val()==json['selected']||$(this).text()==$.trim(original.revert)){$(this).attr('selected','selected');}});}}},addInputType:function(name,input){$.editable.types[name]=input;}};$.fn.editable.defaults={name:'value',id:'id',type:'text',width:'auto',height:'auto',event:'click.editable',onblur:'cancel',loadtype:'GET',loadtext:'Loading...',placeholder:'Click to edit',loaddata:{},submitdata:{},ajaxoptions:{}};})(jQuery);"}
],
[
{"endColumn":0,"endLine":19,"isContentScript":true,"scriptId":"135","startColumn":0,"startLine":0,"url":"chrome-extension://cgcfflfodgfcjgncckhjcmbibfebgfdo/rtm/md5.js"},{"scriptSource":"/*\nCryptoJS v3.1.2\ncode.google.com/p/crypto-js\n(c) 2009-2013 by Jeff Mott. All rights reserved.\ncode.google.com/p/crypto-js/wiki/License\n*/\nvar CryptoJS=CryptoJS||function(s,p){var m={},l=m.lib={},n=function(){},r=l.Base={extend:function(b){n.prototype=this;var h=new n;b&&h.mixIn(b);h.hasOwnProperty(\"init\")||(h.init=function(){h.$super.init.apply(this,arguments)});h.init.prototype=h;h.$super=this;return h},create:function(){var b=this.extend();b.init.apply(b,arguments);return b},init:function(){},mixIn:function(b){for(var h in b)b.hasOwnProperty(h)&&(this[h]=b[h]);b.hasOwnProperty(\"toString\")&&(this.toString=b.toString)},clone:function(){return this.init.prototype.extend(this)}},\nq=l.WordArray=r.extend({init:function(b,h){b=this.words=b||[];this.sigBytes=h!=p?h:4*b.length},toString:function(b){return(b||t).stringify(this)},concat:function(b){var h=this.words,a=b.words,j=this.sigBytes;b=b.sigBytes;this.clamp();if(j%4)for(var g=0;g<b;g++)h[j+g>>>2]|=(a[g>>>2]>>>24-8*(g%4)&255)<<24-8*((j+g)%4);else if(65535<a.length)for(g=0;g<b;g+=4)h[j+g>>>2]=a[g>>>2];else h.push.apply(h,a);this.sigBytes+=b;return this},clamp:function(){var b=this.words,h=this.sigBytes;b[h>>>2]&=4294967295<<\n32-8*(h%4);b.length=s.ceil(h/4)},clone:function(){var b=r.clone.call(this);b.words=this.words.slice(0);return b},random:function(b){for(var h=[],a=0;a<b;a+=4)h.push(4294967296*s.random()|0);return new q.init(h,b)}}),v=m.enc={},t=v.Hex={stringify:function(b){var a=b.words;b=b.sigBytes;for(var g=[],j=0;j<b;j++){var k=a[j>>>2]>>>24-8*(j%4)&255;g.push((k>>>4).toString(16));g.push((k&15).toString(16))}return g.join(\"\")},parse:function(b){for(var a=b.length,g=[],j=0;j<a;j+=2)g[j>>>3]|=parseInt(b.substr(j,\n2),16)<<24-4*(j%8);return new q.init(g,a/2)}},a=v.Latin1={stringify:function(b){var a=b.words;b=b.sigBytes;for(var g=[],j=0;j<b;j++)g.push(String.fromCharCode(a[j>>>2]>>>24-8*(j%4)&255));return g.join(\"\")},parse:function(b){for(var a=b.length,g=[],j=0;j<a;j++)g[j>>>2]|=(b.charCodeAt(j)&255)<<24-8*(j%4);return new q.init(g,a)}},u=v.Utf8={stringify:function(b){try{return decodeURIComponent(escape(a.stringify(b)))}catch(g){throw Error(\"Malformed UTF-8 data\");}},parse:function(b){return a.parse(unescape(encodeURIComponent(b)))}},\ng=l.BufferedBlockAlgorithm=r.extend({reset:function(){this._data=new q.init;this._nDataBytes=0},_append:function(b){\"string\"==typeof b&&(b=u.parse(b));this._data.concat(b);this._nDataBytes+=b.sigBytes},_process:function(b){var a=this._data,g=a.words,j=a.sigBytes,k=this.blockSize,m=j/(4*k),m=b?s.ceil(m):s.max((m|0)-this._minBufferSize,0);b=m*k;j=s.min(4*b,j);if(b){for(var l=0;l<b;l+=k)this._doProcessBlock(g,l);l=g.splice(0,b);a.sigBytes-=j}return new q.init(l,j)},clone:function(){var b=r.clone.call(this);\nb._data=this._data.clone();return b},_minBufferSize:0});l.Hasher=g.extend({cfg:r.extend(),init:function(b){this.cfg=this.cfg.extend(b);this.reset()},reset:function(){g.reset.call(this);this._doReset()},update:function(b){this._append(b);this._process();return this},finalize:function(b){b&&this._append(b);return this._doFinalize()},blockSize:16,_createHelper:function(b){return function(a,g){return(new b.init(g)).finalize(a)}},_createHmacHelper:function(b){return function(a,g){return(new k.HMAC.init(b,\ng)).finalize(a)}}});var k=m.algo={};return m}(Math);\n(function(s){function p(a,k,b,h,l,j,m){a=a+(k&b|~k&h)+l+m;return(a<<j|a>>>32-j)+k}function m(a,k,b,h,l,j,m){a=a+(k&h|b&~h)+l+m;return(a<<j|a>>>32-j)+k}function l(a,k,b,h,l,j,m){a=a+(k^b^h)+l+m;return(a<<j|a>>>32-j)+k}function n(a,k,b,h,l,j,m){a=a+(b^(k|~h))+l+m;return(a<<j|a>>>32-j)+k}for(var r=CryptoJS,q=r.lib,v=q.WordArray,t=q.Hasher,q=r.algo,a=[],u=0;64>u;u++)a[u]=4294967296*s.abs(s.sin(u+1))|0;q=q.MD5=t.extend({_doReset:function(){this._hash=new v.init([1732584193,4023233417,2562383102,271733878])},\n_doProcessBlock:function(g,k){for(var b=0;16>b;b++){var h=k+b,w=g[h];g[h]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360}var b=this._hash.words,h=g[k+0],w=g[k+1],j=g[k+2],q=g[k+3],r=g[k+4],s=g[k+5],t=g[k+6],u=g[k+7],v=g[k+8],x=g[k+9],y=g[k+10],z=g[k+11],A=g[k+12],B=g[k+13],C=g[k+14],D=g[k+15],c=b[0],d=b[1],e=b[2],f=b[3],c=p(c,d,e,f,h,7,a[0]),f=p(f,c,d,e,w,12,a[1]),e=p(e,f,c,d,j,17,a[2]),d=p(d,e,f,c,q,22,a[3]),c=p(c,d,e,f,r,7,a[4]),f=p(f,c,d,e,s,12,a[5]),e=p(e,f,c,d,t,17,a[6]),d=p(d,e,f,c,u,22,a[7]),\nc=p(c,d,e,f,v,7,a[8]),f=p(f,c,d,e,x,12,a[9]),e=p(e,f,c,d,y,17,a[10]),d=p(d,e,f,c,z,22,a[11]),c=p(c,d,e,f,A,7,a[12]),f=p(f,c,d,e,B,12,a[13]),e=p(e,f,c,d,C,17,a[14]),d=p(d,e,f,c,D,22,a[15]),c=m(c,d,e,f,w,5,a[16]),f=m(f,c,d,e,t,9,a[17]),e=m(e,f,c,d,z,14,a[18]),d=m(d,e,f,c,h,20,a[19]),c=m(c,d,e,f,s,5,a[20]),f=m(f,c,d,e,y,9,a[21]),e=m(e,f,c,d,D,14,a[22]),d=m(d,e,f,c,r,20,a[23]),c=m(c,d,e,f,x,5,a[24]),f=m(f,c,d,e,C,9,a[25]),e=m(e,f,c,d,q,14,a[26]),d=m(d,e,f,c,v,20,a[27]),c=m(c,d,e,f,B,5,a[28]),f=m(f,c,\nd,e,j,9,a[29]),e=m(e,f,c,d,u,14,a[30]),d=m(d,e,f,c,A,20,a[31]),c=l(c,d,e,f,s,4,a[32]),f=l(f,c,d,e,v,11,a[33]),e=l(e,f,c,d,z,16,a[34]),d=l(d,e,f,c,C,23,a[35]),c=l(c,d,e,f,w,4,a[36]),f=l(f,c,d,e,r,11,a[37]),e=l(e,f,c,d,u,16,a[38]),d=l(d,e,f,c,y,23,a[39]),c=l(c,d,e,f,B,4,a[40]),f=l(f,c,d,e,h,11,a[41]),e=l(e,f,c,d,q,16,a[42]),d=l(d,e,f,c,t,23,a[43]),c=l(c,d,e,f,x,4,a[44]),f=l(f,c,d,e,A,11,a[45]),e=l(e,f,c,d,D,16,a[46]),d=l(d,e,f,c,j,23,a[47]),c=n(c,d,e,f,h,6,a[48]),f=n(f,c,d,e,u,10,a[49]),e=n(e,f,c,d,\nC,15,a[50]),d=n(d,e,f,c,s,21,a[51]),c=n(c,d,e,f,A,6,a[52]),f=n(f,c,d,e,q,10,a[53]),e=n(e,f,c,d,y,15,a[54]),d=n(d,e,f,c,w,21,a[55]),c=n(c,d,e,f,v,6,a[56]),f=n(f,c,d,e,D,10,a[57]),e=n(e,f,c,d,t,15,a[58]),d=n(d,e,f,c,B,21,a[59]),c=n(c,d,e,f,r,6,a[60]),f=n(f,c,d,e,z,10,a[61]),e=n(e,f,c,d,j,15,a[62]),d=n(d,e,f,c,x,21,a[63]);b[0]=b[0]+c|0;b[1]=b[1]+d|0;b[2]=b[2]+e|0;b[3]=b[3]+f|0},_doFinalize:function(){var a=this._data,k=a.words,b=8*this._nDataBytes,h=8*a.sigBytes;k[h>>>5]|=128<<24-h%32;var l=s.floor(b/\n4294967296);k[(h+64>>>9<<4)+15]=(l<<8|l>>>24)&16711935|(l<<24|l>>>8)&4278255360;k[(h+64>>>9<<4)+14]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360;a.sigBytes=4*(k.length+1);this._process();a=this._hash;k=a.words;for(b=0;4>b;b++)h=k[b],k[b]=(h<<8|h>>>24)&16711935|(h<<24|h>>>8)&4278255360;return a},clone:function(){var a=t.clone.call(this);a._hash=this._hash.clone();return a}});r.MD5=t._createHelper(q);r.HmacMD5=t._createHmacHelper(q)})(Math);\n"}
],
[
{"endColumn":0,"endLine":258,"isContentScript":true,"scriptId":"136","startColumn":0,"startLine":0,"url":"chrome-extension://cgcfflfodgfcjgncckhjcmbibfebgfdo/rtm/rtm.js"},{"scriptSource":"/**\n *   Javascript Library - Remember The Milk\n *\n *   @author Michael Day\n *   @since January 27th, 2013\n *   @see http://www.rememberthemilk.com/services/api/\n *\n *   Uses crypto module under node.js. Requires a global\n *   md5 function on other platforms. I recommend this one:\n *   http://www.myersdaily.org/joseph/javascript/md5-text.html\n *\n *   Based on RTM PHP Library by Adam Magaña\n *   @see https://github.com/adammagana/rtm-php-library\n *\n *   License (The MIT License)\n *   \n *   Copyright (c) 2011 Michael Day <manveru.alma@gmail.com>\n *   \n *   Permission is hereby granted, free of charge, to any person obtaining\n *   a copy of this software and associated documentation files (the\n *   'Software'), to deal in the Software without restriction, including\n *   without limitation the rights to use, copy, modify, merge, publish,\n *   distribute, sublicense, and/or sell copies of the Software, and to\n *   permit persons to whom the Software is furnished to do so, subject to\n *   the following conditions:\n *   \n *   The above copyright notice and this permission notice shall be\n *   included in all copies or substantial portions of the Software.\n *   \n *   THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND,\n *   EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n *   MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\n *   IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\n *   CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\n *   TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n *   SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n(function (root, factory) {\n\tif (typeof exports === \"object\" && exports) {\n\t\tmodule.exports = factory; // CommonJS\n\t} else if (typeof define === \"function\" && define.amd) {\n\t\tdefine(factory); // AMD\n\t} else {\n\t\troot.RememberTheMilk = factory; // <script>\n\t}\n}(this, (function () {\n\tvar exports = function (appKey, appSecret, permissions, format) {\n\t\tvar https, crypt;\n\n\t\tthis.authUrl = 'https://www.rememberthemilk.com/services/auth/';\n\t\tthis.baseUrl = 'https://api.rememberthemilk.com/services/rest/';\n\n\t\tthis.isWinJS = (typeof WinJS !== 'undefined');\n\t\tthis.isNode = (typeof module !== 'undefined' && module.exports);\n\n\t\tif (this.isNode) {\n\t\t\thttps = require('https');\n\t\t\tcrypto = require('crypto');\n\t\t}\n\n\t\tthis.md5 = (!this.isNode)\n\t\t\t? //md5\n          CryptoJS.MD5\n\t\t\t: function(string) {\n\t\t\t\treturn crypto.createHash('md5').update(string, 'utf8').digest(\"hex\");\n\t\t\t}\n\n\t\tvar appKey = (appKey) ? appKey : '',\n\t\t\tappSecret = (appSecret) ? appSecret : '',\n\t\t\tpermissions = (permissions) ? permissions : 'read',\n\t\t\tformat = (format) ? format : 'json';\n\n\t\tif (!appKey || !appSecret) {\n\t\t\tthrow 'Error: App Key and Secret Key must be defined.';\n\t\t}\n\n\t\tthis.appKey = appKey;\n\t\tthis.appSecret = appSecret;\n\t\tthis.permissions = permissions;\n\t\tthis.format = format;\n\n\t\t/**\n\t\t * Encodes request parameters into URL format \n\t\t * \n\t\t * @param params    Array of parameters to be URL encoded\n\t\t * @param signed    Boolean specfying whether or not the URL should be signed\n\t\t * @return          Returns the URL encoded string of parameters\n\t\t */\n\t\tthis.encodeUrlParams = function (params, signed) {\n\t\t\tvar params = (params) ? params : {},\n\t\t\t\tsigned = (signed) ? signed : false,\n\t\t\t\tparamString = '',\n\t\t\t\tcount;\n\n\t\t\tparams.format = this.format;\n\t\t\tparams.api_key = this.appKey;\n\n\t\t\tcount = 0;\n\n\t\t\t// Encode the parameter keys and values\n\t\t\tfor (key in params) {\n\t\t\t\tif (count == 0) {\n\t\t\t\t\tparamString += '?' + key + '=' + encodeURIComponent(params[key]);\n\t\t\t\t} else {\n\t\t\t\t\tparamString += '&' + key + '=' + encodeURIComponent(params[key]);\n\t\t\t\t}\n\n\t\t\t\tcount++;\n\t\t\t}\n\n\t\t\t// Append an auth signature if needed\n\t\t\tif (signed) {\n\t\t\t\tparamString += this.generateSig(params);\n\t\t\t}\n\n\t\t\treturn paramString;\n\t\t};\n\n\t\t/**\n\t\t * Generates a URL encoded authentication signature\n\t\t * \n\t\t * @param params    The parameters used to generate the signature\n\t\t * @return          Returns the URL encoded authentication signature\n\t\t */\n\t\tthis.generateSig = function (params) {\n\t\t\tvar params = (params) ? params : {},\n\t\t\t\tsignature,\n\t\t\t\tsignatureUrl,\n\t\t\t\ti,\n\t\t\t\tk;\n\n\t\t\tsignature = '';\n\t\t\tsignatureUrl = '&api_sig=';\n\n\t\t\tkeys = Object.keys(params),\n\t\t\tkeys.sort();\n\n\t\t\tfor (i = 0; i < keys.length; i++) {\n\t\t\t\tsignature += keys[i] + params[keys[i]];\n\t\t\t}\n\n\t\t\tsignature = this.appSecret + signature;\n\t\t\tsignatureUrl += this.md5(signature);\n\n\t\t\treturn signatureUrl;\n\t\t};\n\n\t\t/**\n\t\t * Generates a RTM authentication URL\n\t\t * \n\t\t * @param frob Optional frob for use in desktop applications\n\t\t * @return     Returns the reponse from the RTM API\n\t\t */\n\t\tthis.getAuthUrl = function (frob) {\n\t\t\tvar params, url;\n\n\t\t\tparams = {\n\t\t\t\tapi_key: this.appKey,\n\t\t\t\tperms: this.permissions\n\t\t\t};\n\n\t\t\tif (frob) {\n\t\t\t\tparams.frob = frob;\n\t\t\t}\n\n\t\t\turl = this.authUrl + this.encodeUrlParams(params, true);\n\n\t\t\treturn url;\n\t\t};\n\n\t\t/**\n\t\t * Main method for making API calls\n\t\t * \n\t\t * @param method    Specifies what API method to be used\n\t\t * @param params    Array of API parameters to accompany the method parameter\n\t\t * @param callback  Callback to fire after the request comes back\n\t\t * @return          Returns the reponse from the RTM API\n\t\t */\n\t\tthis.get = function (method, params, callback) {\n\t\t\tvar method = (method) ? method : '',\n\t\t\t\tparams = (params) ? params : {},\n\t\t\t\tcallbackName,\n\t\t\t\trequestUrl,\n\t\t\t\ts;\n\n\t\t\tif (!callback && typeof params == 'function') {\n\t\t\t\tcallback = params;\n\t\t\t\tparams = {};\n\t\t\t}\n\n\t\t\tif (!callback) {\n\t\t\t\tcallback = function () {};\n\t\t\t}\n\n\t\t\tif (!method) {\n\t\t\t\tthrow 'Error: API Method must be defined.';\n\t\t\t}\n\n\t\t\tparams.method = method;\n\n\t\t\t//if (!this.isWinJS && !this.isNode) {\n\t\t\t//\tcallbackName = 'RememberTheMilk' + new Date().getTime();\n\t\t\t//\tparams.callback = callbackName;\n\t\t\t//}\n\n\t\t\tif (this.auth_token) {\n\t\t\t\tparams.auth_token = this.auth_token;\n\t\t\t}\n\n\t\t\trequestUrl = this.baseUrl + this.encodeUrlParams(params, true);\n\n\t\t\tif (this.isWinJS) {\n\t\t\t\treturn WinJS.xhr({responseType: 'json', url: requestUrl}).done(\n\t\t\t\t\tfunction completed(resp) {\n\t\t\t\t\t\tcallback.call(this, JSON.parse(resp.responseText));\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t} else if (this.isNode) {\n\t\t\t\thttps.get(requestUrl, function(response){\n\t\t\t\t\tvar resp = '';\n\n\t\t\t\t\tresponse.on('data', function (chunk) {\n\t\t\t\t\t\tresp += chunk;\n\t\t\t\t\t});\n\n\t\t\t\t\tresponse.on('end', function () {\n\t\t\t\t\t\tresp = JSON.parse(resp);\n\t\t\t\t\t\tcallback.call(this, resp)\n\t\t\t\t\t});\n\t\t\t\t}).end();\n\t\t\t} else {\n\t\t\t\t/*window[callbackName] = function (resp) {\n\t\t\t\t\tcallback.call(this, resp);\n\t\t\t\t\twindow[callbackName] = null;\n\t\t\t\t}\n\n\t\t\t\ts = document.createElement('script');\n\t\t\t\ts.src = requestUrl;\n\t\t\t\tdocument.body.appendChild(s);\n\t\t\t\t*/\n\t\t\t\tvar xhr = new XMLHttpRequest();\n\t\t\t\txhr.open(\"GET\", requestUrl, true);\n\t\t\t\txhr.onreadystatechange = function() \n\t\t\t\t{\n\t\t\t\t   if( xhr.readyState == 4 )\n\t\t\t\t   {\n\t\t\t\t      var resp = JSON.parse(xhr.responseText);\n\t\t\t\t      callback(resp);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\txhr.send();\t\t\t\n\t\t\t}\n\t\t};\n\t}\n\n\treturn exports;\n}())));\n\n"}
],
[
{"endColumn":0,"endLine":243,"isContentScript":true,"scriptId":"137","startColumn":0,"startLine":0,"url":"chrome-extension://cgcfflfodgfcjgncckhjcmbibfebgfdo/rtm/chromeConnect.js"},{"scriptSource":"\nvar api_key = \"125a2569657f22ef2105cefdfabd5c1b\";\nvar api_secret = \"3cb3d64fd76ac23d\";\nvar rtm = new RememberTheMilk(api_key, api_secret, \"delete\");\n\n//setToken(\"241d9231183124e91570729f163886c5076ea230\");\n//setToken(\"dd7706c12f4201bab6d19c801806a2fcd869a173\");\n//setToken(\"5378bdbdbd6980a3e907c7b1da5e7a7ba9e05845\");\n\n//getTasksInContextList();\n\n//addTask(\"test things\", \"http://checkbox.io\" );\n\n//getTasksWithUrls();\n\n\n\n//getToken( function(token) {\n//\tconsole.log(\"token:\" + token);\n//});\n\nfunction setToken (token) \n{\n\trtm.auth_token = token;\n}\n\nfunction getAuthUrl(onResult)\n{\t\n\n\trtm.get(\"rtm.auth.getFrob\", function(resp)\n\t{\n\t\tvar frob = resp.rsp.frob;\n\n\t\tconsole.log( resp.rsp );\n\n\t\tvar authUrl = rtm.getAuthUrl(frob);\n\n\t\tonResult( frob, authUrl);\n\t});\n\n}\n\nfunction checkToken(token, onResult)\n{\n\trtm.get('rtm.auth.checkToken', {auth_token : token}, function(resp)\n\t{\n\t\tonResult(resp.rsp.stat);\n\t});\t\n}\n\nfunction getToken(frob, onResult)\n{\n\trtm.get('rtm.auth.getToken', {frob: frob}, function(resp)\n\t{\n\t\tif (!resp.rsp.auth) \n\t\t{\n\t\t\tconsole.log( resp.rsp );\n\t\t\tconsole.log('Auth token not found. Did you authenticate?\\n');\n\t\t\tonResult(null);\n\t\t}\n\n\t\tonResult( resp.rsp.auth.token );\n\t});\n}\n\nfunction getLists()\n{\n\tconsole.log('Lists:');\n\n\trtm.get('rtm.lists.getList', function(resp){\n\t\tvar i, list;\n\n\t\tfor (i = 0; i < resp.rsp.lists.list.length; i++) {\n\t\t\tlist = resp.rsp.lists.list[i];\n\t\t\tconsole.log(list.name + ' (id: ' + list.id + ')');\n\t\t}\n\n\t\tprocess.exit();\n\t});\n}\n\nfunction addTask(text, url, contextId, onReady)\n{\n\n\trtm.get('rtm.timelines.create', function(resp) {\n\t\tconsole.log(resp);\n\t\tvar timeline = resp.rsp.timeline;\n\t\trtm.get('rtm.tasks.add', {timeline:timeline,name:text}, function(resp) {\n\t\t\tvar listId = resp.rsp.list.id;\n\t\t\tvar taskSeriesId = resp.rsp.list.taskseries.id;\n\t\t\tvar taskId = resp.rsp.list.taskseries.task.id;\n\t\t\tconsole.log( listId + \":\" + taskSeriesId );\n\t\t\tconsole.log( resp );\n\t\t\trtm.get('rtm.tasks.setURL', {timeline:timeline, list_id:listId, taskseries_id:taskSeriesId, task_id: taskId, url: url},  \n\t\t\tfunction(resp) \n\t\t\t{\n\t\t\t\tconsole.log( resp );\t\n\n\t\t\t\trtm.get('rtm.tasks.setTags', \n\t\t\t\t\t{timeline:timeline, list_id:listId, taskseries_id:taskSeriesId, task_id: taskId, tags: \"url\"}, function(resp)\n\t\t\t\t{ \n\t\t\t\t\tconsole.log( resp );\t\n\n\t\t\t\t\tonReady(formatTaskObj(resp.rsp.list.taskseries, resp.rsp.list.id));\n\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t});\n\n}\n\nfunction editTask (taskId, taskSeriesId, listId, newName, onReady) {\n\n\trtm.get('rtm.timelines.create', function(resp) {\n\t\tconsole.log(resp);\n\t\tvar timeline = resp.rsp.timeline;\n\t\trtm.get('rtm.tasks.setName', {timeline:timeline,task_id:taskId, taskseries_id:taskSeriesId, list_id:listId, name: newName}, function(resp) {\n\n\t\t\tconsole.log( resp );\n\t\t\tonReady( resp );\n\n\t\t});\n\n\t});\n\n}\n\n\n\nfunction removeTask (taskId, taskSeriesId, listId, onReady) {\n\n\trtm.get('rtm.timelines.create', function(resp) {\n\t\tconsole.log(resp);\n\t\tvar timeline = resp.rsp.timeline;\n\t\trtm.get('rtm.tasks.delete', {timeline:timeline,task_id:taskId, taskseries_id:taskSeriesId, list_id:listId}, function(resp) {\n\n\t\t\tconsole.log( resp );\n\t\t\tonReady();\n\n\t\t});\n\n\t});\n\n}\n\nfunction snoozeTask (taskId, taskSeriesId, listId, due, onReady) {\n\n\trtm.get('rtm.timelines.create', function(resp) {\n\t\tconsole.log(resp);\n\t\tvar timeline = resp.rsp.timeline;\n\n\t\tvar dt = \"\";\n\t\tif( dt == \"\" )\n\t\t{\n\t\t\tdt = new Date();\n\t\t\tdt.setTime(dt.getTime() + (8*60*60*1000));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tdt = new Date(dt);\n\t\t\tdt.setTime(dt.getTime() + (8*60*60*1000));\n\t\t}\n\n\t\tconsole.log( dt.toISOString() );\n\n\t\trtm.get('rtm.tasks.setDueDate', {timeline:timeline,task_id:taskId, taskseries_id:taskSeriesId, due: dt.toISOString(), has_due_time: \"1\", list_id:listId}, function(resp) {\n\n\t\t\tconsole.log( resp );\n\t\t\tonReady();\n\n\t\t});\n\n\t});\n\n}\n\n\n\nfunction getTasksWithUrls(onReady)\n{\n\tconsole.log(\"rtm.tasks.getList\");\n\n\trtm.get('rtm.tasks.getList', {filter:\"tag:url\"}, function(resp) {\n\n\t\tconsole.log( resp );\n\n\t\tvar tasks = [];\n\n\t\tvar serverTasks = resp.rsp.tasks.list || [];\n\n\t\t//console.log( resp.rsp.tasks.list );\t\n\t\tserverTasks.map( function(elem) { \n\n\t\t\t\tif( elem.taskseries instanceof Array )\n\t\t\t\t{\n\t\t\t\t\tfor( var i=0; i < elem.taskseries.length; i++ )\n\t\t\t\t\t{\n\t\t\t\t\t\tvar t = elem.taskseries[i];\n\t\t\t\t\t\ttasks.push( formatTaskObj(t, elem.id) );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\ttasks.push( formatTaskObj(elem.taskseries, elem.id) );\n\t\t\t\t}\n\n\t\t\t\t//return elem.taskseries;\n\t\t});\n\n\t\tonReady( tasks );\n\n\t});\n}\n\nfunction formatTaskObj (task, list_id) {\n\ttask[\"list_id\"] = list_id;\n\treturn task;\n}\n\nfunction getContextListId()\n{\n\t\n}\n\nfunction getTasksInContextList()\n{\n\trtm.get('rtm.lists.getList', function(resp){\n\t\tvar i, list;\n\n\t\tfor (i = 0; i < resp.rsp.lists.list.length; i++) {\n\t\t\tlist = resp.rsp.lists.list[i];\n\t\t\tif( list.name == \"Context\")\n\t\t\t{\n\t\t\t\trtm.get('rtm.tasks.getList', {list_id: list.id}, function( resp ) {\n\t\t\t\t\tconsole.log( resp.rsp.tasks.list );\n\t\t\t\t});\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t});\n}\n"}
],
[
{"endColumn":3,"endLine":316,"isContentScript":true,"scriptId":"138","startColumn":0,"startLine":0,"url":"chrome-extension://cgcfflfodgfcjgncckhjcmbibfebgfdo/sandbox.js"},{"scriptSource":"\n\n//setToken(\"5378bdbdbd6980a3e907c7b1da5e7a7ba9e05845\");\n\nchrome.runtime.sendMessage( {getOptions:true}, function(response)\n{\n\n\tif( response.options.token )\n\t{\t\t\n\t\tsetToken(response.options.token);\t\t\n\t\trequestTasksFromChrome();\n\t}\n\n});\n\nfunction requestTasksFromChrome () \n{\n\n\tchrome.runtime.sendMessage( {getTasks:true}, function(response)\n\t{\n\t\tif( response.action == \"tasks_loaded\" )\n\t\t{\n\t\t\tloadTasks( response.tasks );\n\t\t}\n\n\t});\n\n}\n\nfunction refreshTasksFromChrome () \n{\n\n\tchrome.runtime.sendMessage( {refresh:true}, function(response)\n\t{\n\t\tif( response.action == \"tasks_loaded\" )\n\t\t{\n\t\t\tloadTasks( response.tasks );\n\t\t}\n\n\t});\n\n}\n\n// http://blog.roomanna.com/09-24-2011/dynamically-coloring-a-favicon\nfunction setBadge(num)\n{\n\tif( num == 0 )\n\t\treturn;\n\tchrome.runtime.sendMessage( {setBadge:true, n:num, src: window.location.href }, function(response)\n\t{\n\t\tvar iconLink = $(\"head link[rel='icon']\").first();\n\t\tvar shortcutIconLink = $(\"head link[rel='shortcut icon']\").first();\n\n\t\tif( iconLink.length )\n\t\t\ticonLink.attr('href',response.src);\n\t\tif( shortcutIconLink.length )\n\t\t\tshortcutIconLink.attr('href',response.src);\n\n\t\tif( iconLink.length == 0 && shortcutIconLink.length == 0 )\n\t\t{\n\t\t\tvar link = document.createElement('link');\n\t\t\tlink.rel = 'shortcut icon';\n\t\t\tlink.type = 'image/x-icon';\n\t\t\tlink.href = response.src;\n\t\t\tdocument.getElementsByTagName('head')[0].appendChild(link);\n\t\t}\n\n\t});\n}\n\n\nchrome.runtime.onMessage.addListener( function(request, sender, sendResponse) \n{\n\tconsole.log( \"request from extension\" );\n\tconsole.log( request );\n\n\tif ( request.reload ) \n\t{\n\t\tconsole.log(\"content script sent message to request reload.\");\n\t\trequestTasksFromChrome();\n\n\t\tsendResponse({});\n\t}\n\n\treturn true;\n});\n\n\nfunction tasksOnPage( tasks )\n{\n\tvar pageTasks = [];\n\tfor( var i=0; i < tasks.length; i++ )\n\t{\n\t\tvar task = tasks[i];\n\t\tif( location.href.indexOf(task.url) == 0 )\n\t\t{\n\t\t\tvar due = Date.now() ;\n\t\t\tif( task.task.due != \"\" )\n\t\t\t{\n\t\t\t\tdue = new Date(task.task.due);\n\t\t\t}\n\n\t\t\tif( due <= Date.now() )\n\t\t\t{\n\t\t\t\tpageTasks.push( task );\n\t\t\t}\n\t\t}\n\t}\n\n\treturn pageTasks;\n}\n\nfunction loadTasks ( tasks ) \n{\n\tvar freq = {};\n\n\t$(\".sticky\").each(function () \n\t{\n\t\t$(this).remove();\n\t});\n\n\tvar pageTasks = tasksOnPage( tasks );\n\n\tfor( var i=0; i < pageTasks.length; i++ )\n\t{\n\t\tvar task = pageTasks[i];\n\t\tcreateRelativeSticky( task.task.id, task.list_id, task.id, task.name, task.task.due, i );\n\t}\n\n\tsetBadge( pageTasks.length );\n\n\tif( !document.getElementById(\"stick-stylesheet\") )\n\t{\n\t\tvar style = document.createElement('link');\n\t\tstyle.id = \"stick-stylesheet\"\n\t\tstyle.rel = 'stylesheet';\n\t\tstyle.type = 'text/css';\n\t\tstyle.href = chrome.extension.getURL('css/sticky.css');\n\t\t(document.head||document.documentElement).appendChild(style);\n\n\t\tstyle = document.createElement('link');\n\t\tstyle.id = \"font-awesome-stylesheet\"\n\t\tstyle.rel = 'stylesheet';\n\t\tstyle.type = 'text/css';\n\t\tstyle.href = chrome.extension.getURL('css/font-awesome.css');\n\t\t(document.head||document.documentElement).appendChild(style);\n\n\t}\n\n\t// Make sure properly positioned.\n\tsticky_relocate();\n}\n\n\n\nvar colors = [\"rgba(222,78,113,.5)\", \"rgba(0,124,146,.5)\", \"rgba(255,210,54,0.5)\"];\n\nfunction createSticky( name )\n{\n\tvar element = document.createElement('div');\n\telement.style.position = \"absolute\";\n\telement.style.top = \"40px\";\n\telement.style.right = \"40px\";\n\telement.style.background = \"rgba(255,210,54,.5)\";\n\n\telement.style.padding = \"40px\";\n\telement.style.zIndex = \"2147483647\";\n\telement.innerText = name;\n\n\tdocument.body.appendChild(element);\n}\n\nfunction createRelativeSticky( id, listId, taskSeriesId, name, due, itemNumber )\n{\n\tvar color = colors[Math.floor(Math.random()*colors.length)];\n\n\t// task ID\n\t$(\"<div></div>\")\n\t\t.attr(\"id\", id)\n\t\t.addClass(\"sticky\")\n\t\t.css(\"position\",\"absolute\")\n\t\t.css(\"top\",\"40px\")\n\t\t.css(\"right\",\"40px\")\n\t\t.css(\"background-color\", color)\n    \t.css('margin-top', (itemNumber * 40) + \"px\" )\n\t\t.appendTo( \"body\" )\n\t\t.data('item', itemNumber)\n\t\t.data('listId', listId)\n\t\t.data('taskSeriesId', taskSeriesId)\n\t\t.data('due', due );\n\n\tvar sticky = $(\"#\"+id);\n\tsticky.append('<span>'+name+'</span>' );\n\n\tsticky.on('mouseenter', function() \n\t{\n\t\t$(this).find('.stickyBtn').each(function () \n\t\t{\n\t\t\t$(this).show();\n\t\t});\n\t});\n\n\tsticky.on('mouseleave', function() \n\t{\n\t\t$(this).find('.stickyBtn').each(function () \n\t\t{\n\t\t\t$(this).hide();\n\t\t});\n\t});\n\n\n\tsticky.find('span').editable(function(value, settings) { \n\n\t\t\t// Let background page do work...and handle update.\n\t\t\tchrome.runtime.sendMessage( {editTask:true, taskId:id, taskSeriesId:taskSeriesId, listId:listId, value:value}, function(response)\n\t\t\t{\n\t\t\t\t// UI is updated right away, but server will take a second...\n\n\n\t\t\t});\n\n\t     return(value);\n\n\t  }, { \n\t     type    : 'text',\n\t     submit  : 'OK',\n\t });\n\n\n\t$('<i class=\"stickyBtn icon-remove\"></i>').on('click',\n\t\tfunction () {\n\t\t\tvar listId = sticky.data('listId');\n\t\t\tvar taskSeriesId = sticky.data('taskSeriesId');\n\t\t\tvar taskId = sticky.attr(\"id\");\n\n\t\t\tremoveTask (taskId, taskSeriesId, listId, function (argument) {\n\n\t\t\t\tconsole.log(\"Deleted\");\n\n\t\t\t\tsticky.remove();\n\n\t\t\t\trefreshTasksFromChrome();\n\n\t\t\t});\n\n\t\t}).appendTo(\"#\"+id);\n\n\t$('<i class=\"stickyBtn icon-bell-alt\"></i>').on('click',\n\t\tfunction () {\n\t\t\tvar listId = sticky.data('listId');\n\t\t\tvar taskSeriesId = sticky.data('taskSeriesId');\n\t\t\tvar due = sticky.data('due');\n\t\t\tvar taskId = sticky.attr(\"id\");\n\n\t\t\tconsole.log(\"snoozing...\")\n\n\t\t\tsnoozeTask (taskId, taskSeriesId, listId, due, function () {\n\n\t\t\t\tconsole.log(\"snoozed\");\n\n\t\t\t\trefreshTasksFromChrome();\n\n\t\t\t});\n\n\t\t}).appendTo(\"#\"+id);\n\n\n    $('.sticky .stickyBtn').each(function () {\n\t\t$(this).hide();    \t\n    });\n\t\n}\n\n\n\n\nfunction sticky_relocate() {\n  var window_top = $(window).scrollTop();\n  //var div_top = $('#sticky-anchor').offset().top;\n\n  //console.log(\"scroll:\" + window_top + \":\" + div_top );\n\n\tif (window_top >= 40) {\n  //if (window_top > div_top) {\n    //$('.sticky').addClass('stick');\n    //$('.sticky').attr('style', 'margin-top:' + (($(\".sticky\").data('item') +1) * 40) + \"px;\" );\n\n    $('.sticky').each(function () \n    {\n    \t$(this).addClass('stick');\n    \t$(this)\n    \t\t.css('position','fixed')\n    \t\t.css('top', '0px')\n    \t\t.css('margin-top', (($(this).data('item') ) * 40) + \"px\" );\n    });\n\n  } else {\n   //$('.sticky').removeClass('stick');\n   //$('.sticky').attr('style', 'right:40px;top:40px;position:absolute;');\n    $('.sticky').each(function () \n    {\n   \t$(this).removeClass('stick');\n   \t$(this)\n   \t\t.css('position', 'absolute')\n    \t\t.css('top', '40px')\n   \t\t.css('margin-top', (($(this).data('item') ) * 40) + \"px\");\n    });\n  }\n\n}\n\n$(document).ready( function() {\n\n  $(window).scroll(sticky_relocate);\n  sticky_relocate();\n\n});"}
],
[
{"endColumn":2,"endLine":197,"isContentScript":true,"scriptId":"139","startColumn":0,"startLine":0,"url":"extensions::runtime"},{"scriptSource":"(function(require, requireNative, exports, console, $Array, $Function, $JSON, $Object, $RegExp, $String) {'use strict';// Copyright (c) 2012 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n// Custom binding for the runtime API.\n\nvar binding = require('binding').Binding.create('runtime');\n\nvar extensionNatives = requireNative('extension');\nvar messaging = require('messaging');\nvar runtimeNatives = requireNative('runtime');\nvar unloadEvent = require('unload_event');\nvar process = requireNative('process');\n\nvar backgroundPage = window;\nvar backgroundRequire = require;\nvar contextType = process.GetContextType();\nif (contextType == 'BLESSED_EXTENSION' ||\n    contextType == 'UNBLESSED_EXTENSION') {\n  var manifest = runtimeNatives.GetManifest();\n  if (manifest.app && manifest.app.background) {\n    // Get the background page if one exists. Otherwise, default to the current\n    // window.\n    backgroundPage = extensionNatives.GetExtensionViews(-1, 'BACKGROUND')[0];\n    if (backgroundPage) {\n      var GetModuleSystem = requireNative('v8_context').GetModuleSystem;\n      backgroundRequire = GetModuleSystem(backgroundPage).require;\n    } else {\n      backgroundPage = window;\n    }\n  }\n}\n\n// For packaged apps, all windows use the bindFileEntryCallback from the\n// background page so their FileEntry objects have the background page's context\n// as their own.  This allows them to be used from other windows (including the\n// background page) after the original window is closed.\nif (window == backgroundPage) {\n  var lastError = require('lastError');\n  var fileSystemNatives = requireNative('file_system_natives');\n  var GetIsolatedFileSystem = fileSystemNatives.GetIsolatedFileSystem;\n  var bindDirectoryEntryCallback = function(functionName, apiFunctions) {\n    apiFunctions.setCustomCallback(functionName,\n        function(name, request, response) {\n      if (request.callback && response) {\n        var callback = request.callback;\n        request.callback = null;\n\n        var fileSystemId = response.fileSystemId;\n        var baseName = response.baseName;\n        var fs = GetIsolatedFileSystem(fileSystemId);\n\n        try {\n          fs.root.getDirectory(baseName, {}, callback, function(fileError) {\n            lastError.run('runtime.' + functionName,\n                          'Error getting Entry, code: ' + fileError.code,\n                          request.stack,\n                          callback);\n          });\n        } catch (e) {\n          lastError.run('runtime.' + functionName,\n                        'Error: ' + e.stack,\n                        request.stack,\n                        callback);\n        }\n      }\n    });\n  };\n} else {\n  // Force the runtime API to be loaded in the background page. Using\n  // backgroundPageModuleSystem.require('runtime') is insufficient as\n  // requireNative is only allowed while lazily loading an API.\n  backgroundPage.chrome.runtime;\n  var bindDirectoryEntryCallback = backgroundRequire(\n      'runtime').bindDirectoryEntryCallback;\n}\n\nbinding.registerCustomHook(function(binding, id, contextType) {\n  var apiFunctions = binding.apiFunctions;\n  var runtime = binding.compiledApi;\n\n  //\n  // Unprivileged APIs.\n  //\n\n  runtime.id = id;\n\n  apiFunctions.setHandleRequest('getManifest', function() {\n    return runtimeNatives.GetManifest();\n  });\n\n  apiFunctions.setHandleRequest('getURL', function(path) {\n    path = String(path);\n    if (!path.length || path[0] != '/')\n      path = '/' + path;\n    return 'chrome-extension://' + id + path;\n  });\n\n  var sendMessageUpdateArguments = messaging.sendMessageUpdateArguments;\n  apiFunctions.setUpdateArgumentsPreValidate('sendMessage',\n      $Function.bind(sendMessageUpdateArguments, null, 'sendMessage'));\n  apiFunctions.setUpdateArgumentsPreValidate('sendNativeMessage',\n      $Function.bind(sendMessageUpdateArguments, null, 'sendNativeMessage'));\n\n  apiFunctions.setHandleRequest('sendMessage',\n                                function(targetId, message, responseCallback) {\n    var port = runtime.connect(targetId || runtime.id,\n        {name: messaging.kMessageChannel});\n    messaging.sendMessageImpl(port, message, responseCallback);\n  });\n\n  apiFunctions.setHandleRequest('sendNativeMessage',\n                                function(targetId, message, responseCallback) {\n    var port = runtime.connectNative(targetId);\n    messaging.sendMessageImpl(port, message, responseCallback);\n  });\n\n  apiFunctions.setUpdateArgumentsPreValidate('connect', function() {\n    // Align missing (optional) function arguments with the arguments that\n    // schema validation is expecting, e.g.\n    //   runtime.connect()   -> runtime.connect(null, null)\n    //   runtime.connect({}) -> runtime.connect(null, {})\n    var nextArg = 0;\n\n    // targetId (first argument) is optional.\n    var targetId = null;\n    if (typeof(arguments[nextArg]) == 'string')\n      targetId = arguments[nextArg++];\n\n    // connectInfo (second argument) is optional.\n    var connectInfo = null;\n    if (typeof(arguments[nextArg]) == 'object')\n      connectInfo = arguments[nextArg++];\n\n    if (nextArg != arguments.length)\n      throw new Error('Invalid arguments to connect.');\n    return [targetId, connectInfo];\n  });\n\n  apiFunctions.setUpdateArgumentsPreValidate('connectNative',\n                                             function(appName) {\n    if (typeof(appName) !== 'string') {\n      throw new Error('Invalid arguments to connectNative.');\n    }\n    return [appName];\n  });\n\n  apiFunctions.setHandleRequest('connect', function(targetId, connectInfo) {\n    // Don't let orphaned content scripts communicate with their extension.\n    // http://crbug.com/168263\n    if (unloadEvent.wasDispatched)\n      throw new Error('Error connecting to extension ' + targetId);\n\n    if (!targetId)\n      targetId = runtime.id;\n\n    var name = '';\n    if (connectInfo && connectInfo.name)\n      name = connectInfo.name;\n\n    var portId = runtimeNatives.OpenChannelToExtension(targetId, name);\n    if (portId >= 0)\n      return messaging.createPort(portId, name);\n  });\n\n  //\n  // Privileged APIs.\n  //\n  if (contextType != 'BLESSED_EXTENSION')\n    return;\n\n  apiFunctions.setHandleRequest('connectNative',\n                                function(nativeAppName) {\n    if (!unloadEvent.wasDispatched) {\n      var portId = runtimeNatives.OpenChannelToNativeApp(runtime.id,\n                                                         nativeAppName);\n      if (portId >= 0)\n        return messaging.createPort(portId, '');\n    }\n    throw new Error('Error connecting to native app: ' + nativeAppName);\n  });\n\n  apiFunctions.setCustomCallback('getBackgroundPage',\n                                 function(name, request, response) {\n    if (request.callback) {\n      var bg = extensionNatives.GetExtensionViews(-1, 'BACKGROUND')[0] || null;\n      request.callback(bg);\n    }\n    request.callback = null;\n  });\n\n  bindDirectoryEntryCallback('getPackageDirectoryEntry', apiFunctions);\n});\n\nexports.bindDirectoryEntryCallback = bindDirectoryEntryCallback;\nexports.binding = binding.generate();\n\n})"}
],
[
{"endColumn":2,"endLine":435,"isContentScript":true,"scriptId":"140","startColumn":0,"startLine":0,"url":"extensions::binding"},{"scriptSource":"(function(require, requireNative, exports, console, $Array, $Function, $JSON, $Object, $RegExp, $String) {'use strict';// Copyright (c) 2012 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nvar Event = require('event_bindings').Event;\nvar forEach = require('utils').forEach;\nvar GetAvailability = requireNative('v8_context').GetAvailability;\nvar logActivity = requireNative('activityLogger');\nvar logging = requireNative('logging');\nvar process = requireNative('process');\nvar schemaRegistry = requireNative('schema_registry');\nvar schemaUtils = require('schemaUtils');\nvar utils = require('utils');\nvar sendRequestHandler = require('sendRequest');\n\nvar contextType = process.GetContextType();\nvar extensionId = process.GetExtensionId();\nvar manifestVersion = process.GetManifestVersion();\nvar sendRequest = sendRequestHandler.sendRequest;\n\n// Stores the name and definition of each API function, with methods to\n// modify their behaviour (such as a custom way to handle requests to the\n// API, a custom callback, etc).\nfunction APIFunctions(namespace) {\n  this.apiFunctions_ = {};\n  this.unavailableApiFunctions_ = {};\n  this.namespace = namespace;\n}\n\nAPIFunctions.prototype.register = function(apiName, apiFunction) {\n  this.apiFunctions_[apiName] = apiFunction;\n};\n\n// Registers a function as existing but not available, meaning that calls to\n// the set* methods that reference this function should be ignored rather\n// than throwing Errors.\nAPIFunctions.prototype.registerUnavailable = function(apiName) {\n  this.unavailableApiFunctions_[apiName] = apiName;\n};\n\nAPIFunctions.prototype.setHook_ =\n    function(apiName, propertyName, customizedFunction) {\n  if ($Object.hasOwnProperty(this.unavailableApiFunctions_, apiName))\n    return;\n  if (!$Object.hasOwnProperty(this.apiFunctions_, apiName))\n    throw new Error('Tried to set hook for unknown API \"' + apiName + '\"');\n  this.apiFunctions_[apiName][propertyName] = customizedFunction;\n};\n\nAPIFunctions.prototype.setHandleRequest =\n    function(apiName, customizedFunction) {\n  var prefix = this.namespace;\n  return this.setHook_(apiName, 'handleRequest',\n    function() {\n      var ret = $Function.apply(customizedFunction, this, arguments);\n      // Logs API calls to the Activity Log if it doesn't go through an\n      // ExtensionFunction.\n      if (!sendRequestHandler.getCalledSendRequest())\n        logActivity.LogAPICall(extensionId, prefix + \".\" + apiName,\n            $Array.slice(arguments));\n      return ret;\n    });\n};\n\nAPIFunctions.prototype.setUpdateArgumentsPostValidate =\n    function(apiName, customizedFunction) {\n  return this.setHook_(\n    apiName, 'updateArgumentsPostValidate', customizedFunction);\n};\n\nAPIFunctions.prototype.setUpdateArgumentsPreValidate =\n    function(apiName, customizedFunction) {\n  return this.setHook_(\n    apiName, 'updateArgumentsPreValidate', customizedFunction);\n};\n\nAPIFunctions.prototype.setCustomCallback =\n    function(apiName, customizedFunction) {\n  return this.setHook_(apiName, 'customCallback', customizedFunction);\n};\n\nfunction CustomBindingsObject() {\n}\n\nCustomBindingsObject.prototype.setSchema = function(schema) {\n  // The functions in the schema are in list form, so we move them into a\n  // dictionary for easier access.\n  var self = this;\n  self.functionSchemas = {};\n  $Array.forEach(schema.functions, function(f) {\n    self.functionSchemas[f.name] = {\n      name: f.name,\n      definition: f\n    }\n  });\n};\n\n// Get the platform from navigator.appVersion.\nfunction getPlatform() {\n  var platforms = [\n    [/CrOS Touch/, \"chromeos touch\"],\n    [/CrOS/, \"chromeos\"],\n    [/Linux/, \"linux\"],\n    [/Mac/, \"mac\"],\n    [/Win/, \"win\"],\n  ];\n\n  for (var i = 0; i < platforms.length; i++) {\n    if ($RegExp.test(platforms[i][0], navigator.appVersion)) {\n      return platforms[i][1];\n    }\n  }\n  return \"unknown\";\n}\n\nfunction isPlatformSupported(schemaNode, platform) {\n  return !schemaNode.platforms ||\n      schemaNode.platforms.indexOf(platform) > -1;\n}\n\nfunction isManifestVersionSupported(schemaNode, manifestVersion) {\n  return !schemaNode.maximumManifestVersion ||\n      manifestVersion <= schemaNode.maximumManifestVersion;\n}\n\nfunction isSchemaNodeSupported(schemaNode, platform, manifestVersion) {\n  return isPlatformSupported(schemaNode, platform) &&\n      isManifestVersionSupported(schemaNode, manifestVersion);\n}\n\nfunction createCustomType(type) {\n  var jsModuleName = type.js_module;\n  logging.CHECK(jsModuleName, 'Custom type ' + type.id +\n                ' has no \"js_module\" property.');\n  var jsModule = require(jsModuleName);\n  logging.CHECK(jsModule, 'No module ' + jsModuleName + ' found for ' +\n                type.id + '.');\n  var customType = jsModule[jsModuleName];\n  logging.CHECK(customType, jsModuleName + ' must export itself.');\n  customType.prototype = new CustomBindingsObject();\n  customType.prototype.setSchema(type);\n  return customType;\n}\n\nvar platform = getPlatform();\n\nfunction Binding(schema) {\n  this.schema_ = schema;\n  this.apiFunctions_ = new APIFunctions(schema.namespace);\n  this.customEvent_ = null;\n  this.customHooks_ = [];\n};\n\nBinding.create = function(apiName) {\n  return new Binding(schemaRegistry.GetSchema(apiName));\n};\n\nBinding.prototype = {\n  // The API through which the ${api_name}_custom_bindings.js files customize\n  // their API bindings beyond what can be generated.\n  //\n  // There are 2 types of customizations available: those which are required in\n  // order to do the schema generation (registerCustomEvent and\n  // registerCustomType), and those which can only run after the bindings have\n  // been generated (registerCustomHook).\n\n  // Registers a custom event type for the API identified by |namespace|.\n  // |event| is the event's constructor.\n  registerCustomEvent: function(event) {\n    this.customEvent_ = event;\n  },\n\n  // Registers a function |hook| to run after the schema for all APIs has been\n  // generated.  The hook is passed as its first argument an \"API\" object to\n  // interact with, and second the current extension ID. See where\n  // |customHooks| is used.\n  registerCustomHook: function(fn) {\n    $Array.push(this.customHooks_, fn);\n  },\n\n  // TODO(kalman/cduvall): Refactor this so |runHooks_| is not needed.\n  runHooks_: function(api) {\n    $Array.forEach(this.customHooks_, function(hook) {\n      if (!isSchemaNodeSupported(this.schema_, platform, manifestVersion))\n        return;\n\n      if (!hook)\n        return;\n\n      hook({\n        apiFunctions: this.apiFunctions_,\n        schema: this.schema_,\n        compiledApi: api\n      }, extensionId, contextType);\n    }, this);\n  },\n\n  // Generates the bindings from |this.schema_| and integrates any custom\n  // bindings that might be present.\n  generate: function() {\n    var schema = this.schema_;\n\n    function shouldCheckUnprivileged() {\n      var shouldCheck = 'unprivileged' in schema;\n      if (shouldCheck)\n        return shouldCheck;\n\n      $Array.forEach(['functions', 'events'], function(type) {\n        if ($Object.hasOwnProperty(schema, type)) {\n          $Array.forEach(schema[type], function(node) {\n            if ('unprivileged' in node)\n              shouldCheck = true;\n          });\n        }\n      });\n      if (shouldCheck)\n        return shouldCheck;\n\n      for (var property in schema.properties) {\n        if ($Object.hasOwnProperty(schema, property) &&\n            'unprivileged' in schema.properties[property]) {\n          shouldCheck = true;\n          break;\n        }\n      }\n      return shouldCheck;\n    }\n    var checkUnprivileged = shouldCheckUnprivileged();\n\n    // TODO(kalman/cduvall): Make GetAvailability handle this, then delete the\n    // supporting code.\n    if (!isSchemaNodeSupported(schema, platform, manifestVersion)) {\n      console.error('chrome.' + schema.namespace + ' is not supported on ' +\n                    'this platform or manifest version');\n      return undefined;\n    }\n\n    var mod = {};\n\n    var namespaces = $String.split(schema.namespace, '.');\n    for (var index = 0, name; name = namespaces[index]; index++) {\n      mod[name] = mod[name] || {};\n      mod = mod[name];\n    }\n\n    // Add types to global schemaValidator, the types we depend on from other\n    // namespaces will be added as needed.\n    if (schema.types) {\n      $Array.forEach(schema.types, function(t) {\n        if (!isSchemaNodeSupported(t, platform, manifestVersion))\n          return;\n        schemaUtils.schemaValidator.addTypes(t);\n      }, this);\n    }\n\n    // TODO(cduvall): Take out when all APIs have been converted to features.\n    // Returns whether access to the content of a schema should be denied,\n    // based on the presence of \"unprivileged\" and whether this is an\n    // extension process (versus e.g. a content script).\n    function isSchemaAccessAllowed(itemSchema) {\n      return (contextType == 'BLESSED_EXTENSION') ||\n             schema.unprivileged ||\n             itemSchema.unprivileged;\n    };\n\n    // Setup Functions.\n    if (schema.functions) {\n      $Array.forEach(schema.functions, function(functionDef) {\n        if (functionDef.name in mod) {\n          throw new Error('Function ' + functionDef.name +\n                          ' already defined in ' + schema.namespace);\n        }\n\n        if (!isSchemaNodeSupported(functionDef, platform, manifestVersion)) {\n          this.apiFunctions_.registerUnavailable(functionDef.name);\n          return;\n        }\n\n        var apiFunction = {};\n        apiFunction.definition = functionDef;\n        apiFunction.name = schema.namespace + '.' + functionDef.name;\n\n        if (!GetAvailability(apiFunction.name).is_available ||\n            (checkUnprivileged && !isSchemaAccessAllowed(functionDef))) {\n          this.apiFunctions_.registerUnavailable(functionDef.name);\n          return;\n        }\n\n        // TODO(aa): It would be best to run this in a unit test, but in order\n        // to do that we would need to better factor this code so that it\n        // doesn't depend on so much v8::Extension machinery.\n        if (logging.DCHECK_IS_ON() &&\n            schemaUtils.isFunctionSignatureAmbiguous(apiFunction.definition)) {\n          throw new Error(\n              apiFunction.name + ' has ambiguous optional arguments. ' +\n              'To implement custom disambiguation logic, add ' +\n              '\"allowAmbiguousOptionalArguments\" to the function\\'s schema.');\n        }\n\n        this.apiFunctions_.register(functionDef.name, apiFunction);\n\n        mod[functionDef.name] = $Function.bind(function() {\n          var args = $Array.slice(arguments);\n          if (this.updateArgumentsPreValidate)\n            args = $Function.apply(this.updateArgumentsPreValidate, this, args);\n\n          args = schemaUtils.normalizeArgumentsAndValidate(args, this);\n          if (this.updateArgumentsPostValidate) {\n            args = $Function.apply(this.updateArgumentsPostValidate,\n                                   this,\n                                   args);\n          }\n\n          sendRequestHandler.clearCalledSendRequest();\n\n          var retval;\n          if (this.handleRequest) {\n            retval = $Function.apply(this.handleRequest, this, args);\n          } else {\n            var optArgs = {\n              customCallback: this.customCallback\n            };\n            retval = sendRequest(this.name, args,\n                                 this.definition.parameters,\n                                 optArgs);\n          }\n          sendRequestHandler.clearCalledSendRequest();\n\n          // Validate return value if in sanity check mode.\n          if (logging.DCHECK_IS_ON() && this.definition.returns)\n            schemaUtils.validate([retval], [this.definition.returns]);\n          return retval;\n        }, apiFunction);\n      }, this);\n    }\n\n    // Setup Events\n    if (schema.events) {\n      $Array.forEach(schema.events, function(eventDef) {\n        if (eventDef.name in mod) {\n          throw new Error('Event ' + eventDef.name +\n                          ' already defined in ' + schema.namespace);\n        }\n        if (!isSchemaNodeSupported(eventDef, platform, manifestVersion))\n          return;\n\n        var eventName = schema.namespace + \".\" + eventDef.name;\n        if (!GetAvailability(eventName).is_available ||\n            (checkUnprivileged && !isSchemaAccessAllowed(eventDef))) {\n          return;\n        }\n\n        var options = eventDef.options || {};\n        if (eventDef.filters && eventDef.filters.length > 0)\n          options.supportsFilters = true;\n\n        var parameters = eventDef.parameters;\n        if (this.customEvent_) {\n          mod[eventDef.name] = new this.customEvent_(\n              eventName, parameters, eventDef.extraParameters, options);\n        } else {\n          mod[eventDef.name] = new Event(eventName, parameters, options);\n        }\n      }, this);\n    }\n\n    function addProperties(m, parentDef) {\n      var properties = parentDef.properties;\n      if (!properties)\n        return;\n\n      forEach(properties, function(propertyName, propertyDef) {\n        if (propertyName in m)\n          return;  // TODO(kalman): be strict like functions/events somehow.\n        if (!isSchemaNodeSupported(propertyDef, platform, manifestVersion))\n          return;\n        if (!GetAvailability(schema.namespace + \".\" +\n              propertyName).is_available ||\n            (checkUnprivileged && !isSchemaAccessAllowed(propertyDef))) {\n          return;\n        }\n\n        var value = propertyDef.value;\n        if (value) {\n          // Values may just have raw types as defined in the JSON, such\n          // as \"WINDOW_ID_NONE\": { \"value\": -1 }. We handle this here.\n          // TODO(kalman): enforce that things with a \"value\" property can't\n          // define their own types.\n          var type = propertyDef.type || typeof(value);\n          if (type === 'integer' || type === 'number') {\n            value = parseInt(value);\n          } else if (type === 'boolean') {\n            value = value === 'true';\n          } else if (propertyDef['$ref']) {\n            var ref = propertyDef['$ref'];\n            var type = utils.loadTypeSchema(propertyDef['$ref'], schema);\n            logging.CHECK(type, 'Schema for $ref type ' + ref + ' not found');\n            var constructor = createCustomType(type);\n            var args = value;\n            // For an object propertyDef, |value| is an array of constructor\n            // arguments, but we want to pass the arguments directly (i.e.\n            // not as an array), so we have to fake calling |new| on the\n            // constructor.\n            value = { __proto__: constructor.prototype };\n            $Function.apply(constructor, value, args);\n            // Recursively add properties.\n            addProperties(value, propertyDef);\n          } else if (type === 'object') {\n            // Recursively add properties.\n            addProperties(value, propertyDef);\n          } else if (type !== 'string') {\n            throw new Error('NOT IMPLEMENTED (extension_api.json error): ' +\n                'Cannot parse values for type \"' + type + '\"');\n          }\n          m[propertyName] = value;\n        }\n      });\n    };\n\n    addProperties(mod, schema);\n\n    var availability = GetAvailability(schema.namespace);\n    if (!availability.is_available && $Object.keys(mod).length == 0) {\n      console.error('chrome.' + schema.namespace + ' is not available: ' +\n                        availability.message);\n      return;\n    }\n\n    this.runHooks_(mod);\n    return mod;\n  }\n};\n\nexports.Binding = Binding;\n\n})"}
],
[
{"endColumn":2,"endLine":500,"isContentScript":true,"scriptId":"141","startColumn":0,"startLine":0,"url":"extensions::event_bindings"},{"scriptSource":"(function(require, requireNative, exports, console, $Array, $Function, $JSON, $Object, $RegExp, $String) {'use strict';// Copyright (c) 2012 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n  var eventNatives = requireNative('event_natives');\n  var logging = requireNative('logging');\n  var schemaRegistry = requireNative('schema_registry');\n  var sendRequest = require('sendRequest').sendRequest;\n  var utils = require('utils');\n  var validate = require('schemaUtils').validate;\n  var unloadEvent = require('unload_event');\n\n  // Schemas for the rule-style functions on the events API that\n  // only need to be generated occasionally, so populate them lazily.\n  var ruleFunctionSchemas = {\n    // These values are set lazily:\n    // addRules: {},\n    // getRules: {},\n    // removeRules: {}\n  };\n\n  // This function ensures that |ruleFunctionSchemas| is populated.\n  function ensureRuleSchemasLoaded() {\n    if (ruleFunctionSchemas.addRules)\n      return;\n    var eventsSchema = schemaRegistry.GetSchema(\"events\");\n    var eventType = utils.lookup(eventsSchema.types, 'id', 'events.Event');\n\n    ruleFunctionSchemas.addRules =\n        utils.lookup(eventType.functions, 'name', 'addRules');\n    ruleFunctionSchemas.getRules =\n        utils.lookup(eventType.functions, 'name', 'getRules');\n    ruleFunctionSchemas.removeRules =\n        utils.lookup(eventType.functions, 'name', 'removeRules');\n  }\n\n  // A map of event names to the event object that is registered to that name.\n  var attachedNamedEvents = {};\n\n  // An array of all attached event objects, used for detaching on unload.\n  var allAttachedEvents = [];\n\n  // A map of functions that massage event arguments before they are dispatched.\n  // Key is event name, value is function.\n  var eventArgumentMassagers = {};\n\n  // An attachment strategy for events that aren't attached to the browser.\n  // This applies to events with the \"unmanaged\" option and events without\n  // names.\n  var NullAttachmentStrategy = function(event) {\n    this.event_ = event;\n  };\n  NullAttachmentStrategy.prototype.onAddedListener =\n      function(listener) {\n  };\n  NullAttachmentStrategy.prototype.onRemovedListener =\n      function(listener) {\n  };\n  NullAttachmentStrategy.prototype.detach = function(manual) {\n  };\n  NullAttachmentStrategy.prototype.getListenersByIDs = function(ids) {\n    // |ids| is for filtered events only.\n    return this.event_.listeners_;\n  };\n\n  // Handles adding/removing/dispatching listeners for unfiltered events.\n  var UnfilteredAttachmentStrategy = function(event) {\n    this.event_ = event;\n  };\n\n  UnfilteredAttachmentStrategy.prototype.onAddedListener =\n      function(listener) {\n    // Only attach / detach on the first / last listener removed.\n    if (this.event_.listeners_.length == 0)\n      eventNatives.AttachEvent(this.event_.eventName_);\n  };\n\n  UnfilteredAttachmentStrategy.prototype.onRemovedListener =\n      function(listener) {\n    if (this.event_.listeners_.length == 0)\n      this.detach(true);\n  };\n\n  UnfilteredAttachmentStrategy.prototype.detach = function(manual) {\n    eventNatives.DetachEvent(this.event_.eventName_, manual);\n  };\n\n  UnfilteredAttachmentStrategy.prototype.getListenersByIDs = function(ids) {\n    // |ids| is for filtered events only.\n    return this.event_.listeners_;\n  };\n\n  var FilteredAttachmentStrategy = function(event) {\n    this.event_ = event;\n    this.listenerMap_ = {};\n  };\n\n  FilteredAttachmentStrategy.idToEventMap = {};\n\n  FilteredAttachmentStrategy.prototype.onAddedListener = function(listener) {\n    var id = eventNatives.AttachFilteredEvent(this.event_.eventName_,\n                                              listener.filters || {});\n    if (id == -1)\n      throw new Error(\"Can't add listener\");\n    listener.id = id;\n    this.listenerMap_[id] = listener;\n    FilteredAttachmentStrategy.idToEventMap[id] = this.event_;\n  };\n\n  FilteredAttachmentStrategy.prototype.onRemovedListener = function(listener) {\n    this.detachListener(listener, true);\n  };\n\n  FilteredAttachmentStrategy.prototype.detachListener =\n      function(listener, manual) {\n    if (listener.id == undefined)\n      throw new Error(\"listener.id undefined - '\" + listener + \"'\");\n    var id = listener.id;\n    delete this.listenerMap_[id];\n    delete FilteredAttachmentStrategy.idToEventMap[id];\n    eventNatives.DetachFilteredEvent(id, manual);\n  };\n\n  FilteredAttachmentStrategy.prototype.detach = function(manual) {\n    for (var i in this.listenerMap_)\n      this.detachListener(this.listenerMap_[i], manual);\n  };\n\n  FilteredAttachmentStrategy.prototype.getListenersByIDs = function(ids) {\n    var result = [];\n    for (var i = 0; i < ids.length; i++)\n      $Array.push(result, this.listenerMap_[ids[i]]);\n    return result;\n  };\n\n  function parseEventOptions(opt_eventOptions) {\n    function merge(dest, src) {\n      for (var k in src) {\n        if (!$Object.hasOwnProperty(dest, k)) {\n          dest[k] = src[k];\n        }\n      }\n    }\n\n    var options = opt_eventOptions || {};\n    merge(options, {\n      // Event supports adding listeners with filters (\"filtered events\"), for\n      // example as used in the webNavigation API.\n      //\n      // event.addListener(listener, [filter1, filter2]);\n      supportsFilters: false,\n\n      // Events supports vanilla events. Most APIs use these.\n      //\n      // event.addListener(listener);\n      supportsListeners: true,\n\n      // Event supports adding rules (\"declarative events\") rather than\n      // listeners, for example as used in the declarativeWebRequest API.\n      //\n      // event.addRules([rule1, rule2]);\n      supportsRules: false,\n\n      // Event is unmanaged in that the browser has no knowledge of its\n      // existence; it's never invoked, doesn't keep the renderer alive, and\n      // the bindings system has no knowledge of it.\n      //\n      // Both events created by user code (new chrome.Event()) and messaging\n      // events are unmanaged, though in the latter case the browser *does*\n      // interact indirectly with them via IPCs written by hand.\n      unmanaged: false,\n    });\n    return options;\n  };\n\n  // Event object.  If opt_eventName is provided, this object represents\n  // the unique instance of that named event, and dispatching an event\n  // with that name will route through this object's listeners. Note that\n  // opt_eventName is required for events that support rules.\n  //\n  // Example:\n  //   var Event = require('event_bindings').Event;\n  //   chrome.tabs.onChanged = new Event(\"tab-changed\");\n  //   chrome.tabs.onChanged.addListener(function(data) { alert(data); });\n  //   Event.dispatch(\"tab-changed\", \"hi\");\n  // will result in an alert dialog that says 'hi'.\n  //\n  // If opt_eventOptions exists, it is a dictionary that contains the boolean\n  // entries \"supportsListeners\" and \"supportsRules\".\n  var Event = function(opt_eventName, opt_argSchemas, opt_eventOptions) {\n    this.eventName_ = opt_eventName;\n    this.argSchemas_ = opt_argSchemas;\n    this.listeners_ = [];\n    this.eventOptions_ = parseEventOptions(opt_eventOptions);\n\n    if (!this.eventName_) {\n      if (this.eventOptions_.supportsRules)\n        throw new Error(\"Events that support rules require an event name.\");\n      // Events without names cannot be managed by the browser by definition\n      // (the browser has no way of identifying them).\n      this.eventOptions_.unmanaged = true;\n    }\n\n    // Track whether the event has been destroyed to help track down the cause\n    // of http://crbug.com/258526.\n    // This variable will eventually hold the stack trace of the destroy call.\n    // TODO(kalman): Delete this and replace with more sound logic that catches\n    // when events are used without being *attached*.\n    this.destroyed_ = null;\n\n    if (this.eventOptions_.unmanaged)\n      this.attachmentStrategy_ = new NullAttachmentStrategy(this);\n    else if (this.eventOptions_.supportsFilters)\n      this.attachmentStrategy_ = new FilteredAttachmentStrategy(this);\n    else\n      this.attachmentStrategy_ = new UnfilteredAttachmentStrategy(this);\n  };\n\n  // callback is a function(args, dispatch). args are the args we receive from\n  // dispatchEvent(), and dispatch is a function(args) that dispatches args to\n  // its listeners.\n  function registerArgumentMassager(name, callback) {\n    if (eventArgumentMassagers[name])\n      throw new Error(\"Massager already registered for event: \" + name);\n    eventArgumentMassagers[name] = callback;\n  }\n\n  // Dispatches a named event with the given argument array. The args array is\n  // the list of arguments that will be sent to the event callback.\n  function dispatchEvent(name, args, filteringInfo) {\n    var listenerIDs = [];\n\n    if (filteringInfo)\n      listenerIDs = eventNatives.MatchAgainstEventFilter(name, filteringInfo);\n\n    var event = attachedNamedEvents[name];\n    if (!event)\n      return;\n\n    var dispatchArgs = function(args) {\n      var result = event.dispatch_(args, listenerIDs);\n      if (result)\n        logging.DCHECK(!result.validationErrors, result.validationErrors);\n      return result;\n    };\n\n    if (eventArgumentMassagers[name])\n      eventArgumentMassagers[name](args, dispatchArgs);\n    else\n      dispatchArgs(args);\n  }\n\n  // Registers a callback to be called when this event is dispatched.\n  Event.prototype.addListener = function(cb, filters) {\n    if (!this.eventOptions_.supportsListeners)\n      throw new Error(\"This event does not support listeners.\");\n    if (this.eventOptions_.maxListeners &&\n        this.getListenerCount() >= this.eventOptions_.maxListeners) {\n      throw new Error(\"Too many listeners for \" + this.eventName_);\n    }\n    if (filters) {\n      if (!this.eventOptions_.supportsFilters)\n        throw new Error(\"This event does not support filters.\");\n      if (filters.url && !(filters.url instanceof Array))\n        throw new Error(\"filters.url should be an array.\");\n      if (filters.serviceType &&\n          !(typeof filters.serviceType === 'string')) {\n        throw new Error(\"filters.serviceType should be a string.\")\n      }\n    }\n    var listener = {callback: cb, filters: filters};\n    this.attach_(listener);\n    $Array.push(this.listeners_, listener);\n  };\n\n  Event.prototype.attach_ = function(listener) {\n    this.attachmentStrategy_.onAddedListener(listener);\n\n    if (this.listeners_.length == 0) {\n      allAttachedEvents[allAttachedEvents.length] = this;\n      if (this.eventName_) {\n        if (attachedNamedEvents[this.eventName_]) {\n          throw new Error(\"Event '\" + this.eventName_ +\n                          \"' is already attached.\");\n        }\n        attachedNamedEvents[this.eventName_] = this;\n      }\n    }\n  };\n\n  // Unregisters a callback.\n  Event.prototype.removeListener = function(cb) {\n    if (!this.eventOptions_.supportsListeners)\n      throw new Error(\"This event does not support listeners.\");\n\n    var idx = this.findListener_(cb);\n    if (idx == -1)\n      return;\n\n    var removedListener = $Array.splice(this.listeners_, idx, 1)[0];\n    this.attachmentStrategy_.onRemovedListener(removedListener);\n\n    if (this.listeners_.length == 0) {\n      var i = allAttachedEvents.indexOf(this);\n      if (i >= 0)\n        delete allAttachedEvents[i];\n      if (this.eventName_) {\n        if (!attachedNamedEvents[this.eventName_])\n          throw new Error(\"Event '\" + this.eventName_ + \"' is not attached.\");\n        delete attachedNamedEvents[this.eventName_];\n      }\n    }\n  };\n\n  // Test if the given callback is registered for this event.\n  Event.prototype.hasListener = function(cb) {\n    if (!this.eventOptions_.supportsListeners)\n      throw new Error(\"This event does not support listeners.\");\n    return this.findListener_(cb) > -1;\n  };\n\n  // Test if any callbacks are registered for this event.\n  Event.prototype.hasListeners = function() {\n    return this.getListenerCount() > 0;\n  };\n\n  // Return the number of listeners on this event.\n  Event.prototype.getListenerCount = function() {\n    if (!this.eventOptions_.supportsListeners)\n      throw new Error(\"This event does not support listeners.\");\n    return this.listeners_.length;\n  };\n\n  // Returns the index of the given callback if registered, or -1 if not\n  // found.\n  Event.prototype.findListener_ = function(cb) {\n    for (var i = 0; i < this.listeners_.length; i++) {\n      if (this.listeners_[i].callback == cb) {\n        return i;\n      }\n    }\n\n    return -1;\n  };\n\n  Event.prototype.dispatch_ = function(args, listenerIDs) {\n    if (this.destroyed_) {\n      throw new Error(this.eventName_ + ' was already destroyed at: ' +\n                      this.destroyed_);\n    }\n    if (!this.eventOptions_.supportsListeners)\n      throw new Error(\"This event does not support listeners.\");\n\n    if (this.argSchemas_ && logging.DCHECK_IS_ON()) {\n      try {\n        validate(args, this.argSchemas_);\n      } catch (e) {\n        e.message += ' in ' + this.eventName_;\n        throw e;\n      }\n    }\n\n    // Make a copy of the listeners in case the listener list is modified\n    // while dispatching the event.\n    var listeners = $Array.slice(\n        this.attachmentStrategy_.getListenersByIDs(listenerIDs));\n\n    var results = [];\n    for (var i = 0; i < listeners.length; i++) {\n      try {\n        var result = this.dispatchToListener(listeners[i].callback, args);\n        if (result !== undefined)\n          $Array.push(results, result);\n      } catch (e) {\n        console.error('Error in event handler for ' +\n                      (this.eventName_ ? this.eventName_ : '(unknown)') +\n                      ': ' + e.stack);\n      }\n    }\n    if (results.length)\n      return {results: results};\n  }\n\n  // Can be overridden to support custom dispatching.\n  Event.prototype.dispatchToListener = function(callback, args) {\n    return $Function.apply(callback, null, args);\n  }\n\n  // Dispatches this event object to all listeners, passing all supplied\n  // arguments to this function each listener.\n  Event.prototype.dispatch = function(varargs) {\n    return this.dispatch_($Array.slice(arguments), undefined);\n  };\n\n  // Detaches this event object from its name.\n  Event.prototype.detach_ = function() {\n    this.attachmentStrategy_.detach(false);\n  };\n\n  Event.prototype.destroy_ = function() {\n    this.listeners_.length = 0;\n    this.detach_();\n    this.destroyed_ = new Error().stack;\n  };\n\n  Event.prototype.addRules = function(rules, opt_cb) {\n    if (!this.eventOptions_.supportsRules)\n      throw new Error(\"This event does not support rules.\");\n\n    // Takes a list of JSON datatype identifiers and returns a schema fragment\n    // that verifies that a JSON object corresponds to an array of only these\n    // data types.\n    function buildArrayOfChoicesSchema(typesList) {\n      return {\n        'type': 'array',\n        'items': {\n          'choices': typesList.map(function(el) {return {'$ref': el};})\n        }\n      };\n    };\n\n    // Validate conditions and actions against specific schemas of this\n    // event object type.\n    // |rules| is an array of JSON objects that follow the Rule type of the\n    // declarative extension APIs. |conditions| is an array of JSON type\n    // identifiers that are allowed to occur in the conditions attribute of each\n    // rule. Likewise, |actions| is an array of JSON type identifiers that are\n    // allowed to occur in the actions attribute of each rule.\n    function validateRules(rules, conditions, actions) {\n      var conditionsSchema = buildArrayOfChoicesSchema(conditions);\n      var actionsSchema = buildArrayOfChoicesSchema(actions);\n      $Array.forEach(rules, function(rule) {\n        validate([rule.conditions], [conditionsSchema]);\n        validate([rule.actions], [actionsSchema]);\n      });\n    };\n\n    if (!this.eventOptions_.conditions || !this.eventOptions_.actions) {\n      throw new Error('Event ' + this.eventName_ + ' misses conditions or ' +\n                      'actions in the API specification.');\n    }\n\n    validateRules(rules,\n                  this.eventOptions_.conditions,\n                  this.eventOptions_.actions);\n\n    ensureRuleSchemasLoaded();\n    // We remove the first parameter from the validation to give the user more\n    // meaningful error messages.\n    validate([rules, opt_cb],\n             $Array.splice(\n                 $Array.slice(ruleFunctionSchemas.addRules.parameters), 1));\n    sendRequest(\"events.addRules\", [this.eventName_, rules, opt_cb],\n                ruleFunctionSchemas.addRules.parameters);\n  }\n\n  Event.prototype.removeRules = function(ruleIdentifiers, opt_cb) {\n    if (!this.eventOptions_.supportsRules)\n      throw new Error(\"This event does not support rules.\");\n    ensureRuleSchemasLoaded();\n    // We remove the first parameter from the validation to give the user more\n    // meaningful error messages.\n    validate([ruleIdentifiers, opt_cb],\n             $Array.splice(\n                 $Array.slice(ruleFunctionSchemas.removeRules.parameters), 1));\n    sendRequest(\"events.removeRules\",\n                [this.eventName_, ruleIdentifiers, opt_cb],\n                ruleFunctionSchemas.removeRules.parameters);\n  }\n\n  Event.prototype.getRules = function(ruleIdentifiers, cb) {\n    if (!this.eventOptions_.supportsRules)\n      throw new Error(\"This event does not support rules.\");\n    ensureRuleSchemasLoaded();\n    // We remove the first parameter from the validation to give the user more\n    // meaningful error messages.\n    validate([ruleIdentifiers, cb],\n             $Array.splice(\n                 $Array.slice(ruleFunctionSchemas.getRules.parameters), 1));\n\n    sendRequest(\"events.getRules\",\n                [this.eventName_, ruleIdentifiers, cb],\n                ruleFunctionSchemas.getRules.parameters);\n  }\n\n  unloadEvent.addListener(function() {\n    for (var i = 0; i < allAttachedEvents.length; ++i) {\n      var event = allAttachedEvents[i];\n      if (event)\n        event.detach_();\n    }\n  });\n\n  // NOTE: Event is (lazily) exposed as chrome.Event from dispatcher.cc.\n  exports.Event = Event;\n\n  exports.dispatchEvent = dispatchEvent;\n  exports.parseEventOptions = parseEventOptions;\n  exports.registerArgumentMassager = registerArgumentMassager;\n\n})"}
],
[
{"endColumn":2,"endLine":166,"isContentScript":true,"scriptId":"142","startColumn":0,"startLine":0,"url":"extensions::sendRequest"},{"scriptSource":"(function(require, requireNative, exports, console, $Array, $Function, $JSON, $Object, $RegExp, $String) {'use strict';// Copyright (c) 2012 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nvar lastError = require('lastError');\nvar logging = requireNative('logging');\nvar natives = requireNative('sendRequest');\nvar processNatives = requireNative('process');\nvar validate = require('schemaUtils').validate;\n\n// All outstanding requests from sendRequest().\nvar requests = {};\n\n// Used to prevent double Activity Logging for API calls that use both custom\n// bindings and ExtensionFunctions (via sendRequest).\nvar calledSendRequest = false;\n\n// Runs a user-supplied callback safely.\nfunction safeCallbackApply(name, request, callback, args) {\n  try {\n    $Function.apply(callback, request, args);\n  } catch (e) {\n    var errorMessage = \"Error in response to \" + name + \": \" + e;\n    if (request.stack && request.stack != '')\n      errorMessage += \"\\n\" + request.stack;\n    console.error(errorMessage);\n  }\n}\n\n// Callback handling.\nfunction handleResponse(requestId, name, success, responseList, error) {\n  // The chrome objects we will set lastError on. Really we should only be\n  // setting this on the callback's chrome object, but set on ours too since\n  // it's conceivable that something relies on that.\n  var chromesForLastError = [chrome];\n\n  try {\n    var request = requests[requestId];\n    logging.DCHECK(request != null);\n\n    // lastError needs to be set on the caller's chrome object no matter what,\n    // though chances are it's the same as ours (it will be different when\n    // calling API methods on other contexts).\n    if (request.callback) {\n      var chromeForCallback = natives.GetGlobal(request.callback).chrome;\n      if (chromeForCallback != chrome)\n        $Array.push(chromesForLastError, chromeForCallback);\n    }\n\n    $Array.forEach(chromesForLastError, function(c) {lastError.clear(c)});\n    if (!success) {\n      if (!error)\n        error = \"Unknown error.\";\n      $Array.forEach(chromesForLastError, function(c) {\n        lastError.set(name, error, request.stack, c)\n      });\n    }\n\n    if (request.customCallback) {\n      safeCallbackApply(name,\n                        request,\n                        request.customCallback,\n                        $Array.concat([name, request], responseList));\n    }\n\n    if (request.callback) {\n      // Validate callback in debug only -- and only when the\n      // caller has provided a callback. Implementations of api\n      // calls may not return data if they observe the caller\n      // has not provided a callback.\n      if (logging.DCHECK_IS_ON() && !error) {\n        if (!request.callbackSchema.parameters)\n          throw new Error(name + \": no callback schema defined\");\n        validate(responseList, request.callbackSchema.parameters);\n      }\n      safeCallbackApply(name, request, request.callback, responseList);\n    }\n  } finally {\n    delete requests[requestId];\n    $Array.forEach(chromesForLastError, function(c) {lastError.clear(c)});\n  }\n};\n\nfunction getExtensionStackTrace(call_name) {\n  var stack = $String.split(new Error().stack, '\\n');\n\n  // Remove stack frames before and after that weren't associated with the\n  // extension.\n  var id = processNatives.GetExtensionId();\n  while (stack.length > 0 && stack[0].indexOf(id) == -1)\n    stack.shift();\n  while (stack.length > 0 && stack[stack.length - 1].indexOf(id) == -1)\n    stack.pop();\n\n  return stack.join('\\n');\n}\n\nfunction prepareRequest(args, argSchemas) {\n  var request = {};\n  var argCount = args.length;\n\n  // Look for callback param.\n  if (argSchemas.length > 0 &&\n      argSchemas[argSchemas.length - 1].type == \"function\") {\n    request.callback = args[args.length - 1];\n    request.callbackSchema = argSchemas[argSchemas.length - 1];\n    --argCount;\n  }\n\n  request.args = [];\n  for (var k = 0; k < argCount; k++) {\n    request.args[k] = args[k];\n  }\n\n  return request;\n}\n\n// Send an API request and optionally register a callback.\n// |optArgs| is an object with optional parameters as follows:\n// - customCallback: a callback that should be called instead of the standard\n//   callback.\n// - nativeFunction: the v8 native function to handle the request, or\n//   StartRequest if missing.\n// - forIOThread: true if this function should be handled on the browser IO\n//   thread.\n// - preserveNullInObjects: true if it is safe for null to be in objects.\nfunction sendRequest(functionName, args, argSchemas, optArgs) {\n  calledSendRequest = true;\n  if (!optArgs)\n    optArgs = {};\n  var request = prepareRequest(args, argSchemas);\n  request.stack = getExtensionStackTrace();\n  if (optArgs.customCallback) {\n    request.customCallback = optArgs.customCallback;\n  }\n\n  var nativeFunction = optArgs.nativeFunction || natives.StartRequest;\n\n  var requestId = natives.GetNextRequestId();\n  request.id = requestId;\n  requests[requestId] = request;\n\n  var hasCallback = request.callback || optArgs.customCallback;\n  return nativeFunction(functionName,\n                        request.args,\n                        requestId,\n                        hasCallback,\n                        optArgs.forIOThread,\n                        optArgs.preserveNullInObjects);\n}\n\nfunction getCalledSendRequest() {\n  return calledSendRequest;\n}\n\nfunction clearCalledSendRequest() {\n  calledSendRequest = false;\n}\n\nexports.sendRequest = sendRequest;\nexports.getCalledSendRequest = getCalledSendRequest;\nexports.clearCalledSendRequest = clearCalledSendRequest;\n\n// Called by C++.\nexports.handleResponse = handleResponse;\n\n})"}
],
[
{"endColumn":2,"endLine":83,"isContentScript":true,"scriptId":"143","startColumn":0,"startLine":0,"url":"extensions::lastError"},{"scriptSource":"(function(require, requireNative, exports, console, $Array, $Function, $JSON, $Object, $RegExp, $String) {'use strict';// Copyright (c) 2012 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nvar GetAvailability = requireNative('v8_context').GetAvailability;\nvar GetGlobal = requireNative('sendRequest').GetGlobal;\n\n// Utility for setting chrome.*.lastError.\n//\n// A utility here is useful for two reasons:\n//  1. For backwards compatibility we need to set chrome.extension.lastError,\n//     but not all contexts actually have access to the extension namespace.\n//  2. When calling across contexts, the global object that gets lastError set\n//     needs to be that of the caller. We force callers to explicitly specify\n//     the chrome object to try to prevent bugs here.\n\n/**\n * Sets the last error for |name| on |targetChrome| to |message| with an\n * optional |stack|.\n */\nfunction set(name, message, stack, targetChrome) {\n  var errorMessage = name + ': ' + message;\n  if (stack != null && stack != '')\n    errorMessage += '\\n' + stack;\n\n  if (!targetChrome)\n    throw new Error('No chrome object to set error: ' + errorMessage);\n  clear(targetChrome);  // in case somebody has set a sneaky getter/setter\n\n  var errorObject = { message: message };\n  if (GetAvailability('extension.lastError').is_available)\n    targetChrome.extension.lastError = errorObject;\n\n  assertRuntimeIsAvailable();\n  targetChrome.runtime.lastError = errorObject;\n};\n\n/**\n * Clears the last error on |targetChrome|.\n */\nfunction clear(targetChrome) {\n  if (!targetChrome)\n    throw new Error('No target chrome to clear error');\n\n  if (GetAvailability('extension.lastError').is_available)\n    delete targetChrome.extension.lastError;\n\n  assertRuntimeIsAvailable();\n  delete targetChrome.runtime.lastError;\n};\n\nfunction assertRuntimeIsAvailable() {\n  // chrome.runtime should always be available, but maybe it's disappeared for\n  // some reason? Add debugging for http://crbug.com/258526.\n  var runtimeAvailability = GetAvailability('runtime.lastError');\n  if (!runtimeAvailability.is_available) {\n    throw new Error('runtime.lastError is not available: ' +\n                    runtimeAvailability.message);\n  }\n  if (!chrome.runtime)\n    throw new Error('runtime namespace is null or undefined');\n}\n\n/**\n * Runs |callback(args)| with last error args as in set().\n *\n * The target chrome object is the global object's of the callback, so this\n * method won't work if the real callback has been wrapped (etc).\n */\nfunction run(name, message, stack, callback, args) {\n  var targetChrome = GetGlobal(callback).chrome;\n  set(name, message, stack, targetChrome);\n  try {\n    $Function.apply(callback, undefined, args);\n  } finally {\n    clear(targetChrome);\n  }\n}\n\nexports.clear = clear;\nexports.set = set;\nexports.run = run;\n\n})"}
],
[
{"endColumn":2,"endLine":157,"isContentScript":true,"scriptId":"144","startColumn":0,"startLine":0,"url":"extensions::schemaUtils"},{"scriptSource":"(function(require, requireNative, exports, console, $Array, $Function, $JSON, $Object, $RegExp, $String) {'use strict';// Copyright (c) 2012 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n// Routines used to validate and normalize arguments.\n// TODO(benwells): unit test this file.\n\nvar JSONSchemaValidator = require('json_schema').JSONSchemaValidator;\n\nvar schemaValidator = new JSONSchemaValidator();\n\n// Validate arguments.\nfunction validate(args, parameterSchemas) {\n  if (args.length > parameterSchemas.length)\n    throw new Error(\"Too many arguments.\");\n  for (var i = 0; i < parameterSchemas.length; i++) {\n    if (i in args && args[i] !== null && args[i] !== undefined) {\n      schemaValidator.resetErrors();\n      schemaValidator.validate(args[i], parameterSchemas[i]);\n      if (schemaValidator.errors.length == 0)\n        continue;\n      var message = \"Invalid value for argument \" + (i + 1) + \". \";\n      for (var i = 0, err;\n          err = schemaValidator.errors[i]; i++) {\n        if (err.path) {\n          message += \"Property '\" + err.path + \"': \";\n        }\n        message += err.message;\n        message = message.substring(0, message.length - 1);\n        message += \", \";\n      }\n      message = message.substring(0, message.length - 2);\n      message += \".\";\n      throw new Error(message);\n    } else if (!parameterSchemas[i].optional) {\n      throw new Error(\"Parameter \" + (i + 1) + \" (\" +\n          parameterSchemas[i].name + \") is required.\");\n    }\n  }\n}\n\n// Generate all possible signatures for a given API function.\nfunction getSignatures(parameterSchemas) {\n  if (parameterSchemas.length === 0)\n    return [[]];\n  var signatures = [];\n  var remaining = getSignatures($Array.slice(parameterSchemas, 1));\n  for (var i = 0; i < remaining.length; i++)\n    $Array.push(signatures, $Array.concat([parameterSchemas[0]], remaining[i]))\n  if (parameterSchemas[0].optional)\n    return $Array.concat(signatures, remaining);\n  return signatures;\n};\n\n// Return true if arguments match a given signature's schema.\nfunction argumentsMatchSignature(args, candidateSignature) {\n  if (args.length != candidateSignature.length)\n    return false;\n  for (var i = 0; i < candidateSignature.length; i++) {\n    var argType =  JSONSchemaValidator.getType(args[i]);\n    if (!schemaValidator.isValidSchemaType(argType,\n        candidateSignature[i]))\n      return false;\n  }\n  return true;\n};\n\n// Finds the function signature for the given arguments.\nfunction resolveSignature(args, definedSignature) {\n  var candidateSignatures = getSignatures(definedSignature);\n  for (var i = 0; i < candidateSignatures.length; i++) {\n    if (argumentsMatchSignature(args, candidateSignatures[i]))\n      return candidateSignatures[i];\n  }\n  return null;\n};\n\n// Returns a string representing the defined signature of the API function.\n// Example return value for chrome.windows.getCurrent:\n// \"windows.getCurrent(optional object populate, function callback)\"\nfunction getParameterSignatureString(name, definedSignature) {\n  var getSchemaTypeString = function(schema) {\n    var schemaTypes = schemaValidator.getAllTypesForSchema(schema);\n    var typeName = schemaTypes.join(\" or \") + \" \" + schema.name;\n    if (schema.optional)\n      return \"optional \" + typeName;\n    return typeName;\n  };\n  var typeNames = definedSignature.map(getSchemaTypeString);\n  return name + \"(\" + typeNames.join(\", \") + \")\";\n};\n\n// Returns a string representing a call to an API function.\n// Example return value for call: chrome.windows.get(1, callback) is:\n// \"windows.get(int, function)\"\nfunction getArgumentSignatureString(name, args) {\n  var typeNames = args.map(JSONSchemaValidator.getType);\n  return name + \"(\" + typeNames.join(\", \") + \")\";\n};\n\n// Finds the correct signature for the given arguments, then validates the\n// arguments against that signature. Returns a 'normalized' arguments list\n// where nulls are inserted where optional parameters were omitted.\n// |args| is expected to be an array.\nfunction normalizeArgumentsAndValidate(args, funDef) {\n  if (funDef.allowAmbiguousOptionalArguments) {\n    validate(args, funDef.definition.parameters);\n    return args;\n  }\n  var definedSignature = funDef.definition.parameters;\n  var resolvedSignature = resolveSignature(args, definedSignature);\n  if (!resolvedSignature)\n    throw new Error(\"Invocation of form \" +\n        getArgumentSignatureString(funDef.name, args) +\n        \" doesn't match definition \" +\n        getParameterSignatureString(funDef.name, definedSignature));\n  validate(args, resolvedSignature);\n  var normalizedArgs = [];\n  var ai = 0;\n  for (var si = 0; si < definedSignature.length; si++) {\n    if (definedSignature[si] === resolvedSignature[ai])\n      $Array.push(normalizedArgs, args[ai++]);\n    else\n      $Array.push(normalizedArgs, null);\n  }\n  return normalizedArgs;\n};\n\n// Validates that a given schema for an API function is not ambiguous.\nfunction isFunctionSignatureAmbiguous(functionDef) {\n  if (functionDef.allowAmbiguousOptionalArguments)\n    return false;\n  var signaturesAmbiguous = function(signature1, signature2) {\n    if (signature1.length != signature2.length)\n      return false;\n    for (var i = 0; i < signature1.length; i++) {\n      if (!schemaValidator.checkSchemaOverlap(\n          signature1[i], signature2[i]))\n        return false;\n    }\n    return true;\n  };\n  var candidateSignatures = getSignatures(functionDef.parameters);\n  for (var i = 0; i < candidateSignatures.length; i++) {\n    for (var j = i + 1; j < candidateSignatures.length; j++) {\n      if (signaturesAmbiguous(candidateSignatures[i], candidateSignatures[j]))\n        return true;\n    }\n  }\n  return false;\n};\n\nexports.isFunctionSignatureAmbiguous = isFunctionSignatureAmbiguous;\nexports.normalizeArgumentsAndValidate = normalizeArgumentsAndValidate;\nexports.schemaValidator = schemaValidator;\nexports.validate = validate;\n\n})"}
],
[
{"endColumn":2,"endLine":517,"isContentScript":true,"scriptId":"145","startColumn":0,"startLine":0,"url":"extensions::json_schema"},{"scriptSource":"(function(require, requireNative, exports, console, $Array, $Function, $JSON, $Object, $RegExp, $String) {'use strict';// Copyright (c) 2012 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n// -----------------------------------------------------------------------------\n// NOTE: If you change this file you need to touch renderer_resources.grd to\n// have your change take effect.\n// -----------------------------------------------------------------------------\n\n//==============================================================================\n// This file contains a class that implements a subset of JSON Schema.\n// See: http://www.json.com/json-schema-proposal/ for more details.\n//\n// The following features of JSON Schema are not implemented:\n// - requires\n// - unique\n// - disallow\n// - union types (but replaced with 'choices')\n//\n// The following properties are not applicable to the interface exposed by\n// this class:\n// - options\n// - readonly\n// - title\n// - description\n// - format\n// - default\n// - transient\n// - hidden\n//\n// There are also these departures from the JSON Schema proposal:\n// - function and undefined types are supported\n// - null counts as 'unspecified' for optional values\n// - added the 'choices' property, to allow specifying a list of possible types\n//   for a value\n// - by default an \"object\" typed schema does not allow additional properties.\n//   if present, \"additionalProperties\" is to be a schema against which all\n//   additional properties will be validated.\n//==============================================================================\n\nvar loadTypeSchema = require('utils').loadTypeSchema;\nvar CHECK = requireNative('logging').CHECK;\n\nfunction isInstanceOfClass(instance, className) {\n  while ((instance = instance.__proto__)) {\n    if (instance.constructor.name == className)\n      return true;\n  }\n  return false;\n}\n\nfunction isOptionalValue(value) {\n  return typeof(value) === 'undefined' || value === null;\n}\n\n/**\n * Validates an instance against a schema and accumulates errors. Usage:\n *\n * var validator = new JSONSchemaValidator();\n * validator.validate(inst, schema);\n * if (validator.errors.length == 0)\n *   console.log(\"Valid!\");\n * else\n *   console.log(validator.errors);\n *\n * The errors property contains a list of objects. Each object has two\n * properties: \"path\" and \"message\". The \"path\" property contains the path to\n * the key that had the problem, and the \"message\" property contains a sentence\n * describing the error.\n */\nfunction JSONSchemaValidator() {\n  this.errors = [];\n  this.types = [];\n}\n\nJSONSchemaValidator.messages = {\n  invalidEnum: \"Value must be one of: [*].\",\n  propertyRequired: \"Property is required.\",\n  unexpectedProperty: \"Unexpected property.\",\n  arrayMinItems: \"Array must have at least * items.\",\n  arrayMaxItems: \"Array must not have more than * items.\",\n  itemRequired: \"Item is required.\",\n  stringMinLength: \"String must be at least * characters long.\",\n  stringMaxLength: \"String must not be more than * characters long.\",\n  stringPattern: \"String must match the pattern: *.\",\n  numberFiniteNotNan: \"Value must not be *.\",\n  numberMinValue: \"Value must not be less than *.\",\n  numberMaxValue: \"Value must not be greater than *.\",\n  numberIntValue: \"Value must fit in a 32-bit signed integer.\",\n  numberMaxDecimal: \"Value must not have more than * decimal places.\",\n  invalidType: \"Expected '*' but got '*'.\",\n  invalidTypeIntegerNumber:\n      \"Expected 'integer' but got 'number', consider using Math.round().\",\n  invalidChoice: \"Value does not match any valid type choices.\",\n  invalidPropertyType: \"Missing property type.\",\n  schemaRequired: \"Schema value required.\",\n  unknownSchemaReference: \"Unknown schema reference: *.\",\n  notInstance: \"Object must be an instance of *.\"\n};\n\n/**\n * Builds an error message. Key is the property in the |errors| object, and\n * |opt_replacements| is an array of values to replace \"*\" characters with.\n */\nJSONSchemaValidator.formatError = function(key, opt_replacements) {\n  var message = this.messages[key];\n  if (opt_replacements) {\n    for (var i = 0; i < opt_replacements.length; i++) {\n      message = message.replace(\"*\", opt_replacements[i]);\n    }\n  }\n  return message;\n};\n\n/**\n * Classifies a value as one of the JSON schema primitive types. Note that we\n * don't explicitly disallow 'function', because we want to allow functions in\n * the input values.\n */\nJSONSchemaValidator.getType = function(value) {\n  var s = typeof value;\n\n  if (s == \"object\") {\n    if (value === null) {\n      return \"null\";\n    } else if (Object.prototype.toString.call(value) == \"[object Array]\") {\n      return \"array\";\n    } else if (typeof(ArrayBuffer) != \"undefined\" &&\n               value.constructor == ArrayBuffer) {\n      return \"binary\";\n    }\n  } else if (s == \"number\") {\n    if (value % 1 == 0) {\n      return \"integer\";\n    }\n  }\n\n  return s;\n};\n\n/**\n * Add types that may be referenced by validated schemas that reference them\n * with \"$ref\": <typeId>. Each type must be a valid schema and define an\n * \"id\" property.\n */\nJSONSchemaValidator.prototype.addTypes = function(typeOrTypeList) {\n  function addType(validator, type) {\n    if (!type.id)\n      throw new Error(\"Attempt to addType with missing 'id' property\");\n    validator.types[type.id] = type;\n  }\n\n  if (typeOrTypeList instanceof Array) {\n    for (var i = 0; i < typeOrTypeList.length; i++) {\n      addType(this, typeOrTypeList[i]);\n    }\n  } else {\n    addType(this, typeOrTypeList);\n  }\n}\n\n/**\n * Returns a list of strings of the types that this schema accepts.\n */\nJSONSchemaValidator.prototype.getAllTypesForSchema = function(schema) {\n  var schemaTypes = [];\n  if (schema.type)\n    $Array.push(schemaTypes, schema.type);\n  if (schema.choices) {\n    for (var i = 0; i < schema.choices.length; i++) {\n      var choiceTypes = this.getAllTypesForSchema(schema.choices[i]);\n      schemaTypes = $Array.concat(schemaTypes, choiceTypes);\n    }\n  }\n  var ref = schema['$ref'];\n  if (ref) {\n    var type = this.getOrAddType(ref);\n    CHECK(type, 'Could not find type ' + ref);\n    schemaTypes = $Array.concat(schemaTypes, this.getAllTypesForSchema(type));\n  }\n  return schemaTypes;\n};\n\nJSONSchemaValidator.prototype.getOrAddType = function(typeName) {\n  if (!this.types[typeName])\n    this.types[typeName] = loadTypeSchema(typeName);\n  return this.types[typeName];\n};\n\n/**\n * Returns true if |schema| would accept an argument of type |type|.\n */\nJSONSchemaValidator.prototype.isValidSchemaType = function(type, schema) {\n  if (type == 'any')\n    return true;\n\n  // TODO(kalman): I don't understand this code. How can type be \"null\"?\n  if (schema.optional && (type == \"null\" || type == \"undefined\"))\n    return true;\n\n  var schemaTypes = this.getAllTypesForSchema(schema);\n  for (var i = 0; i < schemaTypes.length; i++) {\n    if (schemaTypes[i] == \"any\" || type == schemaTypes[i])\n      return true;\n  }\n\n  return false;\n};\n\n/**\n * Returns true if there is a non-null argument that both |schema1| and\n * |schema2| would accept.\n */\nJSONSchemaValidator.prototype.checkSchemaOverlap = function(schema1, schema2) {\n  var schema1Types = this.getAllTypesForSchema(schema1);\n  for (var i = 0; i < schema1Types.length; i++) {\n    if (this.isValidSchemaType(schema1Types[i], schema2))\n      return true;\n  }\n  return false;\n};\n\n/**\n * Validates an instance against a schema. The instance can be any JavaScript\n * value and will be validated recursively. When this method returns, the\n * |errors| property will contain a list of errors, if any.\n */\nJSONSchemaValidator.prototype.validate = function(instance, schema, opt_path) {\n  var path = opt_path || \"\";\n\n  if (!schema) {\n    this.addError(path, \"schemaRequired\");\n    return;\n  }\n\n  // If this schema defines itself as reference type, save it in this.types.\n  if (schema.id)\n    this.types[schema.id] = schema;\n\n  // If the schema has an extends property, the instance must validate against\n  // that schema too.\n  if (schema.extends)\n    this.validate(instance, schema.extends, path);\n\n  // If the schema has a $ref property, the instance must validate against\n  // that schema too. It must be present in this.types to be referenced.\n  var ref = schema[\"$ref\"];\n  if (ref) {\n    if (!this.getOrAddType(ref))\n      this.addError(path, \"unknownSchemaReference\", [ ref ]);\n    else\n      this.validate(instance, this.getOrAddType(ref), path)\n  }\n\n  // If the schema has a choices property, the instance must validate against at\n  // least one of the items in that array.\n  if (schema.choices) {\n    this.validateChoices(instance, schema, path);\n    return;\n  }\n\n  // If the schema has an enum property, the instance must be one of those\n  // values.\n  if (schema.enum) {\n    if (!this.validateEnum(instance, schema, path))\n      return;\n  }\n\n  if (schema.type && schema.type != \"any\") {\n    if (!this.validateType(instance, schema, path))\n      return;\n\n    // Type-specific validation.\n    switch (schema.type) {\n      case \"object\":\n        this.validateObject(instance, schema, path);\n        break;\n      case \"array\":\n        this.validateArray(instance, schema, path);\n        break;\n      case \"string\":\n        this.validateString(instance, schema, path);\n        break;\n      case \"number\":\n      case \"integer\":\n        this.validateNumber(instance, schema, path);\n        break;\n    }\n  }\n};\n\n/**\n * Validates an instance against a choices schema. The instance must match at\n * least one of the provided choices.\n */\nJSONSchemaValidator.prototype.validateChoices =\n    function(instance, schema, path) {\n  var originalErrors = this.errors;\n\n  for (var i = 0; i < schema.choices.length; i++) {\n    this.errors = [];\n    this.validate(instance, schema.choices[i], path);\n    if (this.errors.length == 0) {\n      this.errors = originalErrors;\n      return;\n    }\n  }\n\n  this.errors = originalErrors;\n  this.addError(path, \"invalidChoice\");\n};\n\n/**\n * Validates an instance against a schema with an enum type. Populates the\n * |errors| property, and returns a boolean indicating whether the instance\n * validates.\n */\nJSONSchemaValidator.prototype.validateEnum = function(instance, schema, path) {\n  for (var i = 0; i < schema.enum.length; i++) {\n    if (instance === schema.enum[i])\n      return true;\n  }\n\n  this.addError(path, \"invalidEnum\", [schema.enum.join(\", \")]);\n  return false;\n};\n\n/**\n * Validates an instance against an object schema and populates the errors\n * property.\n */\nJSONSchemaValidator.prototype.validateObject =\n    function(instance, schema, path) {\n  if (schema.properties) {\n    for (var prop in schema.properties) {\n      // It is common in JavaScript to add properties to Object.prototype. This\n      // check prevents such additions from being interpreted as required\n      // schema properties.\n      // TODO(aa): If it ever turns out that we actually want this to work,\n      // there are other checks we could put here, like requiring that schema\n      // properties be objects that have a 'type' property.\n      if (!$Object.hasOwnProperty(schema.properties, prop))\n        continue;\n\n      var propPath = path ? path + \".\" + prop : prop;\n      if (schema.properties[prop] == undefined) {\n        this.addError(propPath, \"invalidPropertyType\");\n      } else if (prop in instance && !isOptionalValue(instance[prop])) {\n        this.validate(instance[prop], schema.properties[prop], propPath);\n      } else if (!schema.properties[prop].optional) {\n        this.addError(propPath, \"propertyRequired\");\n      }\n    }\n  }\n\n  // If \"instanceof\" property is set, check that this object inherits from\n  // the specified constructor (function).\n  if (schema.isInstanceOf) {\n    if (!isInstanceOfClass(instance, schema.isInstanceOf))\n      this.addError(propPath, \"notInstance\", [schema.isInstanceOf]);\n  }\n\n  // Exit early from additional property check if \"type\":\"any\" is defined.\n  if (schema.additionalProperties &&\n      schema.additionalProperties.type &&\n      schema.additionalProperties.type == \"any\") {\n    return;\n  }\n\n  // By default, additional properties are not allowed on instance objects. This\n  // can be overridden by setting the additionalProperties property to a schema\n  // which any additional properties must validate against.\n  for (var prop in instance) {\n    if (schema.properties && prop in schema.properties)\n      continue;\n\n    // Any properties inherited through the prototype are ignored.\n    if (!$Object.hasOwnProperty(instance, prop))\n      continue;\n\n    var propPath = path ? path + \".\" + prop : prop;\n    if (schema.additionalProperties)\n      this.validate(instance[prop], schema.additionalProperties, propPath);\n    else\n      this.addError(propPath, \"unexpectedProperty\");\n  }\n};\n\n/**\n * Validates an instance against an array schema and populates the errors\n * property.\n */\nJSONSchemaValidator.prototype.validateArray = function(instance, schema, path) {\n  var typeOfItems = JSONSchemaValidator.getType(schema.items);\n\n  if (typeOfItems == 'object') {\n    if (schema.minItems && instance.length < schema.minItems) {\n      this.addError(path, \"arrayMinItems\", [schema.minItems]);\n    }\n\n    if (typeof schema.maxItems != \"undefined\" &&\n        instance.length > schema.maxItems) {\n      this.addError(path, \"arrayMaxItems\", [schema.maxItems]);\n    }\n\n    // If the items property is a single schema, each item in the array must\n    // have that schema.\n    for (var i = 0; i < instance.length; i++) {\n      this.validate(instance[i], schema.items, path + \".\" + i);\n    }\n  } else if (typeOfItems == 'array') {\n    // If the items property is an array of schemas, each item in the array must\n    // validate against the corresponding schema.\n    for (var i = 0; i < schema.items.length; i++) {\n      var itemPath = path ? path + \".\" + i : String(i);\n      if (i in instance && !isOptionalValue(instance[i])) {\n        this.validate(instance[i], schema.items[i], itemPath);\n      } else if (!schema.items[i].optional) {\n        this.addError(itemPath, \"itemRequired\");\n      }\n    }\n\n    if (schema.additionalProperties) {\n      for (var i = schema.items.length; i < instance.length; i++) {\n        var itemPath = path ? path + \".\" + i : String(i);\n        this.validate(instance[i], schema.additionalProperties, itemPath);\n      }\n    } else {\n      if (instance.length > schema.items.length) {\n        this.addError(path, \"arrayMaxItems\", [schema.items.length]);\n      }\n    }\n  }\n};\n\n/**\n * Validates a string and populates the errors property.\n */\nJSONSchemaValidator.prototype.validateString =\n    function(instance, schema, path) {\n  if (schema.minLength && instance.length < schema.minLength)\n    this.addError(path, \"stringMinLength\", [schema.minLength]);\n\n  if (schema.maxLength && instance.length > schema.maxLength)\n    this.addError(path, \"stringMaxLength\", [schema.maxLength]);\n\n  if (schema.pattern && !schema.pattern.test(instance))\n    this.addError(path, \"stringPattern\", [schema.pattern]);\n};\n\n/**\n * Validates a number and populates the errors property. The instance is\n * assumed to be a number.\n */\nJSONSchemaValidator.prototype.validateNumber =\n    function(instance, schema, path) {\n  // Forbid NaN, +Infinity, and -Infinity.  Our APIs don't use them, and\n  // JSON serialization encodes them as 'null'.  Re-evaluate supporting\n  // them if we add an API that could reasonably take them as a parameter.\n  if (isNaN(instance) ||\n      instance == Number.POSITIVE_INFINITY ||\n      instance == Number.NEGATIVE_INFINITY )\n    this.addError(path, \"numberFiniteNotNan\", [instance]);\n\n  if (schema.minimum !== undefined && instance < schema.minimum)\n    this.addError(path, \"numberMinValue\", [schema.minimum]);\n\n  if (schema.maximum !== undefined && instance > schema.maximum)\n    this.addError(path, \"numberMaxValue\", [schema.maximum]);\n\n  // Check for integer values outside of -2^31..2^31-1.\n  if (schema.type === \"integer\" && (instance | 0) !== instance)\n    this.addError(path, \"numberIntValue\", []);\n\n  if (schema.maxDecimal && instance * Math.pow(10, schema.maxDecimal) % 1)\n    this.addError(path, \"numberMaxDecimal\", [schema.maxDecimal]);\n};\n\n/**\n * Validates the primitive type of an instance and populates the errors\n * property. Returns true if the instance validates, false otherwise.\n */\nJSONSchemaValidator.prototype.validateType = function(instance, schema, path) {\n  var actualType = JSONSchemaValidator.getType(instance);\n  if (schema.type == actualType ||\n      (schema.type == \"number\" && actualType == \"integer\")) {\n    return true;\n  } else if (schema.type == \"integer\" && actualType == \"number\") {\n    this.addError(path, \"invalidTypeIntegerNumber\");\n    return false;\n  } else {\n    this.addError(path, \"invalidType\", [schema.type, actualType]);\n    return false;\n  }\n};\n\n/**\n * Adds an error message. |key| is an index into the |messages| object.\n * |replacements| is an array of values to replace '*' characters in the\n * message.\n */\nJSONSchemaValidator.prototype.addError = function(path, key, replacements) {\n  $Array.push(this.errors, {\n    path: path,\n    message: JSONSchemaValidator.formatError(key, replacements)\n  });\n};\n\n/**\n * Resets errors to an empty list so you can call 'validate' again.\n */\nJSONSchemaValidator.prototype.resetErrors = function() {\n  this.errors = [];\n};\n\nexports.JSONSchemaValidator = JSONSchemaValidator;\n\n})"}
],
[
{"endColumn":2,"endLine":57,"isContentScript":true,"scriptId":"146","startColumn":0,"startLine":0,"url":"extensions::utils"},{"scriptSource":"(function(require, requireNative, exports, console, $Array, $Function, $JSON, $Object, $RegExp, $String) {'use strict';// Copyright (c) 2012 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nvar schemaRegistry = requireNative('schema_registry');\nvar CHECK = requireNative('logging').CHECK;\nvar WARNING = requireNative('logging').WARNING;\n\n// An object forEach. Calls |f| with each (key, value) pair of |obj|, using\n// |self| as the target.\nfunction forEach(obj, f, self) {\n  for (var key in obj) {\n    if ($Object.hasOwnProperty(obj, key))\n      $Function.call(f, self, key, obj[key]);\n  }\n}\n\n// Assuming |array_of_dictionaries| is structured like this:\n// [{id: 1, ... }, {id: 2, ...}, ...], you can use\n// lookup(array_of_dictionaries, 'id', 2) to get the dictionary with id == 2.\nfunction lookup(array_of_dictionaries, field, value) {\n  var filter = function (dict) {return dict[field] == value;};\n  var matches = array_of_dictionaries.filter(filter);\n  if (matches.length == 0) {\n    return undefined;\n  } else if (matches.length == 1) {\n    return matches[0]\n  } else {\n    throw new Error(\"Failed lookup of field '\" + field + \"' with value '\" +\n                    value + \"'\");\n  }\n}\n\nfunction loadTypeSchema(typeName, defaultSchema) {\n  var parts = $String.split(typeName, '.');\n  if (parts.length == 1) {\n    if (defaultSchema == null) {\n      WARNING('Trying to reference \"' + typeName + '\" ' +\n              'with neither namespace nor default schema.');\n      return null;\n    }\n    var types = defaultSchema.types;\n  } else {\n    var schemaName = $Array.join($Array.slice(parts, 0, parts.length - 1), '.');\n    var types = schemaRegistry.GetSchema(schemaName).types;\n  }\n  for (var i = 0; i < types.length; ++i) {\n    if (types[i].id == typeName)\n      return types[i];\n  }\n  return null;\n}\n\nexports.forEach = forEach;\nexports.loadTypeSchema = loadTypeSchema;\nexports.lookup = lookup;\n\n})"}
],
[
{"endColumn":2,"endLine":34,"isContentScript":true,"scriptId":"147","startColumn":0,"startLine":0,"url":"extensions::unload_event"},{"scriptSource":"(function(require, requireNative, exports, console, $Array, $Function, $JSON, $Object, $RegExp, $String) {'use strict';// Copyright 2013 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n// Special unload event. We don't use the DOM unload because that slows down\n// tab shutdown. On the other hand, onUnload might not always fire, since\n// Chrome will terminate renderers on shutdown (SuddenTermination).\n\n// Implement a primitive subset of the Event interface as needed, since if this\n// was to use the real event object there would be a circular dependency.\nvar listeners = [];\n\nexports.addListener = function(listener) {\n  $Array.push(listeners, listener);\n};\n\nexports.removeListener = function(listener) {\n  for (var i = 0; i < listeners.length; ++i) {\n    if (listeners[i] == listener) {\n      $Array.splice(listeners, i, 1);\n      return;\n    }\n  }\n};\n\nexports.wasDispatched = false;\n\n// dispatch() is called from C++.\nexports.dispatch = function() {\n  exports.wasDispatched = true;\n  for (var i = 0; i < listeners.length; ++i)\n    listeners[i]();\n};\n\n})"}
],
[
{"endColumn":2,"endLine":356,"isContentScript":true,"scriptId":"148","startColumn":0,"startLine":0,"url":"extensions::messaging"},{"scriptSource":"(function(require, requireNative, exports, console, $Array, $Function, $JSON, $Object, $RegExp, $String) {'use strict';// Copyright (c) 2012 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n// This contains unprivileged javascript APIs for extensions and apps.  It\n// can be loaded by any extension-related context, such as content scripts or\n// background pages. See user_script_slave.cc for script that is loaded by\n// content scripts only.\n\n  // TODO(kalman): factor requiring chrome out of here.\n  var chrome = requireNative('chrome').GetChrome();\n  var Event = require('event_bindings').Event;\n  var lastError = require('lastError');\n  var logActivity = requireNative('activityLogger');\n  var messagingNatives = requireNative('messaging_natives');\n  var processNatives = requireNative('process');\n  var unloadEvent = require('unload_event');\n  var messagingUtils = require('messaging_utils');\n\n  // The reserved channel name for the sendRequest/send(Native)Message APIs.\n  // Note: sendRequest is deprecated.\n  var kRequestChannel = \"chrome.extension.sendRequest\";\n  var kMessageChannel = \"chrome.runtime.sendMessage\";\n  var kNativeMessageChannel = \"chrome.runtime.sendNativeMessage\";\n\n  // Map of port IDs to port object.\n  var ports = {};\n\n  // Map of port IDs to unloadEvent listeners. Keep track of these to free the\n  // unloadEvent listeners when ports are closed.\n  var portReleasers = {};\n\n  // Change even to odd and vice versa, to get the other side of a given\n  // channel.\n  function getOppositePortId(portId) { return portId ^ 1; }\n\n  // Port object.  Represents a connection to another script context through\n  // which messages can be passed.\n  function Port(portId, opt_name) {\n    this.portId_ = portId;\n    this.name = opt_name;\n\n    var portSchema = {name: 'port', $ref: 'runtime.Port'};\n    var options = {unmanaged: true};\n    this.onDisconnect = new Event(null, [portSchema], options);\n    this.onMessage = new Event(\n        null,\n        [{name: 'message', type: 'any', optional: true}, portSchema],\n        options);\n  }\n\n  // Sends a message asynchronously to the context on the other end of this\n  // port.\n  Port.prototype.postMessage = function(msg) {\n    // JSON.stringify doesn't support a root object which is undefined.\n    if (msg === undefined)\n      msg = null;\n    msg = $JSON.stringify(msg);\n    if (msg === undefined) {\n      // JSON.stringify can fail with unserializable objects. Log an error and\n      // drop the message.\n      //\n      // TODO(kalman/mpcomplete): it would be better to do the same validation\n      // here that we do for runtime.sendMessage (and variants), i.e. throw an\n      // schema validation Error, but just maintain the old behaviour until\n      // there's a good reason not to (http://crbug.com/263077).\n      console.error('Illegal argument to Port.postMessage');\n      return;\n    }\n    messagingNatives.PostMessage(this.portId_, msg);\n  };\n\n  // Disconnects the port from the other end.\n  Port.prototype.disconnect = function() {\n    messagingNatives.CloseChannel(this.portId_, true);\n    this.destroy_();\n  };\n\n  Port.prototype.destroy_ = function() {\n    var portId = this.portId_;\n\n    this.onDisconnect.destroy_();\n    this.onMessage.destroy_();\n\n    messagingNatives.PortRelease(portId);\n    unloadEvent.removeListener(portReleasers[portId]);\n\n    delete ports[portId];\n    delete portReleasers[portId];\n  };\n\n  // Returns true if the specified port id is in this context. This is used by\n  // the C++ to avoid creating the javascript message for all the contexts that\n  // don't care about a particular message.\n  function hasPort(portId) {\n    return portId in ports;\n  };\n\n  // Hidden port creation function.  We don't want to expose an API that lets\n  // people add arbitrary port IDs to the port list.\n  function createPort(portId, opt_name) {\n    if (ports[portId])\n      throw new Error(\"Port '\" + portId + \"' already exists.\");\n    var port = new Port(portId, opt_name);\n    ports[portId] = port;\n    portReleasers[portId] = $Function.bind(messagingNatives.PortRelease,\n                                           this,\n                                           portId);\n    unloadEvent.addListener(portReleasers[portId]);\n    messagingNatives.PortAddRef(portId);\n    return port;\n  };\n\n  // Helper function for dispatchOnRequest.\n  function handleSendRequestError(isSendMessage,\n                                  responseCallbackPreserved,\n                                  sourceExtensionId,\n                                  targetExtensionId,\n                                  sourceUrl) {\n    var errorMsg = [];\n    var eventName = isSendMessage ? \"runtime.onMessage\" : \"extension.onRequest\";\n    if (isSendMessage && !responseCallbackPreserved) {\n      $Array.push(errorMsg,\n          \"The chrome.\" + eventName + \" listener must return true if you \" +\n          \"want to send a response after the listener returns\");\n    } else {\n      $Array.push(errorMsg,\n          \"Cannot send a response more than once per chrome.\" + eventName +\n          \" listener per document\");\n    }\n    $Array.push(errorMsg, \"(message was sent by extension\" + sourceExtensionId);\n    if (sourceExtensionId != \"\" && sourceExtensionId != targetExtensionId)\n      $Array.push(errorMsg, \"for extension \" + targetExtensionId);\n    if (sourceUrl != \"\")\n      $Array.push(errorMsg, \"for URL \" + sourceUrl);\n    lastError.set(eventName, errorMsg.join(\" \") + \").\", null, chrome);\n  }\n\n  // Helper function for dispatchOnConnect\n  function dispatchOnRequest(portId, channelName, sender,\n                             sourceExtensionId, targetExtensionId, sourceUrl,\n                             isExternal) {\n    var isSendMessage = channelName == kMessageChannel;\n    var requestEvent = null;\n    if (isSendMessage) {\n      if (chrome.runtime) {\n        requestEvent = isExternal ? chrome.runtime.onMessageExternal\n                                  : chrome.runtime.onMessage;\n      }\n    } else {\n      if (chrome.extension) {\n        requestEvent = isExternal ? chrome.extension.onRequestExternal\n                                  : chrome.extension.onRequest;\n      }\n    }\n    if (!requestEvent)\n      return false;\n    if (!requestEvent.hasListeners())\n      return false;\n    var port = createPort(portId, channelName);\n    port.onMessage.addListener(function(request) {\n      var responseCallbackPreserved = false;\n      var responseCallback = function(response) {\n        if (port) {\n          port.postMessage(response);\n          port.destroy_();\n          port = null;\n        } else {\n          // We nulled out port when sending the response, and now the page\n          // is trying to send another response for the same request.\n          handleSendRequestError(isSendMessage, responseCallbackPreserved,\n                                 sourceExtensionId, targetExtensionId);\n        }\n      };\n      // In case the extension never invokes the responseCallback, and also\n      // doesn't keep a reference to it, we need to clean up the port. Do\n      // so by attaching to the garbage collection of the responseCallback\n      // using some native hackery.\n      messagingNatives.BindToGC(responseCallback, function() {\n        if (port) {\n          port.destroy_();\n          port = null;\n        }\n      });\n      if (!isSendMessage) {\n        requestEvent.dispatch(request, sender, responseCallback);\n      } else {\n        var rv = requestEvent.dispatch(request, sender, responseCallback);\n        responseCallbackPreserved =\n            rv && rv.results && rv.results.indexOf(true) > -1;\n        if (!responseCallbackPreserved && port) {\n          // If they didn't access the response callback, they're not\n          // going to send a response, so clean up the port immediately.\n          port.destroy_();\n          port = null;\n        }\n      }\n    });\n    var eventName = (isSendMessage ?\n          (isExternal ?\n              \"runtime.onMessageExternal\" : \"runtime.onMessage\") :\n          (isExternal ?\n              \"extension.onRequestExternal\" : \"extension.onRequest\"));\n    logActivity.LogEvent(targetExtensionId,\n                         eventName,\n                         [sourceExtensionId, sourceUrl]);\n    return true;\n  }\n\n  // Called by native code when a channel has been opened to this context.\n  function dispatchOnConnect(portId,\n                             channelName,\n                             sourceTab,\n                             sourceExtensionId,\n                             targetExtensionId,\n                             sourceUrl) {\n    // Only create a new Port if someone is actually listening for a connection.\n    // In addition to being an optimization, this also fixes a bug where if 2\n    // channels were opened to and from the same process, closing one would\n    // close both.\n    var extensionId = processNatives.GetExtensionId();\n    if (targetExtensionId != extensionId)\n      return false;  // not for us\n\n    if (ports[getOppositePortId(portId)])\n      return false;  // this channel was opened by us, so ignore it\n\n    // Determine whether this is coming from another extension, so we can use\n    // the right event.\n    var isExternal = sourceExtensionId != extensionId;\n\n    var sender = {};\n    if (sourceExtensionId != '')\n      sender.id = sourceExtensionId;\n    if (sourceUrl)\n      sender.url = sourceUrl;\n    if (sourceTab)\n      sender.tab = sourceTab;\n\n    // Special case for sendRequest/onRequest and sendMessage/onMessage.\n    if (channelName == kRequestChannel || channelName == kMessageChannel) {\n      return dispatchOnRequest(portId, channelName, sender,\n                               sourceExtensionId, targetExtensionId, sourceUrl,\n                               isExternal);\n    }\n\n    var connectEvent = null;\n    if (chrome.runtime) {\n      connectEvent = isExternal ? chrome.runtime.onConnectExternal\n                                : chrome.runtime.onConnect;\n    }\n    if (!connectEvent)\n      return false;\n    if (!connectEvent.hasListeners())\n      return false;\n\n    var port = createPort(portId, channelName);\n    port.sender = sender;\n    if (processNatives.manifestVersion < 2)\n      port.tab = port.sender.tab;\n\n    var eventName = (isExternal ?\n        \"runtime.onConnectExternal\" : \"runtime.onConnect\");\n    connectEvent.dispatch(port);\n    logActivity.LogEvent(targetExtensionId,\n                         eventName,\n                         [sourceExtensionId]);\n    return true;\n  };\n\n  // Called by native code when a channel has been closed.\n  function dispatchOnDisconnect(portId, errorMessage) {\n    var port = ports[portId];\n    if (port) {\n      // Update the renderer's port bookkeeping, without notifying the browser.\n      messagingNatives.CloseChannel(portId, false);\n      if (errorMessage)\n        lastError.set('Port', errorMessage, null, chrome);\n      try {\n        port.onDisconnect.dispatch(port);\n      } finally {\n        port.destroy_();\n        lastError.clear(chrome);\n      }\n    }\n  };\n\n  // Called by native code when a message has been sent to the given port.\n  function dispatchOnMessage(msg, portId) {\n    var port = ports[portId];\n    if (port) {\n      if (msg)\n        msg = $JSON.parse(msg);\n      port.onMessage.dispatch(msg, port);\n    }\n  };\n\n  // Shared implementation used by tabs.sendMessage and runtime.sendMessage.\n  function sendMessageImpl(port, request, responseCallback) {\n    if (port.name != kNativeMessageChannel)\n      port.postMessage(request);\n\n    if (port.name == kMessageChannel && !responseCallback) {\n      // TODO(mpcomplete): Do this for the old sendRequest API too, after\n      // verifying it doesn't break anything.\n      // Go ahead and disconnect immediately if the sender is not expecting\n      // a response.\n      port.disconnect();\n      return;\n    }\n\n    // Ensure the callback exists for the older sendRequest API.\n    if (!responseCallback)\n      responseCallback = function() {};\n\n    port.onDisconnect.addListener(function() {\n      // For onDisconnects, we only notify the callback if there was an error.\n      try {\n        if (chrome.runtime && chrome.runtime.lastError)\n          responseCallback();\n      } finally {\n        port = null;\n      }\n    });\n    port.onMessage.addListener(function(response) {\n      try {\n        responseCallback(response);\n      } finally {\n        port.disconnect();\n        port = null;\n      }\n    });\n  };\n\n  function sendMessageUpdateArguments(functionName) {\n    var args = $Array.slice(arguments, 1);  // skip functionName\n    var alignedArgs = messagingUtils.alignSendMessageArguments(args);\n    if (!alignedArgs)\n      throw new Error('Invalid arguments to ' + functionName + '.');\n    return alignedArgs;\n  }\n\nexports.kRequestChannel = kRequestChannel;\nexports.kMessageChannel = kMessageChannel;\nexports.kNativeMessageChannel = kNativeMessageChannel;\nexports.Port = Port;\nexports.createPort = createPort;\nexports.sendMessageImpl = sendMessageImpl;\nexports.sendMessageUpdateArguments = sendMessageUpdateArguments;\n\n// For C++ code to call.\nexports.hasPort = hasPort;\nexports.dispatchOnConnect = dispatchOnConnect;\nexports.dispatchOnDisconnect = dispatchOnDisconnect;\nexports.dispatchOnMessage = dispatchOnMessage;\n\n})"}
],
[
{"endColumn":2,"endLine":35,"isContentScript":true,"scriptId":"149","startColumn":0,"startLine":0,"url":"extensions::messaging_utils"},{"scriptSource":"(function(require, requireNative, exports, console, $Array, $Function, $JSON, $Object, $RegExp, $String) {'use strict';// Copyright 2013 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n// Routines used to normalize arguments to messaging functions.\n\nfunction alignSendMessageArguments(args) {\n  // Align missing (optional) function arguments with the arguments that\n  // schema validation is expecting, e.g.\n  //   extension.sendRequest(req)     -> extension.sendRequest(null, req)\n  //   extension.sendRequest(req, cb) -> extension.sendRequest(null, req, cb)\n  if (!args || !args.length)\n    return null;\n  var lastArg = args.length - 1;\n\n  // responseCallback (last argument) is optional.\n  var responseCallback = null;\n  if (typeof(args[lastArg]) == 'function')\n    responseCallback = args[lastArg--];\n\n  // request (second argument) is required.\n  var request = args[lastArg--];\n\n  // targetId (first argument, extensionId in the manifest) is optional.\n  var targetId = null;\n  if (lastArg >= 0)\n    targetId = args[lastArg--];\n\n  if (lastArg != -1)\n    return null;\n  return [targetId, request, responseCallback];\n}\n\nexports.alignSendMessageArguments = alignSendMessageArguments;\n\n})"}
],
[
{"endColumn":582,"endLine":0,"isContentScript":true,"scriptId":"150","startColumn":0,"startLine":0,"url":"chrome-extension://chphlpgkkbolifaimnlloiipkdnihall/ext-onetab-concatenated-sources-contentscript.js"},{"scriptSource":"document.addEventListener(\"\\x6d\\157\\u0075\\u0073\\x65d\\u006f\\x77\\x6e\",function(jY){if(jY.button==2){var FY=jY.target;while(FY){if(FY instanceof HTMLAnchorElement){var uY=FY;var hY=FY['\\u0068\\162e\\u0066'];var ZY=FY.innerText;if(!ZY)ZY='';if(ZY.length>0){if(ZY.charAt(0)=='\\u0020')ZY=ZY.substr(1)}if(ZY=='')ZY=hY;var dY=ZY;window['\\143\\u0068\\u0072\\157\\u006d\\x65']['\\x72\\u0075\\156\\164\\x69\\x6d\\u0065']['\\x73e\\x6e\\x64\\x4de\\163\\x73\\x61\\147e'](undefined,{type:\"\\u006c\\u0069\\u006ek\\x52\\x69\\u0067h\\u0074\\103\\x6c\\x69\\x63k\",url:hY,title:dY},function(yx){});break}else {FY=FY.parentNode}}}},true)"}
],
[
{"endColumn":0,"endLine":28,"isContentScript":true,"scriptId":"151","startColumn":0,"startLine":0,"url":"chrome-extension://jabopobgcpjmedljpbcaablpmlmfcogm/wf_chrome.js"},{"scriptSource":"function _whatFont(){function t(){var a=b(\"<p>\").css(\"font-family\",\"S0m3F0n7\"),c=b(\"<p>\").css(\"font-family\",\"serif\"),d=b(\"<p>\").css(\"font-family\",\"sans-serif\"),a=new i(new p(a)),c=new i(new p(c));new i(new p(d));q=a.isEqual(c)?\"serif\":\"sans-serif\"}var b,m,n,h,r,f,o,g,i,p,u,v,q,s=[];i=function(a,c,d){d=d||{};this.data=[];if(i.isSupported)this.typeInfo=a,this.text=c||\"abcdefghijklmnopqrstuvwxyz\",this.canvas_options=b.extend(this.canvas_options,d),this.canvas=b(\"<canvas>\")[0],this.draw()};i.isSupported=\n!!document.createElement(\"canvas\").getContext;i.prototype={canvas_options:{fillStyle:\"rgb(0,0,0)\",height:50,size:\"40px\",textBaseline:\"top\",width:600},getFontOption:function(){return this.typeInfo.style+\" \"+this.typeInfo.weight+\" \"+this.canvas_options.size+\" \"+this.typeInfo.fonts},draw:function(){var a=this.canvas.getContext(\"2d\");b.each(this.canvas_options,function(c,b){a[c]=b});a.font=this.getFontOption();a.fillText(this.text,0,0);return this.data=a.getImageData(0,0,this.canvas_options.width,this.canvas_options.height).data},\nisEqual:function(a){for(var c=4*this.canvas_options.width*this.canvas_options.height,b=this.data,e=a.data,a=0;a<c;a+=1)if(b[a]!==e[a])return!1;return!0}};p=function(a){this.element=b(a);this.detect()};p.prototype={detect:function(){this.detectBasicCSS();this.variant=this.getVariant();this.stack=this.fonts.split(/,\\s*/);this.testCanvas=new i(this);this.current=this.getCurrentFont()},detectBasicCSS:function(){this.fonts=this.element.css(\"font-family\");this.weight=this.element.css(\"font-weight\");this.style=\nthis.element.css(\"font-style\");this.size=this.element.css(\"font-size\");this.lineHeight=this.element.css(\"line-height\");this.color=this.element.css(\"color\")},getFullCSS:function(){var a=[\"font-family\",\"font-weight\",\"font-style\"],c={},b;for(b=0;b<a.length;b++)c[a[b]]=this.element.css(a[b]);return c},getVariant:function(){return\"normal\"===this.weight&&\"normal\"===this.style?\"regular\":\"normal\"===this.weight?this.style:\"normal\"===this.style?this.weight:this.weight+\" \"+this.style},getCurrentFont:function(){var a=\nthis.stack.slice(0),c,d,e;for(c=0;c<this.stack.length;c++)if(d=b.extend({},this,{fonts:a[c]+\" ,serif\",stack:[a[c],\"serif\"]}),e=b.extend({},this,{fonts:a[c]+\", sans-serif\",stack:[a[c],\"sans-serif\"]}),d=new i(d),e=new i(e),d.isEqual(e)&&this.testCanvas.isEqual(d))return a[c];return q&&(c=b.extend({},this,{fonts:q,stack:[q]}),c=new i(c),this.testCanvas.isEqual(c))?q:a[0]},saveDesignToServer:function(a){var c=this;b.getJSON(n+\"/designs/create?callback=?\",{font:this.current,style:this.style,weight:this.weight,\nimage_base64:this.screenshot,url:document.location.toString()},function(b){if(b.url)c.designURL=b.url;a&&a()})}};h={STYLE_PRE:\"__whatfont_\",CSS_URL:\"http://chengyinliu.com/wf.css?ver=2.0\",init:function(){if(h.CSS_URL)h.$el=b(\"<link>\").attr({rel:\"stylesheet\",href:h.CSS_URL}).appendTo(\"head\")},restore:function(){h.$el&&h.$el.remove()},getClassName:function(a){a=\"string\"===typeof a?[a]:a;return h.STYLE_PRE+a.join(\" \"+h.STYLE_PRE)}};g={getSlugWithCSSName:{},fontData:{},services:{},init:function(){g.typekit();\ng.google();g.fontdeck()},typekit:function(){var a;b(\"script\").each(function(){var c=this.src.match(/use\\.typekit\\.(com|net)\\/(.+)\\.js/);if(c)return a=c[2],!1});a&&b.getJSON(\"https://typekit.com/api/v1/json/kits/\"+a+\"/published?callback=?\",function(a){if(!a.errors)g.services.typekit=a.kit,b.each(a.kit.families,function(a,c){b.each(c.css_names,function(a,b){g.getSlugWithCSSName[b.toLowerCase()]=c.slug});g.fontData[c.slug]=g.fontData[c.slug]||{name:c.name,services:{}};g.fontData[c.slug].services.Typekit=\n{id:c.id,url:\"http://typekit.com/fonts/\"+c.slug}})})},google:function(){b(\"link\").each(function(a,c){var d=b(c).attr(\"href\");0<=d.indexOf(\"fonts.googleapis.com/css?\")&&(d=d.match(/\\?family=([^&]*)/)[1].split(\"|\"),b.each(d,function(a,c){var b=c.split(\":\")[0],d=b.replace(/\\+/g,\" \"),f=d.replace(/ /g,\"-\").toLowerCase();g.getSlugWithCSSName[d]=f;g.fontData[f]=g.fontData[f]||{name:d,services:{}};g.fontData[f].services.Google={url:\"http://www.google.com/webfonts/family?family=\"+b}}))})},fontdeck:function(){var a=\n[],c=location.hostname;b(\"link\").each(function(c,e){var j=b(e).attr(\"href\");0<=j.indexOf(\"fontdeck.com\")&&(j=j.match(/^.*\\/(\\d+)\\.css$/))&&a.push(j[1])});b(\"script\").each(function(c,e){var j=b(e).attr(\"src\");\"undefined\"!==typeof j&&0<=j.indexOf(\"fontdeck.com\")&&(j=j.match(/^.*\\/(\\d+)\\.js$/))&&a.push(j[1])});b.each(a,function(a,e){b.getJSON(\"http://fontdeck.com/api/v1/project-info?project=\"+e+\"&domain=\"+c+\"&callback=?\",function(a){\"undefined\"!==typeof a&&\"undefined\"!==typeof a.provides&&b.each(a.provides,\nfunction(a,c){var b=c.name,d=b.replace(/ /g,\"-\").toLowerCase(),e=b.split(\" \")[0],e=c.url||\"http://fontdeck.com/search?q=\"+e;g.getSlugWithCSSName[b]=d;g.fontData[d]=g.fontData[d]||{name:b,services:{}};g.fontData[d].services.Fontdeck={url:e}})})})},getFontDataByCSSName:function(a){a=a.replace(/^\"|'/,\"\").replace(/\"|'$/,\"\");return(a=g.getSlugWithCSSName[a])&&g.fontData[a]?g.fontData[a]:null},getFontNameByCSSName:function(a){a=a.replace(/^\"|'/,\"\").replace(/\"|'$/,\"\");return(a=g.getSlugWithCSSName[a])&&\ng.fontData[a]?g.fontData[a].name:null}};u=function(){this.currentCacheId=-1;this.el=b.wfElem(\"div\",[\"tip\",\"elem\"],\"\");this.$el=b(this.el);this.init()};u.prototype={init:function(){var a=this;this.$el.appendTo(\"body\");b(\"body :visible\").on(\"mousemove.wf\",function(c){a.update(b(this),c);a.show();c.stopPropagation()});b(\"body\").on(\"mouseout.wf\",function(){a.hide()})},hide:function(){this.$el.hide()},show:function(){this.$el.show()},update:function(a,c){var b=a.data(\"wfCacheId\");this.updatePosition(c.pageY,\nc.pageX);if(this.element!==a){if(!b)b=s.length,s.push(void 0);this.element=a;this.element.data(\"wfCacheId\",b);s[b]=this.typeInfo=s[b]||new p(a);this.updateText(this.typeInfo.current)}},updatePosition:function(a,c){this.$el.css({top:a+12,left:c+12})},updateText:function(a){this.$el.text(a).css(\"display\",\"inline-block\")},remove:function(){this.$el.remove();b(\"body :visible\").off(\"mousemove.wf\");b(\"body\").off(\"mouseout.wf\")}};f={fontServiceIcons:{},init_tmpl:function(){f.tmpl=function(){var a=b('<div class=\"elem panel\"><div class=\"panel_title\"><span class=\"title_text\"></span><a class=\"close_button\" title=\"Close\">&times;</a></div><div class=\"panel_content\"><ul class=\"panel_properties\"><li><dl class=\"font_family\"><dt class=\"panel_label\">Font Family</dt><dd class=\"panel_value\"></dd></dl></li><li><div class=\"size_line_height clearfix\"><dl class=\"size section\"><dt class=\"panel_label\">Font Size</dt><dd class=\"panel_value\"></dd></dl><dl class=\"line_height\"><dt class=\"panel_label\">Line Height</dt><dd class=\"panel_value\"></dd></dl></div></li><li class=\"panel_no_border_bottom\"><dl class=\"type_info clearfix\"><dt class=\"panel_label\"></dt><dd class=\"type_preview\">AaBbCcDdEeFfGgHhIiJjKkLlMmNnOoPpQqRrSsTtUuVvWwXxYyZz</dd></dl><div class=\"font_services panel_label\" style=\"display:none;\">Font Served by </div></li></ul><div class=\"panel_tools clearfix\"><div class=\"panel_tools_left\"><div class=\"color_info\"><a title=\"Click to change color format\" class=\"color_info_sample\">&nbsp;</a><span class=\"color_info_value\"></span></div></div><div class=\"panel_tools_right\"><a href=\"https://twitter.com/share\" class=\"tweet_icon\" target=\"_blank\">Tweet</a></div></div></div></div>');\nreturn function(){return a.clone()}}()},init:function(){b(\"body :visible\").on(\"click.wf\",f.pin);f.init_tmpl();f.panels=b([]);f.fontServiceIcons.Typekit=b(\"<span>\").addClass(\"service_icon service_icon_typekit\").text(\"Typekit\");f.fontServiceIcons.Google=b(\"<span>\").addClass(\"service_icon service_icon_google\").text(\"Google Web Fonts\");f.fontServiceIcons.Fontdeck=b(\"<span>\").addClass(\"service_icon service_icon_fontdeck\").text(\"Fontdeck\")},restore:function(){b(\"body :visible\").unbind(\"click.wf\",f.pin);\nf.panels.remove()},convertClassName:function(a){a.find(\"*\").add(a).each(function(a,d){var e=b(d).attr(\"class\");if(e=\"\"===e?\"basic\":e+\" basic\")e=e.split(\" \"),b(d).attr(\"class\",h.getClassName(e))});return a},typePreview:function(a,c){b(c).find(\".type_preview\").css(a.getFullCSS());return c},fontService:function(a,c){var d=g.getFontDataByCSSName(a.current),e;e=b(\"<ul>\").addClass(\"font_service\");d?(b.each(d.services,function(a,c){b(\"<li>\").append(b(\"<a>\").append(b(f.fontServiceIcons[a]).clone()).attr(\"href\",\nc.url).attr(\"target\",\"_blank\")).appendTo(e)}),b(c).find(\".font_services\").append(e).show()):b(c).find(\".font_services\").hide();return c},fontFam:function(a,c){var d=a.fonts.replace(/;/,\"\").split(/,\\s*/),e=a.current,j=!1,l;a.fonts.replace(/;/,\"\").split(/,\\s*/);for(l=0;l<d.length;l+=1)if(d[l]!==e)d[l]=\"<span class='fniu'>\"+d[l]+\"</span>\";else{d[l]=\"<span class='fiu'>\"+d[l]+\"</span>\";j=!0;break}d=d.join(\", \")+\";\";j||(d+=\" <span class='.fiu'>\"+e+\"</span>\");d=\"<div class=\"+h.getClassName(\"fontfamily_list\")+\n\">\"+d+\"</div>\";b(c).find(\".font_family>dd\").html(d);return c},sizeLineHeight:function(a,c){var d=a.size,e=a.lineHeight;b(c).find(\".size>dd\").text(d);b(c).find(\".line_height>dd\").text(e);return c},color:function(a,c){var d=a.color,e=b(c).find(\".color_info_sample\"),j=b(c).find(\".color_info_value\"),l,f,g;-1!==d.indexOf(\"rgba\")?b(c).find(\".color_info\").hide():(l=d.match(/^rgb\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*\\)$/),f=parseInt(l[1],10).toString(16),g=parseInt(l[2],10).toString(16),l=parseInt(l[3],\n10).toString(16),f=1===f.length?\"0\"+f:f,g=1===g.length?\"0\"+g:g,l=1===l.length?\"0\"+l:l,f=[d,\"#\"+f+g+l],e.css(\"background-color\",d).click(function(a,c,b){return function(d){c=(c+1)%a.length;b.text(a[c]);d.preventDefault();return!1}}(f,0,j)).click())},tweet:function(a,c){var d=b(c).find(\".tweet_icon\"),e=a.current,j=g.getFontNameByCSSName(e)||e;d.click(function(){var b=d.attr(\"href\");f.takeScreenshot(c.e,c,function(){b+=\"?text=\"+encodeURIComponent(\"I like this typography design with \"+j+\".\")+\"&url=\"+\nencodeURIComponent(a.designURL||window.location.href)+\"&via=What_Font\";window.open(b,\"\",\"height=430,width=550\")});return!1})},panelContent:function(a,c){b(\"typePreview,fontService,fontFam,sizeLineHeight,color,tweet\".split(\",\")).each(function(b,e){f[e](a,c)})},panelTitle:function(a,c){var d=a.current,d=(g.getFontNameByCSSName(d)||d)+\" - \"+a.variant;b(c).find(\".title_text\").html(d).css(a.getFullCSS());(function(a){b(a).find(\".close_button\").click(function(c){b(a).remove();c.stopPropagation();return!1})})(c);\nreturn c},get:function(a){var c=f.tmpl(),a=new p(a);f.panelTitle(a,c);f.panelContent(a,c);f.convertClassName(c);c.typeInfo=a;b(c).click(function(){b(this).find(\"*\").css(\"-webkit-animation\",\"none\");b(this).detach();b(this).appendTo(\"html\")});return c},takeScreenshot:function(a,c,b){c.typeInfo.designURL?b(a,c):k.takeScreenshotAroundPoint(function(e){e?(c.screenshot=e,c.typeInfo.screenshot=e,c.typeInfo.saveDesignToServer(function(){b(a,c)})):b(a,c)},a.pageX,a.pageY,480,320)},showPanel:function(a,c){b(c).css({top:a.pageY+\n12,left:a.pageX-13}).appendTo(\"html\");f.panels=f.panels.add(c)},pin:function(a){var c;v.hide();c=f.get(this);c.e=a;f.showPanel(a,c);a.stopPropagation();a.preventDefault()},hideAll:function(){b(f.panels).hide()},showAll:function(){b(f.panels).find(\"*\").css(\"-webkit-animation\",\"none\");b(f.panels).show()}};r={TOOLBAR:null,init:function(){var a=b.wfElem(\"div\",\"exit\",\"Exit WhatFont\");b.wfElem(\"div\",\"help\",\"<strong>Hover</strong> to identify<br /><strong>Click</strong> to pin a detail panel\");r.TOOLBAR=\nb(\"<div>\").addClass(h.getClassName([\"elem\",\"control\"])).append(a).appendTo(\"body\");b(a).click(function(){o.restore()})},restore:function(){b(r.TOOLBAR).remove()}};o={shortcut:function(a){if(27===(a.keyCode||a.which))o.restore(),a.stopPropagation()},restore:function(){b(\"body :visible\").unbind(\"mousemove\",o.updateTip);b(\"body :visible\").unbind(\"click\",o.pinPanel);r.restore();v.remove();f.restore();h.restore();b(\"body\").unbind(\"keydown\",o.shortcut);b(window).unbind(\"resize.whatfont\");window._WHATFONT=\n!1},init:function(){!b&&jQuery&&(b=jQuery);if(\"undefined\"!==typeof window._WHATFONT&&window._WHATFONT||!b)return!1;window._WHATFONT=!0;b.wfElem=function(a,c,d,e){var f=b(\"<\"+a+\">\"),c=c||[],d=d||\"\",c=\"string\"===typeof c?[c]:c;c.push(\"basic\");f.addClass(h.getClassName(c));\"string\"===typeof d?f.html(d):d.constructor===Array?b.map(d,function(a){return f.append(a)}):f.append(d);\"undefined\"!==typeof e&&f.attr(e);return f[0]};t();h.init();v=new u;f.init();r.init();g.init();k.fullScreenshot=null;b(window).bind(\"resize.whatfont\",\nfunction(){k.fullScreenshot=null});b(\"body\").keydown(o.shortcut)}};var k={captureAll:!0,format:\"image/jpeg\",quality:0.7,capturer:function(a,c){var c=c||{},d,e;d=b(window).scrollTop();e=b(window).scrollLeft();if(i.isSupported&&m)try{b(window).scrollTop(0),b(window).scrollLeft(0),m([document.body],{onrendered:function(f){b(window).scrollTop(d);b(window).scrollLeft(e);k.fullScreenshot=f;a(f.toDataURL(c.format||k.format,c.quality||k.quality))},proxy:void 0})}catch(f){b(window).scrollTop(d),b(window).scrollLeft(e),\na()}else a(),b(window).scrollTop(d),b(window).scrollLeft(e)},dataURLToCanvas:function(a,c){try{var d=b(\"<canvas>\")[0],e=d.getContext(\"2d\"),f=new Image;f.onload=function(){e.height=f.height;e.width=f.width;e.drawImage(f,0,0);c(d)};f.src=a}catch(g){c(null)}},takeFullScreenshot:function(a){if(k.fullScreenshot)return a(k.fullScreenshot);this.capturer(function(c){k.fullScreenshot=c;a(c)},{quality:k.quality,format:k.format})},takePartialScreenshot:function(a){f.hideAll();window.setTimeout(function(){k.capturer(function(c){f.showAll();\na(c)})},0)},takeCroppedScreenshot:function(a,c,d,e,f,g){var h,i,m;h=k.captureAll?k.takeFullScreenshot:k.takePartialScreenshot;void 0!==c&&(i=e-c,m=f-d);g=g||{};h(function(e){var f;if(!e)return a();void 0===c?a(e):(f=new Image,f.src=e,f.onload=function(){var e,j;e=b(\"<canvas>\")[0];e.width=i;e.height=m;j=e.getContext(\"2d\");j.fillStyle=\"rgba(255,255,255,1)\";j.fillRect(0,0,i,m);j.drawImage(f,c,d,i,m,0,0,i,m);e=e.toDataURL(g.format||k.format,g.quality||k.quality);a(e)});return!0},g)},takeScreenshotAroundPoint:function(a,\nc,d,e,f,g){var c=c-e/2,e=c+e,d=d-f/2,f=d+f,h,i;k.captureAll||(h=b(window).scrollTop(),i=b(window).scrollLeft(),c-=i,e-=i,d-=h,f-=h);0>c&&(e-=c,c=0);0>d&&(f-=d,d=0);k.takeCroppedScreenshot(a,c,d,e,f,g)}};return{setJQuery:function(a){b=a},setHTML2Canvas:function(a){m=a},setScreenshot:function(a){k=b.extend(k,a)},setAPIURL:function(a){n=a},setCSSURL:function(a){h.CSS_URL=a},getVer:function(){return\"2.0\"},init:function(){o.init()},restore:function(){o.restore()}}}\n(function(){function t(){if(\"undefined\"!==typeof _WHATFONT&&_WHATFONT)return b.restore(),!1;wf$.getJSON=function(b,n,h){h||(h=n,n=void 0);chrome.extension.sendRequest({action:\"getJSON\",url:b,data:n},h)};b.setJQuery(wf$);b.setCSSURL(chrome.extension.getURL(\"wf.css\"));b.setAPIURL(\"http://www.whatfonttool.com/api/v1\");b.setScreenshot({capturer:function(b,n){chrome.extension.sendRequest({action:\"capture\",options:n||{format:\"image/png\"}},b)},captureAll:!1,format:\"image/jpeg\",quality:0.9});b.init();return!0}\nvar b=b||_whatFont();chrome.extension.onRequest.addListener(function(b,n,h){\"initOrRestore\"===b.action&&h(t())})})();\n"}
],
[
{"endColumn":2,"endLine":115,"isContentScript":true,"scriptId":"152","startColumn":0,"startLine":0,"url":"extensions::extension"},{"scriptSource":"(function(require, requireNative, exports, console, $Array, $Function, $JSON, $Object, $RegExp, $String) {'use strict';// Copyright (c) 2012 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n// Custom binding for the extension API.\n\nvar binding = require('binding').Binding.create('extension');\n\nvar extensionNatives = requireNative('extension');\nvar GetExtensionViews = extensionNatives.GetExtensionViews;\nvar messaging = require('messaging');\nvar runtimeNatives = requireNative('runtime');\nvar OpenChannelToExtension = runtimeNatives.OpenChannelToExtension;\nvar OpenChannelToNativeApp = runtimeNatives.OpenChannelToNativeApp;\nvar chrome = requireNative('chrome').GetChrome();\n\nvar inIncognitoContext = requireNative('process').InIncognitoContext();\nvar sendRequestIsDisabled = requireNative('process').IsSendRequestDisabled();\nvar contextType = requireNative('process').GetContextType();\nvar manifestVersion = requireNative('process').GetManifestVersion();\n\n// This should match chrome.windows.WINDOW_ID_NONE.\n//\n// We can't use chrome.windows.WINDOW_ID_NONE directly because the\n// chrome.windows API won't exist unless this extension has permission for it;\n// which may not be the case.\nvar WINDOW_ID_NONE = -1;\n\nbinding.registerCustomHook(function(bindingsAPI, extensionId) {\n  var extension = bindingsAPI.compiledApi;\n  if (manifestVersion < 2) {\n    chrome.self = extension;\n    extension.inIncognitoTab = inIncognitoContext;\n  }\n  extension.inIncognitoContext = inIncognitoContext;\n\n  var apiFunctions = bindingsAPI.apiFunctions;\n\n  apiFunctions.setHandleRequest('getViews', function(properties) {\n    var windowId = WINDOW_ID_NONE;\n    var type = 'ALL';\n    if (properties) {\n      if (properties.type != null) {\n        type = properties.type;\n      }\n      if (properties.windowId != null) {\n        windowId = properties.windowId;\n      }\n    }\n    return GetExtensionViews(windowId, type);\n  });\n\n  apiFunctions.setHandleRequest('getBackgroundPage', function() {\n    return GetExtensionViews(-1, 'BACKGROUND')[0] || null;\n  });\n\n  apiFunctions.setHandleRequest('getExtensionTabs', function(windowId) {\n    if (windowId == null)\n      windowId = WINDOW_ID_NONE;\n    return GetExtensionViews(windowId, 'TAB');\n  });\n\n  apiFunctions.setHandleRequest('getURL', function(path) {\n    path = String(path);\n    if (!path.length || path[0] != '/')\n      path = '/' + path;\n    return 'chrome-extension://' + extensionId + path;\n  });\n\n  // Alias several messaging deprecated APIs to their runtime counterparts.\n  var mayNeedAlias = [\n    // Types\n    'Port',\n    // Functions\n    'connect', 'sendMessage', 'connectNative', 'sendNativeMessage',\n    // Events\n    'onConnect', 'onConnectExternal', 'onMessage', 'onMessageExternal'\n  ];\n  $Array.forEach(mayNeedAlias, function(alias) {\n    // Checking existence isn't enough since some functions are disabled via\n    // getters that throw exceptions. Assume that any getter is such a function.\n    if (chrome.runtime &&\n        $Object.hasOwnProperty(chrome.runtime, alias) &&\n        chrome.runtime.__lookupGetter__(alias) === undefined) {\n      extension[alias] = chrome.runtime[alias];\n    }\n  });\n\n  apiFunctions.setUpdateArgumentsPreValidate('sendRequest',\n      $Function.bind(messaging.sendMessageUpdateArguments,\n                     null, 'sendRequest'));\n\n  apiFunctions.setHandleRequest('sendRequest',\n                                function(targetId, request, responseCallback) {\n    if (sendRequestIsDisabled)\n      throw new Error(sendRequestIsDisabled);\n    var port = chrome.runtime.connect(targetId || extensionId,\n                                      {name: messaging.kRequestChannel});\n    messaging.sendMessageImpl(port, request, responseCallback);\n  });\n\n  if (sendRequestIsDisabled) {\n    extension.onRequest.addListener = function() {\n      throw new Error(sendRequestIsDisabled);\n    };\n    if (contextType == 'BLESSED_EXTENSION') {\n      extension.onRequestExternal.addListener = function() {\n        throw new Error(sendRequestIsDisabled);\n      };\n    }\n  }\n});\n\nexports.binding = binding.generate();\n\n})"}
],
[
{"endColumn":2,"endLine":435,"isContentScript":true,"scriptId":"153","startColumn":0,"startLine":0,"url":"extensions::binding"},{"scriptSource":"(function(require, requireNative, exports, console, $Array, $Function, $JSON, $Object, $RegExp, $String) {'use strict';// Copyright (c) 2012 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nvar Event = require('event_bindings').Event;\nvar forEach = require('utils').forEach;\nvar GetAvailability = requireNative('v8_context').GetAvailability;\nvar logActivity = requireNative('activityLogger');\nvar logging = requireNative('logging');\nvar process = requireNative('process');\nvar schemaRegistry = requireNative('schema_registry');\nvar schemaUtils = require('schemaUtils');\nvar utils = require('utils');\nvar sendRequestHandler = require('sendRequest');\n\nvar contextType = process.GetContextType();\nvar extensionId = process.GetExtensionId();\nvar manifestVersion = process.GetManifestVersion();\nvar sendRequest = sendRequestHandler.sendRequest;\n\n// Stores the name and definition of each API function, with methods to\n// modify their behaviour (such as a custom way to handle requests to the\n// API, a custom callback, etc).\nfunction APIFunctions(namespace) {\n  this.apiFunctions_ = {};\n  this.unavailableApiFunctions_ = {};\n  this.namespace = namespace;\n}\n\nAPIFunctions.prototype.register = function(apiName, apiFunction) {\n  this.apiFunctions_[apiName] = apiFunction;\n};\n\n// Registers a function as existing but not available, meaning that calls to\n// the set* methods that reference this function should be ignored rather\n// than throwing Errors.\nAPIFunctions.prototype.registerUnavailable = function(apiName) {\n  this.unavailableApiFunctions_[apiName] = apiName;\n};\n\nAPIFunctions.prototype.setHook_ =\n    function(apiName, propertyName, customizedFunction) {\n  if ($Object.hasOwnProperty(this.unavailableApiFunctions_, apiName))\n    return;\n  if (!$Object.hasOwnProperty(this.apiFunctions_, apiName))\n    throw new Error('Tried to set hook for unknown API \"' + apiName + '\"');\n  this.apiFunctions_[apiName][propertyName] = customizedFunction;\n};\n\nAPIFunctions.prototype.setHandleRequest =\n    function(apiName, customizedFunction) {\n  var prefix = this.namespace;\n  return this.setHook_(apiName, 'handleRequest',\n    function() {\n      var ret = $Function.apply(customizedFunction, this, arguments);\n      // Logs API calls to the Activity Log if it doesn't go through an\n      // ExtensionFunction.\n      if (!sendRequestHandler.getCalledSendRequest())\n        logActivity.LogAPICall(extensionId, prefix + \".\" + apiName,\n            $Array.slice(arguments));\n      return ret;\n    });\n};\n\nAPIFunctions.prototype.setUpdateArgumentsPostValidate =\n    function(apiName, customizedFunction) {\n  return this.setHook_(\n    apiName, 'updateArgumentsPostValidate', customizedFunction);\n};\n\nAPIFunctions.prototype.setUpdateArgumentsPreValidate =\n    function(apiName, customizedFunction) {\n  return this.setHook_(\n    apiName, 'updateArgumentsPreValidate', customizedFunction);\n};\n\nAPIFunctions.prototype.setCustomCallback =\n    function(apiName, customizedFunction) {\n  return this.setHook_(apiName, 'customCallback', customizedFunction);\n};\n\nfunction CustomBindingsObject() {\n}\n\nCustomBindingsObject.prototype.setSchema = function(schema) {\n  // The functions in the schema are in list form, so we move them into a\n  // dictionary for easier access.\n  var self = this;\n  self.functionSchemas = {};\n  $Array.forEach(schema.functions, function(f) {\n    self.functionSchemas[f.name] = {\n      name: f.name,\n      definition: f\n    }\n  });\n};\n\n// Get the platform from navigator.appVersion.\nfunction getPlatform() {\n  var platforms = [\n    [/CrOS Touch/, \"chromeos touch\"],\n    [/CrOS/, \"chromeos\"],\n    [/Linux/, \"linux\"],\n    [/Mac/, \"mac\"],\n    [/Win/, \"win\"],\n  ];\n\n  for (var i = 0; i < platforms.length; i++) {\n    if ($RegExp.test(platforms[i][0], navigator.appVersion)) {\n      return platforms[i][1];\n    }\n  }\n  return \"unknown\";\n}\n\nfunction isPlatformSupported(schemaNode, platform) {\n  return !schemaNode.platforms ||\n      schemaNode.platforms.indexOf(platform) > -1;\n}\n\nfunction isManifestVersionSupported(schemaNode, manifestVersion) {\n  return !schemaNode.maximumManifestVersion ||\n      manifestVersion <= schemaNode.maximumManifestVersion;\n}\n\nfunction isSchemaNodeSupported(schemaNode, platform, manifestVersion) {\n  return isPlatformSupported(schemaNode, platform) &&\n      isManifestVersionSupported(schemaNode, manifestVersion);\n}\n\nfunction createCustomType(type) {\n  var jsModuleName = type.js_module;\n  logging.CHECK(jsModuleName, 'Custom type ' + type.id +\n                ' has no \"js_module\" property.');\n  var jsModule = require(jsModuleName);\n  logging.CHECK(jsModule, 'No module ' + jsModuleName + ' found for ' +\n                type.id + '.');\n  var customType = jsModule[jsModuleName];\n  logging.CHECK(customType, jsModuleName + ' must export itself.');\n  customType.prototype = new CustomBindingsObject();\n  customType.prototype.setSchema(type);\n  return customType;\n}\n\nvar platform = getPlatform();\n\nfunction Binding(schema) {\n  this.schema_ = schema;\n  this.apiFunctions_ = new APIFunctions(schema.namespace);\n  this.customEvent_ = null;\n  this.customHooks_ = [];\n};\n\nBinding.create = function(apiName) {\n  return new Binding(schemaRegistry.GetSchema(apiName));\n};\n\nBinding.prototype = {\n  // The API through which the ${api_name}_custom_bindings.js files customize\n  // their API bindings beyond what can be generated.\n  //\n  // There are 2 types of customizations available: those which are required in\n  // order to do the schema generation (registerCustomEvent and\n  // registerCustomType), and those which can only run after the bindings have\n  // been generated (registerCustomHook).\n\n  // Registers a custom event type for the API identified by |namespace|.\n  // |event| is the event's constructor.\n  registerCustomEvent: function(event) {\n    this.customEvent_ = event;\n  },\n\n  // Registers a function |hook| to run after the schema for all APIs has been\n  // generated.  The hook is passed as its first argument an \"API\" object to\n  // interact with, and second the current extension ID. See where\n  // |customHooks| is used.\n  registerCustomHook: function(fn) {\n    $Array.push(this.customHooks_, fn);\n  },\n\n  // TODO(kalman/cduvall): Refactor this so |runHooks_| is not needed.\n  runHooks_: function(api) {\n    $Array.forEach(this.customHooks_, function(hook) {\n      if (!isSchemaNodeSupported(this.schema_, platform, manifestVersion))\n        return;\n\n      if (!hook)\n        return;\n\n      hook({\n        apiFunctions: this.apiFunctions_,\n        schema: this.schema_,\n        compiledApi: api\n      }, extensionId, contextType);\n    }, this);\n  },\n\n  // Generates the bindings from |this.schema_| and integrates any custom\n  // bindings that might be present.\n  generate: function() {\n    var schema = this.schema_;\n\n    function shouldCheckUnprivileged() {\n      var shouldCheck = 'unprivileged' in schema;\n      if (shouldCheck)\n        return shouldCheck;\n\n      $Array.forEach(['functions', 'events'], function(type) {\n        if ($Object.hasOwnProperty(schema, type)) {\n          $Array.forEach(schema[type], function(node) {\n            if ('unprivileged' in node)\n              shouldCheck = true;\n          });\n        }\n      });\n      if (shouldCheck)\n        return shouldCheck;\n\n      for (var property in schema.properties) {\n        if ($Object.hasOwnProperty(schema, property) &&\n            'unprivileged' in schema.properties[property]) {\n          shouldCheck = true;\n          break;\n        }\n      }\n      return shouldCheck;\n    }\n    var checkUnprivileged = shouldCheckUnprivileged();\n\n    // TODO(kalman/cduvall): Make GetAvailability handle this, then delete the\n    // supporting code.\n    if (!isSchemaNodeSupported(schema, platform, manifestVersion)) {\n      console.error('chrome.' + schema.namespace + ' is not supported on ' +\n                    'this platform or manifest version');\n      return undefined;\n    }\n\n    var mod = {};\n\n    var namespaces = $String.split(schema.namespace, '.');\n    for (var index = 0, name; name = namespaces[index]; index++) {\n      mod[name] = mod[name] || {};\n      mod = mod[name];\n    }\n\n    // Add types to global schemaValidator, the types we depend on from other\n    // namespaces will be added as needed.\n    if (schema.types) {\n      $Array.forEach(schema.types, function(t) {\n        if (!isSchemaNodeSupported(t, platform, manifestVersion))\n          return;\n        schemaUtils.schemaValidator.addTypes(t);\n      }, this);\n    }\n\n    // TODO(cduvall): Take out when all APIs have been converted to features.\n    // Returns whether access to the content of a schema should be denied,\n    // based on the presence of \"unprivileged\" and whether this is an\n    // extension process (versus e.g. a content script).\n    function isSchemaAccessAllowed(itemSchema) {\n      return (contextType == 'BLESSED_EXTENSION') ||\n             schema.unprivileged ||\n             itemSchema.unprivileged;\n    };\n\n    // Setup Functions.\n    if (schema.functions) {\n      $Array.forEach(schema.functions, function(functionDef) {\n        if (functionDef.name in mod) {\n          throw new Error('Function ' + functionDef.name +\n                          ' already defined in ' + schema.namespace);\n        }\n\n        if (!isSchemaNodeSupported(functionDef, platform, manifestVersion)) {\n          this.apiFunctions_.registerUnavailable(functionDef.name);\n          return;\n        }\n\n        var apiFunction = {};\n        apiFunction.definition = functionDef;\n        apiFunction.name = schema.namespace + '.' + functionDef.name;\n\n        if (!GetAvailability(apiFunction.name).is_available ||\n            (checkUnprivileged && !isSchemaAccessAllowed(functionDef))) {\n          this.apiFunctions_.registerUnavailable(functionDef.name);\n          return;\n        }\n\n        // TODO(aa): It would be best to run this in a unit test, but in order\n        // to do that we would need to better factor this code so that it\n        // doesn't depend on so much v8::Extension machinery.\n        if (logging.DCHECK_IS_ON() &&\n            schemaUtils.isFunctionSignatureAmbiguous(apiFunction.definition)) {\n          throw new Error(\n              apiFunction.name + ' has ambiguous optional arguments. ' +\n              'To implement custom disambiguation logic, add ' +\n              '\"allowAmbiguousOptionalArguments\" to the function\\'s schema.');\n        }\n\n        this.apiFunctions_.register(functionDef.name, apiFunction);\n\n        mod[functionDef.name] = $Function.bind(function() {\n          var args = $Array.slice(arguments);\n          if (this.updateArgumentsPreValidate)\n            args = $Function.apply(this.updateArgumentsPreValidate, this, args);\n\n          args = schemaUtils.normalizeArgumentsAndValidate(args, this);\n          if (this.updateArgumentsPostValidate) {\n            args = $Function.apply(this.updateArgumentsPostValidate,\n                                   this,\n                                   args);\n          }\n\n          sendRequestHandler.clearCalledSendRequest();\n\n          var retval;\n          if (this.handleRequest) {\n            retval = $Function.apply(this.handleRequest, this, args);\n          } else {\n            var optArgs = {\n              customCallback: this.customCallback\n            };\n            retval = sendRequest(this.name, args,\n                                 this.definition.parameters,\n                                 optArgs);\n          }\n          sendRequestHandler.clearCalledSendRequest();\n\n          // Validate return value if in sanity check mode.\n          if (logging.DCHECK_IS_ON() && this.definition.returns)\n            schemaUtils.validate([retval], [this.definition.returns]);\n          return retval;\n        }, apiFunction);\n      }, this);\n    }\n\n    // Setup Events\n    if (schema.events) {\n      $Array.forEach(schema.events, function(eventDef) {\n        if (eventDef.name in mod) {\n          throw new Error('Event ' + eventDef.name +\n                          ' already defined in ' + schema.namespace);\n        }\n        if (!isSchemaNodeSupported(eventDef, platform, manifestVersion))\n          return;\n\n        var eventName = schema.namespace + \".\" + eventDef.name;\n        if (!GetAvailability(eventName).is_available ||\n            (checkUnprivileged && !isSchemaAccessAllowed(eventDef))) {\n          return;\n        }\n\n        var options = eventDef.options || {};\n        if (eventDef.filters && eventDef.filters.length > 0)\n          options.supportsFilters = true;\n\n        var parameters = eventDef.parameters;\n        if (this.customEvent_) {\n          mod[eventDef.name] = new this.customEvent_(\n              eventName, parameters, eventDef.extraParameters, options);\n        } else {\n          mod[eventDef.name] = new Event(eventName, parameters, options);\n        }\n      }, this);\n    }\n\n    function addProperties(m, parentDef) {\n      var properties = parentDef.properties;\n      if (!properties)\n        return;\n\n      forEach(properties, function(propertyName, propertyDef) {\n        if (propertyName in m)\n          return;  // TODO(kalman): be strict like functions/events somehow.\n        if (!isSchemaNodeSupported(propertyDef, platform, manifestVersion))\n          return;\n        if (!GetAvailability(schema.namespace + \".\" +\n              propertyName).is_available ||\n            (checkUnprivileged && !isSchemaAccessAllowed(propertyDef))) {\n          return;\n        }\n\n        var value = propertyDef.value;\n        if (value) {\n          // Values may just have raw types as defined in the JSON, such\n          // as \"WINDOW_ID_NONE\": { \"value\": -1 }. We handle this here.\n          // TODO(kalman): enforce that things with a \"value\" property can't\n          // define their own types.\n          var type = propertyDef.type || typeof(value);\n          if (type === 'integer' || type === 'number') {\n            value = parseInt(value);\n          } else if (type === 'boolean') {\n            value = value === 'true';\n          } else if (propertyDef['$ref']) {\n            var ref = propertyDef['$ref'];\n            var type = utils.loadTypeSchema(propertyDef['$ref'], schema);\n            logging.CHECK(type, 'Schema for $ref type ' + ref + ' not found');\n            var constructor = createCustomType(type);\n            var args = value;\n            // For an object propertyDef, |value| is an array of constructor\n            // arguments, but we want to pass the arguments directly (i.e.\n            // not as an array), so we have to fake calling |new| on the\n            // constructor.\n            value = { __proto__: constructor.prototype };\n            $Function.apply(constructor, value, args);\n            // Recursively add properties.\n            addProperties(value, propertyDef);\n          } else if (type === 'object') {\n            // Recursively add properties.\n            addProperties(value, propertyDef);\n          } else if (type !== 'string') {\n            throw new Error('NOT IMPLEMENTED (extension_api.json error): ' +\n                'Cannot parse values for type \"' + type + '\"');\n          }\n          m[propertyName] = value;\n        }\n      });\n    };\n\n    addProperties(mod, schema);\n\n    var availability = GetAvailability(schema.namespace);\n    if (!availability.is_available && $Object.keys(mod).length == 0) {\n      console.error('chrome.' + schema.namespace + ' is not available: ' +\n                        availability.message);\n      return;\n    }\n\n    this.runHooks_(mod);\n    return mod;\n  }\n};\n\nexports.Binding = Binding;\n\n})"}
],
[
{"endColumn":2,"endLine":500,"isContentScript":true,"scriptId":"154","startColumn":0,"startLine":0,"url":"extensions::event_bindings"},{"scriptSource":"(function(require, requireNative, exports, console, $Array, $Function, $JSON, $Object, $RegExp, $String) {'use strict';// Copyright (c) 2012 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n  var eventNatives = requireNative('event_natives');\n  var logging = requireNative('logging');\n  var schemaRegistry = requireNative('schema_registry');\n  var sendRequest = require('sendRequest').sendRequest;\n  var utils = require('utils');\n  var validate = require('schemaUtils').validate;\n  var unloadEvent = require('unload_event');\n\n  // Schemas for the rule-style functions on the events API that\n  // only need to be generated occasionally, so populate them lazily.\n  var ruleFunctionSchemas = {\n    // These values are set lazily:\n    // addRules: {},\n    // getRules: {},\n    // removeRules: {}\n  };\n\n  // This function ensures that |ruleFunctionSchemas| is populated.\n  function ensureRuleSchemasLoaded() {\n    if (ruleFunctionSchemas.addRules)\n      return;\n    var eventsSchema = schemaRegistry.GetSchema(\"events\");\n    var eventType = utils.lookup(eventsSchema.types, 'id', 'events.Event');\n\n    ruleFunctionSchemas.addRules =\n        utils.lookup(eventType.functions, 'name', 'addRules');\n    ruleFunctionSchemas.getRules =\n        utils.lookup(eventType.functions, 'name', 'getRules');\n    ruleFunctionSchemas.removeRules =\n        utils.lookup(eventType.functions, 'name', 'removeRules');\n  }\n\n  // A map of event names to the event object that is registered to that name.\n  var attachedNamedEvents = {};\n\n  // An array of all attached event objects, used for detaching on unload.\n  var allAttachedEvents = [];\n\n  // A map of functions that massage event arguments before they are dispatched.\n  // Key is event name, value is function.\n  var eventArgumentMassagers = {};\n\n  // An attachment strategy for events that aren't attached to the browser.\n  // This applies to events with the \"unmanaged\" option and events without\n  // names.\n  var NullAttachmentStrategy = function(event) {\n    this.event_ = event;\n  };\n  NullAttachmentStrategy.prototype.onAddedListener =\n      function(listener) {\n  };\n  NullAttachmentStrategy.prototype.onRemovedListener =\n      function(listener) {\n  };\n  NullAttachmentStrategy.prototype.detach = function(manual) {\n  };\n  NullAttachmentStrategy.prototype.getListenersByIDs = function(ids) {\n    // |ids| is for filtered events only.\n    return this.event_.listeners_;\n  };\n\n  // Handles adding/removing/dispatching listeners for unfiltered events.\n  var UnfilteredAttachmentStrategy = function(event) {\n    this.event_ = event;\n  };\n\n  UnfilteredAttachmentStrategy.prototype.onAddedListener =\n      function(listener) {\n    // Only attach / detach on the first / last listener removed.\n    if (this.event_.listeners_.length == 0)\n      eventNatives.AttachEvent(this.event_.eventName_);\n  };\n\n  UnfilteredAttachmentStrategy.prototype.onRemovedListener =\n      function(listener) {\n    if (this.event_.listeners_.length == 0)\n      this.detach(true);\n  };\n\n  UnfilteredAttachmentStrategy.prototype.detach = function(manual) {\n    eventNatives.DetachEvent(this.event_.eventName_, manual);\n  };\n\n  UnfilteredAttachmentStrategy.prototype.getListenersByIDs = function(ids) {\n    // |ids| is for filtered events only.\n    return this.event_.listeners_;\n  };\n\n  var FilteredAttachmentStrategy = function(event) {\n    this.event_ = event;\n    this.listenerMap_ = {};\n  };\n\n  FilteredAttachmentStrategy.idToEventMap = {};\n\n  FilteredAttachmentStrategy.prototype.onAddedListener = function(listener) {\n    var id = eventNatives.AttachFilteredEvent(this.event_.eventName_,\n                                              listener.filters || {});\n    if (id == -1)\n      throw new Error(\"Can't add listener\");\n    listener.id = id;\n    this.listenerMap_[id] = listener;\n    FilteredAttachmentStrategy.idToEventMap[id] = this.event_;\n  };\n\n  FilteredAttachmentStrategy.prototype.onRemovedListener = function(listener) {\n    this.detachListener(listener, true);\n  };\n\n  FilteredAttachmentStrategy.prototype.detachListener =\n      function(listener, manual) {\n    if (listener.id == undefined)\n      throw new Error(\"listener.id undefined - '\" + listener + \"'\");\n    var id = listener.id;\n    delete this.listenerMap_[id];\n    delete FilteredAttachmentStrategy.idToEventMap[id];\n    eventNatives.DetachFilteredEvent(id, manual);\n  };\n\n  FilteredAttachmentStrategy.prototype.detach = function(manual) {\n    for (var i in this.listenerMap_)\n      this.detachListener(this.listenerMap_[i], manual);\n  };\n\n  FilteredAttachmentStrategy.prototype.getListenersByIDs = function(ids) {\n    var result = [];\n    for (var i = 0; i < ids.length; i++)\n      $Array.push(result, this.listenerMap_[ids[i]]);\n    return result;\n  };\n\n  function parseEventOptions(opt_eventOptions) {\n    function merge(dest, src) {\n      for (var k in src) {\n        if (!$Object.hasOwnProperty(dest, k)) {\n          dest[k] = src[k];\n        }\n      }\n    }\n\n    var options = opt_eventOptions || {};\n    merge(options, {\n      // Event supports adding listeners with filters (\"filtered events\"), for\n      // example as used in the webNavigation API.\n      //\n      // event.addListener(listener, [filter1, filter2]);\n      supportsFilters: false,\n\n      // Events supports vanilla events. Most APIs use these.\n      //\n      // event.addListener(listener);\n      supportsListeners: true,\n\n      // Event supports adding rules (\"declarative events\") rather than\n      // listeners, for example as used in the declarativeWebRequest API.\n      //\n      // event.addRules([rule1, rule2]);\n      supportsRules: false,\n\n      // Event is unmanaged in that the browser has no knowledge of its\n      // existence; it's never invoked, doesn't keep the renderer alive, and\n      // the bindings system has no knowledge of it.\n      //\n      // Both events created by user code (new chrome.Event()) and messaging\n      // events are unmanaged, though in the latter case the browser *does*\n      // interact indirectly with them via IPCs written by hand.\n      unmanaged: false,\n    });\n    return options;\n  };\n\n  // Event object.  If opt_eventName is provided, this object represents\n  // the unique instance of that named event, and dispatching an event\n  // with that name will route through this object's listeners. Note that\n  // opt_eventName is required for events that support rules.\n  //\n  // Example:\n  //   var Event = require('event_bindings').Event;\n  //   chrome.tabs.onChanged = new Event(\"tab-changed\");\n  //   chrome.tabs.onChanged.addListener(function(data) { alert(data); });\n  //   Event.dispatch(\"tab-changed\", \"hi\");\n  // will result in an alert dialog that says 'hi'.\n  //\n  // If opt_eventOptions exists, it is a dictionary that contains the boolean\n  // entries \"supportsListeners\" and \"supportsRules\".\n  var Event = function(opt_eventName, opt_argSchemas, opt_eventOptions) {\n    this.eventName_ = opt_eventName;\n    this.argSchemas_ = opt_argSchemas;\n    this.listeners_ = [];\n    this.eventOptions_ = parseEventOptions(opt_eventOptions);\n\n    if (!this.eventName_) {\n      if (this.eventOptions_.supportsRules)\n        throw new Error(\"Events that support rules require an event name.\");\n      // Events without names cannot be managed by the browser by definition\n      // (the browser has no way of identifying them).\n      this.eventOptions_.unmanaged = true;\n    }\n\n    // Track whether the event has been destroyed to help track down the cause\n    // of http://crbug.com/258526.\n    // This variable will eventually hold the stack trace of the destroy call.\n    // TODO(kalman): Delete this and replace with more sound logic that catches\n    // when events are used without being *attached*.\n    this.destroyed_ = null;\n\n    if (this.eventOptions_.unmanaged)\n      this.attachmentStrategy_ = new NullAttachmentStrategy(this);\n    else if (this.eventOptions_.supportsFilters)\n      this.attachmentStrategy_ = new FilteredAttachmentStrategy(this);\n    else\n      this.attachmentStrategy_ = new UnfilteredAttachmentStrategy(this);\n  };\n\n  // callback is a function(args, dispatch). args are the args we receive from\n  // dispatchEvent(), and dispatch is a function(args) that dispatches args to\n  // its listeners.\n  function registerArgumentMassager(name, callback) {\n    if (eventArgumentMassagers[name])\n      throw new Error(\"Massager already registered for event: \" + name);\n    eventArgumentMassagers[name] = callback;\n  }\n\n  // Dispatches a named event with the given argument array. The args array is\n  // the list of arguments that will be sent to the event callback.\n  function dispatchEvent(name, args, filteringInfo) {\n    var listenerIDs = [];\n\n    if (filteringInfo)\n      listenerIDs = eventNatives.MatchAgainstEventFilter(name, filteringInfo);\n\n    var event = attachedNamedEvents[name];\n    if (!event)\n      return;\n\n    var dispatchArgs = function(args) {\n      var result = event.dispatch_(args, listenerIDs);\n      if (result)\n        logging.DCHECK(!result.validationErrors, result.validationErrors);\n      return result;\n    };\n\n    if (eventArgumentMassagers[name])\n      eventArgumentMassagers[name](args, dispatchArgs);\n    else\n      dispatchArgs(args);\n  }\n\n  // Registers a callback to be called when this event is dispatched.\n  Event.prototype.addListener = function(cb, filters) {\n    if (!this.eventOptions_.supportsListeners)\n      throw new Error(\"This event does not support listeners.\");\n    if (this.eventOptions_.maxListeners &&\n        this.getListenerCount() >= this.eventOptions_.maxListeners) {\n      throw new Error(\"Too many listeners for \" + this.eventName_);\n    }\n    if (filters) {\n      if (!this.eventOptions_.supportsFilters)\n        throw new Error(\"This event does not support filters.\");\n      if (filters.url && !(filters.url instanceof Array))\n        throw new Error(\"filters.url should be an array.\");\n      if (filters.serviceType &&\n          !(typeof filters.serviceType === 'string')) {\n        throw new Error(\"filters.serviceType should be a string.\")\n      }\n    }\n    var listener = {callback: cb, filters: filters};\n    this.attach_(listener);\n    $Array.push(this.listeners_, listener);\n  };\n\n  Event.prototype.attach_ = function(listener) {\n    this.attachmentStrategy_.onAddedListener(listener);\n\n    if (this.listeners_.length == 0) {\n      allAttachedEvents[allAttachedEvents.length] = this;\n      if (this.eventName_) {\n        if (attachedNamedEvents[this.eventName_]) {\n          throw new Error(\"Event '\" + this.eventName_ +\n                          \"' is already attached.\");\n        }\n        attachedNamedEvents[this.eventName_] = this;\n      }\n    }\n  };\n\n  // Unregisters a callback.\n  Event.prototype.removeListener = function(cb) {\n    if (!this.eventOptions_.supportsListeners)\n      throw new Error(\"This event does not support listeners.\");\n\n    var idx = this.findListener_(cb);\n    if (idx == -1)\n      return;\n\n    var removedListener = $Array.splice(this.listeners_, idx, 1)[0];\n    this.attachmentStrategy_.onRemovedListener(removedListener);\n\n    if (this.listeners_.length == 0) {\n      var i = allAttachedEvents.indexOf(this);\n      if (i >= 0)\n        delete allAttachedEvents[i];\n      if (this.eventName_) {\n        if (!attachedNamedEvents[this.eventName_])\n          throw new Error(\"Event '\" + this.eventName_ + \"' is not attached.\");\n        delete attachedNamedEvents[this.eventName_];\n      }\n    }\n  };\n\n  // Test if the given callback is registered for this event.\n  Event.prototype.hasListener = function(cb) {\n    if (!this.eventOptions_.supportsListeners)\n      throw new Error(\"This event does not support listeners.\");\n    return this.findListener_(cb) > -1;\n  };\n\n  // Test if any callbacks are registered for this event.\n  Event.prototype.hasListeners = function() {\n    return this.getListenerCount() > 0;\n  };\n\n  // Return the number of listeners on this event.\n  Event.prototype.getListenerCount = function() {\n    if (!this.eventOptions_.supportsListeners)\n      throw new Error(\"This event does not support listeners.\");\n    return this.listeners_.length;\n  };\n\n  // Returns the index of the given callback if registered, or -1 if not\n  // found.\n  Event.prototype.findListener_ = function(cb) {\n    for (var i = 0; i < this.listeners_.length; i++) {\n      if (this.listeners_[i].callback == cb) {\n        return i;\n      }\n    }\n\n    return -1;\n  };\n\n  Event.prototype.dispatch_ = function(args, listenerIDs) {\n    if (this.destroyed_) {\n      throw new Error(this.eventName_ + ' was already destroyed at: ' +\n                      this.destroyed_);\n    }\n    if (!this.eventOptions_.supportsListeners)\n      throw new Error(\"This event does not support listeners.\");\n\n    if (this.argSchemas_ && logging.DCHECK_IS_ON()) {\n      try {\n        validate(args, this.argSchemas_);\n      } catch (e) {\n        e.message += ' in ' + this.eventName_;\n        throw e;\n      }\n    }\n\n    // Make a copy of the listeners in case the listener list is modified\n    // while dispatching the event.\n    var listeners = $Array.slice(\n        this.attachmentStrategy_.getListenersByIDs(listenerIDs));\n\n    var results = [];\n    for (var i = 0; i < listeners.length; i++) {\n      try {\n        var result = this.dispatchToListener(listeners[i].callback, args);\n        if (result !== undefined)\n          $Array.push(results, result);\n      } catch (e) {\n        console.error('Error in event handler for ' +\n                      (this.eventName_ ? this.eventName_ : '(unknown)') +\n                      ': ' + e.stack);\n      }\n    }\n    if (results.length)\n      return {results: results};\n  }\n\n  // Can be overridden to support custom dispatching.\n  Event.prototype.dispatchToListener = function(callback, args) {\n    return $Function.apply(callback, null, args);\n  }\n\n  // Dispatches this event object to all listeners, passing all supplied\n  // arguments to this function each listener.\n  Event.prototype.dispatch = function(varargs) {\n    return this.dispatch_($Array.slice(arguments), undefined);\n  };\n\n  // Detaches this event object from its name.\n  Event.prototype.detach_ = function() {\n    this.attachmentStrategy_.detach(false);\n  };\n\n  Event.prototype.destroy_ = function() {\n    this.listeners_.length = 0;\n    this.detach_();\n    this.destroyed_ = new Error().stack;\n  };\n\n  Event.prototype.addRules = function(rules, opt_cb) {\n    if (!this.eventOptions_.supportsRules)\n      throw new Error(\"This event does not support rules.\");\n\n    // Takes a list of JSON datatype identifiers and returns a schema fragment\n    // that verifies that a JSON object corresponds to an array of only these\n    // data types.\n    function buildArrayOfChoicesSchema(typesList) {\n      return {\n        'type': 'array',\n        'items': {\n          'choices': typesList.map(function(el) {return {'$ref': el};})\n        }\n      };\n    };\n\n    // Validate conditions and actions against specific schemas of this\n    // event object type.\n    // |rules| is an array of JSON objects that follow the Rule type of the\n    // declarative extension APIs. |conditions| is an array of JSON type\n    // identifiers that are allowed to occur in the conditions attribute of each\n    // rule. Likewise, |actions| is an array of JSON type identifiers that are\n    // allowed to occur in the actions attribute of each rule.\n    function validateRules(rules, conditions, actions) {\n      var conditionsSchema = buildArrayOfChoicesSchema(conditions);\n      var actionsSchema = buildArrayOfChoicesSchema(actions);\n      $Array.forEach(rules, function(rule) {\n        validate([rule.conditions], [conditionsSchema]);\n        validate([rule.actions], [actionsSchema]);\n      });\n    };\n\n    if (!this.eventOptions_.conditions || !this.eventOptions_.actions) {\n      throw new Error('Event ' + this.eventName_ + ' misses conditions or ' +\n                      'actions in the API specification.');\n    }\n\n    validateRules(rules,\n                  this.eventOptions_.conditions,\n                  this.eventOptions_.actions);\n\n    ensureRuleSchemasLoaded();\n    // We remove the first parameter from the validation to give the user more\n    // meaningful error messages.\n    validate([rules, opt_cb],\n             $Array.splice(\n                 $Array.slice(ruleFunctionSchemas.addRules.parameters), 1));\n    sendRequest(\"events.addRules\", [this.eventName_, rules, opt_cb],\n                ruleFunctionSchemas.addRules.parameters);\n  }\n\n  Event.prototype.removeRules = function(ruleIdentifiers, opt_cb) {\n    if (!this.eventOptions_.supportsRules)\n      throw new Error(\"This event does not support rules.\");\n    ensureRuleSchemasLoaded();\n    // We remove the first parameter from the validation to give the user more\n    // meaningful error messages.\n    validate([ruleIdentifiers, opt_cb],\n             $Array.splice(\n                 $Array.slice(ruleFunctionSchemas.removeRules.parameters), 1));\n    sendRequest(\"events.removeRules\",\n                [this.eventName_, ruleIdentifiers, opt_cb],\n                ruleFunctionSchemas.removeRules.parameters);\n  }\n\n  Event.prototype.getRules = function(ruleIdentifiers, cb) {\n    if (!this.eventOptions_.supportsRules)\n      throw new Error(\"This event does not support rules.\");\n    ensureRuleSchemasLoaded();\n    // We remove the first parameter from the validation to give the user more\n    // meaningful error messages.\n    validate([ruleIdentifiers, cb],\n             $Array.splice(\n                 $Array.slice(ruleFunctionSchemas.getRules.parameters), 1));\n\n    sendRequest(\"events.getRules\",\n                [this.eventName_, ruleIdentifiers, cb],\n                ruleFunctionSchemas.getRules.parameters);\n  }\n\n  unloadEvent.addListener(function() {\n    for (var i = 0; i < allAttachedEvents.length; ++i) {\n      var event = allAttachedEvents[i];\n      if (event)\n        event.detach_();\n    }\n  });\n\n  // NOTE: Event is (lazily) exposed as chrome.Event from dispatcher.cc.\n  exports.Event = Event;\n\n  exports.dispatchEvent = dispatchEvent;\n  exports.parseEventOptions = parseEventOptions;\n  exports.registerArgumentMassager = registerArgumentMassager;\n\n})"}
],
[
{"endColumn":2,"endLine":166,"isContentScript":true,"scriptId":"155","startColumn":0,"startLine":0,"url":"extensions::sendRequest"},{"scriptSource":"(function(require, requireNative, exports, console, $Array, $Function, $JSON, $Object, $RegExp, $String) {'use strict';// Copyright (c) 2012 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nvar lastError = require('lastError');\nvar logging = requireNative('logging');\nvar natives = requireNative('sendRequest');\nvar processNatives = requireNative('process');\nvar validate = require('schemaUtils').validate;\n\n// All outstanding requests from sendRequest().\nvar requests = {};\n\n// Used to prevent double Activity Logging for API calls that use both custom\n// bindings and ExtensionFunctions (via sendRequest).\nvar calledSendRequest = false;\n\n// Runs a user-supplied callback safely.\nfunction safeCallbackApply(name, request, callback, args) {\n  try {\n    $Function.apply(callback, request, args);\n  } catch (e) {\n    var errorMessage = \"Error in response to \" + name + \": \" + e;\n    if (request.stack && request.stack != '')\n      errorMessage += \"\\n\" + request.stack;\n    console.error(errorMessage);\n  }\n}\n\n// Callback handling.\nfunction handleResponse(requestId, name, success, responseList, error) {\n  // The chrome objects we will set lastError on. Really we should only be\n  // setting this on the callback's chrome object, but set on ours too since\n  // it's conceivable that something relies on that.\n  var chromesForLastError = [chrome];\n\n  try {\n    var request = requests[requestId];\n    logging.DCHECK(request != null);\n\n    // lastError needs to be set on the caller's chrome object no matter what,\n    // though chances are it's the same as ours (it will be different when\n    // calling API methods on other contexts).\n    if (request.callback) {\n      var chromeForCallback = natives.GetGlobal(request.callback).chrome;\n      if (chromeForCallback != chrome)\n        $Array.push(chromesForLastError, chromeForCallback);\n    }\n\n    $Array.forEach(chromesForLastError, function(c) {lastError.clear(c)});\n    if (!success) {\n      if (!error)\n        error = \"Unknown error.\";\n      $Array.forEach(chromesForLastError, function(c) {\n        lastError.set(name, error, request.stack, c)\n      });\n    }\n\n    if (request.customCallback) {\n      safeCallbackApply(name,\n                        request,\n                        request.customCallback,\n                        $Array.concat([name, request], responseList));\n    }\n\n    if (request.callback) {\n      // Validate callback in debug only -- and only when the\n      // caller has provided a callback. Implementations of api\n      // calls may not return data if they observe the caller\n      // has not provided a callback.\n      if (logging.DCHECK_IS_ON() && !error) {\n        if (!request.callbackSchema.parameters)\n          throw new Error(name + \": no callback schema defined\");\n        validate(responseList, request.callbackSchema.parameters);\n      }\n      safeCallbackApply(name, request, request.callback, responseList);\n    }\n  } finally {\n    delete requests[requestId];\n    $Array.forEach(chromesForLastError, function(c) {lastError.clear(c)});\n  }\n};\n\nfunction getExtensionStackTrace(call_name) {\n  var stack = $String.split(new Error().stack, '\\n');\n\n  // Remove stack frames before and after that weren't associated with the\n  // extension.\n  var id = processNatives.GetExtensionId();\n  while (stack.length > 0 && stack[0].indexOf(id) == -1)\n    stack.shift();\n  while (stack.length > 0 && stack[stack.length - 1].indexOf(id) == -1)\n    stack.pop();\n\n  return stack.join('\\n');\n}\n\nfunction prepareRequest(args, argSchemas) {\n  var request = {};\n  var argCount = args.length;\n\n  // Look for callback param.\n  if (argSchemas.length > 0 &&\n      argSchemas[argSchemas.length - 1].type == \"function\") {\n    request.callback = args[args.length - 1];\n    request.callbackSchema = argSchemas[argSchemas.length - 1];\n    --argCount;\n  }\n\n  request.args = [];\n  for (var k = 0; k < argCount; k++) {\n    request.args[k] = args[k];\n  }\n\n  return request;\n}\n\n// Send an API request and optionally register a callback.\n// |optArgs| is an object with optional parameters as follows:\n// - customCallback: a callback that should be called instead of the standard\n//   callback.\n// - nativeFunction: the v8 native function to handle the request, or\n//   StartRequest if missing.\n// - forIOThread: true if this function should be handled on the browser IO\n//   thread.\n// - preserveNullInObjects: true if it is safe for null to be in objects.\nfunction sendRequest(functionName, args, argSchemas, optArgs) {\n  calledSendRequest = true;\n  if (!optArgs)\n    optArgs = {};\n  var request = prepareRequest(args, argSchemas);\n  request.stack = getExtensionStackTrace();\n  if (optArgs.customCallback) {\n    request.customCallback = optArgs.customCallback;\n  }\n\n  var nativeFunction = optArgs.nativeFunction || natives.StartRequest;\n\n  var requestId = natives.GetNextRequestId();\n  request.id = requestId;\n  requests[requestId] = request;\n\n  var hasCallback = request.callback || optArgs.customCallback;\n  return nativeFunction(functionName,\n                        request.args,\n                        requestId,\n                        hasCallback,\n                        optArgs.forIOThread,\n                        optArgs.preserveNullInObjects);\n}\n\nfunction getCalledSendRequest() {\n  return calledSendRequest;\n}\n\nfunction clearCalledSendRequest() {\n  calledSendRequest = false;\n}\n\nexports.sendRequest = sendRequest;\nexports.getCalledSendRequest = getCalledSendRequest;\nexports.clearCalledSendRequest = clearCalledSendRequest;\n\n// Called by C++.\nexports.handleResponse = handleResponse;\n\n})"}
],
[
{"endColumn":2,"endLine":83,"isContentScript":true,"scriptId":"156","startColumn":0,"startLine":0,"url":"extensions::lastError"},{"scriptSource":"(function(require, requireNative, exports, console, $Array, $Function, $JSON, $Object, $RegExp, $String) {'use strict';// Copyright (c) 2012 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nvar GetAvailability = requireNative('v8_context').GetAvailability;\nvar GetGlobal = requireNative('sendRequest').GetGlobal;\n\n// Utility for setting chrome.*.lastError.\n//\n// A utility here is useful for two reasons:\n//  1. For backwards compatibility we need to set chrome.extension.lastError,\n//     but not all contexts actually have access to the extension namespace.\n//  2. When calling across contexts, the global object that gets lastError set\n//     needs to be that of the caller. We force callers to explicitly specify\n//     the chrome object to try to prevent bugs here.\n\n/**\n * Sets the last error for |name| on |targetChrome| to |message| with an\n * optional |stack|.\n */\nfunction set(name, message, stack, targetChrome) {\n  var errorMessage = name + ': ' + message;\n  if (stack != null && stack != '')\n    errorMessage += '\\n' + stack;\n\n  if (!targetChrome)\n    throw new Error('No chrome object to set error: ' + errorMessage);\n  clear(targetChrome);  // in case somebody has set a sneaky getter/setter\n\n  var errorObject = { message: message };\n  if (GetAvailability('extension.lastError').is_available)\n    targetChrome.extension.lastError = errorObject;\n\n  assertRuntimeIsAvailable();\n  targetChrome.runtime.lastError = errorObject;\n};\n\n/**\n * Clears the last error on |targetChrome|.\n */\nfunction clear(targetChrome) {\n  if (!targetChrome)\n    throw new Error('No target chrome to clear error');\n\n  if (GetAvailability('extension.lastError').is_available)\n    delete targetChrome.extension.lastError;\n\n  assertRuntimeIsAvailable();\n  delete targetChrome.runtime.lastError;\n};\n\nfunction assertRuntimeIsAvailable() {\n  // chrome.runtime should always be available, but maybe it's disappeared for\n  // some reason? Add debugging for http://crbug.com/258526.\n  var runtimeAvailability = GetAvailability('runtime.lastError');\n  if (!runtimeAvailability.is_available) {\n    throw new Error('runtime.lastError is not available: ' +\n                    runtimeAvailability.message);\n  }\n  if (!chrome.runtime)\n    throw new Error('runtime namespace is null or undefined');\n}\n\n/**\n * Runs |callback(args)| with last error args as in set().\n *\n * The target chrome object is the global object's of the callback, so this\n * method won't work if the real callback has been wrapped (etc).\n */\nfunction run(name, message, stack, callback, args) {\n  var targetChrome = GetGlobal(callback).chrome;\n  set(name, message, stack, targetChrome);\n  try {\n    $Function.apply(callback, undefined, args);\n  } finally {\n    clear(targetChrome);\n  }\n}\n\nexports.clear = clear;\nexports.set = set;\nexports.run = run;\n\n})"}
],
[
{"endColumn":2,"endLine":157,"isContentScript":true,"scriptId":"157","startColumn":0,"startLine":0,"url":"extensions::schemaUtils"},{"scriptSource":"(function(require, requireNative, exports, console, $Array, $Function, $JSON, $Object, $RegExp, $String) {'use strict';// Copyright (c) 2012 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n// Routines used to validate and normalize arguments.\n// TODO(benwells): unit test this file.\n\nvar JSONSchemaValidator = require('json_schema').JSONSchemaValidator;\n\nvar schemaValidator = new JSONSchemaValidator();\n\n// Validate arguments.\nfunction validate(args, parameterSchemas) {\n  if (args.length > parameterSchemas.length)\n    throw new Error(\"Too many arguments.\");\n  for (var i = 0; i < parameterSchemas.length; i++) {\n    if (i in args && args[i] !== null && args[i] !== undefined) {\n      schemaValidator.resetErrors();\n      schemaValidator.validate(args[i], parameterSchemas[i]);\n      if (schemaValidator.errors.length == 0)\n        continue;\n      var message = \"Invalid value for argument \" + (i + 1) + \". \";\n      for (var i = 0, err;\n          err = schemaValidator.errors[i]; i++) {\n        if (err.path) {\n          message += \"Property '\" + err.path + \"': \";\n        }\n        message += err.message;\n        message = message.substring(0, message.length - 1);\n        message += \", \";\n      }\n      message = message.substring(0, message.length - 2);\n      message += \".\";\n      throw new Error(message);\n    } else if (!parameterSchemas[i].optional) {\n      throw new Error(\"Parameter \" + (i + 1) + \" (\" +\n          parameterSchemas[i].name + \") is required.\");\n    }\n  }\n}\n\n// Generate all possible signatures for a given API function.\nfunction getSignatures(parameterSchemas) {\n  if (parameterSchemas.length === 0)\n    return [[]];\n  var signatures = [];\n  var remaining = getSignatures($Array.slice(parameterSchemas, 1));\n  for (var i = 0; i < remaining.length; i++)\n    $Array.push(signatures, $Array.concat([parameterSchemas[0]], remaining[i]))\n  if (parameterSchemas[0].optional)\n    return $Array.concat(signatures, remaining);\n  return signatures;\n};\n\n// Return true if arguments match a given signature's schema.\nfunction argumentsMatchSignature(args, candidateSignature) {\n  if (args.length != candidateSignature.length)\n    return false;\n  for (var i = 0; i < candidateSignature.length; i++) {\n    var argType =  JSONSchemaValidator.getType(args[i]);\n    if (!schemaValidator.isValidSchemaType(argType,\n        candidateSignature[i]))\n      return false;\n  }\n  return true;\n};\n\n// Finds the function signature for the given arguments.\nfunction resolveSignature(args, definedSignature) {\n  var candidateSignatures = getSignatures(definedSignature);\n  for (var i = 0; i < candidateSignatures.length; i++) {\n    if (argumentsMatchSignature(args, candidateSignatures[i]))\n      return candidateSignatures[i];\n  }\n  return null;\n};\n\n// Returns a string representing the defined signature of the API function.\n// Example return value for chrome.windows.getCurrent:\n// \"windows.getCurrent(optional object populate, function callback)\"\nfunction getParameterSignatureString(name, definedSignature) {\n  var getSchemaTypeString = function(schema) {\n    var schemaTypes = schemaValidator.getAllTypesForSchema(schema);\n    var typeName = schemaTypes.join(\" or \") + \" \" + schema.name;\n    if (schema.optional)\n      return \"optional \" + typeName;\n    return typeName;\n  };\n  var typeNames = definedSignature.map(getSchemaTypeString);\n  return name + \"(\" + typeNames.join(\", \") + \")\";\n};\n\n// Returns a string representing a call to an API function.\n// Example return value for call: chrome.windows.get(1, callback) is:\n// \"windows.get(int, function)\"\nfunction getArgumentSignatureString(name, args) {\n  var typeNames = args.map(JSONSchemaValidator.getType);\n  return name + \"(\" + typeNames.join(\", \") + \")\";\n};\n\n// Finds the correct signature for the given arguments, then validates the\n// arguments against that signature. Returns a 'normalized' arguments list\n// where nulls are inserted where optional parameters were omitted.\n// |args| is expected to be an array.\nfunction normalizeArgumentsAndValidate(args, funDef) {\n  if (funDef.allowAmbiguousOptionalArguments) {\n    validate(args, funDef.definition.parameters);\n    return args;\n  }\n  var definedSignature = funDef.definition.parameters;\n  var resolvedSignature = resolveSignature(args, definedSignature);\n  if (!resolvedSignature)\n    throw new Error(\"Invocation of form \" +\n        getArgumentSignatureString(funDef.name, args) +\n        \" doesn't match definition \" +\n        getParameterSignatureString(funDef.name, definedSignature));\n  validate(args, resolvedSignature);\n  var normalizedArgs = [];\n  var ai = 0;\n  for (var si = 0; si < definedSignature.length; si++) {\n    if (definedSignature[si] === resolvedSignature[ai])\n      $Array.push(normalizedArgs, args[ai++]);\n    else\n      $Array.push(normalizedArgs, null);\n  }\n  return normalizedArgs;\n};\n\n// Validates that a given schema for an API function is not ambiguous.\nfunction isFunctionSignatureAmbiguous(functionDef) {\n  if (functionDef.allowAmbiguousOptionalArguments)\n    return false;\n  var signaturesAmbiguous = function(signature1, signature2) {\n    if (signature1.length != signature2.length)\n      return false;\n    for (var i = 0; i < signature1.length; i++) {\n      if (!schemaValidator.checkSchemaOverlap(\n          signature1[i], signature2[i]))\n        return false;\n    }\n    return true;\n  };\n  var candidateSignatures = getSignatures(functionDef.parameters);\n  for (var i = 0; i < candidateSignatures.length; i++) {\n    for (var j = i + 1; j < candidateSignatures.length; j++) {\n      if (signaturesAmbiguous(candidateSignatures[i], candidateSignatures[j]))\n        return true;\n    }\n  }\n  return false;\n};\n\nexports.isFunctionSignatureAmbiguous = isFunctionSignatureAmbiguous;\nexports.normalizeArgumentsAndValidate = normalizeArgumentsAndValidate;\nexports.schemaValidator = schemaValidator;\nexports.validate = validate;\n\n})"}
],
[
{"endColumn":2,"endLine":517,"isContentScript":true,"scriptId":"158","startColumn":0,"startLine":0,"url":"extensions::json_schema"},{"scriptSource":"(function(require, requireNative, exports, console, $Array, $Function, $JSON, $Object, $RegExp, $String) {'use strict';// Copyright (c) 2012 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n// -----------------------------------------------------------------------------\n// NOTE: If you change this file you need to touch renderer_resources.grd to\n// have your change take effect.\n// -----------------------------------------------------------------------------\n\n//==============================================================================\n// This file contains a class that implements a subset of JSON Schema.\n// See: http://www.json.com/json-schema-proposal/ for more details.\n//\n// The following features of JSON Schema are not implemented:\n// - requires\n// - unique\n// - disallow\n// - union types (but replaced with 'choices')\n//\n// The following properties are not applicable to the interface exposed by\n// this class:\n// - options\n// - readonly\n// - title\n// - description\n// - format\n// - default\n// - transient\n// - hidden\n//\n// There are also these departures from the JSON Schema proposal:\n// - function and undefined types are supported\n// - null counts as 'unspecified' for optional values\n// - added the 'choices' property, to allow specifying a list of possible types\n//   for a value\n// - by default an \"object\" typed schema does not allow additional properties.\n//   if present, \"additionalProperties\" is to be a schema against which all\n//   additional properties will be validated.\n//==============================================================================\n\nvar loadTypeSchema = require('utils').loadTypeSchema;\nvar CHECK = requireNative('logging').CHECK;\n\nfunction isInstanceOfClass(instance, className) {\n  while ((instance = instance.__proto__)) {\n    if (instance.constructor.name == className)\n      return true;\n  }\n  return false;\n}\n\nfunction isOptionalValue(value) {\n  return typeof(value) === 'undefined' || value === null;\n}\n\n/**\n * Validates an instance against a schema and accumulates errors. Usage:\n *\n * var validator = new JSONSchemaValidator();\n * validator.validate(inst, schema);\n * if (validator.errors.length == 0)\n *   console.log(\"Valid!\");\n * else\n *   console.log(validator.errors);\n *\n * The errors property contains a list of objects. Each object has two\n * properties: \"path\" and \"message\". The \"path\" property contains the path to\n * the key that had the problem, and the \"message\" property contains a sentence\n * describing the error.\n */\nfunction JSONSchemaValidator() {\n  this.errors = [];\n  this.types = [];\n}\n\nJSONSchemaValidator.messages = {\n  invalidEnum: \"Value must be one of: [*].\",\n  propertyRequired: \"Property is required.\",\n  unexpectedProperty: \"Unexpected property.\",\n  arrayMinItems: \"Array must have at least * items.\",\n  arrayMaxItems: \"Array must not have more than * items.\",\n  itemRequired: \"Item is required.\",\n  stringMinLength: \"String must be at least * characters long.\",\n  stringMaxLength: \"String must not be more than * characters long.\",\n  stringPattern: \"String must match the pattern: *.\",\n  numberFiniteNotNan: \"Value must not be *.\",\n  numberMinValue: \"Value must not be less than *.\",\n  numberMaxValue: \"Value must not be greater than *.\",\n  numberIntValue: \"Value must fit in a 32-bit signed integer.\",\n  numberMaxDecimal: \"Value must not have more than * decimal places.\",\n  invalidType: \"Expected '*' but got '*'.\",\n  invalidTypeIntegerNumber:\n      \"Expected 'integer' but got 'number', consider using Math.round().\",\n  invalidChoice: \"Value does not match any valid type choices.\",\n  invalidPropertyType: \"Missing property type.\",\n  schemaRequired: \"Schema value required.\",\n  unknownSchemaReference: \"Unknown schema reference: *.\",\n  notInstance: \"Object must be an instance of *.\"\n};\n\n/**\n * Builds an error message. Key is the property in the |errors| object, and\n * |opt_replacements| is an array of values to replace \"*\" characters with.\n */\nJSONSchemaValidator.formatError = function(key, opt_replacements) {\n  var message = this.messages[key];\n  if (opt_replacements) {\n    for (var i = 0; i < opt_replacements.length; i++) {\n      message = message.replace(\"*\", opt_replacements[i]);\n    }\n  }\n  return message;\n};\n\n/**\n * Classifies a value as one of the JSON schema primitive types. Note that we\n * don't explicitly disallow 'function', because we want to allow functions in\n * the input values.\n */\nJSONSchemaValidator.getType = function(value) {\n  var s = typeof value;\n\n  if (s == \"object\") {\n    if (value === null) {\n      return \"null\";\n    } else if (Object.prototype.toString.call(value) == \"[object Array]\") {\n      return \"array\";\n    } else if (typeof(ArrayBuffer) != \"undefined\" &&\n               value.constructor == ArrayBuffer) {\n      return \"binary\";\n    }\n  } else if (s == \"number\") {\n    if (value % 1 == 0) {\n      return \"integer\";\n    }\n  }\n\n  return s;\n};\n\n/**\n * Add types that may be referenced by validated schemas that reference them\n * with \"$ref\": <typeId>. Each type must be a valid schema and define an\n * \"id\" property.\n */\nJSONSchemaValidator.prototype.addTypes = function(typeOrTypeList) {\n  function addType(validator, type) {\n    if (!type.id)\n      throw new Error(\"Attempt to addType with missing 'id' property\");\n    validator.types[type.id] = type;\n  }\n\n  if (typeOrTypeList instanceof Array) {\n    for (var i = 0; i < typeOrTypeList.length; i++) {\n      addType(this, typeOrTypeList[i]);\n    }\n  } else {\n    addType(this, typeOrTypeList);\n  }\n}\n\n/**\n * Returns a list of strings of the types that this schema accepts.\n */\nJSONSchemaValidator.prototype.getAllTypesForSchema = function(schema) {\n  var schemaTypes = [];\n  if (schema.type)\n    $Array.push(schemaTypes, schema.type);\n  if (schema.choices) {\n    for (var i = 0; i < schema.choices.length; i++) {\n      var choiceTypes = this.getAllTypesForSchema(schema.choices[i]);\n      schemaTypes = $Array.concat(schemaTypes, choiceTypes);\n    }\n  }\n  var ref = schema['$ref'];\n  if (ref) {\n    var type = this.getOrAddType(ref);\n    CHECK(type, 'Could not find type ' + ref);\n    schemaTypes = $Array.concat(schemaTypes, this.getAllTypesForSchema(type));\n  }\n  return schemaTypes;\n};\n\nJSONSchemaValidator.prototype.getOrAddType = function(typeName) {\n  if (!this.types[typeName])\n    this.types[typeName] = loadTypeSchema(typeName);\n  return this.types[typeName];\n};\n\n/**\n * Returns true if |schema| would accept an argument of type |type|.\n */\nJSONSchemaValidator.prototype.isValidSchemaType = function(type, schema) {\n  if (type == 'any')\n    return true;\n\n  // TODO(kalman): I don't understand this code. How can type be \"null\"?\n  if (schema.optional && (type == \"null\" || type == \"undefined\"))\n    return true;\n\n  var schemaTypes = this.getAllTypesForSchema(schema);\n  for (var i = 0; i < schemaTypes.length; i++) {\n    if (schemaTypes[i] == \"any\" || type == schemaTypes[i])\n      return true;\n  }\n\n  return false;\n};\n\n/**\n * Returns true if there is a non-null argument that both |schema1| and\n * |schema2| would accept.\n */\nJSONSchemaValidator.prototype.checkSchemaOverlap = function(schema1, schema2) {\n  var schema1Types = this.getAllTypesForSchema(schema1);\n  for (var i = 0; i < schema1Types.length; i++) {\n    if (this.isValidSchemaType(schema1Types[i], schema2))\n      return true;\n  }\n  return false;\n};\n\n/**\n * Validates an instance against a schema. The instance can be any JavaScript\n * value and will be validated recursively. When this method returns, the\n * |errors| property will contain a list of errors, if any.\n */\nJSONSchemaValidator.prototype.validate = function(instance, schema, opt_path) {\n  var path = opt_path || \"\";\n\n  if (!schema) {\n    this.addError(path, \"schemaRequired\");\n    return;\n  }\n\n  // If this schema defines itself as reference type, save it in this.types.\n  if (schema.id)\n    this.types[schema.id] = schema;\n\n  // If the schema has an extends property, the instance must validate against\n  // that schema too.\n  if (schema.extends)\n    this.validate(instance, schema.extends, path);\n\n  // If the schema has a $ref property, the instance must validate against\n  // that schema too. It must be present in this.types to be referenced.\n  var ref = schema[\"$ref\"];\n  if (ref) {\n    if (!this.getOrAddType(ref))\n      this.addError(path, \"unknownSchemaReference\", [ ref ]);\n    else\n      this.validate(instance, this.getOrAddType(ref), path)\n  }\n\n  // If the schema has a choices property, the instance must validate against at\n  // least one of the items in that array.\n  if (schema.choices) {\n    this.validateChoices(instance, schema, path);\n    return;\n  }\n\n  // If the schema has an enum property, the instance must be one of those\n  // values.\n  if (schema.enum) {\n    if (!this.validateEnum(instance, schema, path))\n      return;\n  }\n\n  if (schema.type && schema.type != \"any\") {\n    if (!this.validateType(instance, schema, path))\n      return;\n\n    // Type-specific validation.\n    switch (schema.type) {\n      case \"object\":\n        this.validateObject(instance, schema, path);\n        break;\n      case \"array\":\n        this.validateArray(instance, schema, path);\n        break;\n      case \"string\":\n        this.validateString(instance, schema, path);\n        break;\n      case \"number\":\n      case \"integer\":\n        this.validateNumber(instance, schema, path);\n        break;\n    }\n  }\n};\n\n/**\n * Validates an instance against a choices schema. The instance must match at\n * least one of the provided choices.\n */\nJSONSchemaValidator.prototype.validateChoices =\n    function(instance, schema, path) {\n  var originalErrors = this.errors;\n\n  for (var i = 0; i < schema.choices.length; i++) {\n    this.errors = [];\n    this.validate(instance, schema.choices[i], path);\n    if (this.errors.length == 0) {\n      this.errors = originalErrors;\n      return;\n    }\n  }\n\n  this.errors = originalErrors;\n  this.addError(path, \"invalidChoice\");\n};\n\n/**\n * Validates an instance against a schema with an enum type. Populates the\n * |errors| property, and returns a boolean indicating whether the instance\n * validates.\n */\nJSONSchemaValidator.prototype.validateEnum = function(instance, schema, path) {\n  for (var i = 0; i < schema.enum.length; i++) {\n    if (instance === schema.enum[i])\n      return true;\n  }\n\n  this.addError(path, \"invalidEnum\", [schema.enum.join(\", \")]);\n  return false;\n};\n\n/**\n * Validates an instance against an object schema and populates the errors\n * property.\n */\nJSONSchemaValidator.prototype.validateObject =\n    function(instance, schema, path) {\n  if (schema.properties) {\n    for (var prop in schema.properties) {\n      // It is common in JavaScript to add properties to Object.prototype. This\n      // check prevents such additions from being interpreted as required\n      // schema properties.\n      // TODO(aa): If it ever turns out that we actually want this to work,\n      // there are other checks we could put here, like requiring that schema\n      // properties be objects that have a 'type' property.\n      if (!$Object.hasOwnProperty(schema.properties, prop))\n        continue;\n\n      var propPath = path ? path + \".\" + prop : prop;\n      if (schema.properties[prop] == undefined) {\n        this.addError(propPath, \"invalidPropertyType\");\n      } else if (prop in instance && !isOptionalValue(instance[prop])) {\n        this.validate(instance[prop], schema.properties[prop], propPath);\n      } else if (!schema.properties[prop].optional) {\n        this.addError(propPath, \"propertyRequired\");\n      }\n    }\n  }\n\n  // If \"instanceof\" property is set, check that this object inherits from\n  // the specified constructor (function).\n  if (schema.isInstanceOf) {\n    if (!isInstanceOfClass(instance, schema.isInstanceOf))\n      this.addError(propPath, \"notInstance\", [schema.isInstanceOf]);\n  }\n\n  // Exit early from additional property check if \"type\":\"any\" is defined.\n  if (schema.additionalProperties &&\n      schema.additionalProperties.type &&\n      schema.additionalProperties.type == \"any\") {\n    return;\n  }\n\n  // By default, additional properties are not allowed on instance objects. This\n  // can be overridden by setting the additionalProperties property to a schema\n  // which any additional properties must validate against.\n  for (var prop in instance) {\n    if (schema.properties && prop in schema.properties)\n      continue;\n\n    // Any properties inherited through the prototype are ignored.\n    if (!$Object.hasOwnProperty(instance, prop))\n      continue;\n\n    var propPath = path ? path + \".\" + prop : prop;\n    if (schema.additionalProperties)\n      this.validate(instance[prop], schema.additionalProperties, propPath);\n    else\n      this.addError(propPath, \"unexpectedProperty\");\n  }\n};\n\n/**\n * Validates an instance against an array schema and populates the errors\n * property.\n */\nJSONSchemaValidator.prototype.validateArray = function(instance, schema, path) {\n  var typeOfItems = JSONSchemaValidator.getType(schema.items);\n\n  if (typeOfItems == 'object') {\n    if (schema.minItems && instance.length < schema.minItems) {\n      this.addError(path, \"arrayMinItems\", [schema.minItems]);\n    }\n\n    if (typeof schema.maxItems != \"undefined\" &&\n        instance.length > schema.maxItems) {\n      this.addError(path, \"arrayMaxItems\", [schema.maxItems]);\n    }\n\n    // If the items property is a single schema, each item in the array must\n    // have that schema.\n    for (var i = 0; i < instance.length; i++) {\n      this.validate(instance[i], schema.items, path + \".\" + i);\n    }\n  } else if (typeOfItems == 'array') {\n    // If the items property is an array of schemas, each item in the array must\n    // validate against the corresponding schema.\n    for (var i = 0; i < schema.items.length; i++) {\n      var itemPath = path ? path + \".\" + i : String(i);\n      if (i in instance && !isOptionalValue(instance[i])) {\n        this.validate(instance[i], schema.items[i], itemPath);\n      } else if (!schema.items[i].optional) {\n        this.addError(itemPath, \"itemRequired\");\n      }\n    }\n\n    if (schema.additionalProperties) {\n      for (var i = schema.items.length; i < instance.length; i++) {\n        var itemPath = path ? path + \".\" + i : String(i);\n        this.validate(instance[i], schema.additionalProperties, itemPath);\n      }\n    } else {\n      if (instance.length > schema.items.length) {\n        this.addError(path, \"arrayMaxItems\", [schema.items.length]);\n      }\n    }\n  }\n};\n\n/**\n * Validates a string and populates the errors property.\n */\nJSONSchemaValidator.prototype.validateString =\n    function(instance, schema, path) {\n  if (schema.minLength && instance.length < schema.minLength)\n    this.addError(path, \"stringMinLength\", [schema.minLength]);\n\n  if (schema.maxLength && instance.length > schema.maxLength)\n    this.addError(path, \"stringMaxLength\", [schema.maxLength]);\n\n  if (schema.pattern && !schema.pattern.test(instance))\n    this.addError(path, \"stringPattern\", [schema.pattern]);\n};\n\n/**\n * Validates a number and populates the errors property. The instance is\n * assumed to be a number.\n */\nJSONSchemaValidator.prototype.validateNumber =\n    function(instance, schema, path) {\n  // Forbid NaN, +Infinity, and -Infinity.  Our APIs don't use them, and\n  // JSON serialization encodes them as 'null'.  Re-evaluate supporting\n  // them if we add an API that could reasonably take them as a parameter.\n  if (isNaN(instance) ||\n      instance == Number.POSITIVE_INFINITY ||\n      instance == Number.NEGATIVE_INFINITY )\n    this.addError(path, \"numberFiniteNotNan\", [instance]);\n\n  if (schema.minimum !== undefined && instance < schema.minimum)\n    this.addError(path, \"numberMinValue\", [schema.minimum]);\n\n  if (schema.maximum !== undefined && instance > schema.maximum)\n    this.addError(path, \"numberMaxValue\", [schema.maximum]);\n\n  // Check for integer values outside of -2^31..2^31-1.\n  if (schema.type === \"integer\" && (instance | 0) !== instance)\n    this.addError(path, \"numberIntValue\", []);\n\n  if (schema.maxDecimal && instance * Math.pow(10, schema.maxDecimal) % 1)\n    this.addError(path, \"numberMaxDecimal\", [schema.maxDecimal]);\n};\n\n/**\n * Validates the primitive type of an instance and populates the errors\n * property. Returns true if the instance validates, false otherwise.\n */\nJSONSchemaValidator.prototype.validateType = function(instance, schema, path) {\n  var actualType = JSONSchemaValidator.getType(instance);\n  if (schema.type == actualType ||\n      (schema.type == \"number\" && actualType == \"integer\")) {\n    return true;\n  } else if (schema.type == \"integer\" && actualType == \"number\") {\n    this.addError(path, \"invalidTypeIntegerNumber\");\n    return false;\n  } else {\n    this.addError(path, \"invalidType\", [schema.type, actualType]);\n    return false;\n  }\n};\n\n/**\n * Adds an error message. |key| is an index into the |messages| object.\n * |replacements| is an array of values to replace '*' characters in the\n * message.\n */\nJSONSchemaValidator.prototype.addError = function(path, key, replacements) {\n  $Array.push(this.errors, {\n    path: path,\n    message: JSONSchemaValidator.formatError(key, replacements)\n  });\n};\n\n/**\n * Resets errors to an empty list so you can call 'validate' again.\n */\nJSONSchemaValidator.prototype.resetErrors = function() {\n  this.errors = [];\n};\n\nexports.JSONSchemaValidator = JSONSchemaValidator;\n\n})"}
],
[
{"endColumn":2,"endLine":57,"isContentScript":true,"scriptId":"159","startColumn":0,"startLine":0,"url":"extensions::utils"},{"scriptSource":"(function(require, requireNative, exports, console, $Array, $Function, $JSON, $Object, $RegExp, $String) {'use strict';// Copyright (c) 2012 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nvar schemaRegistry = requireNative('schema_registry');\nvar CHECK = requireNative('logging').CHECK;\nvar WARNING = requireNative('logging').WARNING;\n\n// An object forEach. Calls |f| with each (key, value) pair of |obj|, using\n// |self| as the target.\nfunction forEach(obj, f, self) {\n  for (var key in obj) {\n    if ($Object.hasOwnProperty(obj, key))\n      $Function.call(f, self, key, obj[key]);\n  }\n}\n\n// Assuming |array_of_dictionaries| is structured like this:\n// [{id: 1, ... }, {id: 2, ...}, ...], you can use\n// lookup(array_of_dictionaries, 'id', 2) to get the dictionary with id == 2.\nfunction lookup(array_of_dictionaries, field, value) {\n  var filter = function (dict) {return dict[field] == value;};\n  var matches = array_of_dictionaries.filter(filter);\n  if (matches.length == 0) {\n    return undefined;\n  } else if (matches.length == 1) {\n    return matches[0]\n  } else {\n    throw new Error(\"Failed lookup of field '\" + field + \"' with value '\" +\n                    value + \"'\");\n  }\n}\n\nfunction loadTypeSchema(typeName, defaultSchema) {\n  var parts = $String.split(typeName, '.');\n  if (parts.length == 1) {\n    if (defaultSchema == null) {\n      WARNING('Trying to reference \"' + typeName + '\" ' +\n              'with neither namespace nor default schema.');\n      return null;\n    }\n    var types = defaultSchema.types;\n  } else {\n    var schemaName = $Array.join($Array.slice(parts, 0, parts.length - 1), '.');\n    var types = schemaRegistry.GetSchema(schemaName).types;\n  }\n  for (var i = 0; i < types.length; ++i) {\n    if (types[i].id == typeName)\n      return types[i];\n  }\n  return null;\n}\n\nexports.forEach = forEach;\nexports.loadTypeSchema = loadTypeSchema;\nexports.lookup = lookup;\n\n})"}
],
[
{"endColumn":2,"endLine":34,"isContentScript":true,"scriptId":"160","startColumn":0,"startLine":0,"url":"extensions::unload_event"},{"scriptSource":"(function(require, requireNative, exports, console, $Array, $Function, $JSON, $Object, $RegExp, $String) {'use strict';// Copyright 2013 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n// Special unload event. We don't use the DOM unload because that slows down\n// tab shutdown. On the other hand, onUnload might not always fire, since\n// Chrome will terminate renderers on shutdown (SuddenTermination).\n\n// Implement a primitive subset of the Event interface as needed, since if this\n// was to use the real event object there would be a circular dependency.\nvar listeners = [];\n\nexports.addListener = function(listener) {\n  $Array.push(listeners, listener);\n};\n\nexports.removeListener = function(listener) {\n  for (var i = 0; i < listeners.length; ++i) {\n    if (listeners[i] == listener) {\n      $Array.splice(listeners, i, 1);\n      return;\n    }\n  }\n};\n\nexports.wasDispatched = false;\n\n// dispatch() is called from C++.\nexports.dispatch = function() {\n  exports.wasDispatched = true;\n  for (var i = 0; i < listeners.length; ++i)\n    listeners[i]();\n};\n\n})"}
],
[
{"endColumn":2,"endLine":356,"isContentScript":true,"scriptId":"161","startColumn":0,"startLine":0,"url":"extensions::messaging"},{"scriptSource":"(function(require, requireNative, exports, console, $Array, $Function, $JSON, $Object, $RegExp, $String) {'use strict';// Copyright (c) 2012 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n// This contains unprivileged javascript APIs for extensions and apps.  It\n// can be loaded by any extension-related context, such as content scripts or\n// background pages. See user_script_slave.cc for script that is loaded by\n// content scripts only.\n\n  // TODO(kalman): factor requiring chrome out of here.\n  var chrome = requireNative('chrome').GetChrome();\n  var Event = require('event_bindings').Event;\n  var lastError = require('lastError');\n  var logActivity = requireNative('activityLogger');\n  var messagingNatives = requireNative('messaging_natives');\n  var processNatives = requireNative('process');\n  var unloadEvent = require('unload_event');\n  var messagingUtils = require('messaging_utils');\n\n  // The reserved channel name for the sendRequest/send(Native)Message APIs.\n  // Note: sendRequest is deprecated.\n  var kRequestChannel = \"chrome.extension.sendRequest\";\n  var kMessageChannel = \"chrome.runtime.sendMessage\";\n  var kNativeMessageChannel = \"chrome.runtime.sendNativeMessage\";\n\n  // Map of port IDs to port object.\n  var ports = {};\n\n  // Map of port IDs to unloadEvent listeners. Keep track of these to free the\n  // unloadEvent listeners when ports are closed.\n  var portReleasers = {};\n\n  // Change even to odd and vice versa, to get the other side of a given\n  // channel.\n  function getOppositePortId(portId) { return portId ^ 1; }\n\n  // Port object.  Represents a connection to another script context through\n  // which messages can be passed.\n  function Port(portId, opt_name) {\n    this.portId_ = portId;\n    this.name = opt_name;\n\n    var portSchema = {name: 'port', $ref: 'runtime.Port'};\n    var options = {unmanaged: true};\n    this.onDisconnect = new Event(null, [portSchema], options);\n    this.onMessage = new Event(\n        null,\n        [{name: 'message', type: 'any', optional: true}, portSchema],\n        options);\n  }\n\n  // Sends a message asynchronously to the context on the other end of this\n  // port.\n  Port.prototype.postMessage = function(msg) {\n    // JSON.stringify doesn't support a root object which is undefined.\n    if (msg === undefined)\n      msg = null;\n    msg = $JSON.stringify(msg);\n    if (msg === undefined) {\n      // JSON.stringify can fail with unserializable objects. Log an error and\n      // drop the message.\n      //\n      // TODO(kalman/mpcomplete): it would be better to do the same validation\n      // here that we do for runtime.sendMessage (and variants), i.e. throw an\n      // schema validation Error, but just maintain the old behaviour until\n      // there's a good reason not to (http://crbug.com/263077).\n      console.error('Illegal argument to Port.postMessage');\n      return;\n    }\n    messagingNatives.PostMessage(this.portId_, msg);\n  };\n\n  // Disconnects the port from the other end.\n  Port.prototype.disconnect = function() {\n    messagingNatives.CloseChannel(this.portId_, true);\n    this.destroy_();\n  };\n\n  Port.prototype.destroy_ = function() {\n    var portId = this.portId_;\n\n    this.onDisconnect.destroy_();\n    this.onMessage.destroy_();\n\n    messagingNatives.PortRelease(portId);\n    unloadEvent.removeListener(portReleasers[portId]);\n\n    delete ports[portId];\n    delete portReleasers[portId];\n  };\n\n  // Returns true if the specified port id is in this context. This is used by\n  // the C++ to avoid creating the javascript message for all the contexts that\n  // don't care about a particular message.\n  function hasPort(portId) {\n    return portId in ports;\n  };\n\n  // Hidden port creation function.  We don't want to expose an API that lets\n  // people add arbitrary port IDs to the port list.\n  function createPort(portId, opt_name) {\n    if (ports[portId])\n      throw new Error(\"Port '\" + portId + \"' already exists.\");\n    var port = new Port(portId, opt_name);\n    ports[portId] = port;\n    portReleasers[portId] = $Function.bind(messagingNatives.PortRelease,\n                                           this,\n                                           portId);\n    unloadEvent.addListener(portReleasers[portId]);\n    messagingNatives.PortAddRef(portId);\n    return port;\n  };\n\n  // Helper function for dispatchOnRequest.\n  function handleSendRequestError(isSendMessage,\n                                  responseCallbackPreserved,\n                                  sourceExtensionId,\n                                  targetExtensionId,\n                                  sourceUrl) {\n    var errorMsg = [];\n    var eventName = isSendMessage ? \"runtime.onMessage\" : \"extension.onRequest\";\n    if (isSendMessage && !responseCallbackPreserved) {\n      $Array.push(errorMsg,\n          \"The chrome.\" + eventName + \" listener must return true if you \" +\n          \"want to send a response after the listener returns\");\n    } else {\n      $Array.push(errorMsg,\n          \"Cannot send a response more than once per chrome.\" + eventName +\n          \" listener per document\");\n    }\n    $Array.push(errorMsg, \"(message was sent by extension\" + sourceExtensionId);\n    if (sourceExtensionId != \"\" && sourceExtensionId != targetExtensionId)\n      $Array.push(errorMsg, \"for extension \" + targetExtensionId);\n    if (sourceUrl != \"\")\n      $Array.push(errorMsg, \"for URL \" + sourceUrl);\n    lastError.set(eventName, errorMsg.join(\" \") + \").\", null, chrome);\n  }\n\n  // Helper function for dispatchOnConnect\n  function dispatchOnRequest(portId, channelName, sender,\n                             sourceExtensionId, targetExtensionId, sourceUrl,\n                             isExternal) {\n    var isSendMessage = channelName == kMessageChannel;\n    var requestEvent = null;\n    if (isSendMessage) {\n      if (chrome.runtime) {\n        requestEvent = isExternal ? chrome.runtime.onMessageExternal\n                                  : chrome.runtime.onMessage;\n      }\n    } else {\n      if (chrome.extension) {\n        requestEvent = isExternal ? chrome.extension.onRequestExternal\n                                  : chrome.extension.onRequest;\n      }\n    }\n    if (!requestEvent)\n      return false;\n    if (!requestEvent.hasListeners())\n      return false;\n    var port = createPort(portId, channelName);\n    port.onMessage.addListener(function(request) {\n      var responseCallbackPreserved = false;\n      var responseCallback = function(response) {\n        if (port) {\n          port.postMessage(response);\n          port.destroy_();\n          port = null;\n        } else {\n          // We nulled out port when sending the response, and now the page\n          // is trying to send another response for the same request.\n          handleSendRequestError(isSendMessage, responseCallbackPreserved,\n                                 sourceExtensionId, targetExtensionId);\n        }\n      };\n      // In case the extension never invokes the responseCallback, and also\n      // doesn't keep a reference to it, we need to clean up the port. Do\n      // so by attaching to the garbage collection of the responseCallback\n      // using some native hackery.\n      messagingNatives.BindToGC(responseCallback, function() {\n        if (port) {\n          port.destroy_();\n          port = null;\n        }\n      });\n      if (!isSendMessage) {\n        requestEvent.dispatch(request, sender, responseCallback);\n      } else {\n        var rv = requestEvent.dispatch(request, sender, responseCallback);\n        responseCallbackPreserved =\n            rv && rv.results && rv.results.indexOf(true) > -1;\n        if (!responseCallbackPreserved && port) {\n          // If they didn't access the response callback, they're not\n          // going to send a response, so clean up the port immediately.\n          port.destroy_();\n          port = null;\n        }\n      }\n    });\n    var eventName = (isSendMessage ?\n          (isExternal ?\n              \"runtime.onMessageExternal\" : \"runtime.onMessage\") :\n          (isExternal ?\n              \"extension.onRequestExternal\" : \"extension.onRequest\"));\n    logActivity.LogEvent(targetExtensionId,\n                         eventName,\n                         [sourceExtensionId, sourceUrl]);\n    return true;\n  }\n\n  // Called by native code when a channel has been opened to this context.\n  function dispatchOnConnect(portId,\n                             channelName,\n                             sourceTab,\n                             sourceExtensionId,\n                             targetExtensionId,\n                             sourceUrl) {\n    // Only create a new Port if someone is actually listening for a connection.\n    // In addition to being an optimization, this also fixes a bug where if 2\n    // channels were opened to and from the same process, closing one would\n    // close both.\n    var extensionId = processNatives.GetExtensionId();\n    if (targetExtensionId != extensionId)\n      return false;  // not for us\n\n    if (ports[getOppositePortId(portId)])\n      return false;  // this channel was opened by us, so ignore it\n\n    // Determine whether this is coming from another extension, so we can use\n    // the right event.\n    var isExternal = sourceExtensionId != extensionId;\n\n    var sender = {};\n    if (sourceExtensionId != '')\n      sender.id = sourceExtensionId;\n    if (sourceUrl)\n      sender.url = sourceUrl;\n    if (sourceTab)\n      sender.tab = sourceTab;\n\n    // Special case for sendRequest/onRequest and sendMessage/onMessage.\n    if (channelName == kRequestChannel || channelName == kMessageChannel) {\n      return dispatchOnRequest(portId, channelName, sender,\n                               sourceExtensionId, targetExtensionId, sourceUrl,\n                               isExternal);\n    }\n\n    var connectEvent = null;\n    if (chrome.runtime) {\n      connectEvent = isExternal ? chrome.runtime.onConnectExternal\n                                : chrome.runtime.onConnect;\n    }\n    if (!connectEvent)\n      return false;\n    if (!connectEvent.hasListeners())\n      return false;\n\n    var port = createPort(portId, channelName);\n    port.sender = sender;\n    if (processNatives.manifestVersion < 2)\n      port.tab = port.sender.tab;\n\n    var eventName = (isExternal ?\n        \"runtime.onConnectExternal\" : \"runtime.onConnect\");\n    connectEvent.dispatch(port);\n    logActivity.LogEvent(targetExtensionId,\n                         eventName,\n                         [sourceExtensionId]);\n    return true;\n  };\n\n  // Called by native code when a channel has been closed.\n  function dispatchOnDisconnect(portId, errorMessage) {\n    var port = ports[portId];\n    if (port) {\n      // Update the renderer's port bookkeeping, without notifying the browser.\n      messagingNatives.CloseChannel(portId, false);\n      if (errorMessage)\n        lastError.set('Port', errorMessage, null, chrome);\n      try {\n        port.onDisconnect.dispatch(port);\n      } finally {\n        port.destroy_();\n        lastError.clear(chrome);\n      }\n    }\n  };\n\n  // Called by native code when a message has been sent to the given port.\n  function dispatchOnMessage(msg, portId) {\n    var port = ports[portId];\n    if (port) {\n      if (msg)\n        msg = $JSON.parse(msg);\n      port.onMessage.dispatch(msg, port);\n    }\n  };\n\n  // Shared implementation used by tabs.sendMessage and runtime.sendMessage.\n  function sendMessageImpl(port, request, responseCallback) {\n    if (port.name != kNativeMessageChannel)\n      port.postMessage(request);\n\n    if (port.name == kMessageChannel && !responseCallback) {\n      // TODO(mpcomplete): Do this for the old sendRequest API too, after\n      // verifying it doesn't break anything.\n      // Go ahead and disconnect immediately if the sender is not expecting\n      // a response.\n      port.disconnect();\n      return;\n    }\n\n    // Ensure the callback exists for the older sendRequest API.\n    if (!responseCallback)\n      responseCallback = function() {};\n\n    port.onDisconnect.addListener(function() {\n      // For onDisconnects, we only notify the callback if there was an error.\n      try {\n        if (chrome.runtime && chrome.runtime.lastError)\n          responseCallback();\n      } finally {\n        port = null;\n      }\n    });\n    port.onMessage.addListener(function(response) {\n      try {\n        responseCallback(response);\n      } finally {\n        port.disconnect();\n        port = null;\n      }\n    });\n  };\n\n  function sendMessageUpdateArguments(functionName) {\n    var args = $Array.slice(arguments, 1);  // skip functionName\n    var alignedArgs = messagingUtils.alignSendMessageArguments(args);\n    if (!alignedArgs)\n      throw new Error('Invalid arguments to ' + functionName + '.');\n    return alignedArgs;\n  }\n\nexports.kRequestChannel = kRequestChannel;\nexports.kMessageChannel = kMessageChannel;\nexports.kNativeMessageChannel = kNativeMessageChannel;\nexports.Port = Port;\nexports.createPort = createPort;\nexports.sendMessageImpl = sendMessageImpl;\nexports.sendMessageUpdateArguments = sendMessageUpdateArguments;\n\n// For C++ code to call.\nexports.hasPort = hasPort;\nexports.dispatchOnConnect = dispatchOnConnect;\nexports.dispatchOnDisconnect = dispatchOnDisconnect;\nexports.dispatchOnMessage = dispatchOnMessage;\n\n})"}
],
[
{"endColumn":2,"endLine":35,"isContentScript":true,"scriptId":"162","startColumn":0,"startLine":0,"url":"extensions::messaging_utils"},{"scriptSource":"(function(require, requireNative, exports, console, $Array, $Function, $JSON, $Object, $RegExp, $String) {'use strict';// Copyright 2013 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n// Routines used to normalize arguments to messaging functions.\n\nfunction alignSendMessageArguments(args) {\n  // Align missing (optional) function arguments with the arguments that\n  // schema validation is expecting, e.g.\n  //   extension.sendRequest(req)     -> extension.sendRequest(null, req)\n  //   extension.sendRequest(req, cb) -> extension.sendRequest(null, req, cb)\n  if (!args || !args.length)\n    return null;\n  var lastArg = args.length - 1;\n\n  // responseCallback (last argument) is optional.\n  var responseCallback = null;\n  if (typeof(args[lastArg]) == 'function')\n    responseCallback = args[lastArg--];\n\n  // request (second argument) is required.\n  var request = args[lastArg--];\n\n  // targetId (first argument, extensionId in the manifest) is optional.\n  var targetId = null;\n  if (lastArg >= 0)\n    targetId = args[lastArg--];\n\n  if (lastArg != -1)\n    return null;\n  return [targetId, request, responseCallback];\n}\n\nexports.alignSendMessageArguments = alignSendMessageArguments;\n\n})"}
],
[
{"endColumn":2,"endLine":197,"isContentScript":true,"scriptId":"163","startColumn":0,"startLine":0,"url":"extensions::runtime"},{"scriptSource":"(function(require, requireNative, exports, console, $Array, $Function, $JSON, $Object, $RegExp, $String) {'use strict';// Copyright (c) 2012 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n// Custom binding for the runtime API.\n\nvar binding = require('binding').Binding.create('runtime');\n\nvar extensionNatives = requireNative('extension');\nvar messaging = require('messaging');\nvar runtimeNatives = requireNative('runtime');\nvar unloadEvent = require('unload_event');\nvar process = requireNative('process');\n\nvar backgroundPage = window;\nvar backgroundRequire = require;\nvar contextType = process.GetContextType();\nif (contextType == 'BLESSED_EXTENSION' ||\n    contextType == 'UNBLESSED_EXTENSION') {\n  var manifest = runtimeNatives.GetManifest();\n  if (manifest.app && manifest.app.background) {\n    // Get the background page if one exists. Otherwise, default to the current\n    // window.\n    backgroundPage = extensionNatives.GetExtensionViews(-1, 'BACKGROUND')[0];\n    if (backgroundPage) {\n      var GetModuleSystem = requireNative('v8_context').GetModuleSystem;\n      backgroundRequire = GetModuleSystem(backgroundPage).require;\n    } else {\n      backgroundPage = window;\n    }\n  }\n}\n\n// For packaged apps, all windows use the bindFileEntryCallback from the\n// background page so their FileEntry objects have the background page's context\n// as their own.  This allows them to be used from other windows (including the\n// background page) after the original window is closed.\nif (window == backgroundPage) {\n  var lastError = require('lastError');\n  var fileSystemNatives = requireNative('file_system_natives');\n  var GetIsolatedFileSystem = fileSystemNatives.GetIsolatedFileSystem;\n  var bindDirectoryEntryCallback = function(functionName, apiFunctions) {\n    apiFunctions.setCustomCallback(functionName,\n        function(name, request, response) {\n      if (request.callback && response) {\n        var callback = request.callback;\n        request.callback = null;\n\n        var fileSystemId = response.fileSystemId;\n        var baseName = response.baseName;\n        var fs = GetIsolatedFileSystem(fileSystemId);\n\n        try {\n          fs.root.getDirectory(baseName, {}, callback, function(fileError) {\n            lastError.run('runtime.' + functionName,\n                          'Error getting Entry, code: ' + fileError.code,\n                          request.stack,\n                          callback);\n          });\n        } catch (e) {\n          lastError.run('runtime.' + functionName,\n                        'Error: ' + e.stack,\n                        request.stack,\n                        callback);\n        }\n      }\n    });\n  };\n} else {\n  // Force the runtime API to be loaded in the background page. Using\n  // backgroundPageModuleSystem.require('runtime') is insufficient as\n  // requireNative is only allowed while lazily loading an API.\n  backgroundPage.chrome.runtime;\n  var bindDirectoryEntryCallback = backgroundRequire(\n      'runtime').bindDirectoryEntryCallback;\n}\n\nbinding.registerCustomHook(function(binding, id, contextType) {\n  var apiFunctions = binding.apiFunctions;\n  var runtime = binding.compiledApi;\n\n  //\n  // Unprivileged APIs.\n  //\n\n  runtime.id = id;\n\n  apiFunctions.setHandleRequest('getManifest', function() {\n    return runtimeNatives.GetManifest();\n  });\n\n  apiFunctions.setHandleRequest('getURL', function(path) {\n    path = String(path);\n    if (!path.length || path[0] != '/')\n      path = '/' + path;\n    return 'chrome-extension://' + id + path;\n  });\n\n  var sendMessageUpdateArguments = messaging.sendMessageUpdateArguments;\n  apiFunctions.setUpdateArgumentsPreValidate('sendMessage',\n      $Function.bind(sendMessageUpdateArguments, null, 'sendMessage'));\n  apiFunctions.setUpdateArgumentsPreValidate('sendNativeMessage',\n      $Function.bind(sendMessageUpdateArguments, null, 'sendNativeMessage'));\n\n  apiFunctions.setHandleRequest('sendMessage',\n                                function(targetId, message, responseCallback) {\n    var port = runtime.connect(targetId || runtime.id,\n        {name: messaging.kMessageChannel});\n    messaging.sendMessageImpl(port, message, responseCallback);\n  });\n\n  apiFunctions.setHandleRequest('sendNativeMessage',\n                                function(targetId, message, responseCallback) {\n    var port = runtime.connectNative(targetId);\n    messaging.sendMessageImpl(port, message, responseCallback);\n  });\n\n  apiFunctions.setUpdateArgumentsPreValidate('connect', function() {\n    // Align missing (optional) function arguments with the arguments that\n    // schema validation is expecting, e.g.\n    //   runtime.connect()   -> runtime.connect(null, null)\n    //   runtime.connect({}) -> runtime.connect(null, {})\n    var nextArg = 0;\n\n    // targetId (first argument) is optional.\n    var targetId = null;\n    if (typeof(arguments[nextArg]) == 'string')\n      targetId = arguments[nextArg++];\n\n    // connectInfo (second argument) is optional.\n    var connectInfo = null;\n    if (typeof(arguments[nextArg]) == 'object')\n      connectInfo = arguments[nextArg++];\n\n    if (nextArg != arguments.length)\n      throw new Error('Invalid arguments to connect.');\n    return [targetId, connectInfo];\n  });\n\n  apiFunctions.setUpdateArgumentsPreValidate('connectNative',\n                                             function(appName) {\n    if (typeof(appName) !== 'string') {\n      throw new Error('Invalid arguments to connectNative.');\n    }\n    return [appName];\n  });\n\n  apiFunctions.setHandleRequest('connect', function(targetId, connectInfo) {\n    // Don't let orphaned content scripts communicate with their extension.\n    // http://crbug.com/168263\n    if (unloadEvent.wasDispatched)\n      throw new Error('Error connecting to extension ' + targetId);\n\n    if (!targetId)\n      targetId = runtime.id;\n\n    var name = '';\n    if (connectInfo && connectInfo.name)\n      name = connectInfo.name;\n\n    var portId = runtimeNatives.OpenChannelToExtension(targetId, name);\n    if (portId >= 0)\n      return messaging.createPort(portId, name);\n  });\n\n  //\n  // Privileged APIs.\n  //\n  if (contextType != 'BLESSED_EXTENSION')\n    return;\n\n  apiFunctions.setHandleRequest('connectNative',\n                                function(nativeAppName) {\n    if (!unloadEvent.wasDispatched) {\n      var portId = runtimeNatives.OpenChannelToNativeApp(runtime.id,\n                                                         nativeAppName);\n      if (portId >= 0)\n        return messaging.createPort(portId, '');\n    }\n    throw new Error('Error connecting to native app: ' + nativeAppName);\n  });\n\n  apiFunctions.setCustomCallback('getBackgroundPage',\n                                 function(name, request, response) {\n    if (request.callback) {\n      var bg = extensionNatives.GetExtensionViews(-1, 'BACKGROUND')[0] || null;\n      request.callback(bg);\n    }\n    request.callback = null;\n  });\n\n  bindDirectoryEntryCallback('getPackageDirectoryEntry', apiFunctions);\n});\n\nexports.bindDirectoryEntryCallback = bindDirectoryEntryCallback;\nexports.binding = binding.generate();\n\n})"}
],
[
{"endColumn":0,"endLine":5,"isContentScript":true,"scriptId":"164","startColumn":0,"startLine":0,"url":"chrome-extension://jabopobgcpjmedljpbcaablpmlmfcogm/jquery.min.js"},{"scriptSource":"/*! jQuery v1.7.2 jquery.com | jquery.org/license */\n(function(a,b){function cy(a){return f.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}function cu(a){if(!cj[a]){var b=c.body,d=f(\"<\"+a+\">\").appendTo(b),e=d.css(\"display\");d.remove();if(e===\"none\"||e===\"\"){ck||(ck=c.createElement(\"iframe\"),ck.frameBorder=ck.width=ck.height=0),b.appendChild(ck);if(!cl||!ck.createElement)cl=(ck.contentWindow||ck.contentDocument).document,cl.write((f.support.boxModel?\"<!doctype html>\":\"\")+\"<html><body>\"),cl.close();d=cl.createElement(a),cl.body.appendChild(d),e=f.css(d,\"display\"),b.removeChild(ck)}cj[a]=e}return cj[a]}function ct(a,b){var c={};f.each(cp.concat.apply([],cp.slice(0,b)),function(){c[this]=a});return c}function cs(){cq=b}function cr(){setTimeout(cs,0);return cq=f.now()}function ci(){try{return new a.ActiveXObject(\"Microsoft.XMLHTTP\")}catch(b){}}function ch(){try{return new a.XMLHttpRequest}catch(b){}}function cb(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var d=a.dataTypes,e={},g,h,i=d.length,j,k=d[0],l,m,n,o,p;for(g=1;g<i;g++){if(g===1)for(h in a.converters)typeof h==\"string\"&&(e[h.toLowerCase()]=a.converters[h]);l=k,k=d[g];if(k===\"*\")k=l;else if(l!==\"*\"&&l!==k){m=l+\" \"+k,n=e[m]||e[\"* \"+k];if(!n){p=b;for(o in e){j=o.split(\" \");if(j[0]===l||j[0]===\"*\"){p=e[j[1]+\" \"+k];if(p){o=e[o],o===!0?n=p:p===!0&&(n=o);break}}}}!n&&!p&&f.error(\"No conversion from \"+m.replace(\" \",\" to \")),n!==!0&&(c=n?n(c):p(o(c)))}}return c}function ca(a,c,d){var e=a.contents,f=a.dataTypes,g=a.responseFields,h,i,j,k;for(i in g)i in d&&(c[g[i]]=d[i]);while(f[0]===\"*\")f.shift(),h===b&&(h=a.mimeType||c.getResponseHeader(\"content-type\"));if(h)for(i in e)if(e[i]&&e[i].test(h)){f.unshift(i);break}if(f[0]in d)j=f[0];else{for(i in d){if(!f[0]||a.converters[i+\" \"+f[0]]){j=i;break}k||(k=i)}j=j||k}if(j){j!==f[0]&&f.unshift(j);return d[j]}}function b_(a,b,c,d){if(f.isArray(b))f.each(b,function(b,e){c||bD.test(a)?d(a,e):b_(a+\"[\"+(typeof e==\"object\"?b:\"\")+\"]\",e,c,d)});else if(!c&&f.type(b)===\"object\")for(var e in b)b_(a+\"[\"+e+\"]\",b[e],c,d);else d(a,b)}function b$(a,c){var d,e,g=f.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((g[d]?a:e||(e={}))[d]=c[d]);e&&f.extend(!0,a,e)}function bZ(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h=a[f],i=0,j=h?h.length:0,k=a===bS,l;for(;i<j&&(k||!l);i++)l=h[i](c,d,e),typeof l==\"string\"&&(!k||g[l]?l=b:(c.dataTypes.unshift(l),l=bZ(a,c,d,e,l,g)));(k||!l)&&!g[\"*\"]&&(l=bZ(a,c,d,e,\"*\",g));return l}function bY(a){return function(b,c){typeof b!=\"string\"&&(c=b,b=\"*\");if(f.isFunction(c)){var d=b.toLowerCase().split(bO),e=0,g=d.length,h,i,j;for(;e<g;e++)h=d[e],j=/^\\+/.test(h),j&&(h=h.substr(1)||\"*\"),i=a[h]=a[h]||[],i[j?\"unshift\":\"push\"](c)}}}function bB(a,b,c){var d=b===\"width\"?a.offsetWidth:a.offsetHeight,e=b===\"width\"?1:0,g=4;if(d>0){if(c!==\"border\")for(;e<g;e+=2)c||(d-=parseFloat(f.css(a,\"padding\"+bx[e]))||0),c===\"margin\"?d+=parseFloat(f.css(a,c+bx[e]))||0:d-=parseFloat(f.css(a,\"border\"+bx[e]+\"Width\"))||0;return d+\"px\"}d=by(a,b);if(d<0||d==null)d=a.style[b];if(bt.test(d))return d;d=parseFloat(d)||0;if(c)for(;e<g;e+=2)d+=parseFloat(f.css(a,\"padding\"+bx[e]))||0,c!==\"padding\"&&(d+=parseFloat(f.css(a,\"border\"+bx[e]+\"Width\"))||0),c===\"margin\"&&(d+=parseFloat(f.css(a,c+bx[e]))||0);return d+\"px\"}function bo(a){var b=c.createElement(\"div\");bh.appendChild(b),b.innerHTML=a.outerHTML;return b.firstChild}function bn(a){var b=(a.nodeName||\"\").toLowerCase();b===\"input\"?bm(a):b!==\"script\"&&typeof a.getElementsByTagName!=\"undefined\"&&f.grep(a.getElementsByTagName(\"input\"),bm)}function bm(a){if(a.type===\"checkbox\"||a.type===\"radio\")a.defaultChecked=a.checked}function bl(a){return typeof a.getElementsByTagName!=\"undefined\"?a.getElementsByTagName(\"*\"):typeof a.querySelectorAll!=\"undefined\"?a.querySelectorAll(\"*\"):[]}function bk(a,b){var c;b.nodeType===1&&(b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase(),c===\"object\"?b.outerHTML=a.outerHTML:c!==\"input\"||a.type!==\"checkbox\"&&a.type!==\"radio\"?c===\"option\"?b.selected=a.defaultSelected:c===\"input\"||c===\"textarea\"?b.defaultValue=a.defaultValue:c===\"script\"&&b.text!==a.text&&(b.text=a.text):(a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value)),b.removeAttribute(f.expando),b.removeAttribute(\"_submit_attached\"),b.removeAttribute(\"_change_attached\"))}function bj(a,b){if(b.nodeType===1&&!!f.hasData(a)){var c,d,e,g=f._data(a),h=f._data(b,g),i=g.events;if(i){delete h.handle,h.events={};for(c in i)for(d=0,e=i[c].length;d<e;d++)f.event.add(b,c,i[c][d])}h.data&&(h.data=f.extend({},h.data))}}function bi(a,b){return f.nodeName(a,\"table\")?a.getElementsByTagName(\"tbody\")[0]||a.appendChild(a.ownerDocument.createElement(\"tbody\")):a}function U(a){var b=V.split(\"|\"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}function T(a,b,c){b=b||0;if(f.isFunction(b))return f.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return f.grep(a,function(a,d){return a===b===c});if(typeof b==\"string\"){var d=f.grep(a,function(a){return a.nodeType===1});if(O.test(b))return f.filter(b,d,!c);b=f.filter(b,d)}return f.grep(a,function(a,d){return f.inArray(a,b)>=0===c})}function S(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function K(){return!0}function J(){return!1}function n(a,b,c){var d=b+\"defer\",e=b+\"queue\",g=b+\"mark\",h=f._data(a,d);h&&(c===\"queue\"||!f._data(a,e))&&(c===\"mark\"||!f._data(a,g))&&setTimeout(function(){!f._data(a,e)&&!f._data(a,g)&&(f.removeData(a,d,!0),h.fire())},0)}function m(a){for(var b in a){if(b===\"data\"&&f.isEmptyObject(a[b]))continue;if(b!==\"toJSON\")return!1}return!0}function l(a,c,d){if(d===b&&a.nodeType===1){var e=\"data-\"+c.replace(k,\"-$1\").toLowerCase();d=a.getAttribute(e);if(typeof d==\"string\"){try{d=d===\"true\"?!0:d===\"false\"?!1:d===\"null\"?null:f.isNumeric(d)?+d:j.test(d)?f.parseJSON(d):d}catch(g){}f.data(a,c,d)}else d=b}return d}function h(a){var b=g[a]={},c,d;a=a.split(/\\s+/);for(c=0,d=a.length;c<d;c++)b[a[c]]=!0;return b}var c=a.document,d=a.navigator,e=a.location,f=function(){function J(){if(!e.isReady){try{c.documentElement.doScroll(\"left\")}catch(a){setTimeout(J,1);return}e.ready()}}var e=function(a,b){return new e.fn.init(a,b,h)},f=a.jQuery,g=a.$,h,i=/^(?:[^#<]*(<[\\w\\W]+>)[^>]*$|#([\\w\\-]*)$)/,j=/\\S/,k=/^\\s+/,l=/\\s+$/,m=/^<(\\w+)\\s*\\/?>(?:<\\/\\1>)?$/,n=/^[\\],:{}\\s]*$/,o=/\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g,p=/\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g,q=/(?:^|:|,)(?:\\s*\\[)+/g,r=/(webkit)[ \\/]([\\w.]+)/,s=/(opera)(?:.*version)?[ \\/]([\\w.]+)/,t=/(msie) ([\\w.]+)/,u=/(mozilla)(?:.*? rv:([\\w.]+))?/,v=/-([a-z]|[0-9])/ig,w=/^-ms-/,x=function(a,b){return(b+\"\").toUpperCase()},y=d.userAgent,z,A,B,C=Object.prototype.toString,D=Object.prototype.hasOwnProperty,E=Array.prototype.push,F=Array.prototype.slice,G=String.prototype.trim,H=Array.prototype.indexOf,I={};e.fn=e.prototype={constructor:e,init:function(a,d,f){var g,h,j,k;if(!a)return this;if(a.nodeType){this.context=this[0]=a,this.length=1;return this}if(a===\"body\"&&!d&&c.body){this.context=c,this[0]=c.body,this.selector=a,this.length=1;return this}if(typeof a==\"string\"){a.charAt(0)!==\"<\"||a.charAt(a.length-1)!==\">\"||a.length<3?g=i.exec(a):g=[null,a,null];if(g&&(g[1]||!d)){if(g[1]){d=d instanceof e?d[0]:d,k=d?d.ownerDocument||d:c,j=m.exec(a),j?e.isPlainObject(d)?(a=[c.createElement(j[1])],e.fn.attr.call(a,d,!0)):a=[k.createElement(j[1])]:(j=e.buildFragment([g[1]],[k]),a=(j.cacheable?e.clone(j.fragment):j.fragment).childNodes);return e.merge(this,a)}h=c.getElementById(g[2]);if(h&&h.parentNode){if(h.id!==g[2])return f.find(a);this.length=1,this[0]=h}this.context=c,this.selector=a;return this}return!d||d.jquery?(d||f).find(a):this.constructor(d).find(a)}if(e.isFunction(a))return f.ready(a);a.selector!==b&&(this.selector=a.selector,this.context=a.context);return e.makeArray(a,this)},selector:\"\",jquery:\"1.7.2\",length:0,size:function(){return this.length},toArray:function(){return F.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=this.constructor();e.isArray(a)?E.apply(d,a):e.merge(d,a),d.prevObject=this,d.context=this.context,b===\"find\"?d.selector=this.selector+(this.selector?\" \":\"\")+c:b&&(d.selector=this.selector+\".\"+b+\"(\"+c+\")\");return d},each:function(a,b){return e.each(this,a,b)},ready:function(a){e.bindReady(),A.add(a);return this},eq:function(a){a=+a;return a===-1?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(F.apply(this,arguments),\"slice\",F.call(arguments).join(\",\"))},map:function(a){return this.pushStack(e.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:E,sort:[].sort,splice:[].splice},e.fn.init.prototype=e.fn,e.extend=e.fn.extend=function(){var a,c,d,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;typeof i==\"boolean\"&&(l=i,i=arguments[1]||{},j=2),typeof i!=\"object\"&&!e.isFunction(i)&&(i={}),k===j&&(i=this,--j);for(;j<k;j++)if((a=arguments[j])!=null)for(c in a){d=i[c],f=a[c];if(i===f)continue;l&&f&&(e.isPlainObject(f)||(g=e.isArray(f)))?(g?(g=!1,h=d&&e.isArray(d)?d:[]):h=d&&e.isPlainObject(d)?d:{},i[c]=e.extend(l,h,f)):f!==b&&(i[c]=f)}return i},e.extend({noConflict:function(b){a.$===e&&(a.$=g),b&&a.jQuery===e&&(a.jQuery=f);return e},isReady:!1,readyWait:1,holdReady:function(a){a?e.readyWait++:e.ready(!0)},ready:function(a){if(a===!0&&!--e.readyWait||a!==!0&&!e.isReady){if(!c.body)return setTimeout(e.ready,1);e.isReady=!0;if(a!==!0&&--e.readyWait>0)return;A.fireWith(c,[e]),e.fn.trigger&&e(c).trigger(\"ready\").off(\"ready\")}},bindReady:function(){if(!A){A=e.Callbacks(\"once memory\");if(c.readyState===\"complete\")return setTimeout(e.ready,1);if(c.addEventListener)c.addEventListener(\"DOMContentLoaded\",B,!1),a.addEventListener(\"load\",e.ready,!1);else if(c.attachEvent){c.attachEvent(\"onreadystatechange\",B),a.attachEvent(\"onload\",e.ready);var b=!1;try{b=a.frameElement==null}catch(d){}c.documentElement.doScroll&&b&&J()}}},isFunction:function(a){return e.type(a)===\"function\"},isArray:Array.isArray||function(a){return e.type(a)===\"array\"},isWindow:function(a){return a!=null&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return a==null?String(a):I[C.call(a)]||\"object\"},isPlainObject:function(a){if(!a||e.type(a)!==\"object\"||a.nodeType||e.isWindow(a))return!1;try{if(a.constructor&&!D.call(a,\"constructor\")&&!D.call(a.constructor.prototype,\"isPrototypeOf\"))return!1}catch(c){return!1}var d;for(d in a);return d===b||D.call(a,d)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw new Error(a)},parseJSON:function(b){if(typeof b!=\"string\"||!b)return null;b=e.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(n.test(b.replace(o,\"@\").replace(p,\"]\").replace(q,\"\")))return(new Function(\"return \"+b))();e.error(\"Invalid JSON: \"+b)},parseXML:function(c){if(typeof c!=\"string\"||!c)return null;var d,f;try{a.DOMParser?(f=new DOMParser,d=f.parseFromString(c,\"text/xml\")):(d=new ActiveXObject(\"Microsoft.XMLDOM\"),d.async=\"false\",d.loadXML(c))}catch(g){d=b}(!d||!d.documentElement||d.getElementsByTagName(\"parsererror\").length)&&e.error(\"Invalid XML: \"+c);return d},noop:function(){},globalEval:function(b){b&&j.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(w,\"ms-\").replace(v,x)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var f,g=0,h=a.length,i=h===b||e.isFunction(a);if(d){if(i){for(f in a)if(c.apply(a[f],d)===!1)break}else for(;g<h;)if(c.apply(a[g++],d)===!1)break}else if(i){for(f in a)if(c.call(a[f],f,a[f])===!1)break}else for(;g<h;)if(c.call(a[g],g,a[g++])===!1)break;return a},trim:G?function(a){return a==null?\"\":G.call(a)}:function(a){return a==null?\"\":(a+\"\").replace(k,\"\").replace(l,\"\")},makeArray:function(a,b){var c=b||[];if(a!=null){var d=e.type(a);a.length==null||d===\"string\"||d===\"function\"||d===\"regexp\"||e.isWindow(a)?E.call(c,a):e.merge(c,a)}return c},inArray:function(a,b,c){var d;if(b){if(H)return H.call(b,a,c);d=b.length,c=c?c<0?Math.max(0,d+c):c:0;for(;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=a.length,e=0;if(typeof c.length==\"number\")for(var f=c.length;e<f;e++)a[d++]=c[e];else while(c[e]!==b)a[d++]=c[e++];a.length=d;return a},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,g=a.length;f<g;f++)e=!!b(a[f],f),c!==e&&d.push(a[f]);return d},map:function(a,c,d){var f,g,h=[],i=0,j=a.length,k=a instanceof e||j!==b&&typeof j==\"number\"&&(j>0&&a[0]&&a[j-1]||j===0||e.isArray(a));if(k)for(;i<j;i++)f=c(a[i],i,d),f!=null&&(h[h.length]=f);else for(g in a)f=c(a[g],g,d),f!=null&&(h[h.length]=f);return h.concat.apply([],h)},guid:1,proxy:function(a,c){if(typeof c==\"string\"){var d=a[c];c=a,a=d}if(!e.isFunction(a))return b;var f=F.call(arguments,2),g=function(){return a.apply(c,f.concat(F.call(arguments)))};g.guid=a.guid=a.guid||g.guid||e.guid++;return g},access:function(a,c,d,f,g,h,i){var j,k=d==null,l=0,m=a.length;if(d&&typeof d==\"object\"){for(l in d)e.access(a,c,l,d[l],1,h,f);g=1}else if(f!==b){j=i===b&&e.isFunction(f),k&&(j?(j=c,c=function(a,b,c){return j.call(e(a),c)}):(c.call(a,f),c=null));if(c)for(;l<m;l++)c(a[l],d,j?f.call(a[l],l,c(a[l],d)):f,i);g=1}return g?a:k?c.call(a):m?c(a[0],d):h},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();var b=r.exec(a)||s.exec(a)||t.exec(a)||a.indexOf(\"compatible\")<0&&u.exec(a)||[];return{browser:b[1]||\"\",version:b[2]||\"0\"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}e.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(d,f){f&&f instanceof e&&!(f instanceof a)&&(f=a(f));return e.fn.init.call(this,d,f,b)},a.fn.init.prototype=a.fn;var b=a(c);return a},browser:{}}),e.each(\"Boolean Number String Function Array Date RegExp Object\".split(\" \"),function(a,b){I[\"[object \"+b+\"]\"]=b.toLowerCase()}),z=e.uaMatch(y),z.browser&&(e.browser[z.browser]=!0,e.browser.version=z.version),e.browser.webkit&&(e.browser.safari=!0),j.test(\" \")&&(k=/^[\\s\\xA0]+/,l=/[\\s\\xA0]+$/),h=e(c),c.addEventListener?B=function(){c.removeEventListener(\"DOMContentLoaded\",B,!1),e.ready()}:c.attachEvent&&(B=function(){c.readyState===\"complete\"&&(c.detachEvent(\"onreadystatechange\",B),e.ready())});return e}(),g={};f.Callbacks=function(a){a=a?g[a]||h(a):{};var c=[],d=[],e,i,j,k,l,m,n=function(b){var d,e,g,h,i;for(d=0,e=b.length;d<e;d++)g=b[d],h=f.type(g),h===\"array\"?n(g):h===\"function\"&&(!a.unique||!p.has(g))&&c.push(g)},o=function(b,f){f=f||[],e=!a.memory||[b,f],i=!0,j=!0,m=k||0,k=0,l=c.length;for(;c&&m<l;m++)if(c[m].apply(b,f)===!1&&a.stopOnFalse){e=!0;break}j=!1,c&&(a.once?e===!0?p.disable():c=[]:d&&d.length&&(e=d.shift(),p.fireWith(e[0],e[1])))},p={add:function(){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}return this},remove:function(){if(c){var b=arguments,d=0,e=b.length;for(;d<e;d++)for(var f=0;f<c.length;f++)if(b[d]===c[f]){j&&f<=l&&(l--,f<=m&&m--),c.splice(f--,1);if(a.unique)break}}return this},has:function(a){if(c){var b=0,d=c.length;for(;b<d;b++)if(a===c[b])return!0}return!1},empty:function(){c=[];return this},disable:function(){c=d=e=b;return this},disabled:function(){return!c},lock:function(){d=b,(!e||e===!0)&&p.disable();return this},locked:function(){return!d},fireWith:function(b,c){d&&(j?a.once||d.push([b,c]):(!a.once||!e)&&o(b,c));return this},fire:function(){p.fireWith(this,arguments);return this},fired:function(){return!!i}};return p};var i=[].slice;f.extend({Deferred:function(a){var b=f.Callbacks(\"once memory\"),c=f.Callbacks(\"once memory\"),d=f.Callbacks(\"memory\"),e=\"pending\",g={resolve:b,reject:c,notify:d},h={done:b.add,fail:c.add,progress:d.add,state:function(){return e},isResolved:b.fired,isRejected:c.fired,then:function(a,b,c){i.done(a).fail(b).progress(c);return this},always:function(){i.done.apply(i,arguments).fail.apply(i,arguments);return this},pipe:function(a,b,c){return f.Deferred(function(d){f.each({done:[a,\"resolve\"],fail:[b,\"reject\"],progress:[c,\"notify\"]},function(a,b){var c=b[0],e=b[1],g;f.isFunction(c)?i[a](function(){g=c.apply(this,arguments),g&&f.isFunction(g.promise)?g.promise().then(d.resolve,d.reject,d.notify):d[e+\"With\"](this===i?d:this,[g])}):i[a](d[e])})}).promise()},promise:function(a){if(a==null)a=h;else for(var b in h)a[b]=h[b];return a}},i=h.promise({}),j;for(j in g)i[j]=g[j].fire,i[j+\"With\"]=g[j].fireWith;i.done(function(){e=\"resolved\"},c.disable,d.lock).fail(function(){e=\"rejected\"},b.disable,d.lock),a&&a.call(i,i);return i},when:function(a){function m(a){return function(b){e[a]=arguments.length>1?i.call(arguments,0):b,j.notifyWith(k,e)}}function l(a){return function(c){b[a]=arguments.length>1?i.call(arguments,0):c,--g||j.resolveWith(j,b)}}var b=i.call(arguments,0),c=0,d=b.length,e=Array(d),g=d,h=d,j=d<=1&&a&&f.isFunction(a.promise)?a:f.Deferred(),k=j.promise();if(d>1){for(;c<d;c++)b[c]&&b[c].promise&&f.isFunction(b[c].promise)?b[c].promise().then(l(c),j.reject,m(c)):--g;g||j.resolveWith(j,b)}else j!==a&&j.resolveWith(j,d?[a]:[]);return k}}),f.support=function(){var b,d,e,g,h,i,j,k,l,m,n,o,p=c.createElement(\"div\"),q=c.documentElement;p.setAttribute(\"className\",\"t\"),p.innerHTML=\"   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>\",d=p.getElementsByTagName(\"*\"),e=p.getElementsByTagName(\"a\")[0];if(!d||!d.length||!e)return{};g=c.createElement(\"select\"),h=g.appendChild(c.createElement(\"option\")),i=p.getElementsByTagName(\"input\")[0],b={leadingWhitespace:p.firstChild.nodeType===3,tbody:!p.getElementsByTagName(\"tbody\").length,htmlSerialize:!!p.getElementsByTagName(\"link\").length,style:/top/.test(e.getAttribute(\"style\")),hrefNormalized:e.getAttribute(\"href\")===\"/a\",opacity:/^0.55/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,checkOn:i.value===\"on\",optSelected:h.selected,getSetAttribute:p.className!==\"t\",enctype:!!c.createElement(\"form\").enctype,html5Clone:c.createElement(\"nav\").cloneNode(!0).outerHTML!==\"<:nav></:nav>\",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,pixelMargin:!0},f.boxModel=b.boxModel=c.compatMode===\"CSS1Compat\",i.checked=!0,b.noCloneChecked=i.cloneNode(!0).checked,g.disabled=!0,b.optDisabled=!h.disabled;try{delete p.test}catch(r){b.deleteExpando=!1}!p.addEventListener&&p.attachEvent&&p.fireEvent&&(p.attachEvent(\"onclick\",function(){b.noCloneEvent=!1}),p.cloneNode(!0).fireEvent(\"onclick\")),i=c.createElement(\"input\"),i.value=\"t\",i.setAttribute(\"type\",\"radio\"),b.radioValue=i.value===\"t\",i.setAttribute(\"checked\",\"checked\"),i.setAttribute(\"name\",\"t\"),p.appendChild(i),j=c.createDocumentFragment(),j.appendChild(p.lastChild),b.checkClone=j.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=i.checked,j.removeChild(i),j.appendChild(p);if(p.attachEvent)for(n in{submit:1,change:1,focusin:1})m=\"on\"+n,o=m in p,o||(p.setAttribute(m,\"return;\"),o=typeof p[m]==\"function\"),b[n+\"Bubbles\"]=o;j.removeChild(p),j=g=h=p=i=null,f(function(){var d,e,g,h,i,j,l,m,n,q,r,s,t,u=c.getElementsByTagName(\"body\")[0];!u||(m=1,t=\"padding:0;margin:0;border:\",r=\"position:absolute;top:0;left:0;width:1px;height:1px;\",s=t+\"0;visibility:hidden;\",n=\"style='\"+r+t+\"5px solid #000;\",q=\"<div \"+n+\"display:block;'><div style='\"+t+\"0;display:block;overflow:hidden;'></div></div>\"+\"<table \"+n+\"' cellpadding='0' cellspacing='0'>\"+\"<tr><td></td></tr></table>\",d=c.createElement(\"div\"),d.style.cssText=s+\"width:0;height:0;position:static;top:0;margin-top:\"+m+\"px\",u.insertBefore(d,u.firstChild),p=c.createElement(\"div\"),d.appendChild(p),p.innerHTML=\"<table><tr><td style='\"+t+\"0;display:none'></td><td>t</td></tr></table>\",k=p.getElementsByTagName(\"td\"),o=k[0].offsetHeight===0,k[0].style.display=\"\",k[1].style.display=\"none\",b.reliableHiddenOffsets=o&&k[0].offsetHeight===0,a.getComputedStyle&&(p.innerHTML=\"\",l=c.createElement(\"div\"),l.style.width=\"0\",l.style.marginRight=\"0\",p.style.width=\"2px\",p.appendChild(l),b.reliableMarginRight=(parseInt((a.getComputedStyle(l,null)||{marginRight:0}).marginRight,10)||0)===0),typeof p.style.zoom!=\"undefined\"&&(p.innerHTML=\"\",p.style.width=p.style.padding=\"1px\",p.style.border=0,p.style.overflow=\"hidden\",p.style.display=\"inline\",p.style.zoom=1,b.inlineBlockNeedsLayout=p.offsetWidth===3,p.style.display=\"block\",p.style.overflow=\"visible\",p.innerHTML=\"<div style='width:5px;'></div>\",b.shrinkWrapBlocks=p.offsetWidth!==3),p.style.cssText=r+s,p.innerHTML=q,e=p.firstChild,g=e.firstChild,i=e.nextSibling.firstChild.firstChild,j={doesNotAddBorder:g.offsetTop!==5,doesAddBorderForTableAndCells:i.offsetTop===5},g.style.position=\"fixed\",g.style.top=\"20px\",j.fixedPosition=g.offsetTop===20||g.offsetTop===15,g.style.position=g.style.top=\"\",e.style.overflow=\"hidden\",e.style.position=\"relative\",j.subtractsBorderForOverflowNotVisible=g.offsetTop===-5,j.doesNotIncludeMarginInBodyOffset=u.offsetTop!==m,a.getComputedStyle&&(p.style.marginTop=\"1%\",b.pixelMargin=(a.getComputedStyle(p,null)||{marginTop:0}).marginTop!==\"1%\"),typeof d.style.zoom!=\"undefined\"&&(d.style.zoom=1),u.removeChild(d),l=p=d=null,f.extend(b,j))});return b}();var j=/^(?:\\{.*\\}|\\[.*\\])$/,k=/([A-Z])/g;f.extend({cache:{},uuid:0,expando:\"jQuery\"+(f.fn.jquery+Math.random()).replace(/\\D/g,\"\"),noData:{embed:!0,object:\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\",applet:!0},hasData:function(a){a=a.nodeType?f.cache[a[f.expando]]:a[f.expando];return!!a&&!m(a)},data:function(a,c,d,e){if(!!f.acceptData(a)){var g,h,i,j=f.expando,k=typeof c==\"string\",l=a.nodeType,m=l?f.cache:a,n=l?a[j]:a[j]&&j,o=c===\"events\";if((!n||!m[n]||!o&&!e&&!m[n].data)&&k&&d===b)return;n||(l?a[j]=n=++f.uuid:n=j),m[n]||(m[n]={},l||(m[n].toJSON=f.noop));if(typeof c==\"object\"||typeof c==\"function\")e?m[n]=f.extend(m[n],c):m[n].data=f.extend(m[n].data,c);g=h=m[n],e||(h.data||(h.data={}),h=h.data),d!==b&&(h[f.camelCase(c)]=d);if(o&&!h[c])return g.events;k?(i=h[c],i==null&&(i=h[f.camelCase(c)])):i=h;return i}},removeData:function(a,b,c){if(!!f.acceptData(a)){var d,e,g,h=f.expando,i=a.nodeType,j=i?f.cache:a,k=i?a[h]:h;if(!j[k])return;if(b){d=c?j[k]:j[k].data;if(d){f.isArray(b)||(b in d?b=[b]:(b=f.camelCase(b),b in d?b=[b]:b=b.split(\" \")));for(e=0,g=b.length;e<g;e++)delete d[b[e]];if(!(c?m:f.isEmptyObject)(d))return}}if(!c){delete j[k].data;if(!m(j[k]))return}f.support.deleteExpando||!j.setInterval?delete j[k]:j[k]=null,i&&(f.support.deleteExpando?delete a[h]:a.removeAttribute?a.removeAttribute(h):a[h]=null)}},_data:function(a,b,c){return f.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=f.noData[a.nodeName.toLowerCase()];if(b)return b!==!0&&a.getAttribute(\"classid\")===b}return!0}}),f.fn.extend({data:function(a,c){var d,e,g,h,i,j=this[0],k=0,m=null;if(a===b){if(this.length){m=f.data(j);if(j.nodeType===1&&!f._data(j,\"parsedAttrs\")){g=j.attributes;for(i=g.length;k<i;k++)h=g[k].name,h.indexOf(\"data-\")===0&&(h=f.camelCase(h.substring(5)),l(j,h,m[h]));f._data(j,\"parsedAttrs\",!0)}}return m}if(typeof a==\"object\")return this.each(function(){f.data(this,a)});d=a.split(\".\",2),d[1]=d[1]?\".\"+d[1]:\"\",e=d[1]+\"!\";return f.access(this,function(c){if(c===b){m=this.triggerHandler(\"getData\"+e,[d[0]]),m===b&&j&&(m=f.data(j,a),m=l(j,a,m));return m===b&&d[1]?this.data(d[0]):m}d[1]=c,this.each(function(){var b=f(this);b.triggerHandler(\"setData\"+e,d),f.data(this,a,c),b.triggerHandler(\"changeData\"+e,d)})},null,c,arguments.length>1,null,!1)},removeData:function(a){return this.each(function(){f.removeData(this,a)})}}),f.extend({_mark:function(a,b){a&&(b=(b||\"fx\")+\"mark\",f._data(a,b,(f._data(a,b)||0)+1))},_unmark:function(a,b,c){a!==!0&&(c=b,b=a,a=!1);if(b){c=c||\"fx\";var d=c+\"mark\",e=a?0:(f._data(b,d)||1)-1;e?f._data(b,d,e):(f.removeData(b,d,!0),n(b,c,\"mark\"))}},queue:function(a,b,c){var d;if(a){b=(b||\"fx\")+\"queue\",d=f._data(a,b),c&&(!d||f.isArray(c)?d=f._data(a,b,f.makeArray(c)):d.push(c));return d||[]}},dequeue:function(a,b){b=b||\"fx\";var c=f.queue(a,b),d=c.shift(),e={};d===\"inprogress\"&&(d=c.shift()),d&&(b===\"fx\"&&c.unshift(\"inprogress\"),f._data(a,b+\".run\",e),d.call(a,function(){f.dequeue(a,b)},e)),c.length||(f.removeData(a,b+\"queue \"+b+\".run\",!0),n(a,b,\"queue\"))}}),f.fn.extend({queue:function(a,c){var d=2;typeof a!=\"string\"&&(c=a,a=\"fx\",d--);if(arguments.length<d)return f.queue(this[0],a);return c===b?this:this.each(function(){var b=f.queue(this,a,c);a===\"fx\"&&b[0]!==\"inprogress\"&&f.dequeue(this,a)})},dequeue:function(a){return this.each(function(){f.dequeue(this,a)})},delay:function(a,b){a=f.fx?f.fx.speeds[a]||a:a,b=b||\"fx\";return this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||\"fx\",[])},promise:function(a,c){function m(){--h||d.resolveWith(e,[e])}typeof a!=\"string\"&&(c=a,a=b),a=a||\"fx\";var d=f.Deferred(),e=this,g=e.length,h=1,i=a+\"defer\",j=a+\"queue\",k=a+\"mark\",l;while(g--)if(l=f.data(e[g],i,b,!0)||(f.data(e[g],j,b,!0)||f.data(e[g],k,b,!0))&&f.data(e[g],i,f.Callbacks(\"once memory\"),!0))h++,l.add(m);m();return d.promise(c)}});var o=/[\\n\\t\\r]/g,p=/\\s+/,q=/\\r/g,r=/^(?:button|input)$/i,s=/^(?:button|input|object|select|textarea)$/i,t=/^a(?:rea)?$/i,u=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,v=f.support.getSetAttribute,w,x,y;f.fn.extend({attr:function(a,b){return f.access(this,f.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){f.removeAttr(this,a)})},prop:function(a,b){return f.access(this,f.prop,a,b,arguments.length>1)},removeProp:function(a){a=f.propFix[a]||a;return this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,g,h,i;if(f.isFunction(a))return this.each(function(b){f(this).addClass(a.call(this,b,this.className))});if(a&&typeof a==\"string\"){b=a.split(p);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1)if(!e.className&&b.length===1)e.className=a;else{g=\" \"+e.className+\" \";for(h=0,i=b.length;h<i;h++)~g.indexOf(\" \"+b[h]+\" \")||(g+=b[h]+\" \");e.className=f.trim(g)}}}return this},removeClass:function(a){var c,d,e,g,h,i,j;if(f.isFunction(a))return this.each(function(b){f(this).removeClass(a.call(this,b,this.className))});if(a&&typeof a==\"string\"||a===b){c=(a||\"\").split(p);for(d=0,e=this.length;d<e;d++){g=this[d];if(g.nodeType===1&&g.className)if(a){h=(\" \"+g.className+\" \").replace(o,\" \");for(i=0,j=c.length;i<j;i++)h=h.replace(\" \"+c[i]+\" \",\" \");g.className=f.trim(h)}else g.className=\"\"}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b==\"boolean\";if(f.isFunction(a))return this.each(function(c){f(this).toggleClass(a.call(this,c,this.className,b),b)});return this.each(function(){if(c===\"string\"){var e,g=0,h=f(this),i=b,j=a.split(p);while(e=j[g++])i=d?i:!h.hasClass(e),h[i?\"addClass\":\"removeClass\"](e)}else if(c===\"undefined\"||c===\"boolean\")this.className&&f._data(this,\"__className__\",this.className),this.className=this.className||a===!1?\"\":f._data(this,\"__className__\")||\"\"})},hasClass:function(a){var b=\" \"+a+\" \",c=0,d=this.length;for(;c<d;c++)if(this[c].nodeType===1&&(\" \"+this[c].className+\" \").replace(o,\" \").indexOf(b)>-1)return!0;return!1},val:function(a){var c,d,e,g=this[0];{if(!!arguments.length){e=f.isFunction(a);return this.each(function(d){var g=f(this),h;if(this.nodeType===1){e?h=a.call(this,d,g.val()):h=a,h==null?h=\"\":typeof h==\"number\"?h+=\"\":f.isArray(h)&&(h=f.map(h,function(a){return a==null?\"\":a+\"\"})),c=f.valHooks[this.type]||f.valHooks[this.nodeName.toLowerCase()];if(!c||!(\"set\"in c)||c.set(this,h,\"value\")===b)this.value=h}})}if(g){c=f.valHooks[g.type]||f.valHooks[g.nodeName.toLowerCase()];if(c&&\"get\"in c&&(d=c.get(g,\"value\"))!==b)return d;d=g.value;return typeof d==\"string\"?d.replace(q,\"\"):d==null?\"\":d}}}}),f.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,g=a.selectedIndex,h=[],i=a.options,j=a.type===\"select-one\";if(g<0)return null;c=j?g:0,d=j?g+1:i.length;for(;c<d;c++){e=i[c];if(e.selected&&(f.support.optDisabled?!e.disabled:e.getAttribute(\"disabled\")===null)&&(!e.parentNode.disabled||!f.nodeName(e.parentNode,\"optgroup\"))){b=f(e).val();if(j)return b;h.push(b)}}if(j&&!h.length&&i.length)return f(i[g]).val();return h},set:function(a,b){var c=f.makeArray(b);f(a).find(\"option\").each(function(){this.selected=f.inArray(f(this).val(),c)>=0}),c.length||(a.selectedIndex=-1);return c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,c,d,e){var g,h,i,j=a.nodeType;if(!!a&&j!==3&&j!==8&&j!==2){if(e&&c in f.attrFn)return f(a)[c](d);if(typeof a.getAttribute==\"undefined\")return f.prop(a,c,d);i=j!==1||!f.isXMLDoc(a),i&&(c=c.toLowerCase(),h=f.attrHooks[c]||(u.test(c)?x:w));if(d!==b){if(d===null){f.removeAttr(a,c);return}if(h&&\"set\"in h&&i&&(g=h.set(a,d,c))!==b)return g;a.setAttribute(c,\"\"+d);return d}if(h&&\"get\"in h&&i&&(g=h.get(a,c))!==null)return g;g=a.getAttribute(c);return g===null?b:g}},removeAttr:function(a,b){var c,d,e,g,h,i=0;if(b&&a.nodeType===1){d=b.toLowerCase().split(p),g=d.length;for(;i<g;i++)e=d[i],e&&(c=f.propFix[e]||e,h=u.test(e),h||f.attr(a,e,\"\"),a.removeAttribute(v?e:c),h&&c in a&&(a[c]=!1))}},attrHooks:{type:{set:function(a,b){if(r.test(a.nodeName)&&a.parentNode)f.error(\"type property can't be changed\");else if(!f.support.radioValue&&b===\"radio\"&&f.nodeName(a,\"input\")){var c=a.value;a.setAttribute(\"type\",b),c&&(a.value=c);return b}}},value:{get:function(a,b){if(w&&f.nodeName(a,\"button\"))return w.get(a,b);return b in a?a.value:null},set:function(a,b,c){if(w&&f.nodeName(a,\"button\"))return w.set(a,b,c);a.value=b}}},propFix:{tabindex:\"tabIndex\",readonly:\"readOnly\",\"for\":\"htmlFor\",\"class\":\"className\",maxlength:\"maxLength\",cellspacing:\"cellSpacing\",cellpadding:\"cellPadding\",rowspan:\"rowSpan\",colspan:\"colSpan\",usemap:\"useMap\",frameborder:\"frameBorder\",contenteditable:\"contentEditable\"},prop:function(a,c,d){var e,g,h,i=a.nodeType;if(!!a&&i!==3&&i!==8&&i!==2){h=i!==1||!f.isXMLDoc(a),h&&(c=f.propFix[c]||c,g=f.propHooks[c]);return d!==b?g&&\"set\"in g&&(e=g.set(a,d,c))!==b?e:a[c]=d:g&&\"get\"in g&&(e=g.get(a,c))!==null?e:a[c]}},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode(\"tabindex\");return c&&c.specified?parseInt(c.value,10):s.test(a.nodeName)||t.test(a.nodeName)&&a.href?0:b}}}}),f.attrHooks.tabindex=f.propHooks.tabIndex,x={get:function(a,c){var d,e=f.prop(a,c);return e===!0||typeof e!=\"boolean\"&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;b===!1?f.removeAttr(a,c):(d=f.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase()));return c}},v||(y={name:!0,id:!0,coords:!0},w=f.valHooks.button={get:function(a,c){var d;d=a.getAttributeNode(c);return d&&(y[c]?d.nodeValue!==\"\":d.specified)?d.nodeValue:b},set:function(a,b,d){var e=a.getAttributeNode(d);e||(e=c.createAttribute(d),a.setAttributeNode(e));return e.nodeValue=b+\"\"}},f.attrHooks.tabindex.set=w.set,f.each([\"width\",\"height\"],function(a,b){f.attrHooks[b]=f.extend(f.attrHooks[b],{set:function(a,c){if(c===\"\"){a.setAttribute(b,\"auto\");return c}}})}),f.attrHooks.contenteditable={get:w.get,set:function(a,b,c){b===\"\"&&(b=\"false\"),w.set(a,b,c)}}),f.support.hrefNormalized||f.each([\"href\",\"src\",\"width\",\"height\"],function(a,c){f.attrHooks[c]=f.extend(f.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}),f.support.style||(f.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=\"\"+b}}),f.support.optSelected||(f.propHooks.selected=f.extend(f.propHooks.selected,{get:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex);return null}})),f.support.enctype||(f.propFix.enctype=\"encoding\"),f.support.checkOn||f.each([\"radio\",\"checkbox\"],function(){f.valHooks[this]={get:function(a){return a.getAttribute(\"value\")===null?\"on\":a.value}}}),f.each([\"radio\",\"checkbox\"],function(){f.valHooks[this]=f.extend(f.valHooks[this],{set:function(a,b){if(f.isArray(b))return a.checked=f.inArray(f(a).val(),b)>=0}})});var z=/^(?:textarea|input|select)$/i,A=/^([^\\.]*)?(?:\\.(.+))?$/,B=/(?:^|\\s)hover(\\.\\S+)?\\b/,C=/^key/,D=/^(?:mouse|contextmenu)|click/,E=/^(?:focusinfocus|focusoutblur)$/,F=/^(\\w*)(?:#([\\w\\-]+))?(?:\\.([\\w\\-]+))?$/,G=function(\na){var b=F.exec(a);b&&(b[1]=(b[1]||\"\").toLowerCase(),b[3]=b[3]&&new RegExp(\"(?:^|\\\\s)\"+b[3]+\"(?:\\\\s|$)\"));return b},H=function(a,b){var c=a.attributes||{};return(!b[1]||a.nodeName.toLowerCase()===b[1])&&(!b[2]||(c.id||{}).value===b[2])&&(!b[3]||b[3].test((c[\"class\"]||{}).value))},I=function(a){return f.event.special.hover?a:a.replace(B,\"mouseenter$1 mouseleave$1\")};f.event={add:function(a,c,d,e,g){var h,i,j,k,l,m,n,o,p,q,r,s;if(!(a.nodeType===3||a.nodeType===8||!c||!d||!(h=f._data(a)))){d.handler&&(p=d,d=p.handler,g=p.selector),d.guid||(d.guid=f.guid++),j=h.events,j||(h.events=j={}),i=h.handle,i||(h.handle=i=function(a){return typeof f!=\"undefined\"&&(!a||f.event.triggered!==a.type)?f.event.dispatch.apply(i.elem,arguments):b},i.elem=a),c=f.trim(I(c)).split(\" \");for(k=0;k<c.length;k++){l=A.exec(c[k])||[],m=l[1],n=(l[2]||\"\").split(\".\").sort(),s=f.event.special[m]||{},m=(g?s.delegateType:s.bindType)||m,s=f.event.special[m]||{},o=f.extend({type:m,origType:l[1],data:e,handler:d,guid:d.guid,selector:g,quick:g&&G(g),namespace:n.join(\".\")},p),r=j[m];if(!r){r=j[m]=[],r.delegateCount=0;if(!s.setup||s.setup.call(a,e,n,i)===!1)a.addEventListener?a.addEventListener(m,i,!1):a.attachEvent&&a.attachEvent(\"on\"+m,i)}s.add&&(s.add.call(a,o),o.handler.guid||(o.handler.guid=d.guid)),g?r.splice(r.delegateCount++,0,o):r.push(o),f.event.global[m]=!0}a=null}},global:{},remove:function(a,b,c,d,e){var g=f.hasData(a)&&f._data(a),h,i,j,k,l,m,n,o,p,q,r,s;if(!!g&&!!(o=g.events)){b=f.trim(I(b||\"\")).split(\" \");for(h=0;h<b.length;h++){i=A.exec(b[h])||[],j=k=i[1],l=i[2];if(!j){for(j in o)f.event.remove(a,j+b[h],c,d,!0);continue}p=f.event.special[j]||{},j=(d?p.delegateType:p.bindType)||j,r=o[j]||[],m=r.length,l=l?new RegExp(\"(^|\\\\.)\"+l.split(\".\").sort().join(\"\\\\.(?:.*\\\\.)?\")+\"(\\\\.|$)\"):null;for(n=0;n<r.length;n++)s=r[n],(e||k===s.origType)&&(!c||c.guid===s.guid)&&(!l||l.test(s.namespace))&&(!d||d===s.selector||d===\"**\"&&s.selector)&&(r.splice(n--,1),s.selector&&r.delegateCount--,p.remove&&p.remove.call(a,s));r.length===0&&m!==r.length&&((!p.teardown||p.teardown.call(a,l)===!1)&&f.removeEvent(a,j,g.handle),delete o[j])}f.isEmptyObject(o)&&(q=g.handle,q&&(q.elem=null),f.removeData(a,[\"events\",\"handle\"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,g){if(!e||e.nodeType!==3&&e.nodeType!==8){var h=c.type||c,i=[],j,k,l,m,n,o,p,q,r,s;if(E.test(h+f.event.triggered))return;h.indexOf(\"!\")>=0&&(h=h.slice(0,-1),k=!0),h.indexOf(\".\")>=0&&(i=h.split(\".\"),h=i.shift(),i.sort());if((!e||f.event.customEvent[h])&&!f.event.global[h])return;c=typeof c==\"object\"?c[f.expando]?c:new f.Event(h,c):new f.Event(h),c.type=h,c.isTrigger=!0,c.exclusive=k,c.namespace=i.join(\".\"),c.namespace_re=c.namespace?new RegExp(\"(^|\\\\.)\"+i.join(\"\\\\.(?:.*\\\\.)?\")+\"(\\\\.|$)\"):null,o=h.indexOf(\":\")<0?\"on\"+h:\"\";if(!e){j=f.cache;for(l in j)j[l].events&&j[l].events[h]&&f.event.trigger(c,d,j[l].handle.elem,!0);return}c.result=b,c.target||(c.target=e),d=d!=null?f.makeArray(d):[],d.unshift(c),p=f.event.special[h]||{};if(p.trigger&&p.trigger.apply(e,d)===!1)return;r=[[e,p.bindType||h]];if(!g&&!p.noBubble&&!f.isWindow(e)){s=p.delegateType||h,m=E.test(s+h)?e:e.parentNode,n=null;for(;m;m=m.parentNode)r.push([m,s]),n=m;n&&n===e.ownerDocument&&r.push([n.defaultView||n.parentWindow||a,s])}for(l=0;l<r.length&&!c.isPropagationStopped();l++)m=r[l][0],c.type=r[l][1],q=(f._data(m,\"events\")||{})[c.type]&&f._data(m,\"handle\"),q&&q.apply(m,d),q=o&&m[o],q&&f.acceptData(m)&&q.apply(m,d)===!1&&c.preventDefault();c.type=h,!g&&!c.isDefaultPrevented()&&(!p._default||p._default.apply(e.ownerDocument,d)===!1)&&(h!==\"click\"||!f.nodeName(e,\"a\"))&&f.acceptData(e)&&o&&e[h]&&(h!==\"focus\"&&h!==\"blur\"||c.target.offsetWidth!==0)&&!f.isWindow(e)&&(n=e[o],n&&(e[o]=null),f.event.triggered=h,e[h](),f.event.triggered=b,n&&(e[o]=n));return c.result}},dispatch:function(c){c=f.event.fix(c||a.event);var d=(f._data(this,\"events\")||{})[c.type]||[],e=d.delegateCount,g=[].slice.call(arguments,0),h=!c.exclusive&&!c.namespace,i=f.event.special[c.type]||{},j=[],k,l,m,n,o,p,q,r,s,t,u;g[0]=c,c.delegateTarget=this;if(!i.preDispatch||i.preDispatch.call(this,c)!==!1){if(e&&(!c.button||c.type!==\"click\")){n=f(this),n.context=this.ownerDocument||this;for(m=c.target;m!=this;m=m.parentNode||this)if(m.disabled!==!0){p={},r=[],n[0]=m;for(k=0;k<e;k++)s=d[k],t=s.selector,p[t]===b&&(p[t]=s.quick?H(m,s.quick):n.is(t)),p[t]&&r.push(s);r.length&&j.push({elem:m,matches:r})}}d.length>e&&j.push({elem:this,matches:d.slice(e)});for(k=0;k<j.length&&!c.isPropagationStopped();k++){q=j[k],c.currentTarget=q.elem;for(l=0;l<q.matches.length&&!c.isImmediatePropagationStopped();l++){s=q.matches[l];if(h||!c.namespace&&!s.namespace||c.namespace_re&&c.namespace_re.test(s.namespace))c.data=s.data,c.handleObj=s,o=((f.event.special[s.origType]||{}).handle||s.handler).apply(q.elem,g),o!==b&&(c.result=o,o===!1&&(c.preventDefault(),c.stopPropagation()))}}i.postDispatch&&i.postDispatch.call(this,c);return c.result}},props:\"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which\".split(\" \"),fixHooks:{},keyHooks:{props:\"char charCode key keyCode\".split(\" \"),filter:function(a,b){a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode);return a}},mouseHooks:{props:\"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement\".split(\" \"),filter:function(a,d){var e,f,g,h=d.button,i=d.fromElement;a.pageX==null&&d.clientX!=null&&(e=a.target.ownerDocument||c,f=e.documentElement,g=e.body,a.pageX=d.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=d.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)),!a.relatedTarget&&i&&(a.relatedTarget=i===a.target?d.toElement:i),!a.which&&h!==b&&(a.which=h&1?1:h&2?3:h&4?2:0);return a}},fix:function(a){if(a[f.expando])return a;var d,e,g=a,h=f.event.fixHooks[a.type]||{},i=h.props?this.props.concat(h.props):this.props;a=f.Event(g);for(d=i.length;d;)e=i[--d],a[e]=g[e];a.target||(a.target=g.srcElement||c),a.target.nodeType===3&&(a.target=a.target.parentNode),a.metaKey===b&&(a.metaKey=a.ctrlKey);return h.filter?h.filter(a,g):a},special:{ready:{setup:f.bindReady},load:{noBubble:!0},focus:{delegateType:\"focusin\"},blur:{delegateType:\"focusout\"},beforeunload:{setup:function(a,b,c){f.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=f.extend(new f.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?f.event.trigger(e,null,b):f.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},f.event.handle=f.event.dispatch,f.removeEvent=c.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent(\"on\"+b,c)},f.Event=function(a,b){if(!(this instanceof f.Event))return new f.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?K:J):this.type=a,b&&f.extend(this,b),this.timeStamp=a&&a.timeStamp||f.now(),this[f.expando]=!0},f.Event.prototype={preventDefault:function(){this.isDefaultPrevented=K;var a=this.originalEvent;!a||(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=K;var a=this.originalEvent;!a||(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=K,this.stopPropagation()},isDefaultPrevented:J,isPropagationStopped:J,isImmediatePropagationStopped:J},f.each({mouseenter:\"mouseover\",mouseleave:\"mouseout\"},function(a,b){f.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c=this,d=a.relatedTarget,e=a.handleObj,g=e.selector,h;if(!d||d!==c&&!f.contains(c,d))a.type=e.origType,h=e.handler.apply(this,arguments),a.type=b;return h}}}),f.support.submitBubbles||(f.event.special.submit={setup:function(){if(f.nodeName(this,\"form\"))return!1;f.event.add(this,\"click._submit keypress._submit\",function(a){var c=a.target,d=f.nodeName(c,\"input\")||f.nodeName(c,\"button\")?c.form:b;d&&!d._submit_attached&&(f.event.add(d,\"submit._submit\",function(a){a._submit_bubble=!0}),d._submit_attached=!0)})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&f.event.simulate(\"submit\",this.parentNode,a,!0))},teardown:function(){if(f.nodeName(this,\"form\"))return!1;f.event.remove(this,\"._submit\")}}),f.support.changeBubbles||(f.event.special.change={setup:function(){if(z.test(this.nodeName)){if(this.type===\"checkbox\"||this.type===\"radio\")f.event.add(this,\"propertychange._change\",function(a){a.originalEvent.propertyName===\"checked\"&&(this._just_changed=!0)}),f.event.add(this,\"click._change\",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1,f.event.simulate(\"change\",this,a,!0))});return!1}f.event.add(this,\"beforeactivate._change\",function(a){var b=a.target;z.test(b.nodeName)&&!b._change_attached&&(f.event.add(b,\"change._change\",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&f.event.simulate(\"change\",this.parentNode,a,!0)}),b._change_attached=!0)})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||b.type!==\"radio\"&&b.type!==\"checkbox\")return a.handleObj.handler.apply(this,arguments)},teardown:function(){f.event.remove(this,\"._change\");return z.test(this.nodeName)}}),f.support.focusinBubbles||f.each({focus:\"focusin\",blur:\"focusout\"},function(a,b){var d=0,e=function(a){f.event.simulate(b,a.target,f.event.fix(a),!0)};f.event.special[b]={setup:function(){d++===0&&c.addEventListener(a,e,!0)},teardown:function(){--d===0&&c.removeEventListener(a,e,!0)}}}),f.fn.extend({on:function(a,c,d,e,g){var h,i;if(typeof a==\"object\"){typeof c!=\"string\"&&(d=d||c,c=b);for(i in a)this.on(i,c,d,a[i],g);return this}d==null&&e==null?(e=c,d=c=b):e==null&&(typeof c==\"string\"?(e=d,d=b):(e=d,d=c,c=b));if(e===!1)e=J;else if(!e)return this;g===1&&(h=e,e=function(a){f().off(a);return h.apply(this,arguments)},e.guid=h.guid||(h.guid=f.guid++));return this.each(function(){f.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){if(a&&a.preventDefault&&a.handleObj){var e=a.handleObj;f(a.delegateTarget).off(e.namespace?e.origType+\".\"+e.namespace:e.origType,e.selector,e.handler);return this}if(typeof a==\"object\"){for(var g in a)this.off(g,c,a[g]);return this}if(c===!1||typeof c==\"function\")d=c,c=b;d===!1&&(d=J);return this.each(function(){f.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){f(this.context).on(a,this.selector,b,c);return this},die:function(a,b){f(this.context).off(a,this.selector||\"**\",b);return this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length==1?this.off(a,\"**\"):this.off(b,a,c)},trigger:function(a,b){return this.each(function(){f.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return f.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||f.guid++,d=0,e=function(c){var e=(f._data(this,\"lastToggle\"+a.guid)||0)%d;f._data(this,\"lastToggle\"+a.guid,e+1),c.preventDefault();return b[e].apply(this,arguments)||!1};e.guid=c;while(d<b.length)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),f.each(\"blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu\".split(\" \"),function(a,b){f.fn[b]=function(a,c){c==null&&(c=a,a=null);return arguments.length>0?this.on(b,null,a,c):this.trigger(b)},f.attrFn&&(f.attrFn[b]=!0),C.test(b)&&(f.event.fixHooks[b]=f.event.keyHooks),D.test(b)&&(f.event.fixHooks[b]=f.event.mouseHooks)}),function(){function x(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}if(j.nodeType===1){g||(j[d]=c,j.sizset=h);if(typeof b!=\"string\"){if(j===b){k=!0;break}}else if(m.filter(b,[j]).length>0){k=j;break}}j=j[a]}e[h]=k}}}function w(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}j.nodeType===1&&!g&&(j[d]=c,j.sizset=h);if(j.nodeName.toLowerCase()===b){k=j;break}j=j[a]}e[h]=k}}}var a=/((?:\\((?:\\([^()]+\\)|[^()]+)+\\)|\\[(?:\\[[^\\[\\]]*\\]|['\"][^'\"]*['\"]|[^\\[\\]'\"]+)+\\]|\\\\.|[^ >+~,(\\[\\\\]+)+|[>+~])(\\s*,\\s*)?((?:.|\\r|\\n)*)/g,d=\"sizcache\"+(Math.random()+\"\").replace(\".\",\"\"),e=0,g=Object.prototype.toString,h=!1,i=!0,j=/\\\\/g,k=/\\r\\n/g,l=/\\W/;[0,0].sort(function(){i=!1;return 0});var m=function(b,d,e,f){e=e||[],d=d||c;var h=d;if(d.nodeType!==1&&d.nodeType!==9)return[];if(!b||typeof b!=\"string\")return e;var i,j,k,l,n,q,r,t,u=!0,v=m.isXML(d),w=[],x=b;do{a.exec(\"\"),i=a.exec(x);if(i){x=i[3],w.push(i[1]);if(i[2]){l=i[3];break}}}while(i);if(w.length>1&&p.exec(b))if(w.length===2&&o.relative[w[0]])j=y(w[0]+w[1],d,f);else{j=o.relative[w[0]]?[d]:m(w.shift(),d);while(w.length)b=w.shift(),o.relative[b]&&(b+=w.shift()),j=y(b,j,f)}else{!f&&w.length>1&&d.nodeType===9&&!v&&o.match.ID.test(w[0])&&!o.match.ID.test(w[w.length-1])&&(n=m.find(w.shift(),d,v),d=n.expr?m.filter(n.expr,n.set)[0]:n.set[0]);if(d){n=f?{expr:w.pop(),set:s(f)}:m.find(w.pop(),w.length===1&&(w[0]===\"~\"||w[0]===\"+\")&&d.parentNode?d.parentNode:d,v),j=n.expr?m.filter(n.expr,n.set):n.set,w.length>0?k=s(j):u=!1;while(w.length)q=w.pop(),r=q,o.relative[q]?r=w.pop():q=\"\",r==null&&(r=d),o.relative[q](k,r,v)}else k=w=[]}k||(k=j),k||m.error(q||b);if(g.call(k)===\"[object Array]\")if(!u)e.push.apply(e,k);else if(d&&d.nodeType===1)for(t=0;k[t]!=null;t++)k[t]&&(k[t]===!0||k[t].nodeType===1&&m.contains(d,k[t]))&&e.push(j[t]);else for(t=0;k[t]!=null;t++)k[t]&&k[t].nodeType===1&&e.push(j[t]);else s(k,e);l&&(m(l,h,e,f),m.uniqueSort(e));return e};m.uniqueSort=function(a){if(u){h=i,a.sort(u);if(h)for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1)}return a},m.matches=function(a,b){return m(a,null,null,b)},m.matchesSelector=function(a,b){return m(b,null,null,[a]).length>0},m.find=function(a,b,c){var d,e,f,g,h,i;if(!a)return[];for(e=0,f=o.order.length;e<f;e++){h=o.order[e];if(g=o.leftMatch[h].exec(a)){i=g[1],g.splice(1,1);if(i.substr(i.length-1)!==\"\\\\\"){g[1]=(g[1]||\"\").replace(j,\"\"),d=o.find[h](g,b,c);if(d!=null){a=a.replace(o.match[h],\"\");break}}}}d||(d=typeof b.getElementsByTagName!=\"undefined\"?b.getElementsByTagName(\"*\"):[]);return{set:d,expr:a}},m.filter=function(a,c,d,e){var f,g,h,i,j,k,l,n,p,q=a,r=[],s=c,t=c&&c[0]&&m.isXML(c[0]);while(a&&c.length){for(h in o.filter)if((f=o.leftMatch[h].exec(a))!=null&&f[2]){k=o.filter[h],l=f[1],g=!1,f.splice(1,1);if(l.substr(l.length-1)===\"\\\\\")continue;s===r&&(r=[]);if(o.preFilter[h]){f=o.preFilter[h](f,s,d,r,e,t);if(!f)g=i=!0;else if(f===!0)continue}if(f)for(n=0;(j=s[n])!=null;n++)j&&(i=k(j,f,n,s),p=e^i,d&&i!=null?p?g=!0:s[n]=!1:p&&(r.push(j),g=!0));if(i!==b){d||(s=r),a=a.replace(o.match[h],\"\");if(!g)return[];break}}if(a===q)if(g==null)m.error(a);else break;q=a}return s},m.error=function(a){throw new Error(\"Syntax error, unrecognized expression: \"+a)};var n=m.getText=function(a){var b,c,d=a.nodeType,e=\"\";if(d){if(d===1||d===9||d===11){if(typeof a.textContent==\"string\")return a.textContent;if(typeof a.innerText==\"string\")return a.innerText.replace(k,\"\");for(a=a.firstChild;a;a=a.nextSibling)e+=n(a)}else if(d===3||d===4)return a.nodeValue}else for(b=0;c=a[b];b++)c.nodeType!==8&&(e+=n(c));return e},o=m.selectors={order:[\"ID\",\"NAME\",\"TAG\"],match:{ID:/#((?:[\\w\\u00c0-\\uFFFF\\-]|\\\\.)+)/,CLASS:/\\.((?:[\\w\\u00c0-\\uFFFF\\-]|\\\\.)+)/,NAME:/\\[name=['\"]*((?:[\\w\\u00c0-\\uFFFF\\-]|\\\\.)+)['\"]*\\]/,ATTR:/\\[\\s*((?:[\\w\\u00c0-\\uFFFF\\-]|\\\\.)+)\\s*(?:(\\S?=)\\s*(?:(['\"])(.*?)\\3|(#?(?:[\\w\\u00c0-\\uFFFF\\-]|\\\\.)*)|)|)\\s*\\]/,TAG:/^((?:[\\w\\u00c0-\\uFFFF\\*\\-]|\\\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\\(\\s*(even|odd|(?:[+\\-]?\\d+|(?:[+\\-]?\\d*)?n\\s*(?:[+\\-]\\s*\\d+)?))\\s*\\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\\((\\d*)\\))?(?=[^\\-]|$)/,PSEUDO:/:((?:[\\w\\u00c0-\\uFFFF\\-]|\\\\.)+)(?:\\((['\"]?)((?:\\([^\\)]+\\)|[^\\(\\)]*)+)\\2\\))?/},leftMatch:{},attrMap:{\"class\":\"className\",\"for\":\"htmlFor\"},attrHandle:{href:function(a){return a.getAttribute(\"href\")},type:function(a){return a.getAttribute(\"type\")}},relative:{\"+\":function(a,b){var c=typeof b==\"string\",d=c&&!l.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f=0,g=a.length,h;f<g;f++)if(h=a[f]){while((h=h.previousSibling)&&h.nodeType!==1);a[f]=e||h&&h.nodeName.toLowerCase()===b?h||!1:h===b}e&&m.filter(b,a,!0)},\">\":function(a,b){var c,d=typeof b==\"string\",e=0,f=a.length;if(d&&!l.test(b)){b=b.toLowerCase();for(;e<f;e++){c=a[e];if(c){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1}}}else{for(;e<f;e++)c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b);d&&m.filter(b,a,!0)}},\"\":function(a,b,c){var d,f=e++,g=x;typeof b==\"string\"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g(\"parentNode\",b,f,a,d,c)},\"~\":function(a,b,c){var d,f=e++,g=x;typeof b==\"string\"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g(\"previousSibling\",b,f,a,d,c)}},find:{ID:function(a,b,c){if(typeof b.getElementById!=\"undefined\"&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!=\"undefined\"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++)d[e].getAttribute(\"name\")===a[1]&&c.push(d[e]);return c.length===0?null:c}},TAG:function(a,b){if(typeof b.getElementsByTagName!=\"undefined\")return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){a=\" \"+a[1].replace(j,\"\")+\" \";if(f)return a;for(var g=0,h;(h=b[g])!=null;g++)h&&(e^(h.className&&(\" \"+h.className+\" \").replace(/[\\t\\n\\r]/g,\" \").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1));return!1},ID:function(a){return a[1].replace(j,\"\")},TAG:function(a,b){return a[1].replace(j,\"\").toLowerCase()},CHILD:function(a){if(a[1]===\"nth\"){a[2]||m.error(a[0]),a[2]=a[2].replace(/^\\+|\\s*/g,\"\");var b=/(-?)(\\d*)(?:n([+\\-]?\\d*))?/.exec(a[2]===\"even\"&&\"2n\"||a[2]===\"odd\"&&\"2n+1\"||!/\\D/.test(a[2])&&\"0n+\"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}else a[2]&&m.error(a[0]);a[0]=e++;return a},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(j,\"\");!f&&o.attrMap[g]&&(a[1]=o.attrMap[g]),a[4]=(a[4]||a[5]||\"\").replace(j,\"\"),a[2]===\"~=\"&&(a[4]=\" \"+a[4]+\" \");return a},PSEUDO:function(b,c,d,e,f){if(b[1]===\"not\")if((a.exec(b[3])||\"\").length>1||/^\\w/.test(b[3]))b[3]=m(b[3],null,null,c);else{var g=m.filter(b[3],c,d,!0^f);d||e.push.apply(e,g);return!1}else if(o.match.POS.test(b[0])||o.match.CHILD.test(b[0]))return!0;return b},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!==\"hidden\"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return a.selected===!0},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!m(c[3],a).length},header:function(a){return/h\\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute(\"type\"),c=a.type;return a.nodeName.toLowerCase()===\"input\"&&\"text\"===c&&(b===c||b===null)},radio:function(a){return a.nodeName.toLowerCase()===\"input\"&&\"radio\"===a.type},checkbox:function(a){return a.nodeName.toLowerCase()===\"input\"&&\"checkbox\"===a.type},file:function(a){return a.nodeName.toLowerCase()===\"input\"&&\"file\"===a.type},password:function(a){return a.nodeName.toLowerCase()===\"input\"&&\"password\"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return(b===\"input\"||b===\"button\")&&\"submit\"===a.type},image:function(a){return a.nodeName.toLowerCase()===\"input\"&&\"image\"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return(b===\"input\"||b===\"button\")&&\"reset\"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return b===\"input\"&&\"button\"===a.type||b===\"button\"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=o.filters[e];if(f)return f(a,c,b,d);if(e===\"contains\")return(a.textContent||a.innerText||n([a])||\"\").indexOf(b[3])>=0;if(e===\"not\"){var g=b[3];for(var h=0,i=g.length;h<i;h++)if(g[h]===a)return!1;return!0}m.error(e)},CHILD:function(a,b){var c,e,f,g,h,i,j,k=b[1],l=a;switch(k){case\"only\":case\"first\":while(l=l.previousSibling)if(l.nodeType===1)return!1;if(k===\"first\")return!0;l=a;case\"last\":while(l=l.nextSibling)if(l.nodeType===1)return!1;return!0;case\"nth\":c=b[2],e=b[3];if(c===1&&e===0)return!0;f=b[0],g=a.parentNode;if(g&&(g[d]!==f||!a.nodeIndex)){i=0;for(l=g.firstChild;l;l=l.nextSibling)l.nodeType===1&&(l.nodeIndex=++i);g[d]=f}j=a.nodeIndex-e;return c===0?j===0:j%c===0&&j/c>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute(\"id\")===b},TAG:function(a,b){return b===\"*\"&&a.nodeType===1||!!a.nodeName&&a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(\" \"+(a.className||a.getAttribute(\"class\"))+\" \").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=m.attr?m.attr(a,c):o.attrHandle[c]?o.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+\"\",f=b[2],g=b[4];return d==null?f===\"!=\":!f&&m.attr?d!=null:f===\"=\"?e===g:f===\"*=\"?e.indexOf(g)>=0:f===\"~=\"?(\" \"+e+\" \").indexOf(g)>=0:g?f===\"!=\"?e!==g:f===\"^=\"?e.indexOf(g)===0:f===\"$=\"?e.substr(e.length-g.length)===g:f===\"|=\"?e===g||e.substr(0,g.length+1)===g+\"-\":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=o.setFilters[e];if(f)return f(a,c,b,d)}}},p=o.match.POS,q=function(a,b){return\"\\\\\"+(b-0+1)};for(var r in o.match)o.match[r]=new RegExp(o.match[r].source+/(?![^\\[]*\\])(?![^\\(]*\\))/.source),o.leftMatch[r]=new RegExp(/(^(?:.|\\r|\\n)*?)/.source+o.match[r].source.replace(/\\\\(\\d+)/g,q));o.match.globalPOS=p;var s=function(a,b){a=Array.prototype.slice.call(a,0);if(b){b.push.apply(b,a);return b}return a};try{Array.prototype.slice.call(c.documentElement.childNodes,0)[0].nodeType}catch(t){s=function(a,b){var c=0,d=b||[];if(g.call(a)===\"[object Array]\")Array.prototype.push.apply(d,a);else if(typeof a.length==\"number\")for(var e=a.length;c<e;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);return d}}var u,v;c.documentElement.compareDocumentPosition?u=function(a,b){if(a===b){h=!0;return 0}if(!a.compareDocumentPosition||!b.compareDocumentPosition)return a.compareDocumentPosition?-1:1;return a.compareDocumentPosition(b)&4?-1:1}:(u=function(a,b){if(a===b){h=!0;return 0}if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[],g=a.parentNode,i=b.parentNode,j=g;if(g===i)return v(a,b);if(!g)return-1;if(!i)return 1;while(j)e.unshift(j),j=j.parentNode;j=i;while(j)f.unshift(j),j=j.parentNode;c=e.length,d=f.length;for(var k=0;k<c&&k<d;k++)if(e[k]!==f[k])return v(e[k],f[k]);return k===c?v(a,f[k],-1):v(e[k],b,1)},v=function(a,b,c){if(a===b)return c;var d=a.nextSibling;while(d){if(d===b)return-1;d=d.nextSibling}return 1}),function(){var a=c.createElement(\"div\"),d=\"script\"+(new Date).getTime(),e=c.documentElement;a.innerHTML=\"<a name='\"+d+\"'/>\",e.insertBefore(a,e.firstChild),c.getElementById(d)&&(o.find.ID=function(a,c,d){if(typeof c.getElementById!=\"undefined\"&&!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||typeof e.getAttributeNode!=\"undefined\"&&e.getAttributeNode(\"id\").nodeValue===a[1]?[e]:b:[]}},o.filter.ID=function(a,b){var c=typeof a.getAttributeNode!=\"undefined\"&&a.getAttributeNode(\"id\");return a.nodeType===1&&c&&c.nodeValue===b}),e.removeChild(a),e=a=null}(),function(){var a=c.createElement(\"div\");a.appendChild(c.createComment(\"\")),a.getElementsByTagName(\"*\").length>0&&(o.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]===\"*\"){var d=[];for(var e=0;c[e];e++)c[e].nodeType===1&&d.push(c[e]);c=d}return c}),a.innerHTML=\"<a href='#'></a>\",a.firstChild&&typeof a.firstChild.getAttribute!=\"undefined\"&&a.firstChild.getAttribute(\"href\")!==\"#\"&&(o.attrHandle.href=function(a){return a.getAttribute(\"href\",2)}),a=null}(),c.querySelectorAll&&function(){var a=m,b=c.createElement(\"div\"),d=\"__sizzle__\";b.innerHTML=\"<p class='TEST'></p>\";if(!b.querySelectorAll||b.querySelectorAll(\".TEST\").length!==0){m=function(b,e,f,g){e=e||c;if(!g&&!m.isXML(e)){var h=/^(\\w+$)|^\\.([\\w\\-]+$)|^#([\\w\\-]+$)/.exec(b);if(h&&(e.nodeType===1||e.nodeType===9)){if(h[1])return s(e.getElementsByTagName(b),f);if(h[2]&&o.find.CLASS&&e.getElementsByClassName)return s(e.getElementsByClassName(h[2]),f)}if(e.nodeType===9){if(b===\"body\"&&e.body)return s([e.body],f);if(h&&h[3]){var i=e.getElementById(h[3]);if(!i||!i.parentNode)return s([],f);if(i.id===h[3])return s([i],f)}try{return s(e.querySelectorAll(b),f)}catch(j){}}else if(e.nodeType===1&&e.nodeName.toLowerCase()!==\"object\"){var k=e,l=e.getAttribute(\"id\"),n=l||d,p=e.parentNode,q=/^\\s*[+~]/.test(b);l?n=n.replace(/'/g,\"\\\\$&\"):e.setAttribute(\"id\",n),q&&p&&(e=e.parentNode);try{if(!q||p)return s(e.querySelectorAll(\"[id='\"+n+\"'] \"+b),f)}catch(r){}finally{l||k.removeAttribute(\"id\")}}}return a(b,e,f,g)};for(var e in a)m[e]=a[e];b=null}}(),function(){var a=c.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var d=!b.call(c.createElement(\"div\"),\"div\"),e=!1;try{b.call(c.documentElement,\"[test!='']:sizzle\")}catch(f){e=!0}m.matchesSelector=function(a,c){c=c.replace(/\\=\\s*([^'\"\\]]*)\\s*\\]/g,\"='$1']\");if(!m.isXML(a))try{if(e||!o.match.PSEUDO.test(c)&&!/!=/.test(c)){var f=b.call(a,c);if(f||!d||a.document&&a.document.nodeType!==11)return f}}catch(g){}return m(c,null,null,[a]).length>0}}}(),function(){var a=c.createElement(\"div\");a.innerHTML=\"<div class='test e'></div><div class='test'></div>\";if(!!a.getElementsByClassName&&a.getElementsByClassName(\"e\").length!==0){a.lastChild.className=\"e\";if(a.getElementsByClassName(\"e\").length===1)return;o.order.splice(1,0,\"CLASS\"),o.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!=\"undefined\"&&!c)return b.getElementsByClassName(a[1])},a=null}}(),c.documentElement.contains?m.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:c.documentElement.compareDocumentPosition?m.contains=function(a,b){return!!(a.compareDocumentPosition(b)&16)}:m.contains=function(){return!1},m.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!==\"HTML\":!1};var y=function(a,b,c){var d,e=[],f=\"\",g=b.nodeType?[b]:b;while(d=o.match.PSEUDO.exec(a))f+=d[0],a=a.replace(o.match.PSEUDO,\"\");a=o.relative[a]?a+\"*\":a;for(var h=0,i=g.length;h<i;h++)m(a,g[h],e,c);return m.filter(f,e)};m.attr=f.attr,m.selectors.attrMap={},f.find=m,f.expr=m.selectors,f.expr[\":\"]=f.expr.filters,f.unique=m.uniqueSort,f.text=m.getText,f.isXMLDoc=m.isXML,f.contains=m.contains}();var L=/Until$/,M=/^(?:parents|prevUntil|prevAll)/,N=/,/,O=/^.[^:#\\[\\.,]*$/,P=Array.prototype.slice,Q=f.expr.match.globalPOS,R={children:!0,contents:!0,next:!0,prev:!0};f.fn.extend({find:function(a){var b=this,c,d;if(typeof a!=\"string\")return f(a).filter(function(){for(c=0,d=b.length;c<d;c++)if(f.contains(b[c],this))return!0});var e=this.pushStack(\"\",\"find\",a),g,h,i;for(c=0,d=this.length;c<d;c++){g=e.length,f.find(a,this[c],e);if(c>0)for(h=g;h<e.length;h++)for(i=0;i<g;i++)if(e[i]===e[h]){e.splice(h--,1);break}}return e},has:function(a){var b=f(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++)if(f.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(T(this,a,!1),\"not\",a)},filter:function(a){return this.pushStack(T(this,a,!0),\"filter\",a)},is:function(a){return!!a&&(typeof a==\"string\"?Q.test(a)?f(a,this.context).index(this[0])>=0:f.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c=[],d,e,g=this[0];if(f.isArray(a)){var h=1;while(g&&g.ownerDocument&&g!==b){for(d=0;d<a.length;d++)f(g).is(a[d])&&c.push({selector:a[d],elem:g,level:h});g=g.parentNode,h++}return c}var i=Q.test(a)||typeof a!=\"string\"?f(a,b||this.context):0;for(d=0,e=this.length;d<e;d++){g=this[d];while(g){if(i?i.index(g)>-1:f.find.matchesSelector(g,a)){c.push(g);break}g=g.parentNode;if(!g||!g.ownerDocument||g===b||g.nodeType===11)break}}c=c.length>1?f.unique(c):c;return this.pushStack(c,\"closest\",a)},index:function(a){if(!a)return this[0]&&this[0].parentNode?this.prevAll().length:-1;if(typeof a==\"string\")return f.inArray(this[0],f(a));return f.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var c=typeof a==\"string\"?f(a,b):f.makeArray(a&&a.nodeType?[a]:a),d=f.merge(this.get(),c);return this.pushStack(S(c[0])||S(d[0])?d:f.unique(d))},andSelf:function(){return this.add(this.prevObject)}}),f.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return f.dir(a,\"parentNode\")},parentsUntil:function(a,b,c){return f.dir(a,\"parentNode\",c)},next:function(a){return f.nth(a,2,\"nextSibling\")},prev:function(a){return f.nth(a,2,\"previousSibling\")},nextAll:function(a){return f.dir(a,\"nextSibling\")},prevAll:function(a){return f.dir(a,\"previousSibling\")},nextUntil:function(a,b,c){return f.dir(a,\"nextSibling\",c)},prevUntil:function(a,b,c){return f.dir(a,\"previousSibling\",c)},siblings:function(a){return f.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return f.sibling(a.firstChild)},contents:function(a){return f.nodeName(a,\"iframe\")?a.contentDocument||a.contentWindow.document:f.makeArray(a.childNodes)}},function(a,b){f.fn[a]=function(c,d){var e=f.map(this,b,c);L.test(a)||(d=c),d&&typeof d==\"string\"&&(e=f.filter(d,e)),e=this.length>1&&!R[a]?f.unique(e):e,(this.length>1||N.test(d))&&M.test(a)&&(e=e.reverse());return this.pushStack(e,a,P.call(arguments).join(\",\"))}}),f.extend({filter:function(a,b,c){c&&(a=\":not(\"+a+\")\");return b.length===1?f.find.matchesSelector(b[0],a)?[b[0]]:[]:f.find.matches(a,b)},dir:function(a,c,d){var e=[],g=a[c];while(g&&g.nodeType!==9&&(d===b||g.nodeType!==1||!f(g).is(d)))g.nodeType===1&&e.push(g),g=g[c];return e},nth:function(a,b,c,d){b=b||1;var e=0;for(;a;a=a[c])if(a.nodeType===1&&++e===b)break;return a},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}});var V=\"abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video\",W=/ jQuery\\d+=\"(?:\\d+|null)\"/g,X=/^\\s+/,Y=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>/ig,Z=/<([\\w:]+)/,$=/<tbody/i,_=/<|&#?\\w+;/,ba=/<(?:script|style)/i,bb=/<(?:script|object|embed|option|style)/i,bc=new RegExp(\"<(?:\"+V+\")[\\\\s/>]\",\"i\"),bd=/checked\\s*(?:[^=]|=\\s*.checked.)/i,be=/\\/(java|ecma)script/i,bf=/^\\s*<!(?:\\[CDATA\\[|\\-\\-)/,bg={option:[1,\"<select multiple='multiple'>\",\"</select>\"],legend:[1,\"<fieldset>\",\"</fieldset>\"],thead:[1,\"<table>\",\"</table>\"],tr:[2,\"<table><tbody>\",\"</tbody></table>\"],td:[3,\"<table><tbody><tr>\",\"</tr></tbody></table>\"],col:[2,\"<table><tbody></tbody><colgroup>\",\"</colgroup></table>\"],area:[1,\"<map>\",\"</map>\"],_default:[0,\"\",\"\"]},bh=U(c);bg.optgroup=bg.option,bg.tbody=bg.tfoot=bg.colgroup=bg.caption=bg.thead,bg.th=bg.td,f.support.htmlSerialize||(bg._default=[1,\"div<div>\",\"</div>\"]),f.fn.extend({text:function(a){return f.access(this,function(a){return a===b?f.text(this):this.empty().append((this[0]&&this[0].ownerDocument||c).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapAll(a.call(this,b))});if(this[0]){var b=f(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapInner(a.call(this,b))});return this.each(function(){var b=f(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=f.isFunction(a);return this.each(function(c){f(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){f.nodeName(this,\"body\")||f(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=f\n.clean(arguments);a.push.apply(a,this.toArray());return this.pushStack(a,\"before\",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,\"after\",arguments);a.push.apply(a,f.clean(arguments));return a}},remove:function(a,b){for(var c=0,d;(d=this[c])!=null;c++)if(!a||f.filter(a,[d]).length)!b&&d.nodeType===1&&(f.cleanData(d.getElementsByTagName(\"*\")),f.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d);return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++){b.nodeType===1&&f.cleanData(b.getElementsByTagName(\"*\"));while(b.firstChild)b.removeChild(b.firstChild)}return this},clone:function(a,b){a=a==null?!1:a,b=b==null?a:b;return this.map(function(){return f.clone(this,a,b)})},html:function(a){return f.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b)return c.nodeType===1?c.innerHTML.replace(W,\"\"):null;if(typeof a==\"string\"&&!ba.test(a)&&(f.support.leadingWhitespace||!X.test(a))&&!bg[(Z.exec(a)||[\"\",\"\"])[1].toLowerCase()]){a=a.replace(Y,\"<$1></$2>\");try{for(;d<e;d++)c=this[d]||{},c.nodeType===1&&(f.cleanData(c.getElementsByTagName(\"*\")),c.innerHTML=a);c=0}catch(g){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(f.isFunction(a))return this.each(function(b){var c=f(this),d=c.html();c.replaceWith(a.call(this,b,d))});typeof a!=\"string\"&&(a=f(a).detach());return this.each(function(){var b=this.nextSibling,c=this.parentNode;f(this).remove(),b?f(b).before(a):f(c).append(a)})}return this.length?this.pushStack(f(f.isFunction(a)?a():a),\"replaceWith\",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,g,h,i,j=a[0],k=[];if(!f.support.checkClone&&arguments.length===3&&typeof j==\"string\"&&bd.test(j))return this.each(function(){f(this).domManip(a,c,d,!0)});if(f.isFunction(j))return this.each(function(e){var g=f(this);a[0]=j.call(this,e,c?g.html():b),g.domManip(a,c,d)});if(this[0]){i=j&&j.parentNode,f.support.parentNode&&i&&i.nodeType===11&&i.childNodes.length===this.length?e={fragment:i}:e=f.buildFragment(a,this,k),h=e.fragment,h.childNodes.length===1?g=h=h.firstChild:g=h.firstChild;if(g){c=c&&f.nodeName(g,\"tr\");for(var l=0,m=this.length,n=m-1;l<m;l++)d.call(c?bi(this[l],g):this[l],e.cacheable||m>1&&l<n?f.clone(h,!0,!0):h)}k.length&&f.each(k,function(a,b){b.src?f.ajax({type:\"GET\",global:!1,url:b.src,async:!1,dataType:\"script\"}):f.globalEval((b.text||b.textContent||b.innerHTML||\"\").replace(bf,\"/*$0*/\")),b.parentNode&&b.parentNode.removeChild(b)})}return this}}),f.buildFragment=function(a,b,d){var e,g,h,i,j=a[0];b&&b[0]&&(i=b[0].ownerDocument||b[0]),i.createDocumentFragment||(i=c),a.length===1&&typeof j==\"string\"&&j.length<512&&i===c&&j.charAt(0)===\"<\"&&!bb.test(j)&&(f.support.checkClone||!bd.test(j))&&(f.support.html5Clone||!bc.test(j))&&(g=!0,h=f.fragments[j],h&&h!==1&&(e=h)),e||(e=i.createDocumentFragment(),f.clean(a,i,e,d)),g&&(f.fragments[j]=h?e:1);return{fragment:e,cacheable:g}},f.fragments={},f.each({appendTo:\"append\",prependTo:\"prepend\",insertBefore:\"before\",insertAfter:\"after\",replaceAll:\"replaceWith\"},function(a,b){f.fn[a]=function(c){var d=[],e=f(c),g=this.length===1&&this[0].parentNode;if(g&&g.nodeType===11&&g.childNodes.length===1&&e.length===1){e[b](this[0]);return this}for(var h=0,i=e.length;h<i;h++){var j=(h>0?this.clone(!0):this).get();f(e[h])[b](j),d=d.concat(j)}return this.pushStack(d,a,e.selector)}}),f.extend({clone:function(a,b,c){var d,e,g,h=f.support.html5Clone||f.isXMLDoc(a)||!bc.test(\"<\"+a.nodeName+\">\")?a.cloneNode(!0):bo(a);if((!f.support.noCloneEvent||!f.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!f.isXMLDoc(a)){bk(a,h),d=bl(a),e=bl(h);for(g=0;d[g];++g)e[g]&&bk(d[g],e[g])}if(b){bj(a,h);if(c){d=bl(a),e=bl(h);for(g=0;d[g];++g)bj(d[g],e[g])}}d=e=null;return h},clean:function(a,b,d,e){var g,h,i,j=[];b=b||c,typeof b.createElement==\"undefined\"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||c);for(var k=0,l;(l=a[k])!=null;k++){typeof l==\"number\"&&(l+=\"\");if(!l)continue;if(typeof l==\"string\")if(!_.test(l))l=b.createTextNode(l);else{l=l.replace(Y,\"<$1></$2>\");var m=(Z.exec(l)||[\"\",\"\"])[1].toLowerCase(),n=bg[m]||bg._default,o=n[0],p=b.createElement(\"div\"),q=bh.childNodes,r;b===c?bh.appendChild(p):U(b).appendChild(p),p.innerHTML=n[1]+l+n[2];while(o--)p=p.lastChild;if(!f.support.tbody){var s=$.test(l),t=m===\"table\"&&!s?p.firstChild&&p.firstChild.childNodes:n[1]===\"<table>\"&&!s?p.childNodes:[];for(i=t.length-1;i>=0;--i)f.nodeName(t[i],\"tbody\")&&!t[i].childNodes.length&&t[i].parentNode.removeChild(t[i])}!f.support.leadingWhitespace&&X.test(l)&&p.insertBefore(b.createTextNode(X.exec(l)[0]),p.firstChild),l=p.childNodes,p&&(p.parentNode.removeChild(p),q.length>0&&(r=q[q.length-1],r&&r.parentNode&&r.parentNode.removeChild(r)))}var u;if(!f.support.appendChecked)if(l[0]&&typeof (u=l.length)==\"number\")for(i=0;i<u;i++)bn(l[i]);else bn(l);l.nodeType?j.push(l):j=f.merge(j,l)}if(d){g=function(a){return!a.type||be.test(a.type)};for(k=0;j[k];k++){h=j[k];if(e&&f.nodeName(h,\"script\")&&(!h.type||be.test(h.type)))e.push(h.parentNode?h.parentNode.removeChild(h):h);else{if(h.nodeType===1){var v=f.grep(h.getElementsByTagName(\"script\"),g);j.splice.apply(j,[k+1,0].concat(v))}d.appendChild(h)}}}return j},cleanData:function(a){var b,c,d=f.cache,e=f.event.special,g=f.support.deleteExpando;for(var h=0,i;(i=a[h])!=null;h++){if(i.nodeName&&f.noData[i.nodeName.toLowerCase()])continue;c=i[f.expando];if(c){b=d[c];if(b&&b.events){for(var j in b.events)e[j]?f.event.remove(i,j):f.removeEvent(i,j,b.handle);b.handle&&(b.handle.elem=null)}g?delete i[f.expando]:i.removeAttribute&&i.removeAttribute(f.expando),delete d[c]}}}});var bp=/alpha\\([^)]*\\)/i,bq=/opacity=([^)]*)/,br=/([A-Z]|^ms)/g,bs=/^[\\-+]?(?:\\d*\\.)?\\d+$/i,bt=/^-?(?:\\d*\\.)?\\d+(?!px)[^\\d\\s]+$/i,bu=/^([\\-+])=([\\-+.\\de]+)/,bv=/^margin/,bw={position:\"absolute\",visibility:\"hidden\",display:\"block\"},bx=[\"Top\",\"Right\",\"Bottom\",\"Left\"],by,bz,bA;f.fn.css=function(a,c){return f.access(this,function(a,c,d){return d!==b?f.style(a,c,d):f.css(a,c)},a,c,arguments.length>1)},f.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=by(a,\"opacity\");return c===\"\"?\"1\":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{\"float\":f.support.cssFloat?\"cssFloat\":\"styleFloat\"},style:function(a,c,d,e){if(!!a&&a.nodeType!==3&&a.nodeType!==8&&!!a.style){var g,h,i=f.camelCase(c),j=a.style,k=f.cssHooks[i];c=f.cssProps[i]||i;if(d===b){if(k&&\"get\"in k&&(g=k.get(a,!1,e))!==b)return g;return j[c]}h=typeof d,h===\"string\"&&(g=bu.exec(d))&&(d=+(g[1]+1)*+g[2]+parseFloat(f.css(a,c)),h=\"number\");if(d==null||h===\"number\"&&isNaN(d))return;h===\"number\"&&!f.cssNumber[i]&&(d+=\"px\");if(!k||!(\"set\"in k)||(d=k.set(a,d))!==b)try{j[c]=d}catch(l){}}},css:function(a,c,d){var e,g;c=f.camelCase(c),g=f.cssHooks[c],c=f.cssProps[c]||c,c===\"cssFloat\"&&(c=\"float\");if(g&&\"get\"in g&&(e=g.get(a,!0,d))!==b)return e;if(by)return by(a,c)},swap:function(a,b,c){var d={},e,f;for(f in b)d[f]=a.style[f],a.style[f]=b[f];e=c.call(a);for(f in b)a.style[f]=d[f];return e}}),f.curCSS=f.css,c.defaultView&&c.defaultView.getComputedStyle&&(bz=function(a,b){var c,d,e,g,h=a.style;b=b.replace(br,\"-$1\").toLowerCase(),(d=a.ownerDocument.defaultView)&&(e=d.getComputedStyle(a,null))&&(c=e.getPropertyValue(b),c===\"\"&&!f.contains(a.ownerDocument.documentElement,a)&&(c=f.style(a,b))),!f.support.pixelMargin&&e&&bv.test(b)&&bt.test(c)&&(g=h.width,h.width=c,c=e.width,h.width=g);return c}),c.documentElement.currentStyle&&(bA=function(a,b){var c,d,e,f=a.currentStyle&&a.currentStyle[b],g=a.style;f==null&&g&&(e=g[b])&&(f=e),bt.test(f)&&(c=g.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),g.left=b===\"fontSize\"?\"1em\":f,f=g.pixelLeft+\"px\",g.left=c,d&&(a.runtimeStyle.left=d));return f===\"\"?\"auto\":f}),by=bz||bA,f.each([\"height\",\"width\"],function(a,b){f.cssHooks[b]={get:function(a,c,d){if(c)return a.offsetWidth!==0?bB(a,b,d):f.swap(a,bw,function(){return bB(a,b,d)})},set:function(a,b){return bs.test(b)?b+\"px\":b}}}),f.support.opacity||(f.cssHooks.opacity={get:function(a,b){return bq.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||\"\")?parseFloat(RegExp.$1)/100+\"\":b?\"1\":\"\"},set:function(a,b){var c=a.style,d=a.currentStyle,e=f.isNumeric(b)?\"alpha(opacity=\"+b*100+\")\":\"\",g=d&&d.filter||c.filter||\"\";c.zoom=1;if(b>=1&&f.trim(g.replace(bp,\"\"))===\"\"){c.removeAttribute(\"filter\");if(d&&!d.filter)return}c.filter=bp.test(g)?g.replace(bp,e):g+\" \"+e}}),f(function(){f.support.reliableMarginRight||(f.cssHooks.marginRight={get:function(a,b){return f.swap(a,{display:\"inline-block\"},function(){return b?by(a,\"margin-right\"):a.style.marginRight})}})}),f.expr&&f.expr.filters&&(f.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;return b===0&&c===0||!f.support.reliableHiddenOffsets&&(a.style&&a.style.display||f.css(a,\"display\"))===\"none\"},f.expr.filters.visible=function(a){return!f.expr.filters.hidden(a)}),f.each({margin:\"\",padding:\"\",border:\"Width\"},function(a,b){f.cssHooks[a+b]={expand:function(c){var d,e=typeof c==\"string\"?c.split(\" \"):[c],f={};for(d=0;d<4;d++)f[a+bx[d]+b]=e[d]||e[d-2]||e[0];return f}}});var bC=/%20/g,bD=/\\[\\]$/,bE=/\\r?\\n/g,bF=/#.*$/,bG=/^(.*?):[ \\t]*([^\\r\\n]*)\\r?$/mg,bH=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bI=/^(?:about|app|app\\-storage|.+\\-extension|file|res|widget):$/,bJ=/^(?:GET|HEAD)$/,bK=/^\\/\\//,bL=/\\?/,bM=/<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi,bN=/^(?:select|textarea)/i,bO=/\\s+/,bP=/([?&])_=[^&]*/,bQ=/^([\\w\\+\\.\\-]+:)(?:\\/\\/([^\\/?#:]*)(?::(\\d+))?)?/,bR=f.fn.load,bS={},bT={},bU,bV,bW=[\"*/\"]+[\"*\"];try{bU=e.href}catch(bX){bU=c.createElement(\"a\"),bU.href=\"\",bU=bU.href}bV=bQ.exec(bU.toLowerCase())||[],f.fn.extend({load:function(a,c,d){if(typeof a!=\"string\"&&bR)return bR.apply(this,arguments);if(!this.length)return this;var e=a.indexOf(\" \");if(e>=0){var g=a.slice(e,a.length);a=a.slice(0,e)}var h=\"GET\";c&&(f.isFunction(c)?(d=c,c=b):typeof c==\"object\"&&(c=f.param(c,f.ajaxSettings.traditional),h=\"POST\"));var i=this;f.ajax({url:a,type:h,dataType:\"html\",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a}),i.html(g?f(\"<div>\").append(c.replace(bM,\"\")).find(g):c)),d&&i.each(d,[c,b,a])}});return this},serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?f.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||bN.test(this.nodeName)||bH.test(this.type))}).map(function(a,b){var c=f(this).val();return c==null?null:f.isArray(c)?f.map(c,function(a,c){return{name:b.name,value:a.replace(bE,\"\\r\\n\")}}):{name:b.name,value:c.replace(bE,\"\\r\\n\")}}).get()}}),f.each(\"ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend\".split(\" \"),function(a,b){f.fn[b]=function(a){return this.on(b,a)}}),f.each([\"get\",\"post\"],function(a,c){f[c]=function(a,d,e,g){f.isFunction(d)&&(g=g||e,e=d,d=b);return f.ajax({type:c,url:a,data:d,success:e,dataType:g})}}),f.extend({getScript:function(a,c){return f.get(a,b,c,\"script\")},getJSON:function(a,b,c){return f.get(a,b,c,\"json\")},ajaxSetup:function(a,b){b?b$(a,f.ajaxSettings):(b=a,a=f.ajaxSettings),b$(a,b);return a},ajaxSettings:{url:bU,isLocal:bI.test(bV[1]),global:!0,type:\"GET\",contentType:\"application/x-www-form-urlencoded; charset=UTF-8\",processData:!0,async:!0,accepts:{xml:\"application/xml, text/xml\",html:\"text/html\",text:\"text/plain\",json:\"application/json, text/javascript\",\"*\":bW},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:\"responseXML\",text:\"responseText\"},converters:{\"* text\":a.String,\"text html\":!0,\"text json\":f.parseJSON,\"text xml\":f.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:bY(bS),ajaxTransport:bY(bT),ajax:function(a,c){function w(a,c,l,m){if(s!==2){s=2,q&&clearTimeout(q),p=b,n=m||\"\",v.readyState=a>0?4:0;var o,r,u,w=c,x=l?ca(d,v,l):b,y,z;if(a>=200&&a<300||a===304){if(d.ifModified){if(y=v.getResponseHeader(\"Last-Modified\"))f.lastModified[k]=y;if(z=v.getResponseHeader(\"Etag\"))f.etag[k]=z}if(a===304)w=\"notmodified\",o=!0;else try{r=cb(d,x),w=\"success\",o=!0}catch(A){w=\"parsererror\",u=A}}else{u=w;if(!w||a)w=\"error\",a<0&&(a=0)}v.status=a,v.statusText=\"\"+(c||w),o?h.resolveWith(e,[r,w,v]):h.rejectWith(e,[v,w,u]),v.statusCode(j),j=b,t&&g.trigger(\"ajax\"+(o?\"Success\":\"Error\"),[v,d,o?r:u]),i.fireWith(e,[v,w]),t&&(g.trigger(\"ajaxComplete\",[v,d]),--f.active||f.event.trigger(\"ajaxStop\"))}}typeof a==\"object\"&&(c=a,a=b),c=c||{};var d=f.ajaxSetup({},c),e=d.context||d,g=e!==d&&(e.nodeType||e instanceof f)?f(e):f.event,h=f.Deferred(),i=f.Callbacks(\"once memory\"),j=d.statusCode||{},k,l={},m={},n,o,p,q,r,s=0,t,u,v={readyState:0,setRequestHeader:function(a,b){if(!s){var c=a.toLowerCase();a=m[c]=m[c]||a,l[a]=b}return this},getAllResponseHeaders:function(){return s===2?n:null},getResponseHeader:function(a){var c;if(s===2){if(!o){o={};while(c=bG.exec(n))o[c[1].toLowerCase()]=c[2]}c=o[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){s||(d.mimeType=a);return this},abort:function(a){a=a||\"abort\",p&&p.abort(a),w(0,a);return this}};h.promise(v),v.success=v.done,v.error=v.fail,v.complete=i.add,v.statusCode=function(a){if(a){var b;if(s<2)for(b in a)j[b]=[j[b],a[b]];else b=a[v.status],v.then(b,b)}return this},d.url=((a||d.url)+\"\").replace(bF,\"\").replace(bK,bV[1]+\"//\"),d.dataTypes=f.trim(d.dataType||\"*\").toLowerCase().split(bO),d.crossDomain==null&&(r=bQ.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]==bV[1]&&r[2]==bV[2]&&(r[3]||(r[1]===\"http:\"?80:443))==(bV[3]||(bV[1]===\"http:\"?80:443)))),d.data&&d.processData&&typeof d.data!=\"string\"&&(d.data=f.param(d.data,d.traditional)),bZ(bS,d,c,v);if(s===2)return!1;t=d.global,d.type=d.type.toUpperCase(),d.hasContent=!bJ.test(d.type),t&&f.active++===0&&f.event.trigger(\"ajaxStart\");if(!d.hasContent){d.data&&(d.url+=(bL.test(d.url)?\"&\":\"?\")+d.data,delete d.data),k=d.url;if(d.cache===!1){var x=f.now(),y=d.url.replace(bP,\"$1_=\"+x);d.url=y+(y===d.url?(bL.test(d.url)?\"&\":\"?\")+\"_=\"+x:\"\")}}(d.data&&d.hasContent&&d.contentType!==!1||c.contentType)&&v.setRequestHeader(\"Content-Type\",d.contentType),d.ifModified&&(k=k||d.url,f.lastModified[k]&&v.setRequestHeader(\"If-Modified-Since\",f.lastModified[k]),f.etag[k]&&v.setRequestHeader(\"If-None-Match\",f.etag[k])),v.setRequestHeader(\"Accept\",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+(d.dataTypes[0]!==\"*\"?\", \"+bW+\"; q=0.01\":\"\"):d.accepts[\"*\"]);for(u in d.headers)v.setRequestHeader(u,d.headers[u]);if(d.beforeSend&&(d.beforeSend.call(e,v,d)===!1||s===2)){v.abort();return!1}for(u in{success:1,error:1,complete:1})v[u](d[u]);p=bZ(bT,d,c,v);if(!p)w(-1,\"No Transport\");else{v.readyState=1,t&&g.trigger(\"ajaxSend\",[v,d]),d.async&&d.timeout>0&&(q=setTimeout(function(){v.abort(\"timeout\")},d.timeout));try{s=1,p.send(l,w)}catch(z){if(s<2)w(-1,z);else throw z}}return v},param:function(a,c){var d=[],e=function(a,b){b=f.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+\"=\"+encodeURIComponent(b)};c===b&&(c=f.ajaxSettings.traditional);if(f.isArray(a)||a.jquery&&!f.isPlainObject(a))f.each(a,function(){e(this.name,this.value)});else for(var g in a)b_(g,a[g],c,e);return d.join(\"&\").replace(bC,\"+\")}}),f.extend({active:0,lastModified:{},etag:{}});var cc=f.now(),cd=/(\\=)\\?(&|$)|\\?\\?/i;f.ajaxSetup({jsonp:\"callback\",jsonpCallback:function(){return f.expando+\"_\"+cc++}}),f.ajaxPrefilter(\"json jsonp\",function(b,c,d){var e=typeof b.data==\"string\"&&/^application\\/x\\-www\\-form\\-urlencoded/.test(b.contentType);if(b.dataTypes[0]===\"jsonp\"||b.jsonp!==!1&&(cd.test(b.url)||e&&cd.test(b.data))){var g,h=b.jsonpCallback=f.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,i=a[h],j=b.url,k=b.data,l=\"$1\"+h+\"$2\";b.jsonp!==!1&&(j=j.replace(cd,l),b.url===j&&(e&&(k=k.replace(cd,l)),b.data===k&&(j+=(/\\?/.test(j)?\"&\":\"?\")+b.jsonp+\"=\"+h))),b.url=j,b.data=k,a[h]=function(a){g=[a]},d.always(function(){a[h]=i,g&&f.isFunction(i)&&a[h](g[0])}),b.converters[\"script json\"]=function(){g||f.error(h+\" was not called\");return g[0]},b.dataTypes[0]=\"json\";return\"script\"}}),f.ajaxSetup({accepts:{script:\"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript\"},contents:{script:/javascript|ecmascript/},converters:{\"text script\":function(a){f.globalEval(a);return a}}}),f.ajaxPrefilter(\"script\",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type=\"GET\",a.global=!1)}),f.ajaxTransport(\"script\",function(a){if(a.crossDomain){var d,e=c.head||c.getElementsByTagName(\"head\")[0]||c.documentElement;return{send:function(f,g){d=c.createElement(\"script\"),d.async=\"async\",a.scriptCharset&&(d.charset=a.scriptCharset),d.src=a.url,d.onload=d.onreadystatechange=function(a,c){if(c||!d.readyState||/loaded|complete/.test(d.readyState))d.onload=d.onreadystatechange=null,e&&d.parentNode&&e.removeChild(d),d=b,c||g(200,\"success\")},e.insertBefore(d,e.firstChild)},abort:function(){d&&d.onload(0,1)}}}});var ce=a.ActiveXObject?function(){for(var a in cg)cg[a](0,1)}:!1,cf=0,cg;f.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&ch()||ci()}:ch,function(a){f.extend(f.support,{ajax:!!a,cors:!!a&&\"withCredentials\"in a})}(f.ajaxSettings.xhr()),f.support.ajax&&f.ajaxTransport(function(c){if(!c.crossDomain||f.support.cors){var d;return{send:function(e,g){var h=c.xhr(),i,j;c.username?h.open(c.type,c.url,c.async,c.username,c.password):h.open(c.type,c.url,c.async);if(c.xhrFields)for(j in c.xhrFields)h[j]=c.xhrFields[j];c.mimeType&&h.overrideMimeType&&h.overrideMimeType(c.mimeType),!c.crossDomain&&!e[\"X-Requested-With\"]&&(e[\"X-Requested-With\"]=\"XMLHttpRequest\");try{for(j in e)h.setRequestHeader(j,e[j])}catch(k){}h.send(c.hasContent&&c.data||null),d=function(a,e){var j,k,l,m,n;try{if(d&&(e||h.readyState===4)){d=b,i&&(h.onreadystatechange=f.noop,ce&&delete cg[i]);if(e)h.readyState!==4&&h.abort();else{j=h.status,l=h.getAllResponseHeaders(),m={},n=h.responseXML,n&&n.documentElement&&(m.xml=n);try{m.text=h.responseText}catch(a){}try{k=h.statusText}catch(o){k=\"\"}!j&&c.isLocal&&!c.crossDomain?j=m.text?200:404:j===1223&&(j=204)}}}catch(p){e||g(-1,p)}m&&g(j,k,m,l)},!c.async||h.readyState===4?d():(i=++cf,ce&&(cg||(cg={},f(a).unload(ce)),cg[i]=d),h.onreadystatechange=d)},abort:function(){d&&d(0,1)}}}});var cj={},ck,cl,cm=/^(?:toggle|show|hide)$/,cn=/^([+\\-]=)?([\\d+.\\-]+)([a-z%]*)$/i,co,cp=[[\"height\",\"marginTop\",\"marginBottom\",\"paddingTop\",\"paddingBottom\"],[\"width\",\"marginLeft\",\"marginRight\",\"paddingLeft\",\"paddingRight\"],[\"opacity\"]],cq;f.fn.extend({show:function(a,b,c){var d,e;if(a||a===0)return this.animate(ct(\"show\",3),a,b,c);for(var g=0,h=this.length;g<h;g++)d=this[g],d.style&&(e=d.style.display,!f._data(d,\"olddisplay\")&&e===\"none\"&&(e=d.style.display=\"\"),(e===\"\"&&f.css(d,\"display\")===\"none\"||!f.contains(d.ownerDocument.documentElement,d))&&f._data(d,\"olddisplay\",cu(d.nodeName)));for(g=0;g<h;g++){d=this[g];if(d.style){e=d.style.display;if(e===\"\"||e===\"none\")d.style.display=f._data(d,\"olddisplay\")||\"\"}}return this},hide:function(a,b,c){if(a||a===0)return this.animate(ct(\"hide\",3),a,b,c);var d,e,g=0,h=this.length;for(;g<h;g++)d=this[g],d.style&&(e=f.css(d,\"display\"),e!==\"none\"&&!f._data(d,\"olddisplay\")&&f._data(d,\"olddisplay\",e));for(g=0;g<h;g++)this[g].style&&(this[g].style.display=\"none\");return this},_toggle:f.fn.toggle,toggle:function(a,b,c){var d=typeof a==\"boolean\";f.isFunction(a)&&f.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:f(this).is(\":hidden\");f(this)[b?\"show\":\"hide\"]()}):this.animate(ct(\"toggle\",3),a,b,c);return this},fadeTo:function(a,b,c,d){return this.filter(\":hidden\").css(\"opacity\",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){function g(){e.queue===!1&&f._mark(this);var b=f.extend({},e),c=this.nodeType===1,d=c&&f(this).is(\":hidden\"),g,h,i,j,k,l,m,n,o,p,q;b.animatedProperties={};for(i in a){g=f.camelCase(i),i!==g&&(a[g]=a[i],delete a[i]);if((k=f.cssHooks[g])&&\"expand\"in k){l=k.expand(a[g]),delete a[g];for(i in l)i in a||(a[i]=l[i])}}for(g in a){h=a[g],f.isArray(h)?(b.animatedProperties[g]=h[1],h=a[g]=h[0]):b.animatedProperties[g]=b.specialEasing&&b.specialEasing[g]||b.easing||\"swing\";if(h===\"hide\"&&d||h===\"show\"&&!d)return b.complete.call(this);c&&(g===\"height\"||g===\"width\")&&(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],f.css(this,\"display\")===\"inline\"&&f.css(this,\"float\")===\"none\"&&(!f.support.inlineBlockNeedsLayout||cu(this.nodeName)===\"inline\"?this.style.display=\"inline-block\":this.style.zoom=1))}b.overflow!=null&&(this.style.overflow=\"hidden\");for(i in a)j=new f.fx(this,b,i),h=a[i],cm.test(h)?(q=f._data(this,\"toggle\"+i)||(h===\"toggle\"?d?\"show\":\"hide\":0),q?(f._data(this,\"toggle\"+i,q===\"show\"?\"hide\":\"show\"),j[q]()):j[h]()):(m=cn.exec(h),n=j.cur(),m?(o=parseFloat(m[2]),p=m[3]||(f.cssNumber[i]?\"\":\"px\"),p!==\"px\"&&(f.style(this,i,(o||1)+p),n=(o||1)/j.cur()*n,f.style(this,i,n+p)),m[1]&&(o=(m[1]===\"-=\"?-1:1)*o+n),j.custom(n,o,p)):j.custom(n,h,\"\"));return!0}var e=f.speed(b,c,d);if(f.isEmptyObject(a))return this.each(e.complete,[!1]);a=f.extend({},a);return e.queue===!1?this.each(g):this.queue(e.queue,g)},stop:function(a,c,d){typeof a!=\"string\"&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||\"fx\",[]);return this.each(function(){function h(a,b,c){var e=b[c];f.removeData(a,c,!0),e.stop(d)}var b,c=!1,e=f.timers,g=f._data(this);d||f._unmark(!0,this);if(a==null)for(b in g)g[b]&&g[b].stop&&b.indexOf(\".run\")===b.length-4&&h(this,g,b);else g[b=a+\".run\"]&&g[b].stop&&h(this,g,b);for(b=e.length;b--;)e[b].elem===this&&(a==null||e[b].queue===a)&&(d?e[b](!0):e[b].saveState(),c=!0,e.splice(b,1));(!d||!c)&&f.dequeue(this,a)})}}),f.each({slideDown:ct(\"show\",1),slideUp:ct(\"hide\",1),slideToggle:ct(\"toggle\",1),fadeIn:{opacity:\"show\"},fadeOut:{opacity:\"hide\"},fadeToggle:{opacity:\"toggle\"}},function(a,b){f.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),f.extend({speed:function(a,b,c){var d=a&&typeof a==\"object\"?f.extend({},a):{complete:c||!c&&b||f.isFunction(a)&&a,duration:a,easing:c&&b||b&&!f.isFunction(b)&&b};d.duration=f.fx.off?0:typeof d.duration==\"number\"?d.duration:d.duration in f.fx.speeds?f.fx.speeds[d.duration]:f.fx.speeds._default;if(d.queue==null||d.queue===!0)d.queue=\"fx\";d.old=d.complete,d.complete=function(a){f.isFunction(d.old)&&d.old.call(this),d.queue?f.dequeue(this,d.queue):a!==!1&&f._unmark(this)};return d},easing:{linear:function(a){return a},swing:function(a){return-Math.cos(a*Math.PI)/2+.5}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig=b.orig||{}}}),f.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(f.fx.step[this.prop]||f.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];var a,b=f.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b===\"auto\"?0:b:a},custom:function(a,c,d){function h(a){return e.step(a)}var e=this,g=f.fx;this.startTime=cq||cr(),this.end=c,this.now=this.start=a,this.pos=this.state=0,this.unit=d||this.unit||(f.cssNumber[this.prop]?\"\":\"px\"),h.queue=this.options.queue,h.elem=this.elem,h.saveState=function(){f._data(e.elem,\"fxshow\"+e.prop)===b&&(e.options.hide?f._data(e.elem,\"fxshow\"+e.prop,e.start):e.options.show&&f._data(e.elem,\"fxshow\"+e.prop,e.end))},h()&&f.timers.push(h)&&!co&&(co=setInterval(g.tick,g.interval))},show:function(){var a=f._data(this.elem,\"fxshow\"+this.prop);this.options.orig[this.prop]=a||f.style(this.elem,this.prop),this.options.show=!0,a!==b?this.custom(this.cur(),a):this.custom(this.prop===\"width\"||this.prop===\"height\"?1:0,this.cur()),f(this.elem).show()},hide:function(){this.options.orig[this.prop]=f._data(this.elem,\"fxshow\"+this.prop)||f.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var b,c,d,e=cq||cr(),g=!0,h=this.elem,i=this.options;if(a||e>=i.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),i.animatedProperties[this.prop]=!0;for(b in i.animatedProperties)i.animatedProperties[b]!==!0&&(g=!1);if(g){i.overflow!=null&&!f.support.shrinkWrapBlocks&&f.each([\"\",\"X\",\"Y\"],function(a,b){h.style[\"overflow\"+b]=i.overflow[a]}),i.hide&&f(h).hide();if(i.hide||i.show)for(b in i.animatedProperties)f.style(h,b,i.orig[b]),f.removeData(h,\"fxshow\"+b,!0),f.removeData(h,\"toggle\"+b,!0);d=i.complete,d&&(i.complete=!1,d.call(h))}return!1}i.duration==Infinity?this.now=e:(c=e-this.startTime,this.state=c/i.duration,this.pos=f.easing[i.animatedProperties[this.prop]](this.state,c,0,1,i.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update();return!0}},f.extend(f.fx,{tick:function(){var a,b=f.timers,c=0;for(;c<b.length;c++)a=b[c],!a()&&b[c]===a&&b.splice(c--,1);b.length||f.fx.stop()},interval:13,stop:function(){clearInterval(co),co=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){f.style(a.elem,\"opacity\",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now}}}),f.each(cp.concat.apply([],cp),function(a,b){b.indexOf(\"margin\")&&(f.fx.step[b]=function(a){f.style(a.elem,b,Math.max(0,a.now)+a.unit)})}),f.expr&&f.expr.filters&&(f.expr.filters.animated=function(a){return f.grep(f.timers,function(b){return a===b.elem}).length});var cv,cw=/^t(?:able|d|h)$/i,cx=/^(?:body|html)$/i;\"getBoundingClientRect\"in c.documentElement?cv=function(a,b,c,d){try{d=a.getBoundingClientRect()}catch(e){}if(!d||!f.contains(c,a))return d?{top:d.top,left:d.left}:{top:0,left:0};var g=b.body,h=cy(b),i=c.clientTop||g.clientTop||0,j=c.clientLeft||g.clientLeft||0,k=h.pageYOffset||f.support.boxModel&&c.scrollTop||g.scrollTop,l=h.pageXOffset||f.support.boxModel&&c.scrollLeft||g.scrollLeft,m=d.top+k-i,n=d.left+l-j;return{top:m,left:n}}:cv=function(a,b,c){var d,e=a.offsetParent,g=a,h=b.body,i=b.defaultView,j=i?i.getComputedStyle(a,null):a.currentStyle,k=a.offsetTop,l=a.offsetLeft;while((a=a.parentNode)&&a!==h&&a!==c){if(f.support.fixedPosition&&j.position===\"fixed\")break;d=i?i.getComputedStyle(a,null):a.currentStyle,k-=a.scrollTop,l-=a.scrollLeft,a===e&&(k+=a.offsetTop,l+=a.offsetLeft,f.support.doesNotAddBorder&&(!f.support.doesAddBorderForTableAndCells||!cw.test(a.nodeName))&&(k+=parseFloat(d.borderTopWidth)||0,l+=parseFloat(d.borderLeftWidth)||0),g=e,e=a.offsetParent),f.support.subtractsBorderForOverflowNotVisible&&d.overflow!==\"visible\"&&(k+=parseFloat(d.borderTopWidth)||0,l+=parseFloat(d.borderLeftWidth)||0),j=d}if(j.position===\"relative\"||j.position===\"static\")k+=h.offsetTop,l+=h.offsetLeft;f.support.fixedPosition&&j.position===\"fixed\"&&(k+=Math.max(c.scrollTop,h.scrollTop),l+=Math.max(c.scrollLeft,h.scrollLeft));return{top:k,left:l}},f.fn.offset=function(a){if(arguments.length)return a===b?this:this.each(function(b){f.offset.setOffset(this,a,b)});var c=this[0],d=c&&c.ownerDocument;if(!d)return null;if(c===d.body)return f.offset.bodyOffset(c);return cv(c,d,d.documentElement)},f.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;f.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(f.css(a,\"marginTop\"))||0,c+=parseFloat(f.css(a,\"marginLeft\"))||0);return{top:b,left:c}},setOffset:function(a,b,c){var d=f.css(a,\"position\");d===\"static\"&&(a.style.position=\"relative\");var e=f(a),g=e.offset(),h=f.css(a,\"top\"),i=f.css(a,\"left\"),j=(d===\"absolute\"||d===\"fixed\")&&f.inArray(\"auto\",[h,i])>-1,k={},l={},m,n;j?(l=e.position(),m=l.top,n=l.left):(m=parseFloat(h)||0,n=parseFloat(i)||0),f.isFunction(b)&&(b=b.call(a,c,g)),b.top!=null&&(k.top=b.top-g.top+m),b.left!=null&&(k.left=b.left-g.left+n),\"using\"in b?b.using.call(a,k):e.css(k)}},f.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),c=this.offset(),d=cx.test(b[0].nodeName)?{top:0,left:0}:b.offset();c.top-=parseFloat(f.css(a,\"marginTop\"))||0,c.left-=parseFloat(f.css(a,\"marginLeft\"))||0,d.top+=parseFloat(f.css(b[0],\"borderTopWidth\"))||0,d.left+=parseFloat(f.css(b[0],\"borderLeftWidth\"))||0;return{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||c.body;while(a&&!cx.test(a.nodeName)&&f.css(a,\"position\")===\"static\")a=a.offsetParent;return a})}}),f.each({scrollLeft:\"pageXOffset\",scrollTop:\"pageYOffset\"},function(a,c){var d=/Y/.test(c);f.fn[a]=function(e){return f.access(this,function(a,e,g){var h=cy(a);if(g===b)return h?c in h?h[c]:f.support.boxModel&&h.document.documentElement[e]||h.document.body[e]:a[e];h?h.scrollTo(d?f(h).scrollLeft():g,d?g:f(h).scrollTop()):a[e]=g},a,e,arguments.length,null)}}),f.each({Height:\"height\",Width:\"width\"},function(a,c){var d=\"client\"+a,e=\"scroll\"+a,g=\"offset\"+a;f.fn[\"inner\"+a]=function(){var a=this[0];return a?a.style?parseFloat(f.css(a,c,\"padding\")):this[c]():null},f.fn[\"outer\"+a]=function(a){var b=this[0];return b?b.style?parseFloat(f.css(b,c,a?\"margin\":\"border\")):this[c]():null},f.fn[c]=function(a){return f.access(this,function(a,c,h){var i,j,k,l;if(f.isWindow(a)){i=a.document,j=i.documentElement[d];return f.support.boxModel&&j||i.body&&i.body[d]||j}if(a.nodeType===9){i=a.documentElement;if(i[d]>=i[e])return i[d];return Math.max(a.body[e],i[e],a.body[g],i[g])}if(h===b){k=f.css(a,c),l=parseFloat(k);return f.isNumeric(l)?l:k}f(a).css(c,h)},c,a,arguments.length,null)}}),a.jQuery=a.$=f,typeof define==\"function\"&&define.amd&&define.amd.jQuery&&define(\"jquery\",[],function(){return f})})(window);\nwf$ = jQuery.noConflict(true);\n"}
],
[
{"endColumn":60,"endLine":62,"isContentScript":true,"scriptId":"165","startColumn":0,"startLine":0,"url":"chrome-extension://jabopobgcpjmedljpbcaablpmlmfcogm/html2canvas.min.js"},{"scriptSource":"/*\n html2canvas v0.34 <http://html2canvas.hertzen.com>\n Copyright (c) 2011 Niklas von Hertzen. All rights reserved.\n http://www.twitter.com/niklasvh\n\n Released under MIT License\n*/\n(function(t,u,l){function E(c){i.logging&&t.console&&t.console.log&&t.console.log(c)}function U(c,g){var e=[];return{storage:e,width:c,height:g,fillRect:function(){e.push({type:\"function\",name:\"fillRect\",arguments:arguments})},drawImage:function(){e.push({type:\"function\",name:\"drawImage\",arguments:arguments})},fillText:function(){e.push({type:\"function\",name:\"fillText\",arguments:arguments})},setVariable:function(a,d){e.push({type:\"variable\",name:a,arguments:d})}}}var i={},T,L;i.Util={};i.Util.backgroundImage=\nfunction(c){if(/data:image\\/.*;base64,/i.test(c)||/^(-webkit|-moz|linear-gradient|-o-)/.test(c))return c;c.toLowerCase().substr(0,5)==='url(\"'?(c=c.substr(5),c=c.substr(0,c.length-2)):(c=c.substr(4),c=c.substr(0,c.length-1));return c};i.Util.Bounds=function(c){var g={};if(c.getBoundingClientRect)return c=c.getBoundingClientRect(),g.top=c.top,g.bottom=c.bottom||c.top+c.height,g.left=c.left,g.width=c.width||c.right-c.left,g.height=c.height||c.bottom-c.top,g};i.Util.getCSS=function(c,g){function e(a,\nb){var g=c.runtimeStyle&&c.runtimeStyle[a],e,k=c.style;if(!/^-?[0-9]+\\.?[0-9]*(?:px)?$/i.test(b)&&/^-?\\d/.test(b)){e=k.left;if(g)c.runtimeStyle.left=c.currentStyle.left;k.left=a===\"fontSize\"?\"1em\":b||0;b=k.pixelLeft+\"px\";k.left=e;if(g)c.runtimeStyle.left=g}return!/^(thin|medium|thick)$/i.test(b)?Math.round(parseFloat(b))+\"px\":b}var a;if(t.getComputedStyle)void 0!==c&&(T=u.defaultView.getComputedStyle(c,null)),a=T[g],g===\"backgroundPosition\"&&(a=(a.split(\",\")[0]||\"0 0\").split(\" \"),a[0]=a[0].indexOf(\"%\")===\n-1?e(g+\"X\",a[0]):a[0],a[1]=a[1]===l?a[0]:a[1],a[1]=a[1].indexOf(\"%\")===-1?e(g+\"Y\",a[1]):a[1]);else if(c.currentStyle)if(g===\"backgroundPosition\")a=[e(g+\"X\",c.currentStyle[g+\"X\"]),e(g+\"Y\",c.currentStyle[g+\"Y\"])];else if(a=e(g,c.currentStyle[g]),/^(border)/i.test(g)&&/^(medium|thin|thick)$/i.test(a))switch(a){case \"thin\":a=\"1px\";break;case \"medium\":a=\"0px\";break;case \"thick\":a=\"5px\"}return a};i.Util.BackgroundPosition=function(c,g,e){var c=i.Util.getCSS(c,\"backgroundPosition\"),a,d;c.length===1&&(a=\nc,c=[],c[0]=a,c[1]=a);c[0].toString().indexOf(\"%\")!==-1?(d=parseFloat(c[0])/100,a=g.width*d-e.width*d):a=parseInt(c[0],10);c[1].toString().indexOf(\"%\")!==-1?(d=parseFloat(c[1])/100,g=g.height*d-e.height*d):g=parseInt(c[1],10);return{top:g,left:a}};i.Util.Extend=function(c,g){for(var e in c)c.hasOwnProperty(e)&&(g[e]=c[e]);return g};i.Util.Children=function(c){var g;try{g=c.nodeName&&c.nodeName.toUpperCase()===\"IFRAME\"?c.contentDocument||c.contentWindow.document:function(a){var d=[];a!==null&&function(a,\nd){var c=a.length,g=0;if(typeof d.length===\"number\")for(var e=d.length;g<e;g++)a[c++]=d[g];else for(;d[g]!==l;)a[c++]=d[g++];a.length=c;return a}(d,a);return d}(c.childNodes)}catch(e){E(\"html2canvas.Util.Children failed with exception: \"+e.message),g=[]}return g};(function(){i.Generate={};var c=[/^(-webkit-linear-gradient)\\(([a-z\\s]+)([\\w\\d\\.\\s,%\\(\\)]+)\\)$/,/^(-o-linear-gradient)\\(([a-z\\s]+)([\\w\\d\\.\\s,%\\(\\)]+)\\)$/,/^(-webkit-gradient)\\((linear|radial),\\s((?:\\d{1,3}%?)\\s(?:\\d{1,3}%?),\\s(?:\\d{1,3}%?)\\s(?:\\d{1,3}%?))([\\w\\d\\.\\s,%\\(\\)-]+)\\)$/,\n/^(-moz-linear-gradient)\\(((?:\\d{1,3}%?)\\s(?:\\d{1,3}%?))([\\w\\d\\.\\s,%\\(\\)]+)\\)$/,/^(-webkit-radial-gradient)\\(((?:\\d{1,3}%?)\\s(?:\\d{1,3}%?)),\\s(\\w+)\\s([a-z-]+)([\\w\\d\\.\\s,%\\(\\)]+)\\)$/,/^(-moz-radial-gradient)\\(((?:\\d{1,3}%?)\\s(?:\\d{1,3}%?)),\\s(\\w+)\\s?([a-z-]*)([\\w\\d\\.\\s,%\\(\\)]+)\\)$/,/^(-o-radial-gradient)\\(((?:\\d{1,3}%?)\\s(?:\\d{1,3}%?)),\\s(\\w+)\\s([a-z-]+)([\\w\\d\\.\\s,%\\(\\)]+)\\)$/];i.Generate.parseGradient=function(g,e){var a,d,b=c.length,h,f,k,n;for(d=0;d<b;d+=1)if(h=g.match(c[d]))break;if(h)switch(h[1]){case \"-webkit-linear-gradient\":case \"-o-linear-gradient\":a=\n{type:\"linear\",x0:null,y0:null,x1:null,y1:null,colorStops:[]};if(b=h[2].match(/\\w+/g)){f=b.length;for(d=0;d<f;d+=1)switch(b[d]){case \"top\":a.y0=0;a.y1=e.height;break;case \"right\":a.x0=e.width;a.x1=0;break;case \"bottom\":a.y0=e.height;a.y1=0;break;case \"left\":a.x0=0,a.x1=e.width}}if(a.x0===null&&a.x1===null)a.x0=a.x1=e.width/2;if(a.y0===null&&a.y1===null)a.y0=a.y1=e.height/2;if(b=h[3].match(/((?:rgb|rgba)\\(\\d{1,3},\\s\\d{1,3},\\s\\d{1,3}(?:,\\s[0-9\\.]+)?\\)(?:\\s\\d{1,3}(?:%|px))?)+/g)){f=b.length;k=1/Math.max(f-\n1,1);for(d=0;d<f;d+=1)n=b[d].match(/((?:rgb|rgba)\\(\\d{1,3},\\s\\d{1,3},\\s\\d{1,3}(?:,\\s[0-9\\.]+)?\\))\\s*(\\d{1,3})?(%|px)?/),n[2]?(h=parseFloat(n[2]),h/=n[3]===\"%\"?100:e.width):h=d*k,a.colorStops.push({color:n[1],stop:h})}break;case \"-webkit-gradient\":a={type:h[2]===\"radial\"?\"circle\":h[2],x0:0,y0:0,x1:0,y1:0,colorStops:[]};if(b=h[3].match(/(\\d{1,3})%?\\s(\\d{1,3})%?,\\s(\\d{1,3})%?\\s(\\d{1,3})%?/))a.x0=b[1]*e.width/100,a.y0=b[2]*e.height/100,a.x1=b[3]*e.width/100,a.y1=b[4]*e.height/100;if(b=h[4].match(/((?:from|to|color-stop)\\((?:[0-9\\.]+,\\s)?(?:rgb|rgba)\\(\\d{1,3},\\s\\d{1,3},\\s\\d{1,3}(?:,\\s[0-9\\.]+)?\\)\\))+/g)){f=\nb.length;for(d=0;d<f;d+=1)n=b[d].match(/(from|to|color-stop)\\(([0-9\\.]+)?(?:,\\s)?((?:rgb|rgba)\\(\\d{1,3},\\s\\d{1,3},\\s\\d{1,3}(?:,\\s[0-9\\.]+)?\\))\\)/),h=parseFloat(n[2]),n[1]===\"from\"&&(h=0),n[1]===\"to\"&&(h=1),a.colorStops.push({color:n[3],stop:h})}break;case \"-moz-linear-gradient\":a={type:\"linear\",x0:0,y0:0,x1:0,y1:0,colorStops:[]};if(b=h[2].match(/(\\d{1,3})%?\\s(\\d{1,3})%?/))a.x0=b[1]*e.width/100,a.y0=b[2]*e.height/100,a.x1=e.width-a.x0,a.y1=e.height-a.y0;if(b=h[3].match(/((?:rgb|rgba)\\(\\d{1,3},\\s\\d{1,3},\\s\\d{1,3}(?:,\\s[0-9\\.]+)?\\)(?:\\s\\d{1,3}%)?)+/g)){f=\nb.length;k=1/Math.max(f-1,1);for(d=0;d<f;d+=1)n=b[d].match(/((?:rgb|rgba)\\(\\d{1,3},\\s\\d{1,3},\\s\\d{1,3}(?:,\\s[0-9\\.]+)?\\))\\s*(\\d{1,3})?(%)?/),n[2]?(h=parseFloat(n[2]),n[3]&&(h/=100)):h=d*k,a.colorStops.push({color:n[1],stop:h})}break;case \"-webkit-radial-gradient\":case \"-moz-radial-gradient\":case \"-o-radial-gradient\":a={type:\"circle\",x0:0,y0:0,x1:e.width,y1:e.height,cx:0,cy:0,rx:0,ry:0,colorStops:[]};if(b=h[2].match(/(\\d{1,3})%?\\s(\\d{1,3})%?/))a.cx=b[1]*e.width/100,a.cy=b[2]*e.height/100;b=h[3].match(/\\w+/);\nn=h[4].match(/[a-z-]*/);if(b&&n)switch(n[0]){case \"farthest-corner\":case \"cover\":case \"\":d=Math.sqrt(Math.pow(a.cx,2)+Math.pow(a.cy,2));b=Math.sqrt(Math.pow(a.cx,2)+Math.pow(a.y1-a.cy,2));f=Math.sqrt(Math.pow(a.x1-a.cx,2)+Math.pow(a.y1-a.cy,2));n=Math.sqrt(Math.pow(a.x1-a.cx,2)+Math.pow(a.cy,2));a.rx=a.ry=Math.max(d,b,f,n);break;case \"closest-corner\":d=Math.sqrt(Math.pow(a.cx,2)+Math.pow(a.cy,2));b=Math.sqrt(Math.pow(a.cx,2)+Math.pow(a.y1-a.cy,2));f=Math.sqrt(Math.pow(a.x1-a.cx,2)+Math.pow(a.y1-a.cy,\n2));n=Math.sqrt(Math.pow(a.x1-a.cx,2)+Math.pow(a.cy,2));a.rx=a.ry=Math.min(d,b,f,n);break;case \"farthest-side\":b[0]===\"circle\"?a.rx=a.ry=Math.max(a.cx,a.cy,a.x1-a.cx,a.y1-a.cy):(a.type=b[0],a.rx=Math.max(a.cx,a.x1-a.cx),a.ry=Math.max(a.cy,a.y1-a.cy));break;case \"closest-side\":case \"contain\":b[0]===\"circle\"?a.rx=a.ry=Math.min(a.cx,a.cy,a.x1-a.cx,a.y1-a.cy):(a.type=b[0],a.rx=Math.min(a.cx,a.x1-a.cx),a.ry=Math.min(a.cy,a.y1-a.cy))}if(b=h[5].match(/((?:rgb|rgba)\\(\\d{1,3},\\s\\d{1,3},\\s\\d{1,3}(?:,\\s[0-9\\.]+)?\\)(?:\\s\\d{1,3}(?:%|px))?)+/g)){f=\nb.length;k=1/Math.max(f-1,1);for(d=0;d<f;d+=1)n=b[d].match(/((?:rgb|rgba)\\(\\d{1,3},\\s\\d{1,3},\\s\\d{1,3}(?:,\\s[0-9\\.]+)?\\))\\s*(\\d{1,3})?(%|px)?/),n[2]?(h=parseFloat(n[2]),h/=n[3]===\"%\"?100:e.width):h=d*k,a.colorStops.push({color:n[1],stop:h})}}return a};i.Generate.Gradient=function(c,e){var a=u.createElement(\"canvas\"),d=a.getContext(\"2d\"),b,h,f,k,n;a.width=e.width;a.height=e.height;b=i.Generate.parseGradient(c,e);n=new Image;if(b)if(b.type===\"linear\"){h=d.createLinearGradient(b.x0,b.y0,b.x1,b.y1);f=\n0;for(k=b.colorStops.length;f<k;f+=1)try{h.addColorStop(b.colorStops[f].stop,b.colorStops[f].color)}catch(t){E([\"failed to add color stop: \",t,\"; tried to add: \",b.colorStops[f],\"; stop: \",f,\"; in: \",c])}d.fillStyle=h;d.fillRect(0,0,e.width,e.height);n.src=a.toDataURL()}else if(b.type===\"circle\"){h=d.createRadialGradient(b.cx,b.cy,0,b.cx,b.cy,b.rx);f=0;for(k=b.colorStops.length;f<k;f+=1)try{h.addColorStop(b.colorStops[f].stop,b.colorStops[f].color)}catch(l){E([\"failed to add color stop: \",l,\"; tried to add: \",\nb.colorStops[f],\"; stop: \",f,\"; in: \",c])}d.fillStyle=h;d.fillRect(0,0,e.width,e.height);n.src=a.toDataURL()}else if(b.type===\"ellipse\"){var v=u.createElement(\"canvas\"),x=v.getContext(\"2d\");h=Math.max(b.rx,b.ry);var K=h*2,G;v.width=v.height=K;h=x.createRadialGradient(b.rx,b.ry,0,b.rx,b.ry,h);f=0;for(k=b.colorStops.length;f<k;f+=1)try{h.addColorStop(b.colorStops[f].stop,b.colorStops[f].color)}catch(B){E([\"failed to add color stop: \",B,\"; tried to add: \",b.colorStops[f],\"; stop: \",f,\"; in: \",c])}x.fillStyle=\nh;x.fillRect(0,0,K,K);d.fillStyle=b.colorStops[f-1].color;d.fillRect(0,0,a.width,a.height);G=new Image;G.onload=function(){d.drawImage(G,b.cx-b.rx,b.cy-b.ry,2*b.rx,2*b.ry);n.src=a.toDataURL()};G.src=v.toDataURL()}return n};i.Generate.ListAlpha=function(c){var e=\"\",a;do a=c%26,e=String.fromCharCode(a+64)+e,c/=26;while(c*26>26);return e};i.Generate.ListRoman=function(c){var e=[\"M\",\"CM\",\"D\",\"CD\",\"C\",\"XC\",\"L\",\"XL\",\"X\",\"IX\",\"V\",\"IV\",\"I\"],a=[1E3,900,500,400,100,90,50,40,10,9,5,4,1],d=\"\",b,h=e.length;if(c<=\n0||c>=4E3)return c;for(b=0;b<h;b+=1)for(;c>=a[b];)c-=a[b],d+=e[b];return d}})();i.Parse=function(c,g){function e(){return{width:Math.max(Math.max(z.body.scrollWidth,z.documentElement.scrollWidth),Math.max(z.body.offsetWidth,z.documentElement.offsetWidth),Math.max(z.body.clientWidth,z.documentElement.clientWidth)),height:Math.max(Math.max(z.body.scrollHeight,z.documentElement.scrollHeight),Math.max(z.body.offsetHeight,z.documentElement.offsetHeight),Math.max(z.body.clientHeight,z.documentElement.clientHeight))}}\nfunction a(a,b){var c=parseInt(y(a,b),10);return isNaN(c)?0:c}function d(a,b,c,d,g,e){e!==\"transparent\"&&(a.setVariable(\"fillStyle\",e),a.fillRect(b,c,d,g),H+=1)}function b(a,b){switch(b){case \"lowercase\":return a.toLowerCase();case \"capitalize\":return a.replace(/(^|\\s|:|-|\\(|\\))([a-z])/g,function(a,b,V){if(a.length>0)return b+V.toUpperCase()});case \"uppercase\":return a.toUpperCase();default:return a}}function h(a){return a.replace(/^\\s*/g,\"\").replace(/\\s*$/g,\"\")}function f(a,c,e){var e=e.ctx,f=y(a,\n\"fontFamily\"),j=y(a,\"fontSize\"),k=y(a,\"color\"),n=y(a,\"textDecoration\"),F=y(a,\"textAlign\"),p=y(a,\"letterSpacing\"),I,q,m=y(a,\"fontWeight\"),r=y(a,\"fontStyle\"),s=y(a,\"fontVariant\"),A=0,o;c.nodeValue=b(c.nodeValue,y(a,\"textTransform\"));if(h(c.nodeValue).length>0){if(n!==\"none\")if(w[f+\"-\"+j]!==l)q=w[f+\"-\"+j];else{q=z.createElement(\"div\");a=z.createElement(\"img\");o=z.createElement(\"span\");var v;q.style.visibility=\"hidden\";q.style.fontFamily=f;q.style.fontSize=j;q.style.margin=0;q.style.padding=0;O.appendChild(q);\na.src=\"data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACwAAAAAAQABAAACAkQBADs=\";a.width=1;a.height=1;a.style.margin=0;a.style.padding=0;a.style.verticalAlign=\"baseline\";o.style.fontFamily=f;o.style.fontSize=j;o.style.margin=0;o.style.padding=0;o.appendChild(z.createTextNode(\"Hidden Text\"));q.appendChild(o);q.appendChild(a);v=a.offsetTop-o.offsetTop+1;q.removeChild(o);q.appendChild(z.createTextNode(\"Hidden Text\"));q.style.lineHeight=\"normal\";a.style.verticalAlign=\"super\";a={baseline:v,lineWidth:1,middle:a.offsetTop-\nq.offsetTop+1};w[f+\"-\"+j]=a;O.removeChild(q);q=a}F=F.replace([\"-webkit-auto\"],[\"auto\"]);F=g.letterRendering===!1&&/^(left|right|justify|auto)$/.test(F)&&/^(normal|none)$/.test(p)?c.nodeValue.split(/(\\b| )/):c.nodeValue.split(\"\");switch(parseInt(m,10)){case 401:m=\"bold\";break;case 400:m=\"normal\"}e.setVariable(\"fillStyle\",k);e.setVariable(\"font\",r+\" \"+s+\" \"+m+\" \"+j+\" \"+f);e.setVariable(\"textAlign\",\"left\");j=c;m=0;for(f=F.length;m<f;m+=1){r=null;if(B.rangeBounds){if(n!==\"none\"||h(F[m]).length!==0)r=\nF[m],z.createRange?(I=z.createRange(),I.setStart(c,A),I.setEnd(c,A+r.length)):I=O.createTextRange(),I=I.getBoundingClientRect()?I.getBoundingClientRect():{}}else{if(typeof j.nodeValue!==\"string\")continue;s=j.splitText(F[m].length);p=j.parentNode;a=z.createElement(\"wrapper\");o=j.cloneNode(!0);a.appendChild(j.cloneNode(!0));p.replaceChild(a,j);I=i.Util.Bounds(a);r=j.nodeValue;j=s;p.replaceChild(o,a)}if(r!==null)s=I.left,p=I.bottom,a=e,h(r).length>0&&(a.fillText(r,s,p),H+=1);switch(n){case \"underline\":d(e,\nI.left,Math.round(I.top+q.baseline+q.lineWidth),I.width,1,k);break;case \"overline\":d(e,I.left,I.top,I.width,1,k);break;case \"line-through\":d(e,I.left,Math.ceil(I.top+q.middle+q.lineWidth),I.width,1,k)}A+=F[m].length}}}function k(a){return(a=c[a])&&a.succeeded===!0?a.img:!1}function n(a,b){var c=Math.max(a.left,b.left),d=Math.max(a.top,b.top);return{left:c,top:d,width:Math.min(a.left+a.width,b.left+b.width)-c,height:Math.min(a.top+a.height,b.top+b.height)-d}}function Q(b,c,e,g){for(var f=e.left,j=\ne.top,h=e.width,e=e.height,k,p,B,q,m,i=function(b){var c=[],d=[\"Top\",\"Right\",\"Bottom\",\"Left\"],e;for(e=0;e<4;e+=1)c.push({width:a(b,\"border\"+d[e]+\"Width\"),color:y(b,\"border\"+d[e]+\"Color\")});return c}(b),b=0;b<4;b+=1)if(k=i[b],k.width>0){p=f;B=j;q=h;m=e-i[2].width;switch(b){case 0:m=i[0].width;break;case 1:p=f+h-i[1].width;q=i[1].width;break;case 2:B=B+e-i[2].width;m=i[2].width;break;case 3:q=i[3].width}q={left:p,top:B,width:q,height:m};g&&(q=n(q,g));q.width>0&&q.height>0&&d(c,p,B,q.width,q.height,\nk.color)}return i}function P(a,b,c){var d=z.createElement(\"valuewrap\"),e=[\"lineHeight\",\"textAlign\",\"fontFamily\",\"color\",\"fontSize\",\"paddingLeft\",\"paddingTop\",\"width\",\"height\",\"border\",\"borderLeftWidth\",\"borderTopWidth\"],g,j,h;g=0;for(j=e.length;g<j;g+=1){h=e[g];try{d.style[h]=y(a,h)}catch(k){E(\"html2canvas: Parse: Exception caught in renderFormValue: \"+k.message)}}d.style.borderColor=\"black\";d.style.borderStyle=\"solid\";d.style.display=\"block\";d.style.position=\"absolute\";if(/^(submit|reset|button|text|password)$/.test(a.type)||\na.nodeName===\"SELECT\")d.style.lineHeight=y(a,\"height\");d.style.top=b.top+\"px\";d.style.left=b.left+\"px\";b=z.createTextNode(a.nodeName===\"SELECT\"?a.options[a.selectedIndex].text:a.value);d.appendChild(b);O.appendChild(d);f(a,b,c);O.removeChild(d)}function v(a,b,c,d,e,g,f,j){var h=0,k=0;f-c>0&&(h=f-c);j-d>0&&(k=j-d);a.drawImage(b,h,k,e-h,g-k,c+h,d+k,e-h,g-k);H+=1}function x(a,b,c,d,e,g,f){var f=Math.min(b.height,f),h,j;c.left-=Math.ceil(c.left/b.width)*b.width;for(j=d+c.left;j<g+d;)h=Math.floor(j+b.width)>\ng+d?g+d-j:b.width,v(a,b,j,e+c.top,h,f,d,e),j=Math.floor(j+b.width)}function K(b,c){var j=i.Util.Bounds(b),f=j.left,B=j.top,w=j.width,D=j.height,F,p=y(b,\"backgroundColor\"),t=y(b,\"position\"),q,m=y(b,\"opacity\"),r,s;c?L={}:(L=e(),c={opacity:1});s=y(b,\"zIndex\");(q=c.zIndex)?s!==\"auto\"&&(s={zindex:s,children:[]},q.children.push(s),q=s):q=s={zindex:0,children:[]};r={ctx:U(L.width||w,L.height||D),zIndex:q,opacity:m*c.opacity,cssPosition:t};if(c.clip)r.clip=i.Util.Extend({},c.clip);if(g.useOverflow===!0&&\n/(hidden|scroll|auto)/.test(y(b,\"overflow\"))===!0&&/(BODY)/i.test(b.nodeName)===!1)r.clip=r.clip?n(r.clip,j):j;t=q.children.push(r);s=q.children[t-1].ctx;s.setVariable(\"globalAlpha\",r.opacity);m=Q(b,s,j,!1);r.borders=m;A.test(b.nodeName)&&g.iframeDefault!==\"transparent\"&&(p=g.iframeDefault===\"default\"?\"#efefef\":g.iframeDefault);w={left:f+m[3].width,top:B+m[0].width,width:w-(m[1].width+m[3].width),height:D-(m[0].width+m[2].width)};r.clip&&(w=n(w,r.clip));if(w.height>0&&w.width>0){d(s,w.left,w.top,\nw.width,w.height,p);var C=w,o=y(b,\"backgroundImage\"),l=y(b,\"backgroundRepeat\").split(\",\")[0],u,G,J;!/data:image\\/.*;base64,/i.test(o)&&!/^(-webkit|-moz|linear-gradient|-o-)/.test(o)&&(o=o.split(\",\")[0]);if(typeof o!==\"undefined\"&&/^(1|none)$/.test(o)===!1)if(o=i.Util.backgroundImage(o),p=k(o),D=i.Util.BackgroundPosition(b,C,p),p)switch(l){case \"repeat-x\":x(s,p,D,C.left,C.top,C.width,C.height);break;case \"repeat-y\":o=C.left;l=C.top;u=C.height;G=Math.min(p.width,C.width);D.top-=Math.ceil(D.top/p.height)*\np.height;for(J=l+D.top;J<u+l;)C=Math.floor(J+p.height)>u+l?u+l-J:p.height,v(s,p,o+D.left,J,G,C,o,l),J=Math.floor(J+p.height);break;case \"no-repeat\":o=C.width-D.left;J=C.height-D.top;l=D.left;u=D.top;G=D.left+C.left;D=D.top+C.top;l<0?(l=Math.abs(l),G+=l,o=Math.min(C.width,p.width-l)):(o=Math.min(o,p.width),l=0);u<0?(u=Math.abs(u),D+=u,J=Math.min(C.height,p.height-u)):(J=Math.min(J,p.height),u=0);J>0&&o>0&&(s.drawImage(p,l,u,o,J,G,D,o,J),H+=1);break;default:D.top-=Math.ceil(D.top/p.height)*p.height;\nfor(o=C.top+D.top;o<C.height+C.top;)l=Math.min(p.height,C.height+C.top-o),l=Math.floor(o+p.height)>l+o?l+o-o:p.height,o<C.top?(u=C.top-o,o=C.top):u=0,x(s,p,D,C.left,o,C.width,l),u>0&&(D.top+=u),o=Math.floor(o+p.height)-u}else E(\"html2canvas: Error loading background:\"+o)}switch(b.nodeName){case \"IMG\":r=b.getAttribute(\"src\");(F=k(r))?(r=a(b,\"paddingLeft\"),w=a(b,\"paddingTop\"),p=a(b,\"paddingRight\"),D=a(b,\"paddingBottom\"),s.drawImage(F,0,0,F.width,F.height,f+r+m[3].width,B+w+m[0].width,j.width-(m[1].width+\nm[3].width+r+p),j.height-(m[0].width+m[2].width+w+D)),H+=1):E(\"html2canvas: Error loading <img>:\"+r);break;case \"INPUT\":/^(text|url|email|submit|button|reset)$/.test(b.type)&&b.value.length>0&&P(b,j,r);break;case \"TEXTAREA\":b.value.length>0&&P(b,j,r);break;case \"SELECT\":b.options.length>0&&P(b,j,r);break;case \"LI\":j=w;f=y(b,\"listStylePosition\");m=y(b,\"listStyleType\");B=y(b,\"fontWeight\");if(/^(decimal|decimal-leading-zero|upper-alpha|upper-latin|upper-roman|lower-alpha|lower-greek|lower-latin|lower-roman)$/i.test(m)){s=\n-1;r=1;w=b.parentNode.childNodes;if(b.parentNode){for(;w[++s]!==b;)w[s].nodeType===1&&r++;s=r}else s=-1;switch(m){case \"decimal\":F=s;break;case \"decimal-leading-zero\":F=s.toString().length===1?\"0\"+s.toString():s.toString();break;case \"upper-roman\":F=i.Generate.ListRoman(s);break;case \"lower-roman\":F=i.Generate.ListRoman(s).toLowerCase();break;case \"lower-alpha\":F=i.Generate.ListAlpha(s).toLowerCase();break;case \"upper-alpha\":F=i.Generate.ListAlpha(s)}F+=\". \";r=F;m=z.createElement(\"boundelement\");\nm.style.display=\"inline\";s=b.style.listStyleType;b.style.listStyleType=\"none\";m.appendChild(z.createTextNode(r));b.insertBefore(m,b.firstChild);r=i.Util.Bounds(m);b.removeChild(m);b.style.listStyleType=s;switch(B){case 401:B=\"bold\";break;case 400:B=\"normal\"}R.setVariable(\"fillStyle\",y(b,\"color\"));R.setVariable(\"font\",y(b,\"fontVariant\")+\" \"+B+\" \"+y(b,\"fontStyle\")+\" \"+y(b,\"fontSize\")+\" \"+y(b,\"fontFamily\"));if(f===\"inside\")R.setVariable(\"textAlign\",\"left\"),j=j.left,f=r.bottom,B=R,h(F).length>0&&(B.fillText(F,\nj,f),H+=1)}break;case \"CANVAS\":r=a(b,\"paddingLeft\"),w=a(b,\"paddingTop\"),p=a(b,\"paddingRight\"),D=a(b,\"paddingBottom\"),s.drawImage(b,0,0,b.width,b.height,f+r+m[3].width,B+w+m[0].width,j.width-(m[1].width+m[3].width+r+p),j.height-(m[0].width+m[2].width+w+D)),H+=1}return q.children[t-1]}function G(a,b){if(y(a,\"display\")!==\"none\"&&y(a,\"visibility\")!==\"hidden\"&&(b=K(a,b)||b,R=b.ctx,!A.test(a.nodeName))){var c=i.Util.Children(a),d,e,j;d=0;for(j=c.length;d<j;d+=1)e=c[d],e.nodeType===1?G(e,b):e.nodeType===\n3&&f(a,e,b)}}t.scroll(0,0);var B={rangeBounds:!1,svgRendering:g.svgRendering&&function(){var a=new Image,b=u.createElement(\"canvas\"),c=b.getContext===l?!1:b.getContext(\"2d\");if(c===!1)return!1;b.width=b.height=10;a.src=\"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='10' height='10'><foreignObject width='10' height='10'><div xmlns='http://www.w3.org/1999/xhtml' style='width:10;height:10;'>sup</div></foreignObject></svg>\";try{c.drawImage(a,0,0),b.toDataURL()}catch(d){return!1}E(\"html2canvas: Parse: SVG powered rendering available\");\nreturn!0}()},j=g.elements===l?u.body:g.elements[0],H=0,w={},z=j.ownerDocument,A=RegExp(\"(\"+g.ignoreElements+\")\"),O=z.body,M,N,S,R,L,c=c||{};if(z.createRange&&(M=z.createRange(),M.getBoundingClientRect)){N=z.createElement(\"boundtest\");N.style.height=\"123px\";N.style.display=\"block\";O.appendChild(N);M.selectNode(N);M=M.getBoundingClientRect();M=M.height;if(M===123)B.rangeBounds=!0;O.removeChild(N)}var y=i.Util.getCSS;S=K(j,null);B.svgRendering&&function(a){function b(a){var a=i.Util.Children(a),c=a.length,\nd,e,g,f,h;for(h=0;h<c;h+=1)if(f=a[h],f.nodeType===3)j+=f.nodeValue.replace(/\\</g,\"&lt;\").replace(/\\>/g,\"&gt;\");else if(f.nodeType===1&&!/^(script|meta|title)$/.test(f.nodeName.toLowerCase())){j+=\"<\"+f.nodeName.toLowerCase();if(f.hasAttributes()){d=f.attributes;g=d.length;for(e=0;e<g;e+=1)j+=\" \"+d[e].name+'=\"'+d[e].value+'\"'}j+=\">\";b(f);j+=\"</\"+f.nodeName.toLowerCase()+\">\"}}var c=new Image,d=e(),j=\"\";b(a);c.src=[\"data:image/svg+xml,\",\"<svg xmlns='http://www.w3.org/2000/svg' version='1.1' width='\"+\nd.width+\"' height='\"+d.height+\"'>\",\"<foreignObject width='\"+d.width+\"' height='\"+d.height+\"'>\",\"<html xmlns='http://www.w3.org/1999/xhtml' style='margin:0;'>\",j.replace(/\\#/g,\"%23\"),\"</html></foreignObject></svg>\"].join(\"\");c.onload=function(){S.svgRender=c}}(u.documentElement);N=0;j=j.children;for(M=j.length;N<M;N+=1)G(j[N],S);S.backgroundColor=y(u.documentElement,\"backgroundColor\");return S};i.Preload=function(c){function g(){E(\"html2canvas: start: images: \"+b.numLoaded+\" / \"+b.numTotal+\" (failed: \"+\nb.numFailed+\")\");!b.firstRun&&b.numLoaded>=b.numTotal&&(E(\"Finished loading images: # \"+b.numTotal+\" (failed: \"+b.numFailed+\")\"),typeof c.complete===\"function\"&&c.complete(b))}function e(a,e,f){var h,k=c.proxy,i;x.href=a;a=x.href;h=\"html2canvas_\"+n++;f.callbackname=h;k+=k.indexOf(\"?\")>-1?\"&\":\"?\";k+=\"url=\"+encodeURIComponent(a)+\"&callback=\"+h;i=Q.createElement(\"script\");t[h]=function(a){a.substring(0,6)===\"error:\"?(f.succeeded=!1,b.numLoaded++,b.numFailed++,g()):(d(e,f),e.src=a);t[h]=l;try{delete t[h]}catch(c){}i.parentNode.removeChild(i);\ni=null;delete f.script;delete f.callbackname};i.setAttribute(\"type\",\"text/javascript\");i.setAttribute(\"src\",k);f.script=i;t.document.body.appendChild(i)}function a(c){var d=i.Util.Children(c),e,h,k=!1;try{var n=d.length;for(e=0;e<n;e+=1)a(d[e])}catch(u){}try{k=c.nodeType}catch(v){k=!1,E(\"html2canvas: failed to access some element's nodeType - Exception: \"+v.message)}if(k===1||k===l){try{h=i.Util.getCSS(c,\"backgroundImage\")}catch(t){E(\"html2canvas: failed to get background-image - Exception: \"+t.message)}h&&\nh!==\"1\"&&h!==\"none\"&&(/^(-webkit|-o|-moz|-ms|linear)-/.test(h)?(c=i.Generate.Gradient(h,i.Util.Bounds(c)),c!==l&&(b[h]={img:c,succeeded:!0},b.numTotal++,b.numLoaded++,g())):(h=i.Util.backgroundImage(h.match(/data:image\\/.*;base64,/i)?h:h.split(\",\")[0]),f.loadImage(h)))}}function d(a,d){a.onload=function(){d.timer!==l&&t.clearTimeout(d.timer);b.numLoaded++;d.succeeded=!0;a.onerror=a.onload=null;g()};a.onerror=function(){if(a.crossOrigin===\"anonymous\"&&(t.clearTimeout(d.timer),c.proxy)){var f=a.src;\na=new Image;d.img=a;a.src=f;e(a.src,a,d);return}b.numLoaded++;b.numFailed++;d.succeeded=!1;a.onerror=a.onload=null;g()}}var b={numLoaded:0,numFailed:0,numTotal:0,cleanupDone:!1},h,f,k,n=0;k=c.elements[0]||u.body;var Q=k.ownerDocument,P=Q.images,v=P.length,x=Q.createElement(\"a\"),K=function(a){return a.crossOrigin!==l}(new Image),G;x.href=t.location.href;h=x.protocol+x.host;f={loadImage:function(a){var f,g;if(a&&b[a]===l)f=new Image,a.match(/data:image\\/.*;base64,/i)?(f.src=a.replace(/url\\(['\"]{0,}|['\"]{0,}\\)$/ig,\n\"\"),g=b[a]={img:f},b.numTotal++,d(f,g)):(x.href=a,x.href=x.href,x.protocol+x.host===h||c.allowTaint===!0?(g=b[a]={img:f},b.numTotal++,d(f,g),f.src=a):K&&!c.allowTaint&&c.useCORS?(f.crossOrigin=\"anonymous\",g=b[a]={img:f},b.numTotal++,d(f,g),f.src=a,f.customComplete=function(){if(this.img.complete)this.img.onerror();else this.timer=t.setTimeout(this.img.customComplete,100)}.bind(g),f.customComplete()):c.proxy&&(g=b[a]={img:f},b.numTotal++,e(a,f,g)))},cleanupDOM:function(a){var d,e;if(!b.cleanupDone){a&&\ntypeof a===\"string\"?E(\"html2canvas: Cleanup because: \"+a):E(\"html2canvas: Cleanup after timeout: \"+c.timeout+\" ms.\");for(e in b)if(b.hasOwnProperty(e)&&(d=b[e],typeof d===\"object\"&&d.callbackname&&d.succeeded===l)){t[d.callbackname]=l;try{delete t[d.callbackname]}catch(f){}d.script&&d.script.parentNode&&(d.script.setAttribute(\"src\",\"about:blank\"),d.script.parentNode.removeChild(d.script));b.numLoaded++;b.numFailed++;E(\"html2canvas: Cleaned up failed img: '\"+e+\"' Steps: \"+b.numLoaded+\" / \"+b.numTotal)}t.stop!==\nl?t.stop():u.execCommand!==l&&u.execCommand(\"Stop\",!1);u.close!==l&&u.close();b.cleanupDone=!0;a&&typeof a===\"string\"||g()}},renderingDone:function(){G&&t.clearTimeout(G)}};c.timeout>0&&(G=t.setTimeout(f.cleanupDOM,c.timeout));E(\"html2canvas: Preload starts: finding background-images\");b.firstRun=!0;a(k);E(\"html2canvas: Preload: Finding images\");for(k=0;k<v;k+=1)f.loadImage(P[k].getAttribute(\"src\"));b.firstRun=!1;E(\"html2canvas: Preload: Done.\");b.numTotal===b.numLoaded&&g();return f};i.Renderer=\nfunction(c,g){function e(c){var b=[],g=[],c=c.children,f,k,i,l;f=0;for(i=c.length;f<i;f+=1)k=c[f],k.children&&k.children.length>0?(b.push(k),g.push(k.zindex)):a.push(k);g.sort(function(a,b){return a-b});c=0;for(f=g.length;c<f;c+=1){k=g[c];i=0;for(l=b.length;i<=l;i+=1)if(b[i].zindex===k){k=b.splice(i,1);e(k[0]);break}}}var a=[];e(c.zIndex);if(typeof g._renderer._create!==\"function\")throw Error(\"Invalid renderer defined\");return g._renderer._create(c,g,u,a,i)};L=function(c,g){var e,a,d={logging:!1,\nelements:c,proxy:\"http://html2canvas.appspot.com/\",timeout:0,useCORS:!1,allowTaint:!1,svgRendering:!1,iframeDefault:\"default\",ignoreElements:\"IFRAME|OBJECT|PARAM\",useOverflow:!0,letterRendering:!1,flashcanvas:l,width:null,height:null,taintTest:!0,renderer:\"Canvas\"},d=i.Util.Extend(g,d);if(typeof d.renderer===\"string\"&&i.Renderer[d.renderer]!==l)d._renderer=i.Renderer[d.renderer](d);else if(typeof d.renderer===\"function\")d._renderer=d.renderer(d);else throw\"Unknown renderer\";i.logging=d.logging;d.complete=\nfunction(b){if(!(typeof d.onpreloaded===\"function\"&&d.onpreloaded(b)===!1)&&(e=i.Parse(b,d),!(typeof d.onparsed===\"function\"&&d.onparsed(e)===!1)&&(a=i.Renderer(e,d),typeof d.onrendered===\"function\")))d.onrendered(a)};t.setTimeout(function(){i.Preload(d)},0);return{render:function(a,c){return i.Renderer(a,i.Util.Extend(c,d))},parse:function(a,c){return i.Parse(a,i.Util.Extend(c,d))},preload:function(a){return i.Preload(i.Util.Extend(a,d))},log:E}};L.log=E;L.Renderer={Canvas:l};i.Renderer.Canvas=function(c){var c=\nc||{},g=c.canvas||u.createElement(\"canvas\"),e=!1,a=!1,d=!1,b;if(g.getContext)E(\"html2canvas: Renderer: using canvas renderer\"),d=!0;else if(c.flashcanvas!==l){e=!0;E(\"html2canvas: Renderer: canvas not available, using flashcanvas\");var h=u.createElement(\"script\");h.src=c.flashcanvas;h.onload=function(a,b){var c;if(a.onload===l)a.onreadystatechange!==l?(c=function(){a.readyState!==\"loaded\"&&a.readyState!==\"complete\"?t.setTimeout(c,250):b()},t.setTimeout(c,250)):E(\"html2canvas: Renderer: Can't track when flashcanvas is loaded\");\nelse return b}(h,function(){typeof t.FlashCanvas!==\"undefined\"&&(E(\"html2canvas: Renderer: Flashcanvas initialized\"),t.FlashCanvas.initElement(g),d=!0,a!==!1&&b._create.apply(null,a))});u.body.appendChild(h)}return b={_create:function(b,c,h,i,t){if(!d)return a=arguments,g;var v=g.getContext(\"2d\"),x,K,G,B,j,H,w=u.createElement(\"canvas\");j=w.getContext!==l;var z,A,w=j?w.getContext(\"2d\"):{};H=[];g.width=g.style.width=!e?c.width||b.ctx.width:Math.min(2880,c.width||b.ctx.width);g.height=g.style.height=\n!e?c.height||b.ctx.height:Math.min(2880,c.height||b.ctx.height);x=v.fillStyle;v.fillStyle=b.backgroundColor;v.fillRect(0,0,g.width,g.height);v.fillStyle=x;if(c.svgRendering&&b.svgRender!==l)v.drawImage(b.svgRender,0,0);else{K=0;for(G=i.length;K<G;K+=1){x=i.splice(0,1)[0];x.canvasPosition=x.canvasPosition||{};v.textBaseline=\"bottom\";x.clip&&(v.save(),v.beginPath(),v.rect(x.clip.left,x.clip.top,x.clip.width,x.clip.height),v.clip());if(x.ctx.storage){B=0;for(z=x.ctx.storage.length;B<z;B+=1)switch(A=\nx.ctx.storage[B],A.type){case \"variable\":v[A.name]=A.arguments;break;case \"function\":if(A.name===\"fillRect\")(!e||A.arguments[0]+A.arguments[2]<2880&&A.arguments[1]+A.arguments[3]<2880)&&v.fillRect.apply(v,A.arguments);else if(A.name===\"fillText\")(!e||A.arguments[1]<2880&&A.arguments[2]<2880)&&v.fillText.apply(v,A.arguments);else if(A.name===\"drawImage\"&&A.arguments[8]>0&&A.arguments[7]){if(j&&c.taintTest&&H.indexOf(A.arguments[0].src)===-1){w.drawImage(A.arguments[0],0,0);try{w.getImageData(0,0,1,\n1)}catch(L){w=h.createElement(\"canvas\");w=w.getContext(\"2d\");continue}H.push(A.arguments[0].src)}v.drawImage.apply(v,A.arguments)}}}x.clip&&v.restore()}}E(\"html2canvas: Renderer: Canvas renderer done - returning canvas obj\");G=c.elements.length;return G===1&&typeof c.elements[0]===\"object\"&&c.elements[0].nodeName!==\"BODY\"&&e===!1?(H=t.Util.Bounds(c.elements[0]),j=h.createElement(\"canvas\"),j.width=H.width,j.height=H.height,v=j.getContext(\"2d\"),v.drawImage(g,H.left,H.top,H.width,H.height,0,0,H.width,\nH.height),g=null,j):g}}};t.html2canvas=L})(window,document);"}
],
[
{"endColumn":3833,"endLine":0,"isContentScript":true,"scriptId":"166","startColumn":0,"startLine":0,"url":"chrome-extension://niloccemoadcdkdjlinkgdfekeahmflj/js/keyboard-shortcut.js"},{"scriptSource":"(function(){function e(){return window.chrome!==undefined}function t(){return window.safari!==undefined}function n(n){e()?window.chrome.extension.onMessage?chrome.extension.onMessage.addListener(n):chrome.extension.onRequest.addListener(n):t()&&window.safari.self.addEventListener(\"message\",function(e){n(e.message,e,function(){})})}function r(n,r){e()?chrome.extension.sendMessage?chrome.extension.sendMessage(n,r):chrome.extension.sendRequest(n,r):t()&&(r&&(n.__cbId=Callbacker.addCb(r)),safari.self.tab.dispatchMessage(\"message\",n))}function i(){r({action:\"getSetting\",key:\"keyboard-shortcut-add\"},function(e){s(),key(e.value,function(e,t){var n={identifier:\"keyboard-shortcut\",action:\"addURL\",showSavedToolbarIcon:!0,title:document.title,url:window.location.toString(),actionInfo:{cxt_ui:\"keyboard\"}};r(n,function(e){})})})}function s(){key.deleteScope(\"all\")}function o(){r({action:\"getSetting\",key:\"keyboard-shortcut\"},function(e){e.value===\"true\"||e.value===!0?i():(e.value===\"false\"||e.value===!1)&&key.deleteScope(\"all\")})}if(t()&&window.top!=window)return;(function(e){function f(e,t){var n=e.length;while(n--)if(e[n]===t)return n;return-1}function c(e){for(t in r)r[t]=e[l[t]]}function h(e,t){var i,o,u,l,h;i=e.keyCode,f(a,i)==-1&&a.push(i);if(i==93||i==224)i=91;if(i in r){r[i]=!0;for(u in s)s[u]==i&&(v[u]=!0);return}c(e);if(!v.filter.call(this,e))return;if(!(i in n))return;for(l=0;l<n[i].length;l++){o=n[i][l];if(o.scope==t||o.scope==\"all\"){h=o.mods.length>0;for(u in r)if(!r[u]&&f(o.mods,+u)>-1||r[u]&&f(o.mods,+u)==-1)h=!1;(o.mods.length==0&&!r[16]&&!r[18]&&!r[17]&&!r[91]||h)&&o.method(e,o)===!1&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}}function p(e){var t=e.keyCode,n,i=f(a,t);i>=0&&a.splice(i,1);if(t==93||t==224)t=91;if(t in r){r[t]=!1;for(n in s)s[n]==t&&(v[n]=!1)}}function d(){for(t in r)r[t]=!1;for(t in s)v[t]=!1}function v(e,t,r){var i,o,a,f;r===undefined&&(r=t,t=\"all\"),e=e.replace(/\\s/g,\"\"),i=e.split(\",\"),i[i.length-1]==\"\"&&(i[i.length-2]+=\",\");for(a=0;a<i.length;a++){o=[],e=i[a].split(\"+\");if(e.length>1){o=e.slice(0,e.length-1);for(f=0;f<o.length;f++)o[f]=s[o[f]];e=[e[e.length-1]]}e=e[0],e=u(e),e in n||(n[e]=[]),n[e].push({shortcut:i[a],scope:t,method:r,key:i[a],mods:o})}}function m(e){return typeof e==\"string\"&&(e=u(e)),f(a,e)!=-1}function g(){return a.slice(0)}function y(e){var t=(e.target||e.srcElement).tagName;return t!=\"INPUT\"&&t!=\"SELECT\"&&t!=\"TEXTAREA\"}function b(e){i=e||\"all\"}function w(){return i||\"all\"}function E(e){var t,r,i;for(t in n){r=n[t];for(i=0;i<r.length;)r[i].scope===e?r.splice(i,1):i++}}function S(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent(\"on\"+t,function(){n(window.event)})}function T(){var t=e.key;return e.key=x,t}var t,n={},r={16:!1,18:!1,17:!1,91:!1},i=\"all\",s={\"⇧\":16,shift:16,SHIFT:16,\"⌥\":18,alt:18,option:18,OPTION:18,\"⌃\":17,ctrl:17,control:17,CTRL:17,CONTROL:17,\"⌘\":91,command:91},o={backspace:8,tab:9,clear:12,enter:13,\"return\":13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,\"delete\":46,home:36,end:35,pageup:33,pagedown:34,\",\":188,\".\":190,\"/\":191,\"`\":192,\"-\":189,\"=\":187,\";\":186,\"'\":222,\"[\":219,\"]\":221,\"\\\\\":220},u=function(e){return o[e]||e.toUpperCase().charCodeAt(0)},a=[];for(t=1;t<20;t++)s[\"f\"+t]=111+t;var l={16:\"shiftKey\",18:\"altKey\",17:\"ctrlKey\",91:\"metaKey\"};for(t in s)v[t]=!1;S(document,\"keydown\",function(e){h(e,i)}),S(document,\"keyup\",p),S(window,\"focus\",d);var x=e.key;e.key=v,e.key.setScope=b,e.key.getScope=w,e.key.deleteScope=E,e.key.filter=y,e.key.isPressed=m,e.key.getPressedKeyCodes=g,e.key.noConflict=T,typeof module!=\"undefined\"&&(module.exports=key)})(this),n(function(e,t,n){e.action===\"settingChanged\"&&(e.key===\"keyboard-shortcut\"||e.key===\"keyboard-shortcut-add\")&&o()}),o()})();"}
],
[
{"endColumn":2,"endLine":115,"isContentScript":true,"scriptId":"167","startColumn":0,"startLine":0,"url":"extensions::extension"},{"scriptSource":"(function(require, requireNative, exports, console, $Array, $Function, $JSON, $Object, $RegExp, $String) {'use strict';// Copyright (c) 2012 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n// Custom binding for the extension API.\n\nvar binding = require('binding').Binding.create('extension');\n\nvar extensionNatives = requireNative('extension');\nvar GetExtensionViews = extensionNatives.GetExtensionViews;\nvar messaging = require('messaging');\nvar runtimeNatives = requireNative('runtime');\nvar OpenChannelToExtension = runtimeNatives.OpenChannelToExtension;\nvar OpenChannelToNativeApp = runtimeNatives.OpenChannelToNativeApp;\nvar chrome = requireNative('chrome').GetChrome();\n\nvar inIncognitoContext = requireNative('process').InIncognitoContext();\nvar sendRequestIsDisabled = requireNative('process').IsSendRequestDisabled();\nvar contextType = requireNative('process').GetContextType();\nvar manifestVersion = requireNative('process').GetManifestVersion();\n\n// This should match chrome.windows.WINDOW_ID_NONE.\n//\n// We can't use chrome.windows.WINDOW_ID_NONE directly because the\n// chrome.windows API won't exist unless this extension has permission for it;\n// which may not be the case.\nvar WINDOW_ID_NONE = -1;\n\nbinding.registerCustomHook(function(bindingsAPI, extensionId) {\n  var extension = bindingsAPI.compiledApi;\n  if (manifestVersion < 2) {\n    chrome.self = extension;\n    extension.inIncognitoTab = inIncognitoContext;\n  }\n  extension.inIncognitoContext = inIncognitoContext;\n\n  var apiFunctions = bindingsAPI.apiFunctions;\n\n  apiFunctions.setHandleRequest('getViews', function(properties) {\n    var windowId = WINDOW_ID_NONE;\n    var type = 'ALL';\n    if (properties) {\n      if (properties.type != null) {\n        type = properties.type;\n      }\n      if (properties.windowId != null) {\n        windowId = properties.windowId;\n      }\n    }\n    return GetExtensionViews(windowId, type);\n  });\n\n  apiFunctions.setHandleRequest('getBackgroundPage', function() {\n    return GetExtensionViews(-1, 'BACKGROUND')[0] || null;\n  });\n\n  apiFunctions.setHandleRequest('getExtensionTabs', function(windowId) {\n    if (windowId == null)\n      windowId = WINDOW_ID_NONE;\n    return GetExtensionViews(windowId, 'TAB');\n  });\n\n  apiFunctions.setHandleRequest('getURL', function(path) {\n    path = String(path);\n    if (!path.length || path[0] != '/')\n      path = '/' + path;\n    return 'chrome-extension://' + extensionId + path;\n  });\n\n  // Alias several messaging deprecated APIs to their runtime counterparts.\n  var mayNeedAlias = [\n    // Types\n    'Port',\n    // Functions\n    'connect', 'sendMessage', 'connectNative', 'sendNativeMessage',\n    // Events\n    'onConnect', 'onConnectExternal', 'onMessage', 'onMessageExternal'\n  ];\n  $Array.forEach(mayNeedAlias, function(alias) {\n    // Checking existence isn't enough since some functions are disabled via\n    // getters that throw exceptions. Assume that any getter is such a function.\n    if (chrome.runtime &&\n        $Object.hasOwnProperty(chrome.runtime, alias) &&\n        chrome.runtime.__lookupGetter__(alias) === undefined) {\n      extension[alias] = chrome.runtime[alias];\n    }\n  });\n\n  apiFunctions.setUpdateArgumentsPreValidate('sendRequest',\n      $Function.bind(messaging.sendMessageUpdateArguments,\n                     null, 'sendRequest'));\n\n  apiFunctions.setHandleRequest('sendRequest',\n                                function(targetId, request, responseCallback) {\n    if (sendRequestIsDisabled)\n      throw new Error(sendRequestIsDisabled);\n    var port = chrome.runtime.connect(targetId || extensionId,\n                                      {name: messaging.kRequestChannel});\n    messaging.sendMessageImpl(port, request, responseCallback);\n  });\n\n  if (sendRequestIsDisabled) {\n    extension.onRequest.addListener = function() {\n      throw new Error(sendRequestIsDisabled);\n    };\n    if (contextType == 'BLESSED_EXTENSION') {\n      extension.onRequestExternal.addListener = function() {\n        throw new Error(sendRequestIsDisabled);\n      };\n    }\n  }\n});\n\nexports.binding = binding.generate();\n\n})"}
],
[
{"endColumn":2,"endLine":435,"isContentScript":true,"scriptId":"168","startColumn":0,"startLine":0,"url":"extensions::binding"},{"scriptSource":"(function(require, requireNative, exports, console, $Array, $Function, $JSON, $Object, $RegExp, $String) {'use strict';// Copyright (c) 2012 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nvar Event = require('event_bindings').Event;\nvar forEach = require('utils').forEach;\nvar GetAvailability = requireNative('v8_context').GetAvailability;\nvar logActivity = requireNative('activityLogger');\nvar logging = requireNative('logging');\nvar process = requireNative('process');\nvar schemaRegistry = requireNative('schema_registry');\nvar schemaUtils = require('schemaUtils');\nvar utils = require('utils');\nvar sendRequestHandler = require('sendRequest');\n\nvar contextType = process.GetContextType();\nvar extensionId = process.GetExtensionId();\nvar manifestVersion = process.GetManifestVersion();\nvar sendRequest = sendRequestHandler.sendRequest;\n\n// Stores the name and definition of each API function, with methods to\n// modify their behaviour (such as a custom way to handle requests to the\n// API, a custom callback, etc).\nfunction APIFunctions(namespace) {\n  this.apiFunctions_ = {};\n  this.unavailableApiFunctions_ = {};\n  this.namespace = namespace;\n}\n\nAPIFunctions.prototype.register = function(apiName, apiFunction) {\n  this.apiFunctions_[apiName] = apiFunction;\n};\n\n// Registers a function as existing but not available, meaning that calls to\n// the set* methods that reference this function should be ignored rather\n// than throwing Errors.\nAPIFunctions.prototype.registerUnavailable = function(apiName) {\n  this.unavailableApiFunctions_[apiName] = apiName;\n};\n\nAPIFunctions.prototype.setHook_ =\n    function(apiName, propertyName, customizedFunction) {\n  if ($Object.hasOwnProperty(this.unavailableApiFunctions_, apiName))\n    return;\n  if (!$Object.hasOwnProperty(this.apiFunctions_, apiName))\n    throw new Error('Tried to set hook for unknown API \"' + apiName + '\"');\n  this.apiFunctions_[apiName][propertyName] = customizedFunction;\n};\n\nAPIFunctions.prototype.setHandleRequest =\n    function(apiName, customizedFunction) {\n  var prefix = this.namespace;\n  return this.setHook_(apiName, 'handleRequest',\n    function() {\n      var ret = $Function.apply(customizedFunction, this, arguments);\n      // Logs API calls to the Activity Log if it doesn't go through an\n      // ExtensionFunction.\n      if (!sendRequestHandler.getCalledSendRequest())\n        logActivity.LogAPICall(extensionId, prefix + \".\" + apiName,\n            $Array.slice(arguments));\n      return ret;\n    });\n};\n\nAPIFunctions.prototype.setUpdateArgumentsPostValidate =\n    function(apiName, customizedFunction) {\n  return this.setHook_(\n    apiName, 'updateArgumentsPostValidate', customizedFunction);\n};\n\nAPIFunctions.prototype.setUpdateArgumentsPreValidate =\n    function(apiName, customizedFunction) {\n  return this.setHook_(\n    apiName, 'updateArgumentsPreValidate', customizedFunction);\n};\n\nAPIFunctions.prototype.setCustomCallback =\n    function(apiName, customizedFunction) {\n  return this.setHook_(apiName, 'customCallback', customizedFunction);\n};\n\nfunction CustomBindingsObject() {\n}\n\nCustomBindingsObject.prototype.setSchema = function(schema) {\n  // The functions in the schema are in list form, so we move them into a\n  // dictionary for easier access.\n  var self = this;\n  self.functionSchemas = {};\n  $Array.forEach(schema.functions, function(f) {\n    self.functionSchemas[f.name] = {\n      name: f.name,\n      definition: f\n    }\n  });\n};\n\n// Get the platform from navigator.appVersion.\nfunction getPlatform() {\n  var platforms = [\n    [/CrOS Touch/, \"chromeos touch\"],\n    [/CrOS/, \"chromeos\"],\n    [/Linux/, \"linux\"],\n    [/Mac/, \"mac\"],\n    [/Win/, \"win\"],\n  ];\n\n  for (var i = 0; i < platforms.length; i++) {\n    if ($RegExp.test(platforms[i][0], navigator.appVersion)) {\n      return platforms[i][1];\n    }\n  }\n  return \"unknown\";\n}\n\nfunction isPlatformSupported(schemaNode, platform) {\n  return !schemaNode.platforms ||\n      schemaNode.platforms.indexOf(platform) > -1;\n}\n\nfunction isManifestVersionSupported(schemaNode, manifestVersion) {\n  return !schemaNode.maximumManifestVersion ||\n      manifestVersion <= schemaNode.maximumManifestVersion;\n}\n\nfunction isSchemaNodeSupported(schemaNode, platform, manifestVersion) {\n  return isPlatformSupported(schemaNode, platform) &&\n      isManifestVersionSupported(schemaNode, manifestVersion);\n}\n\nfunction createCustomType(type) {\n  var jsModuleName = type.js_module;\n  logging.CHECK(jsModuleName, 'Custom type ' + type.id +\n                ' has no \"js_module\" property.');\n  var jsModule = require(jsModuleName);\n  logging.CHECK(jsModule, 'No module ' + jsModuleName + ' found for ' +\n                type.id + '.');\n  var customType = jsModule[jsModuleName];\n  logging.CHECK(customType, jsModuleName + ' must export itself.');\n  customType.prototype = new CustomBindingsObject();\n  customType.prototype.setSchema(type);\n  return customType;\n}\n\nvar platform = getPlatform();\n\nfunction Binding(schema) {\n  this.schema_ = schema;\n  this.apiFunctions_ = new APIFunctions(schema.namespace);\n  this.customEvent_ = null;\n  this.customHooks_ = [];\n};\n\nBinding.create = function(apiName) {\n  return new Binding(schemaRegistry.GetSchema(apiName));\n};\n\nBinding.prototype = {\n  // The API through which the ${api_name}_custom_bindings.js files customize\n  // their API bindings beyond what can be generated.\n  //\n  // There are 2 types of customizations available: those which are required in\n  // order to do the schema generation (registerCustomEvent and\n  // registerCustomType), and those which can only run after the bindings have\n  // been generated (registerCustomHook).\n\n  // Registers a custom event type for the API identified by |namespace|.\n  // |event| is the event's constructor.\n  registerCustomEvent: function(event) {\n    this.customEvent_ = event;\n  },\n\n  // Registers a function |hook| to run after the schema for all APIs has been\n  // generated.  The hook is passed as its first argument an \"API\" object to\n  // interact with, and second the current extension ID. See where\n  // |customHooks| is used.\n  registerCustomHook: function(fn) {\n    $Array.push(this.customHooks_, fn);\n  },\n\n  // TODO(kalman/cduvall): Refactor this so |runHooks_| is not needed.\n  runHooks_: function(api) {\n    $Array.forEach(this.customHooks_, function(hook) {\n      if (!isSchemaNodeSupported(this.schema_, platform, manifestVersion))\n        return;\n\n      if (!hook)\n        return;\n\n      hook({\n        apiFunctions: this.apiFunctions_,\n        schema: this.schema_,\n        compiledApi: api\n      }, extensionId, contextType);\n    }, this);\n  },\n\n  // Generates the bindings from |this.schema_| and integrates any custom\n  // bindings that might be present.\n  generate: function() {\n    var schema = this.schema_;\n\n    function shouldCheckUnprivileged() {\n      var shouldCheck = 'unprivileged' in schema;\n      if (shouldCheck)\n        return shouldCheck;\n\n      $Array.forEach(['functions', 'events'], function(type) {\n        if ($Object.hasOwnProperty(schema, type)) {\n          $Array.forEach(schema[type], function(node) {\n            if ('unprivileged' in node)\n              shouldCheck = true;\n          });\n        }\n      });\n      if (shouldCheck)\n        return shouldCheck;\n\n      for (var property in schema.properties) {\n        if ($Object.hasOwnProperty(schema, property) &&\n            'unprivileged' in schema.properties[property]) {\n          shouldCheck = true;\n          break;\n        }\n      }\n      return shouldCheck;\n    }\n    var checkUnprivileged = shouldCheckUnprivileged();\n\n    // TODO(kalman/cduvall): Make GetAvailability handle this, then delete the\n    // supporting code.\n    if (!isSchemaNodeSupported(schema, platform, manifestVersion)) {\n      console.error('chrome.' + schema.namespace + ' is not supported on ' +\n                    'this platform or manifest version');\n      return undefined;\n    }\n\n    var mod = {};\n\n    var namespaces = $String.split(schema.namespace, '.');\n    for (var index = 0, name; name = namespaces[index]; index++) {\n      mod[name] = mod[name] || {};\n      mod = mod[name];\n    }\n\n    // Add types to global schemaValidator, the types we depend on from other\n    // namespaces will be added as needed.\n    if (schema.types) {\n      $Array.forEach(schema.types, function(t) {\n        if (!isSchemaNodeSupported(t, platform, manifestVersion))\n          return;\n        schemaUtils.schemaValidator.addTypes(t);\n      }, this);\n    }\n\n    // TODO(cduvall): Take out when all APIs have been converted to features.\n    // Returns whether access to the content of a schema should be denied,\n    // based on the presence of \"unprivileged\" and whether this is an\n    // extension process (versus e.g. a content script).\n    function isSchemaAccessAllowed(itemSchema) {\n      return (contextType == 'BLESSED_EXTENSION') ||\n             schema.unprivileged ||\n             itemSchema.unprivileged;\n    };\n\n    // Setup Functions.\n    if (schema.functions) {\n      $Array.forEach(schema.functions, function(functionDef) {\n        if (functionDef.name in mod) {\n          throw new Error('Function ' + functionDef.name +\n                          ' already defined in ' + schema.namespace);\n        }\n\n        if (!isSchemaNodeSupported(functionDef, platform, manifestVersion)) {\n          this.apiFunctions_.registerUnavailable(functionDef.name);\n          return;\n        }\n\n        var apiFunction = {};\n        apiFunction.definition = functionDef;\n        apiFunction.name = schema.namespace + '.' + functionDef.name;\n\n        if (!GetAvailability(apiFunction.name).is_available ||\n            (checkUnprivileged && !isSchemaAccessAllowed(functionDef))) {\n          this.apiFunctions_.registerUnavailable(functionDef.name);\n          return;\n        }\n\n        // TODO(aa): It would be best to run this in a unit test, but in order\n        // to do that we would need to better factor this code so that it\n        // doesn't depend on so much v8::Extension machinery.\n        if (logging.DCHECK_IS_ON() &&\n            schemaUtils.isFunctionSignatureAmbiguous(apiFunction.definition)) {\n          throw new Error(\n              apiFunction.name + ' has ambiguous optional arguments. ' +\n              'To implement custom disambiguation logic, add ' +\n              '\"allowAmbiguousOptionalArguments\" to the function\\'s schema.');\n        }\n\n        this.apiFunctions_.register(functionDef.name, apiFunction);\n\n        mod[functionDef.name] = $Function.bind(function() {\n          var args = $Array.slice(arguments);\n          if (this.updateArgumentsPreValidate)\n            args = $Function.apply(this.updateArgumentsPreValidate, this, args);\n\n          args = schemaUtils.normalizeArgumentsAndValidate(args, this);\n          if (this.updateArgumentsPostValidate) {\n            args = $Function.apply(this.updateArgumentsPostValidate,\n                                   this,\n                                   args);\n          }\n\n          sendRequestHandler.clearCalledSendRequest();\n\n          var retval;\n          if (this.handleRequest) {\n            retval = $Function.apply(this.handleRequest, this, args);\n          } else {\n            var optArgs = {\n              customCallback: this.customCallback\n            };\n            retval = sendRequest(this.name, args,\n                                 this.definition.parameters,\n                                 optArgs);\n          }\n          sendRequestHandler.clearCalledSendRequest();\n\n          // Validate return value if in sanity check mode.\n          if (logging.DCHECK_IS_ON() && this.definition.returns)\n            schemaUtils.validate([retval], [this.definition.returns]);\n          return retval;\n        }, apiFunction);\n      }, this);\n    }\n\n    // Setup Events\n    if (schema.events) {\n      $Array.forEach(schema.events, function(eventDef) {\n        if (eventDef.name in mod) {\n          throw new Error('Event ' + eventDef.name +\n                          ' already defined in ' + schema.namespace);\n        }\n        if (!isSchemaNodeSupported(eventDef, platform, manifestVersion))\n          return;\n\n        var eventName = schema.namespace + \".\" + eventDef.name;\n        if (!GetAvailability(eventName).is_available ||\n            (checkUnprivileged && !isSchemaAccessAllowed(eventDef))) {\n          return;\n        }\n\n        var options = eventDef.options || {};\n        if (eventDef.filters && eventDef.filters.length > 0)\n          options.supportsFilters = true;\n\n        var parameters = eventDef.parameters;\n        if (this.customEvent_) {\n          mod[eventDef.name] = new this.customEvent_(\n              eventName, parameters, eventDef.extraParameters, options);\n        } else {\n          mod[eventDef.name] = new Event(eventName, parameters, options);\n        }\n      }, this);\n    }\n\n    function addProperties(m, parentDef) {\n      var properties = parentDef.properties;\n      if (!properties)\n        return;\n\n      forEach(properties, function(propertyName, propertyDef) {\n        if (propertyName in m)\n          return;  // TODO(kalman): be strict like functions/events somehow.\n        if (!isSchemaNodeSupported(propertyDef, platform, manifestVersion))\n          return;\n        if (!GetAvailability(schema.namespace + \".\" +\n              propertyName).is_available ||\n            (checkUnprivileged && !isSchemaAccessAllowed(propertyDef))) {\n          return;\n        }\n\n        var value = propertyDef.value;\n        if (value) {\n          // Values may just have raw types as defined in the JSON, such\n          // as \"WINDOW_ID_NONE\": { \"value\": -1 }. We handle this here.\n          // TODO(kalman): enforce that things with a \"value\" property can't\n          // define their own types.\n          var type = propertyDef.type || typeof(value);\n          if (type === 'integer' || type === 'number') {\n            value = parseInt(value);\n          } else if (type === 'boolean') {\n            value = value === 'true';\n          } else if (propertyDef['$ref']) {\n            var ref = propertyDef['$ref'];\n            var type = utils.loadTypeSchema(propertyDef['$ref'], schema);\n            logging.CHECK(type, 'Schema for $ref type ' + ref + ' not found');\n            var constructor = createCustomType(type);\n            var args = value;\n            // For an object propertyDef, |value| is an array of constructor\n            // arguments, but we want to pass the arguments directly (i.e.\n            // not as an array), so we have to fake calling |new| on the\n            // constructor.\n            value = { __proto__: constructor.prototype };\n            $Function.apply(constructor, value, args);\n            // Recursively add properties.\n            addProperties(value, propertyDef);\n          } else if (type === 'object') {\n            // Recursively add properties.\n            addProperties(value, propertyDef);\n          } else if (type !== 'string') {\n            throw new Error('NOT IMPLEMENTED (extension_api.json error): ' +\n                'Cannot parse values for type \"' + type + '\"');\n          }\n          m[propertyName] = value;\n        }\n      });\n    };\n\n    addProperties(mod, schema);\n\n    var availability = GetAvailability(schema.namespace);\n    if (!availability.is_available && $Object.keys(mod).length == 0) {\n      console.error('chrome.' + schema.namespace + ' is not available: ' +\n                        availability.message);\n      return;\n    }\n\n    this.runHooks_(mod);\n    return mod;\n  }\n};\n\nexports.Binding = Binding;\n\n})"}
],
[
{"endColumn":2,"endLine":500,"isContentScript":true,"scriptId":"169","startColumn":0,"startLine":0,"url":"extensions::event_bindings"},{"scriptSource":"(function(require, requireNative, exports, console, $Array, $Function, $JSON, $Object, $RegExp, $String) {'use strict';// Copyright (c) 2012 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n  var eventNatives = requireNative('event_natives');\n  var logging = requireNative('logging');\n  var schemaRegistry = requireNative('schema_registry');\n  var sendRequest = require('sendRequest').sendRequest;\n  var utils = require('utils');\n  var validate = require('schemaUtils').validate;\n  var unloadEvent = require('unload_event');\n\n  // Schemas for the rule-style functions on the events API that\n  // only need to be generated occasionally, so populate them lazily.\n  var ruleFunctionSchemas = {\n    // These values are set lazily:\n    // addRules: {},\n    // getRules: {},\n    // removeRules: {}\n  };\n\n  // This function ensures that |ruleFunctionSchemas| is populated.\n  function ensureRuleSchemasLoaded() {\n    if (ruleFunctionSchemas.addRules)\n      return;\n    var eventsSchema = schemaRegistry.GetSchema(\"events\");\n    var eventType = utils.lookup(eventsSchema.types, 'id', 'events.Event');\n\n    ruleFunctionSchemas.addRules =\n        utils.lookup(eventType.functions, 'name', 'addRules');\n    ruleFunctionSchemas.getRules =\n        utils.lookup(eventType.functions, 'name', 'getRules');\n    ruleFunctionSchemas.removeRules =\n        utils.lookup(eventType.functions, 'name', 'removeRules');\n  }\n\n  // A map of event names to the event object that is registered to that name.\n  var attachedNamedEvents = {};\n\n  // An array of all attached event objects, used for detaching on unload.\n  var allAttachedEvents = [];\n\n  // A map of functions that massage event arguments before they are dispatched.\n  // Key is event name, value is function.\n  var eventArgumentMassagers = {};\n\n  // An attachment strategy for events that aren't attached to the browser.\n  // This applies to events with the \"unmanaged\" option and events without\n  // names.\n  var NullAttachmentStrategy = function(event) {\n    this.event_ = event;\n  };\n  NullAttachmentStrategy.prototype.onAddedListener =\n      function(listener) {\n  };\n  NullAttachmentStrategy.prototype.onRemovedListener =\n      function(listener) {\n  };\n  NullAttachmentStrategy.prototype.detach = function(manual) {\n  };\n  NullAttachmentStrategy.prototype.getListenersByIDs = function(ids) {\n    // |ids| is for filtered events only.\n    return this.event_.listeners_;\n  };\n\n  // Handles adding/removing/dispatching listeners for unfiltered events.\n  var UnfilteredAttachmentStrategy = function(event) {\n    this.event_ = event;\n  };\n\n  UnfilteredAttachmentStrategy.prototype.onAddedListener =\n      function(listener) {\n    // Only attach / detach on the first / last listener removed.\n    if (this.event_.listeners_.length == 0)\n      eventNatives.AttachEvent(this.event_.eventName_);\n  };\n\n  UnfilteredAttachmentStrategy.prototype.onRemovedListener =\n      function(listener) {\n    if (this.event_.listeners_.length == 0)\n      this.detach(true);\n  };\n\n  UnfilteredAttachmentStrategy.prototype.detach = function(manual) {\n    eventNatives.DetachEvent(this.event_.eventName_, manual);\n  };\n\n  UnfilteredAttachmentStrategy.prototype.getListenersByIDs = function(ids) {\n    // |ids| is for filtered events only.\n    return this.event_.listeners_;\n  };\n\n  var FilteredAttachmentStrategy = function(event) {\n    this.event_ = event;\n    this.listenerMap_ = {};\n  };\n\n  FilteredAttachmentStrategy.idToEventMap = {};\n\n  FilteredAttachmentStrategy.prototype.onAddedListener = function(listener) {\n    var id = eventNatives.AttachFilteredEvent(this.event_.eventName_,\n                                              listener.filters || {});\n    if (id == -1)\n      throw new Error(\"Can't add listener\");\n    listener.id = id;\n    this.listenerMap_[id] = listener;\n    FilteredAttachmentStrategy.idToEventMap[id] = this.event_;\n  };\n\n  FilteredAttachmentStrategy.prototype.onRemovedListener = function(listener) {\n    this.detachListener(listener, true);\n  };\n\n  FilteredAttachmentStrategy.prototype.detachListener =\n      function(listener, manual) {\n    if (listener.id == undefined)\n      throw new Error(\"listener.id undefined - '\" + listener + \"'\");\n    var id = listener.id;\n    delete this.listenerMap_[id];\n    delete FilteredAttachmentStrategy.idToEventMap[id];\n    eventNatives.DetachFilteredEvent(id, manual);\n  };\n\n  FilteredAttachmentStrategy.prototype.detach = function(manual) {\n    for (var i in this.listenerMap_)\n      this.detachListener(this.listenerMap_[i], manual);\n  };\n\n  FilteredAttachmentStrategy.prototype.getListenersByIDs = function(ids) {\n    var result = [];\n    for (var i = 0; i < ids.length; i++)\n      $Array.push(result, this.listenerMap_[ids[i]]);\n    return result;\n  };\n\n  function parseEventOptions(opt_eventOptions) {\n    function merge(dest, src) {\n      for (var k in src) {\n        if (!$Object.hasOwnProperty(dest, k)) {\n          dest[k] = src[k];\n        }\n      }\n    }\n\n    var options = opt_eventOptions || {};\n    merge(options, {\n      // Event supports adding listeners with filters (\"filtered events\"), for\n      // example as used in the webNavigation API.\n      //\n      // event.addListener(listener, [filter1, filter2]);\n      supportsFilters: false,\n\n      // Events supports vanilla events. Most APIs use these.\n      //\n      // event.addListener(listener);\n      supportsListeners: true,\n\n      // Event supports adding rules (\"declarative events\") rather than\n      // listeners, for example as used in the declarativeWebRequest API.\n      //\n      // event.addRules([rule1, rule2]);\n      supportsRules: false,\n\n      // Event is unmanaged in that the browser has no knowledge of its\n      // existence; it's never invoked, doesn't keep the renderer alive, and\n      // the bindings system has no knowledge of it.\n      //\n      // Both events created by user code (new chrome.Event()) and messaging\n      // events are unmanaged, though in the latter case the browser *does*\n      // interact indirectly with them via IPCs written by hand.\n      unmanaged: false,\n    });\n    return options;\n  };\n\n  // Event object.  If opt_eventName is provided, this object represents\n  // the unique instance of that named event, and dispatching an event\n  // with that name will route through this object's listeners. Note that\n  // opt_eventName is required for events that support rules.\n  //\n  // Example:\n  //   var Event = require('event_bindings').Event;\n  //   chrome.tabs.onChanged = new Event(\"tab-changed\");\n  //   chrome.tabs.onChanged.addListener(function(data) { alert(data); });\n  //   Event.dispatch(\"tab-changed\", \"hi\");\n  // will result in an alert dialog that says 'hi'.\n  //\n  // If opt_eventOptions exists, it is a dictionary that contains the boolean\n  // entries \"supportsListeners\" and \"supportsRules\".\n  var Event = function(opt_eventName, opt_argSchemas, opt_eventOptions) {\n    this.eventName_ = opt_eventName;\n    this.argSchemas_ = opt_argSchemas;\n    this.listeners_ = [];\n    this.eventOptions_ = parseEventOptions(opt_eventOptions);\n\n    if (!this.eventName_) {\n      if (this.eventOptions_.supportsRules)\n        throw new Error(\"Events that support rules require an event name.\");\n      // Events without names cannot be managed by the browser by definition\n      // (the browser has no way of identifying them).\n      this.eventOptions_.unmanaged = true;\n    }\n\n    // Track whether the event has been destroyed to help track down the cause\n    // of http://crbug.com/258526.\n    // This variable will eventually hold the stack trace of the destroy call.\n    // TODO(kalman): Delete this and replace with more sound logic that catches\n    // when events are used without being *attached*.\n    this.destroyed_ = null;\n\n    if (this.eventOptions_.unmanaged)\n      this.attachmentStrategy_ = new NullAttachmentStrategy(this);\n    else if (this.eventOptions_.supportsFilters)\n      this.attachmentStrategy_ = new FilteredAttachmentStrategy(this);\n    else\n      this.attachmentStrategy_ = new UnfilteredAttachmentStrategy(this);\n  };\n\n  // callback is a function(args, dispatch). args are the args we receive from\n  // dispatchEvent(), and dispatch is a function(args) that dispatches args to\n  // its listeners.\n  function registerArgumentMassager(name, callback) {\n    if (eventArgumentMassagers[name])\n      throw new Error(\"Massager already registered for event: \" + name);\n    eventArgumentMassagers[name] = callback;\n  }\n\n  // Dispatches a named event with the given argument array. The args array is\n  // the list of arguments that will be sent to the event callback.\n  function dispatchEvent(name, args, filteringInfo) {\n    var listenerIDs = [];\n\n    if (filteringInfo)\n      listenerIDs = eventNatives.MatchAgainstEventFilter(name, filteringInfo);\n\n    var event = attachedNamedEvents[name];\n    if (!event)\n      return;\n\n    var dispatchArgs = function(args) {\n      var result = event.dispatch_(args, listenerIDs);\n      if (result)\n        logging.DCHECK(!result.validationErrors, result.validationErrors);\n      return result;\n    };\n\n    if (eventArgumentMassagers[name])\n      eventArgumentMassagers[name](args, dispatchArgs);\n    else\n      dispatchArgs(args);\n  }\n\n  // Registers a callback to be called when this event is dispatched.\n  Event.prototype.addListener = function(cb, filters) {\n    if (!this.eventOptions_.supportsListeners)\n      throw new Error(\"This event does not support listeners.\");\n    if (this.eventOptions_.maxListeners &&\n        this.getListenerCount() >= this.eventOptions_.maxListeners) {\n      throw new Error(\"Too many listeners for \" + this.eventName_);\n    }\n    if (filters) {\n      if (!this.eventOptions_.supportsFilters)\n        throw new Error(\"This event does not support filters.\");\n      if (filters.url && !(filters.url instanceof Array))\n        throw new Error(\"filters.url should be an array.\");\n      if (filters.serviceType &&\n          !(typeof filters.serviceType === 'string')) {\n        throw new Error(\"filters.serviceType should be a string.\")\n      }\n    }\n    var listener = {callback: cb, filters: filters};\n    this.attach_(listener);\n    $Array.push(this.listeners_, listener);\n  };\n\n  Event.prototype.attach_ = function(listener) {\n    this.attachmentStrategy_.onAddedListener(listener);\n\n    if (this.listeners_.length == 0) {\n      allAttachedEvents[allAttachedEvents.length] = this;\n      if (this.eventName_) {\n        if (attachedNamedEvents[this.eventName_]) {\n          throw new Error(\"Event '\" + this.eventName_ +\n                          \"' is already attached.\");\n        }\n        attachedNamedEvents[this.eventName_] = this;\n      }\n    }\n  };\n\n  // Unregisters a callback.\n  Event.prototype.removeListener = function(cb) {\n    if (!this.eventOptions_.supportsListeners)\n      throw new Error(\"This event does not support listeners.\");\n\n    var idx = this.findListener_(cb);\n    if (idx == -1)\n      return;\n\n    var removedListener = $Array.splice(this.listeners_, idx, 1)[0];\n    this.attachmentStrategy_.onRemovedListener(removedListener);\n\n    if (this.listeners_.length == 0) {\n      var i = allAttachedEvents.indexOf(this);\n      if (i >= 0)\n        delete allAttachedEvents[i];\n      if (this.eventName_) {\n        if (!attachedNamedEvents[this.eventName_])\n          throw new Error(\"Event '\" + this.eventName_ + \"' is not attached.\");\n        delete attachedNamedEvents[this.eventName_];\n      }\n    }\n  };\n\n  // Test if the given callback is registered for this event.\n  Event.prototype.hasListener = function(cb) {\n    if (!this.eventOptions_.supportsListeners)\n      throw new Error(\"This event does not support listeners.\");\n    return this.findListener_(cb) > -1;\n  };\n\n  // Test if any callbacks are registered for this event.\n  Event.prototype.hasListeners = function() {\n    return this.getListenerCount() > 0;\n  };\n\n  // Return the number of listeners on this event.\n  Event.prototype.getListenerCount = function() {\n    if (!this.eventOptions_.supportsListeners)\n      throw new Error(\"This event does not support listeners.\");\n    return this.listeners_.length;\n  };\n\n  // Returns the index of the given callback if registered, or -1 if not\n  // found.\n  Event.prototype.findListener_ = function(cb) {\n    for (var i = 0; i < this.listeners_.length; i++) {\n      if (this.listeners_[i].callback == cb) {\n        return i;\n      }\n    }\n\n    return -1;\n  };\n\n  Event.prototype.dispatch_ = function(args, listenerIDs) {\n    if (this.destroyed_) {\n      throw new Error(this.eventName_ + ' was already destroyed at: ' +\n                      this.destroyed_);\n    }\n    if (!this.eventOptions_.supportsListeners)\n      throw new Error(\"This event does not support listeners.\");\n\n    if (this.argSchemas_ && logging.DCHECK_IS_ON()) {\n      try {\n        validate(args, this.argSchemas_);\n      } catch (e) {\n        e.message += ' in ' + this.eventName_;\n        throw e;\n      }\n    }\n\n    // Make a copy of the listeners in case the listener list is modified\n    // while dispatching the event.\n    var listeners = $Array.slice(\n        this.attachmentStrategy_.getListenersByIDs(listenerIDs));\n\n    var results = [];\n    for (var i = 0; i < listeners.length; i++) {\n      try {\n        var result = this.dispatchToListener(listeners[i].callback, args);\n        if (result !== undefined)\n          $Array.push(results, result);\n      } catch (e) {\n        console.error('Error in event handler for ' +\n                      (this.eventName_ ? this.eventName_ : '(unknown)') +\n                      ': ' + e.stack);\n      }\n    }\n    if (results.length)\n      return {results: results};\n  }\n\n  // Can be overridden to support custom dispatching.\n  Event.prototype.dispatchToListener = function(callback, args) {\n    return $Function.apply(callback, null, args);\n  }\n\n  // Dispatches this event object to all listeners, passing all supplied\n  // arguments to this function each listener.\n  Event.prototype.dispatch = function(varargs) {\n    return this.dispatch_($Array.slice(arguments), undefined);\n  };\n\n  // Detaches this event object from its name.\n  Event.prototype.detach_ = function() {\n    this.attachmentStrategy_.detach(false);\n  };\n\n  Event.prototype.destroy_ = function() {\n    this.listeners_.length = 0;\n    this.detach_();\n    this.destroyed_ = new Error().stack;\n  };\n\n  Event.prototype.addRules = function(rules, opt_cb) {\n    if (!this.eventOptions_.supportsRules)\n      throw new Error(\"This event does not support rules.\");\n\n    // Takes a list of JSON datatype identifiers and returns a schema fragment\n    // that verifies that a JSON object corresponds to an array of only these\n    // data types.\n    function buildArrayOfChoicesSchema(typesList) {\n      return {\n        'type': 'array',\n        'items': {\n          'choices': typesList.map(function(el) {return {'$ref': el};})\n        }\n      };\n    };\n\n    // Validate conditions and actions against specific schemas of this\n    // event object type.\n    // |rules| is an array of JSON objects that follow the Rule type of the\n    // declarative extension APIs. |conditions| is an array of JSON type\n    // identifiers that are allowed to occur in the conditions attribute of each\n    // rule. Likewise, |actions| is an array of JSON type identifiers that are\n    // allowed to occur in the actions attribute of each rule.\n    function validateRules(rules, conditions, actions) {\n      var conditionsSchema = buildArrayOfChoicesSchema(conditions);\n      var actionsSchema = buildArrayOfChoicesSchema(actions);\n      $Array.forEach(rules, function(rule) {\n        validate([rule.conditions], [conditionsSchema]);\n        validate([rule.actions], [actionsSchema]);\n      });\n    };\n\n    if (!this.eventOptions_.conditions || !this.eventOptions_.actions) {\n      throw new Error('Event ' + this.eventName_ + ' misses conditions or ' +\n                      'actions in the API specification.');\n    }\n\n    validateRules(rules,\n                  this.eventOptions_.conditions,\n                  this.eventOptions_.actions);\n\n    ensureRuleSchemasLoaded();\n    // We remove the first parameter from the validation to give the user more\n    // meaningful error messages.\n    validate([rules, opt_cb],\n             $Array.splice(\n                 $Array.slice(ruleFunctionSchemas.addRules.parameters), 1));\n    sendRequest(\"events.addRules\", [this.eventName_, rules, opt_cb],\n                ruleFunctionSchemas.addRules.parameters);\n  }\n\n  Event.prototype.removeRules = function(ruleIdentifiers, opt_cb) {\n    if (!this.eventOptions_.supportsRules)\n      throw new Error(\"This event does not support rules.\");\n    ensureRuleSchemasLoaded();\n    // We remove the first parameter from the validation to give the user more\n    // meaningful error messages.\n    validate([ruleIdentifiers, opt_cb],\n             $Array.splice(\n                 $Array.slice(ruleFunctionSchemas.removeRules.parameters), 1));\n    sendRequest(\"events.removeRules\",\n                [this.eventName_, ruleIdentifiers, opt_cb],\n                ruleFunctionSchemas.removeRules.parameters);\n  }\n\n  Event.prototype.getRules = function(ruleIdentifiers, cb) {\n    if (!this.eventOptions_.supportsRules)\n      throw new Error(\"This event does not support rules.\");\n    ensureRuleSchemasLoaded();\n    // We remove the first parameter from the validation to give the user more\n    // meaningful error messages.\n    validate([ruleIdentifiers, cb],\n             $Array.splice(\n                 $Array.slice(ruleFunctionSchemas.getRules.parameters), 1));\n\n    sendRequest(\"events.getRules\",\n                [this.eventName_, ruleIdentifiers, cb],\n                ruleFunctionSchemas.getRules.parameters);\n  }\n\n  unloadEvent.addListener(function() {\n    for (var i = 0; i < allAttachedEvents.length; ++i) {\n      var event = allAttachedEvents[i];\n      if (event)\n        event.detach_();\n    }\n  });\n\n  // NOTE: Event is (lazily) exposed as chrome.Event from dispatcher.cc.\n  exports.Event = Event;\n\n  exports.dispatchEvent = dispatchEvent;\n  exports.parseEventOptions = parseEventOptions;\n  exports.registerArgumentMassager = registerArgumentMassager;\n\n})"}
],
[
{"endColumn":2,"endLine":166,"isContentScript":true,"scriptId":"170","startColumn":0,"startLine":0,"url":"extensions::sendRequest"},{"scriptSource":"(function(require, requireNative, exports, console, $Array, $Function, $JSON, $Object, $RegExp, $String) {'use strict';// Copyright (c) 2012 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nvar lastError = require('lastError');\nvar logging = requireNative('logging');\nvar natives = requireNative('sendRequest');\nvar processNatives = requireNative('process');\nvar validate = require('schemaUtils').validate;\n\n// All outstanding requests from sendRequest().\nvar requests = {};\n\n// Used to prevent double Activity Logging for API calls that use both custom\n// bindings and ExtensionFunctions (via sendRequest).\nvar calledSendRequest = false;\n\n// Runs a user-supplied callback safely.\nfunction safeCallbackApply(name, request, callback, args) {\n  try {\n    $Function.apply(callback, request, args);\n  } catch (e) {\n    var errorMessage = \"Error in response to \" + name + \": \" + e;\n    if (request.stack && request.stack != '')\n      errorMessage += \"\\n\" + request.stack;\n    console.error(errorMessage);\n  }\n}\n\n// Callback handling.\nfunction handleResponse(requestId, name, success, responseList, error) {\n  // The chrome objects we will set lastError on. Really we should only be\n  // setting this on the callback's chrome object, but set on ours too since\n  // it's conceivable that something relies on that.\n  var chromesForLastError = [chrome];\n\n  try {\n    var request = requests[requestId];\n    logging.DCHECK(request != null);\n\n    // lastError needs to be set on the caller's chrome object no matter what,\n    // though chances are it's the same as ours (it will be different when\n    // calling API methods on other contexts).\n    if (request.callback) {\n      var chromeForCallback = natives.GetGlobal(request.callback).chrome;\n      if (chromeForCallback != chrome)\n        $Array.push(chromesForLastError, chromeForCallback);\n    }\n\n    $Array.forEach(chromesForLastError, function(c) {lastError.clear(c)});\n    if (!success) {\n      if (!error)\n        error = \"Unknown error.\";\n      $Array.forEach(chromesForLastError, function(c) {\n        lastError.set(name, error, request.stack, c)\n      });\n    }\n\n    if (request.customCallback) {\n      safeCallbackApply(name,\n                        request,\n                        request.customCallback,\n                        $Array.concat([name, request], responseList));\n    }\n\n    if (request.callback) {\n      // Validate callback in debug only -- and only when the\n      // caller has provided a callback. Implementations of api\n      // calls may not return data if they observe the caller\n      // has not provided a callback.\n      if (logging.DCHECK_IS_ON() && !error) {\n        if (!request.callbackSchema.parameters)\n          throw new Error(name + \": no callback schema defined\");\n        validate(responseList, request.callbackSchema.parameters);\n      }\n      safeCallbackApply(name, request, request.callback, responseList);\n    }\n  } finally {\n    delete requests[requestId];\n    $Array.forEach(chromesForLastError, function(c) {lastError.clear(c)});\n  }\n};\n\nfunction getExtensionStackTrace(call_name) {\n  var stack = $String.split(new Error().stack, '\\n');\n\n  // Remove stack frames before and after that weren't associated with the\n  // extension.\n  var id = processNatives.GetExtensionId();\n  while (stack.length > 0 && stack[0].indexOf(id) == -1)\n    stack.shift();\n  while (stack.length > 0 && stack[stack.length - 1].indexOf(id) == -1)\n    stack.pop();\n\n  return stack.join('\\n');\n}\n\nfunction prepareRequest(args, argSchemas) {\n  var request = {};\n  var argCount = args.length;\n\n  // Look for callback param.\n  if (argSchemas.length > 0 &&\n      argSchemas[argSchemas.length - 1].type == \"function\") {\n    request.callback = args[args.length - 1];\n    request.callbackSchema = argSchemas[argSchemas.length - 1];\n    --argCount;\n  }\n\n  request.args = [];\n  for (var k = 0; k < argCount; k++) {\n    request.args[k] = args[k];\n  }\n\n  return request;\n}\n\n// Send an API request and optionally register a callback.\n// |optArgs| is an object with optional parameters as follows:\n// - customCallback: a callback that should be called instead of the standard\n//   callback.\n// - nativeFunction: the v8 native function to handle the request, or\n//   StartRequest if missing.\n// - forIOThread: true if this function should be handled on the browser IO\n//   thread.\n// - preserveNullInObjects: true if it is safe for null to be in objects.\nfunction sendRequest(functionName, args, argSchemas, optArgs) {\n  calledSendRequest = true;\n  if (!optArgs)\n    optArgs = {};\n  var request = prepareRequest(args, argSchemas);\n  request.stack = getExtensionStackTrace();\n  if (optArgs.customCallback) {\n    request.customCallback = optArgs.customCallback;\n  }\n\n  var nativeFunction = optArgs.nativeFunction || natives.StartRequest;\n\n  var requestId = natives.GetNextRequestId();\n  request.id = requestId;\n  requests[requestId] = request;\n\n  var hasCallback = request.callback || optArgs.customCallback;\n  return nativeFunction(functionName,\n                        request.args,\n                        requestId,\n                        hasCallback,\n                        optArgs.forIOThread,\n                        optArgs.preserveNullInObjects);\n}\n\nfunction getCalledSendRequest() {\n  return calledSendRequest;\n}\n\nfunction clearCalledSendRequest() {\n  calledSendRequest = false;\n}\n\nexports.sendRequest = sendRequest;\nexports.getCalledSendRequest = getCalledSendRequest;\nexports.clearCalledSendRequest = clearCalledSendRequest;\n\n// Called by C++.\nexports.handleResponse = handleResponse;\n\n})"}
],
[
{"endColumn":2,"endLine":83,"isContentScript":true,"scriptId":"171","startColumn":0,"startLine":0,"url":"extensions::lastError"},{"scriptSource":"(function(require, requireNative, exports, console, $Array, $Function, $JSON, $Object, $RegExp, $String) {'use strict';// Copyright (c) 2012 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nvar GetAvailability = requireNative('v8_context').GetAvailability;\nvar GetGlobal = requireNative('sendRequest').GetGlobal;\n\n// Utility for setting chrome.*.lastError.\n//\n// A utility here is useful for two reasons:\n//  1. For backwards compatibility we need to set chrome.extension.lastError,\n//     but not all contexts actually have access to the extension namespace.\n//  2. When calling across contexts, the global object that gets lastError set\n//     needs to be that of the caller. We force callers to explicitly specify\n//     the chrome object to try to prevent bugs here.\n\n/**\n * Sets the last error for |name| on |targetChrome| to |message| with an\n * optional |stack|.\n */\nfunction set(name, message, stack, targetChrome) {\n  var errorMessage = name + ': ' + message;\n  if (stack != null && stack != '')\n    errorMessage += '\\n' + stack;\n\n  if (!targetChrome)\n    throw new Error('No chrome object to set error: ' + errorMessage);\n  clear(targetChrome);  // in case somebody has set a sneaky getter/setter\n\n  var errorObject = { message: message };\n  if (GetAvailability('extension.lastError').is_available)\n    targetChrome.extension.lastError = errorObject;\n\n  assertRuntimeIsAvailable();\n  targetChrome.runtime.lastError = errorObject;\n};\n\n/**\n * Clears the last error on |targetChrome|.\n */\nfunction clear(targetChrome) {\n  if (!targetChrome)\n    throw new Error('No target chrome to clear error');\n\n  if (GetAvailability('extension.lastError').is_available)\n    delete targetChrome.extension.lastError;\n\n  assertRuntimeIsAvailable();\n  delete targetChrome.runtime.lastError;\n};\n\nfunction assertRuntimeIsAvailable() {\n  // chrome.runtime should always be available, but maybe it's disappeared for\n  // some reason? Add debugging for http://crbug.com/258526.\n  var runtimeAvailability = GetAvailability('runtime.lastError');\n  if (!runtimeAvailability.is_available) {\n    throw new Error('runtime.lastError is not available: ' +\n                    runtimeAvailability.message);\n  }\n  if (!chrome.runtime)\n    throw new Error('runtime namespace is null or undefined');\n}\n\n/**\n * Runs |callback(args)| with last error args as in set().\n *\n * The target chrome object is the global object's of the callback, so this\n * method won't work if the real callback has been wrapped (etc).\n */\nfunction run(name, message, stack, callback, args) {\n  var targetChrome = GetGlobal(callback).chrome;\n  set(name, message, stack, targetChrome);\n  try {\n    $Function.apply(callback, undefined, args);\n  } finally {\n    clear(targetChrome);\n  }\n}\n\nexports.clear = clear;\nexports.set = set;\nexports.run = run;\n\n})"}
],
[
{"endColumn":2,"endLine":157,"isContentScript":true,"scriptId":"172","startColumn":0,"startLine":0,"url":"extensions::schemaUtils"},{"scriptSource":"(function(require, requireNative, exports, console, $Array, $Function, $JSON, $Object, $RegExp, $String) {'use strict';// Copyright (c) 2012 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n// Routines used to validate and normalize arguments.\n// TODO(benwells): unit test this file.\n\nvar JSONSchemaValidator = require('json_schema').JSONSchemaValidator;\n\nvar schemaValidator = new JSONSchemaValidator();\n\n// Validate arguments.\nfunction validate(args, parameterSchemas) {\n  if (args.length > parameterSchemas.length)\n    throw new Error(\"Too many arguments.\");\n  for (var i = 0; i < parameterSchemas.length; i++) {\n    if (i in args && args[i] !== null && args[i] !== undefined) {\n      schemaValidator.resetErrors();\n      schemaValidator.validate(args[i], parameterSchemas[i]);\n      if (schemaValidator.errors.length == 0)\n        continue;\n      var message = \"Invalid value for argument \" + (i + 1) + \". \";\n      for (var i = 0, err;\n          err = schemaValidator.errors[i]; i++) {\n        if (err.path) {\n          message += \"Property '\" + err.path + \"': \";\n        }\n        message += err.message;\n        message = message.substring(0, message.length - 1);\n        message += \", \";\n      }\n      message = message.substring(0, message.length - 2);\n      message += \".\";\n      throw new Error(message);\n    } else if (!parameterSchemas[i].optional) {\n      throw new Error(\"Parameter \" + (i + 1) + \" (\" +\n          parameterSchemas[i].name + \") is required.\");\n    }\n  }\n}\n\n// Generate all possible signatures for a given API function.\nfunction getSignatures(parameterSchemas) {\n  if (parameterSchemas.length === 0)\n    return [[]];\n  var signatures = [];\n  var remaining = getSignatures($Array.slice(parameterSchemas, 1));\n  for (var i = 0; i < remaining.length; i++)\n    $Array.push(signatures, $Array.concat([parameterSchemas[0]], remaining[i]))\n  if (parameterSchemas[0].optional)\n    return $Array.concat(signatures, remaining);\n  return signatures;\n};\n\n// Return true if arguments match a given signature's schema.\nfunction argumentsMatchSignature(args, candidateSignature) {\n  if (args.length != candidateSignature.length)\n    return false;\n  for (var i = 0; i < candidateSignature.length; i++) {\n    var argType =  JSONSchemaValidator.getType(args[i]);\n    if (!schemaValidator.isValidSchemaType(argType,\n        candidateSignature[i]))\n      return false;\n  }\n  return true;\n};\n\n// Finds the function signature for the given arguments.\nfunction resolveSignature(args, definedSignature) {\n  var candidateSignatures = getSignatures(definedSignature);\n  for (var i = 0; i < candidateSignatures.length; i++) {\n    if (argumentsMatchSignature(args, candidateSignatures[i]))\n      return candidateSignatures[i];\n  }\n  return null;\n};\n\n// Returns a string representing the defined signature of the API function.\n// Example return value for chrome.windows.getCurrent:\n// \"windows.getCurrent(optional object populate, function callback)\"\nfunction getParameterSignatureString(name, definedSignature) {\n  var getSchemaTypeString = function(schema) {\n    var schemaTypes = schemaValidator.getAllTypesForSchema(schema);\n    var typeName = schemaTypes.join(\" or \") + \" \" + schema.name;\n    if (schema.optional)\n      return \"optional \" + typeName;\n    return typeName;\n  };\n  var typeNames = definedSignature.map(getSchemaTypeString);\n  return name + \"(\" + typeNames.join(\", \") + \")\";\n};\n\n// Returns a string representing a call to an API function.\n// Example return value for call: chrome.windows.get(1, callback) is:\n// \"windows.get(int, function)\"\nfunction getArgumentSignatureString(name, args) {\n  var typeNames = args.map(JSONSchemaValidator.getType);\n  return name + \"(\" + typeNames.join(\", \") + \")\";\n};\n\n// Finds the correct signature for the given arguments, then validates the\n// arguments against that signature. Returns a 'normalized' arguments list\n// where nulls are inserted where optional parameters were omitted.\n// |args| is expected to be an array.\nfunction normalizeArgumentsAndValidate(args, funDef) {\n  if (funDef.allowAmbiguousOptionalArguments) {\n    validate(args, funDef.definition.parameters);\n    return args;\n  }\n  var definedSignature = funDef.definition.parameters;\n  var resolvedSignature = resolveSignature(args, definedSignature);\n  if (!resolvedSignature)\n    throw new Error(\"Invocation of form \" +\n        getArgumentSignatureString(funDef.name, args) +\n        \" doesn't match definition \" +\n        getParameterSignatureString(funDef.name, definedSignature));\n  validate(args, resolvedSignature);\n  var normalizedArgs = [];\n  var ai = 0;\n  for (var si = 0; si < definedSignature.length; si++) {\n    if (definedSignature[si] === resolvedSignature[ai])\n      $Array.push(normalizedArgs, args[ai++]);\n    else\n      $Array.push(normalizedArgs, null);\n  }\n  return normalizedArgs;\n};\n\n// Validates that a given schema for an API function is not ambiguous.\nfunction isFunctionSignatureAmbiguous(functionDef) {\n  if (functionDef.allowAmbiguousOptionalArguments)\n    return false;\n  var signaturesAmbiguous = function(signature1, signature2) {\n    if (signature1.length != signature2.length)\n      return false;\n    for (var i = 0; i < signature1.length; i++) {\n      if (!schemaValidator.checkSchemaOverlap(\n          signature1[i], signature2[i]))\n        return false;\n    }\n    return true;\n  };\n  var candidateSignatures = getSignatures(functionDef.parameters);\n  for (var i = 0; i < candidateSignatures.length; i++) {\n    for (var j = i + 1; j < candidateSignatures.length; j++) {\n      if (signaturesAmbiguous(candidateSignatures[i], candidateSignatures[j]))\n        return true;\n    }\n  }\n  return false;\n};\n\nexports.isFunctionSignatureAmbiguous = isFunctionSignatureAmbiguous;\nexports.normalizeArgumentsAndValidate = normalizeArgumentsAndValidate;\nexports.schemaValidator = schemaValidator;\nexports.validate = validate;\n\n})"}
],
[
{"endColumn":2,"endLine":517,"isContentScript":true,"scriptId":"173","startColumn":0,"startLine":0,"url":"extensions::json_schema"},{"scriptSource":"(function(require, requireNative, exports, console, $Array, $Function, $JSON, $Object, $RegExp, $String) {'use strict';// Copyright (c) 2012 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n// -----------------------------------------------------------------------------\n// NOTE: If you change this file you need to touch renderer_resources.grd to\n// have your change take effect.\n// -----------------------------------------------------------------------------\n\n//==============================================================================\n// This file contains a class that implements a subset of JSON Schema.\n// See: http://www.json.com/json-schema-proposal/ for more details.\n//\n// The following features of JSON Schema are not implemented:\n// - requires\n// - unique\n// - disallow\n// - union types (but replaced with 'choices')\n//\n// The following properties are not applicable to the interface exposed by\n// this class:\n// - options\n// - readonly\n// - title\n// - description\n// - format\n// - default\n// - transient\n// - hidden\n//\n// There are also these departures from the JSON Schema proposal:\n// - function and undefined types are supported\n// - null counts as 'unspecified' for optional values\n// - added the 'choices' property, to allow specifying a list of possible types\n//   for a value\n// - by default an \"object\" typed schema does not allow additional properties.\n//   if present, \"additionalProperties\" is to be a schema against which all\n//   additional properties will be validated.\n//==============================================================================\n\nvar loadTypeSchema = require('utils').loadTypeSchema;\nvar CHECK = requireNative('logging').CHECK;\n\nfunction isInstanceOfClass(instance, className) {\n  while ((instance = instance.__proto__)) {\n    if (instance.constructor.name == className)\n      return true;\n  }\n  return false;\n}\n\nfunction isOptionalValue(value) {\n  return typeof(value) === 'undefined' || value === null;\n}\n\n/**\n * Validates an instance against a schema and accumulates errors. Usage:\n *\n * var validator = new JSONSchemaValidator();\n * validator.validate(inst, schema);\n * if (validator.errors.length == 0)\n *   console.log(\"Valid!\");\n * else\n *   console.log(validator.errors);\n *\n * The errors property contains a list of objects. Each object has two\n * properties: \"path\" and \"message\". The \"path\" property contains the path to\n * the key that had the problem, and the \"message\" property contains a sentence\n * describing the error.\n */\nfunction JSONSchemaValidator() {\n  this.errors = [];\n  this.types = [];\n}\n\nJSONSchemaValidator.messages = {\n  invalidEnum: \"Value must be one of: [*].\",\n  propertyRequired: \"Property is required.\",\n  unexpectedProperty: \"Unexpected property.\",\n  arrayMinItems: \"Array must have at least * items.\",\n  arrayMaxItems: \"Array must not have more than * items.\",\n  itemRequired: \"Item is required.\",\n  stringMinLength: \"String must be at least * characters long.\",\n  stringMaxLength: \"String must not be more than * characters long.\",\n  stringPattern: \"String must match the pattern: *.\",\n  numberFiniteNotNan: \"Value must not be *.\",\n  numberMinValue: \"Value must not be less than *.\",\n  numberMaxValue: \"Value must not be greater than *.\",\n  numberIntValue: \"Value must fit in a 32-bit signed integer.\",\n  numberMaxDecimal: \"Value must not have more than * decimal places.\",\n  invalidType: \"Expected '*' but got '*'.\",\n  invalidTypeIntegerNumber:\n      \"Expected 'integer' but got 'number', consider using Math.round().\",\n  invalidChoice: \"Value does not match any valid type choices.\",\n  invalidPropertyType: \"Missing property type.\",\n  schemaRequired: \"Schema value required.\",\n  unknownSchemaReference: \"Unknown schema reference: *.\",\n  notInstance: \"Object must be an instance of *.\"\n};\n\n/**\n * Builds an error message. Key is the property in the |errors| object, and\n * |opt_replacements| is an array of values to replace \"*\" characters with.\n */\nJSONSchemaValidator.formatError = function(key, opt_replacements) {\n  var message = this.messages[key];\n  if (opt_replacements) {\n    for (var i = 0; i < opt_replacements.length; i++) {\n      message = message.replace(\"*\", opt_replacements[i]);\n    }\n  }\n  return message;\n};\n\n/**\n * Classifies a value as one of the JSON schema primitive types. Note that we\n * don't explicitly disallow 'function', because we want to allow functions in\n * the input values.\n */\nJSONSchemaValidator.getType = function(value) {\n  var s = typeof value;\n\n  if (s == \"object\") {\n    if (value === null) {\n      return \"null\";\n    } else if (Object.prototype.toString.call(value) == \"[object Array]\") {\n      return \"array\";\n    } else if (typeof(ArrayBuffer) != \"undefined\" &&\n               value.constructor == ArrayBuffer) {\n      return \"binary\";\n    }\n  } else if (s == \"number\") {\n    if (value % 1 == 0) {\n      return \"integer\";\n    }\n  }\n\n  return s;\n};\n\n/**\n * Add types that may be referenced by validated schemas that reference them\n * with \"$ref\": <typeId>. Each type must be a valid schema and define an\n * \"id\" property.\n */\nJSONSchemaValidator.prototype.addTypes = function(typeOrTypeList) {\n  function addType(validator, type) {\n    if (!type.id)\n      throw new Error(\"Attempt to addType with missing 'id' property\");\n    validator.types[type.id] = type;\n  }\n\n  if (typeOrTypeList instanceof Array) {\n    for (var i = 0; i < typeOrTypeList.length; i++) {\n      addType(this, typeOrTypeList[i]);\n    }\n  } else {\n    addType(this, typeOrTypeList);\n  }\n}\n\n/**\n * Returns a list of strings of the types that this schema accepts.\n */\nJSONSchemaValidator.prototype.getAllTypesForSchema = function(schema) {\n  var schemaTypes = [];\n  if (schema.type)\n    $Array.push(schemaTypes, schema.type);\n  if (schema.choices) {\n    for (var i = 0; i < schema.choices.length; i++) {\n      var choiceTypes = this.getAllTypesForSchema(schema.choices[i]);\n      schemaTypes = $Array.concat(schemaTypes, choiceTypes);\n    }\n  }\n  var ref = schema['$ref'];\n  if (ref) {\n    var type = this.getOrAddType(ref);\n    CHECK(type, 'Could not find type ' + ref);\n    schemaTypes = $Array.concat(schemaTypes, this.getAllTypesForSchema(type));\n  }\n  return schemaTypes;\n};\n\nJSONSchemaValidator.prototype.getOrAddType = function(typeName) {\n  if (!this.types[typeName])\n    this.types[typeName] = loadTypeSchema(typeName);\n  return this.types[typeName];\n};\n\n/**\n * Returns true if |schema| would accept an argument of type |type|.\n */\nJSONSchemaValidator.prototype.isValidSchemaType = function(type, schema) {\n  if (type == 'any')\n    return true;\n\n  // TODO(kalman): I don't understand this code. How can type be \"null\"?\n  if (schema.optional && (type == \"null\" || type == \"undefined\"))\n    return true;\n\n  var schemaTypes = this.getAllTypesForSchema(schema);\n  for (var i = 0; i < schemaTypes.length; i++) {\n    if (schemaTypes[i] == \"any\" || type == schemaTypes[i])\n      return true;\n  }\n\n  return false;\n};\n\n/**\n * Returns true if there is a non-null argument that both |schema1| and\n * |schema2| would accept.\n */\nJSONSchemaValidator.prototype.checkSchemaOverlap = function(schema1, schema2) {\n  var schema1Types = this.getAllTypesForSchema(schema1);\n  for (var i = 0; i < schema1Types.length; i++) {\n    if (this.isValidSchemaType(schema1Types[i], schema2))\n      return true;\n  }\n  return false;\n};\n\n/**\n * Validates an instance against a schema. The instance can be any JavaScript\n * value and will be validated recursively. When this method returns, the\n * |errors| property will contain a list of errors, if any.\n */\nJSONSchemaValidator.prototype.validate = function(instance, schema, opt_path) {\n  var path = opt_path || \"\";\n\n  if (!schema) {\n    this.addError(path, \"schemaRequired\");\n    return;\n  }\n\n  // If this schema defines itself as reference type, save it in this.types.\n  if (schema.id)\n    this.types[schema.id] = schema;\n\n  // If the schema has an extends property, the instance must validate against\n  // that schema too.\n  if (schema.extends)\n    this.validate(instance, schema.extends, path);\n\n  // If the schema has a $ref property, the instance must validate against\n  // that schema too. It must be present in this.types to be referenced.\n  var ref = schema[\"$ref\"];\n  if (ref) {\n    if (!this.getOrAddType(ref))\n      this.addError(path, \"unknownSchemaReference\", [ ref ]);\n    else\n      this.validate(instance, this.getOrAddType(ref), path)\n  }\n\n  // If the schema has a choices property, the instance must validate against at\n  // least one of the items in that array.\n  if (schema.choices) {\n    this.validateChoices(instance, schema, path);\n    return;\n  }\n\n  // If the schema has an enum property, the instance must be one of those\n  // values.\n  if (schema.enum) {\n    if (!this.validateEnum(instance, schema, path))\n      return;\n  }\n\n  if (schema.type && schema.type != \"any\") {\n    if (!this.validateType(instance, schema, path))\n      return;\n\n    // Type-specific validation.\n    switch (schema.type) {\n      case \"object\":\n        this.validateObject(instance, schema, path);\n        break;\n      case \"array\":\n        this.validateArray(instance, schema, path);\n        break;\n      case \"string\":\n        this.validateString(instance, schema, path);\n        break;\n      case \"number\":\n      case \"integer\":\n        this.validateNumber(instance, schema, path);\n        break;\n    }\n  }\n};\n\n/**\n * Validates an instance against a choices schema. The instance must match at\n * least one of the provided choices.\n */\nJSONSchemaValidator.prototype.validateChoices =\n    function(instance, schema, path) {\n  var originalErrors = this.errors;\n\n  for (var i = 0; i < schema.choices.length; i++) {\n    this.errors = [];\n    this.validate(instance, schema.choices[i], path);\n    if (this.errors.length == 0) {\n      this.errors = originalErrors;\n      return;\n    }\n  }\n\n  this.errors = originalErrors;\n  this.addError(path, \"invalidChoice\");\n};\n\n/**\n * Validates an instance against a schema with an enum type. Populates the\n * |errors| property, and returns a boolean indicating whether the instance\n * validates.\n */\nJSONSchemaValidator.prototype.validateEnum = function(instance, schema, path) {\n  for (var i = 0; i < schema.enum.length; i++) {\n    if (instance === schema.enum[i])\n      return true;\n  }\n\n  this.addError(path, \"invalidEnum\", [schema.enum.join(\", \")]);\n  return false;\n};\n\n/**\n * Validates an instance against an object schema and populates the errors\n * property.\n */\nJSONSchemaValidator.prototype.validateObject =\n    function(instance, schema, path) {\n  if (schema.properties) {\n    for (var prop in schema.properties) {\n      // It is common in JavaScript to add properties to Object.prototype. This\n      // check prevents such additions from being interpreted as required\n      // schema properties.\n      // TODO(aa): If it ever turns out that we actually want this to work,\n      // there are other checks we could put here, like requiring that schema\n      // properties be objects that have a 'type' property.\n      if (!$Object.hasOwnProperty(schema.properties, prop))\n        continue;\n\n      var propPath = path ? path + \".\" + prop : prop;\n      if (schema.properties[prop] == undefined) {\n        this.addError(propPath, \"invalidPropertyType\");\n      } else if (prop in instance && !isOptionalValue(instance[prop])) {\n        this.validate(instance[prop], schema.properties[prop], propPath);\n      } else if (!schema.properties[prop].optional) {\n        this.addError(propPath, \"propertyRequired\");\n      }\n    }\n  }\n\n  // If \"instanceof\" property is set, check that this object inherits from\n  // the specified constructor (function).\n  if (schema.isInstanceOf) {\n    if (!isInstanceOfClass(instance, schema.isInstanceOf))\n      this.addError(propPath, \"notInstance\", [schema.isInstanceOf]);\n  }\n\n  // Exit early from additional property check if \"type\":\"any\" is defined.\n  if (schema.additionalProperties &&\n      schema.additionalProperties.type &&\n      schema.additionalProperties.type == \"any\") {\n    return;\n  }\n\n  // By default, additional properties are not allowed on instance objects. This\n  // can be overridden by setting the additionalProperties property to a schema\n  // which any additional properties must validate against.\n  for (var prop in instance) {\n    if (schema.properties && prop in schema.properties)\n      continue;\n\n    // Any properties inherited through the prototype are ignored.\n    if (!$Object.hasOwnProperty(instance, prop))\n      continue;\n\n    var propPath = path ? path + \".\" + prop : prop;\n    if (schema.additionalProperties)\n      this.validate(instance[prop], schema.additionalProperties, propPath);\n    else\n      this.addError(propPath, \"unexpectedProperty\");\n  }\n};\n\n/**\n * Validates an instance against an array schema and populates the errors\n * property.\n */\nJSONSchemaValidator.prototype.validateArray = function(instance, schema, path) {\n  var typeOfItems = JSONSchemaValidator.getType(schema.items);\n\n  if (typeOfItems == 'object') {\n    if (schema.minItems && instance.length < schema.minItems) {\n      this.addError(path, \"arrayMinItems\", [schema.minItems]);\n    }\n\n    if (typeof schema.maxItems != \"undefined\" &&\n        instance.length > schema.maxItems) {\n      this.addError(path, \"arrayMaxItems\", [schema.maxItems]);\n    }\n\n    // If the items property is a single schema, each item in the array must\n    // have that schema.\n    for (var i = 0; i < instance.length; i++) {\n      this.validate(instance[i], schema.items, path + \".\" + i);\n    }\n  } else if (typeOfItems == 'array') {\n    // If the items property is an array of schemas, each item in the array must\n    // validate against the corresponding schema.\n    for (var i = 0; i < schema.items.length; i++) {\n      var itemPath = path ? path + \".\" + i : String(i);\n      if (i in instance && !isOptionalValue(instance[i])) {\n        this.validate(instance[i], schema.items[i], itemPath);\n      } else if (!schema.items[i].optional) {\n        this.addError(itemPath, \"itemRequired\");\n      }\n    }\n\n    if (schema.additionalProperties) {\n      for (var i = schema.items.length; i < instance.length; i++) {\n        var itemPath = path ? path + \".\" + i : String(i);\n        this.validate(instance[i], schema.additionalProperties, itemPath);\n      }\n    } else {\n      if (instance.length > schema.items.length) {\n        this.addError(path, \"arrayMaxItems\", [schema.items.length]);\n      }\n    }\n  }\n};\n\n/**\n * Validates a string and populates the errors property.\n */\nJSONSchemaValidator.prototype.validateString =\n    function(instance, schema, path) {\n  if (schema.minLength && instance.length < schema.minLength)\n    this.addError(path, \"stringMinLength\", [schema.minLength]);\n\n  if (schema.maxLength && instance.length > schema.maxLength)\n    this.addError(path, \"stringMaxLength\", [schema.maxLength]);\n\n  if (schema.pattern && !schema.pattern.test(instance))\n    this.addError(path, \"stringPattern\", [schema.pattern]);\n};\n\n/**\n * Validates a number and populates the errors property. The instance is\n * assumed to be a number.\n */\nJSONSchemaValidator.prototype.validateNumber =\n    function(instance, schema, path) {\n  // Forbid NaN, +Infinity, and -Infinity.  Our APIs don't use them, and\n  // JSON serialization encodes them as 'null'.  Re-evaluate supporting\n  // them if we add an API that could reasonably take them as a parameter.\n  if (isNaN(instance) ||\n      instance == Number.POSITIVE_INFINITY ||\n      instance == Number.NEGATIVE_INFINITY )\n    this.addError(path, \"numberFiniteNotNan\", [instance]);\n\n  if (schema.minimum !== undefined && instance < schema.minimum)\n    this.addError(path, \"numberMinValue\", [schema.minimum]);\n\n  if (schema.maximum !== undefined && instance > schema.maximum)\n    this.addError(path, \"numberMaxValue\", [schema.maximum]);\n\n  // Check for integer values outside of -2^31..2^31-1.\n  if (schema.type === \"integer\" && (instance | 0) !== instance)\n    this.addError(path, \"numberIntValue\", []);\n\n  if (schema.maxDecimal && instance * Math.pow(10, schema.maxDecimal) % 1)\n    this.addError(path, \"numberMaxDecimal\", [schema.maxDecimal]);\n};\n\n/**\n * Validates the primitive type of an instance and populates the errors\n * property. Returns true if the instance validates, false otherwise.\n */\nJSONSchemaValidator.prototype.validateType = function(instance, schema, path) {\n  var actualType = JSONSchemaValidator.getType(instance);\n  if (schema.type == actualType ||\n      (schema.type == \"number\" && actualType == \"integer\")) {\n    return true;\n  } else if (schema.type == \"integer\" && actualType == \"number\") {\n    this.addError(path, \"invalidTypeIntegerNumber\");\n    return false;\n  } else {\n    this.addError(path, \"invalidType\", [schema.type, actualType]);\n    return false;\n  }\n};\n\n/**\n * Adds an error message. |key| is an index into the |messages| object.\n * |replacements| is an array of values to replace '*' characters in the\n * message.\n */\nJSONSchemaValidator.prototype.addError = function(path, key, replacements) {\n  $Array.push(this.errors, {\n    path: path,\n    message: JSONSchemaValidator.formatError(key, replacements)\n  });\n};\n\n/**\n * Resets errors to an empty list so you can call 'validate' again.\n */\nJSONSchemaValidator.prototype.resetErrors = function() {\n  this.errors = [];\n};\n\nexports.JSONSchemaValidator = JSONSchemaValidator;\n\n})"}
],
[
{"endColumn":2,"endLine":57,"isContentScript":true,"scriptId":"174","startColumn":0,"startLine":0,"url":"extensions::utils"},{"scriptSource":"(function(require, requireNative, exports, console, $Array, $Function, $JSON, $Object, $RegExp, $String) {'use strict';// Copyright (c) 2012 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nvar schemaRegistry = requireNative('schema_registry');\nvar CHECK = requireNative('logging').CHECK;\nvar WARNING = requireNative('logging').WARNING;\n\n// An object forEach. Calls |f| with each (key, value) pair of |obj|, using\n// |self| as the target.\nfunction forEach(obj, f, self) {\n  for (var key in obj) {\n    if ($Object.hasOwnProperty(obj, key))\n      $Function.call(f, self, key, obj[key]);\n  }\n}\n\n// Assuming |array_of_dictionaries| is structured like this:\n// [{id: 1, ... }, {id: 2, ...}, ...], you can use\n// lookup(array_of_dictionaries, 'id', 2) to get the dictionary with id == 2.\nfunction lookup(array_of_dictionaries, field, value) {\n  var filter = function (dict) {return dict[field] == value;};\n  var matches = array_of_dictionaries.filter(filter);\n  if (matches.length == 0) {\n    return undefined;\n  } else if (matches.length == 1) {\n    return matches[0]\n  } else {\n    throw new Error(\"Failed lookup of field '\" + field + \"' with value '\" +\n                    value + \"'\");\n  }\n}\n\nfunction loadTypeSchema(typeName, defaultSchema) {\n  var parts = $String.split(typeName, '.');\n  if (parts.length == 1) {\n    if (defaultSchema == null) {\n      WARNING('Trying to reference \"' + typeName + '\" ' +\n              'with neither namespace nor default schema.');\n      return null;\n    }\n    var types = defaultSchema.types;\n  } else {\n    var schemaName = $Array.join($Array.slice(parts, 0, parts.length - 1), '.');\n    var types = schemaRegistry.GetSchema(schemaName).types;\n  }\n  for (var i = 0; i < types.length; ++i) {\n    if (types[i].id == typeName)\n      return types[i];\n  }\n  return null;\n}\n\nexports.forEach = forEach;\nexports.loadTypeSchema = loadTypeSchema;\nexports.lookup = lookup;\n\n})"}
],
[
{"endColumn":2,"endLine":34,"isContentScript":true,"scriptId":"175","startColumn":0,"startLine":0,"url":"extensions::unload_event"},{"scriptSource":"(function(require, requireNative, exports, console, $Array, $Function, $JSON, $Object, $RegExp, $String) {'use strict';// Copyright 2013 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n// Special unload event. We don't use the DOM unload because that slows down\n// tab shutdown. On the other hand, onUnload might not always fire, since\n// Chrome will terminate renderers on shutdown (SuddenTermination).\n\n// Implement a primitive subset of the Event interface as needed, since if this\n// was to use the real event object there would be a circular dependency.\nvar listeners = [];\n\nexports.addListener = function(listener) {\n  $Array.push(listeners, listener);\n};\n\nexports.removeListener = function(listener) {\n  for (var i = 0; i < listeners.length; ++i) {\n    if (listeners[i] == listener) {\n      $Array.splice(listeners, i, 1);\n      return;\n    }\n  }\n};\n\nexports.wasDispatched = false;\n\n// dispatch() is called from C++.\nexports.dispatch = function() {\n  exports.wasDispatched = true;\n  for (var i = 0; i < listeners.length; ++i)\n    listeners[i]();\n};\n\n})"}
],
[
{"endColumn":2,"endLine":356,"isContentScript":true,"scriptId":"176","startColumn":0,"startLine":0,"url":"extensions::messaging"},{"scriptSource":"(function(require, requireNative, exports, console, $Array, $Function, $JSON, $Object, $RegExp, $String) {'use strict';// Copyright (c) 2012 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n// This contains unprivileged javascript APIs for extensions and apps.  It\n// can be loaded by any extension-related context, such as content scripts or\n// background pages. See user_script_slave.cc for script that is loaded by\n// content scripts only.\n\n  // TODO(kalman): factor requiring chrome out of here.\n  var chrome = requireNative('chrome').GetChrome();\n  var Event = require('event_bindings').Event;\n  var lastError = require('lastError');\n  var logActivity = requireNative('activityLogger');\n  var messagingNatives = requireNative('messaging_natives');\n  var processNatives = requireNative('process');\n  var unloadEvent = require('unload_event');\n  var messagingUtils = require('messaging_utils');\n\n  // The reserved channel name for the sendRequest/send(Native)Message APIs.\n  // Note: sendRequest is deprecated.\n  var kRequestChannel = \"chrome.extension.sendRequest\";\n  var kMessageChannel = \"chrome.runtime.sendMessage\";\n  var kNativeMessageChannel = \"chrome.runtime.sendNativeMessage\";\n\n  // Map of port IDs to port object.\n  var ports = {};\n\n  // Map of port IDs to unloadEvent listeners. Keep track of these to free the\n  // unloadEvent listeners when ports are closed.\n  var portReleasers = {};\n\n  // Change even to odd and vice versa, to get the other side of a given\n  // channel.\n  function getOppositePortId(portId) { return portId ^ 1; }\n\n  // Port object.  Represents a connection to another script context through\n  // which messages can be passed.\n  function Port(portId, opt_name) {\n    this.portId_ = portId;\n    this.name = opt_name;\n\n    var portSchema = {name: 'port', $ref: 'runtime.Port'};\n    var options = {unmanaged: true};\n    this.onDisconnect = new Event(null, [portSchema], options);\n    this.onMessage = new Event(\n        null,\n        [{name: 'message', type: 'any', optional: true}, portSchema],\n        options);\n  }\n\n  // Sends a message asynchronously to the context on the other end of this\n  // port.\n  Port.prototype.postMessage = function(msg) {\n    // JSON.stringify doesn't support a root object which is undefined.\n    if (msg === undefined)\n      msg = null;\n    msg = $JSON.stringify(msg);\n    if (msg === undefined) {\n      // JSON.stringify can fail with unserializable objects. Log an error and\n      // drop the message.\n      //\n      // TODO(kalman/mpcomplete): it would be better to do the same validation\n      // here that we do for runtime.sendMessage (and variants), i.e. throw an\n      // schema validation Error, but just maintain the old behaviour until\n      // there's a good reason not to (http://crbug.com/263077).\n      console.error('Illegal argument to Port.postMessage');\n      return;\n    }\n    messagingNatives.PostMessage(this.portId_, msg);\n  };\n\n  // Disconnects the port from the other end.\n  Port.prototype.disconnect = function() {\n    messagingNatives.CloseChannel(this.portId_, true);\n    this.destroy_();\n  };\n\n  Port.prototype.destroy_ = function() {\n    var portId = this.portId_;\n\n    this.onDisconnect.destroy_();\n    this.onMessage.destroy_();\n\n    messagingNatives.PortRelease(portId);\n    unloadEvent.removeListener(portReleasers[portId]);\n\n    delete ports[portId];\n    delete portReleasers[portId];\n  };\n\n  // Returns true if the specified port id is in this context. This is used by\n  // the C++ to avoid creating the javascript message for all the contexts that\n  // don't care about a particular message.\n  function hasPort(portId) {\n    return portId in ports;\n  };\n\n  // Hidden port creation function.  We don't want to expose an API that lets\n  // people add arbitrary port IDs to the port list.\n  function createPort(portId, opt_name) {\n    if (ports[portId])\n      throw new Error(\"Port '\" + portId + \"' already exists.\");\n    var port = new Port(portId, opt_name);\n    ports[portId] = port;\n    portReleasers[portId] = $Function.bind(messagingNatives.PortRelease,\n                                           this,\n                                           portId);\n    unloadEvent.addListener(portReleasers[portId]);\n    messagingNatives.PortAddRef(portId);\n    return port;\n  };\n\n  // Helper function for dispatchOnRequest.\n  function handleSendRequestError(isSendMessage,\n                                  responseCallbackPreserved,\n                                  sourceExtensionId,\n                                  targetExtensionId,\n                                  sourceUrl) {\n    var errorMsg = [];\n    var eventName = isSendMessage ? \"runtime.onMessage\" : \"extension.onRequest\";\n    if (isSendMessage && !responseCallbackPreserved) {\n      $Array.push(errorMsg,\n          \"The chrome.\" + eventName + \" listener must return true if you \" +\n          \"want to send a response after the listener returns\");\n    } else {\n      $Array.push(errorMsg,\n          \"Cannot send a response more than once per chrome.\" + eventName +\n          \" listener per document\");\n    }\n    $Array.push(errorMsg, \"(message was sent by extension\" + sourceExtensionId);\n    if (sourceExtensionId != \"\" && sourceExtensionId != targetExtensionId)\n      $Array.push(errorMsg, \"for extension \" + targetExtensionId);\n    if (sourceUrl != \"\")\n      $Array.push(errorMsg, \"for URL \" + sourceUrl);\n    lastError.set(eventName, errorMsg.join(\" \") + \").\", null, chrome);\n  }\n\n  // Helper function for dispatchOnConnect\n  function dispatchOnRequest(portId, channelName, sender,\n                             sourceExtensionId, targetExtensionId, sourceUrl,\n                             isExternal) {\n    var isSendMessage = channelName == kMessageChannel;\n    var requestEvent = null;\n    if (isSendMessage) {\n      if (chrome.runtime) {\n        requestEvent = isExternal ? chrome.runtime.onMessageExternal\n                                  : chrome.runtime.onMessage;\n      }\n    } else {\n      if (chrome.extension) {\n        requestEvent = isExternal ? chrome.extension.onRequestExternal\n                                  : chrome.extension.onRequest;\n      }\n    }\n    if (!requestEvent)\n      return false;\n    if (!requestEvent.hasListeners())\n      return false;\n    var port = createPort(portId, channelName);\n    port.onMessage.addListener(function(request) {\n      var responseCallbackPreserved = false;\n      var responseCallback = function(response) {\n        if (port) {\n          port.postMessage(response);\n          port.destroy_();\n          port = null;\n        } else {\n          // We nulled out port when sending the response, and now the page\n          // is trying to send another response for the same request.\n          handleSendRequestError(isSendMessage, responseCallbackPreserved,\n                                 sourceExtensionId, targetExtensionId);\n        }\n      };\n      // In case the extension never invokes the responseCallback, and also\n      // doesn't keep a reference to it, we need to clean up the port. Do\n      // so by attaching to the garbage collection of the responseCallback\n      // using some native hackery.\n      messagingNatives.BindToGC(responseCallback, function() {\n        if (port) {\n          port.destroy_();\n          port = null;\n        }\n      });\n      if (!isSendMessage) {\n        requestEvent.dispatch(request, sender, responseCallback);\n      } else {\n        var rv = requestEvent.dispatch(request, sender, responseCallback);\n        responseCallbackPreserved =\n            rv && rv.results && rv.results.indexOf(true) > -1;\n        if (!responseCallbackPreserved && port) {\n          // If they didn't access the response callback, they're not\n          // going to send a response, so clean up the port immediately.\n          port.destroy_();\n          port = null;\n        }\n      }\n    });\n    var eventName = (isSendMessage ?\n          (isExternal ?\n              \"runtime.onMessageExternal\" : \"runtime.onMessage\") :\n          (isExternal ?\n              \"extension.onRequestExternal\" : \"extension.onRequest\"));\n    logActivity.LogEvent(targetExtensionId,\n                         eventName,\n                         [sourceExtensionId, sourceUrl]);\n    return true;\n  }\n\n  // Called by native code when a channel has been opened to this context.\n  function dispatchOnConnect(portId,\n                             channelName,\n                             sourceTab,\n                             sourceExtensionId,\n                             targetExtensionId,\n                             sourceUrl) {\n    // Only create a new Port if someone is actually listening for a connection.\n    // In addition to being an optimization, this also fixes a bug where if 2\n    // channels were opened to and from the same process, closing one would\n    // close both.\n    var extensionId = processNatives.GetExtensionId();\n    if (targetExtensionId != extensionId)\n      return false;  // not for us\n\n    if (ports[getOppositePortId(portId)])\n      return false;  // this channel was opened by us, so ignore it\n\n    // Determine whether this is coming from another extension, so we can use\n    // the right event.\n    var isExternal = sourceExtensionId != extensionId;\n\n    var sender = {};\n    if (sourceExtensionId != '')\n      sender.id = sourceExtensionId;\n    if (sourceUrl)\n      sender.url = sourceUrl;\n    if (sourceTab)\n      sender.tab = sourceTab;\n\n    // Special case for sendRequest/onRequest and sendMessage/onMessage.\n    if (channelName == kRequestChannel || channelName == kMessageChannel) {\n      return dispatchOnRequest(portId, channelName, sender,\n                               sourceExtensionId, targetExtensionId, sourceUrl,\n                               isExternal);\n    }\n\n    var connectEvent = null;\n    if (chrome.runtime) {\n      connectEvent = isExternal ? chrome.runtime.onConnectExternal\n                                : chrome.runtime.onConnect;\n    }\n    if (!connectEvent)\n      return false;\n    if (!connectEvent.hasListeners())\n      return false;\n\n    var port = createPort(portId, channelName);\n    port.sender = sender;\n    if (processNatives.manifestVersion < 2)\n      port.tab = port.sender.tab;\n\n    var eventName = (isExternal ?\n        \"runtime.onConnectExternal\" : \"runtime.onConnect\");\n    connectEvent.dispatch(port);\n    logActivity.LogEvent(targetExtensionId,\n                         eventName,\n                         [sourceExtensionId]);\n    return true;\n  };\n\n  // Called by native code when a channel has been closed.\n  function dispatchOnDisconnect(portId, errorMessage) {\n    var port = ports[portId];\n    if (port) {\n      // Update the renderer's port bookkeeping, without notifying the browser.\n      messagingNatives.CloseChannel(portId, false);\n      if (errorMessage)\n        lastError.set('Port', errorMessage, null, chrome);\n      try {\n        port.onDisconnect.dispatch(port);\n      } finally {\n        port.destroy_();\n        lastError.clear(chrome);\n      }\n    }\n  };\n\n  // Called by native code when a message has been sent to the given port.\n  function dispatchOnMessage(msg, portId) {\n    var port = ports[portId];\n    if (port) {\n      if (msg)\n        msg = $JSON.parse(msg);\n      port.onMessage.dispatch(msg, port);\n    }\n  };\n\n  // Shared implementation used by tabs.sendMessage and runtime.sendMessage.\n  function sendMessageImpl(port, request, responseCallback) {\n    if (port.name != kNativeMessageChannel)\n      port.postMessage(request);\n\n    if (port.name == kMessageChannel && !responseCallback) {\n      // TODO(mpcomplete): Do this for the old sendRequest API too, after\n      // verifying it doesn't break anything.\n      // Go ahead and disconnect immediately if the sender is not expecting\n      // a response.\n      port.disconnect();\n      return;\n    }\n\n    // Ensure the callback exists for the older sendRequest API.\n    if (!responseCallback)\n      responseCallback = function() {};\n\n    port.onDisconnect.addListener(function() {\n      // For onDisconnects, we only notify the callback if there was an error.\n      try {\n        if (chrome.runtime && chrome.runtime.lastError)\n          responseCallback();\n      } finally {\n        port = null;\n      }\n    });\n    port.onMessage.addListener(function(response) {\n      try {\n        responseCallback(response);\n      } finally {\n        port.disconnect();\n        port = null;\n      }\n    });\n  };\n\n  function sendMessageUpdateArguments(functionName) {\n    var args = $Array.slice(arguments, 1);  // skip functionName\n    var alignedArgs = messagingUtils.alignSendMessageArguments(args);\n    if (!alignedArgs)\n      throw new Error('Invalid arguments to ' + functionName + '.');\n    return alignedArgs;\n  }\n\nexports.kRequestChannel = kRequestChannel;\nexports.kMessageChannel = kMessageChannel;\nexports.kNativeMessageChannel = kNativeMessageChannel;\nexports.Port = Port;\nexports.createPort = createPort;\nexports.sendMessageImpl = sendMessageImpl;\nexports.sendMessageUpdateArguments = sendMessageUpdateArguments;\n\n// For C++ code to call.\nexports.hasPort = hasPort;\nexports.dispatchOnConnect = dispatchOnConnect;\nexports.dispatchOnDisconnect = dispatchOnDisconnect;\nexports.dispatchOnMessage = dispatchOnMessage;\n\n})"}
],
[
{"endColumn":2,"endLine":35,"isContentScript":true,"scriptId":"177","startColumn":0,"startLine":0,"url":"extensions::messaging_utils"},{"scriptSource":"(function(require, requireNative, exports, console, $Array, $Function, $JSON, $Object, $RegExp, $String) {'use strict';// Copyright 2013 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n// Routines used to normalize arguments to messaging functions.\n\nfunction alignSendMessageArguments(args) {\n  // Align missing (optional) function arguments with the arguments that\n  // schema validation is expecting, e.g.\n  //   extension.sendRequest(req)     -> extension.sendRequest(null, req)\n  //   extension.sendRequest(req, cb) -> extension.sendRequest(null, req, cb)\n  if (!args || !args.length)\n    return null;\n  var lastArg = args.length - 1;\n\n  // responseCallback (last argument) is optional.\n  var responseCallback = null;\n  if (typeof(args[lastArg]) == 'function')\n    responseCallback = args[lastArg--];\n\n  // request (second argument) is required.\n  var request = args[lastArg--];\n\n  // targetId (first argument, extensionId in the manifest) is optional.\n  var targetId = null;\n  if (lastArg >= 0)\n    targetId = args[lastArg--];\n\n  if (lastArg != -1)\n    return null;\n  return [targetId, request, responseCallback];\n}\n\nexports.alignSendMessageArguments = alignSendMessageArguments;\n\n})"}
],
[
{"endColumn":2,"endLine":197,"isContentScript":true,"scriptId":"178","startColumn":0,"startLine":0,"url":"extensions::runtime"},{"scriptSource":"(function(require, requireNative, exports, console, $Array, $Function, $JSON, $Object, $RegExp, $String) {'use strict';// Copyright (c) 2012 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n// Custom binding for the runtime API.\n\nvar binding = require('binding').Binding.create('runtime');\n\nvar extensionNatives = requireNative('extension');\nvar messaging = require('messaging');\nvar runtimeNatives = requireNative('runtime');\nvar unloadEvent = require('unload_event');\nvar process = requireNative('process');\n\nvar backgroundPage = window;\nvar backgroundRequire = require;\nvar contextType = process.GetContextType();\nif (contextType == 'BLESSED_EXTENSION' ||\n    contextType == 'UNBLESSED_EXTENSION') {\n  var manifest = runtimeNatives.GetManifest();\n  if (manifest.app && manifest.app.background) {\n    // Get the background page if one exists. Otherwise, default to the current\n    // window.\n    backgroundPage = extensionNatives.GetExtensionViews(-1, 'BACKGROUND')[0];\n    if (backgroundPage) {\n      var GetModuleSystem = requireNative('v8_context').GetModuleSystem;\n      backgroundRequire = GetModuleSystem(backgroundPage).require;\n    } else {\n      backgroundPage = window;\n    }\n  }\n}\n\n// For packaged apps, all windows use the bindFileEntryCallback from the\n// background page so their FileEntry objects have the background page's context\n// as their own.  This allows them to be used from other windows (including the\n// background page) after the original window is closed.\nif (window == backgroundPage) {\n  var lastError = require('lastError');\n  var fileSystemNatives = requireNative('file_system_natives');\n  var GetIsolatedFileSystem = fileSystemNatives.GetIsolatedFileSystem;\n  var bindDirectoryEntryCallback = function(functionName, apiFunctions) {\n    apiFunctions.setCustomCallback(functionName,\n        function(name, request, response) {\n      if (request.callback && response) {\n        var callback = request.callback;\n        request.callback = null;\n\n        var fileSystemId = response.fileSystemId;\n        var baseName = response.baseName;\n        var fs = GetIsolatedFileSystem(fileSystemId);\n\n        try {\n          fs.root.getDirectory(baseName, {}, callback, function(fileError) {\n            lastError.run('runtime.' + functionName,\n                          'Error getting Entry, code: ' + fileError.code,\n                          request.stack,\n                          callback);\n          });\n        } catch (e) {\n          lastError.run('runtime.' + functionName,\n                        'Error: ' + e.stack,\n                        request.stack,\n                        callback);\n        }\n      }\n    });\n  };\n} else {\n  // Force the runtime API to be loaded in the background page. Using\n  // backgroundPageModuleSystem.require('runtime') is insufficient as\n  // requireNative is only allowed while lazily loading an API.\n  backgroundPage.chrome.runtime;\n  var bindDirectoryEntryCallback = backgroundRequire(\n      'runtime').bindDirectoryEntryCallback;\n}\n\nbinding.registerCustomHook(function(binding, id, contextType) {\n  var apiFunctions = binding.apiFunctions;\n  var runtime = binding.compiledApi;\n\n  //\n  // Unprivileged APIs.\n  //\n\n  runtime.id = id;\n\n  apiFunctions.setHandleRequest('getManifest', function() {\n    return runtimeNatives.GetManifest();\n  });\n\n  apiFunctions.setHandleRequest('getURL', function(path) {\n    path = String(path);\n    if (!path.length || path[0] != '/')\n      path = '/' + path;\n    return 'chrome-extension://' + id + path;\n  });\n\n  var sendMessageUpdateArguments = messaging.sendMessageUpdateArguments;\n  apiFunctions.setUpdateArgumentsPreValidate('sendMessage',\n      $Function.bind(sendMessageUpdateArguments, null, 'sendMessage'));\n  apiFunctions.setUpdateArgumentsPreValidate('sendNativeMessage',\n      $Function.bind(sendMessageUpdateArguments, null, 'sendNativeMessage'));\n\n  apiFunctions.setHandleRequest('sendMessage',\n                                function(targetId, message, responseCallback) {\n    var port = runtime.connect(targetId || runtime.id,\n        {name: messaging.kMessageChannel});\n    messaging.sendMessageImpl(port, message, responseCallback);\n  });\n\n  apiFunctions.setHandleRequest('sendNativeMessage',\n                                function(targetId, message, responseCallback) {\n    var port = runtime.connectNative(targetId);\n    messaging.sendMessageImpl(port, message, responseCallback);\n  });\n\n  apiFunctions.setUpdateArgumentsPreValidate('connect', function() {\n    // Align missing (optional) function arguments with the arguments that\n    // schema validation is expecting, e.g.\n    //   runtime.connect()   -> runtime.connect(null, null)\n    //   runtime.connect({}) -> runtime.connect(null, {})\n    var nextArg = 0;\n\n    // targetId (first argument) is optional.\n    var targetId = null;\n    if (typeof(arguments[nextArg]) == 'string')\n      targetId = arguments[nextArg++];\n\n    // connectInfo (second argument) is optional.\n    var connectInfo = null;\n    if (typeof(arguments[nextArg]) == 'object')\n      connectInfo = arguments[nextArg++];\n\n    if (nextArg != arguments.length)\n      throw new Error('Invalid arguments to connect.');\n    return [targetId, connectInfo];\n  });\n\n  apiFunctions.setUpdateArgumentsPreValidate('connectNative',\n                                             function(appName) {\n    if (typeof(appName) !== 'string') {\n      throw new Error('Invalid arguments to connectNative.');\n    }\n    return [appName];\n  });\n\n  apiFunctions.setHandleRequest('connect', function(targetId, connectInfo) {\n    // Don't let orphaned content scripts communicate with their extension.\n    // http://crbug.com/168263\n    if (unloadEvent.wasDispatched)\n      throw new Error('Error connecting to extension ' + targetId);\n\n    if (!targetId)\n      targetId = runtime.id;\n\n    var name = '';\n    if (connectInfo && connectInfo.name)\n      name = connectInfo.name;\n\n    var portId = runtimeNatives.OpenChannelToExtension(targetId, name);\n    if (portId >= 0)\n      return messaging.createPort(portId, name);\n  });\n\n  //\n  // Privileged APIs.\n  //\n  if (contextType != 'BLESSED_EXTENSION')\n    return;\n\n  apiFunctions.setHandleRequest('connectNative',\n                                function(nativeAppName) {\n    if (!unloadEvent.wasDispatched) {\n      var portId = runtimeNatives.OpenChannelToNativeApp(runtime.id,\n                                                         nativeAppName);\n      if (portId >= 0)\n        return messaging.createPort(portId, '');\n    }\n    throw new Error('Error connecting to native app: ' + nativeAppName);\n  });\n\n  apiFunctions.setCustomCallback('getBackgroundPage',\n                                 function(name, request, response) {\n    if (request.callback) {\n      var bg = extensionNatives.GetExtensionViews(-1, 'BACKGROUND')[0] || null;\n      request.callback(bg);\n    }\n    request.callback = null;\n  });\n\n  bindDirectoryEntryCallback('getPackageDirectoryEntry', apiFunctions);\n});\n\nexports.bindDirectoryEntryCallback = bindDirectoryEntryCallback;\nexports.binding = binding.generate();\n\n})"}
],
[
{"endColumn":2,"endLine":356,"scriptId":"179","startColumn":0,"startLine":0,"url":"extensions::messaging"},{"scriptSource":"(function(require, requireNative, exports, console, $Array, $Function, $JSON, $Object, $RegExp, $String) {'use strict';// Copyright (c) 2012 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n// This contains unprivileged javascript APIs for extensions and apps.  It\n// can be loaded by any extension-related context, such as content scripts or\n// background pages. See user_script_slave.cc for script that is loaded by\n// content scripts only.\n\n  // TODO(kalman): factor requiring chrome out of here.\n  var chrome = requireNative('chrome').GetChrome();\n  var Event = require('event_bindings').Event;\n  var lastError = require('lastError');\n  var logActivity = requireNative('activityLogger');\n  var messagingNatives = requireNative('messaging_natives');\n  var processNatives = requireNative('process');\n  var unloadEvent = require('unload_event');\n  var messagingUtils = require('messaging_utils');\n\n  // The reserved channel name for the sendRequest/send(Native)Message APIs.\n  // Note: sendRequest is deprecated.\n  var kRequestChannel = \"chrome.extension.sendRequest\";\n  var kMessageChannel = \"chrome.runtime.sendMessage\";\n  var kNativeMessageChannel = \"chrome.runtime.sendNativeMessage\";\n\n  // Map of port IDs to port object.\n  var ports = {};\n\n  // Map of port IDs to unloadEvent listeners. Keep track of these to free the\n  // unloadEvent listeners when ports are closed.\n  var portReleasers = {};\n\n  // Change even to odd and vice versa, to get the other side of a given\n  // channel.\n  function getOppositePortId(portId) { return portId ^ 1; }\n\n  // Port object.  Represents a connection to another script context through\n  // which messages can be passed.\n  function Port(portId, opt_name) {\n    this.portId_ = portId;\n    this.name = opt_name;\n\n    var portSchema = {name: 'port', $ref: 'runtime.Port'};\n    var options = {unmanaged: true};\n    this.onDisconnect = new Event(null, [portSchema], options);\n    this.onMessage = new Event(\n        null,\n        [{name: 'message', type: 'any', optional: true}, portSchema],\n        options);\n  }\n\n  // Sends a message asynchronously to the context on the other end of this\n  // port.\n  Port.prototype.postMessage = function(msg) {\n    // JSON.stringify doesn't support a root object which is undefined.\n    if (msg === undefined)\n      msg = null;\n    msg = $JSON.stringify(msg);\n    if (msg === undefined) {\n      // JSON.stringify can fail with unserializable objects. Log an error and\n      // drop the message.\n      //\n      // TODO(kalman/mpcomplete): it would be better to do the same validation\n      // here that we do for runtime.sendMessage (and variants), i.e. throw an\n      // schema validation Error, but just maintain the old behaviour until\n      // there's a good reason not to (http://crbug.com/263077).\n      console.error('Illegal argument to Port.postMessage');\n      return;\n    }\n    messagingNatives.PostMessage(this.portId_, msg);\n  };\n\n  // Disconnects the port from the other end.\n  Port.prototype.disconnect = function() {\n    messagingNatives.CloseChannel(this.portId_, true);\n    this.destroy_();\n  };\n\n  Port.prototype.destroy_ = function() {\n    var portId = this.portId_;\n\n    this.onDisconnect.destroy_();\n    this.onMessage.destroy_();\n\n    messagingNatives.PortRelease(portId);\n    unloadEvent.removeListener(portReleasers[portId]);\n\n    delete ports[portId];\n    delete portReleasers[portId];\n  };\n\n  // Returns true if the specified port id is in this context. This is used by\n  // the C++ to avoid creating the javascript message for all the contexts that\n  // don't care about a particular message.\n  function hasPort(portId) {\n    return portId in ports;\n  };\n\n  // Hidden port creation function.  We don't want to expose an API that lets\n  // people add arbitrary port IDs to the port list.\n  function createPort(portId, opt_name) {\n    if (ports[portId])\n      throw new Error(\"Port '\" + portId + \"' already exists.\");\n    var port = new Port(portId, opt_name);\n    ports[portId] = port;\n    portReleasers[portId] = $Function.bind(messagingNatives.PortRelease,\n                                           this,\n                                           portId);\n    unloadEvent.addListener(portReleasers[portId]);\n    messagingNatives.PortAddRef(portId);\n    return port;\n  };\n\n  // Helper function for dispatchOnRequest.\n  function handleSendRequestError(isSendMessage,\n                                  responseCallbackPreserved,\n                                  sourceExtensionId,\n                                  targetExtensionId,\n                                  sourceUrl) {\n    var errorMsg = [];\n    var eventName = isSendMessage ? \"runtime.onMessage\" : \"extension.onRequest\";\n    if (isSendMessage && !responseCallbackPreserved) {\n      $Array.push(errorMsg,\n          \"The chrome.\" + eventName + \" listener must return true if you \" +\n          \"want to send a response after the listener returns\");\n    } else {\n      $Array.push(errorMsg,\n          \"Cannot send a response more than once per chrome.\" + eventName +\n          \" listener per document\");\n    }\n    $Array.push(errorMsg, \"(message was sent by extension\" + sourceExtensionId);\n    if (sourceExtensionId != \"\" && sourceExtensionId != targetExtensionId)\n      $Array.push(errorMsg, \"for extension \" + targetExtensionId);\n    if (sourceUrl != \"\")\n      $Array.push(errorMsg, \"for URL \" + sourceUrl);\n    lastError.set(eventName, errorMsg.join(\" \") + \").\", null, chrome);\n  }\n\n  // Helper function for dispatchOnConnect\n  function dispatchOnRequest(portId, channelName, sender,\n                             sourceExtensionId, targetExtensionId, sourceUrl,\n                             isExternal) {\n    var isSendMessage = channelName == kMessageChannel;\n    var requestEvent = null;\n    if (isSendMessage) {\n      if (chrome.runtime) {\n        requestEvent = isExternal ? chrome.runtime.onMessageExternal\n                                  : chrome.runtime.onMessage;\n      }\n    } else {\n      if (chrome.extension) {\n        requestEvent = isExternal ? chrome.extension.onRequestExternal\n                                  : chrome.extension.onRequest;\n      }\n    }\n    if (!requestEvent)\n      return false;\n    if (!requestEvent.hasListeners())\n      return false;\n    var port = createPort(portId, channelName);\n    port.onMessage.addListener(function(request) {\n      var responseCallbackPreserved = false;\n      var responseCallback = function(response) {\n        if (port) {\n          port.postMessage(response);\n          port.destroy_();\n          port = null;\n        } else {\n          // We nulled out port when sending the response, and now the page\n          // is trying to send another response for the same request.\n          handleSendRequestError(isSendMessage, responseCallbackPreserved,\n                                 sourceExtensionId, targetExtensionId);\n        }\n      };\n      // In case the extension never invokes the responseCallback, and also\n      // doesn't keep a reference to it, we need to clean up the port. Do\n      // so by attaching to the garbage collection of the responseCallback\n      // using some native hackery.\n      messagingNatives.BindToGC(responseCallback, function() {\n        if (port) {\n          port.destroy_();\n          port = null;\n        }\n      });\n      if (!isSendMessage) {\n        requestEvent.dispatch(request, sender, responseCallback);\n      } else {\n        var rv = requestEvent.dispatch(request, sender, responseCallback);\n        responseCallbackPreserved =\n            rv && rv.results && rv.results.indexOf(true) > -1;\n        if (!responseCallbackPreserved && port) {\n          // If they didn't access the response callback, they're not\n          // going to send a response, so clean up the port immediately.\n          port.destroy_();\n          port = null;\n        }\n      }\n    });\n    var eventName = (isSendMessage ?\n          (isExternal ?\n              \"runtime.onMessageExternal\" : \"runtime.onMessage\") :\n          (isExternal ?\n              \"extension.onRequestExternal\" : \"extension.onRequest\"));\n    logActivity.LogEvent(targetExtensionId,\n                         eventName,\n                         [sourceExtensionId, sourceUrl]);\n    return true;\n  }\n\n  // Called by native code when a channel has been opened to this context.\n  function dispatchOnConnect(portId,\n                             channelName,\n                             sourceTab,\n                             sourceExtensionId,\n                             targetExtensionId,\n                             sourceUrl) {\n    // Only create a new Port if someone is actually listening for a connection.\n    // In addition to being an optimization, this also fixes a bug where if 2\n    // channels were opened to and from the same process, closing one would\n    // close both.\n    var extensionId = processNatives.GetExtensionId();\n    if (targetExtensionId != extensionId)\n      return false;  // not for us\n\n    if (ports[getOppositePortId(portId)])\n      return false;  // this channel was opened by us, so ignore it\n\n    // Determine whether this is coming from another extension, so we can use\n    // the right event.\n    var isExternal = sourceExtensionId != extensionId;\n\n    var sender = {};\n    if (sourceExtensionId != '')\n      sender.id = sourceExtensionId;\n    if (sourceUrl)\n      sender.url = sourceUrl;\n    if (sourceTab)\n      sender.tab = sourceTab;\n\n    // Special case for sendRequest/onRequest and sendMessage/onMessage.\n    if (channelName == kRequestChannel || channelName == kMessageChannel) {\n      return dispatchOnRequest(portId, channelName, sender,\n                               sourceExtensionId, targetExtensionId, sourceUrl,\n                               isExternal);\n    }\n\n    var connectEvent = null;\n    if (chrome.runtime) {\n      connectEvent = isExternal ? chrome.runtime.onConnectExternal\n                                : chrome.runtime.onConnect;\n    }\n    if (!connectEvent)\n      return false;\n    if (!connectEvent.hasListeners())\n      return false;\n\n    var port = createPort(portId, channelName);\n    port.sender = sender;\n    if (processNatives.manifestVersion < 2)\n      port.tab = port.sender.tab;\n\n    var eventName = (isExternal ?\n        \"runtime.onConnectExternal\" : \"runtime.onConnect\");\n    connectEvent.dispatch(port);\n    logActivity.LogEvent(targetExtensionId,\n                         eventName,\n                         [sourceExtensionId]);\n    return true;\n  };\n\n  // Called by native code when a channel has been closed.\n  function dispatchOnDisconnect(portId, errorMessage) {\n    var port = ports[portId];\n    if (port) {\n      // Update the renderer's port bookkeeping, without notifying the browser.\n      messagingNatives.CloseChannel(portId, false);\n      if (errorMessage)\n        lastError.set('Port', errorMessage, null, chrome);\n      try {\n        port.onDisconnect.dispatch(port);\n      } finally {\n        port.destroy_();\n        lastError.clear(chrome);\n      }\n    }\n  };\n\n  // Called by native code when a message has been sent to the given port.\n  function dispatchOnMessage(msg, portId) {\n    var port = ports[portId];\n    if (port) {\n      if (msg)\n        msg = $JSON.parse(msg);\n      port.onMessage.dispatch(msg, port);\n    }\n  };\n\n  // Shared implementation used by tabs.sendMessage and runtime.sendMessage.\n  function sendMessageImpl(port, request, responseCallback) {\n    if (port.name != kNativeMessageChannel)\n      port.postMessage(request);\n\n    if (port.name == kMessageChannel && !responseCallback) {\n      // TODO(mpcomplete): Do this for the old sendRequest API too, after\n      // verifying it doesn't break anything.\n      // Go ahead and disconnect immediately if the sender is not expecting\n      // a response.\n      port.disconnect();\n      return;\n    }\n\n    // Ensure the callback exists for the older sendRequest API.\n    if (!responseCallback)\n      responseCallback = function() {};\n\n    port.onDisconnect.addListener(function() {\n      // For onDisconnects, we only notify the callback if there was an error.\n      try {\n        if (chrome.runtime && chrome.runtime.lastError)\n          responseCallback();\n      } finally {\n        port = null;\n      }\n    });\n    port.onMessage.addListener(function(response) {\n      try {\n        responseCallback(response);\n      } finally {\n        port.disconnect();\n        port = null;\n      }\n    });\n  };\n\n  function sendMessageUpdateArguments(functionName) {\n    var args = $Array.slice(arguments, 1);  // skip functionName\n    var alignedArgs = messagingUtils.alignSendMessageArguments(args);\n    if (!alignedArgs)\n      throw new Error('Invalid arguments to ' + functionName + '.');\n    return alignedArgs;\n  }\n\nexports.kRequestChannel = kRequestChannel;\nexports.kMessageChannel = kMessageChannel;\nexports.kNativeMessageChannel = kNativeMessageChannel;\nexports.Port = Port;\nexports.createPort = createPort;\nexports.sendMessageImpl = sendMessageImpl;\nexports.sendMessageUpdateArguments = sendMessageUpdateArguments;\n\n// For C++ code to call.\nexports.hasPort = hasPort;\nexports.dispatchOnConnect = dispatchOnConnect;\nexports.dispatchOnDisconnect = dispatchOnDisconnect;\nexports.dispatchOnMessage = dispatchOnMessage;\n\n})"}
],
[
{"endColumn":2,"endLine":500,"scriptId":"180","startColumn":0,"startLine":0,"url":"extensions::event_bindings"},{"scriptSource":"(function(require, requireNative, exports, console, $Array, $Function, $JSON, $Object, $RegExp, $String) {'use strict';// Copyright (c) 2012 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n  var eventNatives = requireNative('event_natives');\n  var logging = requireNative('logging');\n  var schemaRegistry = requireNative('schema_registry');\n  var sendRequest = require('sendRequest').sendRequest;\n  var utils = require('utils');\n  var validate = require('schemaUtils').validate;\n  var unloadEvent = require('unload_event');\n\n  // Schemas for the rule-style functions on the events API that\n  // only need to be generated occasionally, so populate them lazily.\n  var ruleFunctionSchemas = {\n    // These values are set lazily:\n    // addRules: {},\n    // getRules: {},\n    // removeRules: {}\n  };\n\n  // This function ensures that |ruleFunctionSchemas| is populated.\n  function ensureRuleSchemasLoaded() {\n    if (ruleFunctionSchemas.addRules)\n      return;\n    var eventsSchema = schemaRegistry.GetSchema(\"events\");\n    var eventType = utils.lookup(eventsSchema.types, 'id', 'events.Event');\n\n    ruleFunctionSchemas.addRules =\n        utils.lookup(eventType.functions, 'name', 'addRules');\n    ruleFunctionSchemas.getRules =\n        utils.lookup(eventType.functions, 'name', 'getRules');\n    ruleFunctionSchemas.removeRules =\n        utils.lookup(eventType.functions, 'name', 'removeRules');\n  }\n\n  // A map of event names to the event object that is registered to that name.\n  var attachedNamedEvents = {};\n\n  // An array of all attached event objects, used for detaching on unload.\n  var allAttachedEvents = [];\n\n  // A map of functions that massage event arguments before they are dispatched.\n  // Key is event name, value is function.\n  var eventArgumentMassagers = {};\n\n  // An attachment strategy for events that aren't attached to the browser.\n  // This applies to events with the \"unmanaged\" option and events without\n  // names.\n  var NullAttachmentStrategy = function(event) {\n    this.event_ = event;\n  };\n  NullAttachmentStrategy.prototype.onAddedListener =\n      function(listener) {\n  };\n  NullAttachmentStrategy.prototype.onRemovedListener =\n      function(listener) {\n  };\n  NullAttachmentStrategy.prototype.detach = function(manual) {\n  };\n  NullAttachmentStrategy.prototype.getListenersByIDs = function(ids) {\n    // |ids| is for filtered events only.\n    return this.event_.listeners_;\n  };\n\n  // Handles adding/removing/dispatching listeners for unfiltered events.\n  var UnfilteredAttachmentStrategy = function(event) {\n    this.event_ = event;\n  };\n\n  UnfilteredAttachmentStrategy.prototype.onAddedListener =\n      function(listener) {\n    // Only attach / detach on the first / last listener removed.\n    if (this.event_.listeners_.length == 0)\n      eventNatives.AttachEvent(this.event_.eventName_);\n  };\n\n  UnfilteredAttachmentStrategy.prototype.onRemovedListener =\n      function(listener) {\n    if (this.event_.listeners_.length == 0)\n      this.detach(true);\n  };\n\n  UnfilteredAttachmentStrategy.prototype.detach = function(manual) {\n    eventNatives.DetachEvent(this.event_.eventName_, manual);\n  };\n\n  UnfilteredAttachmentStrategy.prototype.getListenersByIDs = function(ids) {\n    // |ids| is for filtered events only.\n    return this.event_.listeners_;\n  };\n\n  var FilteredAttachmentStrategy = function(event) {\n    this.event_ = event;\n    this.listenerMap_ = {};\n  };\n\n  FilteredAttachmentStrategy.idToEventMap = {};\n\n  FilteredAttachmentStrategy.prototype.onAddedListener = function(listener) {\n    var id = eventNatives.AttachFilteredEvent(this.event_.eventName_,\n                                              listener.filters || {});\n    if (id == -1)\n      throw new Error(\"Can't add listener\");\n    listener.id = id;\n    this.listenerMap_[id] = listener;\n    FilteredAttachmentStrategy.idToEventMap[id] = this.event_;\n  };\n\n  FilteredAttachmentStrategy.prototype.onRemovedListener = function(listener) {\n    this.detachListener(listener, true);\n  };\n\n  FilteredAttachmentStrategy.prototype.detachListener =\n      function(listener, manual) {\n    if (listener.id == undefined)\n      throw new Error(\"listener.id undefined - '\" + listener + \"'\");\n    var id = listener.id;\n    delete this.listenerMap_[id];\n    delete FilteredAttachmentStrategy.idToEventMap[id];\n    eventNatives.DetachFilteredEvent(id, manual);\n  };\n\n  FilteredAttachmentStrategy.prototype.detach = function(manual) {\n    for (var i in this.listenerMap_)\n      this.detachListener(this.listenerMap_[i], manual);\n  };\n\n  FilteredAttachmentStrategy.prototype.getListenersByIDs = function(ids) {\n    var result = [];\n    for (var i = 0; i < ids.length; i++)\n      $Array.push(result, this.listenerMap_[ids[i]]);\n    return result;\n  };\n\n  function parseEventOptions(opt_eventOptions) {\n    function merge(dest, src) {\n      for (var k in src) {\n        if (!$Object.hasOwnProperty(dest, k)) {\n          dest[k] = src[k];\n        }\n      }\n    }\n\n    var options = opt_eventOptions || {};\n    merge(options, {\n      // Event supports adding listeners with filters (\"filtered events\"), for\n      // example as used in the webNavigation API.\n      //\n      // event.addListener(listener, [filter1, filter2]);\n      supportsFilters: false,\n\n      // Events supports vanilla events. Most APIs use these.\n      //\n      // event.addListener(listener);\n      supportsListeners: true,\n\n      // Event supports adding rules (\"declarative events\") rather than\n      // listeners, for example as used in the declarativeWebRequest API.\n      //\n      // event.addRules([rule1, rule2]);\n      supportsRules: false,\n\n      // Event is unmanaged in that the browser has no knowledge of its\n      // existence; it's never invoked, doesn't keep the renderer alive, and\n      // the bindings system has no knowledge of it.\n      //\n      // Both events created by user code (new chrome.Event()) and messaging\n      // events are unmanaged, though in the latter case the browser *does*\n      // interact indirectly with them via IPCs written by hand.\n      unmanaged: false,\n    });\n    return options;\n  };\n\n  // Event object.  If opt_eventName is provided, this object represents\n  // the unique instance of that named event, and dispatching an event\n  // with that name will route through this object's listeners. Note that\n  // opt_eventName is required for events that support rules.\n  //\n  // Example:\n  //   var Event = require('event_bindings').Event;\n  //   chrome.tabs.onChanged = new Event(\"tab-changed\");\n  //   chrome.tabs.onChanged.addListener(function(data) { alert(data); });\n  //   Event.dispatch(\"tab-changed\", \"hi\");\n  // will result in an alert dialog that says 'hi'.\n  //\n  // If opt_eventOptions exists, it is a dictionary that contains the boolean\n  // entries \"supportsListeners\" and \"supportsRules\".\n  var Event = function(opt_eventName, opt_argSchemas, opt_eventOptions) {\n    this.eventName_ = opt_eventName;\n    this.argSchemas_ = opt_argSchemas;\n    this.listeners_ = [];\n    this.eventOptions_ = parseEventOptions(opt_eventOptions);\n\n    if (!this.eventName_) {\n      if (this.eventOptions_.supportsRules)\n        throw new Error(\"Events that support rules require an event name.\");\n      // Events without names cannot be managed by the browser by definition\n      // (the browser has no way of identifying them).\n      this.eventOptions_.unmanaged = true;\n    }\n\n    // Track whether the event has been destroyed to help track down the cause\n    // of http://crbug.com/258526.\n    // This variable will eventually hold the stack trace of the destroy call.\n    // TODO(kalman): Delete this and replace with more sound logic that catches\n    // when events are used without being *attached*.\n    this.destroyed_ = null;\n\n    if (this.eventOptions_.unmanaged)\n      this.attachmentStrategy_ = new NullAttachmentStrategy(this);\n    else if (this.eventOptions_.supportsFilters)\n      this.attachmentStrategy_ = new FilteredAttachmentStrategy(this);\n    else\n      this.attachmentStrategy_ = new UnfilteredAttachmentStrategy(this);\n  };\n\n  // callback is a function(args, dispatch). args are the args we receive from\n  // dispatchEvent(), and dispatch is a function(args) that dispatches args to\n  // its listeners.\n  function registerArgumentMassager(name, callback) {\n    if (eventArgumentMassagers[name])\n      throw new Error(\"Massager already registered for event: \" + name);\n    eventArgumentMassagers[name] = callback;\n  }\n\n  // Dispatches a named event with the given argument array. The args array is\n  // the list of arguments that will be sent to the event callback.\n  function dispatchEvent(name, args, filteringInfo) {\n    var listenerIDs = [];\n\n    if (filteringInfo)\n      listenerIDs = eventNatives.MatchAgainstEventFilter(name, filteringInfo);\n\n    var event = attachedNamedEvents[name];\n    if (!event)\n      return;\n\n    var dispatchArgs = function(args) {\n      var result = event.dispatch_(args, listenerIDs);\n      if (result)\n        logging.DCHECK(!result.validationErrors, result.validationErrors);\n      return result;\n    };\n\n    if (eventArgumentMassagers[name])\n      eventArgumentMassagers[name](args, dispatchArgs);\n    else\n      dispatchArgs(args);\n  }\n\n  // Registers a callback to be called when this event is dispatched.\n  Event.prototype.addListener = function(cb, filters) {\n    if (!this.eventOptions_.supportsListeners)\n      throw new Error(\"This event does not support listeners.\");\n    if (this.eventOptions_.maxListeners &&\n        this.getListenerCount() >= this.eventOptions_.maxListeners) {\n      throw new Error(\"Too many listeners for \" + this.eventName_);\n    }\n    if (filters) {\n      if (!this.eventOptions_.supportsFilters)\n        throw new Error(\"This event does not support filters.\");\n      if (filters.url && !(filters.url instanceof Array))\n        throw new Error(\"filters.url should be an array.\");\n      if (filters.serviceType &&\n          !(typeof filters.serviceType === 'string')) {\n        throw new Error(\"filters.serviceType should be a string.\")\n      }\n    }\n    var listener = {callback: cb, filters: filters};\n    this.attach_(listener);\n    $Array.push(this.listeners_, listener);\n  };\n\n  Event.prototype.attach_ = function(listener) {\n    this.attachmentStrategy_.onAddedListener(listener);\n\n    if (this.listeners_.length == 0) {\n      allAttachedEvents[allAttachedEvents.length] = this;\n      if (this.eventName_) {\n        if (attachedNamedEvents[this.eventName_]) {\n          throw new Error(\"Event '\" + this.eventName_ +\n                          \"' is already attached.\");\n        }\n        attachedNamedEvents[this.eventName_] = this;\n      }\n    }\n  };\n\n  // Unregisters a callback.\n  Event.prototype.removeListener = function(cb) {\n    if (!this.eventOptions_.supportsListeners)\n      throw new Error(\"This event does not support listeners.\");\n\n    var idx = this.findListener_(cb);\n    if (idx == -1)\n      return;\n\n    var removedListener = $Array.splice(this.listeners_, idx, 1)[0];\n    this.attachmentStrategy_.onRemovedListener(removedListener);\n\n    if (this.listeners_.length == 0) {\n      var i = allAttachedEvents.indexOf(this);\n      if (i >= 0)\n        delete allAttachedEvents[i];\n      if (this.eventName_) {\n        if (!attachedNamedEvents[this.eventName_])\n          throw new Error(\"Event '\" + this.eventName_ + \"' is not attached.\");\n        delete attachedNamedEvents[this.eventName_];\n      }\n    }\n  };\n\n  // Test if the given callback is registered for this event.\n  Event.prototype.hasListener = function(cb) {\n    if (!this.eventOptions_.supportsListeners)\n      throw new Error(\"This event does not support listeners.\");\n    return this.findListener_(cb) > -1;\n  };\n\n  // Test if any callbacks are registered for this event.\n  Event.prototype.hasListeners = function() {\n    return this.getListenerCount() > 0;\n  };\n\n  // Return the number of listeners on this event.\n  Event.prototype.getListenerCount = function() {\n    if (!this.eventOptions_.supportsListeners)\n      throw new Error(\"This event does not support listeners.\");\n    return this.listeners_.length;\n  };\n\n  // Returns the index of the given callback if registered, or -1 if not\n  // found.\n  Event.prototype.findListener_ = function(cb) {\n    for (var i = 0; i < this.listeners_.length; i++) {\n      if (this.listeners_[i].callback == cb) {\n        return i;\n      }\n    }\n\n    return -1;\n  };\n\n  Event.prototype.dispatch_ = function(args, listenerIDs) {\n    if (this.destroyed_) {\n      throw new Error(this.eventName_ + ' was already destroyed at: ' +\n                      this.destroyed_);\n    }\n    if (!this.eventOptions_.supportsListeners)\n      throw new Error(\"This event does not support listeners.\");\n\n    if (this.argSchemas_ && logging.DCHECK_IS_ON()) {\n      try {\n        validate(args, this.argSchemas_);\n      } catch (e) {\n        e.message += ' in ' + this.eventName_;\n        throw e;\n      }\n    }\n\n    // Make a copy of the listeners in case the listener list is modified\n    // while dispatching the event.\n    var listeners = $Array.slice(\n        this.attachmentStrategy_.getListenersByIDs(listenerIDs));\n\n    var results = [];\n    for (var i = 0; i < listeners.length; i++) {\n      try {\n        var result = this.dispatchToListener(listeners[i].callback, args);\n        if (result !== undefined)\n          $Array.push(results, result);\n      } catch (e) {\n        console.error('Error in event handler for ' +\n                      (this.eventName_ ? this.eventName_ : '(unknown)') +\n                      ': ' + e.stack);\n      }\n    }\n    if (results.length)\n      return {results: results};\n  }\n\n  // Can be overridden to support custom dispatching.\n  Event.prototype.dispatchToListener = function(callback, args) {\n    return $Function.apply(callback, null, args);\n  }\n\n  // Dispatches this event object to all listeners, passing all supplied\n  // arguments to this function each listener.\n  Event.prototype.dispatch = function(varargs) {\n    return this.dispatch_($Array.slice(arguments), undefined);\n  };\n\n  // Detaches this event object from its name.\n  Event.prototype.detach_ = function() {\n    this.attachmentStrategy_.detach(false);\n  };\n\n  Event.prototype.destroy_ = function() {\n    this.listeners_.length = 0;\n    this.detach_();\n    this.destroyed_ = new Error().stack;\n  };\n\n  Event.prototype.addRules = function(rules, opt_cb) {\n    if (!this.eventOptions_.supportsRules)\n      throw new Error(\"This event does not support rules.\");\n\n    // Takes a list of JSON datatype identifiers and returns a schema fragment\n    // that verifies that a JSON object corresponds to an array of only these\n    // data types.\n    function buildArrayOfChoicesSchema(typesList) {\n      return {\n        'type': 'array',\n        'items': {\n          'choices': typesList.map(function(el) {return {'$ref': el};})\n        }\n      };\n    };\n\n    // Validate conditions and actions against specific schemas of this\n    // event object type.\n    // |rules| is an array of JSON objects that follow the Rule type of the\n    // declarative extension APIs. |conditions| is an array of JSON type\n    // identifiers that are allowed to occur in the conditions attribute of each\n    // rule. Likewise, |actions| is an array of JSON type identifiers that are\n    // allowed to occur in the actions attribute of each rule.\n    function validateRules(rules, conditions, actions) {\n      var conditionsSchema = buildArrayOfChoicesSchema(conditions);\n      var actionsSchema = buildArrayOfChoicesSchema(actions);\n      $Array.forEach(rules, function(rule) {\n        validate([rule.conditions], [conditionsSchema]);\n        validate([rule.actions], [actionsSchema]);\n      });\n    };\n\n    if (!this.eventOptions_.conditions || !this.eventOptions_.actions) {\n      throw new Error('Event ' + this.eventName_ + ' misses conditions or ' +\n                      'actions in the API specification.');\n    }\n\n    validateRules(rules,\n                  this.eventOptions_.conditions,\n                  this.eventOptions_.actions);\n\n    ensureRuleSchemasLoaded();\n    // We remove the first parameter from the validation to give the user more\n    // meaningful error messages.\n    validate([rules, opt_cb],\n             $Array.splice(\n                 $Array.slice(ruleFunctionSchemas.addRules.parameters), 1));\n    sendRequest(\"events.addRules\", [this.eventName_, rules, opt_cb],\n                ruleFunctionSchemas.addRules.parameters);\n  }\n\n  Event.prototype.removeRules = function(ruleIdentifiers, opt_cb) {\n    if (!this.eventOptions_.supportsRules)\n      throw new Error(\"This event does not support rules.\");\n    ensureRuleSchemasLoaded();\n    // We remove the first parameter from the validation to give the user more\n    // meaningful error messages.\n    validate([ruleIdentifiers, opt_cb],\n             $Array.splice(\n                 $Array.slice(ruleFunctionSchemas.removeRules.parameters), 1));\n    sendRequest(\"events.removeRules\",\n                [this.eventName_, ruleIdentifiers, opt_cb],\n                ruleFunctionSchemas.removeRules.parameters);\n  }\n\n  Event.prototype.getRules = function(ruleIdentifiers, cb) {\n    if (!this.eventOptions_.supportsRules)\n      throw new Error(\"This event does not support rules.\");\n    ensureRuleSchemasLoaded();\n    // We remove the first parameter from the validation to give the user more\n    // meaningful error messages.\n    validate([ruleIdentifiers, cb],\n             $Array.splice(\n                 $Array.slice(ruleFunctionSchemas.getRules.parameters), 1));\n\n    sendRequest(\"events.getRules\",\n                [this.eventName_, ruleIdentifiers, cb],\n                ruleFunctionSchemas.getRules.parameters);\n  }\n\n  unloadEvent.addListener(function() {\n    for (var i = 0; i < allAttachedEvents.length; ++i) {\n      var event = allAttachedEvents[i];\n      if (event)\n        event.detach_();\n    }\n  });\n\n  // NOTE: Event is (lazily) exposed as chrome.Event from dispatcher.cc.\n  exports.Event = Event;\n\n  exports.dispatchEvent = dispatchEvent;\n  exports.parseEventOptions = parseEventOptions;\n  exports.registerArgumentMassager = registerArgumentMassager;\n\n})"}
],
[
{"endColumn":2,"endLine":166,"scriptId":"181","startColumn":0,"startLine":0,"url":"extensions::sendRequest"},{"scriptSource":"(function(require, requireNative, exports, console, $Array, $Function, $JSON, $Object, $RegExp, $String) {'use strict';// Copyright (c) 2012 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nvar lastError = require('lastError');\nvar logging = requireNative('logging');\nvar natives = requireNative('sendRequest');\nvar processNatives = requireNative('process');\nvar validate = require('schemaUtils').validate;\n\n// All outstanding requests from sendRequest().\nvar requests = {};\n\n// Used to prevent double Activity Logging for API calls that use both custom\n// bindings and ExtensionFunctions (via sendRequest).\nvar calledSendRequest = false;\n\n// Runs a user-supplied callback safely.\nfunction safeCallbackApply(name, request, callback, args) {\n  try {\n    $Function.apply(callback, request, args);\n  } catch (e) {\n    var errorMessage = \"Error in response to \" + name + \": \" + e;\n    if (request.stack && request.stack != '')\n      errorMessage += \"\\n\" + request.stack;\n    console.error(errorMessage);\n  }\n}\n\n// Callback handling.\nfunction handleResponse(requestId, name, success, responseList, error) {\n  // The chrome objects we will set lastError on. Really we should only be\n  // setting this on the callback's chrome object, but set on ours too since\n  // it's conceivable that something relies on that.\n  var chromesForLastError = [chrome];\n\n  try {\n    var request = requests[requestId];\n    logging.DCHECK(request != null);\n\n    // lastError needs to be set on the caller's chrome object no matter what,\n    // though chances are it's the same as ours (it will be different when\n    // calling API methods on other contexts).\n    if (request.callback) {\n      var chromeForCallback = natives.GetGlobal(request.callback).chrome;\n      if (chromeForCallback != chrome)\n        $Array.push(chromesForLastError, chromeForCallback);\n    }\n\n    $Array.forEach(chromesForLastError, function(c) {lastError.clear(c)});\n    if (!success) {\n      if (!error)\n        error = \"Unknown error.\";\n      $Array.forEach(chromesForLastError, function(c) {\n        lastError.set(name, error, request.stack, c)\n      });\n    }\n\n    if (request.customCallback) {\n      safeCallbackApply(name,\n                        request,\n                        request.customCallback,\n                        $Array.concat([name, request], responseList));\n    }\n\n    if (request.callback) {\n      // Validate callback in debug only -- and only when the\n      // caller has provided a callback. Implementations of api\n      // calls may not return data if they observe the caller\n      // has not provided a callback.\n      if (logging.DCHECK_IS_ON() && !error) {\n        if (!request.callbackSchema.parameters)\n          throw new Error(name + \": no callback schema defined\");\n        validate(responseList, request.callbackSchema.parameters);\n      }\n      safeCallbackApply(name, request, request.callback, responseList);\n    }\n  } finally {\n    delete requests[requestId];\n    $Array.forEach(chromesForLastError, function(c) {lastError.clear(c)});\n  }\n};\n\nfunction getExtensionStackTrace(call_name) {\n  var stack = $String.split(new Error().stack, '\\n');\n\n  // Remove stack frames before and after that weren't associated with the\n  // extension.\n  var id = processNatives.GetExtensionId();\n  while (stack.length > 0 && stack[0].indexOf(id) == -1)\n    stack.shift();\n  while (stack.length > 0 && stack[stack.length - 1].indexOf(id) == -1)\n    stack.pop();\n\n  return stack.join('\\n');\n}\n\nfunction prepareRequest(args, argSchemas) {\n  var request = {};\n  var argCount = args.length;\n\n  // Look for callback param.\n  if (argSchemas.length > 0 &&\n      argSchemas[argSchemas.length - 1].type == \"function\") {\n    request.callback = args[args.length - 1];\n    request.callbackSchema = argSchemas[argSchemas.length - 1];\n    --argCount;\n  }\n\n  request.args = [];\n  for (var k = 0; k < argCount; k++) {\n    request.args[k] = args[k];\n  }\n\n  return request;\n}\n\n// Send an API request and optionally register a callback.\n// |optArgs| is an object with optional parameters as follows:\n// - customCallback: a callback that should be called instead of the standard\n//   callback.\n// - nativeFunction: the v8 native function to handle the request, or\n//   StartRequest if missing.\n// - forIOThread: true if this function should be handled on the browser IO\n//   thread.\n// - preserveNullInObjects: true if it is safe for null to be in objects.\nfunction sendRequest(functionName, args, argSchemas, optArgs) {\n  calledSendRequest = true;\n  if (!optArgs)\n    optArgs = {};\n  var request = prepareRequest(args, argSchemas);\n  request.stack = getExtensionStackTrace();\n  if (optArgs.customCallback) {\n    request.customCallback = optArgs.customCallback;\n  }\n\n  var nativeFunction = optArgs.nativeFunction || natives.StartRequest;\n\n  var requestId = natives.GetNextRequestId();\n  request.id = requestId;\n  requests[requestId] = request;\n\n  var hasCallback = request.callback || optArgs.customCallback;\n  return nativeFunction(functionName,\n                        request.args,\n                        requestId,\n                        hasCallback,\n                        optArgs.forIOThread,\n                        optArgs.preserveNullInObjects);\n}\n\nfunction getCalledSendRequest() {\n  return calledSendRequest;\n}\n\nfunction clearCalledSendRequest() {\n  calledSendRequest = false;\n}\n\nexports.sendRequest = sendRequest;\nexports.getCalledSendRequest = getCalledSendRequest;\nexports.clearCalledSendRequest = clearCalledSendRequest;\n\n// Called by C++.\nexports.handleResponse = handleResponse;\n\n})"}
],
[
{"endColumn":2,"endLine":83,"scriptId":"182","startColumn":0,"startLine":0,"url":"extensions::lastError"},{"scriptSource":"(function(require, requireNative, exports, console, $Array, $Function, $JSON, $Object, $RegExp, $String) {'use strict';// Copyright (c) 2012 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nvar GetAvailability = requireNative('v8_context').GetAvailability;\nvar GetGlobal = requireNative('sendRequest').GetGlobal;\n\n// Utility for setting chrome.*.lastError.\n//\n// A utility here is useful for two reasons:\n//  1. For backwards compatibility we need to set chrome.extension.lastError,\n//     but not all contexts actually have access to the extension namespace.\n//  2. When calling across contexts, the global object that gets lastError set\n//     needs to be that of the caller. We force callers to explicitly specify\n//     the chrome object to try to prevent bugs here.\n\n/**\n * Sets the last error for |name| on |targetChrome| to |message| with an\n * optional |stack|.\n */\nfunction set(name, message, stack, targetChrome) {\n  var errorMessage = name + ': ' + message;\n  if (stack != null && stack != '')\n    errorMessage += '\\n' + stack;\n\n  if (!targetChrome)\n    throw new Error('No chrome object to set error: ' + errorMessage);\n  clear(targetChrome);  // in case somebody has set a sneaky getter/setter\n\n  var errorObject = { message: message };\n  if (GetAvailability('extension.lastError').is_available)\n    targetChrome.extension.lastError = errorObject;\n\n  assertRuntimeIsAvailable();\n  targetChrome.runtime.lastError = errorObject;\n};\n\n/**\n * Clears the last error on |targetChrome|.\n */\nfunction clear(targetChrome) {\n  if (!targetChrome)\n    throw new Error('No target chrome to clear error');\n\n  if (GetAvailability('extension.lastError').is_available)\n    delete targetChrome.extension.lastError;\n\n  assertRuntimeIsAvailable();\n  delete targetChrome.runtime.lastError;\n};\n\nfunction assertRuntimeIsAvailable() {\n  // chrome.runtime should always be available, but maybe it's disappeared for\n  // some reason? Add debugging for http://crbug.com/258526.\n  var runtimeAvailability = GetAvailability('runtime.lastError');\n  if (!runtimeAvailability.is_available) {\n    throw new Error('runtime.lastError is not available: ' +\n                    runtimeAvailability.message);\n  }\n  if (!chrome.runtime)\n    throw new Error('runtime namespace is null or undefined');\n}\n\n/**\n * Runs |callback(args)| with last error args as in set().\n *\n * The target chrome object is the global object's of the callback, so this\n * method won't work if the real callback has been wrapped (etc).\n */\nfunction run(name, message, stack, callback, args) {\n  var targetChrome = GetGlobal(callback).chrome;\n  set(name, message, stack, targetChrome);\n  try {\n    $Function.apply(callback, undefined, args);\n  } finally {\n    clear(targetChrome);\n  }\n}\n\nexports.clear = clear;\nexports.set = set;\nexports.run = run;\n\n})"}
],
[
{"endColumn":2,"endLine":157,"scriptId":"183","startColumn":0,"startLine":0,"url":"extensions::schemaUtils"},{"scriptSource":"(function(require, requireNative, exports, console, $Array, $Function, $JSON, $Object, $RegExp, $String) {'use strict';// Copyright (c) 2012 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n// Routines used to validate and normalize arguments.\n// TODO(benwells): unit test this file.\n\nvar JSONSchemaValidator = require('json_schema').JSONSchemaValidator;\n\nvar schemaValidator = new JSONSchemaValidator();\n\n// Validate arguments.\nfunction validate(args, parameterSchemas) {\n  if (args.length > parameterSchemas.length)\n    throw new Error(\"Too many arguments.\");\n  for (var i = 0; i < parameterSchemas.length; i++) {\n    if (i in args && args[i] !== null && args[i] !== undefined) {\n      schemaValidator.resetErrors();\n      schemaValidator.validate(args[i], parameterSchemas[i]);\n      if (schemaValidator.errors.length == 0)\n        continue;\n      var message = \"Invalid value for argument \" + (i + 1) + \". \";\n      for (var i = 0, err;\n          err = schemaValidator.errors[i]; i++) {\n        if (err.path) {\n          message += \"Property '\" + err.path + \"': \";\n        }\n        message += err.message;\n        message = message.substring(0, message.length - 1);\n        message += \", \";\n      }\n      message = message.substring(0, message.length - 2);\n      message += \".\";\n      throw new Error(message);\n    } else if (!parameterSchemas[i].optional) {\n      throw new Error(\"Parameter \" + (i + 1) + \" (\" +\n          parameterSchemas[i].name + \") is required.\");\n    }\n  }\n}\n\n// Generate all possible signatures for a given API function.\nfunction getSignatures(parameterSchemas) {\n  if (parameterSchemas.length === 0)\n    return [[]];\n  var signatures = [];\n  var remaining = getSignatures($Array.slice(parameterSchemas, 1));\n  for (var i = 0; i < remaining.length; i++)\n    $Array.push(signatures, $Array.concat([parameterSchemas[0]], remaining[i]))\n  if (parameterSchemas[0].optional)\n    return $Array.concat(signatures, remaining);\n  return signatures;\n};\n\n// Return true if arguments match a given signature's schema.\nfunction argumentsMatchSignature(args, candidateSignature) {\n  if (args.length != candidateSignature.length)\n    return false;\n  for (var i = 0; i < candidateSignature.length; i++) {\n    var argType =  JSONSchemaValidator.getType(args[i]);\n    if (!schemaValidator.isValidSchemaType(argType,\n        candidateSignature[i]))\n      return false;\n  }\n  return true;\n};\n\n// Finds the function signature for the given arguments.\nfunction resolveSignature(args, definedSignature) {\n  var candidateSignatures = getSignatures(definedSignature);\n  for (var i = 0; i < candidateSignatures.length; i++) {\n    if (argumentsMatchSignature(args, candidateSignatures[i]))\n      return candidateSignatures[i];\n  }\n  return null;\n};\n\n// Returns a string representing the defined signature of the API function.\n// Example return value for chrome.windows.getCurrent:\n// \"windows.getCurrent(optional object populate, function callback)\"\nfunction getParameterSignatureString(name, definedSignature) {\n  var getSchemaTypeString = function(schema) {\n    var schemaTypes = schemaValidator.getAllTypesForSchema(schema);\n    var typeName = schemaTypes.join(\" or \") + \" \" + schema.name;\n    if (schema.optional)\n      return \"optional \" + typeName;\n    return typeName;\n  };\n  var typeNames = definedSignature.map(getSchemaTypeString);\n  return name + \"(\" + typeNames.join(\", \") + \")\";\n};\n\n// Returns a string representing a call to an API function.\n// Example return value for call: chrome.windows.get(1, callback) is:\n// \"windows.get(int, function)\"\nfunction getArgumentSignatureString(name, args) {\n  var typeNames = args.map(JSONSchemaValidator.getType);\n  return name + \"(\" + typeNames.join(\", \") + \")\";\n};\n\n// Finds the correct signature for the given arguments, then validates the\n// arguments against that signature. Returns a 'normalized' arguments list\n// where nulls are inserted where optional parameters were omitted.\n// |args| is expected to be an array.\nfunction normalizeArgumentsAndValidate(args, funDef) {\n  if (funDef.allowAmbiguousOptionalArguments) {\n    validate(args, funDef.definition.parameters);\n    return args;\n  }\n  var definedSignature = funDef.definition.parameters;\n  var resolvedSignature = resolveSignature(args, definedSignature);\n  if (!resolvedSignature)\n    throw new Error(\"Invocation of form \" +\n        getArgumentSignatureString(funDef.name, args) +\n        \" doesn't match definition \" +\n        getParameterSignatureString(funDef.name, definedSignature));\n  validate(args, resolvedSignature);\n  var normalizedArgs = [];\n  var ai = 0;\n  for (var si = 0; si < definedSignature.length; si++) {\n    if (definedSignature[si] === resolvedSignature[ai])\n      $Array.push(normalizedArgs, args[ai++]);\n    else\n      $Array.push(normalizedArgs, null);\n  }\n  return normalizedArgs;\n};\n\n// Validates that a given schema for an API function is not ambiguous.\nfunction isFunctionSignatureAmbiguous(functionDef) {\n  if (functionDef.allowAmbiguousOptionalArguments)\n    return false;\n  var signaturesAmbiguous = function(signature1, signature2) {\n    if (signature1.length != signature2.length)\n      return false;\n    for (var i = 0; i < signature1.length; i++) {\n      if (!schemaValidator.checkSchemaOverlap(\n          signature1[i], signature2[i]))\n        return false;\n    }\n    return true;\n  };\n  var candidateSignatures = getSignatures(functionDef.parameters);\n  for (var i = 0; i < candidateSignatures.length; i++) {\n    for (var j = i + 1; j < candidateSignatures.length; j++) {\n      if (signaturesAmbiguous(candidateSignatures[i], candidateSignatures[j]))\n        return true;\n    }\n  }\n  return false;\n};\n\nexports.isFunctionSignatureAmbiguous = isFunctionSignatureAmbiguous;\nexports.normalizeArgumentsAndValidate = normalizeArgumentsAndValidate;\nexports.schemaValidator = schemaValidator;\nexports.validate = validate;\n\n})"}
],
[
{"endColumn":2,"endLine":517,"scriptId":"184","startColumn":0,"startLine":0,"url":"extensions::json_schema"},{"scriptSource":"(function(require, requireNative, exports, console, $Array, $Function, $JSON, $Object, $RegExp, $String) {'use strict';// Copyright (c) 2012 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n// -----------------------------------------------------------------------------\n// NOTE: If you change this file you need to touch renderer_resources.grd to\n// have your change take effect.\n// -----------------------------------------------------------------------------\n\n//==============================================================================\n// This file contains a class that implements a subset of JSON Schema.\n// See: http://www.json.com/json-schema-proposal/ for more details.\n//\n// The following features of JSON Schema are not implemented:\n// - requires\n// - unique\n// - disallow\n// - union types (but replaced with 'choices')\n//\n// The following properties are not applicable to the interface exposed by\n// this class:\n// - options\n// - readonly\n// - title\n// - description\n// - format\n// - default\n// - transient\n// - hidden\n//\n// There are also these departures from the JSON Schema proposal:\n// - function and undefined types are supported\n// - null counts as 'unspecified' for optional values\n// - added the 'choices' property, to allow specifying a list of possible types\n//   for a value\n// - by default an \"object\" typed schema does not allow additional properties.\n//   if present, \"additionalProperties\" is to be a schema against which all\n//   additional properties will be validated.\n//==============================================================================\n\nvar loadTypeSchema = require('utils').loadTypeSchema;\nvar CHECK = requireNative('logging').CHECK;\n\nfunction isInstanceOfClass(instance, className) {\n  while ((instance = instance.__proto__)) {\n    if (instance.constructor.name == className)\n      return true;\n  }\n  return false;\n}\n\nfunction isOptionalValue(value) {\n  return typeof(value) === 'undefined' || value === null;\n}\n\n/**\n * Validates an instance against a schema and accumulates errors. Usage:\n *\n * var validator = new JSONSchemaValidator();\n * validator.validate(inst, schema);\n * if (validator.errors.length == 0)\n *   console.log(\"Valid!\");\n * else\n *   console.log(validator.errors);\n *\n * The errors property contains a list of objects. Each object has two\n * properties: \"path\" and \"message\". The \"path\" property contains the path to\n * the key that had the problem, and the \"message\" property contains a sentence\n * describing the error.\n */\nfunction JSONSchemaValidator() {\n  this.errors = [];\n  this.types = [];\n}\n\nJSONSchemaValidator.messages = {\n  invalidEnum: \"Value must be one of: [*].\",\n  propertyRequired: \"Property is required.\",\n  unexpectedProperty: \"Unexpected property.\",\n  arrayMinItems: \"Array must have at least * items.\",\n  arrayMaxItems: \"Array must not have more than * items.\",\n  itemRequired: \"Item is required.\",\n  stringMinLength: \"String must be at least * characters long.\",\n  stringMaxLength: \"String must not be more than * characters long.\",\n  stringPattern: \"String must match the pattern: *.\",\n  numberFiniteNotNan: \"Value must not be *.\",\n  numberMinValue: \"Value must not be less than *.\",\n  numberMaxValue: \"Value must not be greater than *.\",\n  numberIntValue: \"Value must fit in a 32-bit signed integer.\",\n  numberMaxDecimal: \"Value must not have more than * decimal places.\",\n  invalidType: \"Expected '*' but got '*'.\",\n  invalidTypeIntegerNumber:\n      \"Expected 'integer' but got 'number', consider using Math.round().\",\n  invalidChoice: \"Value does not match any valid type choices.\",\n  invalidPropertyType: \"Missing property type.\",\n  schemaRequired: \"Schema value required.\",\n  unknownSchemaReference: \"Unknown schema reference: *.\",\n  notInstance: \"Object must be an instance of *.\"\n};\n\n/**\n * Builds an error message. Key is the property in the |errors| object, and\n * |opt_replacements| is an array of values to replace \"*\" characters with.\n */\nJSONSchemaValidator.formatError = function(key, opt_replacements) {\n  var message = this.messages[key];\n  if (opt_replacements) {\n    for (var i = 0; i < opt_replacements.length; i++) {\n      message = message.replace(\"*\", opt_replacements[i]);\n    }\n  }\n  return message;\n};\n\n/**\n * Classifies a value as one of the JSON schema primitive types. Note that we\n * don't explicitly disallow 'function', because we want to allow functions in\n * the input values.\n */\nJSONSchemaValidator.getType = function(value) {\n  var s = typeof value;\n\n  if (s == \"object\") {\n    if (value === null) {\n      return \"null\";\n    } else if (Object.prototype.toString.call(value) == \"[object Array]\") {\n      return \"array\";\n    } else if (typeof(ArrayBuffer) != \"undefined\" &&\n               value.constructor == ArrayBuffer) {\n      return \"binary\";\n    }\n  } else if (s == \"number\") {\n    if (value % 1 == 0) {\n      return \"integer\";\n    }\n  }\n\n  return s;\n};\n\n/**\n * Add types that may be referenced by validated schemas that reference them\n * with \"$ref\": <typeId>. Each type must be a valid schema and define an\n * \"id\" property.\n */\nJSONSchemaValidator.prototype.addTypes = function(typeOrTypeList) {\n  function addType(validator, type) {\n    if (!type.id)\n      throw new Error(\"Attempt to addType with missing 'id' property\");\n    validator.types[type.id] = type;\n  }\n\n  if (typeOrTypeList instanceof Array) {\n    for (var i = 0; i < typeOrTypeList.length; i++) {\n      addType(this, typeOrTypeList[i]);\n    }\n  } else {\n    addType(this, typeOrTypeList);\n  }\n}\n\n/**\n * Returns a list of strings of the types that this schema accepts.\n */\nJSONSchemaValidator.prototype.getAllTypesForSchema = function(schema) {\n  var schemaTypes = [];\n  if (schema.type)\n    $Array.push(schemaTypes, schema.type);\n  if (schema.choices) {\n    for (var i = 0; i < schema.choices.length; i++) {\n      var choiceTypes = this.getAllTypesForSchema(schema.choices[i]);\n      schemaTypes = $Array.concat(schemaTypes, choiceTypes);\n    }\n  }\n  var ref = schema['$ref'];\n  if (ref) {\n    var type = this.getOrAddType(ref);\n    CHECK(type, 'Could not find type ' + ref);\n    schemaTypes = $Array.concat(schemaTypes, this.getAllTypesForSchema(type));\n  }\n  return schemaTypes;\n};\n\nJSONSchemaValidator.prototype.getOrAddType = function(typeName) {\n  if (!this.types[typeName])\n    this.types[typeName] = loadTypeSchema(typeName);\n  return this.types[typeName];\n};\n\n/**\n * Returns true if |schema| would accept an argument of type |type|.\n */\nJSONSchemaValidator.prototype.isValidSchemaType = function(type, schema) {\n  if (type == 'any')\n    return true;\n\n  // TODO(kalman): I don't understand this code. How can type be \"null\"?\n  if (schema.optional && (type == \"null\" || type == \"undefined\"))\n    return true;\n\n  var schemaTypes = this.getAllTypesForSchema(schema);\n  for (var i = 0; i < schemaTypes.length; i++) {\n    if (schemaTypes[i] == \"any\" || type == schemaTypes[i])\n      return true;\n  }\n\n  return false;\n};\n\n/**\n * Returns true if there is a non-null argument that both |schema1| and\n * |schema2| would accept.\n */\nJSONSchemaValidator.prototype.checkSchemaOverlap = function(schema1, schema2) {\n  var schema1Types = this.getAllTypesForSchema(schema1);\n  for (var i = 0; i < schema1Types.length; i++) {\n    if (this.isValidSchemaType(schema1Types[i], schema2))\n      return true;\n  }\n  return false;\n};\n\n/**\n * Validates an instance against a schema. The instance can be any JavaScript\n * value and will be validated recursively. When this method returns, the\n * |errors| property will contain a list of errors, if any.\n */\nJSONSchemaValidator.prototype.validate = function(instance, schema, opt_path) {\n  var path = opt_path || \"\";\n\n  if (!schema) {\n    this.addError(path, \"schemaRequired\");\n    return;\n  }\n\n  // If this schema defines itself as reference type, save it in this.types.\n  if (schema.id)\n    this.types[schema.id] = schema;\n\n  // If the schema has an extends property, the instance must validate against\n  // that schema too.\n  if (schema.extends)\n    this.validate(instance, schema.extends, path);\n\n  // If the schema has a $ref property, the instance must validate against\n  // that schema too. It must be present in this.types to be referenced.\n  var ref = schema[\"$ref\"];\n  if (ref) {\n    if (!this.getOrAddType(ref))\n      this.addError(path, \"unknownSchemaReference\", [ ref ]);\n    else\n      this.validate(instance, this.getOrAddType(ref), path)\n  }\n\n  // If the schema has a choices property, the instance must validate against at\n  // least one of the items in that array.\n  if (schema.choices) {\n    this.validateChoices(instance, schema, path);\n    return;\n  }\n\n  // If the schema has an enum property, the instance must be one of those\n  // values.\n  if (schema.enum) {\n    if (!this.validateEnum(instance, schema, path))\n      return;\n  }\n\n  if (schema.type && schema.type != \"any\") {\n    if (!this.validateType(instance, schema, path))\n      return;\n\n    // Type-specific validation.\n    switch (schema.type) {\n      case \"object\":\n        this.validateObject(instance, schema, path);\n        break;\n      case \"array\":\n        this.validateArray(instance, schema, path);\n        break;\n      case \"string\":\n        this.validateString(instance, schema, path);\n        break;\n      case \"number\":\n      case \"integer\":\n        this.validateNumber(instance, schema, path);\n        break;\n    }\n  }\n};\n\n/**\n * Validates an instance against a choices schema. The instance must match at\n * least one of the provided choices.\n */\nJSONSchemaValidator.prototype.validateChoices =\n    function(instance, schema, path) {\n  var originalErrors = this.errors;\n\n  for (var i = 0; i < schema.choices.length; i++) {\n    this.errors = [];\n    this.validate(instance, schema.choices[i], path);\n    if (this.errors.length == 0) {\n      this.errors = originalErrors;\n      return;\n    }\n  }\n\n  this.errors = originalErrors;\n  this.addError(path, \"invalidChoice\");\n};\n\n/**\n * Validates an instance against a schema with an enum type. Populates the\n * |errors| property, and returns a boolean indicating whether the instance\n * validates.\n */\nJSONSchemaValidator.prototype.validateEnum = function(instance, schema, path) {\n  for (var i = 0; i < schema.enum.length; i++) {\n    if (instance === schema.enum[i])\n      return true;\n  }\n\n  this.addError(path, \"invalidEnum\", [schema.enum.join(\", \")]);\n  return false;\n};\n\n/**\n * Validates an instance against an object schema and populates the errors\n * property.\n */\nJSONSchemaValidator.prototype.validateObject =\n    function(instance, schema, path) {\n  if (schema.properties) {\n    for (var prop in schema.properties) {\n      // It is common in JavaScript to add properties to Object.prototype. This\n      // check prevents such additions from being interpreted as required\n      // schema properties.\n      // TODO(aa): If it ever turns out that we actually want this to work,\n      // there are other checks we could put here, like requiring that schema\n      // properties be objects that have a 'type' property.\n      if (!$Object.hasOwnProperty(schema.properties, prop))\n        continue;\n\n      var propPath = path ? path + \".\" + prop : prop;\n      if (schema.properties[prop] == undefined) {\n        this.addError(propPath, \"invalidPropertyType\");\n      } else if (prop in instance && !isOptionalValue(instance[prop])) {\n        this.validate(instance[prop], schema.properties[prop], propPath);\n      } else if (!schema.properties[prop].optional) {\n        this.addError(propPath, \"propertyRequired\");\n      }\n    }\n  }\n\n  // If \"instanceof\" property is set, check that this object inherits from\n  // the specified constructor (function).\n  if (schema.isInstanceOf) {\n    if (!isInstanceOfClass(instance, schema.isInstanceOf))\n      this.addError(propPath, \"notInstance\", [schema.isInstanceOf]);\n  }\n\n  // Exit early from additional property check if \"type\":\"any\" is defined.\n  if (schema.additionalProperties &&\n      schema.additionalProperties.type &&\n      schema.additionalProperties.type == \"any\") {\n    return;\n  }\n\n  // By default, additional properties are not allowed on instance objects. This\n  // can be overridden by setting the additionalProperties property to a schema\n  // which any additional properties must validate against.\n  for (var prop in instance) {\n    if (schema.properties && prop in schema.properties)\n      continue;\n\n    // Any properties inherited through the prototype are ignored.\n    if (!$Object.hasOwnProperty(instance, prop))\n      continue;\n\n    var propPath = path ? path + \".\" + prop : prop;\n    if (schema.additionalProperties)\n      this.validate(instance[prop], schema.additionalProperties, propPath);\n    else\n      this.addError(propPath, \"unexpectedProperty\");\n  }\n};\n\n/**\n * Validates an instance against an array schema and populates the errors\n * property.\n */\nJSONSchemaValidator.prototype.validateArray = function(instance, schema, path) {\n  var typeOfItems = JSONSchemaValidator.getType(schema.items);\n\n  if (typeOfItems == 'object') {\n    if (schema.minItems && instance.length < schema.minItems) {\n      this.addError(path, \"arrayMinItems\", [schema.minItems]);\n    }\n\n    if (typeof schema.maxItems != \"undefined\" &&\n        instance.length > schema.maxItems) {\n      this.addError(path, \"arrayMaxItems\", [schema.maxItems]);\n    }\n\n    // If the items property is a single schema, each item in the array must\n    // have that schema.\n    for (var i = 0; i < instance.length; i++) {\n      this.validate(instance[i], schema.items, path + \".\" + i);\n    }\n  } else if (typeOfItems == 'array') {\n    // If the items property is an array of schemas, each item in the array must\n    // validate against the corresponding schema.\n    for (var i = 0; i < schema.items.length; i++) {\n      var itemPath = path ? path + \".\" + i : String(i);\n      if (i in instance && !isOptionalValue(instance[i])) {\n        this.validate(instance[i], schema.items[i], itemPath);\n      } else if (!schema.items[i].optional) {\n        this.addError(itemPath, \"itemRequired\");\n      }\n    }\n\n    if (schema.additionalProperties) {\n      for (var i = schema.items.length; i < instance.length; i++) {\n        var itemPath = path ? path + \".\" + i : String(i);\n        this.validate(instance[i], schema.additionalProperties, itemPath);\n      }\n    } else {\n      if (instance.length > schema.items.length) {\n        this.addError(path, \"arrayMaxItems\", [schema.items.length]);\n      }\n    }\n  }\n};\n\n/**\n * Validates a string and populates the errors property.\n */\nJSONSchemaValidator.prototype.validateString =\n    function(instance, schema, path) {\n  if (schema.minLength && instance.length < schema.minLength)\n    this.addError(path, \"stringMinLength\", [schema.minLength]);\n\n  if (schema.maxLength && instance.length > schema.maxLength)\n    this.addError(path, \"stringMaxLength\", [schema.maxLength]);\n\n  if (schema.pattern && !schema.pattern.test(instance))\n    this.addError(path, \"stringPattern\", [schema.pattern]);\n};\n\n/**\n * Validates a number and populates the errors property. The instance is\n * assumed to be a number.\n */\nJSONSchemaValidator.prototype.validateNumber =\n    function(instance, schema, path) {\n  // Forbid NaN, +Infinity, and -Infinity.  Our APIs don't use them, and\n  // JSON serialization encodes them as 'null'.  Re-evaluate supporting\n  // them if we add an API that could reasonably take them as a parameter.\n  if (isNaN(instance) ||\n      instance == Number.POSITIVE_INFINITY ||\n      instance == Number.NEGATIVE_INFINITY )\n    this.addError(path, \"numberFiniteNotNan\", [instance]);\n\n  if (schema.minimum !== undefined && instance < schema.minimum)\n    this.addError(path, \"numberMinValue\", [schema.minimum]);\n\n  if (schema.maximum !== undefined && instance > schema.maximum)\n    this.addError(path, \"numberMaxValue\", [schema.maximum]);\n\n  // Check for integer values outside of -2^31..2^31-1.\n  if (schema.type === \"integer\" && (instance | 0) !== instance)\n    this.addError(path, \"numberIntValue\", []);\n\n  if (schema.maxDecimal && instance * Math.pow(10, schema.maxDecimal) % 1)\n    this.addError(path, \"numberMaxDecimal\", [schema.maxDecimal]);\n};\n\n/**\n * Validates the primitive type of an instance and populates the errors\n * property. Returns true if the instance validates, false otherwise.\n */\nJSONSchemaValidator.prototype.validateType = function(instance, schema, path) {\n  var actualType = JSONSchemaValidator.getType(instance);\n  if (schema.type == actualType ||\n      (schema.type == \"number\" && actualType == \"integer\")) {\n    return true;\n  } else if (schema.type == \"integer\" && actualType == \"number\") {\n    this.addError(path, \"invalidTypeIntegerNumber\");\n    return false;\n  } else {\n    this.addError(path, \"invalidType\", [schema.type, actualType]);\n    return false;\n  }\n};\n\n/**\n * Adds an error message. |key| is an index into the |messages| object.\n * |replacements| is an array of values to replace '*' characters in the\n * message.\n */\nJSONSchemaValidator.prototype.addError = function(path, key, replacements) {\n  $Array.push(this.errors, {\n    path: path,\n    message: JSONSchemaValidator.formatError(key, replacements)\n  });\n};\n\n/**\n * Resets errors to an empty list so you can call 'validate' again.\n */\nJSONSchemaValidator.prototype.resetErrors = function() {\n  this.errors = [];\n};\n\nexports.JSONSchemaValidator = JSONSchemaValidator;\n\n})"}
],
[
{"endColumn":2,"endLine":57,"scriptId":"185","startColumn":0,"startLine":0,"url":"extensions::utils"},{"scriptSource":"(function(require, requireNative, exports, console, $Array, $Function, $JSON, $Object, $RegExp, $String) {'use strict';// Copyright (c) 2012 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nvar schemaRegistry = requireNative('schema_registry');\nvar CHECK = requireNative('logging').CHECK;\nvar WARNING = requireNative('logging').WARNING;\n\n// An object forEach. Calls |f| with each (key, value) pair of |obj|, using\n// |self| as the target.\nfunction forEach(obj, f, self) {\n  for (var key in obj) {\n    if ($Object.hasOwnProperty(obj, key))\n      $Function.call(f, self, key, obj[key]);\n  }\n}\n\n// Assuming |array_of_dictionaries| is structured like this:\n// [{id: 1, ... }, {id: 2, ...}, ...], you can use\n// lookup(array_of_dictionaries, 'id', 2) to get the dictionary with id == 2.\nfunction lookup(array_of_dictionaries, field, value) {\n  var filter = function (dict) {return dict[field] == value;};\n  var matches = array_of_dictionaries.filter(filter);\n  if (matches.length == 0) {\n    return undefined;\n  } else if (matches.length == 1) {\n    return matches[0]\n  } else {\n    throw new Error(\"Failed lookup of field '\" + field + \"' with value '\" +\n                    value + \"'\");\n  }\n}\n\nfunction loadTypeSchema(typeName, defaultSchema) {\n  var parts = $String.split(typeName, '.');\n  if (parts.length == 1) {\n    if (defaultSchema == null) {\n      WARNING('Trying to reference \"' + typeName + '\" ' +\n              'with neither namespace nor default schema.');\n      return null;\n    }\n    var types = defaultSchema.types;\n  } else {\n    var schemaName = $Array.join($Array.slice(parts, 0, parts.length - 1), '.');\n    var types = schemaRegistry.GetSchema(schemaName).types;\n  }\n  for (var i = 0; i < types.length; ++i) {\n    if (types[i].id == typeName)\n      return types[i];\n  }\n  return null;\n}\n\nexports.forEach = forEach;\nexports.loadTypeSchema = loadTypeSchema;\nexports.lookup = lookup;\n\n})"}
],
[
{"endColumn":2,"endLine":34,"scriptId":"186","startColumn":0,"startLine":0,"url":"extensions::unload_event"},{"scriptSource":"(function(require, requireNative, exports, console, $Array, $Function, $JSON, $Object, $RegExp, $String) {'use strict';// Copyright 2013 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n// Special unload event. We don't use the DOM unload because that slows down\n// tab shutdown. On the other hand, onUnload might not always fire, since\n// Chrome will terminate renderers on shutdown (SuddenTermination).\n\n// Implement a primitive subset of the Event interface as needed, since if this\n// was to use the real event object there would be a circular dependency.\nvar listeners = [];\n\nexports.addListener = function(listener) {\n  $Array.push(listeners, listener);\n};\n\nexports.removeListener = function(listener) {\n  for (var i = 0; i < listeners.length; ++i) {\n    if (listeners[i] == listener) {\n      $Array.splice(listeners, i, 1);\n      return;\n    }\n  }\n};\n\nexports.wasDispatched = false;\n\n// dispatch() is called from C++.\nexports.dispatch = function() {\n  exports.wasDispatched = true;\n  for (var i = 0; i < listeners.length; ++i)\n    listeners[i]();\n};\n\n})"}
],
[
{"endColumn":2,"endLine":35,"scriptId":"187","startColumn":0,"startLine":0,"url":"extensions::messaging_utils"},{"scriptSource":"(function(require, requireNative, exports, console, $Array, $Function, $JSON, $Object, $RegExp, $String) {'use strict';// Copyright 2013 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n// Routines used to normalize arguments to messaging functions.\n\nfunction alignSendMessageArguments(args) {\n  // Align missing (optional) function arguments with the arguments that\n  // schema validation is expecting, e.g.\n  //   extension.sendRequest(req)     -> extension.sendRequest(null, req)\n  //   extension.sendRequest(req, cb) -> extension.sendRequest(null, req, cb)\n  if (!args || !args.length)\n    return null;\n  var lastArg = args.length - 1;\n\n  // responseCallback (last argument) is optional.\n  var responseCallback = null;\n  if (typeof(args[lastArg]) == 'function')\n    responseCallback = args[lastArg--];\n\n  // request (second argument) is required.\n  var request = args[lastArg--];\n\n  // targetId (first argument, extensionId in the manifest) is optional.\n  var targetId = null;\n  if (lastArg >= 0)\n    targetId = args[lastArg--];\n\n  if (lastArg != -1)\n    return null;\n  return [targetId, request, responseCallback];\n}\n\nexports.alignSendMessageArguments = alignSendMessageArguments;\n\n})"}
],
[
{"endColumn":2,"endLine":356,"isContentScript":true,"scriptId":"188","startColumn":0,"startLine":0,"url":"extensions::messaging"},{"scriptSource":"(function(require, requireNative, exports, console, $Array, $Function, $JSON, $Object, $RegExp, $String) {'use strict';// Copyright (c) 2012 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n// This contains unprivileged javascript APIs for extensions and apps.  It\n// can be loaded by any extension-related context, such as content scripts or\n// background pages. See user_script_slave.cc for script that is loaded by\n// content scripts only.\n\n  // TODO(kalman): factor requiring chrome out of here.\n  var chrome = requireNative('chrome').GetChrome();\n  var Event = require('event_bindings').Event;\n  var lastError = require('lastError');\n  var logActivity = requireNative('activityLogger');\n  var messagingNatives = requireNative('messaging_natives');\n  var processNatives = requireNative('process');\n  var unloadEvent = require('unload_event');\n  var messagingUtils = require('messaging_utils');\n\n  // The reserved channel name for the sendRequest/send(Native)Message APIs.\n  // Note: sendRequest is deprecated.\n  var kRequestChannel = \"chrome.extension.sendRequest\";\n  var kMessageChannel = \"chrome.runtime.sendMessage\";\n  var kNativeMessageChannel = \"chrome.runtime.sendNativeMessage\";\n\n  // Map of port IDs to port object.\n  var ports = {};\n\n  // Map of port IDs to unloadEvent listeners. Keep track of these to free the\n  // unloadEvent listeners when ports are closed.\n  var portReleasers = {};\n\n  // Change even to odd and vice versa, to get the other side of a given\n  // channel.\n  function getOppositePortId(portId) { return portId ^ 1; }\n\n  // Port object.  Represents a connection to another script context through\n  // which messages can be passed.\n  function Port(portId, opt_name) {\n    this.portId_ = portId;\n    this.name = opt_name;\n\n    var portSchema = {name: 'port', $ref: 'runtime.Port'};\n    var options = {unmanaged: true};\n    this.onDisconnect = new Event(null, [portSchema], options);\n    this.onMessage = new Event(\n        null,\n        [{name: 'message', type: 'any', optional: true}, portSchema],\n        options);\n  }\n\n  // Sends a message asynchronously to the context on the other end of this\n  // port.\n  Port.prototype.postMessage = function(msg) {\n    // JSON.stringify doesn't support a root object which is undefined.\n    if (msg === undefined)\n      msg = null;\n    msg = $JSON.stringify(msg);\n    if (msg === undefined) {\n      // JSON.stringify can fail with unserializable objects. Log an error and\n      // drop the message.\n      //\n      // TODO(kalman/mpcomplete): it would be better to do the same validation\n      // here that we do for runtime.sendMessage (and variants), i.e. throw an\n      // schema validation Error, but just maintain the old behaviour until\n      // there's a good reason not to (http://crbug.com/263077).\n      console.error('Illegal argument to Port.postMessage');\n      return;\n    }\n    messagingNatives.PostMessage(this.portId_, msg);\n  };\n\n  // Disconnects the port from the other end.\n  Port.prototype.disconnect = function() {\n    messagingNatives.CloseChannel(this.portId_, true);\n    this.destroy_();\n  };\n\n  Port.prototype.destroy_ = function() {\n    var portId = this.portId_;\n\n    this.onDisconnect.destroy_();\n    this.onMessage.destroy_();\n\n    messagingNatives.PortRelease(portId);\n    unloadEvent.removeListener(portReleasers[portId]);\n\n    delete ports[portId];\n    delete portReleasers[portId];\n  };\n\n  // Returns true if the specified port id is in this context. This is used by\n  // the C++ to avoid creating the javascript message for all the contexts that\n  // don't care about a particular message.\n  function hasPort(portId) {\n    return portId in ports;\n  };\n\n  // Hidden port creation function.  We don't want to expose an API that lets\n  // people add arbitrary port IDs to the port list.\n  function createPort(portId, opt_name) {\n    if (ports[portId])\n      throw new Error(\"Port '\" + portId + \"' already exists.\");\n    var port = new Port(portId, opt_name);\n    ports[portId] = port;\n    portReleasers[portId] = $Function.bind(messagingNatives.PortRelease,\n                                           this,\n                                           portId);\n    unloadEvent.addListener(portReleasers[portId]);\n    messagingNatives.PortAddRef(portId);\n    return port;\n  };\n\n  // Helper function for dispatchOnRequest.\n  function handleSendRequestError(isSendMessage,\n                                  responseCallbackPreserved,\n                                  sourceExtensionId,\n                                  targetExtensionId,\n                                  sourceUrl) {\n    var errorMsg = [];\n    var eventName = isSendMessage ? \"runtime.onMessage\" : \"extension.onRequest\";\n    if (isSendMessage && !responseCallbackPreserved) {\n      $Array.push(errorMsg,\n          \"The chrome.\" + eventName + \" listener must return true if you \" +\n          \"want to send a response after the listener returns\");\n    } else {\n      $Array.push(errorMsg,\n          \"Cannot send a response more than once per chrome.\" + eventName +\n          \" listener per document\");\n    }\n    $Array.push(errorMsg, \"(message was sent by extension\" + sourceExtensionId);\n    if (sourceExtensionId != \"\" && sourceExtensionId != targetExtensionId)\n      $Array.push(errorMsg, \"for extension \" + targetExtensionId);\n    if (sourceUrl != \"\")\n      $Array.push(errorMsg, \"for URL \" + sourceUrl);\n    lastError.set(eventName, errorMsg.join(\" \") + \").\", null, chrome);\n  }\n\n  // Helper function for dispatchOnConnect\n  function dispatchOnRequest(portId, channelName, sender,\n                             sourceExtensionId, targetExtensionId, sourceUrl,\n                             isExternal) {\n    var isSendMessage = channelName == kMessageChannel;\n    var requestEvent = null;\n    if (isSendMessage) {\n      if (chrome.runtime) {\n        requestEvent = isExternal ? chrome.runtime.onMessageExternal\n                                  : chrome.runtime.onMessage;\n      }\n    } else {\n      if (chrome.extension) {\n        requestEvent = isExternal ? chrome.extension.onRequestExternal\n                                  : chrome.extension.onRequest;\n      }\n    }\n    if (!requestEvent)\n      return false;\n    if (!requestEvent.hasListeners())\n      return false;\n    var port = createPort(portId, channelName);\n    port.onMessage.addListener(function(request) {\n      var responseCallbackPreserved = false;\n      var responseCallback = function(response) {\n        if (port) {\n          port.postMessage(response);\n          port.destroy_();\n          port = null;\n        } else {\n          // We nulled out port when sending the response, and now the page\n          // is trying to send another response for the same request.\n          handleSendRequestError(isSendMessage, responseCallbackPreserved,\n                                 sourceExtensionId, targetExtensionId);\n        }\n      };\n      // In case the extension never invokes the responseCallback, and also\n      // doesn't keep a reference to it, we need to clean up the port. Do\n      // so by attaching to the garbage collection of the responseCallback\n      // using some native hackery.\n      messagingNatives.BindToGC(responseCallback, function() {\n        if (port) {\n          port.destroy_();\n          port = null;\n        }\n      });\n      if (!isSendMessage) {\n        requestEvent.dispatch(request, sender, responseCallback);\n      } else {\n        var rv = requestEvent.dispatch(request, sender, responseCallback);\n        responseCallbackPreserved =\n            rv && rv.results && rv.results.indexOf(true) > -1;\n        if (!responseCallbackPreserved && port) {\n          // If they didn't access the response callback, they're not\n          // going to send a response, so clean up the port immediately.\n          port.destroy_();\n          port = null;\n        }\n      }\n    });\n    var eventName = (isSendMessage ?\n          (isExternal ?\n              \"runtime.onMessageExternal\" : \"runtime.onMessage\") :\n          (isExternal ?\n              \"extension.onRequestExternal\" : \"extension.onRequest\"));\n    logActivity.LogEvent(targetExtensionId,\n                         eventName,\n                         [sourceExtensionId, sourceUrl]);\n    return true;\n  }\n\n  // Called by native code when a channel has been opened to this context.\n  function dispatchOnConnect(portId,\n                             channelName,\n                             sourceTab,\n                             sourceExtensionId,\n                             targetExtensionId,\n                             sourceUrl) {\n    // Only create a new Port if someone is actually listening for a connection.\n    // In addition to being an optimization, this also fixes a bug where if 2\n    // channels were opened to and from the same process, closing one would\n    // close both.\n    var extensionId = processNatives.GetExtensionId();\n    if (targetExtensionId != extensionId)\n      return false;  // not for us\n\n    if (ports[getOppositePortId(portId)])\n      return false;  // this channel was opened by us, so ignore it\n\n    // Determine whether this is coming from another extension, so we can use\n    // the right event.\n    var isExternal = sourceExtensionId != extensionId;\n\n    var sender = {};\n    if (sourceExtensionId != '')\n      sender.id = sourceExtensionId;\n    if (sourceUrl)\n      sender.url = sourceUrl;\n    if (sourceTab)\n      sender.tab = sourceTab;\n\n    // Special case for sendRequest/onRequest and sendMessage/onMessage.\n    if (channelName == kRequestChannel || channelName == kMessageChannel) {\n      return dispatchOnRequest(portId, channelName, sender,\n                               sourceExtensionId, targetExtensionId, sourceUrl,\n                               isExternal);\n    }\n\n    var connectEvent = null;\n    if (chrome.runtime) {\n      connectEvent = isExternal ? chrome.runtime.onConnectExternal\n                                : chrome.runtime.onConnect;\n    }\n    if (!connectEvent)\n      return false;\n    if (!connectEvent.hasListeners())\n      return false;\n\n    var port = createPort(portId, channelName);\n    port.sender = sender;\n    if (processNatives.manifestVersion < 2)\n      port.tab = port.sender.tab;\n\n    var eventName = (isExternal ?\n        \"runtime.onConnectExternal\" : \"runtime.onConnect\");\n    connectEvent.dispatch(port);\n    logActivity.LogEvent(targetExtensionId,\n                         eventName,\n                         [sourceExtensionId]);\n    return true;\n  };\n\n  // Called by native code when a channel has been closed.\n  function dispatchOnDisconnect(portId, errorMessage) {\n    var port = ports[portId];\n    if (port) {\n      // Update the renderer's port bookkeeping, without notifying the browser.\n      messagingNatives.CloseChannel(portId, false);\n      if (errorMessage)\n        lastError.set('Port', errorMessage, null, chrome);\n      try {\n        port.onDisconnect.dispatch(port);\n      } finally {\n        port.destroy_();\n        lastError.clear(chrome);\n      }\n    }\n  };\n\n  // Called by native code when a message has been sent to the given port.\n  function dispatchOnMessage(msg, portId) {\n    var port = ports[portId];\n    if (port) {\n      if (msg)\n        msg = $JSON.parse(msg);\n      port.onMessage.dispatch(msg, port);\n    }\n  };\n\n  // Shared implementation used by tabs.sendMessage and runtime.sendMessage.\n  function sendMessageImpl(port, request, responseCallback) {\n    if (port.name != kNativeMessageChannel)\n      port.postMessage(request);\n\n    if (port.name == kMessageChannel && !responseCallback) {\n      // TODO(mpcomplete): Do this for the old sendRequest API too, after\n      // verifying it doesn't break anything.\n      // Go ahead and disconnect immediately if the sender is not expecting\n      // a response.\n      port.disconnect();\n      return;\n    }\n\n    // Ensure the callback exists for the older sendRequest API.\n    if (!responseCallback)\n      responseCallback = function() {};\n\n    port.onDisconnect.addListener(function() {\n      // For onDisconnects, we only notify the callback if there was an error.\n      try {\n        if (chrome.runtime && chrome.runtime.lastError)\n          responseCallback();\n      } finally {\n        port = null;\n      }\n    });\n    port.onMessage.addListener(function(response) {\n      try {\n        responseCallback(response);\n      } finally {\n        port.disconnect();\n        port = null;\n      }\n    });\n  };\n\n  function sendMessageUpdateArguments(functionName) {\n    var args = $Array.slice(arguments, 1);  // skip functionName\n    var alignedArgs = messagingUtils.alignSendMessageArguments(args);\n    if (!alignedArgs)\n      throw new Error('Invalid arguments to ' + functionName + '.');\n    return alignedArgs;\n  }\n\nexports.kRequestChannel = kRequestChannel;\nexports.kMessageChannel = kMessageChannel;\nexports.kNativeMessageChannel = kNativeMessageChannel;\nexports.Port = Port;\nexports.createPort = createPort;\nexports.sendMessageImpl = sendMessageImpl;\nexports.sendMessageUpdateArguments = sendMessageUpdateArguments;\n\n// For C++ code to call.\nexports.hasPort = hasPort;\nexports.dispatchOnConnect = dispatchOnConnect;\nexports.dispatchOnDisconnect = dispatchOnDisconnect;\nexports.dispatchOnMessage = dispatchOnMessage;\n\n})"}
],
[
{"endColumn":2,"endLine":500,"isContentScript":true,"scriptId":"189","startColumn":0,"startLine":0,"url":"extensions::event_bindings"},{"scriptSource":"(function(require, requireNative, exports, console, $Array, $Function, $JSON, $Object, $RegExp, $String) {'use strict';// Copyright (c) 2012 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n  var eventNatives = requireNative('event_natives');\n  var logging = requireNative('logging');\n  var schemaRegistry = requireNative('schema_registry');\n  var sendRequest = require('sendRequest').sendRequest;\n  var utils = require('utils');\n  var validate = require('schemaUtils').validate;\n  var unloadEvent = require('unload_event');\n\n  // Schemas for the rule-style functions on the events API that\n  // only need to be generated occasionally, so populate them lazily.\n  var ruleFunctionSchemas = {\n    // These values are set lazily:\n    // addRules: {},\n    // getRules: {},\n    // removeRules: {}\n  };\n\n  // This function ensures that |ruleFunctionSchemas| is populated.\n  function ensureRuleSchemasLoaded() {\n    if (ruleFunctionSchemas.addRules)\n      return;\n    var eventsSchema = schemaRegistry.GetSchema(\"events\");\n    var eventType = utils.lookup(eventsSchema.types, 'id', 'events.Event');\n\n    ruleFunctionSchemas.addRules =\n        utils.lookup(eventType.functions, 'name', 'addRules');\n    ruleFunctionSchemas.getRules =\n        utils.lookup(eventType.functions, 'name', 'getRules');\n    ruleFunctionSchemas.removeRules =\n        utils.lookup(eventType.functions, 'name', 'removeRules');\n  }\n\n  // A map of event names to the event object that is registered to that name.\n  var attachedNamedEvents = {};\n\n  // An array of all attached event objects, used for detaching on unload.\n  var allAttachedEvents = [];\n\n  // A map of functions that massage event arguments before they are dispatched.\n  // Key is event name, value is function.\n  var eventArgumentMassagers = {};\n\n  // An attachment strategy for events that aren't attached to the browser.\n  // This applies to events with the \"unmanaged\" option and events without\n  // names.\n  var NullAttachmentStrategy = function(event) {\n    this.event_ = event;\n  };\n  NullAttachmentStrategy.prototype.onAddedListener =\n      function(listener) {\n  };\n  NullAttachmentStrategy.prototype.onRemovedListener =\n      function(listener) {\n  };\n  NullAttachmentStrategy.prototype.detach = function(manual) {\n  };\n  NullAttachmentStrategy.prototype.getListenersByIDs = function(ids) {\n    // |ids| is for filtered events only.\n    return this.event_.listeners_;\n  };\n\n  // Handles adding/removing/dispatching listeners for unfiltered events.\n  var UnfilteredAttachmentStrategy = function(event) {\n    this.event_ = event;\n  };\n\n  UnfilteredAttachmentStrategy.prototype.onAddedListener =\n      function(listener) {\n    // Only attach / detach on the first / last listener removed.\n    if (this.event_.listeners_.length == 0)\n      eventNatives.AttachEvent(this.event_.eventName_);\n  };\n\n  UnfilteredAttachmentStrategy.prototype.onRemovedListener =\n      function(listener) {\n    if (this.event_.listeners_.length == 0)\n      this.detach(true);\n  };\n\n  UnfilteredAttachmentStrategy.prototype.detach = function(manual) {\n    eventNatives.DetachEvent(this.event_.eventName_, manual);\n  };\n\n  UnfilteredAttachmentStrategy.prototype.getListenersByIDs = function(ids) {\n    // |ids| is for filtered events only.\n    return this.event_.listeners_;\n  };\n\n  var FilteredAttachmentStrategy = function(event) {\n    this.event_ = event;\n    this.listenerMap_ = {};\n  };\n\n  FilteredAttachmentStrategy.idToEventMap = {};\n\n  FilteredAttachmentStrategy.prototype.onAddedListener = function(listener) {\n    var id = eventNatives.AttachFilteredEvent(this.event_.eventName_,\n                                              listener.filters || {});\n    if (id == -1)\n      throw new Error(\"Can't add listener\");\n    listener.id = id;\n    this.listenerMap_[id] = listener;\n    FilteredAttachmentStrategy.idToEventMap[id] = this.event_;\n  };\n\n  FilteredAttachmentStrategy.prototype.onRemovedListener = function(listener) {\n    this.detachListener(listener, true);\n  };\n\n  FilteredAttachmentStrategy.prototype.detachListener =\n      function(listener, manual) {\n    if (listener.id == undefined)\n      throw new Error(\"listener.id undefined - '\" + listener + \"'\");\n    var id = listener.id;\n    delete this.listenerMap_[id];\n    delete FilteredAttachmentStrategy.idToEventMap[id];\n    eventNatives.DetachFilteredEvent(id, manual);\n  };\n\n  FilteredAttachmentStrategy.prototype.detach = function(manual) {\n    for (var i in this.listenerMap_)\n      this.detachListener(this.listenerMap_[i], manual);\n  };\n\n  FilteredAttachmentStrategy.prototype.getListenersByIDs = function(ids) {\n    var result = [];\n    for (var i = 0; i < ids.length; i++)\n      $Array.push(result, this.listenerMap_[ids[i]]);\n    return result;\n  };\n\n  function parseEventOptions(opt_eventOptions) {\n    function merge(dest, src) {\n      for (var k in src) {\n        if (!$Object.hasOwnProperty(dest, k)) {\n          dest[k] = src[k];\n        }\n      }\n    }\n\n    var options = opt_eventOptions || {};\n    merge(options, {\n      // Event supports adding listeners with filters (\"filtered events\"), for\n      // example as used in the webNavigation API.\n      //\n      // event.addListener(listener, [filter1, filter2]);\n      supportsFilters: false,\n\n      // Events supports vanilla events. Most APIs use these.\n      //\n      // event.addListener(listener);\n      supportsListeners: true,\n\n      // Event supports adding rules (\"declarative events\") rather than\n      // listeners, for example as used in the declarativeWebRequest API.\n      //\n      // event.addRules([rule1, rule2]);\n      supportsRules: false,\n\n      // Event is unmanaged in that the browser has no knowledge of its\n      // existence; it's never invoked, doesn't keep the renderer alive, and\n      // the bindings system has no knowledge of it.\n      //\n      // Both events created by user code (new chrome.Event()) and messaging\n      // events are unmanaged, though in the latter case the browser *does*\n      // interact indirectly with them via IPCs written by hand.\n      unmanaged: false,\n    });\n    return options;\n  };\n\n  // Event object.  If opt_eventName is provided, this object represents\n  // the unique instance of that named event, and dispatching an event\n  // with that name will route through this object's listeners. Note that\n  // opt_eventName is required for events that support rules.\n  //\n  // Example:\n  //   var Event = require('event_bindings').Event;\n  //   chrome.tabs.onChanged = new Event(\"tab-changed\");\n  //   chrome.tabs.onChanged.addListener(function(data) { alert(data); });\n  //   Event.dispatch(\"tab-changed\", \"hi\");\n  // will result in an alert dialog that says 'hi'.\n  //\n  // If opt_eventOptions exists, it is a dictionary that contains the boolean\n  // entries \"supportsListeners\" and \"supportsRules\".\n  var Event = function(opt_eventName, opt_argSchemas, opt_eventOptions) {\n    this.eventName_ = opt_eventName;\n    this.argSchemas_ = opt_argSchemas;\n    this.listeners_ = [];\n    this.eventOptions_ = parseEventOptions(opt_eventOptions);\n\n    if (!this.eventName_) {\n      if (this.eventOptions_.supportsRules)\n        throw new Error(\"Events that support rules require an event name.\");\n      // Events without names cannot be managed by the browser by definition\n      // (the browser has no way of identifying them).\n      this.eventOptions_.unmanaged = true;\n    }\n\n    // Track whether the event has been destroyed to help track down the cause\n    // of http://crbug.com/258526.\n    // This variable will eventually hold the stack trace of the destroy call.\n    // TODO(kalman): Delete this and replace with more sound logic that catches\n    // when events are used without being *attached*.\n    this.destroyed_ = null;\n\n    if (this.eventOptions_.unmanaged)\n      this.attachmentStrategy_ = new NullAttachmentStrategy(this);\n    else if (this.eventOptions_.supportsFilters)\n      this.attachmentStrategy_ = new FilteredAttachmentStrategy(this);\n    else\n      this.attachmentStrategy_ = new UnfilteredAttachmentStrategy(this);\n  };\n\n  // callback is a function(args, dispatch). args are the args we receive from\n  // dispatchEvent(), and dispatch is a function(args) that dispatches args to\n  // its listeners.\n  function registerArgumentMassager(name, callback) {\n    if (eventArgumentMassagers[name])\n      throw new Error(\"Massager already registered for event: \" + name);\n    eventArgumentMassagers[name] = callback;\n  }\n\n  // Dispatches a named event with the given argument array. The args array is\n  // the list of arguments that will be sent to the event callback.\n  function dispatchEvent(name, args, filteringInfo) {\n    var listenerIDs = [];\n\n    if (filteringInfo)\n      listenerIDs = eventNatives.MatchAgainstEventFilter(name, filteringInfo);\n\n    var event = attachedNamedEvents[name];\n    if (!event)\n      return;\n\n    var dispatchArgs = function(args) {\n      var result = event.dispatch_(args, listenerIDs);\n      if (result)\n        logging.DCHECK(!result.validationErrors, result.validationErrors);\n      return result;\n    };\n\n    if (eventArgumentMassagers[name])\n      eventArgumentMassagers[name](args, dispatchArgs);\n    else\n      dispatchArgs(args);\n  }\n\n  // Registers a callback to be called when this event is dispatched.\n  Event.prototype.addListener = function(cb, filters) {\n    if (!this.eventOptions_.supportsListeners)\n      throw new Error(\"This event does not support listeners.\");\n    if (this.eventOptions_.maxListeners &&\n        this.getListenerCount() >= this.eventOptions_.maxListeners) {\n      throw new Error(\"Too many listeners for \" + this.eventName_);\n    }\n    if (filters) {\n      if (!this.eventOptions_.supportsFilters)\n        throw new Error(\"This event does not support filters.\");\n      if (filters.url && !(filters.url instanceof Array))\n        throw new Error(\"filters.url should be an array.\");\n      if (filters.serviceType &&\n          !(typeof filters.serviceType === 'string')) {\n        throw new Error(\"filters.serviceType should be a string.\")\n      }\n    }\n    var listener = {callback: cb, filters: filters};\n    this.attach_(listener);\n    $Array.push(this.listeners_, listener);\n  };\n\n  Event.prototype.attach_ = function(listener) {\n    this.attachmentStrategy_.onAddedListener(listener);\n\n    if (this.listeners_.length == 0) {\n      allAttachedEvents[allAttachedEvents.length] = this;\n      if (this.eventName_) {\n        if (attachedNamedEvents[this.eventName_]) {\n          throw new Error(\"Event '\" + this.eventName_ +\n                          \"' is already attached.\");\n        }\n        attachedNamedEvents[this.eventName_] = this;\n      }\n    }\n  };\n\n  // Unregisters a callback.\n  Event.prototype.removeListener = function(cb) {\n    if (!this.eventOptions_.supportsListeners)\n      throw new Error(\"This event does not support listeners.\");\n\n    var idx = this.findListener_(cb);\n    if (idx == -1)\n      return;\n\n    var removedListener = $Array.splice(this.listeners_, idx, 1)[0];\n    this.attachmentStrategy_.onRemovedListener(removedListener);\n\n    if (this.listeners_.length == 0) {\n      var i = allAttachedEvents.indexOf(this);\n      if (i >= 0)\n        delete allAttachedEvents[i];\n      if (this.eventName_) {\n        if (!attachedNamedEvents[this.eventName_])\n          throw new Error(\"Event '\" + this.eventName_ + \"' is not attached.\");\n        delete attachedNamedEvents[this.eventName_];\n      }\n    }\n  };\n\n  // Test if the given callback is registered for this event.\n  Event.prototype.hasListener = function(cb) {\n    if (!this.eventOptions_.supportsListeners)\n      throw new Error(\"This event does not support listeners.\");\n    return this.findListener_(cb) > -1;\n  };\n\n  // Test if any callbacks are registered for this event.\n  Event.prototype.hasListeners = function() {\n    return this.getListenerCount() > 0;\n  };\n\n  // Return the number of listeners on this event.\n  Event.prototype.getListenerCount = function() {\n    if (!this.eventOptions_.supportsListeners)\n      throw new Error(\"This event does not support listeners.\");\n    return this.listeners_.length;\n  };\n\n  // Returns the index of the given callback if registered, or -1 if not\n  // found.\n  Event.prototype.findListener_ = function(cb) {\n    for (var i = 0; i < this.listeners_.length; i++) {\n      if (this.listeners_[i].callback == cb) {\n        return i;\n      }\n    }\n\n    return -1;\n  };\n\n  Event.prototype.dispatch_ = function(args, listenerIDs) {\n    if (this.destroyed_) {\n      throw new Error(this.eventName_ + ' was already destroyed at: ' +\n                      this.destroyed_);\n    }\n    if (!this.eventOptions_.supportsListeners)\n      throw new Error(\"This event does not support listeners.\");\n\n    if (this.argSchemas_ && logging.DCHECK_IS_ON()) {\n      try {\n        validate(args, this.argSchemas_);\n      } catch (e) {\n        e.message += ' in ' + this.eventName_;\n        throw e;\n      }\n    }\n\n    // Make a copy of the listeners in case the listener list is modified\n    // while dispatching the event.\n    var listeners = $Array.slice(\n        this.attachmentStrategy_.getListenersByIDs(listenerIDs));\n\n    var results = [];\n    for (var i = 0; i < listeners.length; i++) {\n      try {\n        var result = this.dispatchToListener(listeners[i].callback, args);\n        if (result !== undefined)\n          $Array.push(results, result);\n      } catch (e) {\n        console.error('Error in event handler for ' +\n                      (this.eventName_ ? this.eventName_ : '(unknown)') +\n                      ': ' + e.stack);\n      }\n    }\n    if (results.length)\n      return {results: results};\n  }\n\n  // Can be overridden to support custom dispatching.\n  Event.prototype.dispatchToListener = function(callback, args) {\n    return $Function.apply(callback, null, args);\n  }\n\n  // Dispatches this event object to all listeners, passing all supplied\n  // arguments to this function each listener.\n  Event.prototype.dispatch = function(varargs) {\n    return this.dispatch_($Array.slice(arguments), undefined);\n  };\n\n  // Detaches this event object from its name.\n  Event.prototype.detach_ = function() {\n    this.attachmentStrategy_.detach(false);\n  };\n\n  Event.prototype.destroy_ = function() {\n    this.listeners_.length = 0;\n    this.detach_();\n    this.destroyed_ = new Error().stack;\n  };\n\n  Event.prototype.addRules = function(rules, opt_cb) {\n    if (!this.eventOptions_.supportsRules)\n      throw new Error(\"This event does not support rules.\");\n\n    // Takes a list of JSON datatype identifiers and returns a schema fragment\n    // that verifies that a JSON object corresponds to an array of only these\n    // data types.\n    function buildArrayOfChoicesSchema(typesList) {\n      return {\n        'type': 'array',\n        'items': {\n          'choices': typesList.map(function(el) {return {'$ref': el};})\n        }\n      };\n    };\n\n    // Validate conditions and actions against specific schemas of this\n    // event object type.\n    // |rules| is an array of JSON objects that follow the Rule type of the\n    // declarative extension APIs. |conditions| is an array of JSON type\n    // identifiers that are allowed to occur in the conditions attribute of each\n    // rule. Likewise, |actions| is an array of JSON type identifiers that are\n    // allowed to occur in the actions attribute of each rule.\n    function validateRules(rules, conditions, actions) {\n      var conditionsSchema = buildArrayOfChoicesSchema(conditions);\n      var actionsSchema = buildArrayOfChoicesSchema(actions);\n      $Array.forEach(rules, function(rule) {\n        validate([rule.conditions], [conditionsSchema]);\n        validate([rule.actions], [actionsSchema]);\n      });\n    };\n\n    if (!this.eventOptions_.conditions || !this.eventOptions_.actions) {\n      throw new Error('Event ' + this.eventName_ + ' misses conditions or ' +\n                      'actions in the API specification.');\n    }\n\n    validateRules(rules,\n                  this.eventOptions_.conditions,\n                  this.eventOptions_.actions);\n\n    ensureRuleSchemasLoaded();\n    // We remove the first parameter from the validation to give the user more\n    // meaningful error messages.\n    validate([rules, opt_cb],\n             $Array.splice(\n                 $Array.slice(ruleFunctionSchemas.addRules.parameters), 1));\n    sendRequest(\"events.addRules\", [this.eventName_, rules, opt_cb],\n                ruleFunctionSchemas.addRules.parameters);\n  }\n\n  Event.prototype.removeRules = function(ruleIdentifiers, opt_cb) {\n    if (!this.eventOptions_.supportsRules)\n      throw new Error(\"This event does not support rules.\");\n    ensureRuleSchemasLoaded();\n    // We remove the first parameter from the validation to give the user more\n    // meaningful error messages.\n    validate([ruleIdentifiers, opt_cb],\n             $Array.splice(\n                 $Array.slice(ruleFunctionSchemas.removeRules.parameters), 1));\n    sendRequest(\"events.removeRules\",\n                [this.eventName_, ruleIdentifiers, opt_cb],\n                ruleFunctionSchemas.removeRules.parameters);\n  }\n\n  Event.prototype.getRules = function(ruleIdentifiers, cb) {\n    if (!this.eventOptions_.supportsRules)\n      throw new Error(\"This event does not support rules.\");\n    ensureRuleSchemasLoaded();\n    // We remove the first parameter from the validation to give the user more\n    // meaningful error messages.\n    validate([ruleIdentifiers, cb],\n             $Array.splice(\n                 $Array.slice(ruleFunctionSchemas.getRules.parameters), 1));\n\n    sendRequest(\"events.getRules\",\n                [this.eventName_, ruleIdentifiers, cb],\n                ruleFunctionSchemas.getRules.parameters);\n  }\n\n  unloadEvent.addListener(function() {\n    for (var i = 0; i < allAttachedEvents.length; ++i) {\n      var event = allAttachedEvents[i];\n      if (event)\n        event.detach_();\n    }\n  });\n\n  // NOTE: Event is (lazily) exposed as chrome.Event from dispatcher.cc.\n  exports.Event = Event;\n\n  exports.dispatchEvent = dispatchEvent;\n  exports.parseEventOptions = parseEventOptions;\n  exports.registerArgumentMassager = registerArgumentMassager;\n\n})"}
],
[
{"endColumn":2,"endLine":166,"isContentScript":true,"scriptId":"190","startColumn":0,"startLine":0,"url":"extensions::sendRequest"},{"scriptSource":"(function(require, requireNative, exports, console, $Array, $Function, $JSON, $Object, $RegExp, $String) {'use strict';// Copyright (c) 2012 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nvar lastError = require('lastError');\nvar logging = requireNative('logging');\nvar natives = requireNative('sendRequest');\nvar processNatives = requireNative('process');\nvar validate = require('schemaUtils').validate;\n\n// All outstanding requests from sendRequest().\nvar requests = {};\n\n// Used to prevent double Activity Logging for API calls that use both custom\n// bindings and ExtensionFunctions (via sendRequest).\nvar calledSendRequest = false;\n\n// Runs a user-supplied callback safely.\nfunction safeCallbackApply(name, request, callback, args) {\n  try {\n    $Function.apply(callback, request, args);\n  } catch (e) {\n    var errorMessage = \"Error in response to \" + name + \": \" + e;\n    if (request.stack && request.stack != '')\n      errorMessage += \"\\n\" + request.stack;\n    console.error(errorMessage);\n  }\n}\n\n// Callback handling.\nfunction handleResponse(requestId, name, success, responseList, error) {\n  // The chrome objects we will set lastError on. Really we should only be\n  // setting this on the callback's chrome object, but set on ours too since\n  // it's conceivable that something relies on that.\n  var chromesForLastError = [chrome];\n\n  try {\n    var request = requests[requestId];\n    logging.DCHECK(request != null);\n\n    // lastError needs to be set on the caller's chrome object no matter what,\n    // though chances are it's the same as ours (it will be different when\n    // calling API methods on other contexts).\n    if (request.callback) {\n      var chromeForCallback = natives.GetGlobal(request.callback).chrome;\n      if (chromeForCallback != chrome)\n        $Array.push(chromesForLastError, chromeForCallback);\n    }\n\n    $Array.forEach(chromesForLastError, function(c) {lastError.clear(c)});\n    if (!success) {\n      if (!error)\n        error = \"Unknown error.\";\n      $Array.forEach(chromesForLastError, function(c) {\n        lastError.set(name, error, request.stack, c)\n      });\n    }\n\n    if (request.customCallback) {\n      safeCallbackApply(name,\n                        request,\n                        request.customCallback,\n                        $Array.concat([name, request], responseList));\n    }\n\n    if (request.callback) {\n      // Validate callback in debug only -- and only when the\n      // caller has provided a callback. Implementations of api\n      // calls may not return data if they observe the caller\n      // has not provided a callback.\n      if (logging.DCHECK_IS_ON() && !error) {\n        if (!request.callbackSchema.parameters)\n          throw new Error(name + \": no callback schema defined\");\n        validate(responseList, request.callbackSchema.parameters);\n      }\n      safeCallbackApply(name, request, request.callback, responseList);\n    }\n  } finally {\n    delete requests[requestId];\n    $Array.forEach(chromesForLastError, function(c) {lastError.clear(c)});\n  }\n};\n\nfunction getExtensionStackTrace(call_name) {\n  var stack = $String.split(new Error().stack, '\\n');\n\n  // Remove stack frames before and after that weren't associated with the\n  // extension.\n  var id = processNatives.GetExtensionId();\n  while (stack.length > 0 && stack[0].indexOf(id) == -1)\n    stack.shift();\n  while (stack.length > 0 && stack[stack.length - 1].indexOf(id) == -1)\n    stack.pop();\n\n  return stack.join('\\n');\n}\n\nfunction prepareRequest(args, argSchemas) {\n  var request = {};\n  var argCount = args.length;\n\n  // Look for callback param.\n  if (argSchemas.length > 0 &&\n      argSchemas[argSchemas.length - 1].type == \"function\") {\n    request.callback = args[args.length - 1];\n    request.callbackSchema = argSchemas[argSchemas.length - 1];\n    --argCount;\n  }\n\n  request.args = [];\n  for (var k = 0; k < argCount; k++) {\n    request.args[k] = args[k];\n  }\n\n  return request;\n}\n\n// Send an API request and optionally register a callback.\n// |optArgs| is an object with optional parameters as follows:\n// - customCallback: a callback that should be called instead of the standard\n//   callback.\n// - nativeFunction: the v8 native function to handle the request, or\n//   StartRequest if missing.\n// - forIOThread: true if this function should be handled on the browser IO\n//   thread.\n// - preserveNullInObjects: true if it is safe for null to be in objects.\nfunction sendRequest(functionName, args, argSchemas, optArgs) {\n  calledSendRequest = true;\n  if (!optArgs)\n    optArgs = {};\n  var request = prepareRequest(args, argSchemas);\n  request.stack = getExtensionStackTrace();\n  if (optArgs.customCallback) {\n    request.customCallback = optArgs.customCallback;\n  }\n\n  var nativeFunction = optArgs.nativeFunction || natives.StartRequest;\n\n  var requestId = natives.GetNextRequestId();\n  request.id = requestId;\n  requests[requestId] = request;\n\n  var hasCallback = request.callback || optArgs.customCallback;\n  return nativeFunction(functionName,\n                        request.args,\n                        requestId,\n                        hasCallback,\n                        optArgs.forIOThread,\n                        optArgs.preserveNullInObjects);\n}\n\nfunction getCalledSendRequest() {\n  return calledSendRequest;\n}\n\nfunction clearCalledSendRequest() {\n  calledSendRequest = false;\n}\n\nexports.sendRequest = sendRequest;\nexports.getCalledSendRequest = getCalledSendRequest;\nexports.clearCalledSendRequest = clearCalledSendRequest;\n\n// Called by C++.\nexports.handleResponse = handleResponse;\n\n})"}
],
[
{"endColumn":2,"endLine":83,"isContentScript":true,"scriptId":"191","startColumn":0,"startLine":0,"url":"extensions::lastError"},{"scriptSource":"(function(require, requireNative, exports, console, $Array, $Function, $JSON, $Object, $RegExp, $String) {'use strict';// Copyright (c) 2012 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nvar GetAvailability = requireNative('v8_context').GetAvailability;\nvar GetGlobal = requireNative('sendRequest').GetGlobal;\n\n// Utility for setting chrome.*.lastError.\n//\n// A utility here is useful for two reasons:\n//  1. For backwards compatibility we need to set chrome.extension.lastError,\n//     but not all contexts actually have access to the extension namespace.\n//  2. When calling across contexts, the global object that gets lastError set\n//     needs to be that of the caller. We force callers to explicitly specify\n//     the chrome object to try to prevent bugs here.\n\n/**\n * Sets the last error for |name| on |targetChrome| to |message| with an\n * optional |stack|.\n */\nfunction set(name, message, stack, targetChrome) {\n  var errorMessage = name + ': ' + message;\n  if (stack != null && stack != '')\n    errorMessage += '\\n' + stack;\n\n  if (!targetChrome)\n    throw new Error('No chrome object to set error: ' + errorMessage);\n  clear(targetChrome);  // in case somebody has set a sneaky getter/setter\n\n  var errorObject = { message: message };\n  if (GetAvailability('extension.lastError').is_available)\n    targetChrome.extension.lastError = errorObject;\n\n  assertRuntimeIsAvailable();\n  targetChrome.runtime.lastError = errorObject;\n};\n\n/**\n * Clears the last error on |targetChrome|.\n */\nfunction clear(targetChrome) {\n  if (!targetChrome)\n    throw new Error('No target chrome to clear error');\n\n  if (GetAvailability('extension.lastError').is_available)\n    delete targetChrome.extension.lastError;\n\n  assertRuntimeIsAvailable();\n  delete targetChrome.runtime.lastError;\n};\n\nfunction assertRuntimeIsAvailable() {\n  // chrome.runtime should always be available, but maybe it's disappeared for\n  // some reason? Add debugging for http://crbug.com/258526.\n  var runtimeAvailability = GetAvailability('runtime.lastError');\n  if (!runtimeAvailability.is_available) {\n    throw new Error('runtime.lastError is not available: ' +\n                    runtimeAvailability.message);\n  }\n  if (!chrome.runtime)\n    throw new Error('runtime namespace is null or undefined');\n}\n\n/**\n * Runs |callback(args)| with last error args as in set().\n *\n * The target chrome object is the global object's of the callback, so this\n * method won't work if the real callback has been wrapped (etc).\n */\nfunction run(name, message, stack, callback, args) {\n  var targetChrome = GetGlobal(callback).chrome;\n  set(name, message, stack, targetChrome);\n  try {\n    $Function.apply(callback, undefined, args);\n  } finally {\n    clear(targetChrome);\n  }\n}\n\nexports.clear = clear;\nexports.set = set;\nexports.run = run;\n\n})"}
],
[
{"endColumn":2,"endLine":157,"isContentScript":true,"scriptId":"192","startColumn":0,"startLine":0,"url":"extensions::schemaUtils"},{"scriptSource":"(function(require, requireNative, exports, console, $Array, $Function, $JSON, $Object, $RegExp, $String) {'use strict';// Copyright (c) 2012 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n// Routines used to validate and normalize arguments.\n// TODO(benwells): unit test this file.\n\nvar JSONSchemaValidator = require('json_schema').JSONSchemaValidator;\n\nvar schemaValidator = new JSONSchemaValidator();\n\n// Validate arguments.\nfunction validate(args, parameterSchemas) {\n  if (args.length > parameterSchemas.length)\n    throw new Error(\"Too many arguments.\");\n  for (var i = 0; i < parameterSchemas.length; i++) {\n    if (i in args && args[i] !== null && args[i] !== undefined) {\n      schemaValidator.resetErrors();\n      schemaValidator.validate(args[i], parameterSchemas[i]);\n      if (schemaValidator.errors.length == 0)\n        continue;\n      var message = \"Invalid value for argument \" + (i + 1) + \". \";\n      for (var i = 0, err;\n          err = schemaValidator.errors[i]; i++) {\n        if (err.path) {\n          message += \"Property '\" + err.path + \"': \";\n        }\n        message += err.message;\n        message = message.substring(0, message.length - 1);\n        message += \", \";\n      }\n      message = message.substring(0, message.length - 2);\n      message += \".\";\n      throw new Error(message);\n    } else if (!parameterSchemas[i].optional) {\n      throw new Error(\"Parameter \" + (i + 1) + \" (\" +\n          parameterSchemas[i].name + \") is required.\");\n    }\n  }\n}\n\n// Generate all possible signatures for a given API function.\nfunction getSignatures(parameterSchemas) {\n  if (parameterSchemas.length === 0)\n    return [[]];\n  var signatures = [];\n  var remaining = getSignatures($Array.slice(parameterSchemas, 1));\n  for (var i = 0; i < remaining.length; i++)\n    $Array.push(signatures, $Array.concat([parameterSchemas[0]], remaining[i]))\n  if (parameterSchemas[0].optional)\n    return $Array.concat(signatures, remaining);\n  return signatures;\n};\n\n// Return true if arguments match a given signature's schema.\nfunction argumentsMatchSignature(args, candidateSignature) {\n  if (args.length != candidateSignature.length)\n    return false;\n  for (var i = 0; i < candidateSignature.length; i++) {\n    var argType =  JSONSchemaValidator.getType(args[i]);\n    if (!schemaValidator.isValidSchemaType(argType,\n        candidateSignature[i]))\n      return false;\n  }\n  return true;\n};\n\n// Finds the function signature for the given arguments.\nfunction resolveSignature(args, definedSignature) {\n  var candidateSignatures = getSignatures(definedSignature);\n  for (var i = 0; i < candidateSignatures.length; i++) {\n    if (argumentsMatchSignature(args, candidateSignatures[i]))\n      return candidateSignatures[i];\n  }\n  return null;\n};\n\n// Returns a string representing the defined signature of the API function.\n// Example return value for chrome.windows.getCurrent:\n// \"windows.getCurrent(optional object populate, function callback)\"\nfunction getParameterSignatureString(name, definedSignature) {\n  var getSchemaTypeString = function(schema) {\n    var schemaTypes = schemaValidator.getAllTypesForSchema(schema);\n    var typeName = schemaTypes.join(\" or \") + \" \" + schema.name;\n    if (schema.optional)\n      return \"optional \" + typeName;\n    return typeName;\n  };\n  var typeNames = definedSignature.map(getSchemaTypeString);\n  return name + \"(\" + typeNames.join(\", \") + \")\";\n};\n\n// Returns a string representing a call to an API function.\n// Example return value for call: chrome.windows.get(1, callback) is:\n// \"windows.get(int, function)\"\nfunction getArgumentSignatureString(name, args) {\n  var typeNames = args.map(JSONSchemaValidator.getType);\n  return name + \"(\" + typeNames.join(\", \") + \")\";\n};\n\n// Finds the correct signature for the given arguments, then validates the\n// arguments against that signature. Returns a 'normalized' arguments list\n// where nulls are inserted where optional parameters were omitted.\n// |args| is expected to be an array.\nfunction normalizeArgumentsAndValidate(args, funDef) {\n  if (funDef.allowAmbiguousOptionalArguments) {\n    validate(args, funDef.definition.parameters);\n    return args;\n  }\n  var definedSignature = funDef.definition.parameters;\n  var resolvedSignature = resolveSignature(args, definedSignature);\n  if (!resolvedSignature)\n    throw new Error(\"Invocation of form \" +\n        getArgumentSignatureString(funDef.name, args) +\n        \" doesn't match definition \" +\n        getParameterSignatureString(funDef.name, definedSignature));\n  validate(args, resolvedSignature);\n  var normalizedArgs = [];\n  var ai = 0;\n  for (var si = 0; si < definedSignature.length; si++) {\n    if (definedSignature[si] === resolvedSignature[ai])\n      $Array.push(normalizedArgs, args[ai++]);\n    else\n      $Array.push(normalizedArgs, null);\n  }\n  return normalizedArgs;\n};\n\n// Validates that a given schema for an API function is not ambiguous.\nfunction isFunctionSignatureAmbiguous(functionDef) {\n  if (functionDef.allowAmbiguousOptionalArguments)\n    return false;\n  var signaturesAmbiguous = function(signature1, signature2) {\n    if (signature1.length != signature2.length)\n      return false;\n    for (var i = 0; i < signature1.length; i++) {\n      if (!schemaValidator.checkSchemaOverlap(\n          signature1[i], signature2[i]))\n        return false;\n    }\n    return true;\n  };\n  var candidateSignatures = getSignatures(functionDef.parameters);\n  for (var i = 0; i < candidateSignatures.length; i++) {\n    for (var j = i + 1; j < candidateSignatures.length; j++) {\n      if (signaturesAmbiguous(candidateSignatures[i], candidateSignatures[j]))\n        return true;\n    }\n  }\n  return false;\n};\n\nexports.isFunctionSignatureAmbiguous = isFunctionSignatureAmbiguous;\nexports.normalizeArgumentsAndValidate = normalizeArgumentsAndValidate;\nexports.schemaValidator = schemaValidator;\nexports.validate = validate;\n\n})"}
],
[
{"endColumn":2,"endLine":517,"isContentScript":true,"scriptId":"193","startColumn":0,"startLine":0,"url":"extensions::json_schema"},{"scriptSource":"(function(require, requireNative, exports, console, $Array, $Function, $JSON, $Object, $RegExp, $String) {'use strict';// Copyright (c) 2012 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n// -----------------------------------------------------------------------------\n// NOTE: If you change this file you need to touch renderer_resources.grd to\n// have your change take effect.\n// -----------------------------------------------------------------------------\n\n//==============================================================================\n// This file contains a class that implements a subset of JSON Schema.\n// See: http://www.json.com/json-schema-proposal/ for more details.\n//\n// The following features of JSON Schema are not implemented:\n// - requires\n// - unique\n// - disallow\n// - union types (but replaced with 'choices')\n//\n// The following properties are not applicable to the interface exposed by\n// this class:\n// - options\n// - readonly\n// - title\n// - description\n// - format\n// - default\n// - transient\n// - hidden\n//\n// There are also these departures from the JSON Schema proposal:\n// - function and undefined types are supported\n// - null counts as 'unspecified' for optional values\n// - added the 'choices' property, to allow specifying a list of possible types\n//   for a value\n// - by default an \"object\" typed schema does not allow additional properties.\n//   if present, \"additionalProperties\" is to be a schema against which all\n//   additional properties will be validated.\n//==============================================================================\n\nvar loadTypeSchema = require('utils').loadTypeSchema;\nvar CHECK = requireNative('logging').CHECK;\n\nfunction isInstanceOfClass(instance, className) {\n  while ((instance = instance.__proto__)) {\n    if (instance.constructor.name == className)\n      return true;\n  }\n  return false;\n}\n\nfunction isOptionalValue(value) {\n  return typeof(value) === 'undefined' || value === null;\n}\n\n/**\n * Validates an instance against a schema and accumulates errors. Usage:\n *\n * var validator = new JSONSchemaValidator();\n * validator.validate(inst, schema);\n * if (validator.errors.length == 0)\n *   console.log(\"Valid!\");\n * else\n *   console.log(validator.errors);\n *\n * The errors property contains a list of objects. Each object has two\n * properties: \"path\" and \"message\". The \"path\" property contains the path to\n * the key that had the problem, and the \"message\" property contains a sentence\n * describing the error.\n */\nfunction JSONSchemaValidator() {\n  this.errors = [];\n  this.types = [];\n}\n\nJSONSchemaValidator.messages = {\n  invalidEnum: \"Value must be one of: [*].\",\n  propertyRequired: \"Property is required.\",\n  unexpectedProperty: \"Unexpected property.\",\n  arrayMinItems: \"Array must have at least * items.\",\n  arrayMaxItems: \"Array must not have more than * items.\",\n  itemRequired: \"Item is required.\",\n  stringMinLength: \"String must be at least * characters long.\",\n  stringMaxLength: \"String must not be more than * characters long.\",\n  stringPattern: \"String must match the pattern: *.\",\n  numberFiniteNotNan: \"Value must not be *.\",\n  numberMinValue: \"Value must not be less than *.\",\n  numberMaxValue: \"Value must not be greater than *.\",\n  numberIntValue: \"Value must fit in a 32-bit signed integer.\",\n  numberMaxDecimal: \"Value must not have more than * decimal places.\",\n  invalidType: \"Expected '*' but got '*'.\",\n  invalidTypeIntegerNumber:\n      \"Expected 'integer' but got 'number', consider using Math.round().\",\n  invalidChoice: \"Value does not match any valid type choices.\",\n  invalidPropertyType: \"Missing property type.\",\n  schemaRequired: \"Schema value required.\",\n  unknownSchemaReference: \"Unknown schema reference: *.\",\n  notInstance: \"Object must be an instance of *.\"\n};\n\n/**\n * Builds an error message. Key is the property in the |errors| object, and\n * |opt_replacements| is an array of values to replace \"*\" characters with.\n */\nJSONSchemaValidator.formatError = function(key, opt_replacements) {\n  var message = this.messages[key];\n  if (opt_replacements) {\n    for (var i = 0; i < opt_replacements.length; i++) {\n      message = message.replace(\"*\", opt_replacements[i]);\n    }\n  }\n  return message;\n};\n\n/**\n * Classifies a value as one of the JSON schema primitive types. Note that we\n * don't explicitly disallow 'function', because we want to allow functions in\n * the input values.\n */\nJSONSchemaValidator.getType = function(value) {\n  var s = typeof value;\n\n  if (s == \"object\") {\n    if (value === null) {\n      return \"null\";\n    } else if (Object.prototype.toString.call(value) == \"[object Array]\") {\n      return \"array\";\n    } else if (typeof(ArrayBuffer) != \"undefined\" &&\n               value.constructor == ArrayBuffer) {\n      return \"binary\";\n    }\n  } else if (s == \"number\") {\n    if (value % 1 == 0) {\n      return \"integer\";\n    }\n  }\n\n  return s;\n};\n\n/**\n * Add types that may be referenced by validated schemas that reference them\n * with \"$ref\": <typeId>. Each type must be a valid schema and define an\n * \"id\" property.\n */\nJSONSchemaValidator.prototype.addTypes = function(typeOrTypeList) {\n  function addType(validator, type) {\n    if (!type.id)\n      throw new Error(\"Attempt to addType with missing 'id' property\");\n    validator.types[type.id] = type;\n  }\n\n  if (typeOrTypeList instanceof Array) {\n    for (var i = 0; i < typeOrTypeList.length; i++) {\n      addType(this, typeOrTypeList[i]);\n    }\n  } else {\n    addType(this, typeOrTypeList);\n  }\n}\n\n/**\n * Returns a list of strings of the types that this schema accepts.\n */\nJSONSchemaValidator.prototype.getAllTypesForSchema = function(schema) {\n  var schemaTypes = [];\n  if (schema.type)\n    $Array.push(schemaTypes, schema.type);\n  if (schema.choices) {\n    for (var i = 0; i < schema.choices.length; i++) {\n      var choiceTypes = this.getAllTypesForSchema(schema.choices[i]);\n      schemaTypes = $Array.concat(schemaTypes, choiceTypes);\n    }\n  }\n  var ref = schema['$ref'];\n  if (ref) {\n    var type = this.getOrAddType(ref);\n    CHECK(type, 'Could not find type ' + ref);\n    schemaTypes = $Array.concat(schemaTypes, this.getAllTypesForSchema(type));\n  }\n  return schemaTypes;\n};\n\nJSONSchemaValidator.prototype.getOrAddType = function(typeName) {\n  if (!this.types[typeName])\n    this.types[typeName] = loadTypeSchema(typeName);\n  return this.types[typeName];\n};\n\n/**\n * Returns true if |schema| would accept an argument of type |type|.\n */\nJSONSchemaValidator.prototype.isValidSchemaType = function(type, schema) {\n  if (type == 'any')\n    return true;\n\n  // TODO(kalman): I don't understand this code. How can type be \"null\"?\n  if (schema.optional && (type == \"null\" || type == \"undefined\"))\n    return true;\n\n  var schemaTypes = this.getAllTypesForSchema(schema);\n  for (var i = 0; i < schemaTypes.length; i++) {\n    if (schemaTypes[i] == \"any\" || type == schemaTypes[i])\n      return true;\n  }\n\n  return false;\n};\n\n/**\n * Returns true if there is a non-null argument that both |schema1| and\n * |schema2| would accept.\n */\nJSONSchemaValidator.prototype.checkSchemaOverlap = function(schema1, schema2) {\n  var schema1Types = this.getAllTypesForSchema(schema1);\n  for (var i = 0; i < schema1Types.length; i++) {\n    if (this.isValidSchemaType(schema1Types[i], schema2))\n      return true;\n  }\n  return false;\n};\n\n/**\n * Validates an instance against a schema. The instance can be any JavaScript\n * value and will be validated recursively. When this method returns, the\n * |errors| property will contain a list of errors, if any.\n */\nJSONSchemaValidator.prototype.validate = function(instance, schema, opt_path) {\n  var path = opt_path || \"\";\n\n  if (!schema) {\n    this.addError(path, \"schemaRequired\");\n    return;\n  }\n\n  // If this schema defines itself as reference type, save it in this.types.\n  if (schema.id)\n    this.types[schema.id] = schema;\n\n  // If the schema has an extends property, the instance must validate against\n  // that schema too.\n  if (schema.extends)\n    this.validate(instance, schema.extends, path);\n\n  // If the schema has a $ref property, the instance must validate against\n  // that schema too. It must be present in this.types to be referenced.\n  var ref = schema[\"$ref\"];\n  if (ref) {\n    if (!this.getOrAddType(ref))\n      this.addError(path, \"unknownSchemaReference\", [ ref ]);\n    else\n      this.validate(instance, this.getOrAddType(ref), path)\n  }\n\n  // If the schema has a choices property, the instance must validate against at\n  // least one of the items in that array.\n  if (schema.choices) {\n    this.validateChoices(instance, schema, path);\n    return;\n  }\n\n  // If the schema has an enum property, the instance must be one of those\n  // values.\n  if (schema.enum) {\n    if (!this.validateEnum(instance, schema, path))\n      return;\n  }\n\n  if (schema.type && schema.type != \"any\") {\n    if (!this.validateType(instance, schema, path))\n      return;\n\n    // Type-specific validation.\n    switch (schema.type) {\n      case \"object\":\n        this.validateObject(instance, schema, path);\n        break;\n      case \"array\":\n        this.validateArray(instance, schema, path);\n        break;\n      case \"string\":\n        this.validateString(instance, schema, path);\n        break;\n      case \"number\":\n      case \"integer\":\n        this.validateNumber(instance, schema, path);\n        break;\n    }\n  }\n};\n\n/**\n * Validates an instance against a choices schema. The instance must match at\n * least one of the provided choices.\n */\nJSONSchemaValidator.prototype.validateChoices =\n    function(instance, schema, path) {\n  var originalErrors = this.errors;\n\n  for (var i = 0; i < schema.choices.length; i++) {\n    this.errors = [];\n    this.validate(instance, schema.choices[i], path);\n    if (this.errors.length == 0) {\n      this.errors = originalErrors;\n      return;\n    }\n  }\n\n  this.errors = originalErrors;\n  this.addError(path, \"invalidChoice\");\n};\n\n/**\n * Validates an instance against a schema with an enum type. Populates the\n * |errors| property, and returns a boolean indicating whether the instance\n * validates.\n */\nJSONSchemaValidator.prototype.validateEnum = function(instance, schema, path) {\n  for (var i = 0; i < schema.enum.length; i++) {\n    if (instance === schema.enum[i])\n      return true;\n  }\n\n  this.addError(path, \"invalidEnum\", [schema.enum.join(\", \")]);\n  return false;\n};\n\n/**\n * Validates an instance against an object schema and populates the errors\n * property.\n */\nJSONSchemaValidator.prototype.validateObject =\n    function(instance, schema, path) {\n  if (schema.properties) {\n    for (var prop in schema.properties) {\n      // It is common in JavaScript to add properties to Object.prototype. This\n      // check prevents such additions from being interpreted as required\n      // schema properties.\n      // TODO(aa): If it ever turns out that we actually want this to work,\n      // there are other checks we could put here, like requiring that schema\n      // properties be objects that have a 'type' property.\n      if (!$Object.hasOwnProperty(schema.properties, prop))\n        continue;\n\n      var propPath = path ? path + \".\" + prop : prop;\n      if (schema.properties[prop] == undefined) {\n        this.addError(propPath, \"invalidPropertyType\");\n      } else if (prop in instance && !isOptionalValue(instance[prop])) {\n        this.validate(instance[prop], schema.properties[prop], propPath);\n      } else if (!schema.properties[prop].optional) {\n        this.addError(propPath, \"propertyRequired\");\n      }\n    }\n  }\n\n  // If \"instanceof\" property is set, check that this object inherits from\n  // the specified constructor (function).\n  if (schema.isInstanceOf) {\n    if (!isInstanceOfClass(instance, schema.isInstanceOf))\n      this.addError(propPath, \"notInstance\", [schema.isInstanceOf]);\n  }\n\n  // Exit early from additional property check if \"type\":\"any\" is defined.\n  if (schema.additionalProperties &&\n      schema.additionalProperties.type &&\n      schema.additionalProperties.type == \"any\") {\n    return;\n  }\n\n  // By default, additional properties are not allowed on instance objects. This\n  // can be overridden by setting the additionalProperties property to a schema\n  // which any additional properties must validate against.\n  for (var prop in instance) {\n    if (schema.properties && prop in schema.properties)\n      continue;\n\n    // Any properties inherited through the prototype are ignored.\n    if (!$Object.hasOwnProperty(instance, prop))\n      continue;\n\n    var propPath = path ? path + \".\" + prop : prop;\n    if (schema.additionalProperties)\n      this.validate(instance[prop], schema.additionalProperties, propPath);\n    else\n      this.addError(propPath, \"unexpectedProperty\");\n  }\n};\n\n/**\n * Validates an instance against an array schema and populates the errors\n * property.\n */\nJSONSchemaValidator.prototype.validateArray = function(instance, schema, path) {\n  var typeOfItems = JSONSchemaValidator.getType(schema.items);\n\n  if (typeOfItems == 'object') {\n    if (schema.minItems && instance.length < schema.minItems) {\n      this.addError(path, \"arrayMinItems\", [schema.minItems]);\n    }\n\n    if (typeof schema.maxItems != \"undefined\" &&\n        instance.length > schema.maxItems) {\n      this.addError(path, \"arrayMaxItems\", [schema.maxItems]);\n    }\n\n    // If the items property is a single schema, each item in the array must\n    // have that schema.\n    for (var i = 0; i < instance.length; i++) {\n      this.validate(instance[i], schema.items, path + \".\" + i);\n    }\n  } else if (typeOfItems == 'array') {\n    // If the items property is an array of schemas, each item in the array must\n    // validate against the corresponding schema.\n    for (var i = 0; i < schema.items.length; i++) {\n      var itemPath = path ? path + \".\" + i : String(i);\n      if (i in instance && !isOptionalValue(instance[i])) {\n        this.validate(instance[i], schema.items[i], itemPath);\n      } else if (!schema.items[i].optional) {\n        this.addError(itemPath, \"itemRequired\");\n      }\n    }\n\n    if (schema.additionalProperties) {\n      for (var i = schema.items.length; i < instance.length; i++) {\n        var itemPath = path ? path + \".\" + i : String(i);\n        this.validate(instance[i], schema.additionalProperties, itemPath);\n      }\n    } else {\n      if (instance.length > schema.items.length) {\n        this.addError(path, \"arrayMaxItems\", [schema.items.length]);\n      }\n    }\n  }\n};\n\n/**\n * Validates a string and populates the errors property.\n */\nJSONSchemaValidator.prototype.validateString =\n    function(instance, schema, path) {\n  if (schema.minLength && instance.length < schema.minLength)\n    this.addError(path, \"stringMinLength\", [schema.minLength]);\n\n  if (schema.maxLength && instance.length > schema.maxLength)\n    this.addError(path, \"stringMaxLength\", [schema.maxLength]);\n\n  if (schema.pattern && !schema.pattern.test(instance))\n    this.addError(path, \"stringPattern\", [schema.pattern]);\n};\n\n/**\n * Validates a number and populates the errors property. The instance is\n * assumed to be a number.\n */\nJSONSchemaValidator.prototype.validateNumber =\n    function(instance, schema, path) {\n  // Forbid NaN, +Infinity, and -Infinity.  Our APIs don't use them, and\n  // JSON serialization encodes them as 'null'.  Re-evaluate supporting\n  // them if we add an API that could reasonably take them as a parameter.\n  if (isNaN(instance) ||\n      instance == Number.POSITIVE_INFINITY ||\n      instance == Number.NEGATIVE_INFINITY )\n    this.addError(path, \"numberFiniteNotNan\", [instance]);\n\n  if (schema.minimum !== undefined && instance < schema.minimum)\n    this.addError(path, \"numberMinValue\", [schema.minimum]);\n\n  if (schema.maximum !== undefined && instance > schema.maximum)\n    this.addError(path, \"numberMaxValue\", [schema.maximum]);\n\n  // Check for integer values outside of -2^31..2^31-1.\n  if (schema.type === \"integer\" && (instance | 0) !== instance)\n    this.addError(path, \"numberIntValue\", []);\n\n  if (schema.maxDecimal && instance * Math.pow(10, schema.maxDecimal) % 1)\n    this.addError(path, \"numberMaxDecimal\", [schema.maxDecimal]);\n};\n\n/**\n * Validates the primitive type of an instance and populates the errors\n * property. Returns true if the instance validates, false otherwise.\n */\nJSONSchemaValidator.prototype.validateType = function(instance, schema, path) {\n  var actualType = JSONSchemaValidator.getType(instance);\n  if (schema.type == actualType ||\n      (schema.type == \"number\" && actualType == \"integer\")) {\n    return true;\n  } else if (schema.type == \"integer\" && actualType == \"number\") {\n    this.addError(path, \"invalidTypeIntegerNumber\");\n    return false;\n  } else {\n    this.addError(path, \"invalidType\", [schema.type, actualType]);\n    return false;\n  }\n};\n\n/**\n * Adds an error message. |key| is an index into the |messages| object.\n * |replacements| is an array of values to replace '*' characters in the\n * message.\n */\nJSONSchemaValidator.prototype.addError = function(path, key, replacements) {\n  $Array.push(this.errors, {\n    path: path,\n    message: JSONSchemaValidator.formatError(key, replacements)\n  });\n};\n\n/**\n * Resets errors to an empty list so you can call 'validate' again.\n */\nJSONSchemaValidator.prototype.resetErrors = function() {\n  this.errors = [];\n};\n\nexports.JSONSchemaValidator = JSONSchemaValidator;\n\n})"}
],
[
{"endColumn":2,"endLine":57,"isContentScript":true,"scriptId":"194","startColumn":0,"startLine":0,"url":"extensions::utils"},{"scriptSource":"(function(require, requireNative, exports, console, $Array, $Function, $JSON, $Object, $RegExp, $String) {'use strict';// Copyright (c) 2012 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nvar schemaRegistry = requireNative('schema_registry');\nvar CHECK = requireNative('logging').CHECK;\nvar WARNING = requireNative('logging').WARNING;\n\n// An object forEach. Calls |f| with each (key, value) pair of |obj|, using\n// |self| as the target.\nfunction forEach(obj, f, self) {\n  for (var key in obj) {\n    if ($Object.hasOwnProperty(obj, key))\n      $Function.call(f, self, key, obj[key]);\n  }\n}\n\n// Assuming |array_of_dictionaries| is structured like this:\n// [{id: 1, ... }, {id: 2, ...}, ...], you can use\n// lookup(array_of_dictionaries, 'id', 2) to get the dictionary with id == 2.\nfunction lookup(array_of_dictionaries, field, value) {\n  var filter = function (dict) {return dict[field] == value;};\n  var matches = array_of_dictionaries.filter(filter);\n  if (matches.length == 0) {\n    return undefined;\n  } else if (matches.length == 1) {\n    return matches[0]\n  } else {\n    throw new Error(\"Failed lookup of field '\" + field + \"' with value '\" +\n                    value + \"'\");\n  }\n}\n\nfunction loadTypeSchema(typeName, defaultSchema) {\n  var parts = $String.split(typeName, '.');\n  if (parts.length == 1) {\n    if (defaultSchema == null) {\n      WARNING('Trying to reference \"' + typeName + '\" ' +\n              'with neither namespace nor default schema.');\n      return null;\n    }\n    var types = defaultSchema.types;\n  } else {\n    var schemaName = $Array.join($Array.slice(parts, 0, parts.length - 1), '.');\n    var types = schemaRegistry.GetSchema(schemaName).types;\n  }\n  for (var i = 0; i < types.length; ++i) {\n    if (types[i].id == typeName)\n      return types[i];\n  }\n  return null;\n}\n\nexports.forEach = forEach;\nexports.loadTypeSchema = loadTypeSchema;\nexports.lookup = lookup;\n\n})"}
],
[
{"endColumn":2,"endLine":34,"isContentScript":true,"scriptId":"195","startColumn":0,"startLine":0,"url":"extensions::unload_event"},{"scriptSource":"(function(require, requireNative, exports, console, $Array, $Function, $JSON, $Object, $RegExp, $String) {'use strict';// Copyright 2013 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n// Special unload event. We don't use the DOM unload because that slows down\n// tab shutdown. On the other hand, onUnload might not always fire, since\n// Chrome will terminate renderers on shutdown (SuddenTermination).\n\n// Implement a primitive subset of the Event interface as needed, since if this\n// was to use the real event object there would be a circular dependency.\nvar listeners = [];\n\nexports.addListener = function(listener) {\n  $Array.push(listeners, listener);\n};\n\nexports.removeListener = function(listener) {\n  for (var i = 0; i < listeners.length; ++i) {\n    if (listeners[i] == listener) {\n      $Array.splice(listeners, i, 1);\n      return;\n    }\n  }\n};\n\nexports.wasDispatched = false;\n\n// dispatch() is called from C++.\nexports.dispatch = function() {\n  exports.wasDispatched = true;\n  for (var i = 0; i < listeners.length; ++i)\n    listeners[i]();\n};\n\n})"}
],
[
{"endColumn":2,"endLine":35,"isContentScript":true,"scriptId":"196","startColumn":0,"startLine":0,"url":"extensions::messaging_utils"},{"scriptSource":"(function(require, requireNative, exports, console, $Array, $Function, $JSON, $Object, $RegExp, $String) {'use strict';// Copyright 2013 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n// Routines used to normalize arguments to messaging functions.\n\nfunction alignSendMessageArguments(args) {\n  // Align missing (optional) function arguments with the arguments that\n  // schema validation is expecting, e.g.\n  //   extension.sendRequest(req)     -> extension.sendRequest(null, req)\n  //   extension.sendRequest(req, cb) -> extension.sendRequest(null, req, cb)\n  if (!args || !args.length)\n    return null;\n  var lastArg = args.length - 1;\n\n  // responseCallback (last argument) is optional.\n  var responseCallback = null;\n  if (typeof(args[lastArg]) == 'function')\n    responseCallback = args[lastArg--];\n\n  // request (second argument) is required.\n  var request = args[lastArg--];\n\n  // targetId (first argument, extensionId in the manifest) is optional.\n  var targetId = null;\n  if (lastArg >= 0)\n    targetId = args[lastArg--];\n\n  if (lastArg != -1)\n    return null;\n  return [targetId, request, responseCallback];\n}\n\nexports.alignSendMessageArguments = alignSendMessageArguments;\n\n})"}
],
[
{"endColumn":2,"endLine":115,"isContentScript":true,"scriptId":"197","startColumn":0,"startLine":0,"url":"extensions::extension"},{"scriptSource":"(function(require, requireNative, exports, console, $Array, $Function, $JSON, $Object, $RegExp, $String) {'use strict';// Copyright (c) 2012 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n// Custom binding for the extension API.\n\nvar binding = require('binding').Binding.create('extension');\n\nvar extensionNatives = requireNative('extension');\nvar GetExtensionViews = extensionNatives.GetExtensionViews;\nvar messaging = require('messaging');\nvar runtimeNatives = requireNative('runtime');\nvar OpenChannelToExtension = runtimeNatives.OpenChannelToExtension;\nvar OpenChannelToNativeApp = runtimeNatives.OpenChannelToNativeApp;\nvar chrome = requireNative('chrome').GetChrome();\n\nvar inIncognitoContext = requireNative('process').InIncognitoContext();\nvar sendRequestIsDisabled = requireNative('process').IsSendRequestDisabled();\nvar contextType = requireNative('process').GetContextType();\nvar manifestVersion = requireNative('process').GetManifestVersion();\n\n// This should match chrome.windows.WINDOW_ID_NONE.\n//\n// We can't use chrome.windows.WINDOW_ID_NONE directly because the\n// chrome.windows API won't exist unless this extension has permission for it;\n// which may not be the case.\nvar WINDOW_ID_NONE = -1;\n\nbinding.registerCustomHook(function(bindingsAPI, extensionId) {\n  var extension = bindingsAPI.compiledApi;\n  if (manifestVersion < 2) {\n    chrome.self = extension;\n    extension.inIncognitoTab = inIncognitoContext;\n  }\n  extension.inIncognitoContext = inIncognitoContext;\n\n  var apiFunctions = bindingsAPI.apiFunctions;\n\n  apiFunctions.setHandleRequest('getViews', function(properties) {\n    var windowId = WINDOW_ID_NONE;\n    var type = 'ALL';\n    if (properties) {\n      if (properties.type != null) {\n        type = properties.type;\n      }\n      if (properties.windowId != null) {\n        windowId = properties.windowId;\n      }\n    }\n    return GetExtensionViews(windowId, type);\n  });\n\n  apiFunctions.setHandleRequest('getBackgroundPage', function() {\n    return GetExtensionViews(-1, 'BACKGROUND')[0] || null;\n  });\n\n  apiFunctions.setHandleRequest('getExtensionTabs', function(windowId) {\n    if (windowId == null)\n      windowId = WINDOW_ID_NONE;\n    return GetExtensionViews(windowId, 'TAB');\n  });\n\n  apiFunctions.setHandleRequest('getURL', function(path) {\n    path = String(path);\n    if (!path.length || path[0] != '/')\n      path = '/' + path;\n    return 'chrome-extension://' + extensionId + path;\n  });\n\n  // Alias several messaging deprecated APIs to their runtime counterparts.\n  var mayNeedAlias = [\n    // Types\n    'Port',\n    // Functions\n    'connect', 'sendMessage', 'connectNative', 'sendNativeMessage',\n    // Events\n    'onConnect', 'onConnectExternal', 'onMessage', 'onMessageExternal'\n  ];\n  $Array.forEach(mayNeedAlias, function(alias) {\n    // Checking existence isn't enough since some functions are disabled via\n    // getters that throw exceptions. Assume that any getter is such a function.\n    if (chrome.runtime &&\n        $Object.hasOwnProperty(chrome.runtime, alias) &&\n        chrome.runtime.__lookupGetter__(alias) === undefined) {\n      extension[alias] = chrome.runtime[alias];\n    }\n  });\n\n  apiFunctions.setUpdateArgumentsPreValidate('sendRequest',\n      $Function.bind(messaging.sendMessageUpdateArguments,\n                     null, 'sendRequest'));\n\n  apiFunctions.setHandleRequest('sendRequest',\n                                function(targetId, request, responseCallback) {\n    if (sendRequestIsDisabled)\n      throw new Error(sendRequestIsDisabled);\n    var port = chrome.runtime.connect(targetId || extensionId,\n                                      {name: messaging.kRequestChannel});\n    messaging.sendMessageImpl(port, request, responseCallback);\n  });\n\n  if (sendRequestIsDisabled) {\n    extension.onRequest.addListener = function() {\n      throw new Error(sendRequestIsDisabled);\n    };\n    if (contextType == 'BLESSED_EXTENSION') {\n      extension.onRequestExternal.addListener = function() {\n        throw new Error(sendRequestIsDisabled);\n      };\n    }\n  }\n});\n\nexports.binding = binding.generate();\n\n})"}
]
]